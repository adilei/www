var ACDesigner =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/adaptivecards-designer.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "../adaptivecards-controls/lib/adaptivecards-controls.js":
/*!***************************************************************!*\
  !*** ../adaptivecards-controls/lib/adaptivecards-controls.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
__export(__webpack_require__(/*! ./constants */ "../adaptivecards-controls/lib/constants.js"));
__export(__webpack_require__(/*! ./enums */ "../adaptivecards-controls/lib/enums.js"));
__export(__webpack_require__(/*! ./utils */ "../adaptivecards-controls/lib/utils.js"));
__export(__webpack_require__(/*! ./collection */ "../adaptivecards-controls/lib/collection.js"));
__export(__webpack_require__(/*! ./inputcontrol */ "../adaptivecards-controls/lib/inputcontrol.js"));
__export(__webpack_require__(/*! ./inputwithpopup */ "../adaptivecards-controls/lib/inputwithpopup.js"));
__export(__webpack_require__(/*! ./calendar */ "../adaptivecards-controls/lib/calendar.js"));
__export(__webpack_require__(/*! ./dropdown */ "../adaptivecards-controls/lib/dropdown.js"));
__export(__webpack_require__(/*! ./datepicker */ "../adaptivecards-controls/lib/datepicker.js"));
__export(__webpack_require__(/*! ./checkbox */ "../adaptivecards-controls/lib/checkbox.js"));
__export(__webpack_require__(/*! ./radiobutton */ "../adaptivecards-controls/lib/radiobutton.js"));
__export(__webpack_require__(/*! ./textbox */ "../adaptivecards-controls/lib/textbox.js"));
__export(__webpack_require__(/*! ./popupmenu */ "../adaptivecards-controls/lib/popupmenu.js"));
//# sourceMappingURL=adaptivecards-controls.js.map

/***/ }),

/***/ "../adaptivecards-controls/lib/calendar.js":
/*!*************************************************!*\
  !*** ../adaptivecards-controls/lib/calendar.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Utils = __webpack_require__(/*! ./utils */ "../adaptivecards-controls/lib/utils.js");
var Constants = __webpack_require__(/*! ./constants */ "../adaptivecards-controls/lib/constants.js");
var inputcontrol_1 = __webpack_require__(/*! ./inputcontrol */ "../adaptivecards-controls/lib/inputcontrol.js");
var DayCell = /** @class */ (function () {
    function DayCell(date) {
        this._isSubdued = false;
        this._isSelected = false;
        this.date = date;
    }
    DayCell.prototype.selected = function () {
        if (this.onSelected) {
            this.onSelected(this);
        }
    };
    DayCell.prototype.render = function () {
        var _this = this;
        this._element = document.createElement("div");
        this._element.className = "ms-ctrl ms-ctrl-calendarDay";
        this._element.innerText = this.date.getDate().toString();
        this._element.tabIndex = 0;
        this._element.onclick = function (e) { _this.selected(); };
        this._element.onkeydown = function (e) {
            if (e.keyCode == Constants.KEY_ENTER) {
                _this.selected();
                return false;
            }
        };
        return this._element;
    };
    DayCell.prototype.focus = function () {
        this._element.focus();
    };
    Object.defineProperty(DayCell.prototype, "isSubdued", {
        get: function () {
            return this._isSubdued;
        },
        set: function (value) {
            this._isSubdued = value;
            if (this._isSubdued) {
                this._element.classList.add("subdued");
            }
            else {
                this._element.classList.remove("subdued");
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DayCell.prototype, "isSelected", {
        get: function () {
            return this._isSelected;
        },
        set: function (value) {
            this._isSelected = value;
            if (this._isSelected) {
                this._element.classList.add("selected");
            }
            else {
                this._element.classList.remove("selected");
            }
        },
        enumerable: true,
        configurable: true
    });
    return DayCell;
}());
exports.DayCell = DayCell;
var Calendar = /** @class */ (function (_super) {
    __extends(Calendar, _super);
    function Calendar() {
        var _this = _super.call(this) || this;
        _this._selectedDay = null;
        _this._miniCalendarElement = document.createElement("table");
        _this._miniCalendarElement.className = "ms-ctrl ms-ctrl-slide";
        _this._miniCalendarElement.cellPadding = "0px";
        _this._miniCalendarElement.cellSpacing = "0px";
        var miniCalendarHeader = document.createElement("div");
        miniCalendarHeader.className = "ms-ctrl ms-ctrl-calendarHeader";
        miniCalendarHeader.style.display = "flex";
        _this._monthYearLabelElement = document.createElement("div");
        _this._monthYearLabelElement.style.flex = "1 1 100%";
        miniCalendarHeader.appendChild(_this._monthYearLabelElement);
        var navButtons = document.createElement("div");
        navButtons.style.flex = "0 0 auto";
        var button = document.createElement("i");
        button.className = "ms-icon ms-ctrl-calendarNavButton ms-icon-chevronLeft";
        button.tabIndex = 0;
        button.onclick = function (e) {
            _this.date = Utils.addMonths(_this.date, -1);
        };
        button.onkeydown = function (e) {
            if (e.keyCode == Constants.KEY_ENTER) {
                _this.date = Utils.addMonths(_this.date, -1);
                return false;
            }
        };
        navButtons.appendChild(button);
        button = document.createElement("i");
        button.className = "ms-icon ms-ctrl-calendarNavButton ms-icon-chevronRight";
        button.tabIndex = 0;
        button.onclick = function (e) {
            _this.date = Utils.addMonths(_this.date, 1);
        };
        button.onkeydown = function (e) {
            if (e.keyCode == Constants.KEY_ENTER) {
                _this.date = Utils.addMonths(_this.date, 1);
                return false;
            }
        };
        navButtons.appendChild(button);
        miniCalendarHeader.appendChild(navButtons);
        _this._rootContainerElement = document.createElement("div");
        _this._rootContainerElement.className = "ms-ctrl ms-ctrl-calendar";
        _this._rootContainerElement.appendChild(miniCalendarHeader);
        _this._rootContainerElement.appendChild(_this._miniCalendarElement);
        _this.date = new Date();
        return _this;
    }
    Calendar.prototype.generateDayCells = function (baseDate) {
        var _this = this;
        this._days = [];
        var inputMonth = baseDate.getMonth();
        var inputYear = baseDate.getFullYear();
        var start = new Date(inputYear, inputMonth, 1);
        var end = new Date(inputYear, inputMonth, Utils.daysInMonth(inputYear, inputMonth));
        var startDateDayOfWeek = start.getDay();
        if ((startDateDayOfWeek - Utils.CalendarSettings.firstDayOfWeek) > 0) {
            start = Utils.addDays(start, Utils.CalendarSettings.firstDayOfWeek - startDateDayOfWeek);
        }
        var endDateDayOfWeek = end.getDay();
        var lastDayOfWeek = Utils.CalendarSettings.firstDayOfWeek + 6;
        if ((lastDayOfWeek - endDateDayOfWeek) > 0) {
            end = Utils.addDays(end, lastDayOfWeek - endDateDayOfWeek);
        }
        var endDate = end.getDate();
        var endMonth = end.getMonth();
        var endYear = end.getFullYear();
        do {
            var dayCell = new DayCell(start);
            dayCell.onSelected = function (clickedCell) {
                _this.selectedDayCell = clickedCell;
                if (_this.onDateChanged) {
                    _this.onDateChanged(_this);
                }
            };
            this._days.push(dayCell);
            var done = start.getDate() == endDate && start.getMonth() == endMonth && start.getFullYear() == endYear;
            start = Utils.addDays(start, 1);
        } while (!done);
    };
    Object.defineProperty(Calendar.prototype, "selectedDayCell", {
        get: function () {
            return this._selectedDay;
        },
        set: function (value) {
            if (this._selectedDay) {
                this._selectedDay.isSelected = false;
            }
            this._selectedDay = value;
            if (this._selectedDay) {
                this._selectedDay.isSelected = true;
                this._date = this._selectedDay.date;
            }
        },
        enumerable: true,
        configurable: true
    });
    Calendar.prototype.initializeSelection = function () {
        if (this._date) {
            for (var i = 0; i < this._days.length; i++) {
                if (Utils.areDatesEqual(this._days[i].date, this.date)) {
                    this.selectedDayCell = this._days[i];
                    break;
                }
            }
        }
    };
    Calendar.prototype.rebuildMiniCalendar = function (newDate, oldDate) {
        this.generateDayCells(newDate);
        var month = newDate.getMonth();
        this._miniCalendarElement.innerHTML = "";
        this._miniCalendarElement.classList.remove("ms-ctrl-slide", "ms-ctrl-slideLeftToRight", "ms-ctrl-slideRightToLeft");
        var row = document.createElement("tr");
        var dayIndex = Utils.CalendarSettings.firstDayOfWeek;
        for (var i = 0; i < Utils.CalendarSettings.daysInWeek; i++) {
            var cell = document.createElement("td");
            cell.className = "ms-ctrl ms-ctrl-calendarDayHeader";
            cell.innerText = Utils.CalendarSettings.getInitialDayName(dayIndex);
            row.appendChild(cell);
            dayIndex++;
            if (dayIndex >= Utils.CalendarSettings.daysInWeek) {
                dayIndex = 0;
            }
        }
        this._miniCalendarElement.appendChild(row);
        for (var i = 0; i < this._days.length; i++) {
            if (i % 7 == 0) {
                row = document.createElement("tr");
                this._miniCalendarElement.appendChild(row);
            }
            var tableCell = document.createElement("td");
            tableCell.appendChild(this._days[i].render());
            if (this._days[i].date.getMonth() != month) {
                this._days[i].isSubdued = true;
            }
            row.appendChild(tableCell);
        }
        if (oldDate) {
            var timeDelta = newDate.getTime() - oldDate.getTime();
            if (timeDelta > 0) {
                this._miniCalendarElement.classList.add("ms-ctrl-slide", "ms-ctrl-slideRightToLeft");
            }
            else if (timeDelta < 0) {
                this._miniCalendarElement.classList.add("ms-ctrl-slide", "ms-ctrl-slideLeftToRight");
            }
        }
    };
    Calendar.prototype.attach = function (rootElement) {
        _super.prototype.attach.call(this, rootElement);
        rootElement.innerHTML = "";
        rootElement.appendChild(this._rootContainerElement);
    };
    Calendar.prototype.focus = function () {
        if (this._selectedDay) {
            this._selectedDay.focus();
        }
    };
    Object.defineProperty(Calendar.prototype, "date", {
        get: function () {
            return this._date;
        },
        set: function (value) {
            var rebuildNeeded = true;
            var timeDelta = 0;
            var newDate = value ? value : new Date();
            if (this._date) {
                rebuildNeeded = !this._days || newDate.getFullYear() != this._date.getFullYear() || newDate.getMonth() != this._date.getMonth();
            }
            if (rebuildNeeded) {
                this.rebuildMiniCalendar(newDate, this._date);
            }
            this._date = newDate;
            this.initializeSelection();
            this._monthYearLabelElement.innerText = Utils.CalendarSettings.getLongMonthName(this._date.getMonth()) + " " + this._date.getFullYear();
        },
        enumerable: true,
        configurable: true
    });
    return Calendar;
}(inputcontrol_1.InputControl));
exports.Calendar = Calendar;
//# sourceMappingURL=calendar.js.map

/***/ }),

/***/ "../adaptivecards-controls/lib/checkbox.js":
/*!*************************************************!*\
  !*** ../adaptivecards-controls/lib/checkbox.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Constants = __webpack_require__(/*! ./constants */ "../adaptivecards-controls/lib/constants.js");
var inputcontrol_1 = __webpack_require__(/*! ./inputcontrol */ "../adaptivecards-controls/lib/inputcontrol.js");
var CheckBox = /** @class */ (function (_super) {
    __extends(CheckBox, _super);
    function CheckBox() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._label = "";
        _this._checkboxElement = null;
        _this._spanElement = null;
        return _this;
    }
    CheckBox.createId = function () {
        var result = CheckBox.creationIndex;
        CheckBox.creationIndex++;
        return result;
    };
    CheckBox.prototype.changed = function () {
        if (this.onChange) {
            this.onChange(this);
        }
    };
    CheckBox.prototype.keyDown = function (e) {
        switch (e.keyCode) {
            case Constants.KEY_ENTER:
                this.isChecked = !this.isChecked;
                break;
        }
    };
    CheckBox.prototype.attach = function (rootElement) {
        var _this = this;
        _super.prototype.attach.call(this, rootElement);
        rootElement.className = "ms-ctrl ms-ctrl-checkbox";
        rootElement.tabIndex = 0;
        var labelAttribute = rootElement.attributes["label"];
        if (labelAttribute) {
            this._label = labelAttribute.value;
        }
        var isCheckedAttribute = rootElement.attributes["ischecked"];
        if (isCheckedAttribute) {
            this._isChecked = isCheckedAttribute.value === "true";
        }
        this._checkboxElement = document.createElement("input");
        this._checkboxElement.id = "ms-ctrl-checkbox-" + CheckBox.createId();
        this._checkboxElement.type = "checkbox";
        this._checkboxElement.style.position = "absolute";
        this._checkboxElement.checked = this.isChecked;
        this._checkboxElement.onchange = function (e) { _this.changed(); };
        var labelElement = document.createElement("label");
        labelElement.htmlFor = this._checkboxElement.id;
        this._spanElement = document.createElement("span");
        this._spanElement.innerText = this._label;
        labelElement.appendChild(this._spanElement);
        rootElement.innerHTML = "";
        rootElement.appendChild(this._checkboxElement);
        rootElement.appendChild(labelElement);
    };
    Object.defineProperty(CheckBox.prototype, "label", {
        get: function () {
            return this._label;
        },
        set: function (value) {
            this._label = value;
            if (this._spanElement) {
                this._spanElement.innerText = this._label;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CheckBox.prototype, "isChecked", {
        get: function () {
            return this._isChecked;
        },
        set: function (value) {
            if (this._isChecked != value) {
                this._isChecked = value;
                if (this._checkboxElement) {
                    this._checkboxElement.checked = this._isChecked;
                }
                this.changed();
            }
        },
        enumerable: true,
        configurable: true
    });
    // Used to generate unique Ids
    CheckBox.creationIndex = 0;
    return CheckBox;
}(inputcontrol_1.InputControl));
exports.CheckBox = CheckBox;
//# sourceMappingURL=checkbox.js.map

/***/ }),

/***/ "../adaptivecards-controls/lib/collection.js":
/*!***************************************************!*\
  !*** ../adaptivecards-controls/lib/collection.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Collection = /** @class */ (function () {
    function Collection() {
        this._items = [];
        this.onItemAdded = null;
        this.onItemRemoved = null;
    }
    Collection.prototype.get = function (index) {
        return this._items[index];
    };
    Collection.prototype.add = function (item) {
        this._items.push(item);
        if (this.onItemAdded) {
            this.onItemAdded(item);
        }
    };
    Collection.prototype.remove = function (item) {
        var i = this._items.indexOf(item);
        if (i >= 0) {
            this._items = this._items.splice(i, 1);
            if (this.onItemRemoved) {
                this.onItemRemoved(item);
            }
        }
    };
    Collection.prototype.indexOf = function (item) {
        return this._items.indexOf(item);
    };
    Object.defineProperty(Collection.prototype, "length", {
        get: function () {
            return this._items.length;
        },
        enumerable: true,
        configurable: true
    });
    return Collection;
}());
exports.Collection = Collection;
//# sourceMappingURL=collection.js.map

/***/ }),

/***/ "../adaptivecards-controls/lib/constants.js":
/*!**************************************************!*\
  !*** ../adaptivecards-controls/lib/constants.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
exports.KEY_TAB = 9;
exports.KEY_ENTER = 13;
exports.KEY_ESCAPE = 27;
exports.KEY_UP = 38;
exports.KEY_DOWN = 40;
exports.KEY_DELETE = 46;
//# sourceMappingURL=constants.js.map

/***/ }),

/***/ "../adaptivecards-controls/lib/datepicker.js":
/*!***************************************************!*\
  !*** ../adaptivecards-controls/lib/datepicker.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var inputwithpopup_1 = __webpack_require__(/*! ./inputwithpopup */ "../adaptivecards-controls/lib/inputwithpopup.js");
var calendar_1 = __webpack_require__(/*! ./calendar */ "../adaptivecards-controls/lib/calendar.js");
var CalendarPopupControl = /** @class */ (function (_super) {
    __extends(CalendarPopupControl, _super);
    function CalendarPopupControl(owner) {
        var _this = _super.call(this) || this;
        _this._owner = owner;
        return _this;
    }
    CalendarPopupControl.prototype.renderContent = function () {
        var _this = this;
        var element = document.createElement("div");
        element.className = "ms-ctrl ms-calendarPopup";
        this._calendar = new calendar_1.Calendar();
        this._calendar.date = this._owner.value;
        this._calendar.onDateChanged = function (c) {
            _this._owner.value = c.date;
            _this.close();
        };
        this._calendar.attach(element);
        return element;
    };
    CalendarPopupControl.prototype.focus = function () {
        if (this._calendar) {
            this._calendar.focus();
        }
    };
    return CalendarPopupControl;
}(inputwithpopup_1.PopupControl));
exports.CalendarPopupControl = CalendarPopupControl;
var DatePicker = /** @class */ (function (_super) {
    __extends(DatePicker, _super);
    function DatePicker() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DatePicker.prototype.validateRootElement = function (rootElement) {
        if (!(rootElement instanceof HTMLDivElement)) {
            throw new Error("DatePicker requires a DIV element as its root.");
        }
    };
    DatePicker.prototype.createPopupControl = function () {
        return new CalendarPopupControl(this);
    };
    DatePicker.prototype.getValueAsString = function () {
        return this.value.toLocaleDateString();
    };
    DatePicker.prototype.getCssClassName = function () {
        return "ms-ctrl ms-ctrl-datePicker";
    };
    DatePicker.prototype.getButtonIconCssClassName = function () {
        return "ms-icon-calendar";
    };
    DatePicker.prototype.popup = function () {
        _super.prototype.popup.call(this);
        if (this.isOpen) {
            this.popupControl.focus();
        }
    };
    return DatePicker;
}(inputwithpopup_1.InputWithPopup));
exports.DatePicker = DatePicker;
//# sourceMappingURL=datepicker.js.map

/***/ }),

/***/ "../adaptivecards-controls/lib/dropdown.js":
/*!*************************************************!*\
  !*** ../adaptivecards-controls/lib/dropdown.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Constants = __webpack_require__(/*! ./constants */ "../adaptivecards-controls/lib/constants.js");
var collection_1 = __webpack_require__(/*! ./collection */ "../adaptivecards-controls/lib/collection.js");
var inputwithpopup_1 = __webpack_require__(/*! ./inputwithpopup */ "../adaptivecards-controls/lib/inputwithpopup.js");
var DropDownItem = /** @class */ (function () {
    function DropDownItem(key, value) {
        this.key = key;
        this._value = value;
    }
    DropDownItem.prototype.click = function () {
        if (this.onClick) {
            this.onClick(this);
        }
    };
    DropDownItem.prototype.toString = function () {
        return this.value;
    };
    DropDownItem.prototype.render = function () {
        var _this = this;
        if (!this._element) {
            this._element = document.createElement("span");
            this._element.className = "ms-ctrl ms-ctrl-dropdown-item";
            this._element.innerText = this.value;
            this._element.onmouseup = function (e) { _this.click(); };
        }
        return this._element;
    };
    Object.defineProperty(DropDownItem.prototype, "value", {
        get: function () {
            return this._value;
        },
        set: function (newValue) {
            this._value = newValue;
            if (this._element) {
                this._element.innerText = newValue;
            }
        },
        enumerable: true,
        configurable: true
    });
    return DropDownItem;
}());
exports.DropDownItem = DropDownItem;
var DropDownPopupControl = /** @class */ (function (_super) {
    __extends(DropDownPopupControl, _super);
    function DropDownPopupControl(owner) {
        var _this = _super.call(this) || this;
        _this._renderedItems = [];
        _this._selectedIndex = -1;
        _this._owner = owner;
        return _this;
    }
    DropDownPopupControl.prototype.renderContent = function () {
        var element = document.createElement("div");
        element.className = "ms-ctrl ms-popup";
        var selectedIndex = this._owner.selectedIndex;
        for (var i = 0; i < this._owner.items.length; i++) {
            var renderedItem = this._owner.items.get(i).render();
            renderedItem.tabIndex = 0;
            element.appendChild(renderedItem);
            if (i == selectedIndex) {
                renderedItem.focus();
            }
            this._renderedItems.push(renderedItem);
        }
        return element;
    };
    DropDownPopupControl.prototype.keyDown = function (e) {
        _super.prototype.keyDown.call(this, e);
        var selectedItemIndex = this._selectedIndex;
        switch (e.keyCode) {
            case Constants.KEY_TAB:
                this.close();
                break;
            case Constants.KEY_ENTER:
                if (this.selectedIndex >= 0) {
                    this._owner.selectedIndex = this.selectedIndex;
                    this.close();
                }
                break;
            case Constants.KEY_UP:
                if (selectedItemIndex <= 0) {
                    selectedItemIndex = this._renderedItems.length - 1;
                }
                else {
                    selectedItemIndex--;
                    if (selectedItemIndex < 0) {
                        selectedItemIndex = this._renderedItems.length - 1;
                    }
                }
                this.selectedIndex = selectedItemIndex;
                e.cancelBubble = true;
                break;
            case Constants.KEY_DOWN:
                if (selectedItemIndex < 0) {
                    selectedItemIndex = 0;
                }
                else {
                    selectedItemIndex++;
                    if (selectedItemIndex >= this._renderedItems.length) {
                        selectedItemIndex = 0;
                    }
                }
                this.selectedIndex = selectedItemIndex;
                e.cancelBubble = true;
                break;
        }
    };
    DropDownPopupControl.prototype.render = function (rootElementBounds) {
        var renderedElement = _super.prototype.render.call(this, rootElementBounds);
        renderedElement.style.minWidth = (rootElementBounds.width / 2) + "px";
        renderedElement.style.maxWidth = rootElementBounds.width + "px";
        return renderedElement;
    };
    Object.defineProperty(DropDownPopupControl.prototype, "selectedIndex", {
        get: function () {
            return this._selectedIndex;
        },
        set: function (index) {
            if (index >= 0 && index < this._renderedItems.length) {
                this._renderedItems[index].focus();
                this._selectedIndex = index;
            }
        },
        enumerable: true,
        configurable: true
    });
    return DropDownPopupControl;
}(inputwithpopup_1.PopupControl));
exports.DropDownPopupControl = DropDownPopupControl;
var DropDown = /** @class */ (function (_super) {
    __extends(DropDown, _super);
    function DropDown() {
        var _this = _super.call(this) || this;
        _this._items = new collection_1.Collection();
        _this._items.onItemAdded = function (item) { item.onClick = function (clickedItem) { _this.itemClicked(clickedItem); }; };
        _this._items.onItemRemoved = function (item) { item.onClick = null; };
        return _this;
    }
    DropDown.prototype.itemClicked = function (item) {
        this.selectedItem = item;
        this.closePopup();
        this.rootElement.focus();
    };
    DropDown.prototype.validateRootElement = function (rootElement) {
        if (!(rootElement instanceof HTMLDivElement)) {
            throw new Error("DropDown requires a DIV element as its root.");
        }
    };
    DropDown.prototype.createPopupControl = function () {
        return new DropDownPopupControl(this);
    };
    DropDown.prototype.getCssClassName = function () {
        return "ms-ctrl ms-ctrl-dropdown";
    };
    DropDown.prototype.attach = function (rootElement) {
        _super.prototype.attach.call(this, rootElement);
        for (var i = 0; i < this.rootElement.children.length; i++) {
            var childElement = this.rootElement.children[i];
            if (childElement.tagName.toLowerCase() == "ms-dropdown-item") {
                var item = new DropDownItem(childElement.attributes.getNamedItem("key").value, childElement.attributes.getNamedItem("value").value);
                this._items.add(item);
            }
        }
    };
    DropDown.prototype.popup = function () {
        _super.prototype.popup.call(this);
        this.popupControl.selectedIndex = this.selectedIndex;
    };
    Object.defineProperty(DropDown.prototype, "items", {
        get: function () {
            return this._items;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DropDown.prototype, "selectedItem", {
        get: function () {
            return this.value;
        },
        set: function (newValue) {
            this.value = newValue;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DropDown.prototype, "selectedIndex", {
        get: function () {
            return this.items.indexOf(this.value);
        },
        set: function (index) {
            if (index >= 0 && this.items.length > index) {
                this.selectedItem = this.items.get(index);
            }
        },
        enumerable: true,
        configurable: true
    });
    return DropDown;
}(inputwithpopup_1.InputWithPopup));
exports.DropDown = DropDown;
//# sourceMappingURL=dropdown.js.map

/***/ }),

/***/ "../adaptivecards-controls/lib/enums.js":
/*!**********************************************!*\
  !*** ../adaptivecards-controls/lib/enums.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var DayOfWeek;
(function (DayOfWeek) {
    DayOfWeek[DayOfWeek["Sunday"] = 0] = "Sunday";
    DayOfWeek[DayOfWeek["Monday"] = 1] = "Monday";
    DayOfWeek[DayOfWeek["Tuesday"] = 2] = "Tuesday";
    DayOfWeek[DayOfWeek["Wednesday"] = 3] = "Wednesday";
    DayOfWeek[DayOfWeek["Thursday"] = 4] = "Thursday";
    DayOfWeek[DayOfWeek["Friday"] = 5] = "Friday";
    DayOfWeek[DayOfWeek["Saturday"] = 6] = "Saturday";
})(DayOfWeek = exports.DayOfWeek || (exports.DayOfWeek = {}));
//# sourceMappingURL=enums.js.map

/***/ }),

/***/ "../adaptivecards-controls/lib/inputcontrol.js":
/*!*****************************************************!*\
  !*** ../adaptivecards-controls/lib/inputcontrol.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var InputControl = /** @class */ (function () {
    function InputControl() {
    }
    InputControl.prototype.validateRootElement = function (rootElement) {
        // Do nothing - all root element types are valid.
    };
    InputControl.prototype.keyDown = function (e) {
        // Do nothing in base implementation
    };
    Object.defineProperty(InputControl.prototype, "rootElement", {
        get: function () {
            return this._rootElement;
        },
        enumerable: true,
        configurable: true
    });
    InputControl.prototype.attach = function (rootElement) {
        var _this = this;
        this.validateRootElement(rootElement);
        this._rootElement = rootElement;
        this._rootElement.onkeydown = function (e) { _this.keyDown(e); };
    };
    return InputControl;
}());
exports.InputControl = InputControl;
//# sourceMappingURL=inputcontrol.js.map

/***/ }),

/***/ "../adaptivecards-controls/lib/inputwithpopup.js":
/*!*******************************************************!*\
  !*** ../adaptivecards-controls/lib/inputwithpopup.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Constants = __webpack_require__(/*! ./constants */ "../adaptivecards-controls/lib/constants.js");
var Utils = __webpack_require__(/*! ./utils */ "../adaptivecards-controls/lib/utils.js");
var inputcontrol_1 = __webpack_require__(/*! ./inputcontrol */ "../adaptivecards-controls/lib/inputcontrol.js");
var PopupControl = /** @class */ (function () {
    function PopupControl() {
    }
    PopupControl.prototype.close = function () {
        if (this.onClose) {
            this.onClose(this);
        }
    };
    PopupControl.prototype.keyDown = function (e) {
        switch (e.keyCode) {
            case Constants.KEY_ESCAPE:
                this.close();
                break;
        }
    };
    PopupControl.prototype.render = function (rootElementBounds) {
        var _this = this;
        this._popupElement = document.createElement("div");
        this._popupElement.tabIndex = 0;
        this._popupElement.className = "ms-ctrl ms-ctrl-popup-container";
        this._popupElement.onkeydown = function (e) {
            _this.keyDown(e);
            return !e.cancelBubble;
        };
        this._popupElement.appendChild(this.renderContent());
        return this._popupElement;
    };
    PopupControl.prototype.focus = function () {
        if (this._popupElement) {
            this._popupElement.firstElementChild.focus();
        }
    };
    return PopupControl;
}());
exports.PopupControl = PopupControl;
var InputWithPopup = /** @class */ (function (_super) {
    __extends(InputWithPopup, _super);
    function InputWithPopup() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    InputWithPopup.prototype.keyDown = function (e) {
        switch (e.keyCode) {
            case Constants.KEY_ENTER:
                this.popup();
                break;
        }
    };
    InputWithPopup.prototype.updateLabel = function () {
        if (this._labelElement) {
            if (this._value) {
                this._labelElement.innerHTML = this.getValueAsString();
                this._labelElement.classList.remove("placeholder");
            }
            else {
                this._labelElement.innerText = this._placeholderText ? this._placeholderText : "";
                this._labelElement.classList.add("placeholder");
            }
        }
    };
    Object.defineProperty(InputWithPopup.prototype, "popupControl", {
        get: function () {
            return this._popupControl;
        },
        enumerable: true,
        configurable: true
    });
    InputWithPopup.prototype.getButtonIconCssClassName = function () {
        return "ms-icon-chevronDown";
    };
    InputWithPopup.prototype.getValueAsString = function () {
        return this._value.toString();
    };
    InputWithPopup.prototype.valueChanged = function () {
        if (this.onValueChanged) {
            this.onValueChanged(this);
        }
    };
    InputWithPopup.prototype.attach = function (rootElement) {
        var _this = this;
        _super.prototype.attach.call(this, rootElement);
        rootElement.tabIndex = 0;
        rootElement.className = this.getCssClassName();
        window.addEventListener("resize", function (e) { _this.closePopup(); });
        this.rootElement.onclick = function (e) {
            if (_this._isOpen) {
                _this.closePopup();
            }
            else {
                _this.popup();
            }
        };
        var placeHolderDomItem = this.rootElement.attributes.getNamedItem("placeholder");
        if (placeHolderDomItem) {
            this._placeholderText = placeHolderDomItem.value;
        }
        this._labelElement = document.createElement("span");
        this._labelElement.className = "ms-ctrl ms-dropdown-label";
        this._dropDownButtonElement = document.createElement("i");
        this._dropDownButtonElement.className = "ms-icon ms-ctrl-dropdown-button " + this.getButtonIconCssClassName();
        ;
        this.rootElement.appendChild(this._labelElement);
        this.rootElement.appendChild(this._dropDownButtonElement);
        this.updateLabel();
    };
    InputWithPopup.prototype.popup = function () {
        var _this = this;
        if (!this._isOpen) {
            this._overlayElement = document.createElement("div");
            this._overlayElement.className = "ms-ctrl-overlay";
            this._overlayElement.tabIndex = 0;
            this._overlayElement.style.width = document.documentElement.scrollWidth + "px";
            this._overlayElement.style.height = document.documentElement.scrollHeight + "px";
            this._overlayElement.onfocus = function (e) { _this.closePopup(); };
            document.body.appendChild(this._overlayElement);
            this._popupControl = this.createPopupControl();
            this._popupControl.onClose = function (sender) {
                _this.closePopup();
                _this.rootElement.focus();
            };
            var rootElementBounds = this.rootElement.getBoundingClientRect();
            this._popupControlElement = this._popupControl.render(rootElementBounds);
            this._popupControlElement.classList.remove("ms-ctrl-slide", "ms-ctrl-slideLeftToRight", "ms-ctrl-slideRightToLeft", "ms-ctrl-slideTopToBottom", "ms-ctrl-slideRightToLeft");
            this._overlayElement.appendChild(this._popupControlElement);
            var popupElementBounds = this._popupControlElement.getBoundingClientRect();
            var availableSpaceBelow = window.innerHeight - rootElementBounds.bottom;
            var availableSpaceAbove = rootElementBounds.top;
            var left = rootElementBounds.left + Utils.getScrollX();
            var top;
            if (availableSpaceAbove < popupElementBounds.height && availableSpaceBelow < popupElementBounds.height) {
                // Not enough space above or below root element
                var actualPopupHeight = Math.min(popupElementBounds.height, window.innerHeight);
                this._popupControlElement.style.maxHeight = actualPopupHeight + "px";
                if (actualPopupHeight < popupElementBounds.height) {
                    top = Utils.getScrollY();
                }
                else {
                    top = Utils.getScrollY() + rootElementBounds.top + (rootElementBounds.height - actualPopupHeight) / 2;
                }
                var availableSpaceRight = window.innerWidth - rootElementBounds.right;
                var availableSpaceLeft = rootElementBounds.left;
                if (availableSpaceLeft < popupElementBounds.width && availableSpaceRight < popupElementBounds.width) {
                    // Not enough space left or right of root element
                    var actualPopupWidth = Math.min(popupElementBounds.width, window.innerWidth);
                    this._popupControlElement.style.maxWidth = actualPopupWidth + "px";
                    if (actualPopupWidth < popupElementBounds.width) {
                        left = Utils.getScrollX();
                    }
                    else {
                        left = Utils.getScrollX() + rootElementBounds.left + (rootElementBounds.width - actualPopupWidth) / 2;
                    }
                }
                else {
                    // Enough space on the left or right of the root element
                    if (availableSpaceRight >= popupElementBounds.width) {
                        left = Utils.getScrollX() + rootElementBounds.right;
                        this._popupControlElement.classList.add("ms-ctrl-slide", "ms-ctrl-slideLeftToRight");
                    }
                    else {
                        left = Utils.getScrollX() + rootElementBounds.left - popupElementBounds.width;
                        this._popupControlElement.classList.add("ms-ctrl-slide", "ms-ctrl-slideRightToLeft");
                    }
                }
            }
            else {
                // Enough space above or below root element
                if (availableSpaceBelow >= popupElementBounds.height) {
                    top = Utils.getScrollY() + rootElementBounds.bottom;
                    this._popupControlElement.classList.add("ms-ctrl-slide", "ms-ctrl-slideTopToBottom");
                }
                else {
                    top = Utils.getScrollY() + rootElementBounds.top - popupElementBounds.height;
                    this._popupControlElement.classList.add("ms-ctrl-slide", "ms-ctrl-slideBottomToTop");
                }
            }
            this._popupControlElement.style.left = left + "px";
            this._popupControlElement.style.top = top + "px";
            this._popupControlElement.focus();
            this._isOpen = true;
        }
    };
    InputWithPopup.prototype.closePopup = function () {
        if (this._isOpen) {
            document.body.removeChild(this._overlayElement);
            this._isOpen = false;
        }
    };
    Object.defineProperty(InputWithPopup.prototype, "isOpen", {
        get: function () {
            return this._isOpen;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputWithPopup.prototype, "placeholderText", {
        get: function () {
            return this._placeholderText;
        },
        set: function (value) {
            this._placeholderText = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputWithPopup.prototype, "value", {
        get: function () {
            return this._value;
        },
        set: function (newValue) {
            if (this._value != newValue) {
                this._value = newValue;
                this.updateLabel();
                this.valueChanged();
            }
        },
        enumerable: true,
        configurable: true
    });
    return InputWithPopup;
}(inputcontrol_1.InputControl));
exports.InputWithPopup = InputWithPopup;
//# sourceMappingURL=inputwithpopup.js.map

/***/ }),

/***/ "../adaptivecards-controls/lib/popupmenu.js":
/*!**************************************************!*\
  !*** ../adaptivecards-controls/lib/popupmenu.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Utils = __webpack_require__(/*! ./utils */ "../adaptivecards-controls/lib/utils.js");
var Constants = __webpack_require__(/*! ./constants */ "../adaptivecards-controls/lib/constants.js");
var collection_1 = __webpack_require__(/*! ./collection */ "../adaptivecards-controls/lib/collection.js");
var inputwithpopup_1 = __webpack_require__(/*! ./inputwithpopup */ "../adaptivecards-controls/lib/inputwithpopup.js");
var PopupMenu = /** @class */ (function (_super) {
    __extends(PopupMenu, _super);
    function PopupMenu() {
        var _this = _super.call(this) || this;
        _this._items = new collection_1.Collection();
        _this._renderedItems = [];
        _this._selectedIndex = -1;
        return _this;
    }
    PopupMenu.prototype.renderContent = function () {
        var element = document.createElement("div");
        element.className = "ms-ctrl ms-popup";
        for (var i = 0; i < this._items.length; i++) {
            var renderedItem = this._items.get(i).render();
            renderedItem.tabIndex = 0;
            element.appendChild(renderedItem);
            if (i == this.selectedIndex) {
                renderedItem.focus();
            }
            this._renderedItems.push(renderedItem);
        }
        return element;
    };
    PopupMenu.prototype.keyDown = function (e) {
        _super.prototype.keyDown.call(this, e);
        var selectedItemIndex = this._selectedIndex;
        switch (e.keyCode) {
            case Constants.KEY_TAB:
                this.close();
                break;
            /*
            case Constants.KEY_ENTER:
                if (this.selectedIndex >= 0) {
                    this.selectedIndex = this.selectedIndex;

                    this.close();
                }

                break;
            */
            case Constants.KEY_UP:
                if (selectedItemIndex <= 0) {
                    selectedItemIndex = this._renderedItems.length - 1;
                }
                else {
                    selectedItemIndex--;
                    if (selectedItemIndex < 0) {
                        selectedItemIndex = this._renderedItems.length - 1;
                    }
                }
                this.selectedIndex = selectedItemIndex;
                e.cancelBubble = true;
                break;
            case Constants.KEY_DOWN:
                if (selectedItemIndex < 0) {
                    selectedItemIndex = 0;
                }
                else {
                    selectedItemIndex++;
                    if (selectedItemIndex >= this._renderedItems.length) {
                        selectedItemIndex = 0;
                    }
                }
                this.selectedIndex = selectedItemIndex;
                e.cancelBubble = true;
                break;
        }
    };
    PopupMenu.prototype.popup = function (rootElement) {
        var _this = this;
        if (!this._isOpen) {
            this._overlayElement = document.createElement("div");
            this._overlayElement.className = "ms-ctrl-overlay";
            this._overlayElement.tabIndex = 0;
            this._overlayElement.style.width = document.documentElement.scrollWidth + "px";
            this._overlayElement.style.height = document.documentElement.scrollHeight + "px";
            this._overlayElement.onfocus = function (e) { _this.closePopup(); };
            document.body.appendChild(this._overlayElement);
            var rootElementBounds = rootElement.getBoundingClientRect();
            this._popupControlElement = this.render(rootElementBounds);
            this._popupControlElement.classList.remove("ms-ctrl-slide", "ms-ctrl-slideLeftToRight", "ms-ctrl-slideRightToLeft", "ms-ctrl-slideTopToBottom", "ms-ctrl-slideRightToLeft");
            this._overlayElement.appendChild(this._popupControlElement);
            var popupElementBounds = this._popupControlElement.getBoundingClientRect();
            var availableSpaceBelow = window.innerHeight - rootElementBounds.bottom;
            var availableSpaceAbove = rootElementBounds.top;
            var left = rootElementBounds.left + Utils.getScrollX();
            var top;
            if (availableSpaceAbove < popupElementBounds.height && availableSpaceBelow < popupElementBounds.height) {
                // Not enough space above or below root element
                var maxPopupHeight = window.innerHeight;
                this._popupControlElement.style.maxHeight = maxPopupHeight + "px";
                if (maxPopupHeight < popupElementBounds.height) {
                    top = Utils.getScrollY();
                }
                else {
                    top = Utils.getScrollY() + rootElementBounds.top + (rootElementBounds.height - maxPopupHeight) / 2;
                }
                var availableSpaceRight = window.innerWidth - rootElementBounds.right;
                var availableSpaceLeft = rootElementBounds.left;
                if (availableSpaceLeft < popupElementBounds.width && availableSpaceRight < popupElementBounds.width) {
                    // Not enough space left or right of root element
                    var maxPopupWidth = window.innerWidth;
                    this._popupControlElement.style.maxWidth = maxPopupWidth + "px";
                    if (maxPopupWidth < popupElementBounds.width) {
                        left = Utils.getScrollX();
                    }
                    else {
                        left = Utils.getScrollX() + rootElementBounds.left + (rootElementBounds.width - maxPopupWidth) / 2;
                    }
                }
                else {
                    // Enough space on the left or right of the root element
                    if (availableSpaceRight >= popupElementBounds.width) {
                        left = Utils.getScrollX() + rootElementBounds.right;
                        this._popupControlElement.classList.add("ms-ctrl-slide", "ms-ctrl-slideLeftToRight");
                    }
                    else {
                        left = Utils.getScrollX() + rootElementBounds.left - popupElementBounds.width;
                        this._popupControlElement.classList.add("ms-ctrl-slide", "ms-ctrl-slideRightToLeft");
                    }
                }
            }
            else {
                // Enough space above or below root element
                if (availableSpaceBelow >= popupElementBounds.height) {
                    top = Utils.getScrollY() + rootElementBounds.bottom;
                    this._popupControlElement.classList.add("ms-ctrl-slide", "ms-ctrl-slideTopToBottom");
                }
                else {
                    top = Utils.getScrollY() + rootElementBounds.top - popupElementBounds.height;
                    this._popupControlElement.classList.add("ms-ctrl-slide", "ms-ctrl-slideBottomToTop");
                }
            }
            this._popupControlElement.style.left = left + "px";
            this._popupControlElement.style.top = top + "px";
            this._popupControlElement.focus();
            this._isOpen = true;
        }
    };
    PopupMenu.prototype.closePopup = function () {
        if (this._isOpen) {
            document.body.removeChild(this._overlayElement);
            this._isOpen = false;
        }
    };
    Object.defineProperty(PopupMenu.prototype, "isOpen", {
        get: function () {
            return this._isOpen;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PopupMenu.prototype, "items", {
        get: function () {
            return this._items;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PopupMenu.prototype, "selectedIndex", {
        get: function () {
            return this._selectedIndex;
        },
        set: function (index) {
            if (index >= 0 && index < this._renderedItems.length) {
                this._renderedItems[index].focus();
                this._selectedIndex = index;
            }
        },
        enumerable: true,
        configurable: true
    });
    return PopupMenu;
}(inputwithpopup_1.PopupControl));
exports.PopupMenu = PopupMenu;
//# sourceMappingURL=popupmenu.js.map

/***/ }),

/***/ "../adaptivecards-controls/lib/radiobutton.js":
/*!****************************************************!*\
  !*** ../adaptivecards-controls/lib/radiobutton.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Constants = __webpack_require__(/*! ./constants */ "../adaptivecards-controls/lib/constants.js");
var inputcontrol_1 = __webpack_require__(/*! ./inputcontrol */ "../adaptivecards-controls/lib/inputcontrol.js");
var RadioButton = /** @class */ (function (_super) {
    __extends(RadioButton, _super);
    function RadioButton() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._label = "";
        _this._checkboxElement = null;
        _this._spanElement = null;
        return _this;
    }
    RadioButton.createId = function () {
        var result = RadioButton.creationIndex;
        RadioButton.creationIndex++;
        return result;
    };
    RadioButton.prototype.changed = function () {
        if (this.onChange) {
            this.onChange(this);
        }
    };
    RadioButton.prototype.keyDown = function (e) {
        switch (e.keyCode) {
            case Constants.KEY_ENTER:
                this.isChecked = !this.isChecked;
                break;
        }
    };
    RadioButton.prototype.attach = function (rootElement) {
        var _this = this;
        _super.prototype.attach.call(this, rootElement);
        rootElement.className = "ms-ctrl ms-ctrl-radiobutton";
        rootElement.tabIndex = 0;
        var labelAttribute = rootElement.attributes["label"];
        if (labelAttribute) {
            this._label = labelAttribute.value;
        }
        var isCheckedAttribute = rootElement.attributes["ischecked"];
        if (isCheckedAttribute) {
            this._isChecked = isCheckedAttribute.value === "true";
        }
        this._checkboxElement = document.createElement("input");
        this._checkboxElement.id = "ms-ctrl-radio-" + RadioButton.createId();
        this._checkboxElement.type = "radio";
        this._checkboxElement.style.position = "absolute";
        this._checkboxElement.checked = this.isChecked;
        this._checkboxElement.onchange = function (e) { _this.changed(); };
        var groupNameAttribute = rootElement.attributes["groupname"];
        if (groupNameAttribute) {
            this._checkboxElement.name = groupNameAttribute.value;
        }
        var labelElement = document.createElement("label");
        labelElement.htmlFor = this._checkboxElement.id;
        this._spanElement = document.createElement("span");
        this._spanElement.innerText = this._label;
        labelElement.appendChild(this._spanElement);
        rootElement.innerHTML = "";
        rootElement.appendChild(this._checkboxElement);
        rootElement.appendChild(labelElement);
    };
    Object.defineProperty(RadioButton.prototype, "label", {
        get: function () {
            return this._label;
        },
        set: function (value) {
            this._label = value;
            if (this._spanElement) {
                this._spanElement.innerText = this._label;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RadioButton.prototype, "isChecked", {
        get: function () {
            return this._isChecked;
        },
        set: function (value) {
            if (this._isChecked != value) {
                this._isChecked = value;
                if (this._checkboxElement) {
                    this._checkboxElement.checked = this._isChecked;
                }
                this.changed();
            }
        },
        enumerable: true,
        configurable: true
    });
    // Used to generate unique Ids
    RadioButton.creationIndex = 0;
    return RadioButton;
}(inputcontrol_1.InputControl));
exports.RadioButton = RadioButton;
//# sourceMappingURL=radiobutton.js.map

/***/ }),

/***/ "../adaptivecards-controls/lib/textbox.js":
/*!************************************************!*\
  !*** ../adaptivecards-controls/lib/textbox.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Utils = __webpack_require__(/*! ./utils */ "../adaptivecards-controls/lib/utils.js");
var inputcontrol_1 = __webpack_require__(/*! ./inputcontrol */ "../adaptivecards-controls/lib/inputcontrol.js");
var EditBox = /** @class */ (function () {
    function EditBox() {
    }
    EditBox.prototype.changed = function () {
        if (this.onChange) {
            this.onChange();
        }
    };
    return EditBox;
}());
var SingleLineEditBox = /** @class */ (function (_super) {
    __extends(SingleLineEditBox, _super);
    function SingleLineEditBox() {
        var _this = _super.call(this) || this;
        _this._inputElement = document.createElement("input");
        _this._inputElement.className = "ms-ctrl ms-ctrl-textbox";
        _this._inputElement.type = "text";
        _this._inputElement.oninput = function (e) {
            _this.changed();
        };
        return _this;
    }
    Object.defineProperty(SingleLineEditBox.prototype, "element", {
        get: function () {
            return this._inputElement;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SingleLineEditBox.prototype, "placeholder", {
        set: function (value) {
            this._inputElement.placeholder = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SingleLineEditBox.prototype, "lineCount", {
        set: function (value) {
            // lineCount can't be set on a SingleLineEditBox
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SingleLineEditBox.prototype, "maxLength", {
        set: function (value) {
            if (this._inputElement.maxLength != value) {
                this._inputElement.maxLength = value;
                this.value = this.value.substr(0, value);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SingleLineEditBox.prototype, "value", {
        get: function () {
            return this._inputElement.value;
        },
        set: function (newValue) {
            this._inputElement.value = newValue;
        },
        enumerable: true,
        configurable: true
    });
    return SingleLineEditBox;
}(EditBox));
var MultilineEditBox = /** @class */ (function (_super) {
    __extends(MultilineEditBox, _super);
    function MultilineEditBox() {
        var _this = _super.call(this) || this;
        _this._textareaElement = document.createElement("textarea");
        _this._textareaElement.className = "ms-ctrl ms-ctrl-textbox ms-ctrl-textbox-multiline";
        _this._textareaElement.oninput = function (e) {
            _this.changed();
        };
        return _this;
    }
    Object.defineProperty(MultilineEditBox.prototype, "element", {
        get: function () {
            return this._textareaElement;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MultilineEditBox.prototype, "placeholder", {
        set: function (value) {
            this._textareaElement.placeholder = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MultilineEditBox.prototype, "lineCount", {
        set: function (value) {
            this._textareaElement.rows = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MultilineEditBox.prototype, "maxLength", {
        set: function (value) {
            if (this._textareaElement.maxLength != value) {
                this._textareaElement.maxLength = value;
                this.value = this.value.substr(0, value);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MultilineEditBox.prototype, "value", {
        get: function () {
            return this._textareaElement.value;
        },
        set: function (newValue) {
            this._textareaElement.value = newValue;
        },
        enumerable: true,
        configurable: true
    });
    return MultilineEditBox;
}(EditBox));
var TextBox = /** @class */ (function (_super) {
    __extends(TextBox, _super);
    function TextBox() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._isMultiline = false;
        _this._lineCount = 3;
        return _this;
    }
    TextBox.prototype.editBoxChanged = function () {
        if (this.onChange) {
            this.onChange(this);
        }
    };
    TextBox.prototype.recreateEditBox = function () {
        var _this = this;
        var currentValue = null;
        if (this._editBox) {
            currentValue = this._editBox.value;
        }
        else {
            currentValue = this.rootElement.innerText;
        }
        if (this._isMultiline) {
            this._editBox = new MultilineEditBox();
        }
        else {
            this._editBox = new SingleLineEditBox();
        }
        if (currentValue) {
            this._editBox.value = currentValue;
        }
        this._editBox.lineCount = this._lineCount;
        this._editBox.maxLength = this._maxLength;
        this._editBox.placeholder = this._placeholder;
        this._editBox.onChange = function () { _this.editBoxChanged(); };
        this.rootElement.innerHTML = "";
        this.rootElement.appendChild(this._editBox.element);
    };
    Object.defineProperty(TextBox.prototype, "editBox", {
        get: function () {
            if (!this._editBox) {
                this.recreateEditBox();
            }
            return this._editBox;
        },
        enumerable: true,
        configurable: true
    });
    TextBox.prototype.attach = function (rootElement) {
        _super.prototype.attach.call(this, rootElement);
        this._isMultiline = Utils.getAttributeValueAsBool(rootElement, "ismultiline", false);
        this._lineCount = Utils.getAttributeValueAsInt(rootElement, "lines", 3);
        this._maxLength = Utils.getAttributeValueAsInt(rootElement, "maxlength", 50000);
        this._placeholder = Utils.getAttributeValueAsString(rootElement, "placeholder", null);
        this.recreateEditBox();
    };
    Object.defineProperty(TextBox.prototype, "value", {
        get: function () {
            return this.editBox.value;
        },
        set: function (newValue) {
            this.editBox.value = newValue;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TextBox.prototype, "placeholder", {
        get: function () {
            return this._placeholder;
        },
        set: function (value) {
            this._placeholder = value;
            this.editBox.placeholder = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TextBox.prototype, "isMultiline", {
        get: function () {
            return this._isMultiline;
        },
        set: function (value) {
            if (this._isMultiline != value) {
                this._isMultiline = value;
                this.recreateEditBox();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TextBox.prototype, "lineCount", {
        get: function () {
            return this._lineCount;
        },
        set: function (value) {
            if (value > 0) {
                this._lineCount = value;
                this.editBox.lineCount = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TextBox.prototype, "maxLength", {
        get: function () {
            return this._maxLength;
        },
        set: function (value) {
            if (value > 0) {
                this._maxLength = value;
                this.editBox.maxLength = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    return TextBox;
}(inputcontrol_1.InputControl));
exports.TextBox = TextBox;
//# sourceMappingURL=textbox.js.map

/***/ }),

/***/ "../adaptivecards-controls/lib/utils.js":
/*!**********************************************!*\
  !*** ../adaptivecards-controls/lib/utils.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Enums = __webpack_require__(/*! ./enums */ "../adaptivecards-controls/lib/enums.js");
var CalendarSettings = /** @class */ (function () {
    function CalendarSettings() {
    }
    CalendarSettings.getLongDayName = function (dayIndex) {
        if (dayIndex >= 0 && dayIndex < CalendarSettings.longDayNames.length) {
            return CalendarSettings.longDayNames[dayIndex];
        }
        throw new Error("Day index out of range: " + dayIndex);
    };
    CalendarSettings.getShortDayName = function (dayIndex) {
        if (dayIndex >= 0 && dayIndex < CalendarSettings.shortDayNames.length) {
            return CalendarSettings.shortDayNames[dayIndex];
        }
        throw new Error("Day index out of range: " + dayIndex);
    };
    CalendarSettings.getInitialDayName = function (dayIndex) {
        if (dayIndex >= 0 && dayIndex < CalendarSettings.minimalDayNames.length) {
            return CalendarSettings.minimalDayNames[dayIndex];
        }
        throw new Error("Day index out of range: " + dayIndex);
    };
    CalendarSettings.getLongMonthName = function (monthIndex) {
        if (monthIndex >= 0 && monthIndex < CalendarSettings.longMonthNames.length) {
            return CalendarSettings.longMonthNames[monthIndex];
        }
        throw new Error("Month index out of range: " + monthIndex);
    };
    CalendarSettings.getShortMonthName = function (monthIndex) {
        if (monthIndex >= 0 && monthIndex < CalendarSettings.shortMonthNames.length) {
            return CalendarSettings.shortMonthNames[monthIndex];
        }
        throw new Error("Month index out of range: " + monthIndex);
    };
    CalendarSettings.monthsInYear = 12;
    CalendarSettings.daysInWeek = 7;
    CalendarSettings.firstDayOfWeek = Enums.DayOfWeek.Sunday;
    CalendarSettings.longDayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    CalendarSettings.shortDayNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
    CalendarSettings.minimalDayNames = ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"];
    CalendarSettings.longMonthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    CalendarSettings.shortMonthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
    return CalendarSettings;
}());
exports.CalendarSettings = CalendarSettings;
function daysInMonth(year, month) {
    switch (month) {
        case 1:
            return (year % 4 == 0 && year % 100) || year % 400 == 0 ? 29 : 28;
        case 3:
        case 5:
        case 8:
        case 10:
            return 30;
        default:
            return 31;
    }
}
exports.daysInMonth = daysInMonth;
function addDays(date, days) {
    var result = new Date(date.getTime());
    result.setDate(result.getDate() + days);
    return result;
}
exports.addDays = addDays;
function addMonths(date, months) {
    var result = new Date(date.getTime());
    var newMonth = result.getMonth() + months;
    result.setMonth(newMonth);
    // We want to maintain the same day-of-month, but that may not be possible if the new month doesn't have enough days.
    // Loop until we back up to a day the new month has.
    // (Weird modulo math is due to Javascript's treatment of negative numbers in modulo)
    if (result.getMonth() !== ((newMonth % CalendarSettings.monthsInYear) + CalendarSettings.monthsInYear) % CalendarSettings.monthsInYear) {
        result = addDays(result, -result.getDate());
    }
    return result;
}
exports.addMonths = addMonths;
function areDatesEqual(date1, date2) {
    return date1.getFullYear() == date2.getFullYear() &&
        date1.getMonth() == date2.getMonth() &&
        date1.getDate() == date2.getDate();
}
exports.areDatesEqual = areDatesEqual;
function getScrollX() {
    return window.pageXOffset;
}
exports.getScrollX = getScrollX;
function getScrollY() {
    return window.pageYOffset;
}
exports.getScrollY = getScrollY;
function getAttributeValueAsBool(element, attributeName, defaultValue) {
    var attribute = element.attributes[attributeName];
    if (attribute) {
        return attribute.value === "true";
    }
    return defaultValue;
}
exports.getAttributeValueAsBool = getAttributeValueAsBool;
function getAttributeValueAsString(element, attributeName, defaultValue) {
    var attribute = element.attributes[attributeName];
    if (attribute) {
        return attribute.value;
    }
    return defaultValue;
}
exports.getAttributeValueAsString = getAttributeValueAsString;
function getAttributeValueAsInt(element, attributeName, defaultValue) {
    var attribute = element.attributes[attributeName];
    if (attribute) {
        var n = parseInt(attribute.value);
        if (!isNaN(n)) {
            return n;
        }
    }
    return defaultValue;
}
exports.getAttributeValueAsInt = getAttributeValueAsInt;
//# sourceMappingURL=utils.js.map

/***/ }),

/***/ "../adaptivecards-templating/lib/adaptivecards-templating.js":
/*!*******************************************************************!*\
  !*** ../adaptivecards-templating/lib/adaptivecards-templating.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
__export(__webpack_require__(/*! ./expression-parser */ "../adaptivecards-templating/lib/expression-parser.js"));
__export(__webpack_require__(/*! ./template-engine */ "../adaptivecards-templating/lib/template-engine.js"));
__export(__webpack_require__(/*! ./shared */ "../adaptivecards-templating/lib/shared.js"));
//# sourceMappingURL=adaptivecards-templating.js.map

/***/ }),

/***/ "../adaptivecards-templating/lib/expression-parser.js":
/*!************************************************************!*\
  !*** ../adaptivecards-templating/lib/expression-parser.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var orderedOperators = [
    "/",
    "*",
    "-",
    "+",
    "==",
    "!=",
    "<",
    "<=",
    ">",
    ">="
];
var literals = [
    "identifier",
    "string",
    "number",
    "boolean"
];
var Tokenizer = /** @class */ (function () {
    function Tokenizer() {
    }
    Tokenizer.init = function () {
        Tokenizer.rules.push({ tokenType: undefined, regEx: /^\s/ }, { tokenType: "{", regEx: /^{/ }, { tokenType: "?#", regEx: /^\?#/ }, { tokenType: "}", regEx: /^}/ }, { tokenType: "[", regEx: /^\[/ }, { tokenType: "]", regEx: /^\]/ }, { tokenType: "(", regEx: /^\(/ }, { tokenType: ")", regEx: /^\)/ }, { tokenType: "boolean", regEx: /^true|^false/ }, { tokenType: "identifier", regEx: /^[$a-z_]+/i }, { tokenType: ".", regEx: /^\./ }, { tokenType: ",", regEx: /^,/ }, { tokenType: "+", regEx: /^\+/ }, { tokenType: "-", regEx: /^-/ }, { tokenType: "*", regEx: /^\*/ }, { tokenType: "/", regEx: /^\// }, { tokenType: "==", regEx: /^==/ }, { tokenType: "!=", regEx: /^!=/ }, { tokenType: "<=", regEx: /^<=/ }, { tokenType: "<", regEx: /^</ }, { tokenType: ">=", regEx: /^>=/ }, { tokenType: ">", regEx: /^>/ }, { tokenType: "string", regEx: /^"([^"]*)"/ }, { tokenType: "string", regEx: /^'([^']*)'/ }, { tokenType: "number", regEx: /^\d*\.?\d+/ });
    };
    Tokenizer.parse = function (expression) {
        var result = [];
        var i = 0;
        while (i < expression.length) {
            var subExpression = expression.substring(i);
            var matchFound = false;
            for (var _i = 0, _a = Tokenizer.rules; _i < _a.length; _i++) {
                var rule = _a[_i];
                var matches = rule.regEx.exec(subExpression);
                if (matches) {
                    if (matches.length > 2) {
                        throw new Error("A tokenizer rule matched more than one group.");
                    }
                    if (rule.tokenType !== undefined) {
                        result.push({
                            type: rule.tokenType,
                            value: matches[matches.length === 1 ? 0 : 1],
                            originalPosition: i
                        });
                    }
                    i += matches[0].length;
                    matchFound = true;
                    break;
                }
            }
            if (!matchFound) {
                throw new Error("Unexpected character " + subExpression[0] + " at position " + i);
            }
        }
        return result;
    };
    Tokenizer.rules = [];
    return Tokenizer;
}());
Tokenizer.init();
function ensureValueType(value) {
    if (typeof value === "number" || typeof value === "string" || typeof value === "boolean") {
        return value;
    }
    throw new Error("Invalid value type: " + typeof value);
}
var FunctionCollection = /** @class */ (function () {
    function FunctionCollection() {
        this._functions = [];
    }
    FunctionCollection.prototype.indexOf = function (name) {
        return this._functions.findIndex(function (f) { return f.name === name; });
    };
    FunctionCollection.prototype.register = function (name, callback) {
        var index = this.indexOf(name);
        if (index >= 0) {
            this._functions[index].callback = callback;
        }
        else {
            this._functions.push({
                name: name,
                callback: callback
            });
        }
    };
    FunctionCollection.prototype.unregister = function (name) {
        var index = this.indexOf(name);
        if (index >= 0) {
            this._functions.splice(index, 1);
        }
    };
    FunctionCollection.prototype.find = function (name) {
        var index = this.indexOf(name);
        return index >= 0 ? this._functions[index] : undefined;
    };
    return FunctionCollection;
}());
var EvaluationContext = /** @class */ (function () {
    function EvaluationContext() {
        this._functions = new FunctionCollection();
        this._stateStack = [];
    }
    EvaluationContext.init = function () {
        EvaluationContext._builtInFunctions.register("substr", function (s, index, count) {
            if (typeof s === "string" && typeof index === "number" && typeof count === "number") {
                return (s.substr(index, count));
            }
            else {
                return "";
            }
        });
        EvaluationContext._builtInFunctions.register("JSON.parse", function (input) {
            return JSON.parse(input);
        });
        EvaluationContext._builtInFunctions.register("toString", function (input) {
            if (input.toString) {
                return input.toString();
            }
            return input;
        });
        EvaluationContext._builtInFunctions.register("parseInt", function (input, radix) {
            if (typeof input === "string" && (radix === undefined || typeof radix === "number")) {
                return parseInt(input, radix);
            }
            else {
                return input;
            }
        });
        EvaluationContext._builtInFunctions.register("parseFloat", function (input) {
            return typeof input === "string" ? parseFloat(input) : input;
        });
        EvaluationContext._builtInFunctions.register("if", function (condition, ifTrue, ifFalse) {
            return condition ? ifTrue : ifFalse;
        });
        EvaluationContext._builtInFunctions.register("toUpper", function (input) {
            return typeof input === "string" ? input.toUpperCase() : input;
        });
        EvaluationContext._builtInFunctions.register("toLower", function (input) {
            return typeof input === "string" ? input.toLowerCase() : input;
        });
        EvaluationContext._builtInFunctions.register("Date.format", function (input, format) {
            var acceptedFormats = ["long", "short", "compact"];
            var inputAsNumber;
            if (typeof input === "string") {
                inputAsNumber = Date.parse(input);
            }
            else if (typeof input === "number") {
                inputAsNumber = input;
            }
            else {
                return input;
            }
            var date = new Date(inputAsNumber);
            var effectiveFormat = "compact";
            if (typeof format === "string") {
                effectiveFormat = format.toLowerCase();
                if (acceptedFormats.indexOf(effectiveFormat) < 0) {
                    effectiveFormat = "compact";
                }
            }
            return effectiveFormat === "compact" ? date.toLocaleDateString() : date.toLocaleDateString(undefined, { day: "numeric", weekday: effectiveFormat, month: effectiveFormat, year: "numeric" });
        });
        EvaluationContext._builtInFunctions.register("Time.format", function (input) {
            var inputAsNumber;
            if (typeof input === "string") {
                inputAsNumber = Date.parse(input);
            }
            else if (typeof input === "number") {
                inputAsNumber = input;
            }
            else {
                return input;
            }
            var date = new Date(inputAsNumber);
            return date.toLocaleTimeString(undefined, { hour: 'numeric', minute: '2-digit' });
        });
        EvaluationContext._builtInFunctions.register("round", function (input) {
            return typeof input === "number" ? Math.round(input) : input;
        });
        EvaluationContext._builtInFunctions.register("ceil", function (input) {
            return typeof input === "number" ? Math.ceil(input) : input;
        });
        EvaluationContext._builtInFunctions.register("floor", function (input) {
            return typeof input === "number" ? Math.floor(input) : input;
        });
    };
    EvaluationContext.prototype.registerFunction = function (name, callback) {
        this._functions.register(name, callback);
    };
    EvaluationContext.prototype.unregisterFunction = function (name) {
        this._functions.unregister(name);
    };
    EvaluationContext.prototype.getFunction = function (name) {
        var f = this._functions.find(name);
        if (!f) {
            f = EvaluationContext._builtInFunctions.find(name);
        }
        return f ? f.callback : undefined;
    };
    EvaluationContext.prototype.isReservedField = function (name) {
        return EvaluationContext._reservedFields.indexOf(name) >= 0;
    };
    EvaluationContext.prototype.saveState = function () {
        this._stateStack.push({ $data: this.$data, $index: this.$index });
    };
    EvaluationContext.prototype.restoreLastState = function () {
        if (this._stateStack.length === 0) {
            throw new Error("There is no evaluation context state to restore.");
        }
        var savedContext = this._stateStack.pop();
        this.$data = savedContext.$data;
        this.$index = savedContext.$index;
    };
    Object.defineProperty(EvaluationContext.prototype, "currentDataContext", {
        get: function () {
            return this.$data !== undefined ? this.$data : this.$root;
        },
        enumerable: true,
        configurable: true
    });
    EvaluationContext._reservedFields = ["$data", "$root", "$index"];
    EvaluationContext._builtInFunctions = new FunctionCollection();
    return EvaluationContext;
}());
exports.EvaluationContext = EvaluationContext;
EvaluationContext.init();
var EvaluationNode = /** @class */ (function () {
    function EvaluationNode() {
    }
    return EvaluationNode;
}());
var ExpressionNode = /** @class */ (function (_super) {
    __extends(ExpressionNode, _super);
    function ExpressionNode() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.nodes = [];
        _this.allowNull = true;
        return _this;
    }
    ExpressionNode.prototype.evaluate = function (context) {
        var operatorPriorityGroups = [
            ["/", "*"],
            ["-", "+"],
            ["==", "!=", "<", "<=", ">", ">="]
        ];
        var nodesCopy = this.nodes.slice();
        for (var _i = 0, operatorPriorityGroups_1 = operatorPriorityGroups; _i < operatorPriorityGroups_1.length; _i++) {
            var priorityGroup = operatorPriorityGroups_1[_i];
            var i = 0;
            while (i < nodesCopy.length) {
                var node = nodesCopy[i];
                if (node instanceof OperatorNode && priorityGroup.indexOf(node.operator) >= 0) {
                    var left = ensureValueType(nodesCopy[i - 1].evaluate(context));
                    var right = ensureValueType(nodesCopy[i + 1].evaluate(context));
                    if (typeof left !== typeof right) {
                        throw new Error("Incompatible operands " + left + " and " + right + " for operator " + node.operator);
                    }
                    var result = void 0;
                    if (typeof left === "number" && typeof right === "number") {
                        switch (node.operator) {
                            case "/":
                                result = left / right;
                                break;
                            case "*":
                                result = left * right;
                                break;
                            case "-":
                                result = left - right;
                                break;
                            case "+":
                                result = left + right;
                                break;
                        }
                    }
                    if (typeof left === "string" && typeof right === "string") {
                        switch (node.operator) {
                            case "+":
                                result = left + right;
                                break;
                        }
                    }
                    switch (node.operator) {
                        case "==":
                            result = left === right;
                            break;
                        case "!=":
                            result = left !== right;
                            break;
                        case "<":
                            result = left < right;
                            break;
                        case "<=":
                            result = left <= right;
                            break;
                        case ">":
                            result = left > right;
                            break;
                        case ">=":
                            result = left >= right;
                            break;
                        default:
                        // This should never happen
                    }
                    nodesCopy.splice(i - 1, 3, new LiteralNode(result));
                    i--;
                }
                i++;
            }
            ;
        }
        return nodesCopy[0].evaluate(context);
    };
    return ExpressionNode;
}(EvaluationNode));
var IdentifierNode = /** @class */ (function (_super) {
    __extends(IdentifierNode, _super);
    function IdentifierNode() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    IdentifierNode.prototype.evaluate = function (context) {
        return this.identifier;
    };
    return IdentifierNode;
}(EvaluationNode));
var IndexerNode = /** @class */ (function (_super) {
    __extends(IndexerNode, _super);
    function IndexerNode() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    IndexerNode.prototype.evaluate = function (context) {
        return this.index.evaluate(context);
    };
    return IndexerNode;
}(EvaluationNode));
var FunctionCallNode = /** @class */ (function (_super) {
    __extends(FunctionCallNode, _super);
    function FunctionCallNode() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.functionName = null;
        _this.parameters = [];
        return _this;
    }
    FunctionCallNode.prototype.evaluate = function (context) {
        var callback = context.getFunction(this.functionName);
        if (callback !== undefined) {
            var evaluatedParams = [];
            for (var _i = 0, _a = this.parameters; _i < _a.length; _i++) {
                var param = _a[_i];
                evaluatedParams.push(param.evaluate(context));
            }
            return callback.apply(void 0, evaluatedParams);
        }
        throw new Error("Undefined function: " + this.functionName);
    };
    return FunctionCallNode;
}(EvaluationNode));
var LiteralNode = /** @class */ (function (_super) {
    __extends(LiteralNode, _super);
    function LiteralNode(value) {
        var _this = _super.call(this) || this;
        _this.value = value;
        return _this;
    }
    LiteralNode.prototype.evaluate = function (context) {
        return this.value;
    };
    return LiteralNode;
}(EvaluationNode));
var OperatorNode = /** @class */ (function (_super) {
    __extends(OperatorNode, _super);
    function OperatorNode(operator) {
        var _this = _super.call(this) || this;
        _this.operator = operator;
        return _this;
    }
    OperatorNode.prototype.evaluate = function (context) {
        throw new Error("An operator cannot be evaluated on its own.");
    };
    return OperatorNode;
}(EvaluationNode));
var PathNode = /** @class */ (function (_super) {
    __extends(PathNode, _super);
    function PathNode() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.parts = [];
        return _this;
    }
    PathNode.prototype.evaluate = function (context) {
        var result = undefined;
        var index = 0;
        while (index < this.parts.length) {
            var part = this.parts[index];
            try {
                if (part instanceof IdentifierNode && index === 0) {
                    switch (part.identifier) {
                        case "$root":
                            result = context.$root;
                            break;
                        case "$data":
                            result = context.currentDataContext;
                            break;
                        case "$index":
                            result = context.$index;
                            break;
                        default:
                            result = context.currentDataContext[part.identifier];
                            break;
                    }
                }
                else {
                    var partValue = part.evaluate(context);
                    if (index === 0) {
                        result = partValue;
                    }
                    else {
                        result = typeof partValue !== "boolean" ? result[partValue] : result[partValue.toString()];
                    }
                }
            }
            catch (e) {
                return undefined;
            }
            index++;
        }
        return result;
    };
    return PathNode;
}(EvaluationNode));
var ExpressionParser = /** @class */ (function () {
    function ExpressionParser(tokens) {
        this._index = 0;
        this._tokens = tokens;
    }
    ExpressionParser.prototype.unexpectedToken = function () {
        throw new Error("Unexpected token " + this.current.value + " at position " + this.current.originalPosition + ".");
    };
    ExpressionParser.prototype.unexpectedEoe = function () {
        throw new Error("Unexpected end of expression.");
    };
    ExpressionParser.prototype.moveNext = function () {
        this._index++;
    };
    ExpressionParser.prototype.parseToken = function () {
        var expectedTokenTypes = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            expectedTokenTypes[_i] = arguments[_i];
        }
        if (this.eoe) {
            this.unexpectedEoe();
        }
        var currentToken = this.current;
        if (expectedTokenTypes.indexOf(this.current.type) < 0) {
            this.unexpectedToken();
        }
        this.moveNext();
        return currentToken;
    };
    ExpressionParser.prototype.parseOptionalToken = function () {
        var expectedTokenTypes = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            expectedTokenTypes[_i] = arguments[_i];
        }
        if (this.eoe) {
            this.unexpectedEoe();
        }
        else if (expectedTokenTypes.indexOf(this.current.type) < 0) {
            return false;
        }
        else {
            this.moveNext();
            return true;
        }
    };
    ExpressionParser.prototype.parseFunctionCall = function (functionName) {
        var result = new FunctionCallNode();
        result.functionName = functionName;
        this.parseToken("(");
        var firstParameter = this.parseExpression();
        var moreParameters = false;
        if (firstParameter) {
            result.parameters.push(firstParameter);
            do {
                moreParameters = this.parseOptionalToken(",");
                if (moreParameters) {
                    var parameter = this.parseExpression();
                    result.parameters.push(parameter);
                }
            } while (moreParameters);
        }
        this.parseToken(")");
        return result;
    };
    ExpressionParser.prototype.parseIdentifier = function () {
        var result = new IdentifierNode();
        result.identifier = this.current.value;
        this.moveNext();
        return result;
    };
    ExpressionParser.prototype.parseIndexer = function () {
        var result = new IndexerNode();
        this.parseToken("[");
        result.index = this.parseExpression();
        this.parseToken("]");
        return result;
    };
    ExpressionParser.prototype.parsePath = function () {
        var result = new PathNode();
        var expectedNextTokenTypes = ["identifier", "("];
        while (!this.eoe) {
            if (expectedNextTokenTypes.indexOf(this.current.type) < 0) {
                return result;
            }
            switch (this.current.type) {
                case "(":
                    if (result.parts.length === 0) {
                        this.moveNext();
                        result.parts.push(this.parseExpression());
                        this.parseToken(")");
                    }
                    else {
                        var functionName = "";
                        for (var _i = 0, _a = result.parts; _i < _a.length; _i++) {
                            var part = _a[_i];
                            if (!(part instanceof IdentifierNode)) {
                                this.unexpectedToken();
                            }
                            if (functionName !== "") {
                                functionName += ".";
                            }
                            functionName += part.identifier;
                        }
                        result.parts = [];
                        result.parts.push(this.parseFunctionCall(functionName));
                    }
                    expectedNextTokenTypes = [".", "["];
                    break;
                case "[":
                    result.parts.push(this.parseIndexer());
                    expectedNextTokenTypes = [".", "(", "["];
                    break;
                case "identifier":
                    result.parts.push(this.parseIdentifier());
                    expectedNextTokenTypes = [".", "(", "["];
                    break;
                case ".":
                    this.moveNext();
                    expectedNextTokenTypes = ["identifier"];
                    break;
                default:
                    expectedNextTokenTypes = [];
                    break;
            }
        }
    };
    ExpressionParser.prototype.parseExpression = function () {
        var result = new ExpressionNode();
        var expectedNextTokenTypes = literals.concat("(", "+", "-");
        while (!this.eoe) {
            if (expectedNextTokenTypes.indexOf(this.current.type) < 0) {
                if (result.nodes.length === 0) {
                    this.unexpectedToken();
                }
                return result;
            }
            switch (this.current.type) {
                case "(":
                case "identifier":
                    result.nodes.push(this.parsePath());
                    expectedNextTokenTypes = orderedOperators;
                    break;
                case "string":
                case "number":
                case "boolean":
                    if (this.current.type === "string") {
                        result.nodes.push(new LiteralNode(this.current.value));
                    }
                    else if (this.current.type === "number") {
                        result.nodes.push(new LiteralNode(parseFloat(this.current.value)));
                    }
                    else {
                        result.nodes.push(new LiteralNode(this.current.value === "true"));
                    }
                    this.moveNext();
                    expectedNextTokenTypes = orderedOperators;
                    break;
                case "-":
                    if (result.nodes.length === 0) {
                        result.nodes.push(new LiteralNode(-1));
                        result.nodes.push(new OperatorNode("*"));
                        expectedNextTokenTypes = ["identifier", "number", "("];
                    }
                    else {
                        result.nodes.push(new OperatorNode(this.current.type));
                        expectedNextTokenTypes = literals.concat("(");
                    }
                    this.moveNext();
                    break;
                case "+":
                    if (result.nodes.length === 0) {
                        expectedNextTokenTypes = literals.concat("(");
                    }
                    else {
                        result.nodes.push(new OperatorNode(this.current.type));
                        expectedNextTokenTypes = literals.concat("(");
                    }
                    this.moveNext();
                    break;
                case "*":
                case "/":
                case "==":
                case "!=":
                case "<":
                case "<=":
                case ">":
                case ">=":
                    result.nodes.push(new OperatorNode(this.current.type));
                    this.moveNext();
                    expectedNextTokenTypes = literals.concat("(");
                    break;
                default:
                    expectedNextTokenTypes = [];
                    break;
            }
        }
    };
    Object.defineProperty(ExpressionParser.prototype, "eoe", {
        get: function () {
            return this._index >= this._tokens.length;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ExpressionParser.prototype, "current", {
        get: function () {
            return this._tokens[this._index];
        },
        enumerable: true,
        configurable: true
    });
    ExpressionParser.parseBinding = function (expressionString) {
        var parser = new ExpressionParser(Tokenizer.parse(expressionString));
        parser.parseToken("{");
        var allowNull = !parser.parseOptionalToken("?#");
        var expression = parser.parseExpression();
        parser.parseToken("}");
        return new Binding(expressionString, expression, allowNull);
    };
    return ExpressionParser;
}());
exports.ExpressionParser = ExpressionParser;
var Binding = /** @class */ (function () {
    function Binding(expressionString, expression, allowNull) {
        if (allowNull === void 0) { allowNull = true; }
        this.expressionString = expressionString;
        this.expression = expression;
        this.allowNull = allowNull;
    }
    Binding.prototype.evaluate = function (context) {
        return this.expression.evaluate(context);
    };
    return Binding;
}());
exports.Binding = Binding;
//# sourceMappingURL=expression-parser.js.map

/***/ }),

/***/ "../adaptivecards-templating/lib/shared.js":
/*!*************************************************!*\
  !*** ../adaptivecards-templating/lib/shared.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var GlobalSettings = /** @class */ (function () {
    function GlobalSettings() {
    }
    GlobalSettings.undefinedExpressionValueSubstitutionString = undefined;
    return GlobalSettings;
}());
exports.GlobalSettings = GlobalSettings;
//# sourceMappingURL=shared.js.map

/***/ }),

/***/ "../adaptivecards-templating/lib/template-engine.js":
/*!**********************************************************!*\
  !*** ../adaptivecards-templating/lib/template-engine.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var expression_parser_1 = __webpack_require__(/*! ./expression-parser */ "../adaptivecards-templating/lib/expression-parser.js");
var Shared = __webpack_require__(/*! ./shared */ "../adaptivecards-templating/lib/shared.js");
var TemplatizedString = /** @class */ (function () {
    function TemplatizedString() {
        this._parts = [];
        this._shouldDropOwner = false;
    }
    TemplatizedString.parse = function (s) {
        var result = new TemplatizedString();
        var i = 0;
        do {
            var expressionFound = false;
            var start = i;
            var loop = void 0;
            do {
                loop = false;
                start = s.indexOf("{", start);
                if (start >= 0) {
                    if (start + 1 < s.length && s[start + 1] === "{") {
                        start += 2;
                        loop = true;
                    }
                }
            } while (loop);
            if (start >= 0) {
                var end = s.indexOf("}", start);
                if (end >= 0) {
                    expressionFound = true;
                    if (start > i) {
                        result._parts.push(s.substring(i, start));
                    }
                    var bindngExpression = s.substring(start, end + 1);
                    var part = void 0;
                    try {
                        part = expression_parser_1.ExpressionParser.parseBinding(bindngExpression);
                    }
                    catch (e) {
                        part = bindngExpression;
                    }
                    result._parts.push(part);
                    i = end + 1;
                }
            }
            if (!expressionFound) {
                result._parts.push(s.substr(i));
                break;
            }
        } while (i < s.length);
        if (result._parts.length === 1 && typeof result._parts[0] === "string") {
            return result._parts[0];
        }
        else {
            return result;
        }
    };
    TemplatizedString.prototype.evalExpression = function (bindingExpression, context) {
        var result = bindingExpression.evaluate(context);
        if (result === undefined) {
            this._shouldDropOwner = this._shouldDropOwner || !bindingExpression.allowNull;
        }
        return result;
    };
    TemplatizedString.prototype.internalEvaluate = function (context) {
        if (this._parts.length === 0) {
            return undefined;
        }
        else if (this._parts.length === 1) {
            // If the templatized string only has 1 part, we want it to evaluate
            // to same the type as produced by the expression
            if (typeof this._parts[0] === "string") {
                return this._parts[0];
            }
            else {
                return this.evalExpression(this._parts[0], context);
            }
        }
        else {
            // If the templatized string has multiple parts, we want it to evaluate
            // to a string. In that context, each part that evaluates to undefined
            // gets replaced by the original expression by default or by a resource
            // string provided by the application
            var s = "";
            for (var _i = 0, _a = this._parts; _i < _a.length; _i++) {
                var part = _a[_i];
                if (typeof part === "string") {
                    s += part;
                }
                else {
                    var evaluatedPart = this.evalExpression(part, context);
                    if (evaluatedPart === undefined) {
                        evaluatedPart = Shared.GlobalSettings.undefinedExpressionValueSubstitutionString ? Shared.GlobalSettings.undefinedExpressionValueSubstitutionString : part.expressionString;
                    }
                    s += evaluatedPart;
                }
            }
            return s;
        }
    };
    TemplatizedString.prototype.evaluate = function (context) {
        this._shouldDropOwner = false;
        return this.internalEvaluate(context);
    };
    Object.defineProperty(TemplatizedString.prototype, "shouldDropOwner", {
        get: function () {
            return this._shouldDropOwner;
        },
        enumerable: true,
        configurable: true
    });
    return TemplatizedString;
}());
var Template = /** @class */ (function () {
    function Template(payload) {
        this.preparedPayload = Template.prepare(payload);
    }
    Template.prepare = function (node) {
        if (typeof node === "string") {
            return TemplatizedString.parse(node);
        }
        else if (typeof node === "object" && node !== null) {
            if (Array.isArray(node)) {
                var result = [];
                for (var _i = 0, node_1 = node; _i < node_1.length; _i++) {
                    var item = node_1[_i];
                    result.push(Template.prepare(item));
                }
                return result;
            }
            else {
                var keys = Object.keys(node);
                var result = {};
                for (var _a = 0, keys_1 = keys; _a < keys_1.length; _a++) {
                    var key = keys_1[_a];
                    result[key] = Template.prepare(node[key]);
                }
                return result;
            }
        }
        else {
            return node;
        }
    };
    Template.prototype.expandSingleObject = function (node) {
        var result = {};
        var keys = Object.keys(node);
        for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {
            var key = keys_2[_i];
            if (!this._context.isReservedField(key)) {
                var value = this.internalExpand(node[key]);
                if (value !== undefined) {
                    result[key] = value;
                }
            }
        }
        return result;
    };
    Template.prototype.internalExpand = function (node) {
        var result;
        this._context.saveState();
        if (Array.isArray(node)) {
            var itemArray = [];
            for (var _i = 0, node_2 = node; _i < node_2.length; _i++) {
                var item = node_2[_i];
                var expandedItem = this.internalExpand(item);
                if (expandedItem !== null) {
                    if (Array.isArray(expandedItem)) {
                        itemArray = itemArray.concat(expandedItem);
                    }
                    else {
                        itemArray.push(expandedItem);
                    }
                }
            }
            result = itemArray;
        }
        else if (node instanceof TemplatizedString) {
            result = node.evaluate(this._context);
            if (node.shouldDropOwner) {
                result = null;
            }
        }
        else if (typeof node === "object" && node !== null) {
            var dropObject = false;
            var when = node["$when"];
            if (when instanceof TemplatizedString) {
                var whenValue = void 0;
                try {
                    whenValue = when.evaluate(this._context);
                    // If $when doesn't evaluate to a boolean, consider it is false
                    if (typeof whenValue !== "boolean") {
                        whenValue = false;
                    }
                }
                catch (_a) {
                    // If we hit an exception, consider $when to be false
                    whenValue = false;
                }
                dropObject = !whenValue;
            }
            if (!dropObject) {
                var dataContext = node["$data"];
                if (dataContext !== undefined) {
                    if (dataContext instanceof TemplatizedString) {
                        dataContext = dataContext.evaluate(this._context);
                    }
                    if (Array.isArray(dataContext)) {
                        result = [];
                        for (var i = 0; i < dataContext.length; i++) {
                            this._context.$data = dataContext[i];
                            this._context.$index = i;
                            var expandedObject = this.expandSingleObject(node);
                            if (expandedObject !== null) {
                                result.push(expandedObject);
                            }
                        }
                    }
                    else {
                        this._context.$data = dataContext;
                        result = this.expandSingleObject(node);
                    }
                }
                else {
                    result = this.expandSingleObject(node);
                }
            }
            else {
                result = null;
            }
        }
        else {
            result = node;
        }
        this._context.restoreLastState();
        return result;
    };
    Template.prototype.expand = function (context) {
        this._context = context;
        return this.internalExpand(this.preparedPayload);
    };
    return Template;
}());
exports.Template = Template;
//# sourceMappingURL=template-engine.js.map

/***/ }),

/***/ "../adaptivecards/lib/adaptivecards.js":
/*!*********************************************!*\
  !*** ../adaptivecards/lib/adaptivecards.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
__export(__webpack_require__(/*! ./card-elements */ "../adaptivecards/lib/card-elements.js"));
__export(__webpack_require__(/*! ./enums */ "../adaptivecards/lib/enums.js"));
__export(__webpack_require__(/*! ./host-config */ "../adaptivecards/lib/host-config.js"));
__export(__webpack_require__(/*! ./shared */ "../adaptivecards/lib/shared.js"));
__export(__webpack_require__(/*! ./utils */ "../adaptivecards/lib/utils.js"));
//# sourceMappingURL=adaptivecards.js.map

/***/ }),

/***/ "../adaptivecards/lib/card-elements.js":
/*!*********************************************!*\
  !*** ../adaptivecards/lib/card-elements.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Enums = __webpack_require__(/*! ./enums */ "../adaptivecards/lib/enums.js");
var Shared = __webpack_require__(/*! ./shared */ "../adaptivecards/lib/shared.js");
var Utils = __webpack_require__(/*! ./utils */ "../adaptivecards/lib/utils.js");
var HostConfig = __webpack_require__(/*! ./host-config */ "../adaptivecards/lib/host-config.js");
var TextFormatters = __webpack_require__(/*! ./text-formatters */ "../adaptivecards/lib/text-formatters.js");
function invokeSetCollection(action, collection) {
    if (action) {
        // Closest emulation of "internal" in TypeScript.
        action["setCollection"](collection);
    }
}
function isActionAllowed(action, forbiddenActionTypes) {
    if (forbiddenActionTypes) {
        for (var i = 0; i < forbiddenActionTypes.length; i++) {
            if (action.getJsonTypeName() === forbiddenActionTypes[i]) {
                return false;
            }
        }
    }
    return true;
}
var InstanceCreationErrorType;
(function (InstanceCreationErrorType) {
    InstanceCreationErrorType[InstanceCreationErrorType["UnknownType"] = 0] = "UnknownType";
    InstanceCreationErrorType[InstanceCreationErrorType["ForbiddenType"] = 1] = "ForbiddenType";
})(InstanceCreationErrorType || (InstanceCreationErrorType = {}));
function createCardObjectInstance(parent, json, forbiddenTypeNames, allowFallback, createInstanceCallback, createValidationErrorCallback, errors) {
    var result = null;
    if (json && typeof json === "object") {
        var tryToFallback = false;
        var typeName = Utils.getStringValue(json["type"]);
        if (forbiddenTypeNames && forbiddenTypeNames.indexOf(typeName) >= 0) {
            raiseParseError(createValidationErrorCallback(typeName, InstanceCreationErrorType.ForbiddenType), errors);
        }
        else {
            result = createInstanceCallback(typeName);
            if (!result) {
                tryToFallback = allowFallback;
                raiseParseError(createValidationErrorCallback(typeName, InstanceCreationErrorType.UnknownType), errors);
            }
            else {
                result.setParent(parent);
                result.parse(json, errors);
                tryToFallback = result.shouldFallback() && allowFallback;
            }
            if (tryToFallback) {
                var fallback = json["fallback"];
                if (!fallback) {
                    parent.setShouldFallback(true);
                }
                if (typeof fallback === "string" && fallback.toLowerCase() === "drop") {
                    result = null;
                }
                else if (typeof fallback === "object") {
                    result = createCardObjectInstance(parent, fallback, forbiddenTypeNames, true, createInstanceCallback, createValidationErrorCallback, errors);
                }
            }
        }
    }
    return result;
}
function createActionInstance(parent, json, forbiddenActionTypes, allowFallback, errors) {
    return createCardObjectInstance(parent, json, forbiddenActionTypes, allowFallback, function (typeName) { return AdaptiveCard.actionTypeRegistry.createInstance(typeName); }, function (typeName, errorType) {
        if (errorType == InstanceCreationErrorType.UnknownType) {
            return {
                error: Enums.ValidationError.UnknownActionType,
                message: "Unknown action type: " + typeName + ". Fallback will be used if present."
            };
        }
        else {
            return {
                error: Enums.ValidationError.ActionTypeNotAllowed,
                message: "Action type " + typeName + " is not allowed in this context."
            };
        }
    }, errors);
}
exports.createActionInstance = createActionInstance;
function createElementInstance(parent, json, allowFallback, errors) {
    return createCardObjectInstance(parent, json, [], // Forbidden types not supported for elements for now
    allowFallback, function (typeName) { return AdaptiveCard.elementTypeRegistry.createInstance(typeName); }, function (typeName, errorType) {
        if (errorType == InstanceCreationErrorType.UnknownType) {
            return {
                error: Enums.ValidationError.UnknownElementType,
                message: "Unknown element type: " + typeName + ". Fallback will be used if present."
            };
        }
        else {
            return {
                error: Enums.ValidationError.ElementTypeNotAllowed,
                message: "Element type " + typeName + " is not allowed in this context."
            };
        }
    }, errors);
}
exports.createElementInstance = createElementInstance;
var SerializableObject = /** @class */ (function () {
    function SerializableObject() {
        this._rawProperties = {};
    }
    SerializableObject.prototype.parse = function (json, errors) {
        this._rawProperties = AdaptiveCard.enableFullJsonRoundTrip ? json : {};
    };
    SerializableObject.prototype.toJSON = function () {
        var result;
        if (AdaptiveCard.enableFullJsonRoundTrip && this._rawProperties && typeof this._rawProperties === "object") {
            result = this._rawProperties;
        }
        else {
            result = {};
        }
        return result;
    };
    SerializableObject.prototype.setCustomProperty = function (name, value) {
        var shouldDeleteProperty = (typeof value === "string" && Utils.isNullOrEmpty(value)) || value === undefined || value === null;
        if (shouldDeleteProperty) {
            delete this._rawProperties[name];
        }
        else {
            this._rawProperties[name] = value;
        }
    };
    SerializableObject.prototype.getCustomProperty = function (name) {
        return this._rawProperties[name];
    };
    return SerializableObject;
}());
exports.SerializableObject = SerializableObject;
var ValidationFailure = /** @class */ (function () {
    function ValidationFailure(cardObject) {
        this.cardObject = cardObject;
        this.errors = [];
    }
    return ValidationFailure;
}());
exports.ValidationFailure = ValidationFailure;
var ValidationResults = /** @class */ (function () {
    function ValidationResults() {
        this.allIds = {};
        this.failures = [];
    }
    ValidationResults.prototype.getFailureIndex = function (cardObject) {
        for (var i = 0; i < this.failures.length; i++) {
            if (this.failures[i].cardObject === cardObject) {
                return i;
            }
        }
        return -1;
    };
    ValidationResults.prototype.addFailure = function (cardObject, error) {
        var index = this.getFailureIndex(cardObject);
        var failure;
        if (index < 0) {
            failure = new ValidationFailure(cardObject);
            this.failures.push(failure);
        }
        else {
            failure = this.failures[index];
        }
        failure.errors.push(error);
    };
    return ValidationResults;
}());
exports.ValidationResults = ValidationResults;
var CardObject = /** @class */ (function (_super) {
    __extends(CardObject, _super);
    function CardObject() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CardObject.prototype.internalValidateProperties = function (context) {
        if (!Utils.isNullOrEmpty(this.id)) {
            if (context.allIds.hasOwnProperty(this.id)) {
                if (context.allIds[this.id] == 1) {
                    context.addFailure(this, {
                        error: Enums.ValidationError.DuplicateId,
                        message: "Duplicate Id: " + this.id
                    });
                }
                context.allIds[this.id] += 1;
            }
            else {
                context.allIds[this.id] = 1;
            }
        }
    };
    CardObject.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.id = Utils.getStringValue(json["id"]);
    };
    CardObject.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "type", this.getJsonTypeName());
        Utils.setProperty(result, "id", this.id);
        return result;
    };
    CardObject.prototype.validateProperties = function () {
        var result = new ValidationResults();
        this.internalValidateProperties(result);
        return result;
    };
    return CardObject;
}(SerializableObject));
exports.CardObject = CardObject;
var CardElement = /** @class */ (function (_super) {
    __extends(CardElement, _super);
    function CardElement() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._shouldFallback = false;
        _this._lang = undefined;
        _this._hostConfig = null;
        _this._parent = null;
        _this._renderedElement = null;
        _this._separatorElement = null;
        _this._isVisible = true;
        _this._truncatedDueToOverflow = false;
        _this._defaultRenderedElementDisplayMode = null;
        _this._padding = null;
        _this.requires = new HostConfig.HostCapabilities();
        _this.horizontalAlignment = null;
        _this.spacing = Enums.Spacing.Default;
        _this.separator = false;
        _this.customCssSelector = null;
        _this.height = "auto";
        _this.minPixelHeight = null;
        return _this;
    }
    CardElement.prototype.internalRenderSeparator = function () {
        var renderedSeparator = Utils.renderSeparation(this.hostConfig, {
            spacing: this.hostConfig.getEffectiveSpacing(this.spacing),
            lineThickness: this.separator ? this.hostConfig.separator.lineThickness : null,
            lineColor: this.separator ? this.hostConfig.separator.lineColor : null
        }, this.separatorOrientation);
        if (AdaptiveCard.alwaysBleedSeparators && renderedSeparator && this.separatorOrientation == Enums.Orientation.Horizontal) {
            // Adjust separator's margins if the option to always bleed separators is turned on
            var parentContainer = this.getParentContainer();
            if (parentContainer && parentContainer.getEffectivePadding()) {
                var parentPhysicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(parentContainer.getEffectivePadding());
                renderedSeparator.style.marginLeft = "-" + parentPhysicalPadding.left + "px";
                renderedSeparator.style.marginRight = "-" + parentPhysicalPadding.right + "px";
            }
        }
        return renderedSeparator;
    };
    CardElement.prototype.updateRenderedElementVisibility = function () {
        var displayMode = this.isDesignMode() || this.isVisible ? this._defaultRenderedElementDisplayMode : "none";
        if (this._renderedElement) {
            this._renderedElement.style.display = displayMode;
        }
        if (this._separatorElement) {
            if (this.parent && this.parent.isFirstElement(this)) {
                this._separatorElement.style.display = "none";
            }
            else {
                this._separatorElement.style.display = displayMode;
            }
        }
    };
    CardElement.prototype.hideElementDueToOverflow = function () {
        if (this._renderedElement && this.isVisible) {
            this._renderedElement.style.visibility = 'hidden';
            this.isVisible = false;
            raiseElementVisibilityChangedEvent(this, false);
        }
    };
    CardElement.prototype.showElementHiddenDueToOverflow = function () {
        if (this._renderedElement && !this.isVisible) {
            this._renderedElement.style.visibility = null;
            this.isVisible = true;
            raiseElementVisibilityChangedEvent(this, false);
        }
    };
    // Marked private to emulate internal access
    CardElement.prototype.handleOverflow = function (maxHeight) {
        if (this.isVisible || this.isHiddenDueToOverflow()) {
            var handled = this.truncateOverflow(maxHeight);
            // Even if we were unable to truncate the element to fit this time,
            // it still could have been previously truncated
            this._truncatedDueToOverflow = handled || this._truncatedDueToOverflow;
            if (!handled) {
                this.hideElementDueToOverflow();
            }
            else if (handled && !this.isVisible) {
                this.showElementHiddenDueToOverflow();
            }
        }
    };
    // Marked private to emulate internal access
    CardElement.prototype.resetOverflow = function () {
        var sizeChanged = false;
        if (this._truncatedDueToOverflow) {
            this.undoOverflowTruncation();
            this._truncatedDueToOverflow = false;
            sizeChanged = true;
        }
        if (this.isHiddenDueToOverflow) {
            this.showElementHiddenDueToOverflow();
        }
        return sizeChanged;
    };
    CardElement.prototype.createPlaceholderElement = function () {
        var element = document.createElement("div");
        element.style.border = "1px dashed #DDDDDD";
        element.style.padding = "4px";
        element.style.minHeight = "32px";
        element.style.fontSize = "10px";
        element.innerText = "Empty " + this.getJsonTypeName();
        return element;
    };
    CardElement.prototype.adjustRenderedElementSize = function (renderedElement) {
        if (this.height === "auto") {
            renderedElement.style.flex = "0 0 auto";
        }
        else {
            renderedElement.style.flex = "1 1 auto";
        }
        if (this.minPixelHeight) {
            renderedElement.style.minHeight = this.minPixelHeight + "px";
        }
    };
    CardElement.prototype.overrideInternalRender = function () {
        return this.internalRender();
    };
    CardElement.prototype.applyPadding = function () {
        if (this.separatorElement) {
            if (AdaptiveCard.alwaysBleedSeparators && this.separatorOrientation == Enums.Orientation.Horizontal && !this.isBleeding()) {
                var padding = new Shared.PaddingDefinition();
                this.getImmediateSurroundingPadding(padding);
                var physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);
                this.separatorElement.style.marginLeft = "-" + physicalPadding.left + "px";
                this.separatorElement.style.marginRight = "-" + physicalPadding.right + "px";
            }
            else {
                this.separatorElement.style.marginRight = "0";
                this.separatorElement.style.marginLeft = "0";
            }
        }
    };
    /*
     * Called when this element overflows the bottom of the card.
     * maxHeight will be the amount of space still available on the card (0 if
     * the element is fully off the card).
     */
    CardElement.prototype.truncateOverflow = function (maxHeight) {
        // Child implementations should return true if the element handled
        // the truncation request such that its content fits within maxHeight,
        // false if the element should fall back to being hidden
        return false;
    };
    /*
     * This should reverse any changes performed in truncateOverflow().
     */
    CardElement.prototype.undoOverflowTruncation = function () { };
    CardElement.prototype.getDefaultPadding = function () {
        return new Shared.PaddingDefinition();
    };
    CardElement.prototype.getHasBackground = function () {
        return false;
    };
    CardElement.prototype.getPadding = function () {
        return this._padding;
    };
    CardElement.prototype.setPadding = function (value) {
        this._padding = value;
    };
    Object.defineProperty(CardElement.prototype, "supportsMinHeight", {
        get: function () {
            return false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "useDefaultSizing", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "allowCustomPadding", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "separatorOrientation", {
        get: function () {
            return Enums.Orientation.Horizontal;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "defaultStyle", {
        get: function () {
            return Enums.ContainerStyle.Default;
        },
        enumerable: true,
        configurable: true
    });
    CardElement.prototype.asString = function () {
        return "";
    };
    CardElement.prototype.isBleeding = function () {
        return false;
    };
    CardElement.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "isVisible", this.isVisible, true);
        if (this.horizontalAlignment !== null) {
            Utils.setEnumProperty(Enums.HorizontalAlignment, result, "horizontalAlignment", this.horizontalAlignment);
        }
        Utils.setEnumProperty(Enums.Spacing, result, "spacing", this.spacing, Enums.Spacing.Default);
        Utils.setProperty(result, "separator", this.separator, false);
        Utils.setProperty(result, "height", this.height, "auto");
        if (this.supportsMinHeight) {
            Utils.setProperty(result, "minHeight", typeof this.minPixelHeight === "number" && !isNaN(this.minPixelHeight) ? this.minPixelHeight + "px" : undefined);
        }
        return result;
    };
    CardElement.prototype.setParent = function (value) {
        this._parent = value;
    };
    CardElement.prototype.getEffectiveStyle = function () {
        if (this.parent) {
            return this.parent.getEffectiveStyle();
        }
        return this.defaultStyle;
    };
    CardElement.prototype.getForbiddenElementTypes = function () {
        return null;
    };
    CardElement.prototype.getForbiddenActionTypes = function () {
        return null;
    };
    CardElement.prototype.getImmediateSurroundingPadding = function (result, processTop, processRight, processBottom, processLeft) {
        if (processTop === void 0) { processTop = true; }
        if (processRight === void 0) { processRight = true; }
        if (processBottom === void 0) { processBottom = true; }
        if (processLeft === void 0) { processLeft = true; }
        if (this.parent) {
            var doProcessTop = processTop && this.parent.isTopElement(this);
            var doProcessRight = processRight && this.parent.isRightMostElement(this);
            var doProcessBottom = processBottom && this.parent.isBottomElement(this);
            var doProcessLeft = processLeft && this.parent.isLeftMostElement(this);
            var effectivePadding = this.parent.getEffectivePadding();
            if (effectivePadding) {
                if (doProcessTop && effectivePadding.top != Enums.Spacing.None) {
                    result.top = effectivePadding.top;
                    doProcessTop = false;
                }
                if (doProcessRight && effectivePadding.right != Enums.Spacing.None) {
                    result.right = effectivePadding.right;
                    doProcessRight = false;
                }
                if (doProcessBottom && effectivePadding.bottom != Enums.Spacing.None) {
                    result.bottom = effectivePadding.bottom;
                    doProcessBottom = false;
                }
                if (doProcessLeft && effectivePadding.left != Enums.Spacing.None) {
                    result.left = effectivePadding.left;
                    doProcessLeft = false;
                }
            }
            if (doProcessTop || doProcessRight || doProcessBottom || doProcessLeft) {
                this.parent.getImmediateSurroundingPadding(result, doProcessTop, doProcessRight, doProcessBottom, doProcessLeft);
            }
        }
    };
    CardElement.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        raiseParseElementEvent(this, json, errors);
        this.requires.parse(json["requires"], errors);
        this.isVisible = Utils.getBoolValue(json["isVisible"], this.isVisible);
        this.horizontalAlignment = Utils.getEnumValue(Enums.HorizontalAlignment, json["horizontalAlignment"], this.horizontalAlignment);
        this.spacing = Utils.getEnumValue(Enums.Spacing, json["spacing"], Enums.Spacing.Default);
        this.separator = Utils.getBoolValue(json["separator"], this.separator);
        var jsonSeparation = json["separation"];
        if (jsonSeparation !== undefined) {
            if (jsonSeparation === "none") {
                this.spacing = Enums.Spacing.None;
                this.separator = false;
            }
            else if (jsonSeparation === "strong") {
                this.spacing = Enums.Spacing.Large;
                this.separator = true;
            }
            else if (jsonSeparation === "default") {
                this.spacing = Enums.Spacing.Default;
                this.separator = false;
            }
            raiseParseError({
                error: Enums.ValidationError.Deprecated,
                message: "The \"separation\" property is deprecated and will be removed. Use the \"spacing\" and \"separator\" properties instead."
            }, errors);
        }
        var jsonHeight = json["height"];
        if (jsonHeight === "auto" || jsonHeight === "stretch") {
            this.height = jsonHeight;
        }
        if (this.supportsMinHeight) {
            var jsonMinHeight = json["minHeight"];
            if (jsonMinHeight && typeof jsonMinHeight === "string") {
                var isValid = false;
                try {
                    var size = Shared.SizeAndUnit.parse(jsonMinHeight, true);
                    if (size.unit == Enums.SizeUnit.Pixel) {
                        this.minPixelHeight = size.physicalSize;
                        isValid = true;
                    }
                }
                catch (_a) {
                    // Do nothing. A parse error is emitted below
                }
                if (!isValid) {
                    raiseParseError({
                        error: Enums.ValidationError.InvalidPropertyValue,
                        message: "Invalid \"minHeight\" value: " + jsonMinHeight
                    }, errors);
                }
            }
        }
        else {
            this.minPixelHeight = null;
        }
    };
    CardElement.prototype.getActionCount = function () {
        return 0;
    };
    CardElement.prototype.getActionAt = function (index) {
        throw new Error("Index out of range.");
    };
    CardElement.prototype.remove = function () {
        if (this.parent && this.parent instanceof CardElementContainer) {
            return this.parent.removeItem(this);
        }
        return false;
    };
    CardElement.prototype.render = function () {
        this._renderedElement = this.overrideInternalRender();
        this._separatorElement = this.internalRenderSeparator();
        if (this._renderedElement) {
            if (this.customCssSelector) {
                this._renderedElement.classList.add(this.customCssSelector);
            }
            this._renderedElement.style.boxSizing = "border-box";
            this._defaultRenderedElementDisplayMode = this._renderedElement.style.display;
            this.adjustRenderedElementSize(this._renderedElement);
            this.updateLayout(false);
        }
        else if (this.isDesignMode()) {
            this._renderedElement = this.createPlaceholderElement();
        }
        return this._renderedElement;
    };
    CardElement.prototype.updateLayout = function (processChildren) {
        if (processChildren === void 0) { processChildren = true; }
        this.updateRenderedElementVisibility();
        this.applyPadding();
    };
    CardElement.prototype.indexOf = function (cardElement) {
        return -1;
    };
    CardElement.prototype.isDesignMode = function () {
        var rootElement = this.getRootElement();
        return rootElement instanceof AdaptiveCard && rootElement.designMode;
    };
    CardElement.prototype.isRendered = function () {
        return this._renderedElement && this._renderedElement.offsetHeight > 0;
    };
    CardElement.prototype.isFirstElement = function (element) {
        return true;
    };
    CardElement.prototype.isLastElement = function (element) {
        return true;
    };
    CardElement.prototype.isAtTheVeryLeft = function () {
        return this.parent ? this.parent.isLeftMostElement(this) && this.parent.isAtTheVeryLeft() : true;
    };
    CardElement.prototype.isAtTheVeryRight = function () {
        return this.parent ? this.parent.isRightMostElement(this) && this.parent.isAtTheVeryRight() : true;
    };
    CardElement.prototype.isAtTheVeryTop = function () {
        return this.parent ? this.parent.isFirstElement(this) && this.parent.isAtTheVeryTop() : true;
    };
    CardElement.prototype.isAtTheVeryBottom = function () {
        return this.parent ? this.parent.isLastElement(this) && this.parent.isAtTheVeryBottom() : true;
    };
    CardElement.prototype.isBleedingAtTop = function () {
        return false;
    };
    CardElement.prototype.isBleedingAtBottom = function () {
        return false;
    };
    CardElement.prototype.isLeftMostElement = function (element) {
        return true;
    };
    CardElement.prototype.isRightMostElement = function (element) {
        return true;
    };
    CardElement.prototype.isTopElement = function (element) {
        return this.isFirstElement(element);
    };
    CardElement.prototype.isBottomElement = function (element) {
        return this.isLastElement(element);
    };
    CardElement.prototype.isHiddenDueToOverflow = function () {
        return this._renderedElement && this._renderedElement.style.visibility == 'hidden';
    };
    CardElement.prototype.getRootElement = function () {
        var rootElement = this;
        while (rootElement.parent) {
            rootElement = rootElement.parent;
        }
        return rootElement;
    };
    CardElement.prototype.getParentContainer = function () {
        var currentElement = this.parent;
        while (currentElement) {
            if (currentElement instanceof Container) {
                return currentElement;
            }
            currentElement = currentElement.parent;
        }
        return null;
    };
    CardElement.prototype.getAllInputs = function () {
        return [];
    };
    CardElement.prototype.getResourceInformation = function () {
        return [];
    };
    CardElement.prototype.getElementById = function (id) {
        return this.id === id ? this : null;
    };
    CardElement.prototype.getActionById = function (id) {
        return null;
    };
    CardElement.prototype.shouldFallback = function () {
        return this._shouldFallback || !this.requires.areAllMet(this.hostConfig.hostCapabilities);
    };
    CardElement.prototype.setShouldFallback = function (value) {
        this._shouldFallback = value;
    };
    CardElement.prototype.getEffectivePadding = function () {
        var padding = this.getPadding();
        return (padding && this.allowCustomPadding) ? padding : this.getDefaultPadding();
    };
    Object.defineProperty(CardElement.prototype, "lang", {
        get: function () {
            if (this._lang) {
                return this._lang;
            }
            else {
                if (this.parent) {
                    return this.parent.lang;
                }
                else {
                    return undefined;
                }
            }
        },
        set: function (value) {
            if (value && value != "") {
                var regEx = /^[a-z]{2,3}$/ig;
                var matches = regEx.exec(value);
                if (!matches) {
                    throw new Error("Invalid language identifier: " + value);
                }
            }
            this._lang = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "hostConfig", {
        get: function () {
            if (this._hostConfig) {
                return this._hostConfig;
            }
            else {
                if (this.parent) {
                    return this.parent.hostConfig;
                }
                else {
                    return defaultHostConfig;
                }
            }
        },
        set: function (value) {
            this._hostConfig = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "index", {
        get: function () {
            if (this.parent) {
                return this.parent.indexOf(this);
            }
            else {
                return 0;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "isInteractive", {
        get: function () {
            return false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "isStandalone", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "isInline", {
        get: function () {
            return false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "parent", {
        get: function () {
            return this._parent;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "isVisible", {
        get: function () {
            return this._isVisible;
        },
        set: function (value) {
            // If the element is going to be hidden, reset any changes that were due
            // to overflow truncation (this ensures that if the element is later
            // un-hidden it has the right content)
            if (AdaptiveCard.useAdvancedCardBottomTruncation && !value) {
                this.undoOverflowTruncation();
            }
            if (this._isVisible != value) {
                this._isVisible = value;
                this.updateRenderedElementVisibility();
                if (this._renderedElement) {
                    raiseElementVisibilityChangedEvent(this);
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "hasVisibleSeparator", {
        get: function () {
            if (this.parent && this.separatorElement) {
                return !this.parent.isFirstElement(this) && (this.isVisible || this.isDesignMode());
            }
            else {
                return false;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "renderedElement", {
        get: function () {
            return this._renderedElement;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardElement.prototype, "separatorElement", {
        get: function () {
            return this._separatorElement;
        },
        enumerable: true,
        configurable: true
    });
    return CardElement;
}(CardObject));
exports.CardElement = CardElement;
var BaseTextBlock = /** @class */ (function (_super) {
    __extends(BaseTextBlock, _super);
    function BaseTextBlock() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._selectAction = null;
        _this.size = Enums.TextSize.Default;
        _this.weight = Enums.TextWeight.Default;
        _this.color = Enums.TextColor.Default;
        _this.isSubtle = false;
        _this.fontType = null;
        return _this;
    }
    BaseTextBlock.prototype.getEffectiveStyleDefinition = function () {
        return this.hostConfig.containerStyles.getStyleByName(this.getEffectiveStyle());
    };
    BaseTextBlock.prototype.getFontSize = function (fontType) {
        switch (this.size) {
            case Enums.TextSize.Small:
                return fontType.fontSizes.small;
            case Enums.TextSize.Medium:
                return fontType.fontSizes.medium;
            case Enums.TextSize.Large:
                return fontType.fontSizes.large;
            case Enums.TextSize.ExtraLarge:
                return fontType.fontSizes.extraLarge;
            default:
                return fontType.fontSizes.default;
        }
    };
    BaseTextBlock.prototype.getColorDefinition = function (colorSet, color) {
        switch (color) {
            case Enums.TextColor.Accent:
                return colorSet.accent;
            case Enums.TextColor.Dark:
                return colorSet.dark;
            case Enums.TextColor.Light:
                return colorSet.light;
            case Enums.TextColor.Good:
                return colorSet.good;
            case Enums.TextColor.Warning:
                return colorSet.warning;
            case Enums.TextColor.Attention:
                return colorSet.attention;
            default:
                return colorSet.default;
        }
    };
    BaseTextBlock.prototype.setText = function (value) {
        this._text = value;
    };
    BaseTextBlock.prototype.asString = function () {
        return this.text;
    };
    BaseTextBlock.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setEnumProperty(Enums.TextSize, result, "size", this.size, Enums.TextSize.Default);
        Utils.setEnumProperty(Enums.TextWeight, result, "weight", this.weight, Enums.TextWeight.Default);
        Utils.setEnumProperty(Enums.TextColor, result, "color", this.color, Enums.TextColor.Default);
        Utils.setProperty(result, "text", this.text);
        Utils.setProperty(result, "isSubtle", this.isSubtle, false);
        Utils.setEnumProperty(Enums.FontType, result, "fontType", this.fontType, Enums.FontType.Default);
        return result;
    };
    BaseTextBlock.prototype.applyStylesTo = function (targetElement) {
        var fontType = this.hostConfig.getFontTypeDefinition(this.fontType);
        if (fontType.fontFamily) {
            targetElement.style.fontFamily = fontType.fontFamily;
        }
        var fontSize;
        switch (this.size) {
            case Enums.TextSize.Small:
                fontSize = fontType.fontSizes.small;
                break;
            case Enums.TextSize.Medium:
                fontSize = fontType.fontSizes.medium;
                break;
            case Enums.TextSize.Large:
                fontSize = fontType.fontSizes.large;
                break;
            case Enums.TextSize.ExtraLarge:
                fontSize = fontType.fontSizes.extraLarge;
                break;
            default:
                fontSize = fontType.fontSizes.default;
                break;
        }
        targetElement.style.fontSize = fontSize + "px";
        var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);
        targetElement.style.color = Utils.stringToCssColor(this.isSubtle ? colorDefinition.subtle : colorDefinition.default);
        var fontWeight;
        switch (this.weight) {
            case Enums.TextWeight.Lighter:
                fontWeight = fontType.fontWeights.lighter;
                break;
            case Enums.TextWeight.Bolder:
                fontWeight = fontType.fontWeights.bolder;
                break;
            default:
                fontWeight = fontType.fontWeights.default;
                break;
        }
        targetElement.style.fontWeight = fontWeight.toString();
    };
    BaseTextBlock.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.text = Utils.getStringValue(json["text"]);
        var sizeString = Utils.getStringValue(json["size"]);
        if (sizeString && sizeString.toLowerCase() === "normal") {
            this.size = Enums.TextSize.Default;
            raiseParseError({
                error: Enums.ValidationError.Deprecated,
                message: "The TextBlock.size value \"normal\" is deprecated and will be removed. Use \"default\" instead."
            }, errors);
        }
        else {
            this.size = Utils.getEnumValue(Enums.TextSize, sizeString, this.size);
        }
        var weightString = Utils.getStringValue(json["weight"]);
        if (weightString && weightString.toLowerCase() === "normal") {
            this.weight = Enums.TextWeight.Default;
            raiseParseError({
                error: Enums.ValidationError.Deprecated,
                message: "The TextBlock.weight value \"normal\" is deprecated and will be removed. Use \"default\" instead."
            }, errors);
        }
        else {
            this.weight = Utils.getEnumValue(Enums.TextWeight, weightString, this.weight);
        }
        this.color = Utils.getEnumValue(Enums.TextColor, json["color"], this.color);
        this.isSubtle = Utils.getBoolValue(json["isSubtle"], this.isSubtle);
        this.fontType = Utils.getEnumValue(Enums.FontType, json["fontType"], this.fontType);
    };
    Object.defineProperty(BaseTextBlock.prototype, "effectiveColor", {
        get: function () {
            return this.color ? this.color : Enums.TextColor.Default;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseTextBlock.prototype, "text", {
        get: function () {
            return this._text;
        },
        set: function (value) {
            this.setText(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseTextBlock.prototype, "selectAction", {
        get: function () {
            return this._selectAction;
        },
        set: function (value) {
            this._selectAction = value;
            if (this._selectAction) {
                this._selectAction.setParent(this);
            }
        },
        enumerable: true,
        configurable: true
    });
    return BaseTextBlock;
}(CardElement));
exports.BaseTextBlock = BaseTextBlock;
var TextBlock = /** @class */ (function (_super) {
    __extends(TextBlock, _super);
    function TextBlock() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._processedText = null;
        _this._treatAsPlainText = true;
        _this.wrap = false;
        _this.useMarkdown = true;
        return _this;
    }
    TextBlock.prototype.restoreOriginalContent = function () {
        var maxHeight = this.maxLines
            ? (this._computedLineHeight * this.maxLines) + 'px'
            : null;
        this.renderedElement.style.maxHeight = maxHeight;
        this.renderedElement.innerHTML = this._originalInnerHtml;
    };
    TextBlock.prototype.truncateIfSupported = function (maxHeight) {
        // For now, only truncate TextBlocks that contain just a single
        // paragraph -- since the maxLines calculation doesn't take into
        // account Markdown lists
        var children = this.renderedElement.children;
        var isTextOnly = !children.length;
        var truncationSupported = isTextOnly || children.length == 1
            && children[0].tagName.toLowerCase() == 'p';
        if (truncationSupported) {
            var element = isTextOnly
                ? this.renderedElement
                : children[0];
            Utils.truncate(element, maxHeight, this._computedLineHeight);
            return true;
        }
        return false;
    };
    TextBlock.prototype.setText = function (value) {
        _super.prototype.setText.call(this, value);
        this._processedText = null;
    };
    TextBlock.prototype.getRenderedDomElementType = function () {
        return "div";
    };
    TextBlock.prototype.internalRender = function () {
        var _this = this;
        this._processedText = null;
        if (!Utils.isNullOrEmpty(this.text)) {
            var hostConfig = this.hostConfig;
            var element = document.createElement(this.getRenderedDomElementType());
            element.classList.add(hostConfig.makeCssClassName("ac-textBlock"));
            element.style.overflow = "hidden";
            this.applyStylesTo(element);
            if (this.selectAction) {
                element.onclick = function (e) {
                    e.preventDefault();
                    e.cancelBubble = true;
                    _this.selectAction.execute();
                };
                if (hostConfig.supportsInteractivity) {
                    element.tabIndex = 0;
                    element.setAttribute("role", "button");
                    element.setAttribute("aria-label", this.selectAction.title);
                    element.classList.add(hostConfig.makeCssClassName("ac-selectable"));
                }
            }
            if (!this._processedText) {
                this._treatAsPlainText = true;
                var formattedText = TextFormatters.formatText(this.lang, this.text);
                if (this.useMarkdown) {
                    if (AdaptiveCard.allowMarkForTextHighlighting) {
                        formattedText = formattedText.replace(/<mark>/g, "===").replace(/<\/mark>/g, "/==");
                    }
                    var markdownProcessingResult = AdaptiveCard.applyMarkdown(formattedText);
                    if (markdownProcessingResult.didProcess && markdownProcessingResult.outputHtml) {
                        this._processedText = markdownProcessingResult.outputHtml;
                        this._treatAsPlainText = false;
                        // Only process <mark> tag if markdown processing was applied because
                        // markdown processing is also responsible for sanitizing the input string
                        if (AdaptiveCard.allowMarkForTextHighlighting) {
                            var markStyle = "";
                            var effectiveStyle = this.getEffectiveStyleDefinition();
                            if (effectiveStyle.highlightBackgroundColor) {
                                markStyle += "background-color: " + effectiveStyle.highlightBackgroundColor + ";";
                            }
                            if (effectiveStyle.highlightForegroundColor) {
                                markStyle += "color: " + effectiveStyle.highlightForegroundColor + ";";
                            }
                            if (!Utils.isNullOrEmpty(markStyle)) {
                                markStyle = 'style="' + markStyle + '"';
                            }
                            this._processedText = this._processedText.replace(/===/g, "<mark " + markStyle + ">").replace(/\/==/g, "</mark>");
                        }
                    }
                    else {
                        this._processedText = formattedText;
                        this._treatAsPlainText = true;
                    }
                }
                else {
                    this._processedText = formattedText;
                    this._treatAsPlainText = true;
                }
            }
            if (this._treatAsPlainText) {
                element.innerText = this._processedText;
            }
            else {
                element.innerHTML = this._processedText;
            }
            if (element.firstElementChild instanceof HTMLElement) {
                var firstElementChild = element.firstElementChild;
                firstElementChild.style.marginTop = "0px";
                firstElementChild.style.width = "100%";
                if (!this.wrap) {
                    firstElementChild.style.overflow = "hidden";
                    firstElementChild.style.textOverflow = "ellipsis";
                }
            }
            if (element.lastElementChild instanceof HTMLElement) {
                element.lastElementChild.style.marginBottom = "0px";
            }
            var anchors = element.getElementsByTagName("a");
            for (var i = 0; i < anchors.length; i++) {
                var anchor = anchors[i];
                anchor.classList.add(hostConfig.makeCssClassName("ac-anchor"));
                anchor.target = "_blank";
                anchor.onclick = function (e) {
                    if (raiseAnchorClickedEvent(_this, e.target)) {
                        e.preventDefault();
                        e.cancelBubble = true;
                    }
                };
            }
            if (this.wrap) {
                element.style.wordWrap = "break-word";
                if (this.maxLines > 0) {
                    element.style.maxHeight = (this._computedLineHeight * this.maxLines) + "px";
                    element.style.overflow = "hidden";
                }
            }
            else {
                element.style.whiteSpace = "nowrap";
                element.style.textOverflow = "ellipsis";
            }
            if (AdaptiveCard.useAdvancedTextBlockTruncation || AdaptiveCard.useAdvancedCardBottomTruncation) {
                this._originalInnerHtml = element.innerHTML;
            }
            return element;
        }
        else {
            return null;
        }
    };
    TextBlock.prototype.truncateOverflow = function (maxHeight) {
        if (maxHeight >= this._computedLineHeight) {
            return this.truncateIfSupported(maxHeight);
        }
        return false;
    };
    TextBlock.prototype.undoOverflowTruncation = function () {
        this.restoreOriginalContent();
        if (AdaptiveCard.useAdvancedTextBlockTruncation && this.maxLines) {
            var maxHeight = this._computedLineHeight * this.maxLines;
            this.truncateIfSupported(maxHeight);
        }
    };
    TextBlock.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "wrap", this.wrap, false);
        Utils.setNumberProperty(result, "maxLines", this.maxLines);
        return result;
    };
    TextBlock.prototype.applyStylesTo = function (targetElement) {
        _super.prototype.applyStylesTo.call(this, targetElement);
        var parentContainer = this.getParentContainer();
        var isRtl = parentContainer ? parentContainer.isRtl() : false;
        switch (this.horizontalAlignment) {
            case Enums.HorizontalAlignment.Center:
                targetElement.style.textAlign = "center";
                break;
            case Enums.HorizontalAlignment.Right:
                targetElement.style.textAlign = isRtl ? "left" : "right";
                break;
            default:
                targetElement.style.textAlign = isRtl ? "right" : "left";
                break;
        }
        var lineHeights = this.hostConfig.lineHeights;
        if (lineHeights) {
            switch (this.size) {
                case Enums.TextSize.Small:
                    this._computedLineHeight = lineHeights.small;
                    break;
                case Enums.TextSize.Medium:
                    this._computedLineHeight = lineHeights.medium;
                    break;
                case Enums.TextSize.Large:
                    this._computedLineHeight = lineHeights.large;
                    break;
                case Enums.TextSize.ExtraLarge:
                    this._computedLineHeight = lineHeights.extraLarge;
                    break;
                default:
                    this._computedLineHeight = lineHeights.default;
                    break;
            }
        }
        else {
            // Looks like 1.33 is the magic number to compute line-height
            // from font size.
            this._computedLineHeight = this.getFontSize(this.hostConfig.getFontTypeDefinition(this.fontType)) * 1.33;
        }
        targetElement.style.lineHeight = this._computedLineHeight + "px";
    };
    TextBlock.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.wrap = Utils.getBoolValue(json["wrap"], this.wrap);
        this.maxLines = Utils.getNumberValue(json["maxLines"]);
    };
    TextBlock.prototype.getJsonTypeName = function () {
        return "TextBlock";
    };
    TextBlock.prototype.updateLayout = function (processChildren) {
        if (processChildren === void 0) { processChildren = false; }
        _super.prototype.updateLayout.call(this, processChildren);
        if (AdaptiveCard.useAdvancedTextBlockTruncation && this.maxLines && this.isRendered()) {
            // Reset the element's innerHTML in case the available room for
            // content has increased
            this.restoreOriginalContent();
            this.truncateIfSupported(this._computedLineHeight * this.maxLines);
        }
    };
    return TextBlock;
}(BaseTextBlock));
exports.TextBlock = TextBlock;
var Label = /** @class */ (function (_super) {
    __extends(Label, _super);
    function Label() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Label.prototype.getRenderedDomElementType = function () {
        return "label";
    };
    Label.prototype.internalRender = function () {
        var renderedElement = _super.prototype.internalRender.call(this);
        if (renderedElement && !Utils.isNullOrEmpty(this.forElementId)) {
            renderedElement.htmlFor = this.forElementId;
        }
        return renderedElement;
    };
    return Label;
}(TextBlock));
var TextRun = /** @class */ (function (_super) {
    __extends(TextRun, _super);
    function TextRun() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.italic = false;
        _this.strikethrough = false;
        _this.highlight = false;
        return _this;
    }
    TextRun.prototype.internalRender = function () {
        var _this = this;
        if (!Utils.isNullOrEmpty(this.text)) {
            var hostConfig = this.hostConfig;
            var formattedText = TextFormatters.formatText(this.lang, this.text);
            var element = document.createElement("span");
            element.classList.add(hostConfig.makeCssClassName("ac-textRun"));
            this.applyStylesTo(element);
            if (this.selectAction && hostConfig.supportsInteractivity) {
                var anchor = document.createElement("a");
                anchor.classList.add(hostConfig.makeCssClassName("ac-anchor"));
                anchor.href = this.selectAction.getHref();
                anchor.target = "_blank";
                anchor.onclick = function (e) {
                    e.preventDefault();
                    e.cancelBubble = true;
                    _this.selectAction.execute();
                };
                anchor.innerText = formattedText;
                element.appendChild(anchor);
            }
            else {
                element.innerText = formattedText;
            }
            return element;
        }
        else {
            return null;
        }
    };
    TextRun.prototype.applyStylesTo = function (targetElement) {
        _super.prototype.applyStylesTo.call(this, targetElement);
        if (this.italic) {
            targetElement.style.fontStyle = "italic";
        }
        if (this.strikethrough) {
            targetElement.style.textDecoration = "line-through";
        }
        if (this.highlight) {
            var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);
            targetElement.style.backgroundColor = Utils.stringToCssColor(this.isSubtle ? colorDefinition.highlightColors.subtle : colorDefinition.highlightColors.default);
        }
    };
    TextRun.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "italic", this.italic, false);
        Utils.setProperty(result, "strikethrough", this.strikethrough, false);
        Utils.setProperty(result, "highlight", this.highlight, false);
        if (this.selectAction) {
            Utils.setProperty(result, "selectAction", this.selectAction.toJSON());
        }
        return result;
    };
    TextRun.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.italic = Utils.getBoolValue(json["italic"], this.italic);
        this.strikethrough = Utils.getBoolValue(json["strikethrough"], this.strikethrough);
        this.highlight = Utils.getBoolValue(json["highlight"], this.highlight);
        this.selectAction = createActionInstance(this, json["selectAction"], [ShowCardAction.JsonTypeName], !this.isDesignMode(), errors);
    };
    TextRun.prototype.getJsonTypeName = function () {
        return "TextRun";
    };
    Object.defineProperty(TextRun.prototype, "isStandalone", {
        get: function () {
            return false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TextRun.prototype, "isInline", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    return TextRun;
}(BaseTextBlock));
exports.TextRun = TextRun;
var RichTextBlock = /** @class */ (function (_super) {
    __extends(RichTextBlock, _super);
    function RichTextBlock() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._inlines = [];
        return _this;
    }
    RichTextBlock.prototype.internalAddInline = function (inline, forceAdd) {
        if (forceAdd === void 0) { forceAdd = false; }
        if (!inline.isInline) {
            throw new Error("RichTextBlock.addInline: the specified card element cannot be used as a RichTextBlock inline.");
        }
        var doAdd = inline.parent == null || forceAdd;
        if (!doAdd && inline.parent != this) {
            throw new Error("RichTextBlock.addInline: the specified inline already belongs to another RichTextBlock.");
        }
        else {
            inline.setParent(this);
            this._inlines.push(inline);
        }
    };
    RichTextBlock.prototype.internalRender = function () {
        if (this._inlines.length > 0) {
            var element = document.createElement("div");
            element.className = this.hostConfig.makeCssClassName("ac-richTextBlock");
            var parentContainer = this.getParentContainer();
            var isRtl = parentContainer ? parentContainer.isRtl() : false;
            switch (this.horizontalAlignment) {
                case Enums.HorizontalAlignment.Center:
                    element.style.textAlign = "center";
                    break;
                case Enums.HorizontalAlignment.Right:
                    element.style.textAlign = isRtl ? "left" : "right";
                    break;
                default:
                    element.style.textAlign = isRtl ? "right" : "left";
                    break;
            }
            var renderedInlines = 0;
            for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {
                var inline = _a[_i];
                var renderedInline = inline.render();
                if (renderedInline) {
                    element.appendChild(renderedInline);
                    renderedInlines++;
                }
            }
            if (renderedInlines > 0) {
                return element;
            }
        }
        return null;
    };
    RichTextBlock.prototype.asString = function () {
        var result = "";
        for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {
            var inline = _a[_i];
            result += inline.asString();
        }
        return result;
    };
    RichTextBlock.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this._inlines = [];
        if (Array.isArray(json["inlines"])) {
            for (var _i = 0, _a = json["inlines"]; _i < _a.length; _i++) {
                var jsonInline = _a[_i];
                var inline = void 0;
                if (typeof jsonInline === "string") {
                    var textRun = new TextRun();
                    textRun.text = jsonInline;
                    inline = textRun;
                }
                else {
                    inline = createElementInstance(this, jsonInline, false, // No fallback for inlines in 1.2
                    errors);
                }
                if (inline) {
                    this.internalAddInline(inline, true);
                }
            }
        }
    };
    RichTextBlock.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        if (this._inlines.length > 0) {
            var jsonInlines = [];
            for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {
                var inline = _a[_i];
                jsonInlines.push(inline.toJSON());
            }
            Utils.setProperty(result, "inlines", jsonInlines);
        }
        return result;
    };
    RichTextBlock.prototype.getJsonTypeName = function () {
        return "RichTextBlock";
    };
    RichTextBlock.prototype.getInlineCount = function () {
        return this._inlines.length;
    };
    RichTextBlock.prototype.getInlineAt = function (index) {
        if (index >= 0 && index < this._inlines.length) {
            return this._inlines[index];
        }
        else {
            throw new Error("RichTextBlock.getInlineAt: Index out of range (" + index + ")");
        }
    };
    RichTextBlock.prototype.addInline = function (inline) {
        this.internalAddInline(inline);
    };
    RichTextBlock.prototype.removeInline = function (inline) {
        var index = this._inlines.indexOf(inline);
        if (index >= 0) {
            this._inlines[index].setParent(null);
            this._inlines.splice(index, 1);
            return true;
        }
        return false;
    };
    return RichTextBlock;
}(CardElement));
exports.RichTextBlock = RichTextBlock;
var Fact = /** @class */ (function (_super) {
    __extends(Fact, _super);
    function Fact(name, value) {
        if (name === void 0) { name = undefined; }
        if (value === void 0) { value = undefined; }
        var _this = _super.call(this) || this;
        _this.name = name;
        _this.value = value;
        return _this;
    }
    Fact.prototype.parse = function (json) {
        _super.prototype.parse.call(this, json);
        this.name = Utils.getStringValue(json["title"]);
        this.value = Utils.getStringValue(json["value"]);
    };
    Fact.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "title", this.name);
        Utils.setProperty(result, "value", this.value);
        return result;
    };
    return Fact;
}(SerializableObject));
exports.Fact = Fact;
var FactSet = /** @class */ (function (_super) {
    __extends(FactSet, _super);
    function FactSet() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.facts = [];
        return _this;
    }
    Object.defineProperty(FactSet.prototype, "useDefaultSizing", {
        get: function () {
            return false;
        },
        enumerable: true,
        configurable: true
    });
    FactSet.prototype.internalRender = function () {
        var element = null;
        var hostConfig = this.hostConfig;
        if (this.facts.length > 0) {
            element = document.createElement("table");
            element.style.borderWidth = "0px";
            element.style.borderSpacing = "0px";
            element.style.borderStyle = "none";
            element.style.borderCollapse = "collapse";
            element.style.display = "block";
            element.style.overflow = "hidden";
            element.classList.add(hostConfig.makeCssClassName("ac-factset"));
            for (var i = 0; i < this.facts.length; i++) {
                var trElement = document.createElement("tr");
                if (i > 0) {
                    trElement.style.marginTop = hostConfig.factSet.spacing + "px";
                }
                // Title column
                var tdElement = document.createElement("td");
                tdElement.style.padding = "0";
                tdElement.classList.add(hostConfig.makeCssClassName("ac-fact-title"));
                if (hostConfig.factSet.title.maxWidth) {
                    tdElement.style.maxWidth = hostConfig.factSet.title.maxWidth + "px";
                }
                tdElement.style.verticalAlign = "top";
                var textBlock = new TextBlock();
                textBlock.setParent(this);
                textBlock.text = (Utils.isNullOrEmpty(this.facts[i].name) && this.isDesignMode()) ? "Title" : this.facts[i].name;
                textBlock.size = hostConfig.factSet.title.size;
                textBlock.color = hostConfig.factSet.title.color;
                textBlock.isSubtle = hostConfig.factSet.title.isSubtle;
                textBlock.weight = hostConfig.factSet.title.weight;
                textBlock.wrap = hostConfig.factSet.title.wrap;
                textBlock.spacing = Enums.Spacing.None;
                Utils.appendChild(tdElement, textBlock.render());
                Utils.appendChild(trElement, tdElement);
                // Spacer column
                tdElement = document.createElement("td");
                tdElement.style.width = "10px";
                Utils.appendChild(trElement, tdElement);
                // Value column
                tdElement = document.createElement("td");
                tdElement.style.padding = "0";
                tdElement.style.verticalAlign = "top";
                tdElement.classList.add(hostConfig.makeCssClassName("ac-fact-value"));
                textBlock = new TextBlock();
                textBlock.setParent(this);
                textBlock.text = this.facts[i].value;
                textBlock.size = hostConfig.factSet.value.size;
                textBlock.color = hostConfig.factSet.value.color;
                textBlock.isSubtle = hostConfig.factSet.value.isSubtle;
                textBlock.weight = hostConfig.factSet.value.weight;
                textBlock.wrap = hostConfig.factSet.value.wrap;
                textBlock.spacing = Enums.Spacing.None;
                Utils.appendChild(tdElement, textBlock.render());
                Utils.appendChild(trElement, tdElement);
                Utils.appendChild(element, trElement);
            }
        }
        return element;
    };
    FactSet.prototype.getJsonTypeName = function () {
        return "FactSet";
    };
    FactSet.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setArrayProperty(result, "facts", this.facts);
        /*
        let facts = [];

        if (this.facts) {
            for (let fact of this.facts) {
                facts.push(fact.toJSON());
            }
        }

        Utils.setProperty(result, "facts", facts);
        */
        return result;
    };
    FactSet.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.facts = [];
        var jsonFacts = json["facts"];
        if (Array.isArray(jsonFacts)) {
            for (var _i = 0, jsonFacts_1 = jsonFacts; _i < jsonFacts_1.length; _i++) {
                var jsonFact = jsonFacts_1[_i];
                var fact = new Fact();
                fact.parse(jsonFact);
                this.facts.push(fact);
            }
        }
    };
    return FactSet;
}(CardElement));
exports.FactSet = FactSet;
var Image = /** @class */ (function (_super) {
    __extends(Image, _super);
    function Image() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.style = Enums.ImageStyle.Default;
        _this.size = Enums.Size.Auto;
        _this.pixelWidth = null;
        _this.pixelHeight = null;
        _this.altText = "";
        return _this;
    }
    Image.prototype.parseDimension = function (name, value, errors) {
        if (value) {
            if (typeof value === "string") {
                try {
                    var size = Shared.SizeAndUnit.parse(value);
                    if (size.unit == Enums.SizeUnit.Pixel) {
                        return size.physicalSize;
                    }
                }
                catch (_a) {
                    // Ignore error
                }
            }
            raiseParseError({
                error: Enums.ValidationError.InvalidPropertyValue,
                message: "Invalid image " + name + ": " + value
            }, errors);
        }
        return 0;
    };
    Image.prototype.applySize = function (element) {
        if (this.pixelWidth || this.pixelHeight) {
            if (this.pixelWidth) {
                element.style.width = this.pixelWidth + "px";
            }
            if (this.pixelHeight) {
                element.style.height = this.pixelHeight + "px";
            }
        }
        else {
            switch (this.size) {
                case Enums.Size.Stretch:
                    element.style.width = "100%";
                    break;
                case Enums.Size.Auto:
                    element.style.maxWidth = "100%";
                    break;
                case Enums.Size.Small:
                    element.style.width = this.hostConfig.imageSizes.small + "px";
                    break;
                case Enums.Size.Large:
                    element.style.width = this.hostConfig.imageSizes.large + "px";
                    break;
                case Enums.Size.Medium:
                    element.style.width = this.hostConfig.imageSizes.medium + "px";
                    break;
            }
        }
    };
    Object.defineProperty(Image.prototype, "useDefaultSizing", {
        get: function () {
            return false;
        },
        enumerable: true,
        configurable: true
    });
    Image.prototype.internalRender = function () {
        var _this = this;
        var element = null;
        if (!Utils.isNullOrEmpty(this.url)) {
            element = document.createElement("div");
            element.style.display = "flex";
            element.style.alignItems = "flex-start";
            element.onkeypress = function (e) {
                if (_this.selectAction && (e.keyCode == 13 || e.keyCode == 32)) { // enter or space pressed
                    e.preventDefault();
                    e.cancelBubble = true;
                    _this.selectAction.execute();
                }
            };
            element.onclick = function (e) {
                if (_this.selectAction) {
                    e.preventDefault();
                    e.cancelBubble = true;
                    _this.selectAction.execute();
                }
            };
            switch (this.horizontalAlignment) {
                case Enums.HorizontalAlignment.Center:
                    element.style.justifyContent = "center";
                    break;
                case Enums.HorizontalAlignment.Right:
                    element.style.justifyContent = "flex-end";
                    break;
                default:
                    element.style.justifyContent = "flex-start";
                    break;
            }
            // Cache hostConfig to avoid walking the parent hierarchy multiple times
            var hostConfig = this.hostConfig;
            var imageElement = document.createElement("img");
            imageElement.onload = function (e) {
                raiseImageLoadedEvent(_this);
            };
            imageElement.onerror = function (e) {
                var card = _this.getRootElement();
                _this.renderedElement.innerHTML = "";
                if (card && card.designMode) {
                    var errorElement = document.createElement("div");
                    errorElement.style.display = "flex";
                    errorElement.style.alignItems = "center";
                    errorElement.style.justifyContent = "center";
                    errorElement.style.backgroundColor = "#EEEEEE";
                    errorElement.style.color = "black";
                    errorElement.innerText = ":-(";
                    errorElement.style.padding = "10px";
                    _this.applySize(errorElement);
                    _this.renderedElement.appendChild(errorElement);
                }
                raiseImageLoadedEvent(_this);
            };
            imageElement.style.maxHeight = "100%";
            imageElement.style.minWidth = "0";
            imageElement.classList.add(hostConfig.makeCssClassName("ac-image"));
            if (this.selectAction != null && hostConfig.supportsInteractivity) {
                imageElement.tabIndex = 0;
                imageElement.setAttribute("role", "button");
                imageElement.setAttribute("aria-label", this.selectAction.title);
                imageElement.classList.add(hostConfig.makeCssClassName("ac-selectable"));
            }
            this.applySize(imageElement);
            if (this.style === Enums.ImageStyle.Person) {
                imageElement.style.borderRadius = "50%";
                imageElement.style.backgroundPosition = "50% 50%";
                imageElement.style.backgroundRepeat = "no-repeat";
            }
            if (!Utils.isNullOrEmpty(this.backgroundColor)) {
                imageElement.style.backgroundColor = Utils.stringToCssColor(this.backgroundColor);
            }
            imageElement.src = this.url;
            imageElement.alt = this.altText;
            element.appendChild(imageElement);
        }
        return element;
    };
    Image.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        if (this._selectAction) {
            Utils.setProperty(result, "selectAction", this._selectAction.toJSON());
        }
        Utils.setEnumProperty(Enums.ImageStyle, result, "style", this.style, Enums.ImageStyle.Default);
        Utils.setProperty(result, "backgroundColor", this.backgroundColor);
        Utils.setProperty(result, "url", this.url);
        Utils.setEnumProperty(Enums.Size, result, "size", this.size, Enums.Size.Auto);
        if (this.pixelWidth) {
            Utils.setProperty(result, "width", this.pixelWidth + "px");
        }
        if (this.pixelHeight) {
            Utils.setProperty(result, "height", this.pixelHeight + "px");
        }
        Utils.setProperty(result, "altText", this.altText);
        return result;
    };
    Image.prototype.getJsonTypeName = function () {
        return "Image";
    };
    Image.prototype.getActionById = function (id) {
        var result = _super.prototype.getActionById.call(this, id);
        if (!result && this.selectAction) {
            result = this.selectAction.getActionById(id);
        }
        return result;
    };
    Image.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.url = Utils.getStringValue(json["url"]);
        this.backgroundColor = Utils.getStringValue(json["backgroundColor"]);
        var styleString = Utils.getStringValue(json["style"]);
        if (styleString && styleString.toLowerCase() === "normal") {
            this.style = Enums.ImageStyle.Default;
            raiseParseError({
                error: Enums.ValidationError.Deprecated,
                message: "The Image.style value \"normal\" is deprecated and will be removed. Use \"default\" instead."
            }, errors);
        }
        else {
            this.style = Utils.getEnumValue(Enums.ImageStyle, styleString, this.style);
        }
        this.size = Utils.getEnumValue(Enums.Size, json["size"], this.size);
        this.altText = Utils.getStringValue(json["altText"]);
        // pixelWidth and pixelHeight are only parsed for backwards compatibility.
        // Payloads should use the width and height proerties instead.
        if (json["pixelWidth"] && typeof json["pixelWidth"] === "number") {
            this.pixelWidth = json["pixelWidth"];
            raiseParseError({
                error: Enums.ValidationError.Deprecated,
                message: "The pixelWidth property is deprecated and will be removed. Use the width property instead."
            }, errors);
        }
        if (json["pixelHeight"] && typeof json["pixelHeight"] === "number") {
            this.pixelHeight = json["pixelHeight"];
            raiseParseError({
                error: Enums.ValidationError.Deprecated,
                message: "The pixelHeight property is deprecated and will be removed. Use the height property instead."
            }, errors);
        }
        var size = this.parseDimension("width", json["width"], errors);
        if (size > 0) {
            this.pixelWidth = size;
        }
        size = this.parseDimension("height", json["height"], errors);
        if (size > 0) {
            this.pixelHeight = size;
        }
        this.selectAction = createActionInstance(this, json["selectAction"], [ShowCardAction.JsonTypeName], !this.isDesignMode(), errors);
    };
    Image.prototype.getResourceInformation = function () {
        if (!Utils.isNullOrEmpty(this.url)) {
            return [{ url: this.url, mimeType: "image" }];
        }
        else {
            return [];
        }
    };
    Object.defineProperty(Image.prototype, "selectAction", {
        get: function () {
            return this._selectAction;
        },
        set: function (value) {
            this._selectAction = value;
            if (this._selectAction) {
                this._selectAction.setParent(this);
            }
        },
        enumerable: true,
        configurable: true
    });
    return Image;
}(CardElement));
exports.Image = Image;
var CardElementContainer = /** @class */ (function (_super) {
    __extends(CardElementContainer, _super);
    function CardElementContainer() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._selectAction = null;
        _this.allowVerticalOverflow = false;
        return _this;
    }
    CardElementContainer.prototype.isElementAllowed = function (element, forbiddenElementTypes) {
        if (!this.hostConfig.supportsInteractivity && element.isInteractive) {
            return false;
        }
        if (forbiddenElementTypes) {
            for (var _i = 0, forbiddenElementTypes_1 = forbiddenElementTypes; _i < forbiddenElementTypes_1.length; _i++) {
                var forbiddenElementType = forbiddenElementTypes_1[_i];
                if (element.getJsonTypeName() === forbiddenElementType) {
                    return false;
                }
            }
        }
        return true;
    };
    CardElementContainer.prototype.applyPadding = function () {
        _super.prototype.applyPadding.call(this);
        if (!this.renderedElement) {
            return;
        }
        var physicalPadding = new Shared.SpacingDefinition();
        if (this.getEffectivePadding()) {
            physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());
        }
        this.renderedElement.style.paddingTop = physicalPadding.top + "px";
        this.renderedElement.style.paddingRight = physicalPadding.right + "px";
        this.renderedElement.style.paddingBottom = physicalPadding.bottom + "px";
        this.renderedElement.style.paddingLeft = physicalPadding.left + "px";
        this.renderedElement.style.marginRight = "0";
        this.renderedElement.style.marginLeft = "0";
    };
    CardElementContainer.prototype.getSelectAction = function () {
        return this._selectAction;
    };
    CardElementContainer.prototype.setSelectAction = function (value) {
        this._selectAction = value;
        if (this._selectAction) {
            this._selectAction.setParent(this);
        }
    };
    Object.defineProperty(CardElementContainer.prototype, "isSelectable", {
        get: function () {
            return false;
        },
        enumerable: true,
        configurable: true
    });
    CardElementContainer.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        if (this.isSelectable) {
            this._selectAction = createActionInstance(this, json["selectAction"], [ShowCardAction.JsonTypeName], !this.isDesignMode(), errors);
        }
    };
    CardElementContainer.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        if (this._selectAction && this.isSelectable) {
            Utils.setProperty(result, "selectAction", this._selectAction.toJSON());
        }
        return result;
    };
    CardElementContainer.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        for (var i = 0; i < this.getItemCount(); i++) {
            var item = this.getItemAt(i);
            if (!this.hostConfig.supportsInteractivity && item.isInteractive) {
                context.addFailure(this, {
                    error: Enums.ValidationError.InteractivityNotAllowed,
                    message: "Interactivity is not allowed."
                });
            }
            if (!this.isElementAllowed(item, this.getForbiddenElementTypes())) {
                context.addFailure(this, {
                    error: Enums.ValidationError.InteractivityNotAllowed,
                    message: "Elements of type " + item.getJsonTypeName() + " are not allowed in this container."
                });
            }
            item.internalValidateProperties(context);
        }
        if (this._selectAction) {
            this._selectAction.internalValidateProperties(context);
        }
    };
    CardElementContainer.prototype.render = function () {
        var _this = this;
        var element = _super.prototype.render.call(this);
        var hostConfig = this.hostConfig;
        if (this.allowVerticalOverflow) {
            element.style.overflowX = "hidden";
            element.style.overflowY = "auto";
        }
        if (element && this.isSelectable && this._selectAction && hostConfig.supportsInteractivity) {
            element.classList.add(hostConfig.makeCssClassName("ac-selectable"));
            element.tabIndex = 0;
            element.setAttribute("role", "button");
            element.setAttribute("aria-label", this._selectAction.title);
            element.onclick = function (e) {
                if (_this._selectAction != null) {
                    e.preventDefault();
                    e.cancelBubble = true;
                    _this._selectAction.execute();
                }
            };
            element.onkeypress = function (e) {
                if (_this._selectAction != null && (e.keyCode == 13 || e.keyCode == 32)) {
                    // Enter or space pressed
                    e.preventDefault();
                    e.cancelBubble = true;
                    _this._selectAction.execute();
                }
            };
        }
        return element;
    };
    CardElementContainer.prototype.updateLayout = function (processChildren) {
        if (processChildren === void 0) { processChildren = true; }
        _super.prototype.updateLayout.call(this, processChildren);
        if (processChildren) {
            for (var i = 0; i < this.getItemCount(); i++) {
                this.getItemAt(i).updateLayout();
            }
        }
    };
    CardElementContainer.prototype.getAllInputs = function () {
        var result = [];
        for (var i = 0; i < this.getItemCount(); i++) {
            result = result.concat(this.getItemAt(i).getAllInputs());
        }
        return result;
    };
    CardElementContainer.prototype.getResourceInformation = function () {
        var result = [];
        for (var i = 0; i < this.getItemCount(); i++) {
            result = result.concat(this.getItemAt(i).getResourceInformation());
        }
        return result;
    };
    CardElementContainer.prototype.getElementById = function (id) {
        var result = _super.prototype.getElementById.call(this, id);
        if (!result) {
            for (var i = 0; i < this.getItemCount(); i++) {
                result = this.getItemAt(i).getElementById(id);
                if (result) {
                    break;
                }
            }
        }
        return result;
    };
    return CardElementContainer;
}(CardElement));
exports.CardElementContainer = CardElementContainer;
var ImageSet = /** @class */ (function (_super) {
    __extends(ImageSet, _super);
    function ImageSet() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._images = [];
        _this.imageSize = Enums.Size.Medium;
        return _this;
    }
    ImageSet.prototype.internalRender = function () {
        var element = null;
        if (this._images.length > 0) {
            element = document.createElement("div");
            element.style.display = "flex";
            element.style.flexWrap = "wrap";
            for (var i = 0; i < this._images.length; i++) {
                this._images[i].size = this.imageSize;
                var renderedImage = this._images[i].render();
                renderedImage.style.display = "inline-flex";
                renderedImage.style.margin = "0px";
                renderedImage.style.marginRight = "10px";
                renderedImage.style.maxHeight = this.hostConfig.imageSet.maxImageHeight + "px";
                Utils.appendChild(element, renderedImage);
            }
        }
        return element;
    };
    ImageSet.prototype.getItemCount = function () {
        return this._images.length;
    };
    ImageSet.prototype.getItemAt = function (index) {
        return this._images[index];
    };
    ImageSet.prototype.getFirstVisibleRenderedItem = function () {
        return this._images && this._images.length > 0 ? this._images[0] : null;
    };
    ImageSet.prototype.getLastVisibleRenderedItem = function () {
        return this._images && this._images.length > 0 ? this._images[this._images.length - 1] : null;
    };
    ImageSet.prototype.removeItem = function (item) {
        if (item instanceof Image) {
            var itemIndex = this._images.indexOf(item);
            if (itemIndex >= 0) {
                this._images.splice(itemIndex, 1);
                item.setParent(null);
                this.updateLayout();
                return true;
            }
        }
        return false;
    };
    ImageSet.prototype.getJsonTypeName = function () {
        return "ImageSet";
    };
    ImageSet.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setEnumProperty(Enums.Size, result, "imageSize", this.imageSize, Enums.Size.Medium);
        if (this._images.length > 0) {
            var images = [];
            for (var _i = 0, _a = this._images; _i < _a.length; _i++) {
                var image = _a[_i];
                images.push(image.toJSON());
            }
            Utils.setProperty(result, "images", images);
        }
        return result;
    };
    ImageSet.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.imageSize = Utils.getEnumValue(Enums.Size, json["imageSize"], Enums.Size.Medium);
        if (json["images"] != null) {
            var jsonImages = json["images"];
            this._images = [];
            for (var i = 0; i < jsonImages.length; i++) {
                var image = new Image();
                image.parse(jsonImages[i], errors);
                this.addImage(image);
            }
        }
    };
    ImageSet.prototype.addImage = function (image) {
        if (!image.parent) {
            this._images.push(image);
            image.setParent(this);
        }
        else {
            throw new Error("This image already belongs to another ImageSet");
        }
    };
    ImageSet.prototype.indexOf = function (cardElement) {
        return cardElement instanceof Image ? this._images.indexOf(cardElement) : -1;
    };
    return ImageSet;
}(CardElementContainer));
exports.ImageSet = ImageSet;
var MediaSource = /** @class */ (function (_super) {
    __extends(MediaSource, _super);
    function MediaSource(url, mimeType) {
        if (url === void 0) { url = undefined; }
        if (mimeType === void 0) { mimeType = undefined; }
        var _this = _super.call(this) || this;
        _this.url = url;
        _this.mimeType = mimeType;
        return _this;
    }
    MediaSource.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.mimeType = Utils.getStringValue(json["mimeType"]);
        this.url = Utils.getStringValue(json["url"]);
    };
    MediaSource.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "mimeType", this.mimeType);
        Utils.setProperty(result, "url", this.url);
        return result;
    };
    return MediaSource;
}(SerializableObject));
exports.MediaSource = MediaSource;
var Media = /** @class */ (function (_super) {
    __extends(Media, _super);
    function Media() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.sources = [];
        return _this;
    }
    Media.prototype.getPosterUrl = function () {
        return this.poster ? this.poster : this.hostConfig.media.defaultPoster;
    };
    Media.prototype.processSources = function () {
        this._selectedSources = [];
        this._selectedMediaType = undefined;
        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {
            var source = _a[_i];
            var mimeComponents = source.mimeType ? source.mimeType.split('/') : [];
            if (mimeComponents.length == 2) {
                if (!this._selectedMediaType) {
                    var index = Media.supportedMediaTypes.indexOf(mimeComponents[0]);
                    if (index >= 0) {
                        this._selectedMediaType = Media.supportedMediaTypes[index];
                    }
                }
                if (mimeComponents[0] == this._selectedMediaType) {
                    this._selectedSources.push(source);
                }
            }
        }
    };
    Media.prototype.renderPoster = function () {
        var _this = this;
        var playButtonArrowWidth = 12;
        var playButtonArrowHeight = 15;
        var posterRootElement = document.createElement("div");
        posterRootElement.className = this.hostConfig.makeCssClassName("ac-media-poster");
        posterRootElement.setAttribute("role", "contentinfo");
        posterRootElement.setAttribute("aria-label", this.altText ? this.altText : "Media content");
        posterRootElement.style.position = "relative";
        posterRootElement.style.display = "flex";
        var posterUrl = this.getPosterUrl();
        if (posterUrl) {
            var posterImageElement_1 = document.createElement("img");
            posterImageElement_1.style.width = "100%";
            posterImageElement_1.style.height = "100%";
            posterImageElement_1.onerror = function (e) {
                posterImageElement_1.parentNode.removeChild(posterImageElement_1);
                posterRootElement.classList.add("empty");
                posterRootElement.style.minHeight = "150px";
            };
            posterImageElement_1.src = posterUrl;
            posterRootElement.appendChild(posterImageElement_1);
        }
        else {
            posterRootElement.classList.add("empty");
            posterRootElement.style.minHeight = "150px";
        }
        if (this.hostConfig.supportsInteractivity && this._selectedSources.length > 0) {
            var playButtonOuterElement = document.createElement("div");
            playButtonOuterElement.setAttribute("role", "button");
            playButtonOuterElement.setAttribute("aria-label", "Play media");
            playButtonOuterElement.className = this.hostConfig.makeCssClassName("ac-media-playButton");
            playButtonOuterElement.style.display = "flex";
            playButtonOuterElement.style.alignItems = "center";
            playButtonOuterElement.style.justifyContent = "center";
            playButtonOuterElement.onclick = function (e) {
                if (_this.hostConfig.media.allowInlinePlayback) {
                    e.preventDefault();
                    e.cancelBubble = true;
                    var mediaPlayerElement = _this.renderMediaPlayer();
                    _this.renderedElement.innerHTML = "";
                    _this.renderedElement.appendChild(mediaPlayerElement);
                    mediaPlayerElement.play();
                }
                else {
                    if (Media.onPlay) {
                        e.preventDefault();
                        e.cancelBubble = true;
                        Media.onPlay(_this);
                    }
                }
            };
            var playButtonInnerElement = document.createElement("div");
            playButtonInnerElement.className = this.hostConfig.makeCssClassName("ac-media-playButton-arrow");
            playButtonInnerElement.style.width = playButtonArrowWidth + "px";
            playButtonInnerElement.style.height = playButtonArrowHeight + "px";
            playButtonInnerElement.style.borderTopWidth = (playButtonArrowHeight / 2) + "px";
            playButtonInnerElement.style.borderBottomWidth = (playButtonArrowHeight / 2) + "px";
            playButtonInnerElement.style.borderLeftWidth = playButtonArrowWidth + "px";
            playButtonInnerElement.style.borderRightWidth = "0";
            playButtonInnerElement.style.borderStyle = "solid";
            playButtonInnerElement.style.borderTopColor = "transparent";
            playButtonInnerElement.style.borderRightColor = "transparent";
            playButtonInnerElement.style.borderBottomColor = "transparent";
            playButtonInnerElement.style.transform = "translate(" + (playButtonArrowWidth / 10) + "px,0px)";
            playButtonOuterElement.appendChild(playButtonInnerElement);
            var playButtonContainer = document.createElement("div");
            playButtonContainer.style.position = "absolute";
            playButtonContainer.style.left = "0";
            playButtonContainer.style.top = "0";
            playButtonContainer.style.width = "100%";
            playButtonContainer.style.height = "100%";
            playButtonContainer.style.display = "flex";
            playButtonContainer.style.justifyContent = "center";
            playButtonContainer.style.alignItems = "center";
            playButtonContainer.appendChild(playButtonOuterElement);
            posterRootElement.appendChild(playButtonContainer);
        }
        return posterRootElement;
    };
    Media.prototype.renderMediaPlayer = function () {
        var mediaElement;
        if (this._selectedMediaType == "video") {
            var videoPlayer = document.createElement("video");
            var posterUrl = this.getPosterUrl();
            if (posterUrl) {
                videoPlayer.poster = posterUrl;
            }
            mediaElement = videoPlayer;
        }
        else {
            mediaElement = document.createElement("audio");
        }
        mediaElement.controls = true;
        mediaElement.preload = "none";
        mediaElement.style.width = "100%";
        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {
            var source = _a[_i];
            var src = document.createElement("source");
            src.src = source.url;
            src.type = source.mimeType;
            mediaElement.appendChild(src);
        }
        return mediaElement;
    };
    Media.prototype.internalRender = function () {
        var element = document.createElement("div");
        element.className = this.hostConfig.makeCssClassName("ac-media");
        this.processSources();
        element.appendChild(this.renderPoster());
        return element;
    };
    Media.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.poster = Utils.getStringValue(json["poster"]);
        this.altText = Utils.getStringValue(json["altText"]);
        this.sources = [];
        if (Array.isArray(json["sources"])) {
            for (var _i = 0, _a = json["sources"]; _i < _a.length; _i++) {
                var jsonSource = _a[_i];
                var source = new MediaSource();
                source.parse(jsonSource, errors);
                this.sources.push(source);
            }
        }
    };
    Media.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "poster", this.poster);
        Utils.setProperty(result, "altText", this.altText);
        /*
        if (this.sources.length > 0) {
            let serializedSources = [];

            for (let source of this.sources) {
                serializedSources.push(source.toJSON());
            }

            Utils.setProperty(result, "sources", serializedSources);
        }
        */
        Utils.setArrayProperty(result, "sources", this.sources);
        return result;
    };
    Media.prototype.getJsonTypeName = function () {
        return "Media";
    };
    Media.prototype.getResourceInformation = function () {
        var result = [];
        var posterUrl = this.getPosterUrl();
        if (!Utils.isNullOrEmpty(posterUrl)) {
            result.push({ url: posterUrl, mimeType: "image" });
        }
        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {
            var mediaSource = _a[_i];
            if (!Utils.isNullOrEmpty(mediaSource.url)) {
                result.push({ url: mediaSource.url, mimeType: mediaSource.mimeType });
            }
        }
        return result;
    };
    Object.defineProperty(Media.prototype, "selectedMediaType", {
        get: function () {
            return this._selectedMediaType;
        },
        enumerable: true,
        configurable: true
    });
    Media.supportedMediaTypes = ["audio", "video"];
    Media.onPlay = null;
    return Media;
}(CardElement));
exports.Media = Media;
var InputValidationOptions = /** @class */ (function (_super) {
    __extends(InputValidationOptions, _super);
    function InputValidationOptions() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.necessity = Enums.InputValidationNecessity.Optional;
        _this.errorMessage = undefined;
        return _this;
    }
    InputValidationOptions.prototype.parse = function (json) {
        _super.prototype.parse.call(this, json);
        this.necessity = Utils.getEnumValue(Enums.InputValidationNecessity, json["necessity"], this.necessity);
        this.errorMessage = Utils.getStringValue(json["errorMessage"]);
    };
    InputValidationOptions.prototype.toJSON = function () {
        if (this.necessity != Enums.InputValidationNecessity.Optional || !Utils.isNullOrEmpty(this.errorMessage)) {
            var result = _super.prototype.toJSON.call(this);
            Utils.setEnumProperty(Enums.InputValidationNecessity, result, "necessity", this.necessity, Enums.InputValidationNecessity.Optional);
            Utils.setProperty(result, "errorMessage", this.errorMessage);
            return result;
        }
        else {
            return null;
        }
    };
    return InputValidationOptions;
}(SerializableObject));
exports.InputValidationOptions = InputValidationOptions;
var Input = /** @class */ (function (_super) {
    __extends(Input, _super);
    function Input() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.validation = new InputValidationOptions();
        return _this;
    }
    Object.defineProperty(Input.prototype, "isNullable", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Input.prototype, "renderedInputControlElement", {
        get: function () {
            return this._renderedInputControlElement;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Input.prototype, "inputControlContainerElement", {
        get: function () {
            return this._inputControlContainerElement;
        },
        enumerable: true,
        configurable: true
    });
    Input.prototype.overrideInternalRender = function () {
        var hostConfig = this.hostConfig;
        this._outerContainerElement = document.createElement("div");
        this._outerContainerElement.style.display = "flex";
        this._outerContainerElement.style.flexDirection = "column";
        this._inputControlContainerElement = document.createElement("div");
        this._inputControlContainerElement.className = hostConfig.makeCssClassName("ac-input-container");
        this._inputControlContainerElement.style.display = "flex";
        this._renderedInputControlElement = this.internalRender();
        this._renderedInputControlElement.style.minWidth = "0px";
        if (AdaptiveCard.useBuiltInInputValidation && this.isNullable && this.validation.necessity == Enums.InputValidationNecessity.RequiredWithVisualCue) {
            this._renderedInputControlElement.classList.add(hostConfig.makeCssClassName("ac-input-required"));
        }
        this._inputControlContainerElement.appendChild(this._renderedInputControlElement);
        this._outerContainerElement.appendChild(this._inputControlContainerElement);
        return this._outerContainerElement;
    };
    Input.prototype.valueChanged = function () {
        this.resetValidationFailureCue();
        if (this.onValueChanged) {
            this.onValueChanged(this);
        }
        raiseInputValueChangedEvent(this);
    };
    Input.prototype.resetValidationFailureCue = function () {
        if (AdaptiveCard.useBuiltInInputValidation && this.renderedElement) {
            this._renderedInputControlElement.classList.remove(this.hostConfig.makeCssClassName("ac-input-validation-failed"));
            if (this._errorMessageElement) {
                this._outerContainerElement.removeChild(this._errorMessageElement);
                this._errorMessageElement = null;
            }
        }
    };
    Input.prototype.showValidationErrorMessage = function () {
        if (this.renderedElement && AdaptiveCard.useBuiltInInputValidation && AdaptiveCard.displayInputValidationErrors && !Utils.isNullOrEmpty(this.validation.errorMessage)) {
            this._errorMessageElement = document.createElement("span");
            this._errorMessageElement.className = this.hostConfig.makeCssClassName("ac-input-validation-error-message");
            this._errorMessageElement.textContent = this.validation.errorMessage;
            this._outerContainerElement.appendChild(this._errorMessageElement);
        }
    };
    Input.prototype.parseInputValue = function (value) {
        return value;
    };
    Input.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "title", this.title);
        Utils.setProperty(result, "value", this.renderedElement && !Utils.isNullOrEmpty(this.value) ? this.value : this.defaultValue);
        if (AdaptiveCard.useBuiltInInputValidation) {
            Utils.setProperty(result, "validation", this.validation.toJSON());
        }
        return result;
    };
    Input.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (Utils.isNullOrEmpty(this.id)) {
            context.addFailure(this, {
                error: Enums.ValidationError.PropertyCantBeNull,
                message: "All inputs must have a unique Id"
            });
        }
    };
    Input.prototype.validateValue = function () {
        if (AdaptiveCard.useBuiltInInputValidation) {
            this.resetValidationFailureCue();
            var result = this.validation.necessity != Enums.InputValidationNecessity.Optional ? !Utils.isNullOrEmpty(this.value) : true;
            if (!result && this.renderedElement) {
                this._renderedInputControlElement.classList.add(this.hostConfig.makeCssClassName("ac-input-validation-failed"));
                this.showValidationErrorMessage();
            }
            return result;
        }
        else {
            return true;
        }
    };
    Input.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.id = Utils.getStringValue(json["id"]);
        this.defaultValue = Utils.getStringValue(json["value"]);
        if (AdaptiveCard.useBuiltInInputValidation) {
            var jsonValidation = json["validation"];
            if (jsonValidation) {
                this.validation.parse(jsonValidation);
            }
        }
    };
    Input.prototype.getAllInputs = function () {
        return [this];
    };
    Object.defineProperty(Input.prototype, "defaultValue", {
        get: function () {
            return this._defaultValue;
        },
        set: function (value) {
            this._defaultValue = this.parseInputValue(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Input.prototype, "isInteractive", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    return Input;
}(CardElement));
exports.Input = Input;
var TextInput = /** @class */ (function (_super) {
    __extends(TextInput, _super);
    function TextInput() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.isMultiline = false;
        _this.style = Enums.InputTextStyle.Text;
        return _this;
    }
    TextInput.prototype.internalRender = function () {
        var _this = this;
        if (this.isMultiline) {
            var textareaElement = document.createElement("textarea");
            textareaElement.className = this.hostConfig.makeCssClassName("ac-input", "ac-textInput", "ac-multiline");
            textareaElement.style.flex = "1 1 auto";
            textareaElement.tabIndex = 0;
            if (!Utils.isNullOrEmpty(this.placeholder)) {
                textareaElement.placeholder = this.placeholder;
                textareaElement.setAttribute("aria-label", this.placeholder);
            }
            if (!Utils.isNullOrEmpty(this.defaultValue)) {
                textareaElement.value = this.defaultValue;
            }
            if (this.maxLength && this.maxLength > 0) {
                textareaElement.maxLength = this.maxLength;
            }
            textareaElement.oninput = function () { _this.valueChanged(); };
            textareaElement.onkeypress = function (e) {
                // Ctrl+Enter pressed
                if (e.keyCode == 10 && _this.inlineAction) {
                    _this.inlineAction.execute();
                }
            };
            return textareaElement;
        }
        else {
            var inputElement = document.createElement("input");
            inputElement.type = Enums.InputTextStyle[this.style].toLowerCase();
            inputElement.className = this.hostConfig.makeCssClassName("ac-input", "ac-textInput");
            inputElement.style.flex = "1 1 auto";
            inputElement.tabIndex = 0;
            if (!Utils.isNullOrEmpty(this.placeholder)) {
                inputElement.placeholder = this.placeholder;
                inputElement.setAttribute("aria-label", this.placeholder);
            }
            if (!Utils.isNullOrEmpty(this.defaultValue)) {
                inputElement.value = this.defaultValue;
            }
            if (this.maxLength && this.maxLength > 0) {
                inputElement.maxLength = this.maxLength;
            }
            inputElement.oninput = function () { _this.valueChanged(); };
            inputElement.onkeypress = function (e) {
                // Enter pressed
                if (e.keyCode == 13 && _this.inlineAction) {
                    _this.inlineAction.execute();
                }
            };
            return inputElement;
        }
    };
    TextInput.prototype.overrideInternalRender = function () {
        var _this = this;
        var renderedInputControl = _super.prototype.overrideInternalRender.call(this);
        if (this.inlineAction) {
            var button_1 = document.createElement("button");
            button_1.className = this.hostConfig.makeCssClassName("ac-inlineActionButton");
            button_1.onclick = function (e) {
                e.preventDefault();
                e.cancelBubble = true;
                _this.inlineAction.execute();
            };
            if (!Utils.isNullOrEmpty(this.inlineAction.iconUrl)) {
                button_1.classList.add("iconOnly");
                var icon_1 = document.createElement("img");
                icon_1.style.height = "100%";
                // The below trick is necessary as a workaround in Chrome where the icon is initially displayed
                // at its native size then resized to 100% of the button's height. This cfreates an unpleasant
                // flicker. On top of that, Chrome's flex implementation fails to prperly re-layout the button
                // after the image has loaded and been gicven its final size. The below trick also fixes that.
                icon_1.style.display = "none";
                icon_1.onload = function () {
                    icon_1.style.removeProperty("display");
                };
                icon_1.onerror = function () {
                    button_1.removeChild(icon_1);
                    button_1.classList.remove("iconOnly");
                    button_1.classList.add("textOnly");
                    button_1.textContent = !Utils.isNullOrEmpty(_this.inlineAction.title) ? _this.inlineAction.title : "Title";
                };
                icon_1.src = this.inlineAction.iconUrl;
                button_1.appendChild(icon_1);
                if (!Utils.isNullOrEmpty(this.inlineAction.title)) {
                    button_1.title = this.inlineAction.title;
                }
            }
            else {
                button_1.classList.add("textOnly");
                button_1.textContent = !Utils.isNullOrEmpty(this.inlineAction.title) ? this.inlineAction.title : "Title";
            }
            button_1.style.marginLeft = "8px";
            this.inputControlContainerElement.appendChild(button_1);
        }
        return renderedInputControl;
    };
    TextInput.prototype.getJsonTypeName = function () {
        return "Input.Text";
    };
    TextInput.prototype.getActionById = function (id) {
        var result = _super.prototype.getActionById.call(this, id);
        if (!result && this.inlineAction) {
            result = this.inlineAction.getActionById(id);
        }
        return result;
    };
    TextInput.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "placeholder", this.placeholder);
        Utils.setNumberProperty(result, "maxLength", this.maxLength);
        Utils.setProperty(result, "isMultiline", this.isMultiline, false);
        Utils.setEnumProperty(Enums.InputTextStyle, result, "style", this.style, Enums.InputTextStyle.Text);
        if (this._inlineAction) {
            Utils.setProperty(result, "inlineAction", this._inlineAction.toJSON());
        }
        return result;
    };
    TextInput.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.maxLength = Utils.getNumberValue(json["maxLength"]);
        this.isMultiline = Utils.getBoolValue(json["isMultiline"], this.isMultiline);
        this.placeholder = Utils.getStringValue(json["placeholder"]);
        this.style = Utils.getEnumValue(Enums.InputTextStyle, json["style"], this.style);
        this.inlineAction = createActionInstance(this, json["inlineAction"], [ShowCardAction.JsonTypeName], !this.isDesignMode(), errors);
    };
    Object.defineProperty(TextInput.prototype, "inlineAction", {
        get: function () {
            return this._inlineAction;
        },
        set: function (value) {
            this._inlineAction = value;
            if (this._inlineAction) {
                this._inlineAction.setParent(this);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TextInput.prototype, "value", {
        get: function () {
            if (this.renderedInputControlElement) {
                if (this.isMultiline) {
                    return this.renderedInputControlElement.value;
                }
                else {
                    return this.renderedInputControlElement.value;
                }
            }
            else {
                return null;
            }
        },
        enumerable: true,
        configurable: true
    });
    return TextInput;
}(Input));
exports.TextInput = TextInput;
var ToggleInput = /** @class */ (function (_super) {
    __extends(ToggleInput, _super);
    function ToggleInput() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.valueOn = "true";
        _this.valueOff = "false";
        _this.wrap = false;
        return _this;
    }
    ToggleInput.prototype.internalRender = function () {
        var _this = this;
        var element = document.createElement("div");
        element.className = this.hostConfig.makeCssClassName("ac-input", "ac-toggleInput");
        element.style.width = "100%";
        element.style.display = "flex";
        element.style.alignItems = "center";
        this._checkboxInputElement = document.createElement("input");
        this._checkboxInputElement.id = Utils.generateUniqueId();
        this._checkboxInputElement.type = "checkbox";
        this._checkboxInputElement.style.display = "inline-block";
        this._checkboxInputElement.style.verticalAlign = "middle";
        this._checkboxInputElement.style.margin = "0";
        this._checkboxInputElement.style.flex = "0 0 auto";
        this._checkboxInputElement.setAttribute("aria-label", this.title);
        this._checkboxInputElement.tabIndex = 0;
        if (this.defaultValue == this.valueOn) {
            this._checkboxInputElement.checked = true;
        }
        this._checkboxInputElement.onchange = function () { _this.valueChanged(); };
        Utils.appendChild(element, this._checkboxInputElement);
        if (!Utils.isNullOrEmpty(this.title) || this.isDesignMode()) {
            var label = new Label();
            label.setParent(this);
            label.forElementId = this._checkboxInputElement.id;
            label.hostConfig = this.hostConfig;
            label.text = Utils.isNullOrEmpty(this.title) ? this.getJsonTypeName() : this.title;
            label.useMarkdown = AdaptiveCard.useMarkdownInRadioButtonAndCheckbox;
            label.wrap = this.wrap;
            var labelElement = label.render();
            labelElement.style.display = "inline-block";
            labelElement.style.flex = "1 1 auto";
            labelElement.style.marginLeft = "6px";
            labelElement.style.verticalAlign = "middle";
            var spacerElement = document.createElement("div");
            spacerElement.style.width = "6px";
            Utils.appendChild(element, spacerElement);
            Utils.appendChild(element, labelElement);
        }
        return element;
    };
    Object.defineProperty(ToggleInput.prototype, "isNullable", {
        get: function () {
            return false;
        },
        enumerable: true,
        configurable: true
    });
    ToggleInput.prototype.getJsonTypeName = function () {
        return "Input.Toggle";
    };
    ToggleInput.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "valueOn", this.valueOn, "true");
        Utils.setProperty(result, "valueOff", this.valueOff, "false");
        Utils.setProperty(result, "wrap", this.wrap);
        return result;
    };
    ToggleInput.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.title = Utils.getStringValue(json["title"]);
        this.valueOn = Utils.getStringValue(json["valueOn"], this.valueOn);
        this.valueOff = Utils.getStringValue(json["valueOff"], this.valueOff);
        this.wrap = Utils.getBoolValue(json["wrap"], this.wrap);
    };
    Object.defineProperty(ToggleInput.prototype, "value", {
        get: function () {
            if (this._checkboxInputElement) {
                return this._checkboxInputElement.checked ? this.valueOn : this.valueOff;
            }
            else {
                return null;
            }
        },
        enumerable: true,
        configurable: true
    });
    return ToggleInput;
}(Input));
exports.ToggleInput = ToggleInput;
var Choice = /** @class */ (function (_super) {
    __extends(Choice, _super);
    function Choice(title, value) {
        if (title === void 0) { title = undefined; }
        if (value === void 0) { value = undefined; }
        var _this = _super.call(this) || this;
        _this.title = title;
        _this.value = value;
        return _this;
    }
    Choice.prototype.parse = function (json) {
        _super.prototype.parse.call(this, json);
        this.title = Utils.getStringValue(json["title"], "");
        this.value = Utils.getStringValue(json["value"], "");
    };
    Choice.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "title", this.title);
        Utils.setProperty(result, "value", this.value);
        return result;
    };
    return Choice;
}(SerializableObject));
exports.Choice = Choice;
var ChoiceSetInput = /** @class */ (function (_super) {
    __extends(ChoiceSetInput, _super);
    function ChoiceSetInput() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.choices = [];
        _this.isCompact = false;
        _this.isMultiSelect = false;
        _this.wrap = false;
        return _this;
    }
    ChoiceSetInput.getUniqueCategoryName = function () {
        var uniqueCwtegoryName = "__ac-category" + ChoiceSetInput.uniqueCategoryCounter;
        ChoiceSetInput.uniqueCategoryCounter++;
        return uniqueCwtegoryName;
    };
    ChoiceSetInput.prototype.internalRender = function () {
        var _this = this;
        if (!this.isMultiSelect) {
            if (this.isCompact) {
                // Render as a combo box
                this._selectElement = document.createElement("select");
                this._selectElement.className = this.hostConfig.makeCssClassName("ac-input", "ac-multichoiceInput", "ac-choiceSetInput-compact");
                this._selectElement.style.width = "100%";
                var option = document.createElement("option");
                option.selected = true;
                option.disabled = true;
                option.hidden = true;
                option.value = "";
                if (this.placeholder) {
                    option.text = this.placeholder;
                }
                Utils.appendChild(this._selectElement, option);
                for (var i = 0; i < this.choices.length; i++) {
                    var option_1 = document.createElement("option");
                    option_1.value = this.choices[i].value;
                    option_1.text = this.choices[i].title;
                    option_1.setAttribute("aria-label", this.choices[i].title);
                    if (this.choices[i].value == this.defaultValue) {
                        option_1.selected = true;
                    }
                    Utils.appendChild(this._selectElement, option_1);
                }
                this._selectElement.onchange = function () { _this.valueChanged(); };
                return this._selectElement;
            }
            else {
                // Render as a series of radio buttons
                var uniqueCategoryName = ChoiceSetInput.getUniqueCategoryName();
                var element = document.createElement("div");
                element.className = this.hostConfig.makeCssClassName("ac-input", "ac-choiceSetInput-expanded");
                element.style.width = "100%";
                this._toggleInputs = [];
                for (var i_1 = 0; i_1 < this.choices.length; i_1++) {
                    var radioInput = document.createElement("input");
                    radioInput.id = Utils.generateUniqueId();
                    radioInput.type = "radio";
                    radioInput.style.margin = "0";
                    radioInput.style.display = "inline-block";
                    radioInput.style.verticalAlign = "middle";
                    radioInput.name = Utils.isNullOrEmpty(this.id) ? uniqueCategoryName : this.id;
                    radioInput.value = this.choices[i_1].value;
                    radioInput.style.flex = "0 0 auto";
                    radioInput.setAttribute("aria-label", this.choices[i_1].title);
                    if (this.choices[i_1].value == this.defaultValue) {
                        radioInput.checked = true;
                    }
                    radioInput.onchange = function () { _this.valueChanged(); };
                    this._toggleInputs.push(radioInput);
                    var label = new Label();
                    label.setParent(this);
                    label.forElementId = radioInput.id;
                    label.hostConfig = this.hostConfig;
                    label.text = Utils.isNullOrEmpty(this.choices[i_1].title) ? "Choice " + i_1 : this.choices[i_1].title;
                    label.useMarkdown = AdaptiveCard.useMarkdownInRadioButtonAndCheckbox;
                    label.wrap = this.wrap;
                    var labelElement = label.render();
                    labelElement.style.display = "inline-block";
                    labelElement.style.flex = "1 1 auto";
                    labelElement.style.marginLeft = "6px";
                    labelElement.style.verticalAlign = "middle";
                    var spacerElement = document.createElement("div");
                    spacerElement.style.width = "6px";
                    var compoundInput = document.createElement("div");
                    compoundInput.style.display = "flex";
                    compoundInput.style.alignItems = "center";
                    Utils.appendChild(compoundInput, radioInput);
                    Utils.appendChild(compoundInput, spacerElement);
                    Utils.appendChild(compoundInput, labelElement);
                    Utils.appendChild(element, compoundInput);
                }
                return element;
            }
        }
        else {
            // Render as a list of toggle inputs
            var defaultValues = this.defaultValue ? this.defaultValue.split(this.hostConfig.choiceSetInputValueSeparator) : null;
            var element = document.createElement("div");
            element.className = this.hostConfig.makeCssClassName("ac-input", "ac-choiceSetInput-multiSelect");
            element.style.width = "100%";
            this._toggleInputs = [];
            for (var i_2 = 0; i_2 < this.choices.length; i_2++) {
                var checkboxInput = document.createElement("input");
                checkboxInput.id = Utils.generateUniqueId();
                checkboxInput.type = "checkbox";
                checkboxInput.style.margin = "0";
                checkboxInput.style.display = "inline-block";
                checkboxInput.style.verticalAlign = "middle";
                checkboxInput.value = this.choices[i_2].value;
                checkboxInput.style.flex = "0 0 auto";
                checkboxInput.setAttribute("aria-label", this.choices[i_2].title);
                if (defaultValues) {
                    if (defaultValues.indexOf(this.choices[i_2].value) >= 0) {
                        checkboxInput.checked = true;
                    }
                }
                checkboxInput.onchange = function () { _this.valueChanged(); };
                this._toggleInputs.push(checkboxInput);
                var label = new Label();
                label.setParent(this);
                label.forElementId = checkboxInput.id;
                label.hostConfig = this.hostConfig;
                label.text = Utils.isNullOrEmpty(this.choices[i_2].title) ? "Choice " + i_2 : this.choices[i_2].title;
                label.useMarkdown = AdaptiveCard.useMarkdownInRadioButtonAndCheckbox;
                label.wrap = this.wrap;
                var labelElement = label.render();
                labelElement.style.display = "inline-block";
                labelElement.style.flex = "1 1 auto";
                labelElement.style.marginLeft = "6px";
                labelElement.style.verticalAlign = "middle";
                var spacerElement = document.createElement("div");
                spacerElement.style.width = "6px";
                var compoundInput = document.createElement("div");
                compoundInput.style.display = "flex";
                compoundInput.style.alignItems = "center";
                Utils.appendChild(compoundInput, checkboxInput);
                Utils.appendChild(compoundInput, spacerElement);
                Utils.appendChild(compoundInput, labelElement);
                Utils.appendChild(element, compoundInput);
            }
            return element;
        }
    };
    ChoiceSetInput.prototype.getJsonTypeName = function () {
        return "Input.ChoiceSet";
    };
    ChoiceSetInput.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "placeholder", this.placeholder);
        Utils.setArrayProperty(result, "choices", this.choices);
        Utils.setProperty(result, "style", this.isCompact ? null : "expanded");
        Utils.setProperty(result, "isMultiSelect", this.isMultiSelect, false);
        Utils.setProperty(result, "wrap", this.wrap, false);
        return result;
    };
    ChoiceSetInput.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (this.choices.length == 0) {
            context.addFailure(this, {
                error: Enums.ValidationError.CollectionCantBeEmpty,
                message: "An Input.ChoiceSet must have at least one choice defined."
            });
        }
        for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {
            var choice = _a[_i];
            if (!choice.title || !choice.value) {
                context.addFailure(this, {
                    error: Enums.ValidationError.PropertyCantBeNull,
                    message: "All choices in an Input.ChoiceSet must have their title and value properties set."
                });
            }
        }
    };
    ChoiceSetInput.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.isCompact = !(json["style"] === "expanded");
        this.isMultiSelect = Utils.getBoolValue(json["isMultiSelect"], this.isMultiSelect);
        this.placeholder = Utils.getStringValue(json["placeholder"]);
        this.choices = [];
        if (Array.isArray(json["choices"])) {
            for (var _i = 0, _a = json["choices"]; _i < _a.length; _i++) {
                var jsonChoice = _a[_i];
                var choice = new Choice();
                choice.parse(jsonChoice);
                this.choices.push(choice);
            }
        }
        this.wrap = Utils.getBoolValue(json["wrap"], this.wrap);
    };
    Object.defineProperty(ChoiceSetInput.prototype, "value", {
        get: function () {
            if (!this.isMultiSelect) {
                if (this.isCompact) {
                    if (this._selectElement) {
                        return this._selectElement.selectedIndex > 0 ? this._selectElement.value : null;
                    }
                    return null;
                }
                else {
                    if (!this._toggleInputs || this._toggleInputs.length == 0) {
                        return null;
                    }
                    for (var i = 0; i < this._toggleInputs.length; i++) {
                        if (this._toggleInputs[i].checked) {
                            return this._toggleInputs[i].value;
                        }
                    }
                    return null;
                }
            }
            else {
                if (!this._toggleInputs || this._toggleInputs.length == 0) {
                    return null;
                }
                var result = "";
                for (var i = 0; i < this._toggleInputs.length; i++) {
                    if (this._toggleInputs[i].checked) {
                        if (result != "") {
                            result += this.hostConfig.choiceSetInputValueSeparator;
                        }
                        result += this._toggleInputs[i].value;
                    }
                }
                return result == "" ? null : result;
            }
        },
        enumerable: true,
        configurable: true
    });
    ChoiceSetInput.uniqueCategoryCounter = 0;
    return ChoiceSetInput;
}(Input));
exports.ChoiceSetInput = ChoiceSetInput;
var NumberInput = /** @class */ (function (_super) {
    __extends(NumberInput, _super);
    function NumberInput() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NumberInput.prototype.internalRender = function () {
        var _this = this;
        this._numberInputElement = document.createElement("input");
        this._numberInputElement.setAttribute("type", "number");
        if (this.min) {
            this._numberInputElement.setAttribute("min", this.min.toString());
        }
        if (this.max) {
            this._numberInputElement.setAttribute("max", this.max.toString());
        }
        this._numberInputElement.className = this.hostConfig.makeCssClassName("ac-input", "ac-numberInput");
        this._numberInputElement.style.width = "100%";
        this._numberInputElement.tabIndex = 0;
        if (!Utils.isNullOrEmpty(this.defaultValue)) {
            this._numberInputElement.value = this.defaultValue;
        }
        if (!Utils.isNullOrEmpty(this.placeholder)) {
            this._numberInputElement.placeholder = this.placeholder;
            this._numberInputElement.setAttribute("aria-label", this.placeholder);
        }
        this._numberInputElement.oninput = function () { _this.valueChanged(); };
        return this._numberInputElement;
    };
    NumberInput.prototype.getJsonTypeName = function () {
        return "Input.Number";
    };
    NumberInput.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "placeholder", this.placeholder);
        Utils.setNumberProperty(result, "min", this.min);
        Utils.setNumberProperty(result, "max", this.max);
        return result;
    };
    NumberInput.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.placeholder = Utils.getStringValue(json["placeholder"]);
        this.min = Utils.getNumberValue(json["min"]);
        this.max = Utils.getNumberValue(json["max"]);
    };
    Object.defineProperty(NumberInput.prototype, "min", {
        get: function () {
            return this._min;
        },
        set: function (value) {
            this._min = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NumberInput.prototype, "max", {
        get: function () {
            return this._max;
        },
        set: function (value) {
            this._max = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NumberInput.prototype, "value", {
        get: function () {
            return this._numberInputElement ? this._numberInputElement.value : undefined;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NumberInput.prototype, "valueAsNumber", {
        get: function () {
            return this._numberInputElement ? this._numberInputElement.valueAsNumber : undefined;
        },
        enumerable: true,
        configurable: true
    });
    return NumberInput;
}(Input));
exports.NumberInput = NumberInput;
var DateInput = /** @class */ (function (_super) {
    __extends(DateInput, _super);
    function DateInput() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DateInput.prototype.internalRender = function () {
        var _this = this;
        this._dateInputElement = document.createElement("input");
        this._dateInputElement.setAttribute("type", "date");
        this._dateInputElement.setAttribute("min", this.min);
        this._dateInputElement.setAttribute("max", this.max);
        this._dateInputElement.className = this.hostConfig.makeCssClassName("ac-input", "ac-dateInput");
        this._dateInputElement.style.width = "100%";
        this._dateInputElement.oninput = function () { _this.valueChanged(); };
        if (!Utils.isNullOrEmpty(this.defaultValue)) {
            this._dateInputElement.value = this.defaultValue;
        }
        return this._dateInputElement;
    };
    DateInput.prototype.getJsonTypeName = function () {
        return "Input.Date";
    };
    DateInput.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "min", this.min);
        Utils.setProperty(result, "max", this.max);
        return result;
    };
    DateInput.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.min = Utils.getStringValue(json["min"]);
        this.max = Utils.getStringValue(json["max"]);
    };
    Object.defineProperty(DateInput.prototype, "min", {
        get: function () {
            return this._min;
        },
        set: function (value) {
            this._min = this.parseInputValue(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DateInput.prototype, "max", {
        get: function () {
            return this._max;
        },
        set: function (value) {
            this._max = this.parseInputValue(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DateInput.prototype, "value", {
        get: function () {
            return this._dateInputElement ? this._dateInputElement.value : null;
        },
        enumerable: true,
        configurable: true
    });
    return DateInput;
}(Input));
exports.DateInput = DateInput;
var TimeInput = /** @class */ (function (_super) {
    __extends(TimeInput, _super);
    function TimeInput() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TimeInput.prototype.internalRender = function () {
        var _this = this;
        this._timeInputElement = document.createElement("input");
        this._timeInputElement.setAttribute("type", "time");
        this._timeInputElement.setAttribute("min", this.min);
        this._timeInputElement.setAttribute("max", this.max);
        this._timeInputElement.className = this.hostConfig.makeCssClassName("ac-input", "ac-timeInput");
        this._timeInputElement.style.width = "100%";
        this._timeInputElement.oninput = function () { _this.valueChanged(); };
        if (!Utils.isNullOrEmpty(this.defaultValue)) {
            this._timeInputElement.value = this.defaultValue;
        }
        return this._timeInputElement;
    };
    TimeInput.prototype.parseInputValue = function (value) {
        if (/^[0-9]{2}:[0-9]{2}$/.test(value)) {
            return value;
        }
        else {
            return null;
        }
    };
    TimeInput.prototype.getJsonTypeName = function () {
        return "Input.Time";
    };
    TimeInput.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "min", this.min);
        Utils.setProperty(result, "max", this.max);
        return result;
    };
    TimeInput.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.min = Utils.getStringValue(json["min"]);
        this.max = Utils.getStringValue(json["max"]);
    };
    Object.defineProperty(TimeInput.prototype, "min", {
        get: function () {
            return this._min;
        },
        set: function (value) {
            this._min = this.parseInputValue(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimeInput.prototype, "max", {
        get: function () {
            return this._max;
        },
        set: function (value) {
            this._max = this.parseInputValue(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimeInput.prototype, "value", {
        get: function () {
            return this._timeInputElement ? this._timeInputElement.value : null;
        },
        enumerable: true,
        configurable: true
    });
    return TimeInput;
}(Input));
exports.TimeInput = TimeInput;
var ActionButtonState;
(function (ActionButtonState) {
    ActionButtonState[ActionButtonState["Normal"] = 0] = "Normal";
    ActionButtonState[ActionButtonState["Expanded"] = 1] = "Expanded";
    ActionButtonState[ActionButtonState["Subdued"] = 2] = "Subdued";
})(ActionButtonState || (ActionButtonState = {}));
var ActionButton = /** @class */ (function () {
    function ActionButton(action, parentContainerStyle) {
        this._state = ActionButtonState.Normal;
        this.onClick = null;
        this.action = action;
        this._parentContainerStyle = parentContainerStyle;
    }
    ActionButton.prototype.updateCssStyle = function () {
        var _a, _b;
        var hostConfig = this.action.parent.hostConfig;
        this.action.renderedElement.className = hostConfig.makeCssClassName("ac-pushButton");
        if (!Utils.isNullOrEmpty(this._parentContainerStyle)) {
            this.action.renderedElement.classList.add("style-" + this._parentContainerStyle);
        }
        if (this.action instanceof ShowCardAction) {
            this.action.renderedElement.classList.add(hostConfig.makeCssClassName("expandable"));
        }
        this.action.renderedElement.classList.remove(hostConfig.makeCssClassName("expanded"));
        this.action.renderedElement.classList.remove(hostConfig.makeCssClassName("subdued"));
        switch (this._state) {
            case ActionButtonState.Expanded:
                this.action.renderedElement.classList.add(hostConfig.makeCssClassName("expanded"));
                break;
            case ActionButtonState.Subdued:
                this.action.renderedElement.classList.add(hostConfig.makeCssClassName("subdued"));
                break;
        }
        if (!Utils.isNullOrEmpty(this.action.style)) {
            if (this.action.style === Enums.ActionStyle.Positive) {
                (_a = this.action.renderedElement.classList).add.apply(_a, hostConfig.makeCssClassNames("primary", "style-positive"));
            }
            else {
                (_b = this.action.renderedElement.classList).add.apply(_b, hostConfig.makeCssClassNames("style-" + this.action.style.toLowerCase()));
            }
        }
    };
    ActionButton.prototype.render = function () {
        var _this = this;
        this.action.render();
        this.action.renderedElement.onclick = function (e) {
            e.preventDefault();
            e.cancelBubble = true;
            _this.click();
        };
        this.updateCssStyle();
    };
    ActionButton.prototype.click = function () {
        if (this.onClick != null) {
            this.onClick(this);
        }
    };
    Object.defineProperty(ActionButton.prototype, "state", {
        get: function () {
            return this._state;
        },
        set: function (value) {
            this._state = value;
            this.updateCssStyle();
        },
        enumerable: true,
        configurable: true
    });
    return ActionButton;
}());
var Action = /** @class */ (function (_super) {
    __extends(Action, _super);
    function Action() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._shouldFallback = false;
        _this._parent = null;
        _this._actionCollection = null; // hold the reference to its action collection
        _this._renderedElement = null;
        _this.requires = new HostConfig.HostCapabilities();
        _this.style = Enums.ActionStyle.Default;
        return _this;
    }
    Action.prototype.setCollection = function (actionCollection) {
        this._actionCollection = actionCollection;
    };
    Action.prototype.addCssClasses = function (element) {
        // Do nothing in base implementation
    };
    Action.prototype.internalGetReferencedInputs = function (allInputs) {
        return {};
    };
    Action.prototype.internalPrepareForExecution = function (inputs) {
        // Do nothing in base implementation
    };
    Action.prototype.internalValidateInputs = function (referencedInputs) {
        var result = [];
        if (AdaptiveCard.useBuiltInInputValidation && !this.ignoreInputValidation) {
            for (var _i = 0, _a = Object.keys(referencedInputs); _i < _a.length; _i++) {
                var key = _a[_i];
                var input = referencedInputs[key];
                if (!input.validateValue()) {
                    result.push(input);
                }
            }
        }
        return result;
    };
    Action.prototype.getHref = function () {
        return "";
    };
    Action.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "type", this.getJsonTypeName());
        Utils.setProperty(result, "title", this.title);
        Utils.setProperty(result, "iconUrl", this.iconUrl);
        Utils.setProperty(result, "style", this.style, Enums.ActionStyle.Default);
        return result;
    };
    Action.prototype.render = function (baseCssClass) {
        if (baseCssClass === void 0) { baseCssClass = "ac-pushButton"; }
        // Cache hostConfig for perf
        var hostConfig = this.parent.hostConfig;
        var buttonElement = document.createElement("button");
        this.addCssClasses(buttonElement);
        buttonElement.setAttribute("aria-label", this.title);
        buttonElement.type = "button";
        buttonElement.style.display = "flex";
        buttonElement.style.alignItems = "center";
        buttonElement.style.justifyContent = "center";
        var hasTitle = !Utils.isNullOrEmpty(this.title);
        var titleElement = document.createElement("div");
        titleElement.style.overflow = "hidden";
        titleElement.style.textOverflow = "ellipsis";
        if (!(hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle || hostConfig.actions.allowTitleToWrap)) {
            titleElement.style.whiteSpace = "nowrap";
        }
        if (hasTitle) {
            titleElement.innerText = this.title;
        }
        if (Utils.isNullOrEmpty(this.iconUrl)) {
            buttonElement.classList.add("noIcon");
            buttonElement.appendChild(titleElement);
        }
        else {
            var iconElement = document.createElement("img");
            iconElement.src = this.iconUrl;
            iconElement.style.width = hostConfig.actions.iconSize + "px";
            iconElement.style.height = hostConfig.actions.iconSize + "px";
            iconElement.style.flex = "0 0 auto";
            if (hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle) {
                buttonElement.classList.add("iconAbove");
                buttonElement.style.flexDirection = "column";
                if (hasTitle) {
                    iconElement.style.marginBottom = "4px";
                }
            }
            else {
                buttonElement.classList.add("iconLeft");
                if (hasTitle) {
                    iconElement.style.marginRight = "4px";
                }
            }
            buttonElement.appendChild(iconElement);
            buttonElement.appendChild(titleElement);
        }
        this._renderedElement = buttonElement;
    };
    Action.prototype.setParent = function (value) {
        this._parent = value;
    };
    Action.prototype.execute = function () {
        if (this.onExecute) {
            this.onExecute(this);
        }
        raiseExecuteActionEvent(this);
    };
    Action.prototype.prepareForExecution = function () {
        var referencedInputs = this.getReferencedInputs();
        if (this.internalValidateInputs(referencedInputs).length > 0) {
            return false;
        }
        this.internalPrepareForExecution(referencedInputs);
        return true;
    };
    ;
    Action.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        raiseParseActionEvent(this, json, errors);
        this.requires.parse(json["requires"], errors);
        if (!json["title"] && json["title"] !== "") {
            raiseParseError({
                error: Enums.ValidationError.PropertyCantBeNull,
                message: "Actions should always have a title."
            }, errors);
        }
        this.title = Utils.getStringValue(json["title"]);
        this.iconUrl = Utils.getStringValue(json["iconUrl"]);
        this.style = Utils.getStringValue(json["style"], this.style);
    };
    Action.prototype.remove = function () {
        if (this._actionCollection) {
            return this._actionCollection.removeAction(this);
        }
        return false;
    };
    Action.prototype.getAllInputs = function () {
        return [];
    };
    Action.prototype.getResourceInformation = function () {
        if (!Utils.isNullOrEmpty(this.iconUrl)) {
            return [{ url: this.iconUrl, mimeType: "image" }];
        }
        else {
            return [];
        }
    };
    Action.prototype.getActionById = function (id) {
        if (this.id == id) {
            return this;
        }
    };
    Action.prototype.getReferencedInputs = function () {
        return this.internalGetReferencedInputs(this.parent.getRootElement().getAllInputs());
    };
    Action.prototype.validateInputs = function () {
        return this.internalValidateInputs(this.getReferencedInputs());
    };
    Action.prototype.shouldFallback = function () {
        return this._shouldFallback || !this.requires.areAllMet(this.parent.hostConfig.hostCapabilities);
    };
    Object.defineProperty(Action.prototype, "isPrimary", {
        get: function () {
            return this.style == Enums.ActionStyle.Positive;
        },
        set: function (value) {
            if (value) {
                this.style = Enums.ActionStyle.Positive;
            }
            else {
                if (this.style == Enums.ActionStyle.Positive) {
                    this.style = Enums.ActionStyle.Default;
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Action.prototype, "ignoreInputValidation", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Action.prototype, "parent", {
        get: function () {
            return this._parent;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Action.prototype, "renderedElement", {
        get: function () {
            return this._renderedElement;
        },
        enumerable: true,
        configurable: true
    });
    return Action;
}(CardObject));
exports.Action = Action;
var SubmitAction = /** @class */ (function (_super) {
    __extends(SubmitAction, _super);
    function SubmitAction() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._isPrepared = false;
        _this._ignoreInputValidation = false;
        return _this;
    }
    SubmitAction.prototype.internalGetReferencedInputs = function (allInputs) {
        var result = {};
        for (var _i = 0, allInputs_1 = allInputs; _i < allInputs_1.length; _i++) {
            var input = allInputs_1[_i];
            result[input.id] = input;
        }
        return result;
    };
    SubmitAction.prototype.internalPrepareForExecution = function (inputs) {
        if (this._originalData) {
            this._processedData = JSON.parse(JSON.stringify(this._originalData));
        }
        else {
            this._processedData = {};
        }
        for (var _i = 0, _a = Object.keys(inputs); _i < _a.length; _i++) {
            var key = _a[_i];
            var input = inputs[key];
            if (input.value != null) {
                this._processedData[input.id] = input.value;
            }
        }
        this._isPrepared = true;
    };
    SubmitAction.prototype.getJsonTypeName = function () {
        return SubmitAction.JsonTypeName;
    };
    SubmitAction.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "ignoreInputValidation", this.ignoreInputValidation, false);
        Utils.setProperty(result, "data", this._originalData);
        return result;
    };
    SubmitAction.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this._ignoreInputValidation = Utils.getBoolValue(json["ignoreInputValidation"], this._ignoreInputValidation);
        this.data = json["data"];
    };
    Object.defineProperty(SubmitAction.prototype, "ignoreInputValidation", {
        get: function () {
            return this._ignoreInputValidation;
        },
        set: function (value) {
            this._ignoreInputValidation = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SubmitAction.prototype, "data", {
        get: function () {
            return this._isPrepared ? this._processedData : this._originalData;
        },
        set: function (value) {
            this._originalData = value;
            this._isPrepared = false;
        },
        enumerable: true,
        configurable: true
    });
    // Note the "weird" way this field is declared is to work around a breaking
    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    SubmitAction.JsonTypeName = "Action.Submit";
    return SubmitAction;
}(Action));
exports.SubmitAction = SubmitAction;
var OpenUrlAction = /** @class */ (function (_super) {
    __extends(OpenUrlAction, _super);
    function OpenUrlAction() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    OpenUrlAction.prototype.getJsonTypeName = function () {
        return OpenUrlAction.JsonTypeName;
    };
    OpenUrlAction.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "url", this.url);
        return result;
    };
    OpenUrlAction.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (Utils.isNullOrEmpty(this.url)) {
            context.addFailure(this, {
                error: Enums.ValidationError.PropertyCantBeNull,
                message: "An Action.OpenUrl must have its url property set."
            });
        }
    };
    OpenUrlAction.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.url = Utils.getStringValue(json["url"]);
    };
    OpenUrlAction.prototype.getHref = function () {
        return this.url;
    };
    // Note the "weird" way this field is declared is to work around a breaking
    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    OpenUrlAction.JsonTypeName = "Action.OpenUrl";
    return OpenUrlAction;
}(Action));
exports.OpenUrlAction = OpenUrlAction;
var ToggleVisibilityAction = /** @class */ (function (_super) {
    __extends(ToggleVisibilityAction, _super);
    function ToggleVisibilityAction() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.targetElements = {};
        return _this;
    }
    ToggleVisibilityAction.prototype.getJsonTypeName = function () {
        return ToggleVisibilityAction.JsonTypeName;
    };
    ToggleVisibilityAction.prototype.execute = function () {
        for (var _i = 0, _a = Object.keys(this.targetElements); _i < _a.length; _i++) {
            var elementId = _a[_i];
            var targetElement = this.parent.getRootElement().getElementById(elementId);
            if (targetElement) {
                if (typeof this.targetElements[elementId] === "boolean") {
                    targetElement.isVisible = this.targetElements[elementId];
                }
                else {
                    targetElement.isVisible = !targetElement.isVisible;
                }
            }
        }
    };
    ToggleVisibilityAction.prototype.parse = function (json) {
        _super.prototype.parse.call(this, json);
        this.targetElements = {};
        var jsonTargetElements = json["targetElements"];
        if (jsonTargetElements && Array.isArray(jsonTargetElements)) {
            for (var _i = 0, jsonTargetElements_1 = jsonTargetElements; _i < jsonTargetElements_1.length; _i++) {
                var item = jsonTargetElements_1[_i];
                if (typeof item === "string") {
                    this.targetElements[item] = undefined;
                }
                else if (typeof item === "object") {
                    var jsonElementId = item["elementId"];
                    if (jsonElementId && typeof jsonElementId === "string") {
                        this.targetElements[jsonElementId] = Utils.getBoolValue(item["isVisible"], undefined);
                    }
                }
            }
        }
    };
    ToggleVisibilityAction.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        var targetElements = [];
        for (var _i = 0, _a = Object.keys(this.targetElements); _i < _a.length; _i++) {
            var id = _a[_i];
            if (typeof this.targetElements[id] === "boolean") {
                targetElements.push({
                    elementId: id,
                    isVisible: this.targetElements[id]
                });
            }
            else {
                targetElements.push(id);
            }
        }
        result["targetElements"] = targetElements;
        return result;
    };
    ToggleVisibilityAction.prototype.addTargetElement = function (elementId, isVisible) {
        if (isVisible === void 0) { isVisible = undefined; }
        this.targetElements[elementId] = isVisible;
    };
    ToggleVisibilityAction.prototype.removeTargetElement = function (elementId) {
        delete this.targetElements[elementId];
    };
    // Note the "weird" way this field is declared is to work around a breaking
    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    ToggleVisibilityAction.JsonTypeName = "Action.ToggleVisibility";
    return ToggleVisibilityAction;
}(Action));
exports.ToggleVisibilityAction = ToggleVisibilityAction;
var HttpHeader = /** @class */ (function (_super) {
    __extends(HttpHeader, _super);
    function HttpHeader(name, value) {
        if (name === void 0) { name = ""; }
        if (value === void 0) { value = ""; }
        var _this = _super.call(this) || this;
        _this._value = new Shared.StringWithSubstitutions();
        _this.name = name;
        _this.value = value;
        return _this;
    }
    HttpHeader.prototype.parse = function (json) {
        _super.prototype.parse.call(this, json);
        this.name = Utils.getStringValue(json["name"]);
        this.value = Utils.getStringValue(json["value"]);
    };
    HttpHeader.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "name", this.name);
        Utils.setProperty(result, "value", this._value.getOriginal());
        return result;
    };
    HttpHeader.prototype.getReferencedInputs = function (inputs, referencedInputs) {
        this._value.getReferencedInputs(inputs, referencedInputs);
    };
    HttpHeader.prototype.prepareForExecution = function (inputs) {
        this._value.substituteInputValues(inputs, Shared.ContentTypes.applicationXWwwFormUrlencoded);
    };
    Object.defineProperty(HttpHeader.prototype, "value", {
        get: function () {
            return this._value.get();
        },
        set: function (newValue) {
            this._value.set(newValue);
        },
        enumerable: true,
        configurable: true
    });
    return HttpHeader;
}(SerializableObject));
exports.HttpHeader = HttpHeader;
var HttpAction = /** @class */ (function (_super) {
    __extends(HttpAction, _super);
    function HttpAction() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._url = new Shared.StringWithSubstitutions();
        _this._body = new Shared.StringWithSubstitutions();
        _this._headers = [];
        _this._ignoreInputValidation = false;
        return _this;
    }
    HttpAction.prototype.internalGetReferencedInputs = function (allInputs) {
        var result = {};
        this._url.getReferencedInputs(allInputs, result);
        for (var _i = 0, _a = this._headers; _i < _a.length; _i++) {
            var header = _a[_i];
            header.getReferencedInputs(allInputs, result);
        }
        this._body.getReferencedInputs(allInputs, result);
        return result;
    };
    HttpAction.prototype.internalPrepareForExecution = function (inputs) {
        this._url.substituteInputValues(inputs, Shared.ContentTypes.applicationXWwwFormUrlencoded);
        var contentType = Shared.ContentTypes.applicationJson;
        for (var _i = 0, _a = this._headers; _i < _a.length; _i++) {
            var header = _a[_i];
            header.prepareForExecution(inputs);
            if (header.name && header.name.toLowerCase() == "content-type") {
                contentType = header.value;
            }
        }
        this._body.substituteInputValues(inputs, contentType);
    };
    ;
    HttpAction.prototype.getJsonTypeName = function () {
        return HttpAction.JsonTypeName;
    };
    HttpAction.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "method", this.method);
        Utils.setProperty(result, "url", this._url.getOriginal());
        Utils.setProperty(result, "body", this._body.getOriginal());
        Utils.setProperty(result, "ignoreInputValidation", this.ignoreInputValidation, false);
        Utils.setArrayProperty(result, "headers", this.headers);
        return result;
    };
    HttpAction.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (Utils.isNullOrEmpty(this.url)) {
            context.addFailure(this, {
                error: Enums.ValidationError.PropertyCantBeNull,
                message: "An Action.Http must have its url property set."
            });
        }
        if (this.headers.length > 0) {
            for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {
                var header = _a[_i];
                if (!header.name) {
                    context.addFailure(this, {
                        error: Enums.ValidationError.PropertyCantBeNull,
                        message: "All headers of an Action.Http must have their name and value properties set."
                    });
                }
            }
        }
    };
    HttpAction.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.url = Utils.getStringValue(json["url"]);
        this.method = Utils.getStringValue(json["method"]);
        this.body = Utils.getStringValue(json["body"]);
        this._ignoreInputValidation = Utils.getBoolValue(json["ignoreInputValidation"], this._ignoreInputValidation);
        this._headers = [];
        if (Array.isArray(json["headers"])) {
            for (var _i = 0, _a = json["headers"]; _i < _a.length; _i++) {
                var jsonHeader = _a[_i];
                var httpHeader = new HttpHeader();
                httpHeader.parse(jsonHeader);
                this.headers.push(httpHeader);
            }
        }
    };
    Object.defineProperty(HttpAction.prototype, "ignoreInputValidation", {
        get: function () {
            return this._ignoreInputValidation;
        },
        set: function (value) {
            this._ignoreInputValidation = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HttpAction.prototype, "url", {
        get: function () {
            return this._url.get();
        },
        set: function (value) {
            this._url.set(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HttpAction.prototype, "body", {
        get: function () {
            return this._body.get();
        },
        set: function (value) {
            this._body.set(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HttpAction.prototype, "headers", {
        get: function () {
            return this._headers ? this._headers : [];
        },
        set: function (value) {
            this._headers = value;
        },
        enumerable: true,
        configurable: true
    });
    // Note the "weird" way this field is declared is to work around a breaking
    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    HttpAction.JsonTypeName = "Action.Http";
    return HttpAction;
}(Action));
exports.HttpAction = HttpAction;
var ShowCardAction = /** @class */ (function (_super) {
    __extends(ShowCardAction, _super);
    function ShowCardAction() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.card = new InlineAdaptiveCard();
        return _this;
    }
    ShowCardAction.prototype.addCssClasses = function (element) {
        _super.prototype.addCssClasses.call(this, element);
        element.classList.add(this.parent.hostConfig.makeCssClassName("expandable"));
    };
    ShowCardAction.prototype.getJsonTypeName = function () {
        return ShowCardAction.JsonTypeName;
    };
    ShowCardAction.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        if (this.card) {
            Utils.setProperty(result, "card", this.card.toJSON());
        }
        return result;
    };
    ShowCardAction.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        this.card.internalValidateProperties(context);
    };
    ShowCardAction.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        var jsonCard = json["card"];
        if (jsonCard) {
            this.card.parse(jsonCard, errors);
        }
        else {
            raiseParseError({
                error: Enums.ValidationError.PropertyCantBeNull,
                message: "An Action.ShowCard must have its \"card\" property set to a valid AdaptiveCard object."
            }, errors);
        }
    };
    ShowCardAction.prototype.setParent = function (value) {
        _super.prototype.setParent.call(this, value);
        this.card.setParent(value);
    };
    ShowCardAction.prototype.getAllInputs = function () {
        return this.card.getAllInputs();
    };
    ShowCardAction.prototype.getResourceInformation = function () {
        return _super.prototype.getResourceInformation.call(this).concat(this.card.getResourceInformation());
    };
    ShowCardAction.prototype.getActionById = function (id) {
        var result = _super.prototype.getActionById.call(this, id);
        if (!result) {
            result = this.card.getActionById(id);
        }
        return result;
    };
    // Note the "weird" way this field is declared is to work around a breaking
    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    ShowCardAction.JsonTypeName = "Action.ShowCard";
    return ShowCardAction;
}(Action));
exports.ShowCardAction = ShowCardAction;
var ActionCollection = /** @class */ (function () {
    function ActionCollection(owner) {
        this._expandedAction = null;
        this._renderedActionCount = 0;
        this._actionCard = null;
        this.items = [];
        this.buttons = [];
        this._owner = owner;
    }
    ActionCollection.prototype.refreshContainer = function () {
        this._actionCardContainer.innerHTML = "";
        if (this._actionCard === null) {
            this._actionCardContainer.style.marginTop = "0px";
            return;
        }
        this._actionCardContainer.style.marginTop = this._renderedActionCount > 0 ? this._owner.hostConfig.actions.showCard.inlineTopMargin + "px" : "0px";
        var padding = this._owner.getEffectivePadding();
        this._owner.getImmediateSurroundingPadding(padding);
        var physicalPadding = this._owner.hostConfig.paddingDefinitionToSpacingDefinition(padding);
        if (this._actionCard !== null) {
            this._actionCard.style.paddingLeft = physicalPadding.left + "px";
            this._actionCard.style.paddingRight = physicalPadding.right + "px";
            this._actionCard.style.marginLeft = "-" + physicalPadding.left + "px";
            this._actionCard.style.marginRight = "-" + physicalPadding.right + "px";
            if (physicalPadding.bottom != 0 && !this._owner.isDesignMode()) {
                this._actionCard.style.paddingBottom = physicalPadding.bottom + "px";
                this._actionCard.style.marginBottom = "-" + physicalPadding.bottom + "px";
            }
            Utils.appendChild(this._actionCardContainer, this._actionCard);
        }
    };
    ActionCollection.prototype.layoutChanged = function () {
        this._owner.getRootElement().updateLayout();
    };
    ActionCollection.prototype.hideActionCard = function () {
        var previouslyExpandedAction = this._expandedAction;
        this._expandedAction = null;
        this._actionCard = null;
        this.refreshContainer();
        if (previouslyExpandedAction) {
            this.layoutChanged();
            raiseInlineCardExpandedEvent(previouslyExpandedAction, false);
        }
    };
    ActionCollection.prototype.showActionCard = function (action, suppressStyle, raiseEvent) {
        if (suppressStyle === void 0) { suppressStyle = false; }
        if (raiseEvent === void 0) { raiseEvent = true; }
        if (action.card == null) {
            return;
        }
        action.card.suppressStyle = suppressStyle;
        var renderedCard = action.card.renderedElement ? action.card.renderedElement : action.card.render();
        this._actionCard = renderedCard;
        this._expandedAction = action;
        this.refreshContainer();
        if (raiseEvent) {
            this.layoutChanged();
            raiseInlineCardExpandedEvent(action, true);
        }
    };
    ActionCollection.prototype.collapseExpandedAction = function () {
        for (var i = 0; i < this.buttons.length; i++) {
            this.buttons[i].state = ActionButtonState.Normal;
        }
        this.hideActionCard();
    };
    ActionCollection.prototype.expandShowCardAction = function (action, raiseEvent) {
        for (var i = 0; i < this.buttons.length; i++) {
            if (this.buttons[i].action !== action) {
                this.buttons[i].state = ActionButtonState.Subdued;
            }
            else {
                this.buttons[i].state = ActionButtonState.Expanded;
            }
        }
        this.showActionCard(action, !(this._owner.isAtTheVeryLeft() && this._owner.isAtTheVeryRight()), raiseEvent);
    };
    ActionCollection.prototype.actionClicked = function (actionButton) {
        if (!(actionButton.action instanceof ShowCardAction)) {
            for (var i = 0; i < this.buttons.length; i++) {
                this.buttons[i].state = ActionButtonState.Normal;
            }
            this.hideActionCard();
            actionButton.action.execute();
        }
        else {
            if (this._owner.hostConfig.actions.showCard.actionMode === Enums.ShowCardActionMode.Popup) {
                actionButton.action.execute();
            }
            else if (actionButton.action === this._expandedAction) {
                this.collapseExpandedAction();
            }
            else {
                this.expandShowCardAction(actionButton.action, true);
            }
        }
    };
    ActionCollection.prototype.getParentContainer = function () {
        if (this._owner instanceof Container) {
            return this._owner;
        }
        else {
            return this._owner.getParentContainer();
        }
    };
    ActionCollection.prototype.findActionButton = function (action) {
        for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {
            var actionButton = _a[_i];
            if (actionButton.action == action) {
                return actionButton;
            }
        }
        return null;
    };
    ActionCollection.prototype.parse = function (json, errors) {
        this.clear();
        if (json && json instanceof Array) {
            for (var _i = 0, json_1 = json; _i < json_1.length; _i++) {
                var jsonAction = json_1[_i];
                var action = createActionInstance(this._owner, jsonAction, [], !this._owner.isDesignMode(), errors);
                if (action) {
                    this.addAction(action);
                }
            }
        }
    };
    ActionCollection.prototype.toJSON = function () {
        if (this.items.length > 0) {
            var result = [];
            for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
                var action = _a[_i];
                result.push(action.toJSON());
            }
            return result;
        }
        else {
            return null;
        }
    };
    ActionCollection.prototype.getActionById = function (id) {
        var result = null;
        for (var i = 0; i < this.items.length; i++) {
            result = this.items[i].getActionById(id);
            if (result) {
                break;
            }
        }
        return result;
    };
    ActionCollection.prototype.validateProperties = function (context) {
        if (this._owner.hostConfig.actions.maxActions && this.items.length > this._owner.hostConfig.actions.maxActions) {
            context.addFailure(this._owner, {
                error: Enums.ValidationError.TooManyActions,
                message: "A maximum of " + this._owner.hostConfig.actions.maxActions + " actions are allowed."
            });
        }
        if (this.items.length > 0 && !this._owner.hostConfig.supportsInteractivity) {
            context.addFailure(this._owner, {
                error: Enums.ValidationError.InteractivityNotAllowed,
                message: "Interactivity is not allowed."
            });
        }
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var item = _a[_i];
            if (!isActionAllowed(item, this._owner.getForbiddenActionTypes())) {
                context.addFailure(this._owner, {
                    error: Enums.ValidationError.ActionTypeNotAllowed,
                    message: "Actions of type " + item.getJsonTypeName() + " are not allowe."
                });
            }
            item.internalValidateProperties(context);
        }
    };
    ActionCollection.prototype.render = function (orientation, isDesignMode) {
        var _this = this;
        // Cache hostConfig for better perf
        var hostConfig = this._owner.hostConfig;
        if (!hostConfig.supportsInteractivity) {
            return null;
        }
        var element = document.createElement("div");
        var maxActions = hostConfig.actions.maxActions ? Math.min(hostConfig.actions.maxActions, this.items.length) : this.items.length;
        var forbiddenActionTypes = this._owner.getForbiddenActionTypes();
        this._actionCardContainer = document.createElement("div");
        this._renderedActionCount = 0;
        if (hostConfig.actions.preExpandSingleShowCardAction && maxActions == 1 && this.items[0] instanceof ShowCardAction && isActionAllowed(this.items[0], forbiddenActionTypes)) {
            this.showActionCard(this.items[0], true);
            this._renderedActionCount = 1;
        }
        else {
            var buttonStrip = document.createElement("div");
            buttonStrip.className = hostConfig.makeCssClassName("ac-actionSet");
            buttonStrip.style.display = "flex";
            if (orientation == Enums.Orientation.Horizontal) {
                buttonStrip.style.flexDirection = "row";
                if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {
                    switch (this._owner.horizontalAlignment) {
                        case Enums.HorizontalAlignment.Center:
                            buttonStrip.style.justifyContent = "center";
                            break;
                        case Enums.HorizontalAlignment.Right:
                            buttonStrip.style.justifyContent = "flex-end";
                            break;
                        default:
                            buttonStrip.style.justifyContent = "flex-start";
                            break;
                    }
                }
                else {
                    switch (hostConfig.actions.actionAlignment) {
                        case Enums.ActionAlignment.Center:
                            buttonStrip.style.justifyContent = "center";
                            break;
                        case Enums.ActionAlignment.Right:
                            buttonStrip.style.justifyContent = "flex-end";
                            break;
                        default:
                            buttonStrip.style.justifyContent = "flex-start";
                            break;
                    }
                }
            }
            else {
                buttonStrip.style.flexDirection = "column";
                if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {
                    switch (this._owner.horizontalAlignment) {
                        case Enums.HorizontalAlignment.Center:
                            buttonStrip.style.alignItems = "center";
                            break;
                        case Enums.HorizontalAlignment.Right:
                            buttonStrip.style.alignItems = "flex-end";
                            break;
                        default:
                            buttonStrip.style.alignItems = "flex-start";
                            break;
                    }
                }
                else {
                    switch (hostConfig.actions.actionAlignment) {
                        case Enums.ActionAlignment.Center:
                            buttonStrip.style.alignItems = "center";
                            break;
                        case Enums.ActionAlignment.Right:
                            buttonStrip.style.alignItems = "flex-end";
                            break;
                        case Enums.ActionAlignment.Stretch:
                            buttonStrip.style.alignItems = "stretch";
                            break;
                        default:
                            buttonStrip.style.alignItems = "flex-start";
                            break;
                    }
                }
            }
            var parentContainerStyle = this.getParentContainer().getEffectiveStyle();
            for (var i = 0; i < this.items.length; i++) {
                if (isActionAllowed(this.items[i], forbiddenActionTypes)) {
                    var actionButton = this.findActionButton(this.items[i]);
                    if (!actionButton) {
                        actionButton = new ActionButton(this.items[i], parentContainerStyle);
                        actionButton.onClick = function (ab) { _this.actionClicked(ab); };
                        this.buttons.push(actionButton);
                    }
                    actionButton.render();
                    if (hostConfig.actions.actionsOrientation == Enums.Orientation.Horizontal && hostConfig.actions.actionAlignment == Enums.ActionAlignment.Stretch) {
                        actionButton.action.renderedElement.style.flex = "0 1 100%";
                    }
                    else {
                        actionButton.action.renderedElement.style.flex = "0 1 auto";
                    }
                    buttonStrip.appendChild(actionButton.action.renderedElement);
                    this._renderedActionCount++;
                    if (this._renderedActionCount >= hostConfig.actions.maxActions || i == this.items.length - 1) {
                        break;
                    }
                    else if (hostConfig.actions.buttonSpacing > 0) {
                        var spacer = document.createElement("div");
                        if (orientation === Enums.Orientation.Horizontal) {
                            spacer.style.flex = "0 0 auto";
                            spacer.style.width = hostConfig.actions.buttonSpacing + "px";
                        }
                        else {
                            spacer.style.height = hostConfig.actions.buttonSpacing + "px";
                        }
                        Utils.appendChild(buttonStrip, spacer);
                    }
                }
            }
            var buttonStripContainer = document.createElement("div");
            buttonStripContainer.style.overflow = "hidden";
            buttonStripContainer.appendChild(buttonStrip);
            Utils.appendChild(element, buttonStripContainer);
        }
        Utils.appendChild(element, this._actionCardContainer);
        for (var i = 0; i < this.buttons.length; i++) {
            if (this.buttons[i].state == ActionButtonState.Expanded) {
                this.expandShowCardAction(this.buttons[i].action, false);
                break;
            }
        }
        return this._renderedActionCount > 0 ? element : null;
    };
    ActionCollection.prototype.addAction = function (action) {
        if (!action) {
            throw new Error("The action parameter cannot be null.");
        }
        if ((!action.parent || action.parent === this._owner) && this.items.indexOf(action) < 0) {
            this.items.push(action);
            if (!action.parent) {
                action.setParent(this._owner);
            }
            invokeSetCollection(action, this);
        }
        else {
            throw new Error("The action already belongs to another element.");
        }
    };
    ActionCollection.prototype.removeAction = function (action) {
        if (this.expandedAction && this._expandedAction == action) {
            this.collapseExpandedAction();
        }
        var actionIndex = this.items.indexOf(action);
        if (actionIndex >= 0) {
            this.items.splice(actionIndex, 1);
            action.setParent(null);
            invokeSetCollection(action, null);
            for (var i = 0; i < this.buttons.length; i++) {
                if (this.buttons[i].action == action) {
                    this.buttons.splice(i, 1);
                    break;
                }
            }
            return true;
        }
        return false;
    };
    ActionCollection.prototype.clear = function () {
        this.items = [];
        this.buttons = [];
        this._expandedAction = null;
        this._renderedActionCount = 0;
    };
    ActionCollection.prototype.getAllInputs = function () {
        var result = [];
        for (var i = 0; i < this.items.length; i++) {
            var action = this.items[i];
            result = result.concat(action.getAllInputs());
        }
        return result;
    };
    ActionCollection.prototype.getResourceInformation = function () {
        var result = [];
        for (var i = 0; i < this.items.length; i++) {
            result = result.concat(this.items[i].getResourceInformation());
        }
        return result;
    };
    Object.defineProperty(ActionCollection.prototype, "renderedActionCount", {
        get: function () {
            return this._renderedActionCount;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ActionCollection.prototype, "expandedAction", {
        get: function () {
            return this._expandedAction;
        },
        enumerable: true,
        configurable: true
    });
    return ActionCollection;
}());
var ActionSet = /** @class */ (function (_super) {
    __extends(ActionSet, _super);
    function ActionSet() {
        var _this = _super.call(this) || this;
        _this.orientation = null;
        _this._actionCollection = new ActionCollection(_this);
        return _this;
    }
    ActionSet.prototype.internalRender = function () {
        return this._actionCollection.render(this.orientation ? this.orientation : this.hostConfig.actions.actionsOrientation, this.isDesignMode());
    };
    ActionSet.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setEnumProperty(Enums.Orientation, result, "orientation", this.orientation);
        Utils.setProperty(result, "actions", this._actionCollection.toJSON());
        return result;
    };
    ActionSet.prototype.isBleedingAtBottom = function () {
        if (this._actionCollection.renderedActionCount == 0) {
            return _super.prototype.isBleedingAtBottom.call(this);
        }
        else {
            if (this._actionCollection.items.length == 1) {
                return this._actionCollection.expandedAction != null && !this.hostConfig.actions.preExpandSingleShowCardAction;
            }
            else {
                return this._actionCollection.expandedAction != null;
            }
        }
    };
    ActionSet.prototype.getJsonTypeName = function () {
        return "ActionSet";
    };
    ActionSet.prototype.getActionCount = function () {
        return this._actionCollection.items.length;
    };
    ActionSet.prototype.getActionAt = function (index) {
        if (index >= 0 && index < this.getActionCount()) {
            return this._actionCollection.items[index];
        }
        else {
            _super.prototype.getActionAt.call(this, index);
        }
    };
    ActionSet.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        this._actionCollection.validateProperties(context);
    };
    ActionSet.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        var jsonOrientation = json["orientation"];
        if (jsonOrientation) {
            this.orientation = Utils.getEnumValue(Enums.Orientation, jsonOrientation, Enums.Orientation.Horizontal);
        }
        this._actionCollection.parse(json["actions"], errors);
    };
    ActionSet.prototype.addAction = function (action) {
        this._actionCollection.addAction(action);
    };
    ActionSet.prototype.getAllInputs = function () {
        return this._actionCollection.getAllInputs();
    };
    ActionSet.prototype.getResourceInformation = function () {
        return this._actionCollection.getResourceInformation();
    };
    Object.defineProperty(ActionSet.prototype, "isInteractive", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    return ActionSet;
}(CardElement));
exports.ActionSet = ActionSet;
var StylableCardElementContainer = /** @class */ (function (_super) {
    __extends(StylableCardElementContainer, _super);
    function StylableCardElementContainer() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._style = null;
        _this._bleed = false;
        return _this;
    }
    StylableCardElementContainer.prototype.applyBackground = function () {
        var styleDefinition = this.hostConfig.containerStyles.getStyleByName(this.style, this.hostConfig.containerStyles.getStyleByName(this.defaultStyle));
        if (!Utils.isNullOrEmpty(styleDefinition.backgroundColor)) {
            this.renderedElement.style.backgroundColor = Utils.stringToCssColor(styleDefinition.backgroundColor);
        }
    };
    StylableCardElementContainer.prototype.applyPadding = function () {
        _super.prototype.applyPadding.call(this);
        if (!this.renderedElement) {
            return;
        }
        var physicalPadding = new Shared.SpacingDefinition();
        if (this.getEffectivePadding()) {
            physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());
        }
        this.renderedElement.style.paddingTop = physicalPadding.top + "px";
        this.renderedElement.style.paddingRight = physicalPadding.right + "px";
        this.renderedElement.style.paddingBottom = physicalPadding.bottom + "px";
        this.renderedElement.style.paddingLeft = physicalPadding.left + "px";
        if (this.isBleeding()) {
            // Bleed into the first parent that does have padding
            var padding = new Shared.PaddingDefinition();
            this.getImmediateSurroundingPadding(padding);
            var surroundingPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);
            this.renderedElement.style.marginRight = "-" + surroundingPadding.right + "px";
            this.renderedElement.style.marginLeft = "-" + surroundingPadding.left + "px";
            if (!this.isDesignMode()) {
                this.renderedElement.style.marginTop = "-" + surroundingPadding.top + "px";
                this.renderedElement.style.marginBottom = "-" + surroundingPadding.bottom + "px";
            }
            if (this.separatorElement && this.separatorOrientation == Enums.Orientation.Horizontal) {
                this.separatorElement.style.marginLeft = "-" + surroundingPadding.left + "px";
                this.separatorElement.style.marginRight = "-" + surroundingPadding.right + "px";
            }
        }
        else {
            this.renderedElement.style.marginRight = "0";
            this.renderedElement.style.marginLeft = "0";
            this.renderedElement.style.marginTop = "0";
            this.renderedElement.style.marginBottom = "0";
            if (this.separatorElement) {
                this.separatorElement.style.marginRight = "0";
                this.separatorElement.style.marginLeft = "0";
            }
        }
    };
    StylableCardElementContainer.prototype.getHasBackground = function () {
        var currentElement = this.parent;
        while (currentElement) {
            var currentElementHasBackgroundImage = currentElement instanceof Container ? currentElement.backgroundImage.isValid() : false;
            if (currentElement instanceof StylableCardElementContainer) {
                if (this.hasExplicitStyle && (currentElement.getEffectiveStyle() != this.getEffectiveStyle() || currentElementHasBackgroundImage)) {
                    return true;
                }
            }
            currentElement = currentElement.parent;
        }
        return false;
    };
    StylableCardElementContainer.prototype.getDefaultPadding = function () {
        return this.getHasBackground() ?
            new Shared.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding) : _super.prototype.getDefaultPadding.call(this);
    };
    StylableCardElementContainer.prototype.getHasExpandedAction = function () {
        return false;
    };
    StylableCardElementContainer.prototype.getBleed = function () {
        return this._bleed;
    };
    StylableCardElementContainer.prototype.setBleed = function (value) {
        this._bleed = value;
    };
    Object.defineProperty(StylableCardElementContainer.prototype, "renderedActionCount", {
        get: function () {
            return 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(StylableCardElementContainer.prototype, "hasExplicitStyle", {
        get: function () {
            return this._style != null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(StylableCardElementContainer.prototype, "allowCustomStyle", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(StylableCardElementContainer.prototype, "supportsMinHeight", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    StylableCardElementContainer.prototype.isBleeding = function () {
        return (this.getHasBackground() || this.hostConfig.alwaysAllowBleed) && this.getBleed();
    };
    StylableCardElementContainer.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "style", this.style);
        return result;
    };
    StylableCardElementContainer.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (this._style) {
            var styleDefinition = this.hostConfig.containerStyles.getStyleByName(this._style);
            if (!styleDefinition) {
                context.addFailure(this, {
                    error: Enums.ValidationError.InvalidPropertyValue,
                    message: "Unknown container style: " + this._style
                });
            }
        }
    };
    StylableCardElementContainer.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this._style = Utils.getStringValue(json["style"]);
    };
    StylableCardElementContainer.prototype.render = function () {
        var renderedElement = _super.prototype.render.call(this);
        if (renderedElement && this.getHasBackground()) {
            this.applyBackground();
        }
        return renderedElement;
    };
    StylableCardElementContainer.prototype.getEffectiveStyle = function () {
        var effectiveStyle = this.style;
        return effectiveStyle ? effectiveStyle : _super.prototype.getEffectiveStyle.call(this);
    };
    Object.defineProperty(StylableCardElementContainer.prototype, "style", {
        get: function () {
            if (this.allowCustomStyle) {
                if (this._style && this.hostConfig.containerStyles.getStyleByName(this._style)) {
                    return this._style;
                }
            }
            return null;
        },
        set: function (value) {
            this._style = value;
        },
        enumerable: true,
        configurable: true
    });
    return StylableCardElementContainer;
}(CardElementContainer));
exports.StylableCardElementContainer = StylableCardElementContainer;
var BackgroundImage = /** @class */ (function (_super) {
    __extends(BackgroundImage, _super);
    function BackgroundImage() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.fillMode = BackgroundImage.defaultFillMode;
        _this.horizontalAlignment = BackgroundImage.defaultHorizontalAlignment;
        _this.verticalAlignment = BackgroundImage.defaultVerticalAlignment;
        return _this;
    }
    BackgroundImage.prototype.reset = function () {
        this.url = undefined;
        this.fillMode = BackgroundImage.defaultFillMode;
        this.horizontalAlignment = BackgroundImage.defaultHorizontalAlignment;
        this.verticalAlignment = BackgroundImage.defaultVerticalAlignment;
    };
    BackgroundImage.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.url = Utils.getStringValue(json["url"]);
        this.fillMode = Utils.getEnumValue(Enums.FillMode, json["fillMode"], this.fillMode);
        this.horizontalAlignment = Utils.getEnumValue(Enums.HorizontalAlignment, json["horizontalAlignment"], this.horizontalAlignment);
        this.verticalAlignment = Utils.getEnumValue(Enums.VerticalAlignment, json["verticalAlignment"], this.verticalAlignment);
    };
    BackgroundImage.prototype.toJSON = function () {
        if (!this.isValid()) {
            return null;
        }
        if (this.fillMode == BackgroundImage.defaultFillMode &&
            this.horizontalAlignment == BackgroundImage.defaultHorizontalAlignment &&
            this.verticalAlignment == BackgroundImage.defaultVerticalAlignment) {
            return this.url;
        }
        else {
            var result = _super.prototype.toJSON.call(this);
            Utils.setProperty(result, "url", this.url);
            Utils.setEnumProperty(Enums.FillMode, result, "fillMode", this.fillMode, BackgroundImage.defaultFillMode);
            Utils.setEnumProperty(Enums.HorizontalAlignment, result, "horizontalAlignment", this.horizontalAlignment, BackgroundImage.defaultHorizontalAlignment);
            Utils.setEnumProperty(Enums.VerticalAlignment, result, "verticalAlignment", this.verticalAlignment, BackgroundImage.defaultVerticalAlignment);
            return result;
        }
    };
    BackgroundImage.prototype.apply = function (element) {
        if (this.url) {
            element.style.backgroundImage = "url('" + this.url + "')";
            switch (this.fillMode) {
                case Enums.FillMode.Repeat:
                    element.style.backgroundRepeat = "repeat";
                    break;
                case Enums.FillMode.RepeatHorizontally:
                    element.style.backgroundRepeat = "repeat-x";
                    break;
                case Enums.FillMode.RepeatVertically:
                    element.style.backgroundRepeat = "repeat-y";
                    break;
                case Enums.FillMode.Cover:
                default:
                    element.style.backgroundRepeat = "no-repeat";
                    element.style.backgroundSize = "cover";
                    break;
            }
            switch (this.horizontalAlignment) {
                case Enums.HorizontalAlignment.Center:
                    element.style.backgroundPositionX = "center";
                    break;
                case Enums.HorizontalAlignment.Right:
                    element.style.backgroundPositionX = "right";
                    break;
            }
            switch (this.verticalAlignment) {
                case Enums.VerticalAlignment.Center:
                    element.style.backgroundPositionY = "center";
                    break;
                case Enums.VerticalAlignment.Bottom:
                    element.style.backgroundPositionY = "bottom";
                    break;
            }
        }
    };
    BackgroundImage.prototype.isValid = function () {
        return !Utils.isNullOrEmpty(this.url);
    };
    BackgroundImage.defaultFillMode = Enums.FillMode.Cover;
    BackgroundImage.defaultHorizontalAlignment = Enums.HorizontalAlignment.Left;
    BackgroundImage.defaultVerticalAlignment = Enums.VerticalAlignment.Top;
    return BackgroundImage;
}(SerializableObject));
exports.BackgroundImage = BackgroundImage;
var Container = /** @class */ (function (_super) {
    __extends(Container, _super);
    function Container() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._items = [];
        _this._renderedItems = [];
        _this.backgroundImage = new BackgroundImage();
        _this.verticalContentAlignment = Enums.VerticalAlignment.Top;
        _this.rtl = null;
        return _this;
    }
    Container.prototype.insertItemAt = function (item, index, forceInsert) {
        if (!item.parent || forceInsert) {
            if (item.isStandalone) {
                if (index < 0 || index >= this._items.length) {
                    this._items.push(item);
                }
                else {
                    this._items.splice(index, 0, item);
                }
                item.setParent(this);
            }
            else {
                throw new Error("Elements of type " + item.getJsonTypeName() + " cannot be used as standalone elements.");
            }
        }
        else {
            throw new Error("The element already belongs to another container.");
        }
    };
    Container.prototype.supportsExcplitiHeight = function () {
        return true;
    };
    Container.prototype.getItemsCollectionPropertyName = function () {
        return "items";
    };
    Container.prototype.applyBackground = function () {
        if (this.backgroundImage.isValid()) {
            this.backgroundImage.apply(this.renderedElement);
        }
        _super.prototype.applyBackground.call(this);
    };
    Container.prototype.internalRender = function () {
        this._renderedItems = [];
        // Cache hostConfig to avoid walking the parent hierarchy several times
        var hostConfig = this.hostConfig;
        var element = document.createElement("div");
        if (this.rtl != null && this.rtl) {
            element.dir = "rtl";
        }
        element.classList.add(hostConfig.makeCssClassName("ac-container"));
        element.style.display = "flex";
        element.style.flexDirection = "column";
        if (AdaptiveCard.useAdvancedCardBottomTruncation) {
            // Forces the container to be at least as tall as its content.
            //
            // Fixes a quirk in Chrome where, for nested flex elements, the
            // inner element's height would never exceed the outer element's
            // height. This caused overflow truncation to break -- containers
            // would always be measured as not overflowing, since their heights
            // were constrained by their parents as opposed to truly reflecting
            // the height of their content.
            //
            // See the "Browser Rendering Notes" section of this answer:
            // https://stackoverflow.com/questions/36247140/why-doesnt-flex-item-shrink-past-content-size
            element.style.minHeight = '-webkit-min-content';
        }
        switch (this.verticalContentAlignment) {
            case Enums.VerticalAlignment.Center:
                element.style.justifyContent = "center";
                break;
            case Enums.VerticalAlignment.Bottom:
                element.style.justifyContent = "flex-end";
                break;
            default:
                element.style.justifyContent = "flex-start";
                break;
        }
        if (this._items.length > 0) {
            for (var i = 0; i < this._items.length; i++) {
                var renderedElement = this.isElementAllowed(this._items[i], this.getForbiddenElementTypes()) ? this._items[i].render() : null;
                if (renderedElement) {
                    if (this._renderedItems.length > 0 && this._items[i].separatorElement) {
                        this._items[i].separatorElement.style.flex = "0 0 auto";
                        Utils.appendChild(element, this._items[i].separatorElement);
                    }
                    Utils.appendChild(element, renderedElement);
                    this._renderedItems.push(this._items[i]);
                }
            }
        }
        else {
            if (this.isDesignMode()) {
                var placeholderElement = this.createPlaceholderElement();
                placeholderElement.style.width = "100%";
                placeholderElement.style.height = "100%";
                element.appendChild(placeholderElement);
            }
        }
        return element;
    };
    Container.prototype.truncateOverflow = function (maxHeight) {
        // Add 1 to account for rounding differences between browsers
        var boundary = this.renderedElement.offsetTop + maxHeight + 1;
        var handleElement = function (cardElement) {
            var elt = cardElement.renderedElement;
            if (elt) {
                switch (Utils.getFitStatus(elt, boundary)) {
                    case Enums.ContainerFitStatus.FullyInContainer:
                        var sizeChanged = cardElement['resetOverflow']();
                        // If the element's size changed after resetting content,
                        // we have to check if it still fits fully in the card
                        if (sizeChanged) {
                            handleElement(cardElement);
                        }
                        break;
                    case Enums.ContainerFitStatus.Overflowing:
                        var maxHeight_1 = boundary - elt.offsetTop;
                        cardElement['handleOverflow'](maxHeight_1);
                        break;
                    case Enums.ContainerFitStatus.FullyOutOfContainer:
                        cardElement['handleOverflow'](0);
                        break;
                }
            }
        };
        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
            var item = _a[_i];
            handleElement(item);
        }
        return true;
    };
    Container.prototype.undoOverflowTruncation = function () {
        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
            var item = _a[_i];
            item['resetOverflow']();
        }
    };
    Container.prototype.getHasBackground = function () {
        return this.backgroundImage.isValid() || _super.prototype.getHasBackground.call(this);
    };
    Object.defineProperty(Container.prototype, "isSelectable", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    Container.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "backgroundImage", this.backgroundImage.toJSON());
        Utils.setEnumProperty(Enums.VerticalAlignment, result, "verticalContentAlignment", this.verticalContentAlignment, Enums.VerticalAlignment.Top);
        if (this._items.length > 0) {
            var elements = [];
            for (var _i = 0, _a = this._items; _i < _a.length; _i++) {
                var element = _a[_i];
                elements.push(element.toJSON());
            }
            Utils.setProperty(result, this.getItemsCollectionPropertyName(), elements);
        }
        Utils.setProperty(result, "bleed", this.bleed, false);
        return result;
    };
    Container.prototype.getItemCount = function () {
        return this._items.length;
    };
    Container.prototype.getItemAt = function (index) {
        return this._items[index];
    };
    Container.prototype.getFirstVisibleRenderedItem = function () {
        if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {
            for (var _i = 0, _a = this._renderedItems; _i < _a.length; _i++) {
                var item = _a[_i];
                if (item.isVisible) {
                    return item;
                }
            }
            ;
        }
        return null;
    };
    Container.prototype.getLastVisibleRenderedItem = function () {
        if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {
            for (var i = this._renderedItems.length - 1; i >= 0; i--) {
                if (this._renderedItems[i].isVisible) {
                    return this._renderedItems[i];
                }
            }
        }
        return null;
    };
    Container.prototype.getJsonTypeName = function () {
        return "Container";
    };
    Container.prototype.isFirstElement = function (element) {
        var designMode = this.isDesignMode();
        for (var i = 0; i < this._items.length; i++) {
            if (this._items[i].isVisible || designMode) {
                return this._items[i] == element;
            }
        }
        return false;
    };
    Container.prototype.isLastElement = function (element) {
        var designMode = this.isDesignMode();
        for (var i = this._items.length - 1; i >= 0; i--) {
            if (this._items[i].isVisible || designMode) {
                return this._items[i] == element;
            }
        }
        return false;
    };
    Container.prototype.isRtl = function () {
        if (this.rtl != null) {
            return this.rtl;
        }
        else {
            var parentContainer = this.getParentContainer();
            return parentContainer ? parentContainer.isRtl() : false;
        }
    };
    Container.prototype.isBleedingAtTop = function () {
        var firstRenderedItem = this.getFirstVisibleRenderedItem();
        return this.isBleeding() || (firstRenderedItem ? firstRenderedItem.isBleedingAtTop() : false);
    };
    Container.prototype.isBleedingAtBottom = function () {
        var lastRenderedItem = this.getLastVisibleRenderedItem();
        return this.isBleeding() || (lastRenderedItem ? lastRenderedItem.isBleedingAtBottom() && lastRenderedItem.getEffectiveStyle() == this.getEffectiveStyle() : false);
    };
    Container.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this.setShouldFallback(false);
        this._items = [];
        this._renderedItems = [];
        this.backgroundImage.reset();
        var jsonBackgroundImage = json["backgroundImage"];
        if (jsonBackgroundImage) {
            if (typeof jsonBackgroundImage === "string") {
                this.backgroundImage.url = jsonBackgroundImage;
                this.backgroundImage.fillMode = Enums.FillMode.Cover;
            }
            else if (typeof jsonBackgroundImage === "object") {
                this.backgroundImage.parse(jsonBackgroundImage, errors);
            }
        }
        this.verticalContentAlignment = Utils.getEnumValue(Enums.VerticalAlignment, json["verticalContentAlignment"], this.verticalContentAlignment);
        if (json[this.getItemsCollectionPropertyName()] != null) {
            var items = json[this.getItemsCollectionPropertyName()];
            this.clear();
            for (var i = 0; i < items.length; i++) {
                var element = createElementInstance(this, items[i], !this.isDesignMode(), errors);
                if (element) {
                    this.insertItemAt(element, -1, true);
                }
            }
        }
        this.bleed = Utils.getBoolValue(json["bleed"], this.bleed);
    };
    Container.prototype.indexOf = function (cardElement) {
        return this._items.indexOf(cardElement);
    };
    Container.prototype.addItem = function (item) {
        this.insertItemAt(item, -1, false);
    };
    Container.prototype.insertItemBefore = function (item, insertBefore) {
        this.insertItemAt(item, this._items.indexOf(insertBefore), false);
    };
    Container.prototype.insertItemAfter = function (item, insertAfter) {
        this.insertItemAt(item, this._items.indexOf(insertAfter) + 1, false);
    };
    Container.prototype.removeItem = function (item) {
        var itemIndex = this._items.indexOf(item);
        if (itemIndex >= 0) {
            this._items.splice(itemIndex, 1);
            item.setParent(null);
            this.updateLayout();
            return true;
        }
        return false;
    };
    Container.prototype.clear = function () {
        this._items = [];
    };
    Container.prototype.getResourceInformation = function () {
        var result = _super.prototype.getResourceInformation.call(this);
        if (this.backgroundImage.isValid()) {
            result.push({ url: this.backgroundImage.url, mimeType: "image" });
        }
        return result;
    };
    Container.prototype.getActionById = function (id) {
        var result = _super.prototype.getActionById.call(this, id);
        if (!result) {
            if (this.selectAction) {
                result = this.selectAction.getActionById(id);
            }
            if (!result) {
                for (var i = 0; i < this._items.length; i++) {
                    result = this._items[i].getActionById(id);
                    if (result) {
                        break;
                    }
                }
            }
        }
        return result;
    };
    Object.defineProperty(Container.prototype, "padding", {
        get: function () {
            return this.getPadding();
        },
        set: function (value) {
            this.setPadding(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Container.prototype, "selectAction", {
        get: function () {
            return this.getSelectAction();
        },
        set: function (value) {
            this.setSelectAction(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Container.prototype, "bleed", {
        get: function () {
            return this.getBleed();
        },
        set: function (value) {
            this.setBleed(value);
        },
        enumerable: true,
        configurable: true
    });
    return Container;
}(StylableCardElementContainer));
exports.Container = Container;
var Column = /** @class */ (function (_super) {
    __extends(Column, _super);
    function Column(width) {
        if (width === void 0) { width = "stretch"; }
        var _this = _super.call(this) || this;
        _this._computedWeight = 0;
        _this.width = "stretch";
        _this.width = width;
        return _this;
    }
    Column.prototype.adjustRenderedElementSize = function (renderedElement) {
        var minDesignTimeColumnHeight = 20;
        if (this.isDesignMode()) {
            renderedElement.style.minWidth = "20px";
            renderedElement.style.minHeight = (!this.minPixelHeight ? minDesignTimeColumnHeight : Math.max(this.minPixelHeight, minDesignTimeColumnHeight)) + "px";
        }
        else {
            renderedElement.style.minWidth = "0";
            if (this.minPixelHeight) {
                renderedElement.style.minHeight = this.minPixelHeight + "px";
            }
        }
        if (this.width === "auto") {
            renderedElement.style.flex = "0 1 auto";
        }
        else if (this.width === "stretch") {
            renderedElement.style.flex = "1 1 50px";
        }
        else {
            var sizeAndUnit = this.width;
            if (sizeAndUnit.unit == Enums.SizeUnit.Pixel) {
                renderedElement.style.flex = "0 0 auto";
                renderedElement.style.width = sizeAndUnit.physicalSize + "px";
            }
            else {
                renderedElement.style.flex = "1 1 " + (this._computedWeight > 0 ? this._computedWeight : sizeAndUnit.physicalSize) + "%";
            }
        }
    };
    Object.defineProperty(Column.prototype, "separatorOrientation", {
        get: function () {
            return Enums.Orientation.Vertical;
        },
        enumerable: true,
        configurable: true
    });
    Column.prototype.getJsonTypeName = function () {
        return "Column";
    };
    Column.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        if (this.width instanceof Shared.SizeAndUnit) {
            if (this.width.unit == Enums.SizeUnit.Pixel) {
                Utils.setProperty(result, "width", this.width.physicalSize + "px");
            }
            else {
                Utils.setNumberProperty(result, "width", this.width.physicalSize);
            }
        }
        else {
            Utils.setProperty(result, "width", this.width);
        }
        return result;
    };
    Column.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        var jsonWidth = json["width"];
        if (jsonWidth === undefined) {
            jsonWidth = json["size"];
            if (jsonWidth !== undefined) {
                raiseParseError({
                    error: Enums.ValidationError.Deprecated,
                    message: "The \"Column.size\" property is deprecated and will be removed. Use the \"Column.width\" property instead."
                }, errors);
            }
        }
        if (jsonWidth) {
            var invalidWidth = false;
            try {
                this.width = Shared.SizeAndUnit.parse(jsonWidth);
            }
            catch (e) {
                if (typeof jsonWidth === "string" && (jsonWidth === "auto" || jsonWidth === "stretch")) {
                    this.width = jsonWidth;
                }
                else {
                    invalidWidth = true;
                }
            }
            if (invalidWidth) {
                raiseParseError({
                    error: Enums.ValidationError.InvalidPropertyValue,
                    message: "Invalid column width:" + jsonWidth + " - defaulting to \"auto\""
                }, errors);
            }
        }
    };
    Object.defineProperty(Column.prototype, "hasVisibleSeparator", {
        get: function () {
            if (this.parent && this.parent instanceof ColumnSet) {
                return this.separatorElement && !this.parent.isLeftMostElement(this);
            }
            else {
                return false;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Column.prototype, "isStandalone", {
        get: function () {
            return false;
        },
        enumerable: true,
        configurable: true
    });
    return Column;
}(Container));
exports.Column = Column;
var ColumnSet = /** @class */ (function (_super) {
    __extends(ColumnSet, _super);
    function ColumnSet() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._columns = [];
        return _this;
    }
    ColumnSet.prototype.createColumnInstance = function (json, errors) {
        return createCardObjectInstance(this, json, [], // Forbidden types not supported for elements for now
        !this.isDesignMode(), function (typeName) {
            return !typeName || typeName === "Column" ? new Column() : null;
        }, function (typeName, errorType) {
            if (errorType == InstanceCreationErrorType.UnknownType) {
                return {
                    error: Enums.ValidationError.UnknownElementType,
                    message: "Unknown element type: " + typeName + ". Fallback will be used if present."
                };
            }
            else {
                return {
                    error: Enums.ValidationError.ElementTypeNotAllowed,
                    message: "Element type " + typeName + " isn't allowed in a ColumnSet."
                };
            }
        }, errors);
    };
    ColumnSet.prototype.internalRender = function () {
        this._renderedColumns = [];
        if (this._columns.length > 0) {
            // Cache hostConfig to avoid walking the parent hierarchy several times
            var hostConfig = this.hostConfig;
            var element = document.createElement("div");
            element.className = hostConfig.makeCssClassName("ac-columnSet");
            element.style.display = "flex";
            if (AdaptiveCard.useAdvancedCardBottomTruncation) {
                // See comment in Container.internalRender()
                element.style.minHeight = '-webkit-min-content';
            }
            switch (this.horizontalAlignment) {
                case Enums.HorizontalAlignment.Center:
                    element.style.justifyContent = "center";
                    break;
                case Enums.HorizontalAlignment.Right:
                    element.style.justifyContent = "flex-end";
                    break;
                default:
                    element.style.justifyContent = "flex-start";
                    break;
            }
            var totalWeight = 0;
            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
                var column = _a[_i];
                if (column.width instanceof Shared.SizeAndUnit && (column.width.unit == Enums.SizeUnit.Weight)) {
                    totalWeight += column.width.physicalSize;
                }
            }
            for (var _b = 0, _c = this._columns; _b < _c.length; _b++) {
                var column = _c[_b];
                if (column.width instanceof Shared.SizeAndUnit && column.width.unit == Enums.SizeUnit.Weight && totalWeight > 0) {
                    var computedWeight = 100 / totalWeight * column.width.physicalSize;
                    // Best way to emulate "internal" access I know of
                    column["_computedWeight"] = computedWeight;
                }
                var renderedColumn = column.render();
                if (renderedColumn) {
                    if (this._renderedColumns.length > 0 && column.separatorElement) {
                        column.separatorElement.style.flex = "0 0 auto";
                        Utils.appendChild(element, column.separatorElement);
                    }
                    Utils.appendChild(element, renderedColumn);
                    this._renderedColumns.push(column);
                }
            }
            return this._renderedColumns.length > 0 ? element : null;
        }
        else {
            return null;
        }
    };
    ColumnSet.prototype.truncateOverflow = function (maxHeight) {
        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
            var column = _a[_i];
            column['handleOverflow'](maxHeight);
        }
        return true;
    };
    ColumnSet.prototype.undoOverflowTruncation = function () {
        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
            var column = _a[_i];
            column['resetOverflow']();
        }
    };
    Object.defineProperty(ColumnSet.prototype, "isSelectable", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    ColumnSet.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        if (this._columns.length > 0) {
            var columns = [];
            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
                var column = _a[_i];
                columns.push(column.toJSON());
            }
            Utils.setProperty(result, "columns", columns);
        }
        Utils.setProperty(result, "bleed", this.bleed, false);
        return result;
    };
    ColumnSet.prototype.isFirstElement = function (element) {
        for (var i = 0; i < this._columns.length; i++) {
            if (this._columns[i].isVisible) {
                return this._columns[i] == element;
            }
        }
        return false;
    };
    ColumnSet.prototype.isBleedingAtTop = function () {
        if (this.isBleeding()) {
            return true;
        }
        if (this._renderedColumns && this._renderedColumns.length > 0) {
            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
                var column = _a[_i];
                if (column.isBleedingAtTop()) {
                    return true;
                }
            }
        }
        return false;
    };
    ColumnSet.prototype.isBleedingAtBottom = function () {
        if (this.isBleeding()) {
            return true;
        }
        if (this._renderedColumns && this._renderedColumns.length > 0) {
            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
                var column = _a[_i];
                if (column.isBleedingAtBottom()) {
                    return true;
                }
            }
        }
        return false;
    };
    ColumnSet.prototype.getCount = function () {
        return this._columns.length;
    };
    ColumnSet.prototype.getItemCount = function () {
        return this.getCount();
    };
    ColumnSet.prototype.getFirstVisibleRenderedItem = function () {
        if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {
            return this._renderedColumns[0];
        }
        else {
            return null;
        }
    };
    ColumnSet.prototype.getLastVisibleRenderedItem = function () {
        if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {
            return this._renderedColumns[this._renderedColumns.length - 1];
        }
        else {
            return null;
        }
    };
    ColumnSet.prototype.getColumnAt = function (index) {
        return this._columns[index];
    };
    ColumnSet.prototype.getItemAt = function (index) {
        return this.getColumnAt(index);
    };
    ColumnSet.prototype.getJsonTypeName = function () {
        return "ColumnSet";
    };
    ColumnSet.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        if (json["columns"] != null) {
            var jsonColumns = json["columns"];
            this._columns = [];
            for (var i = 0; i < jsonColumns.length; i++) {
                var column = this.createColumnInstance(jsonColumns[i], errors);
                if (column) {
                    this._columns.push(column);
                }
            }
        }
        this.bleed = Utils.getBoolValue(json["bleed"], this.bleed);
    };
    ColumnSet.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        var weightedColumns = 0;
        var stretchedColumns = 0;
        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {
            var column = _a[_i];
            if (typeof column.width === "number") {
                weightedColumns++;
            }
            else if (column.width === "stretch") {
                stretchedColumns++;
            }
        }
        if (weightedColumns > 0 && stretchedColumns > 0) {
            context.addFailure(this, {
                error: Enums.ValidationError.Hint,
                message: "It is not recommended to use weighted and stretched columns in the same ColumnSet, because in such a situation stretched columns will always get the minimum amount of space."
            });
        }
    };
    ColumnSet.prototype.addColumn = function (column) {
        if (!column.parent) {
            this._columns.push(column);
            column.setParent(this);
        }
        else {
            throw new Error("This column already belongs to another ColumnSet.");
        }
    };
    ColumnSet.prototype.removeItem = function (item) {
        if (item instanceof Column) {
            var itemIndex = this._columns.indexOf(item);
            if (itemIndex >= 0) {
                this._columns.splice(itemIndex, 1);
                item.setParent(null);
                this.updateLayout();
                return true;
            }
        }
        return false;
    };
    ColumnSet.prototype.indexOf = function (cardElement) {
        return cardElement instanceof Column ? this._columns.indexOf(cardElement) : -1;
    };
    ColumnSet.prototype.isLeftMostElement = function (element) {
        return this._columns.indexOf(element) == 0;
    };
    ColumnSet.prototype.isRightMostElement = function (element) {
        return this._columns.indexOf(element) == this._columns.length - 1;
    };
    ColumnSet.prototype.isTopElement = function (element) {
        return this._columns.indexOf(element) >= 0;
    };
    ColumnSet.prototype.isBottomElement = function (element) {
        return this._columns.indexOf(element) >= 0;
    };
    ColumnSet.prototype.getActionById = function (id) {
        var result = null;
        for (var i = 0; i < this._columns.length; i++) {
            result = this._columns[i].getActionById(id);
            if (result) {
                break;
            }
        }
        return result;
    };
    Object.defineProperty(ColumnSet.prototype, "bleed", {
        get: function () {
            return this.getBleed();
        },
        set: function (value) {
            this.setBleed(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ColumnSet.prototype, "padding", {
        get: function () {
            return this.getPadding();
        },
        set: function (value) {
            this.setPadding(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ColumnSet.prototype, "selectAction", {
        get: function () {
            return this.getSelectAction();
        },
        set: function (value) {
            this.setSelectAction(value);
        },
        enumerable: true,
        configurable: true
    });
    return ColumnSet;
}(StylableCardElementContainer));
exports.ColumnSet = ColumnSet;
function raiseImageLoadedEvent(image) {
    var card = image.getRootElement();
    var onImageLoadedHandler = (card && card.onImageLoaded) ? card.onImageLoaded : AdaptiveCard.onImageLoaded;
    if (onImageLoadedHandler) {
        onImageLoadedHandler(image);
    }
}
function raiseAnchorClickedEvent(element, anchor) {
    var card = element.getRootElement();
    var onAnchorClickedHandler = (card && card.onAnchorClicked) ? card.onAnchorClicked : AdaptiveCard.onAnchorClicked;
    return onAnchorClickedHandler != null ? onAnchorClickedHandler(element, anchor) : false;
}
function raiseExecuteActionEvent(action) {
    var card = action.parent.getRootElement();
    var onExecuteActionHandler = (card && card.onExecuteAction) ? card.onExecuteAction : AdaptiveCard.onExecuteAction;
    if (onExecuteActionHandler) {
        if (action.prepareForExecution()) {
            onExecuteActionHandler(action);
        }
    }
}
function raiseInlineCardExpandedEvent(action, isExpanded) {
    var card = action.parent.getRootElement();
    var onInlineCardExpandedHandler = (card && card.onInlineCardExpanded) ? card.onInlineCardExpanded : AdaptiveCard.onInlineCardExpanded;
    if (onInlineCardExpandedHandler) {
        onInlineCardExpandedHandler(action, isExpanded);
    }
}
function raiseInputValueChangedEvent(input) {
    var card = input.getRootElement();
    var onInputValueChangedHandler = (card && card.onInputValueChanged) ? card.onInputValueChanged : AdaptiveCard.onInputValueChanged;
    if (onInputValueChangedHandler) {
        onInputValueChangedHandler(input);
    }
}
function raiseElementVisibilityChangedEvent(element, shouldUpdateLayout) {
    if (shouldUpdateLayout === void 0) { shouldUpdateLayout = true; }
    var rootElement = element.getRootElement();
    if (shouldUpdateLayout) {
        rootElement.updateLayout();
    }
    var card = rootElement;
    var onElementVisibilityChangedHandler = (card && card.onElementVisibilityChanged) ? card.onElementVisibilityChanged : AdaptiveCard.onElementVisibilityChanged;
    if (onElementVisibilityChangedHandler != null) {
        onElementVisibilityChangedHandler(element);
    }
}
function raiseParseElementEvent(element, json, errors) {
    var card = element.getRootElement();
    var onParseElementHandler = (card && card.onParseElement) ? card.onParseElement : AdaptiveCard.onParseElement;
    if (onParseElementHandler != null) {
        onParseElementHandler(element, json, errors);
    }
}
function raiseParseActionEvent(action, json, errors) {
    var card = action.parent ? action.parent.getRootElement() : null;
    var onParseActionHandler = (card && card.onParseAction) ? card.onParseAction : AdaptiveCard.onParseAction;
    if (onParseActionHandler != null) {
        onParseActionHandler(action, json, errors);
    }
}
function raiseParseError(error, errors) {
    if (errors) {
        errors.push(error);
    }
    if (AdaptiveCard.onParseError != null) {
        AdaptiveCard.onParseError(error);
    }
}
var ContainerWithActions = /** @class */ (function (_super) {
    __extends(ContainerWithActions, _super);
    function ContainerWithActions() {
        var _this = _super.call(this) || this;
        _this._actionCollection = new ActionCollection(_this);
        return _this;
    }
    ContainerWithActions.prototype.internalRender = function () {
        var element = _super.prototype.internalRender.call(this);
        var renderedActions = this._actionCollection.render(this.hostConfig.actions.actionsOrientation, false);
        if (renderedActions) {
            Utils.appendChild(element, Utils.renderSeparation(this.hostConfig, {
                spacing: this.hostConfig.getEffectiveSpacing(this.hostConfig.actions.spacing),
                lineThickness: null,
                lineColor: null
            }, Enums.Orientation.Horizontal));
            Utils.appendChild(element, renderedActions);
        }
        if (this.renderIfEmpty) {
            return element;
        }
        else {
            return element.children.length > 0 ? element : null;
        }
    };
    ContainerWithActions.prototype.getHasExpandedAction = function () {
        if (this.renderedActionCount == 0) {
            return false;
        }
        else if (this.renderedActionCount == 1) {
            return this._actionCollection.expandedAction != null && !this.hostConfig.actions.preExpandSingleShowCardAction;
        }
        else {
            return this._actionCollection.expandedAction != null;
        }
    };
    Object.defineProperty(ContainerWithActions.prototype, "renderedActionCount", {
        get: function () {
            return this._actionCollection.renderedActionCount;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ContainerWithActions.prototype, "renderIfEmpty", {
        get: function () {
            return false;
        },
        enumerable: true,
        configurable: true
    });
    ContainerWithActions.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "actions", this._actionCollection.toJSON());
        return result;
    };
    ContainerWithActions.prototype.getActionCount = function () {
        return this._actionCollection.items.length;
    };
    ContainerWithActions.prototype.getActionAt = function (index) {
        if (index >= 0 && index < this.getActionCount()) {
            return this._actionCollection.items[index];
        }
        else {
            _super.prototype.getActionAt.call(this, index);
        }
    };
    ContainerWithActions.prototype.getActionById = function (id) {
        var result = this._actionCollection.getActionById(id);
        return result ? result : _super.prototype.getActionById.call(this, id);
    };
    ContainerWithActions.prototype.parse = function (json, errors) {
        _super.prototype.parse.call(this, json, errors);
        this._actionCollection.parse(json["actions"], errors);
    };
    ContainerWithActions.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (this._actionCollection) {
            this._actionCollection.validateProperties(context);
        }
    };
    ContainerWithActions.prototype.isLastElement = function (element) {
        return _super.prototype.isLastElement.call(this, element) && this._actionCollection.items.length == 0;
    };
    ContainerWithActions.prototype.addAction = function (action) {
        this._actionCollection.addAction(action);
    };
    ContainerWithActions.prototype.clear = function () {
        _super.prototype.clear.call(this);
        this._actionCollection.clear();
    };
    ContainerWithActions.prototype.getAllInputs = function () {
        return _super.prototype.getAllInputs.call(this).concat(this._actionCollection.getAllInputs());
    };
    ContainerWithActions.prototype.getResourceInformation = function () {
        return _super.prototype.getResourceInformation.call(this).concat(this._actionCollection.getResourceInformation());
    };
    ContainerWithActions.prototype.isBleedingAtBottom = function () {
        if (this._actionCollection.renderedActionCount == 0) {
            return _super.prototype.isBleedingAtBottom.call(this);
        }
        else {
            if (this._actionCollection.items.length == 1) {
                return this._actionCollection.expandedAction != null && !this.hostConfig.actions.preExpandSingleShowCardAction;
            }
            else {
                return this._actionCollection.expandedAction != null;
            }
        }
    };
    Object.defineProperty(ContainerWithActions.prototype, "isStandalone", {
        get: function () {
            return false;
        },
        enumerable: true,
        configurable: true
    });
    return ContainerWithActions;
}(Container));
exports.ContainerWithActions = ContainerWithActions;
var TypeRegistry = /** @class */ (function () {
    function TypeRegistry() {
        this._items = [];
        this.reset();
    }
    TypeRegistry.prototype.findTypeRegistration = function (typeName) {
        for (var i = 0; i < this._items.length; i++) {
            if (this._items[i].typeName === typeName) {
                return this._items[i];
            }
        }
        return null;
    };
    TypeRegistry.prototype.clear = function () {
        this._items = [];
    };
    TypeRegistry.prototype.registerType = function (typeName, createInstance) {
        var registrationInfo = this.findTypeRegistration(typeName);
        if (registrationInfo != null) {
            registrationInfo.createInstance = createInstance;
        }
        else {
            registrationInfo = {
                typeName: typeName,
                createInstance: createInstance
            };
            this._items.push(registrationInfo);
        }
    };
    TypeRegistry.prototype.unregisterType = function (typeName) {
        for (var i = 0; i < this._items.length; i++) {
            if (this._items[i].typeName === typeName) {
                this._items.splice(i, 1);
                return;
            }
        }
    };
    TypeRegistry.prototype.createInstance = function (typeName) {
        var registrationInfo = this.findTypeRegistration(typeName);
        return registrationInfo ? registrationInfo.createInstance() : null;
    };
    TypeRegistry.prototype.getItemCount = function () {
        return this._items.length;
    };
    TypeRegistry.prototype.getItemAt = function (index) {
        return this._items[index];
    };
    return TypeRegistry;
}());
exports.TypeRegistry = TypeRegistry;
var ElementTypeRegistry = /** @class */ (function (_super) {
    __extends(ElementTypeRegistry, _super);
    function ElementTypeRegistry() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ElementTypeRegistry.prototype.reset = function () {
        this.clear();
        this.registerType("Container", function () { return new Container(); });
        this.registerType("TextBlock", function () { return new TextBlock(); });
        this.registerType("RichTextBlock", function () { return new RichTextBlock(); });
        this.registerType("TextRun", function () { return new TextRun(); });
        this.registerType("Image", function () { return new Image(); });
        this.registerType("ImageSet", function () { return new ImageSet(); });
        this.registerType("Media", function () { return new Media(); });
        this.registerType("FactSet", function () { return new FactSet(); });
        this.registerType("ColumnSet", function () { return new ColumnSet(); });
        this.registerType("ActionSet", function () { return new ActionSet(); });
        this.registerType("Input.Text", function () { return new TextInput(); });
        this.registerType("Input.Date", function () { return new DateInput(); });
        this.registerType("Input.Time", function () { return new TimeInput(); });
        this.registerType("Input.Number", function () { return new NumberInput(); });
        this.registerType("Input.ChoiceSet", function () { return new ChoiceSetInput(); });
        this.registerType("Input.Toggle", function () { return new ToggleInput(); });
    };
    return ElementTypeRegistry;
}(TypeRegistry));
exports.ElementTypeRegistry = ElementTypeRegistry;
var ActionTypeRegistry = /** @class */ (function (_super) {
    __extends(ActionTypeRegistry, _super);
    function ActionTypeRegistry() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ActionTypeRegistry.prototype.reset = function () {
        this.clear();
        this.registerType(OpenUrlAction.JsonTypeName, function () { return new OpenUrlAction(); });
        this.registerType(SubmitAction.JsonTypeName, function () { return new SubmitAction(); });
        this.registerType(ShowCardAction.JsonTypeName, function () { return new ShowCardAction(); });
        this.registerType(ToggleVisibilityAction.JsonTypeName, function () { return new ToggleVisibilityAction(); });
    };
    return ActionTypeRegistry;
}(TypeRegistry));
exports.ActionTypeRegistry = ActionTypeRegistry;
// @dynamic
var AdaptiveCard = /** @class */ (function (_super) {
    __extends(AdaptiveCard, _super);
    function AdaptiveCard() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._cardTypeName = "AdaptiveCard";
        _this._fallbackCard = null;
        _this.onAnchorClicked = null;
        _this.onExecuteAction = null;
        _this.onElementVisibilityChanged = null;
        _this.onImageLoaded = null;
        _this.onInlineCardExpanded = null;
        _this.onInputValueChanged = null;
        _this.onParseElement = null;
        _this.onParseAction = null;
        _this.version = new HostConfig.Version(1, 0);
        _this.designMode = false;
        return _this;
    }
    Object.defineProperty(AdaptiveCard, "processMarkdown", {
        get: function () {
            throw new Error("The processMarkdown event has been removed. Please update your code and set onProcessMarkdown instead.");
        },
        set: function (value) {
            throw new Error("The processMarkdown event has been removed. Please update your code and set onProcessMarkdown instead.");
        },
        enumerable: true,
        configurable: true
    });
    AdaptiveCard.applyMarkdown = function (text) {
        var result = {
            didProcess: false
        };
        if (AdaptiveCard.onProcessMarkdown) {
            AdaptiveCard.onProcessMarkdown(text, result);
        }
        else if (window["markdownit"]) {
            // Check for markdownit
            result.outputHtml = window["markdownit"]().render(text);
            result.didProcess = true;
        }
        else {
            console.warn("Markdown processing isn't enabled. Please see https://www.npmjs.com/package/adaptivecards#supporting-markdown");
        }
        return result;
    };
    AdaptiveCard.prototype.isVersionSupported = function () {
        if (this.bypassVersionCheck) {
            return true;
        }
        else {
            var unsupportedVersion = !this.version ||
                !this.version.isValid ||
                (AdaptiveCard.currentVersion.major < this.version.major) ||
                (AdaptiveCard.currentVersion.major == this.version.major && AdaptiveCard.currentVersion.minor < this.version.minor);
            return !unsupportedVersion;
        }
    };
    AdaptiveCard.prototype.getItemsCollectionPropertyName = function () {
        return "body";
    };
    AdaptiveCard.prototype.internalRender = function () {
        var renderedElement = _super.prototype.internalRender.call(this);
        if (AdaptiveCard.useAdvancedCardBottomTruncation) {
            // Unlike containers, the root card element should be allowed to
            // be shorter than its content (otherwise the overflow truncation
            // logic would never get triggered)
            renderedElement.style.minHeight = null;
        }
        return renderedElement;
    };
    AdaptiveCard.prototype.getHasBackground = function () {
        return true;
    };
    AdaptiveCard.prototype.getDefaultPadding = function () {
        return new Shared.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding);
    };
    Object.defineProperty(AdaptiveCard.prototype, "renderIfEmpty", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AdaptiveCard.prototype, "bypassVersionCheck", {
        get: function () {
            return false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AdaptiveCard.prototype, "allowCustomStyle", {
        get: function () {
            return this.hostConfig.adaptiveCard && this.hostConfig.adaptiveCard.allowCustomStyle;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AdaptiveCard.prototype, "hasBackground", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    AdaptiveCard.prototype.getJsonTypeName = function () {
        return "AdaptiveCard";
    };
    AdaptiveCard.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        Utils.setProperty(result, "$schema", "http://adaptivecards.io/schemas/adaptive-card.json");
        if (!this.bypassVersionCheck && this.version) {
            Utils.setProperty(result, "version", this.version.toString());
        }
        Utils.setProperty(result, "fallbackText", this.fallbackText);
        Utils.setProperty(result, "lang", this.lang);
        Utils.setProperty(result, "speak", this.speak);
        return result;
    };
    AdaptiveCard.prototype.internalValidateProperties = function (context) {
        _super.prototype.internalValidateProperties.call(this, context);
        if (this._cardTypeName != "AdaptiveCard") {
            context.addFailure(this, {
                error: Enums.ValidationError.MissingCardType,
                message: "Invalid or missing card type. Make sure the card's type property is set to \"AdaptiveCard\"."
            });
        }
        if (!this.bypassVersionCheck && !this.version) {
            context.addFailure(this, {
                error: Enums.ValidationError.PropertyCantBeNull,
                message: "The version property must be specified."
            });
        }
        else if (!this.isVersionSupported()) {
            context.addFailure(this, {
                error: Enums.ValidationError.UnsupportedCardVersion,
                message: "The specified card version (" + this.version + ") is not supported. The maximum supported card version is " + AdaptiveCard.currentVersion
            });
        }
    };
    AdaptiveCard.prototype.parse = function (json, errors) {
        this._fallbackCard = null;
        this._cardTypeName = Utils.getStringValue(json["type"]);
        this.speak = Utils.getStringValue(json["speak"]);
        var langId = Utils.getStringValue(json["lang"]);
        if (langId && typeof langId === "string") {
            try {
                this.lang = langId;
            }
            catch (e) {
                raiseParseError({
                    error: Enums.ValidationError.InvalidPropertyValue,
                    message: e.message
                }, errors);
            }
        }
        this.version = HostConfig.Version.parse(json["version"], errors);
        this.fallbackText = Utils.getStringValue(json["fallbackText"]);
        var fallbackElement = createElementInstance(null, json["fallback"], !this.isDesignMode(), errors);
        if (fallbackElement) {
            this._fallbackCard = new AdaptiveCard();
            this._fallbackCard.addItem(fallbackElement);
        }
        _super.prototype.parse.call(this, json, errors);
    };
    AdaptiveCard.prototype.render = function (target) {
        var renderedCard;
        if (this.shouldFallback() && this._fallbackCard) {
            this._fallbackCard.hostConfig = this.hostConfig;
            renderedCard = this._fallbackCard.render();
        }
        else {
            renderedCard = _super.prototype.render.call(this);
            if (renderedCard) {
                renderedCard.classList.add(this.hostConfig.makeCssClassName("ac-adaptiveCard"));
                renderedCard.tabIndex = 0;
                if (!Utils.isNullOrEmpty(this.speak)) {
                    renderedCard.setAttribute("aria-label", this.speak);
                }
            }
        }
        if (target) {
            target.appendChild(renderedCard);
            this.updateLayout();
        }
        return renderedCard;
    };
    AdaptiveCard.prototype.updateLayout = function (processChildren) {
        if (processChildren === void 0) { processChildren = true; }
        _super.prototype.updateLayout.call(this, processChildren);
        if (AdaptiveCard.useAdvancedCardBottomTruncation && this.isRendered()) {
            var card = this.renderedElement;
            var padding = this.hostConfig.getEffectiveSpacing(Enums.Spacing.Default);
            this['handleOverflow'](card.offsetHeight - padding);
        }
    };
    AdaptiveCard.prototype.shouldFallback = function () {
        return _super.prototype.shouldFallback.call(this) || !this.isVersionSupported();
    };
    Object.defineProperty(AdaptiveCard.prototype, "hasVisibleSeparator", {
        get: function () {
            return false;
        },
        enumerable: true,
        configurable: true
    });
    AdaptiveCard.currentVersion = new HostConfig.Version(1, 2);
    AdaptiveCard.useAdvancedTextBlockTruncation = true;
    AdaptiveCard.useAdvancedCardBottomTruncation = false;
    AdaptiveCard.useMarkdownInRadioButtonAndCheckbox = true;
    AdaptiveCard.allowMarkForTextHighlighting = false;
    AdaptiveCard.alwaysBleedSeparators = false;
    AdaptiveCard.enableFullJsonRoundTrip = false;
    AdaptiveCard.useBuiltInInputValidation = true;
    AdaptiveCard.displayInputValidationErrors = true;
    AdaptiveCard.elementTypeRegistry = new ElementTypeRegistry();
    AdaptiveCard.actionTypeRegistry = new ActionTypeRegistry();
    AdaptiveCard.onAnchorClicked = null;
    AdaptiveCard.onExecuteAction = null;
    AdaptiveCard.onElementVisibilityChanged = null;
    AdaptiveCard.onImageLoaded = null;
    AdaptiveCard.onInlineCardExpanded = null;
    AdaptiveCard.onInputValueChanged = null;
    AdaptiveCard.onParseElement = null;
    AdaptiveCard.onParseAction = null;
    AdaptiveCard.onParseError = null;
    AdaptiveCard.onProcessMarkdown = null;
    return AdaptiveCard;
}(ContainerWithActions));
exports.AdaptiveCard = AdaptiveCard;
var InlineAdaptiveCard = /** @class */ (function (_super) {
    __extends(InlineAdaptiveCard, _super);
    function InlineAdaptiveCard() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.suppressStyle = false;
        return _this;
    }
    InlineAdaptiveCard.prototype.getDefaultPadding = function () {
        return new Shared.PaddingDefinition(this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding, this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding);
    };
    Object.defineProperty(InlineAdaptiveCard.prototype, "bypassVersionCheck", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InlineAdaptiveCard.prototype, "defaultStyle", {
        get: function () {
            if (this.suppressStyle) {
                return Enums.ContainerStyle.Default;
            }
            else {
                return this.hostConfig.actions.showCard.style ? this.hostConfig.actions.showCard.style : Enums.ContainerStyle.Emphasis;
            }
        },
        enumerable: true,
        configurable: true
    });
    InlineAdaptiveCard.prototype.render = function (target) {
        var renderedCard = _super.prototype.render.call(this, target);
        renderedCard.setAttribute("aria-live", "polite");
        renderedCard.removeAttribute("tabindex");
        return renderedCard;
    };
    InlineAdaptiveCard.prototype.getForbiddenActionTypes = function () {
        return [ShowCardAction];
    };
    return InlineAdaptiveCard;
}(AdaptiveCard));
var defaultHostConfig = new HostConfig.HostConfig({
    supportsInteractivity: true,
    spacing: {
        small: 10,
        default: 20,
        medium: 30,
        large: 40,
        extraLarge: 50,
        padding: 20
    },
    separator: {
        lineThickness: 1,
        lineColor: "#EEEEEE"
    },
    fontTypes: {
        default: {
            fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            fontSizes: {
                small: 12,
                default: 14,
                medium: 17,
                large: 21,
                extraLarge: 26
            },
            fontWeights: {
                lighter: 200,
                default: 400,
                bolder: 600
            }
        },
        monospace: {
            fontFamily: "'Courier New', Courier, monospace",
            fontSizes: {
                small: 12,
                default: 14,
                medium: 17,
                large: 21,
                extraLarge: 26
            },
            fontWeights: {
                lighter: 200,
                default: 400,
                bolder: 600
            }
        }
    },
    imageSizes: {
        small: 40,
        medium: 80,
        large: 160
    },
    containerStyles: {
        default: {
            backgroundColor: "#FFFFFF",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#54a254",
                    subtle: "#DD54a254"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        emphasis: {
            backgroundColor: "#08000000",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#54a254",
                    subtle: "#DD54a254"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        accent: {
            backgroundColor: "#C7DEF9",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#54a254",
                    subtle: "#DD54a254"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        good: {
            backgroundColor: "#CCFFCC",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#54a254",
                    subtle: "#DD54a254"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        attention: {
            backgroundColor: "#FFC5B2",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#54a254",
                    subtle: "#DD54a254"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        warning: {
            backgroundColor: "#FFE2B2",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#54a254",
                    subtle: "#DD54a254"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        }
    },
    actions: {
        maxActions: 5,
        spacing: Enums.Spacing.Default,
        buttonSpacing: 10,
        showCard: {
            actionMode: Enums.ShowCardActionMode.Inline,
            inlineTopMargin: 16
        },
        actionsOrientation: Enums.Orientation.Horizontal,
        actionAlignment: Enums.ActionAlignment.Left
    },
    adaptiveCard: {
        allowCustomStyle: false
    },
    imageSet: {
        imageSize: Enums.Size.Medium,
        maxImageHeight: 100
    },
    factSet: {
        title: {
            color: Enums.TextColor.Default,
            size: Enums.TextSize.Default,
            isSubtle: false,
            weight: Enums.TextWeight.Bolder,
            wrap: true,
            maxWidth: 150,
        },
        value: {
            color: Enums.TextColor.Default,
            size: Enums.TextSize.Default,
            isSubtle: false,
            weight: Enums.TextWeight.Default,
            wrap: true,
        },
        spacing: 10
    }
});
//# sourceMappingURL=card-elements.js.map

/***/ }),

/***/ "../adaptivecards/lib/enums.js":
/*!*************************************!*\
  !*** ../adaptivecards/lib/enums.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
Object.defineProperty(exports, "__esModule", { value: true });
// Note the "weird" way these readonly fields are declared is to work around
// a breaking change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
// and adopt this syntax for all other static readonly fields.
var ActionStyle = /** @class */ (function () {
    function ActionStyle() {
    }
    ActionStyle.Default = "default";
    ActionStyle.Positive = "positive";
    ActionStyle.Destructive = "destructive";
    return ActionStyle;
}());
exports.ActionStyle = ActionStyle;
var Size;
(function (Size) {
    Size[Size["Auto"] = 0] = "Auto";
    Size[Size["Stretch"] = 1] = "Stretch";
    Size[Size["Small"] = 2] = "Small";
    Size[Size["Medium"] = 3] = "Medium";
    Size[Size["Large"] = 4] = "Large";
})(Size = exports.Size || (exports.Size = {}));
var SizeUnit;
(function (SizeUnit) {
    SizeUnit[SizeUnit["Weight"] = 0] = "Weight";
    SizeUnit[SizeUnit["Pixel"] = 1] = "Pixel";
})(SizeUnit = exports.SizeUnit || (exports.SizeUnit = {}));
var TextSize;
(function (TextSize) {
    TextSize[TextSize["Small"] = 0] = "Small";
    TextSize[TextSize["Default"] = 1] = "Default";
    TextSize[TextSize["Medium"] = 2] = "Medium";
    TextSize[TextSize["Large"] = 3] = "Large";
    TextSize[TextSize["ExtraLarge"] = 4] = "ExtraLarge";
})(TextSize = exports.TextSize || (exports.TextSize = {}));
var TextWeight;
(function (TextWeight) {
    TextWeight[TextWeight["Lighter"] = 0] = "Lighter";
    TextWeight[TextWeight["Default"] = 1] = "Default";
    TextWeight[TextWeight["Bolder"] = 2] = "Bolder";
})(TextWeight = exports.TextWeight || (exports.TextWeight = {}));
var FontType;
(function (FontType) {
    FontType[FontType["Default"] = 0] = "Default";
    FontType[FontType["Monospace"] = 1] = "Monospace";
})(FontType = exports.FontType || (exports.FontType = {}));
var Spacing;
(function (Spacing) {
    Spacing[Spacing["None"] = 0] = "None";
    Spacing[Spacing["Small"] = 1] = "Small";
    Spacing[Spacing["Default"] = 2] = "Default";
    Spacing[Spacing["Medium"] = 3] = "Medium";
    Spacing[Spacing["Large"] = 4] = "Large";
    Spacing[Spacing["ExtraLarge"] = 5] = "ExtraLarge";
    Spacing[Spacing["Padding"] = 6] = "Padding";
})(Spacing = exports.Spacing || (exports.Spacing = {}));
var TextColor;
(function (TextColor) {
    TextColor[TextColor["Default"] = 0] = "Default";
    TextColor[TextColor["Dark"] = 1] = "Dark";
    TextColor[TextColor["Light"] = 2] = "Light";
    TextColor[TextColor["Accent"] = 3] = "Accent";
    TextColor[TextColor["Good"] = 4] = "Good";
    TextColor[TextColor["Warning"] = 5] = "Warning";
    TextColor[TextColor["Attention"] = 6] = "Attention";
})(TextColor = exports.TextColor || (exports.TextColor = {}));
var HorizontalAlignment;
(function (HorizontalAlignment) {
    HorizontalAlignment[HorizontalAlignment["Left"] = 0] = "Left";
    HorizontalAlignment[HorizontalAlignment["Center"] = 1] = "Center";
    HorizontalAlignment[HorizontalAlignment["Right"] = 2] = "Right";
})(HorizontalAlignment = exports.HorizontalAlignment || (exports.HorizontalAlignment = {}));
var VerticalAlignment;
(function (VerticalAlignment) {
    VerticalAlignment[VerticalAlignment["Top"] = 0] = "Top";
    VerticalAlignment[VerticalAlignment["Center"] = 1] = "Center";
    VerticalAlignment[VerticalAlignment["Bottom"] = 2] = "Bottom";
})(VerticalAlignment = exports.VerticalAlignment || (exports.VerticalAlignment = {}));
var ActionAlignment;
(function (ActionAlignment) {
    ActionAlignment[ActionAlignment["Left"] = 0] = "Left";
    ActionAlignment[ActionAlignment["Center"] = 1] = "Center";
    ActionAlignment[ActionAlignment["Right"] = 2] = "Right";
    ActionAlignment[ActionAlignment["Stretch"] = 3] = "Stretch";
})(ActionAlignment = exports.ActionAlignment || (exports.ActionAlignment = {}));
var ImageStyle;
(function (ImageStyle) {
    ImageStyle[ImageStyle["Default"] = 0] = "Default";
    ImageStyle[ImageStyle["Person"] = 1] = "Person";
})(ImageStyle = exports.ImageStyle || (exports.ImageStyle = {}));
var ShowCardActionMode;
(function (ShowCardActionMode) {
    ShowCardActionMode[ShowCardActionMode["Inline"] = 0] = "Inline";
    ShowCardActionMode[ShowCardActionMode["Popup"] = 1] = "Popup";
})(ShowCardActionMode = exports.ShowCardActionMode || (exports.ShowCardActionMode = {}));
var Orientation;
(function (Orientation) {
    Orientation[Orientation["Horizontal"] = 0] = "Horizontal";
    Orientation[Orientation["Vertical"] = 1] = "Vertical";
})(Orientation = exports.Orientation || (exports.Orientation = {}));
var FillMode;
(function (FillMode) {
    FillMode[FillMode["Cover"] = 0] = "Cover";
    FillMode[FillMode["RepeatHorizontally"] = 1] = "RepeatHorizontally";
    FillMode[FillMode["RepeatVertically"] = 2] = "RepeatVertically";
    FillMode[FillMode["Repeat"] = 3] = "Repeat";
})(FillMode = exports.FillMode || (exports.FillMode = {}));
var ActionIconPlacement;
(function (ActionIconPlacement) {
    ActionIconPlacement[ActionIconPlacement["LeftOfTitle"] = 0] = "LeftOfTitle";
    ActionIconPlacement[ActionIconPlacement["AboveTitle"] = 1] = "AboveTitle";
})(ActionIconPlacement = exports.ActionIconPlacement || (exports.ActionIconPlacement = {}));
var InputTextStyle;
(function (InputTextStyle) {
    InputTextStyle[InputTextStyle["Text"] = 0] = "Text";
    InputTextStyle[InputTextStyle["Tel"] = 1] = "Tel";
    InputTextStyle[InputTextStyle["Url"] = 2] = "Url";
    InputTextStyle[InputTextStyle["Email"] = 3] = "Email";
})(InputTextStyle = exports.InputTextStyle || (exports.InputTextStyle = {}));
var InputValidationNecessity;
(function (InputValidationNecessity) {
    InputValidationNecessity[InputValidationNecessity["Optional"] = 0] = "Optional";
    InputValidationNecessity[InputValidationNecessity["Required"] = 1] = "Required";
    InputValidationNecessity[InputValidationNecessity["RequiredWithVisualCue"] = 2] = "RequiredWithVisualCue";
})(InputValidationNecessity = exports.InputValidationNecessity || (exports.InputValidationNecessity = {}));
/*
    This should really be a string enum, e.g.

        export enum ContainerStyle {
            Default = "default",
            Emphasis = "emphasis"
        }

    However, some hosts do not use a version of TypeScript
    recent enough to understand string enums. This is
    a compatible construct that does not require using
    a more recent version of TypeScript.

    Also note the "weird" way these readonly fields are declared is to work around
    a breaking change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE
    and adopt this syntax for all other static readonly fields.
*/
var ContainerStyle = /** @class */ (function () {
    function ContainerStyle() {
    }
    ContainerStyle.Default = "default";
    ContainerStyle.Emphasis = "emphasis";
    ContainerStyle.Accent = "accent";
    ContainerStyle.Good = "good";
    ContainerStyle.Attention = "attention";
    ContainerStyle.Warning = "warning";
    return ContainerStyle;
}());
exports.ContainerStyle = ContainerStyle;
var ValidationError;
(function (ValidationError) {
    ValidationError[ValidationError["Hint"] = 0] = "Hint";
    ValidationError[ValidationError["ActionTypeNotAllowed"] = 1] = "ActionTypeNotAllowed";
    ValidationError[ValidationError["CollectionCantBeEmpty"] = 2] = "CollectionCantBeEmpty";
    ValidationError[ValidationError["Deprecated"] = 3] = "Deprecated";
    ValidationError[ValidationError["ElementTypeNotAllowed"] = 4] = "ElementTypeNotAllowed";
    ValidationError[ValidationError["InteractivityNotAllowed"] = 5] = "InteractivityNotAllowed";
    ValidationError[ValidationError["InvalidPropertyValue"] = 6] = "InvalidPropertyValue";
    ValidationError[ValidationError["MissingCardType"] = 7] = "MissingCardType";
    ValidationError[ValidationError["PropertyCantBeNull"] = 8] = "PropertyCantBeNull";
    ValidationError[ValidationError["TooManyActions"] = 9] = "TooManyActions";
    ValidationError[ValidationError["UnknownActionType"] = 10] = "UnknownActionType";
    ValidationError[ValidationError["UnknownElementType"] = 11] = "UnknownElementType";
    ValidationError[ValidationError["UnsupportedCardVersion"] = 12] = "UnsupportedCardVersion";
    ValidationError[ValidationError["DuplicateId"] = 13] = "DuplicateId";
})(ValidationError = exports.ValidationError || (exports.ValidationError = {}));
var ContainerFitStatus;
(function (ContainerFitStatus) {
    ContainerFitStatus[ContainerFitStatus["FullyInContainer"] = 0] = "FullyInContainer";
    ContainerFitStatus[ContainerFitStatus["Overflowing"] = 1] = "Overflowing";
    ContainerFitStatus[ContainerFitStatus["FullyOutOfContainer"] = 2] = "FullyOutOfContainer";
})(ContainerFitStatus = exports.ContainerFitStatus || (exports.ContainerFitStatus = {}));
//# sourceMappingURL=enums.js.map

/***/ }),

/***/ "../adaptivecards/lib/host-config.js":
/*!*******************************************!*\
  !*** ../adaptivecards/lib/host-config.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Enums = __webpack_require__(/*! ./enums */ "../adaptivecards/lib/enums.js");
var Utils = __webpack_require__(/*! ./utils */ "../adaptivecards/lib/utils.js");
var Shared = __webpack_require__(/*! ./shared */ "../adaptivecards/lib/shared.js");
var ColorDefinition = /** @class */ (function () {
    function ColorDefinition(defaultColor, subtleColor) {
        this.default = "#000000";
        this.subtle = "#666666";
        if (defaultColor) {
            this.default = defaultColor;
        }
        if (subtleColor) {
            this.subtle = subtleColor;
        }
    }
    ColorDefinition.prototype.parse = function (obj) {
        if (obj) {
            this.default = obj["default"] || this.default;
            this.subtle = obj["subtle"] || this.subtle;
        }
    };
    return ColorDefinition;
}());
exports.ColorDefinition = ColorDefinition;
var TextColorDefinition = /** @class */ (function (_super) {
    __extends(TextColorDefinition, _super);
    function TextColorDefinition() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.highlightColors = new ColorDefinition("#22000000", "#11000000");
        return _this;
    }
    TextColorDefinition.prototype.parse = function (obj) {
        _super.prototype.parse.call(this, obj);
        if (obj) {
            this.highlightColors.parse(obj["highlightColors"]);
        }
    };
    return TextColorDefinition;
}(ColorDefinition));
exports.TextColorDefinition = TextColorDefinition;
var AdaptiveCardConfig = /** @class */ (function () {
    function AdaptiveCardConfig(obj) {
        this.allowCustomStyle = false;
        if (obj) {
            this.allowCustomStyle = obj["allowCustomStyle"] || this.allowCustomStyle;
        }
    }
    return AdaptiveCardConfig;
}());
exports.AdaptiveCardConfig = AdaptiveCardConfig;
var ImageSetConfig = /** @class */ (function () {
    function ImageSetConfig(obj) {
        this.imageSize = Enums.Size.Medium;
        this.maxImageHeight = 100;
        if (obj) {
            this.imageSize = obj["imageSize"] != null ? obj["imageSize"] : this.imageSize;
            this.maxImageHeight = Utils.getNumberValue(obj["maxImageHeight"], 100);
        }
    }
    ImageSetConfig.prototype.toJSON = function () {
        return {
            imageSize: Enums.Size[this.imageSize],
            maxImageHeight: this.maxImageHeight
        };
    };
    return ImageSetConfig;
}());
exports.ImageSetConfig = ImageSetConfig;
var MediaConfig = /** @class */ (function () {
    function MediaConfig(obj) {
        this.allowInlinePlayback = true;
        if (obj) {
            this.defaultPoster = obj["defaultPoster"];
            this.allowInlinePlayback = obj["allowInlinePlayback"] || this.allowInlinePlayback;
        }
    }
    MediaConfig.prototype.toJSON = function () {
        return {
            defaultPoster: this.defaultPoster,
            allowInlinePlayback: this.allowInlinePlayback
        };
    };
    return MediaConfig;
}());
exports.MediaConfig = MediaConfig;
var FactTextDefinition = /** @class */ (function () {
    function FactTextDefinition(obj) {
        this.size = Enums.TextSize.Default;
        this.color = Enums.TextColor.Default;
        this.isSubtle = false;
        this.weight = Enums.TextWeight.Default;
        this.wrap = true;
        if (obj) {
            this.size = Utils.parseHostConfigEnum(Enums.TextSize, obj["size"], Enums.TextSize.Default);
            this.color = Utils.parseHostConfigEnum(Enums.TextColor, obj["color"], Enums.TextColor.Default);
            this.isSubtle = obj["isSubtle"] || this.isSubtle;
            this.weight = Utils.parseHostConfigEnum(Enums.TextWeight, obj["weight"], this.getDefaultWeight());
            this.wrap = obj["wrap"] != null ? obj["wrap"] : this.wrap;
        }
    }
    ;
    FactTextDefinition.prototype.getDefaultWeight = function () {
        return Enums.TextWeight.Default;
    };
    FactTextDefinition.prototype.toJSON = function () {
        return {
            size: Enums.TextSize[this.size],
            color: Enums.TextColor[this.color],
            isSubtle: this.isSubtle,
            weight: Enums.TextWeight[this.weight],
            wrap: this.wrap
        };
    };
    return FactTextDefinition;
}());
exports.FactTextDefinition = FactTextDefinition;
var FactTitleDefinition = /** @class */ (function (_super) {
    __extends(FactTitleDefinition, _super);
    function FactTitleDefinition(obj) {
        var _this = _super.call(this, obj) || this;
        _this.maxWidth = 150;
        _this.weight = Enums.TextWeight.Bolder;
        if (obj) {
            _this.maxWidth = obj["maxWidth"] != null ? obj["maxWidth"] : _this.maxWidth;
            _this.weight = Utils.parseHostConfigEnum(Enums.TextWeight, obj["weight"], Enums.TextWeight.Bolder);
        }
        return _this;
    }
    FactTitleDefinition.prototype.getDefaultWeight = function () {
        return Enums.TextWeight.Bolder;
    };
    return FactTitleDefinition;
}(FactTextDefinition));
exports.FactTitleDefinition = FactTitleDefinition;
var FactSetConfig = /** @class */ (function () {
    function FactSetConfig(obj) {
        this.title = new FactTitleDefinition();
        this.value = new FactTextDefinition();
        this.spacing = 10;
        if (obj) {
            this.title = new FactTitleDefinition(obj["title"]);
            this.value = new FactTextDefinition(obj["value"]);
            this.spacing = obj.spacing && obj.spacing != null ? obj.spacing && obj.spacing : this.spacing;
        }
    }
    return FactSetConfig;
}());
exports.FactSetConfig = FactSetConfig;
var ShowCardActionConfig = /** @class */ (function () {
    function ShowCardActionConfig(obj) {
        this.actionMode = Enums.ShowCardActionMode.Inline;
        this.inlineTopMargin = 16;
        this.style = Enums.ContainerStyle.Emphasis;
        if (obj) {
            this.actionMode = Utils.parseHostConfigEnum(Enums.ShowCardActionMode, obj["actionMode"], Enums.ShowCardActionMode.Inline);
            this.inlineTopMargin = obj["inlineTopMargin"] != null ? obj["inlineTopMargin"] : this.inlineTopMargin;
            this.style = obj["style"] && typeof obj["style"] === "string" ? obj["style"] : Enums.ContainerStyle.Emphasis;
        }
    }
    ShowCardActionConfig.prototype.toJSON = function () {
        return {
            actionMode: Enums.ShowCardActionMode[this.actionMode],
            inlineTopMargin: this.inlineTopMargin,
            style: this.style
        };
    };
    return ShowCardActionConfig;
}());
exports.ShowCardActionConfig = ShowCardActionConfig;
var ActionsConfig = /** @class */ (function () {
    function ActionsConfig(obj) {
        this.maxActions = 5;
        this.spacing = Enums.Spacing.Default;
        this.buttonSpacing = 20;
        this.showCard = new ShowCardActionConfig();
        this.preExpandSingleShowCardAction = false;
        this.actionsOrientation = Enums.Orientation.Horizontal;
        this.actionAlignment = Enums.ActionAlignment.Left;
        this.iconPlacement = Enums.ActionIconPlacement.LeftOfTitle;
        this.allowTitleToWrap = false;
        this.iconSize = 24;
        if (obj) {
            this.maxActions = obj["maxActions"] != null ? obj["maxActions"] : this.maxActions;
            this.spacing = Utils.parseHostConfigEnum(Enums.Spacing, obj.spacing && obj.spacing, Enums.Spacing.Default);
            this.buttonSpacing = obj["buttonSpacing"] != null ? obj["buttonSpacing"] : this.buttonSpacing;
            this.showCard = new ShowCardActionConfig(obj["showCard"]);
            this.preExpandSingleShowCardAction = Utils.getBoolValue(obj["preExpandSingleShowCardAction"], false);
            this.actionsOrientation = Utils.parseHostConfigEnum(Enums.Orientation, obj["actionsOrientation"], Enums.Orientation.Horizontal);
            this.actionAlignment = Utils.parseHostConfigEnum(Enums.ActionAlignment, obj["actionAlignment"], Enums.ActionAlignment.Left);
            this.iconPlacement = Utils.parseHostConfigEnum(Enums.ActionIconPlacement, obj["iconPlacement"], Enums.ActionIconPlacement.LeftOfTitle);
            this.allowTitleToWrap = obj["allowTitleToWrap"] != null ? obj["allowTitleToWrap"] : this.allowTitleToWrap;
            try {
                var sizeAndUnit = Shared.SizeAndUnit.parse(obj["iconSize"]);
                if (sizeAndUnit.unit == Enums.SizeUnit.Pixel) {
                    this.iconSize = sizeAndUnit.physicalSize;
                }
            }
            catch (e) {
                // Swallow this, keep default icon size
            }
        }
    }
    ActionsConfig.prototype.toJSON = function () {
        return {
            maxActions: this.maxActions,
            spacing: Enums.Spacing[this.spacing],
            buttonSpacing: this.buttonSpacing,
            showCard: this.showCard,
            preExpandSingleShowCardAction: this.preExpandSingleShowCardAction,
            actionsOrientation: Enums.Orientation[this.actionsOrientation],
            actionAlignment: Enums.ActionAlignment[this.actionAlignment]
        };
    };
    return ActionsConfig;
}());
exports.ActionsConfig = ActionsConfig;
var ColorSetDefinition = /** @class */ (function () {
    function ColorSetDefinition(obj) {
        this.default = new TextColorDefinition();
        this.dark = new TextColorDefinition();
        this.light = new TextColorDefinition();
        this.accent = new TextColorDefinition();
        this.good = new TextColorDefinition();
        this.warning = new TextColorDefinition();
        this.attention = new TextColorDefinition();
        this.parse(obj);
    }
    ColorSetDefinition.prototype.parseSingleColor = function (obj, propertyName) {
        if (obj) {
            this[propertyName].parse(obj[propertyName]);
        }
    };
    ColorSetDefinition.prototype.parse = function (obj) {
        if (obj) {
            this.parseSingleColor(obj, "default");
            this.parseSingleColor(obj, "dark");
            this.parseSingleColor(obj, "light");
            this.parseSingleColor(obj, "accent");
            this.parseSingleColor(obj, "good");
            this.parseSingleColor(obj, "warning");
            this.parseSingleColor(obj, "attention");
        }
    };
    return ColorSetDefinition;
}());
exports.ColorSetDefinition = ColorSetDefinition;
var ContainerStyleDefinition = /** @class */ (function () {
    function ContainerStyleDefinition(obj) {
        this.foregroundColors = new ColorSetDefinition({
            "default": { default: "#333333", subtle: "#EE333333" },
            "dark": { default: "#000000", subtle: "#66000000" },
            "light": { default: "#FFFFFF", subtle: "#33000000" },
            "accent": { default: "#2E89FC", subtle: "#882E89FC" },
            "good": { default: "#54A254", subtle: "#DD54A254" },
            "warning": { default: "#E69500", subtle: "#DDE69500" },
            "attention": { default: "#CC3300", subtle: "#DDCC3300" }
        });
        this.parse(obj);
    }
    ContainerStyleDefinition.prototype.parse = function (obj) {
        if (obj) {
            this.backgroundColor = obj["backgroundColor"];
            this.foregroundColors.parse(obj["foregroundColors"]);
            this.highlightBackgroundColor = obj["highlightBackgroundColor"];
            this.highlightForegroundColor = obj["highlightForegroundColor"];
        }
    };
    Object.defineProperty(ContainerStyleDefinition.prototype, "isBuiltIn", {
        get: function () {
            return false;
        },
        enumerable: true,
        configurable: true
    });
    return ContainerStyleDefinition;
}());
exports.ContainerStyleDefinition = ContainerStyleDefinition;
var BuiltInContainerStyleDefinition = /** @class */ (function (_super) {
    __extends(BuiltInContainerStyleDefinition, _super);
    function BuiltInContainerStyleDefinition() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(BuiltInContainerStyleDefinition.prototype, "isBuiltIn", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    return BuiltInContainerStyleDefinition;
}(ContainerStyleDefinition));
var ContainerStyleSet = /** @class */ (function () {
    function ContainerStyleSet(obj) {
        this._allStyles = {};
        this._allStyles[Enums.ContainerStyle.Default] = new BuiltInContainerStyleDefinition();
        this._allStyles[Enums.ContainerStyle.Emphasis] = new BuiltInContainerStyleDefinition();
        this._allStyles[Enums.ContainerStyle.Accent] = new BuiltInContainerStyleDefinition();
        this._allStyles[Enums.ContainerStyle.Good] = new BuiltInContainerStyleDefinition();
        this._allStyles[Enums.ContainerStyle.Attention] = new BuiltInContainerStyleDefinition();
        this._allStyles[Enums.ContainerStyle.Warning] = new BuiltInContainerStyleDefinition();
        if (obj) {
            this._allStyles[Enums.ContainerStyle.Default].parse(obj[Enums.ContainerStyle.Default]);
            this._allStyles[Enums.ContainerStyle.Emphasis].parse(obj[Enums.ContainerStyle.Emphasis]);
            this._allStyles[Enums.ContainerStyle.Accent].parse(obj[Enums.ContainerStyle.Accent]);
            this._allStyles[Enums.ContainerStyle.Good].parse(obj[Enums.ContainerStyle.Good]);
            this._allStyles[Enums.ContainerStyle.Attention].parse(obj[Enums.ContainerStyle.Attention]);
            this._allStyles[Enums.ContainerStyle.Warning].parse(obj[Enums.ContainerStyle.Warning]);
            var customStyleArray = obj["customStyles"];
            if (customStyleArray && Array.isArray(customStyleArray)) {
                for (var _i = 0, customStyleArray_1 = customStyleArray; _i < customStyleArray_1.length; _i++) {
                    var customStyle = customStyleArray_1[_i];
                    if (customStyle) {
                        var styleName = customStyle["name"];
                        if (styleName && typeof styleName === "string") {
                            if (this._allStyles.hasOwnProperty(styleName)) {
                                this._allStyles[styleName].parse(customStyle["style"]);
                            }
                            else {
                                this._allStyles[styleName] = new ContainerStyleDefinition(customStyle["style"]);
                            }
                        }
                    }
                }
            }
        }
    }
    ContainerStyleSet.prototype.toJSON = function () {
        var _this = this;
        var customStyleArray = [];
        Object.keys(this._allStyles).forEach(function (key) {
            if (!_this._allStyles[key].isBuiltIn) {
                customStyleArray.push({
                    name: key,
                    style: _this._allStyles[key]
                });
            }
        });
        var result = {
            default: this.default,
            emphasis: this.emphasis
        };
        if (customStyleArray.length > 0) {
            result.customStyles = customStyleArray;
        }
        return result;
    };
    ContainerStyleSet.prototype.getStyleByName = function (name, defaultValue) {
        if (defaultValue === void 0) { defaultValue = null; }
        return this._allStyles.hasOwnProperty(name) ? this._allStyles[name] : defaultValue;
    };
    Object.defineProperty(ContainerStyleSet.prototype, "default", {
        get: function () {
            return this._allStyles[Enums.ContainerStyle.Default];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ContainerStyleSet.prototype, "emphasis", {
        get: function () {
            return this._allStyles[Enums.ContainerStyle.Emphasis];
        },
        enumerable: true,
        configurable: true
    });
    return ContainerStyleSet;
}());
exports.ContainerStyleSet = ContainerStyleSet;
var Version = /** @class */ (function () {
    function Version(major, minor, label) {
        if (major === void 0) { major = 1; }
        if (minor === void 0) { minor = 1; }
        this._isValid = true;
        this._major = major;
        this._minor = minor;
        this._label = label;
    }
    Version.parse = function (versionString, errors) {
        if (!versionString) {
            return null;
        }
        var result = new Version();
        result._versionString = versionString;
        var regEx = /(\d+).(\d+)/gi;
        var matches = regEx.exec(versionString);
        if (matches != null && matches.length == 3) {
            result._major = parseInt(matches[1]);
            result._minor = parseInt(matches[2]);
        }
        else {
            result._isValid = false;
        }
        if (!result._isValid && errors) {
            errors.push({
                error: Enums.ValidationError.InvalidPropertyValue,
                message: "Invalid version string: " + result._versionString
            });
        }
        return result;
    };
    Version.prototype.toString = function () {
        return !this._isValid ? this._versionString : this._major + "." + this._minor;
    };
    Version.prototype.compareTo = function (otherVersion) {
        if (!this.isValid || !otherVersion.isValid) {
            throw new Error("Cannot compare invalid version.");
        }
        if (this.major > otherVersion.major) {
            return 1;
        }
        else if (this.major < otherVersion.major) {
            return -1;
        }
        else if (this.minor > otherVersion.minor) {
            return 1;
        }
        else if (this.minor < otherVersion.minor) {
            return -1;
        }
        return 0;
    };
    Object.defineProperty(Version.prototype, "label", {
        get: function () {
            return this._label ? this._label : this.toString();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Version.prototype, "major", {
        get: function () {
            return this._major;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Version.prototype, "minor", {
        get: function () {
            return this._minor;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Version.prototype, "isValid", {
        get: function () {
            return this._isValid;
        },
        enumerable: true,
        configurable: true
    });
    return Version;
}());
exports.Version = Version;
var HostCapabilities = /** @class */ (function () {
    function HostCapabilities() {
        this.capabilities = null;
    }
    HostCapabilities.prototype.setCapability = function (name, version) {
        if (!this.capabilities) {
            this.capabilities = {};
        }
        this.capabilities[name] = version;
    };
    HostCapabilities.prototype.parse = function (json, errors) {
        if (json) {
            for (var name_1 in json) {
                var jsonVersion = json[name_1];
                if (typeof jsonVersion === "string") {
                    if (jsonVersion == "*") {
                        this.setCapability(name_1, "*");
                    }
                    else {
                        var version = Version.parse(jsonVersion, errors);
                        if (version.isValid) {
                            this.setCapability(name_1, version);
                        }
                    }
                }
            }
        }
    };
    HostCapabilities.prototype.hasCapability = function (name, version) {
        if (this.capabilities && this.capabilities.hasOwnProperty(name)) {
            if (version == "*" || this.capabilities[name] == "*") {
                return true;
            }
            return version.compareTo(this.capabilities[name]) <= 0;
        }
        return false;
    };
    HostCapabilities.prototype.areAllMet = function (hostCapabilities) {
        if (this.capabilities) {
            for (var capabilityName in this.capabilities) {
                if (!hostCapabilities.hasCapability(capabilityName, this.capabilities[capabilityName])) {
                    return false;
                }
            }
        }
        return true;
    };
    return HostCapabilities;
}());
exports.HostCapabilities = HostCapabilities;
var FontTypeDefinition = /** @class */ (function () {
    function FontTypeDefinition(fontFamily) {
        this.fontFamily = "Segoe UI,Segoe,Segoe WP,Helvetica Neue,Helvetica,sans-serif";
        this.fontSizes = {
            small: 12,
            default: 14,
            medium: 17,
            large: 21,
            extraLarge: 26
        };
        this.fontWeights = {
            lighter: 200,
            default: 400,
            bolder: 600
        };
        if (fontFamily) {
            this.fontFamily = fontFamily;
        }
    }
    FontTypeDefinition.prototype.parse = function (obj) {
        this.fontFamily = obj["fontFamily"] || this.fontFamily;
        this.fontSizes = {
            small: obj.fontSizes && obj.fontSizes["small"] || this.fontSizes.small,
            default: obj.fontSizes && obj.fontSizes["default"] || this.fontSizes.default,
            medium: obj.fontSizes && obj.fontSizes["medium"] || this.fontSizes.medium,
            large: obj.fontSizes && obj.fontSizes["large"] || this.fontSizes.large,
            extraLarge: obj.fontSizes && obj.fontSizes["extraLarge"] || this.fontSizes.extraLarge
        };
        this.fontWeights = {
            lighter: obj.fontWeights && obj.fontWeights["lighter"] || this.fontWeights.lighter,
            default: obj.fontWeights && obj.fontWeights["default"] || this.fontWeights.default,
            bolder: obj.fontWeights && obj.fontWeights["bolder"] || this.fontWeights.bolder
        };
    };
    FontTypeDefinition.monospace = new FontTypeDefinition("'Courier New', Courier, monospace");
    return FontTypeDefinition;
}());
exports.FontTypeDefinition = FontTypeDefinition;
var FontTypeSet = /** @class */ (function () {
    function FontTypeSet(obj) {
        this.default = new FontTypeDefinition();
        this.monospace = new FontTypeDefinition("'Courier New', Courier, monospace");
        if (obj) {
            this.default.parse(obj["default"]);
            this.monospace.parse(obj["monospace"]);
        }
    }
    FontTypeSet.prototype.getStyleDefinition = function (style) {
        switch (style) {
            case Enums.FontType.Monospace:
                return this.monospace;
            case Enums.FontType.Default:
            default:
                return this.default;
        }
    };
    return FontTypeSet;
}());
exports.FontTypeSet = FontTypeSet;
var HostConfig = /** @class */ (function () {
    function HostConfig(obj) {
        this.hostCapabilities = new HostCapabilities();
        this.choiceSetInputValueSeparator = ",";
        this.supportsInteractivity = true;
        this.fontTypes = null;
        this.spacing = {
            small: 3,
            default: 8,
            medium: 20,
            large: 30,
            extraLarge: 40,
            padding: 15
        };
        this.separator = {
            lineThickness: 1,
            lineColor: "#EEEEEE"
        };
        this.imageSizes = {
            small: 40,
            medium: 80,
            large: 160
        };
        this.containerStyles = new ContainerStyleSet();
        this.actions = new ActionsConfig();
        this.adaptiveCard = new AdaptiveCardConfig();
        this.imageSet = new ImageSetConfig();
        this.media = new MediaConfig();
        this.factSet = new FactSetConfig();
        this.cssClassNamePrefix = null;
        this.alwaysAllowBleed = false;
        if (obj) {
            if (typeof obj === "string" || obj instanceof String) {
                obj = JSON.parse(obj);
            }
            this.choiceSetInputValueSeparator = (obj && typeof obj["choiceSetInputValueSeparator"] === "string") ? obj["choiceSetInputValueSeparator"] : this.choiceSetInputValueSeparator;
            this.supportsInteractivity = (obj && typeof obj["supportsInteractivity"] === "boolean") ? obj["supportsInteractivity"] : this.supportsInteractivity;
            this._legacyFontType = new FontTypeDefinition();
            this._legacyFontType.parse(obj);
            if (obj.fontTypes) {
                this.fontTypes = new FontTypeSet(obj.fontTypes);
            }
            if (obj.lineHeights) {
                this.lineHeights = {
                    small: obj.lineHeights["small"],
                    default: obj.lineHeights["default"],
                    medium: obj.lineHeights["medium"],
                    large: obj.lineHeights["large"],
                    extraLarge: obj.lineHeights["extraLarge"]
                };
            }
            ;
            this.imageSizes = {
                small: obj.imageSizes && obj.imageSizes["small"] || this.imageSizes.small,
                medium: obj.imageSizes && obj.imageSizes["medium"] || this.imageSizes.medium,
                large: obj.imageSizes && obj.imageSizes["large"] || this.imageSizes.large,
            };
            this.containerStyles = new ContainerStyleSet(obj["containerStyles"]);
            this.spacing = {
                small: obj.spacing && obj.spacing["small"] || this.spacing.small,
                default: obj.spacing && obj.spacing["default"] || this.spacing.default,
                medium: obj.spacing && obj.spacing["medium"] || this.spacing.medium,
                large: obj.spacing && obj.spacing["large"] || this.spacing.large,
                extraLarge: obj.spacing && obj.spacing["extraLarge"] || this.spacing.extraLarge,
                padding: obj.spacing && obj.spacing["padding"] || this.spacing.padding
            };
            this.separator = {
                lineThickness: obj.separator && obj.separator["lineThickness"] || this.separator.lineThickness,
                lineColor: obj.separator && obj.separator["lineColor"] || this.separator.lineColor
            };
            this.actions = new ActionsConfig(obj.actions || this.actions);
            this.adaptiveCard = new AdaptiveCardConfig(obj.adaptiveCard || this.adaptiveCard);
            this.imageSet = new ImageSetConfig(obj["imageSet"]);
            this.factSet = new FactSetConfig(obj["factSet"]);
        }
    }
    HostConfig.prototype.getFontTypeDefinition = function (style) {
        if (this.fontTypes) {
            return this.fontTypes.getStyleDefinition(style);
        }
        else {
            return style == Enums.FontType.Monospace ? FontTypeDefinition.monospace : this._legacyFontType;
        }
    };
    HostConfig.prototype.getEffectiveSpacing = function (spacing) {
        switch (spacing) {
            case Enums.Spacing.Small:
                return this.spacing.small;
            case Enums.Spacing.Default:
                return this.spacing.default;
            case Enums.Spacing.Medium:
                return this.spacing.medium;
            case Enums.Spacing.Large:
                return this.spacing.large;
            case Enums.Spacing.ExtraLarge:
                return this.spacing.extraLarge;
            case Enums.Spacing.Padding:
                return this.spacing.padding;
            default:
                return 0;
        }
    };
    HostConfig.prototype.paddingDefinitionToSpacingDefinition = function (paddingDefinition) {
        return new Shared.SpacingDefinition(this.getEffectiveSpacing(paddingDefinition.top), this.getEffectiveSpacing(paddingDefinition.right), this.getEffectiveSpacing(paddingDefinition.bottom), this.getEffectiveSpacing(paddingDefinition.left));
    };
    HostConfig.prototype.makeCssClassNames = function () {
        var classNames = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            classNames[_i] = arguments[_i];
        }
        var result = [];
        for (var _a = 0, classNames_1 = classNames; _a < classNames_1.length; _a++) {
            var className = classNames_1[_a];
            result.push((this.cssClassNamePrefix ? this.cssClassNamePrefix + "-" : "") + className);
        }
        return result;
    };
    HostConfig.prototype.makeCssClassName = function () {
        var classNames = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            classNames[_i] = arguments[_i];
        }
        var result = this.makeCssClassNames.apply(this, classNames).join(" ");
        return result ? result : "";
    };
    Object.defineProperty(HostConfig.prototype, "fontFamily", {
        get: function () {
            return this._legacyFontType.fontFamily;
        },
        set: function (value) {
            this._legacyFontType.fontFamily = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HostConfig.prototype, "fontSizes", {
        get: function () {
            return this._legacyFontType.fontSizes;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HostConfig.prototype, "fontWeights", {
        get: function () {
            return this._legacyFontType.fontWeights;
        },
        enumerable: true,
        configurable: true
    });
    return HostConfig;
}());
exports.HostConfig = HostConfig;
//# sourceMappingURL=host-config.js.map

/***/ }),

/***/ "../adaptivecards/lib/shared.js":
/*!**************************************!*\
  !*** ../adaptivecards/lib/shared.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Enums = __webpack_require__(/*! ./enums */ "../adaptivecards/lib/enums.js");
exports.ContentTypes = {
    applicationJson: "application/json",
    applicationXWwwFormUrlencoded: "application/x-www-form-urlencoded"
};
var StringWithSubstitutions = /** @class */ (function () {
    function StringWithSubstitutions() {
        this._isProcessed = false;
        this._original = null;
        this._processed = null;
    }
    StringWithSubstitutions.prototype.getReferencedInputs = function (inputs, referencedInputs) {
        if (!referencedInputs) {
            throw new Error("The referencedInputs parameter cannot be null.");
        }
        for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {
            var input = inputs_1[_i];
            var matches = new RegExp("\\{{2}(" + input.id + ").value\\}{2}", "gi").exec(this._original);
            if (matches != null) {
                referencedInputs[input.id] = input;
            }
        }
    };
    StringWithSubstitutions.prototype.substituteInputValues = function (inputs, contentType) {
        this._processed = this._original;
        var regEx = /\{{2}([a-z0-9_$@]+).value\}{2}/gi;
        var matches;
        while ((matches = regEx.exec(this._original)) != null) {
            var matchedInput = null;
            for (var _i = 0, _a = Object.keys(inputs); _i < _a.length; _i++) {
                var key = _a[_i];
                if (key.toLowerCase() == matches[1].toLowerCase()) {
                    matchedInput = inputs[key];
                    break;
                }
            }
            if (matchedInput) {
                var valueForReplace = "";
                if (matchedInput.value) {
                    valueForReplace = matchedInput.value;
                }
                if (contentType === exports.ContentTypes.applicationJson) {
                    valueForReplace = JSON.stringify(valueForReplace);
                    valueForReplace = valueForReplace.slice(1, -1);
                }
                else if (contentType === exports.ContentTypes.applicationXWwwFormUrlencoded) {
                    valueForReplace = encodeURIComponent(valueForReplace);
                }
                this._processed = this._processed.replace(matches[0], valueForReplace);
            }
        }
        ;
        this._isProcessed = true;
    };
    StringWithSubstitutions.prototype.getOriginal = function () {
        return this._original;
    };
    StringWithSubstitutions.prototype.get = function () {
        if (!this._isProcessed) {
            return this._original;
        }
        else {
            return this._processed;
        }
    };
    StringWithSubstitutions.prototype.set = function (value) {
        this._original = value;
        this._isProcessed = false;
    };
    return StringWithSubstitutions;
}());
exports.StringWithSubstitutions = StringWithSubstitutions;
var SpacingDefinition = /** @class */ (function () {
    function SpacingDefinition(top, right, bottom, left) {
        if (top === void 0) { top = 0; }
        if (right === void 0) { right = 0; }
        if (bottom === void 0) { bottom = 0; }
        if (left === void 0) { left = 0; }
        this.left = 0;
        this.top = 0;
        this.right = 0;
        this.bottom = 0;
        this.top = top;
        this.right = right;
        this.bottom = bottom;
        this.left = left;
    }
    return SpacingDefinition;
}());
exports.SpacingDefinition = SpacingDefinition;
var PaddingDefinition = /** @class */ (function () {
    function PaddingDefinition(top, right, bottom, left) {
        if (top === void 0) { top = Enums.Spacing.None; }
        if (right === void 0) { right = Enums.Spacing.None; }
        if (bottom === void 0) { bottom = Enums.Spacing.None; }
        if (left === void 0) { left = Enums.Spacing.None; }
        this.top = Enums.Spacing.None;
        this.right = Enums.Spacing.None;
        this.bottom = Enums.Spacing.None;
        this.left = Enums.Spacing.None;
        this.top = top;
        this.right = right;
        this.bottom = bottom;
        this.left = left;
    }
    return PaddingDefinition;
}());
exports.PaddingDefinition = PaddingDefinition;
var SizeAndUnit = /** @class */ (function () {
    function SizeAndUnit(physicalSize, unit) {
        this.physicalSize = physicalSize;
        this.unit = unit;
    }
    SizeAndUnit.parse = function (input, requireUnitSpecifier) {
        if (requireUnitSpecifier === void 0) { requireUnitSpecifier = false; }
        var result = new SizeAndUnit(0, Enums.SizeUnit.Weight);
        if (typeof input === "number") {
            result.physicalSize = input;
            return result;
        }
        else if (typeof input === "string") {
            var regExp = /^([0-9]+)(px|\*)?$/g;
            var matches = regExp.exec(input);
            var expectedMatchCount = requireUnitSpecifier ? 3 : 2;
            if (matches && matches.length >= expectedMatchCount) {
                result.physicalSize = parseInt(matches[1]);
                if (matches.length == 3) {
                    if (matches[2] == "px") {
                        result.unit = Enums.SizeUnit.Pixel;
                    }
                }
                return result;
            }
        }
        throw new Error("Invalid size: " + input);
    };
    return SizeAndUnit;
}());
exports.SizeAndUnit = SizeAndUnit;
/**
 * Fast UUID generator, RFC4122 version 4 compliant.
 * @author Jeff Ward (jcward.com).
 * @license MIT license
 * @link http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136
 **/
var UUID = /** @class */ (function () {
    function UUID() {
    }
    UUID.generate = function () {
        var d0 = Math.random() * 0xffffffff | 0;
        var d1 = Math.random() * 0xffffffff | 0;
        var d2 = Math.random() * 0xffffffff | 0;
        var d3 = Math.random() * 0xffffffff | 0;
        return UUID.lut[d0 & 0xff] + UUID.lut[d0 >> 8 & 0xff] + UUID.lut[d0 >> 16 & 0xff] + UUID.lut[d0 >> 24 & 0xff] + '-' +
            UUID.lut[d1 & 0xff] + UUID.lut[d1 >> 8 & 0xff] + '-' + UUID.lut[d1 >> 16 & 0x0f | 0x40] + UUID.lut[d1 >> 24 & 0xff] + '-' +
            UUID.lut[d2 & 0x3f | 0x80] + UUID.lut[d2 >> 8 & 0xff] + '-' + UUID.lut[d2 >> 16 & 0xff] + UUID.lut[d2 >> 24 & 0xff] +
            UUID.lut[d3 & 0xff] + UUID.lut[d3 >> 8 & 0xff] + UUID.lut[d3 >> 16 & 0xff] + UUID.lut[d3 >> 24 & 0xff];
    };
    UUID.initialize = function () {
        for (var i = 0; i < 256; i++) {
            UUID.lut[i] = (i < 16 ? '0' : '') + i.toString(16);
        }
    };
    UUID.lut = [];
    return UUID;
}());
exports.UUID = UUID;
UUID.initialize();
//# sourceMappingURL=shared.js.map

/***/ }),

/***/ "../adaptivecards/lib/text-formatters.js":
/*!***********************************************!*\
  !*** ../adaptivecards/lib/text-formatters.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var AbstractTextFormatter = /** @class */ (function () {
    function AbstractTextFormatter(regularExpression) {
        this._regularExpression = regularExpression;
    }
    AbstractTextFormatter.prototype.format = function (lang, input) {
        var matches;
        var result = input;
        while ((matches = this._regularExpression.exec(input)) != null) {
            result = result.replace(matches[0], this.internalFormat(lang, matches));
        }
        ;
        return result;
    };
    return AbstractTextFormatter;
}());
var DateFormatter = /** @class */ (function (_super) {
    __extends(DateFormatter, _super);
    function DateFormatter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DateFormatter.prototype.internalFormat = function (lang, matches) {
        var date = new Date(Date.parse(matches[1]));
        var format = matches[2] != undefined ? matches[2].toLowerCase() : "compact";
        if (format != "compact") {
            return date.toLocaleDateString(lang, { day: "numeric", weekday: format, month: format, year: "numeric" });
        }
        else {
            return date.toLocaleDateString();
        }
    };
    return DateFormatter;
}(AbstractTextFormatter));
var TimeFormatter = /** @class */ (function (_super) {
    __extends(TimeFormatter, _super);
    function TimeFormatter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TimeFormatter.prototype.internalFormat = function (lang, matches) {
        var date = new Date(Date.parse(matches[1]));
        return date.toLocaleTimeString(lang, { hour: 'numeric', minute: '2-digit' });
    };
    return TimeFormatter;
}(AbstractTextFormatter));
function formatText(lang, text) {
    var formatters = [
        new DateFormatter(/\{{2}DATE\((\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:Z|(?:(?:-|\+)\d{2}:\d{2})))(?:, ?(COMPACT|LONG|SHORT))?\)\}{2}/g),
        new TimeFormatter(/\{{2}TIME\((\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:Z|(?:(?:-|\+)\d{2}:\d{2})))\)\}{2}/g)
    ];
    var result = text;
    for (var i = 0; i < formatters.length; i++) {
        result = formatters[i].format(lang, result);
    }
    return result;
}
exports.formatText = formatText;
//# sourceMappingURL=text-formatters.js.map

/***/ }),

/***/ "../adaptivecards/lib/utils.js":
/*!*************************************!*\
  !*** ../adaptivecards/lib/utils.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Enums = __webpack_require__(/*! ./enums */ "../adaptivecards/lib/enums.js");
var Shared = __webpack_require__(/*! ./shared */ "../adaptivecards/lib/shared.js");
function generateUniqueId() {
    return "__ac-" + Shared.UUID.generate();
}
exports.generateUniqueId = generateUniqueId;
function isNullOrEmpty(value) {
    return value === undefined || value === null || value === "";
}
exports.isNullOrEmpty = isNullOrEmpty;
function appendChild(node, child) {
    if (child != null && child != undefined) {
        node.appendChild(child);
    }
}
exports.appendChild = appendChild;
function getStringValue(obj, defaultValue) {
    if (defaultValue === void 0) { defaultValue = undefined; }
    return typeof obj === "string" ? obj.toString() : defaultValue;
}
exports.getStringValue = getStringValue;
function getNumberValue(obj, defaultValue) {
    if (defaultValue === void 0) { defaultValue = undefined; }
    return typeof obj === "number" ? obj : defaultValue;
}
exports.getNumberValue = getNumberValue;
function getBoolValue(value, defaultValue) {
    if (typeof value === "boolean") {
        return value;
    }
    else if (typeof value === "string") {
        switch (value.toLowerCase()) {
            case "true":
                return true;
            case "false":
                return false;
            default:
                return defaultValue;
        }
    }
    return defaultValue;
}
exports.getBoolValue = getBoolValue;
function getEnumValue(targetEnum, name, defaultValue) {
    if (isNullOrEmpty(name)) {
        return defaultValue;
    }
    for (var key in targetEnum) {
        var isValueProperty = parseInt(key, 10) >= 0;
        if (isValueProperty) {
            var value = targetEnum[key];
            if (value && typeof value === "string") {
                if (value.toLowerCase() === name.toLowerCase()) {
                    return parseInt(key, 10);
                }
            }
        }
    }
    return defaultValue;
}
exports.getEnumValue = getEnumValue;
function setProperty(target, propertyName, propertyValue, defaultValue) {
    if (defaultValue === void 0) { defaultValue = undefined; }
    if (propertyValue === null || propertyValue === undefined || propertyValue === defaultValue) {
        delete target[propertyName];
    }
    else {
        target[propertyName] = propertyValue;
    }
}
exports.setProperty = setProperty;
function setNumberProperty(target, propertyName, propertyValue, defaultValue) {
    if (defaultValue === void 0) { defaultValue = undefined; }
    if (propertyValue === null || propertyValue === undefined || propertyValue === defaultValue || isNaN(propertyValue)) {
        delete target[propertyName];
    }
    else {
        target[propertyName] = propertyValue;
    }
}
exports.setNumberProperty = setNumberProperty;
function setEnumProperty(enumType, target, propertyName, propertyValue, defaultValue) {
    if (defaultValue === void 0) { defaultValue = undefined; }
    var targetValue = target[propertyName];
    var canDeleteTarget = targetValue == undefined ? true : enumType[targetValue] !== undefined;
    if (propertyValue == defaultValue) {
        if (canDeleteTarget) {
            delete target[propertyName];
        }
    }
    else {
        if (propertyValue == undefined) {
            if (canDeleteTarget) {
                delete target[propertyName];
            }
        }
        else {
            target[propertyName] = enumType[propertyValue];
        }
    }
}
exports.setEnumProperty = setEnumProperty;
function setArrayProperty(target, propertyName, propertyValue) {
    var items = [];
    if (propertyValue) {
        for (var _i = 0, propertyValue_1 = propertyValue; _i < propertyValue_1.length; _i++) {
            var item = propertyValue_1[_i];
            items.push(item.toJSON());
        }
    }
    if (items.length == 0) {
        if (target.hasOwnProperty(propertyName) && Array.isArray(target[propertyName])) {
            delete target[propertyName];
        }
    }
    else {
        setProperty(target, propertyName, items);
    }
}
exports.setArrayProperty = setArrayProperty;
function parseHostConfigEnum(targetEnum, value, defaultValue) {
    if (typeof value === "string") {
        return getEnumValue(targetEnum, value, defaultValue);
    }
    else if (typeof value === "number") {
        return value;
    }
    else {
        return defaultValue;
    }
}
exports.parseHostConfigEnum = parseHostConfigEnum;
function renderSeparation(hostConfig, separationDefinition, orientation) {
    if (separationDefinition.spacing > 0 || separationDefinition.lineThickness > 0) {
        var separator = document.createElement("div");
        separator.className = hostConfig.makeCssClassName("ac-" + (orientation == Enums.Orientation.Horizontal ? "horizontal" : "vertical") + "-separator");
        if (orientation == Enums.Orientation.Horizontal) {
            if (separationDefinition.lineThickness) {
                separator.style.paddingTop = (separationDefinition.spacing / 2) + "px";
                separator.style.marginBottom = (separationDefinition.spacing / 2) + "px";
                separator.style.borderBottom = separationDefinition.lineThickness + "px solid " + stringToCssColor(separationDefinition.lineColor);
            }
            else {
                separator.style.height = separationDefinition.spacing + "px";
            }
        }
        else {
            if (separationDefinition.lineThickness) {
                separator.style.paddingLeft = (separationDefinition.spacing / 2) + "px";
                separator.style.marginRight = (separationDefinition.spacing / 2) + "px";
                separator.style.borderRight = separationDefinition.lineThickness + "px solid " + stringToCssColor(separationDefinition.lineColor);
            }
            else {
                separator.style.width = separationDefinition.spacing + "px";
            }
        }
        separator.style.overflow = "hidden";
        return separator;
    }
    else {
        return null;
    }
}
exports.renderSeparation = renderSeparation;
function stringToCssColor(color) {
    var regEx = /#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})?/gi;
    var matches = regEx.exec(color);
    if (matches && matches[4]) {
        var a = parseInt(matches[1], 16) / 255;
        var r = parseInt(matches[2], 16);
        var g = parseInt(matches[3], 16);
        var b = parseInt(matches[4], 16);
        return "rgba(" + r + "," + g + "," + b + "," + a + ")";
    }
    else {
        return color;
    }
}
exports.stringToCssColor = stringToCssColor;
function truncate(element, maxHeight, lineHeight) {
    var fits = function () {
        // Allow a one pixel overflow to account for rounding differences
        // between browsers
        return maxHeight - element.scrollHeight >= -1.0;
    };
    if (fits())
        return;
    var fullText = element.innerHTML;
    var truncateAt = function (idx) {
        element.innerHTML = fullText.substring(0, idx) + '...';
    };
    var breakableIndices = findBreakableIndices(fullText);
    var lo = 0;
    var hi = breakableIndices.length;
    var bestBreakIdx = 0;
    // Do a binary search for the longest string that fits
    while (lo < hi) {
        var mid = Math.floor((lo + hi) / 2);
        truncateAt(breakableIndices[mid]);
        if (fits()) {
            bestBreakIdx = breakableIndices[mid];
            lo = mid + 1;
        }
        else {
            hi = mid;
        }
    }
    truncateAt(bestBreakIdx);
    // If we have extra room, try to expand the string letter by letter
    // (covers the case where we have to break in the middle of a long word)
    if (lineHeight && maxHeight - element.scrollHeight >= lineHeight - 1.0) {
        var idx = findNextCharacter(fullText, bestBreakIdx);
        while (idx < fullText.length) {
            truncateAt(idx);
            if (fits()) {
                bestBreakIdx = idx;
                idx = findNextCharacter(fullText, idx);
            }
            else {
                break;
            }
        }
        truncateAt(bestBreakIdx);
    }
}
exports.truncate = truncate;
function findBreakableIndices(html) {
    var results = [];
    var idx = findNextCharacter(html, -1);
    while (idx < html.length) {
        if (html[idx] == ' ') {
            results.push(idx);
        }
        idx = findNextCharacter(html, idx);
    }
    return results;
}
function findNextCharacter(html, currIdx) {
    currIdx += 1;
    // If we found the start of an HTML tag, keep advancing until we get
    // past it, so we don't end up truncating in the middle of the tag
    while (currIdx < html.length && html[currIdx] == '<') {
        while (currIdx < html.length && html[currIdx++] != '>')
            ;
    }
    return currIdx;
}
function getFitStatus(element, containerEnd) {
    var start = element.offsetTop;
    var end = start + element.clientHeight;
    if (end <= containerEnd) {
        return Enums.ContainerFitStatus.FullyInContainer;
    }
    else if (start < containerEnd) {
        return Enums.ContainerFitStatus.Overflowing;
    }
    else {
        return Enums.ContainerFitStatus.FullyOutOfContainer;
    }
}
exports.getFitStatus = getFitStatus;
//# sourceMappingURL=utils.js.map

/***/ }),

/***/ "./node_modules/clipboard/dist/clipboard.js":
/*!**************************************************!*\
  !*** ./node_modules/clipboard/dist/clipboard.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/*!
 * clipboard.js v2.0.1
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT © Zeno Rocha
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(true)
		module.exports = factory();
	else {}
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 3);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {
    if (true) {
        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(7)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else { var mod; }
})(this, function (module, _select) {
    'use strict';

    var _select2 = _interopRequireDefault(_select);

    function _interopRequireDefault(obj) {
        return obj && obj.__esModule ? obj : {
            default: obj
        };
    }

    var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
        return typeof obj;
    } : function (obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };

    function _classCallCheck(instance, Constructor) {
        if (!(instance instanceof Constructor)) {
            throw new TypeError("Cannot call a class as a function");
        }
    }

    var _createClass = function () {
        function defineProperties(target, props) {
            for (var i = 0; i < props.length; i++) {
                var descriptor = props[i];
                descriptor.enumerable = descriptor.enumerable || false;
                descriptor.configurable = true;
                if ("value" in descriptor) descriptor.writable = true;
                Object.defineProperty(target, descriptor.key, descriptor);
            }
        }

        return function (Constructor, protoProps, staticProps) {
            if (protoProps) defineProperties(Constructor.prototype, protoProps);
            if (staticProps) defineProperties(Constructor, staticProps);
            return Constructor;
        };
    }();

    var ClipboardAction = function () {
        /**
         * @param {Object} options
         */
        function ClipboardAction(options) {
            _classCallCheck(this, ClipboardAction);

            this.resolveOptions(options);
            this.initSelection();
        }

        /**
         * Defines base properties passed from constructor.
         * @param {Object} options
         */


        _createClass(ClipboardAction, [{
            key: 'resolveOptions',
            value: function resolveOptions() {
                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

                this.action = options.action;
                this.container = options.container;
                this.emitter = options.emitter;
                this.target = options.target;
                this.text = options.text;
                this.trigger = options.trigger;

                this.selectedText = '';
            }
        }, {
            key: 'initSelection',
            value: function initSelection() {
                if (this.text) {
                    this.selectFake();
                } else if (this.target) {
                    this.selectTarget();
                }
            }
        }, {
            key: 'selectFake',
            value: function selectFake() {
                var _this = this;

                var isRTL = document.documentElement.getAttribute('dir') == 'rtl';

                this.removeFake();

                this.fakeHandlerCallback = function () {
                    return _this.removeFake();
                };
                this.fakeHandler = this.container.addEventListener('click', this.fakeHandlerCallback) || true;

                this.fakeElem = document.createElement('textarea');
                // Prevent zooming on iOS
                this.fakeElem.style.fontSize = '12pt';
                // Reset box model
                this.fakeElem.style.border = '0';
                this.fakeElem.style.padding = '0';
                this.fakeElem.style.margin = '0';
                // Move element out of screen horizontally
                this.fakeElem.style.position = 'absolute';
                this.fakeElem.style[isRTL ? 'right' : 'left'] = '-9999px';
                // Move element to the same position vertically
                var yPosition = window.pageYOffset || document.documentElement.scrollTop;
                this.fakeElem.style.top = yPosition + 'px';

                this.fakeElem.setAttribute('readonly', '');
                this.fakeElem.value = this.text;

                this.container.appendChild(this.fakeElem);

                this.selectedText = (0, _select2.default)(this.fakeElem);
                this.copyText();
            }
        }, {
            key: 'removeFake',
            value: function removeFake() {
                if (this.fakeHandler) {
                    this.container.removeEventListener('click', this.fakeHandlerCallback);
                    this.fakeHandler = null;
                    this.fakeHandlerCallback = null;
                }

                if (this.fakeElem) {
                    this.container.removeChild(this.fakeElem);
                    this.fakeElem = null;
                }
            }
        }, {
            key: 'selectTarget',
            value: function selectTarget() {
                this.selectedText = (0, _select2.default)(this.target);
                this.copyText();
            }
        }, {
            key: 'copyText',
            value: function copyText() {
                var succeeded = void 0;

                try {
                    succeeded = document.execCommand(this.action);
                } catch (err) {
                    succeeded = false;
                }

                this.handleResult(succeeded);
            }
        }, {
            key: 'handleResult',
            value: function handleResult(succeeded) {
                this.emitter.emit(succeeded ? 'success' : 'error', {
                    action: this.action,
                    text: this.selectedText,
                    trigger: this.trigger,
                    clearSelection: this.clearSelection.bind(this)
                });
            }
        }, {
            key: 'clearSelection',
            value: function clearSelection() {
                if (this.trigger) {
                    this.trigger.focus();
                }

                window.getSelection().removeAllRanges();
            }
        }, {
            key: 'destroy',
            value: function destroy() {
                this.removeFake();
            }
        }, {
            key: 'action',
            set: function set() {
                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'copy';

                this._action = action;

                if (this._action !== 'copy' && this._action !== 'cut') {
                    throw new Error('Invalid "action" value, use either "copy" or "cut"');
                }
            },
            get: function get() {
                return this._action;
            }
        }, {
            key: 'target',
            set: function set(target) {
                if (target !== undefined) {
                    if (target && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && target.nodeType === 1) {
                        if (this.action === 'copy' && target.hasAttribute('disabled')) {
                            throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');
                        }

                        if (this.action === 'cut' && (target.hasAttribute('readonly') || target.hasAttribute('disabled'))) {
                            throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');
                        }

                        this._target = target;
                    } else {
                        throw new Error('Invalid "target" value, use a valid Element');
                    }
                }
            },
            get: function get() {
                return this._target;
            }
        }]);

        return ClipboardAction;
    }();

    module.exports = ClipboardAction;
});

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

var is = __webpack_require__(6);
var delegate = __webpack_require__(5);

/**
 * Validates all params and calls the right
 * listener function based on its target type.
 *
 * @param {String|HTMLElement|HTMLCollection|NodeList} target
 * @param {String} type
 * @param {Function} callback
 * @return {Object}
 */
function listen(target, type, callback) {
    if (!target && !type && !callback) {
        throw new Error('Missing required arguments');
    }

    if (!is.string(type)) {
        throw new TypeError('Second argument must be a String');
    }

    if (!is.fn(callback)) {
        throw new TypeError('Third argument must be a Function');
    }

    if (is.node(target)) {
        return listenNode(target, type, callback);
    }
    else if (is.nodeList(target)) {
        return listenNodeList(target, type, callback);
    }
    else if (is.string(target)) {
        return listenSelector(target, type, callback);
    }
    else {
        throw new TypeError('First argument must be a String, HTMLElement, HTMLCollection, or NodeList');
    }
}

/**
 * Adds an event listener to a HTML element
 * and returns a remove listener function.
 *
 * @param {HTMLElement} node
 * @param {String} type
 * @param {Function} callback
 * @return {Object}
 */
function listenNode(node, type, callback) {
    node.addEventListener(type, callback);

    return {
        destroy: function() {
            node.removeEventListener(type, callback);
        }
    }
}

/**
 * Add an event listener to a list of HTML elements
 * and returns a remove listener function.
 *
 * @param {NodeList|HTMLCollection} nodeList
 * @param {String} type
 * @param {Function} callback
 * @return {Object}
 */
function listenNodeList(nodeList, type, callback) {
    Array.prototype.forEach.call(nodeList, function(node) {
        node.addEventListener(type, callback);
    });

    return {
        destroy: function() {
            Array.prototype.forEach.call(nodeList, function(node) {
                node.removeEventListener(type, callback);
            });
        }
    }
}

/**
 * Add an event listener to a selector
 * and returns a remove listener function.
 *
 * @param {String} selector
 * @param {String} type
 * @param {Function} callback
 * @return {Object}
 */
function listenSelector(selector, type, callback) {
    return delegate(document.body, selector, type, callback);
}

module.exports = listen;


/***/ }),
/* 2 */
/***/ (function(module, exports) {

function E () {
  // Keep this empty so it's easier to inherit from
  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)
}

E.prototype = {
  on: function (name, callback, ctx) {
    var e = this.e || (this.e = {});

    (e[name] || (e[name] = [])).push({
      fn: callback,
      ctx: ctx
    });

    return this;
  },

  once: function (name, callback, ctx) {
    var self = this;
    function listener () {
      self.off(name, listener);
      callback.apply(ctx, arguments);
    };

    listener._ = callback
    return this.on(name, listener, ctx);
  },

  emit: function (name) {
    var data = [].slice.call(arguments, 1);
    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();
    var i = 0;
    var len = evtArr.length;

    for (i; i < len; i++) {
      evtArr[i].fn.apply(evtArr[i].ctx, data);
    }

    return this;
  },

  off: function (name, callback) {
    var e = this.e || (this.e = {});
    var evts = e[name];
    var liveEvents = [];

    if (evts && callback) {
      for (var i = 0, len = evts.length; i < len; i++) {
        if (evts[i].fn !== callback && evts[i].fn._ !== callback)
          liveEvents.push(evts[i]);
      }
    }

    // Remove event from queue to prevent memory leak
    // Suggested by https://github.com/lazd
    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910

    (liveEvents.length)
      ? e[name] = liveEvents
      : delete e[name];

    return this;
  }
};

module.exports = E;


/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {
    if (true) {
        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(0), __webpack_require__(2), __webpack_require__(1)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else { var mod; }
})(this, function (module, _clipboardAction, _tinyEmitter, _goodListener) {
    'use strict';

    var _clipboardAction2 = _interopRequireDefault(_clipboardAction);

    var _tinyEmitter2 = _interopRequireDefault(_tinyEmitter);

    var _goodListener2 = _interopRequireDefault(_goodListener);

    function _interopRequireDefault(obj) {
        return obj && obj.__esModule ? obj : {
            default: obj
        };
    }

    var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
        return typeof obj;
    } : function (obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };

    function _classCallCheck(instance, Constructor) {
        if (!(instance instanceof Constructor)) {
            throw new TypeError("Cannot call a class as a function");
        }
    }

    var _createClass = function () {
        function defineProperties(target, props) {
            for (var i = 0; i < props.length; i++) {
                var descriptor = props[i];
                descriptor.enumerable = descriptor.enumerable || false;
                descriptor.configurable = true;
                if ("value" in descriptor) descriptor.writable = true;
                Object.defineProperty(target, descriptor.key, descriptor);
            }
        }

        return function (Constructor, protoProps, staticProps) {
            if (protoProps) defineProperties(Constructor.prototype, protoProps);
            if (staticProps) defineProperties(Constructor, staticProps);
            return Constructor;
        };
    }();

    function _possibleConstructorReturn(self, call) {
        if (!self) {
            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        }

        return call && (typeof call === "object" || typeof call === "function") ? call : self;
    }

    function _inherits(subClass, superClass) {
        if (typeof superClass !== "function" && superClass !== null) {
            throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
        }

        subClass.prototype = Object.create(superClass && superClass.prototype, {
            constructor: {
                value: subClass,
                enumerable: false,
                writable: true,
                configurable: true
            }
        });
        if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
    }

    var Clipboard = function (_Emitter) {
        _inherits(Clipboard, _Emitter);

        /**
         * @param {String|HTMLElement|HTMLCollection|NodeList} trigger
         * @param {Object} options
         */
        function Clipboard(trigger, options) {
            _classCallCheck(this, Clipboard);

            var _this = _possibleConstructorReturn(this, (Clipboard.__proto__ || Object.getPrototypeOf(Clipboard)).call(this));

            _this.resolveOptions(options);
            _this.listenClick(trigger);
            return _this;
        }

        /**
         * Defines if attributes would be resolved using internal setter functions
         * or custom functions that were passed in the constructor.
         * @param {Object} options
         */


        _createClass(Clipboard, [{
            key: 'resolveOptions',
            value: function resolveOptions() {
                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

                this.action = typeof options.action === 'function' ? options.action : this.defaultAction;
                this.target = typeof options.target === 'function' ? options.target : this.defaultTarget;
                this.text = typeof options.text === 'function' ? options.text : this.defaultText;
                this.container = _typeof(options.container) === 'object' ? options.container : document.body;
            }
        }, {
            key: 'listenClick',
            value: function listenClick(trigger) {
                var _this2 = this;

                this.listener = (0, _goodListener2.default)(trigger, 'click', function (e) {
                    return _this2.onClick(e);
                });
            }
        }, {
            key: 'onClick',
            value: function onClick(e) {
                var trigger = e.delegateTarget || e.currentTarget;

                if (this.clipboardAction) {
                    this.clipboardAction = null;
                }

                this.clipboardAction = new _clipboardAction2.default({
                    action: this.action(trigger),
                    target: this.target(trigger),
                    text: this.text(trigger),
                    container: this.container,
                    trigger: trigger,
                    emitter: this
                });
            }
        }, {
            key: 'defaultAction',
            value: function defaultAction(trigger) {
                return getAttributeValue('action', trigger);
            }
        }, {
            key: 'defaultTarget',
            value: function defaultTarget(trigger) {
                var selector = getAttributeValue('target', trigger);

                if (selector) {
                    return document.querySelector(selector);
                }
            }
        }, {
            key: 'defaultText',
            value: function defaultText(trigger) {
                return getAttributeValue('text', trigger);
            }
        }, {
            key: 'destroy',
            value: function destroy() {
                this.listener.destroy();

                if (this.clipboardAction) {
                    this.clipboardAction.destroy();
                    this.clipboardAction = null;
                }
            }
        }], [{
            key: 'isSupported',
            value: function isSupported() {
                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['copy', 'cut'];

                var actions = typeof action === 'string' ? [action] : action;
                var support = !!document.queryCommandSupported;

                actions.forEach(function (action) {
                    support = support && !!document.queryCommandSupported(action);
                });

                return support;
            }
        }]);

        return Clipboard;
    }(_tinyEmitter2.default);

    /**
     * Helper function to retrieve attribute value.
     * @param {String} suffix
     * @param {Element} element
     */
    function getAttributeValue(suffix, element) {
        var attribute = 'data-clipboard-' + suffix;

        if (!element.hasAttribute(attribute)) {
            return;
        }

        return element.getAttribute(attribute);
    }

    module.exports = Clipboard;
});

/***/ }),
/* 4 */
/***/ (function(module, exports) {

var DOCUMENT_NODE_TYPE = 9;

/**
 * A polyfill for Element.matches()
 */
if (typeof Element !== 'undefined' && !Element.prototype.matches) {
    var proto = Element.prototype;

    proto.matches = proto.matchesSelector ||
                    proto.mozMatchesSelector ||
                    proto.msMatchesSelector ||
                    proto.oMatchesSelector ||
                    proto.webkitMatchesSelector;
}

/**
 * Finds the closest parent that matches a selector.
 *
 * @param {Element} element
 * @param {String} selector
 * @return {Function}
 */
function closest (element, selector) {
    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {
        if (typeof element.matches === 'function' &&
            element.matches(selector)) {
          return element;
        }
        element = element.parentNode;
    }
}

module.exports = closest;


/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

var closest = __webpack_require__(4);

/**
 * Delegates event to a selector.
 *
 * @param {Element} element
 * @param {String} selector
 * @param {String} type
 * @param {Function} callback
 * @param {Boolean} useCapture
 * @return {Object}
 */
function _delegate(element, selector, type, callback, useCapture) {
    var listenerFn = listener.apply(this, arguments);

    element.addEventListener(type, listenerFn, useCapture);

    return {
        destroy: function() {
            element.removeEventListener(type, listenerFn, useCapture);
        }
    }
}

/**
 * Delegates event to a selector.
 *
 * @param {Element|String|Array} [elements]
 * @param {String} selector
 * @param {String} type
 * @param {Function} callback
 * @param {Boolean} useCapture
 * @return {Object}
 */
function delegate(elements, selector, type, callback, useCapture) {
    // Handle the regular Element usage
    if (typeof elements.addEventListener === 'function') {
        return _delegate.apply(null, arguments);
    }

    // Handle Element-less usage, it defaults to global delegation
    if (typeof type === 'function') {
        // Use `document` as the first parameter, then apply arguments
        // This is a short way to .unshift `arguments` without running into deoptimizations
        return _delegate.bind(null, document).apply(null, arguments);
    }

    // Handle Selector-based usage
    if (typeof elements === 'string') {
        elements = document.querySelectorAll(elements);
    }

    // Handle Array-like based usage
    return Array.prototype.map.call(elements, function (element) {
        return _delegate(element, selector, type, callback, useCapture);
    });
}

/**
 * Finds closest match and invokes callback.
 *
 * @param {Element} element
 * @param {String} selector
 * @param {String} type
 * @param {Function} callback
 * @return {Function}
 */
function listener(element, selector, type, callback) {
    return function(e) {
        e.delegateTarget = closest(e.target, selector);

        if (e.delegateTarget) {
            callback.call(element, e);
        }
    }
}

module.exports = delegate;


/***/ }),
/* 6 */
/***/ (function(module, exports) {

/**
 * Check if argument is a HTML element.
 *
 * @param {Object} value
 * @return {Boolean}
 */
exports.node = function(value) {
    return value !== undefined
        && value instanceof HTMLElement
        && value.nodeType === 1;
};

/**
 * Check if argument is a list of HTML elements.
 *
 * @param {Object} value
 * @return {Boolean}
 */
exports.nodeList = function(value) {
    var type = Object.prototype.toString.call(value);

    return value !== undefined
        && (type === '[object NodeList]' || type === '[object HTMLCollection]')
        && ('length' in value)
        && (value.length === 0 || exports.node(value[0]));
};

/**
 * Check if argument is a string.
 *
 * @param {Object} value
 * @return {Boolean}
 */
exports.string = function(value) {
    return typeof value === 'string'
        || value instanceof String;
};

/**
 * Check if argument is a function.
 *
 * @param {Object} value
 * @return {Boolean}
 */
exports.fn = function(value) {
    var type = Object.prototype.toString.call(value);

    return type === '[object Function]';
};


/***/ }),
/* 7 */
/***/ (function(module, exports) {

function select(element) {
    var selectedText;

    if (element.nodeName === 'SELECT') {
        element.focus();

        selectedText = element.value;
    }
    else if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {
        var isReadOnly = element.hasAttribute('readonly');

        if (!isReadOnly) {
            element.setAttribute('readonly', '');
        }

        element.select();
        element.setSelectionRange(0, element.value.length);

        if (!isReadOnly) {
            element.removeAttribute('readonly');
        }

        selectedText = element.value;
    }
    else {
        if (element.hasAttribute('contenteditable')) {
            element.focus();
        }

        var selection = window.getSelection();
        var range = document.createRange();

        range.selectNodeContents(element);
        selection.removeAllRanges();
        selection.addRange(range);

        selectedText = selection.toString();
    }

    return selectedText;
}

module.exports = select;


/***/ })
/******/ ]);
});

/***/ }),

/***/ "./src/adaptive-card-schema.ts":
/*!*************************************!*\
  !*** ./src/adaptive-card-schema.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
exports.adaptiveCardSchema = {
    "$schema": "http://json-schema.org/draft-06/schema#",
    "id": "http://adaptivecards.io/schemas/adaptive-card.json",
    "type": "object",
    "title": "Microsoft Adaptive Card Schema",
    "additionalProperties": true,
    "allOf": [
        {
            "$ref": "#/definitions/AdaptiveCard"
        }
    ],
    "properties": {
        "version": {
            "type": "string",
            "description": "version of schema that this card was authored "
        },
        "minVersion": {
            "type": "string",
            "description": "if a client doesn't support the minVersion the card should be rejected and return the fallbackText.  If it does, then the elements that are not supported are safe to ignore"
        },
        "fallbackText": {
            "type": "string",
            "description": "if a client is not able to show the card, show fallbackText to the user. This can be in markdown format. "
        },
        "speak": {
            "type": "string",
            "description": "Specifies what should be spoken for this entire Item. This is simple text or SSML fragment"
        }
    },
    "required": [
        "version"
    ],
    "definitions": {
        "Action": {
            "anyOf": [
                {
                    "$ref": "#/definitions/Action.Submit"
                },
                {
                    "$ref": "#/definitions/Action.ShowCard"
                },
                {
                    "$ref": "#/definitions/Action.OpenUrl"
                }
            ]
        },
        "Action.OpenUrl": {
            "additionalProperties": true,
            "description": "When Action.OpenUrl is invoked it will show the given url, either by launching it to an external web browser or showing in-situ with embedded web browser.",
            "properties": {
                "title": {
                    "type": "string",
                    "description": "Label for button or link that represents this action"
                },
                "type": {
                    "type": "string",
                    "description": "Must be Action.OpenUrl",
                    "enum": [
                        "Action.OpenUrl"
                    ]
                },
                "url": {
                    "type": "string",
                    "description": "The URL to open"
                }
            },
            "required": [
                "type",
                "url"
            ],
            "type": "object"
        },
        "Action.ShowCard": {
            "type": "object",
            "additionalProperties": true,
            "description": "Action.ShowCard defines an inline AdaptiveCard which is shown to the user when it is clicked.",
            "properties": {
                "type": {
                    "type": "string",
                    "description": "Must be Action.ShowCard",
                    "enum": [
                        "Action.ShowCard"
                    ]
                },
                "title": {
                    "type": "string",
                    "description": "Label for button or link that represents this action"
                },
                "card": {
                    "$ref": "#/definitions/AdaptiveCard"
                }
            },
            "required": [
                "type",
                "card"
            ]
        },
        "Action.Submit": {
            "type": "object",
            "additionalProperties": true,
            "description": "Submit action gathers up input fields, merges with optional data field and generates event to client asking for data to be submitted. It is up to the client to determine how that data is processed. For example: With BotFramework bots the client would send an activity through the messaging medium to the bot.",
            "properties": {
                "type": {
                    "type": "string",
                    "description": "Must be Action.Submit",
                    "enum": [
                        "Action.Submit"
                    ]
                },
                "title": {
                    "type": "string",
                    "description": "Label for button or link that represents this action"
                },
                "data": {
                    "type": ["string", "object"],
                    "description": "initial data that input fields will be combined with. This is essentially 'hidden' properties"
                }
            },
            "required": [
                "type"
            ]
        },
        "Actions": {
            "additionalItems": true,
            "items": {
                "$ref": "#/definitions/Action"
            },
            "type": "array"
        },
        "AdaptiveCard": {
            "additionalProperties": true,
            "type": "object",
            "description": "Card schema for an adaptive card",
            "properties": {
                "type": {
                    "type": "string",
                    "description": "Must be AdaptiveCard",
                    "enum": [
                        "AdaptiveCard"
                    ]
                },
                "actions": {
                    "description": "The Actions to show in the card's action bar",
                    "$ref": "#/definitions/Actions"
                },
                "body": {
                    "description": "The Card Elements to show in the primary card region",
                    "$ref": "#/definitions/CardElements"
                }
            },
            "required": [
                "type",
                "version"
            ]
        },
        "CardElement": {
            "additionalProperties": true,
            "properties": {
                "type": {
                    "type": "string"
                },
                "id": {
                    "type": "string",
                    "description": "A unique Id associated with the element"
                },
                "spacing": {
                    "$ref": "#/definitions/SpacingStyle"
                },
                "separator": {
                    "type": "boolean",
                    "description": "The Separator object type describes the look and feel of a separation line between two elements.",
                    "default": false
                }
            },
            "required": [
                "type"
            ]
        },
        "CardElements": {
            "type": "array",
            "additionalItems": true,
            "items": [
                {
                    "anyOf": [
                        {
                            "$ref": "#/definitions/TextBlock"
                        },
                        {
                            "$ref": "#/definitions/Image"
                        },
                        {
                            "$ref": "#/definitions/Container"
                        },
                        {
                            "$ref": "#/definitions/ColumnSet"
                        },
                        {
                            "$ref": "#/definitions/FactSet"
                        },
                        {
                            "$ref": "#/definitions/ImageSet"
                        },
                        {
                            "$ref": "#/definitions/Input.Text"
                        },
                        {
                            "$ref": "#/definitions/Input.Number"
                        },
                        {
                            "$ref": "#/definitions/Input.Date"
                        },
                        {
                            "$ref": "#/definitions/Input.Time"
                        },
                        {
                            "$ref": "#/definitions/Input.Toggle"
                        },
                        {
                            "$ref": "#/definitions/Input.ChoiceSet"
                        }
                    ]
                }
            ]
        },
        "Input.Choice": {
            "type": "object",
            "description": "Describes a Choice input. The value should be a simple string without a \",\"",
            "additionalProperties": true,
            "properties": {
                "type": {
                    "type": "string",
                    "enum": [
                        "Input.Choice"
                    ]
                },
                "title": {
                    "type": "string",
                    "description": "The text for a choice"
                },
                "value": {
                    "type": "string",
                    "description": "The raw value for the choice. NOTE: do not use a \",\" in the value, since MultiSelect ChoiceSet returns a comma-delimited string of choice values"
                }
            },
            "required": [
                "title",
                "value"
            ]
        },
        "ChoiceInputStyle": {
            "type": "string",
            "description": "Style hint for Input.ChoiceSet",
            "enum": [
                "compact",
                "expanded"
            ]
        },
        "Column": {
            "additionalProperties": true,
            "type": "object",
            "description": "Defines a container that is part of a ColumnSet",
            "allOf": [
                {
                    "$ref": "#/definitions/CardElement"
                }
            ],
            "properties": {
                "items": {
                    "description": "The Card Elements to include in the Column",
                    "$ref": "#/definitions/CardElements"
                },
                "selectAction": {
                    "description": "An Action that will be invoked when the Column is tapped or selected",
                    "$ref": "#/definitions/Action"
                },
                "width": {
                    "type": [
                        "string",
                        "number"
                    ],
                    "description": "\"auto\", \"stretch\", or a number representing relative width of the column in the column group"
                },
                "type": {
                    "type": "string",
                    "description": "Must be Column",
                    "enum": [
                        "Column"
                    ]
                }
            },
            "required": [
                "items"
            ]
        },
        "ColumnSet": {
            "additionalProperties": true,
            "type": "object",
            "description": "ColumnSet divides a region into Column's allowing elements to sit side-by-side",
            "allOf": [
                {
                    "$ref": "#/definitions/CardElement"
                }
            ],
            "properties": {
                "columns": {
                    "type": "array",
                    "description": "The array of Columns to divide the region into",
                    "items": {
                        "$ref": "#/definitions/Column"
                    }
                },
                "selectAction": {
                    "$ref": "#/definitions/Action",
                    "description": "The Action that is executed when the ColumnSet is clicked/tapped"
                },
                "type": {
                    "type": "string",
                    "description": "Must be ColumnSet",
                    "enum": [
                        "ColumnSet"
                    ]
                }
            }
        },
        "Container": {
            "additionalProperties": true,
            "type": "object",
            "description": "Containers group items together",
            "allOf": [
                {
                    "$ref": "#/definitions/CardElement"
                }
            ],
            "properties": {
                "items": {
                    "description": "The Card Elements to render inside the Container",
                    "$ref": "#/definitions/CardElements"
                },
                "selectAction": {
                    "description": "An Action that will be invoked when the Image is tapped or selected",
                    "$ref": "#/definitions/Action"
                },
                "style": {
                    "type": "string",
                    "description": "Style hint for Container",
                    "enum": [
                        "default",
                        "emphasis"
                    ]
                },
                "type": {
                    "type": "string",
                    "description": "Must be Container",
                    "enum": [
                        "Container"
                    ]
                }
            },
            "required": [
                "items"
            ]
        },
        "Fact": {
            "additionalProperties": true,
            "type": "object",
            "description": "Describes a Fact in a FactSet as a key/value pair",
            "properties": {
                "type": {
                    "type": "string",
                    "enum": [
                        "Fact"
                    ]
                },
                "title": {
                    "type": "string",
                    "description": "The title of the fact"
                },
                "value": {
                    "type": "string",
                    "description": "The value of the fact"
                }
            },
            "required": [
                "title",
                "value"
            ]
        },
        "FactSet": {
            "additionalProperties": true,
            "type": "object",
            "description": "The FactSet Item makes it simple to display a series of facts (e.g. name/value pairs) in a tabular form.",
            "allOf": [
                {
                    "$ref": "#/definitions/CardElement"
                }
            ],
            "properties": {
                "facts": {
                    "type": "array",
                    "description": "The array of Facts",
                    "items": {
                        "$ref": "#/definitions/Fact"
                    }
                },
                "type": {
                    "type": "string",
                    "description": "Must be FactSet",
                    "enum": [
                        "FactSet"
                    ]
                }
            },
            "required": [
                "facts"
            ]
        },
        "HorizontalAlignment": {
            "type": "string",
            "description": "Controls how Items are horizontally positioned within their container.",
            "enum": [
                "left",
                "center",
                "right"
            ]
        },
        "Image": {
            "additionalProperties": true,
            "type": "object",
            "description": "The Image Item allows for the inclusion of images in an Adaptive Card.",
            "allOf": [
                {
                    "$ref": "#/definitions/CardElement"
                }
            ],
            "properties": {
                "altText": {
                    "type": "string",
                    "description": "Alternate text for the image for accessibility"
                },
                "horizontalAlignment": {
                    "$ref": "#/definitions/HorizontalAlignment"
                },
                "selectAction": {
                    "description": "An Action that will be invoked when the Image is tapped or selected",
                    "$ref": "#/definitions/Action"
                },
                "size": {
                    "type": "object",
                    "$ref": "#/definitions/ImageSize"
                },
                "style": {
                    "$ref": "#/definitions/ImageStyle"
                },
                "type": {
                    "type": "string",
                    "description": "Must be Image",
                    "enum": [
                        "Image"
                    ]
                },
                "url": {
                    "type": "string",
                    "description": "The URL to the image."
                }
            },
            "required": [
                "url"
            ]
        },
        "ImageSet": {
            "additionalProperties": true,
            "type": "object",
            "description": "The ImageSet allows for the inclusion of a collection images like a photogallery.",
            "allOf": [
                {
                    "$ref": "#/definitions/CardElement"
                }
            ],
            "properties": {
                "images": {
                    "type": "array",
                    "description": "The array of Image elements to show",
                    "items": {
                        "$ref": "#/definitions/Image"
                    }
                },
                "imageSize": {
                    "$ref": "#/definitions/ImageSize"
                },
                "type": {
                    "type": "string",
                    "description": "Must be ImageSet",
                    "enum": [
                        "ImageSet"
                    ]
                }
            },
            "required": [
                "images"
            ]
        },
        "ImageSize": {
            "type": "string",
            "description": "Controls the approximate size of the image. The physical dimensions will vary per host. Specify \"auto\" for true image dimension or \"stretch\" to force it to fill the container",
            "default": "auto",
            "enum": [
                "auto",
                "stretch",
                "small",
                "medium",
                "large"
            ]
        },
        "ImageStyle": {
            "type": "string",
            "description": "Controls the way Images are displayed",
            "enum": [
                "default",
                "person"
            ]
        },
        "Input.ChoiceSet": {
            "additionalProperties": true,
            "type": "object",
            "description": "Shows an array of Choice objects",
            "allOf": [
                {
                    "$ref": "#/definitions/CardElement"
                }
            ],
            "properties": {
                "choices": {
                    "type": "array",
                    "description": "the choice options",
                    "items": {
                        "$ref": "#/definitions/Input.Choice"
                    }
                },
                "id": {
                    "type": "string",
                    "description": "Id for the value (will be used to identify collected input when SUBMIT is clicked)"
                },
                "isMultiSelect": {
                    "type": "boolean",
                    "description": "allow multiple choices to be selected",
                    "default": false
                },
                "style": {
                    "$ref": "#/definitions/ChoiceInputStyle"
                },
                "type": {
                    "description": "Must be Input.ChoiceInput",
                    "enum": [
                        "Input.ChoiceSet"
                    ],
                    "type": "string"
                },
                "value": {
                    "type": "string",
                    "description": "The initial choice (or set of choices) that should be selected. For multi-select, specifcy a comma-separated string of values"
                }
            },
            "required": [
                "id",
                "choices"
            ]
        },
        "Input.Date": {
            "additionalProperties": true,
            "type": "object",
            "description": "Input.Date collects Date from the user,",
            "allOf": [
                {
                    "$ref": "#/definitions/CardElement"
                }
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Id for the value (will be used to identify collected input when SUBMIT is clicked)"
                },
                "max": {
                    "type": "string",
                    "description": "hint of maximum value expressed in ISO-8601 format (may be ignored by some clients)"
                },
                "min": {
                    "type": "string",
                    "description": "hint of minimum value expressed in ISO-8601 format (may be ignored by some clients)"
                },
                "placeholder": {
                    "type": "string",
                    "description": "Title Description of the input desired"
                },
                "type": {
                    "type": "string",
                    "description": "The type must be Input.Date",
                    "enum": [
                        "Input.Date"
                    ]
                },
                "value": {
                    "type": "string",
                    "description": "The initial value for a field expressed in ISO-8601 format"
                }
            },
            "required": [
                "id"
            ]
        },
        "Input.Number": {
            "additionalProperties": true,
            "type": "object",
            "description": "Input.Number collects number from the user,",
            "allOf": [
                {
                    "$ref": "#/definitions/CardElement"
                }
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Id for the value (will be used to identify collected input when SUBMIT is clicked)"
                },
                "max": {
                    "type": "number",
                    "description": "hint of maximum value (may be ignored by some clients)"
                },
                "min": {
                    "type": "number",
                    "description": "hint of minimum value (may be ignored by some clients)"
                },
                "placeholder": {
                    "type": "string",
                    "description": "Title Description of the input desired"
                },
                "type": {
                    "type": "string",
                    "description": "The type must be Input.Number",
                    "enum": [
                        "Input.Number"
                    ]
                },
                "value": {
                    "type": "number",
                    "description": "The initial value for a field"
                }
            },
            "required": [
                "id"
            ]
        },
        "Input.Text": {
            "additionalProperties": true,
            "type": "object",
            "description": "Input.Text collects text from the user,",
            "allOf": [
                {
                    "$ref": "#/definitions/CardElement"
                }
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Id for the value (will be used to identify collected input when SUBMIT is clicked)"
                },
                "isMultiline": {
                    "type": "boolean",
                    "description": "Do you want to allow multiple lines of input"
                },
                "maxLength": {
                    "type": "number",
                    "description": "hint of maximum length characters to collect (may be ignored by some clients)"
                },
                "placeholder": {
                    "type": "string",
                    "description": "Title Description of the input desired"
                },
                "style": {
                    "$ref": "#/definitions/TextInputStyle"
                },
                "type": {
                    "type": "string",
                    "description": "Input.Text",
                    "enum": [
                        "Input.Text"
                    ]
                },
                "value": {
                    "type": "string",
                    "description": "The initial value for a field"
                }
            },
            "required": [
                "id"
            ]
        },
        "Input.Time": {
            "additionalProperties": true,
            "type": "object",
            "description": "Input.Time collects Time from the user,",
            "allOf": [
                {
                    "$ref": "#/definitions/CardElement"
                }
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Id for the value (will be used to identify collected input when SUBMIT is clicked)"
                },
                "max": {
                    "type": "string",
                    "description": "hint of maximum value (may be ignored by some clients)"
                },
                "min": {
                    "type": "string",
                    "description": "hint of minimum value (may be ignored by some clients)"
                },
                "placeholder": {
                    "type": "string",
                    "description": "Title Description of the input desired"
                },
                "type": {
                    "type": "string",
                    "description": "The type must be Input.Time",
                    "enum": [
                        "Input.Time"
                    ]
                },
                "value": {
                    "type": "string",
                    "description": "The initial value for a field expressed in ISO-8601 format"
                }
            },
            "required": [
                "id"
            ]
        },
        "Input.Toggle": {
            "additionalProperties": true,
            "type": "object",
            "description": "Input.Toggle collects a true/false response from the user",
            "allOf": [
                {
                    "$ref": "#/definitions/CardElement"
                }
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Id for the value (will be used to identify collected input when SUBMIT is clicked)"
                },
                "title": {
                    "type": "string",
                    "description": "Title for the toggle"
                },
                "type": {
                    "type": "string",
                    "description": "Input.Toggle",
                    "enum": [
                        "Input.Toggle"
                    ]
                },
                "value": {
                    "type": "string",
                    "description": "The current selected value (default:false)"
                },
                "valueOff": {
                    "type": "string",
                    "description": "The value when toggle is off (default:false)"
                },
                "valueOn": {
                    "type": "string",
                    "description": "The value when toggle is on (default:true)"
                }
            },
            "required": [
                "id",
                "title"
            ]
        },
        "TextBlock": {
            "additionalProperties": true,
            "type": "object",
            "description": "The TextBlock Item allows for the inclusion of text, with various font sizes, weight and color, in Adaptive Cards.",
            "allOf": [
                {
                    "$ref": "#/definitions/CardElement"
                }
            ],
            "properties": {
                "color": {
                    "type": "string",
                    "description": "Controls the color of TextBlock Items.",
                    "enum": [
                        "default",
                        "dark",
                        "light",
                        "accent",
                        "good",
                        "warning",
                        "attention"
                    ]
                },
                "horizontalAlignment": {
                    "$ref": "#/definitions/HorizontalAlignment"
                },
                "isSubtle": {
                    "type": "boolean",
                    "description": "Indicates whether the color of the text should be slightly toned down to appear less prominent"
                },
                "maxLines": {
                    "type": "number",
                    "description": "When Wrap is true, you can specify the maximum number of lines to allow the textBlock to use."
                },
                "size": {
                    "type": "string",
                    "description": "controls size of the text.",
                    "enum": [
                        "small",
                        "default",
                        "medium",
                        "large",
                        "extraLarge"
                    ]
                },
                "text": {
                    "type": "string",
                    "description": "The actual text to display"
                },
                "type": {
                    "type": "string",
                    "description": "Must be TextBlock",
                    "enum": [
                        "TextBlock"
                    ]
                },
                "weight": {
                    "type": "string",
                    "description": "Controls the weight of TextBlock Items",
                    "enum": [
                        "lighter",
                        "default",
                        "bolder"
                    ]
                },
                "wrap": {
                    "type": "boolean",
                    "description": "True if be is allowed to wrap"
                }
            },
            "required": [
                "text"
            ]
        },
        "SeparatorStyle": {
            "type": "object",
            "description": "Indicates whether there should be a visible separator (e.g. a line) between the element and the one before it. If this property is not specified, no separator is displayed. If it is, a separator line is displayed. A separator will only appear if there was a preceding element.",
            "properties": {
                "thickness": {
                    "type": "string",
                    "description": "Specifies the thickness of the separation line.",
                    "enum": [
                        "default",
                        "thick"
                    ]
                },
                "color": {
                    "type": "string",
                    "description": "Specifies the color of the separation line.",
                    "enum": [
                        "default",
                        "accent"
                    ]
                }
            }
        },
        "SpacingStyle": {
            "type": "string",
            "description": "Controls the amount of spacing between this element and the previous element.",
            "enum": [
                "none",
                "small",
                "default",
                "medium",
                "large",
                "extraLarge",
                "padding"
            ]
        },
        "TextInputStyle": {
            "type": "string",
            "description": "Style hint for Input.Text.",
            "enum": [
                "text",
                "tel",
                "url",
                "email"
            ]
        }
    }
};


/***/ }),

/***/ "./src/adaptivecards-designer-standalone.ts":
/*!**************************************************!*\
  !*** ./src/adaptivecards-designer-standalone.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
__export(__webpack_require__(/*! ./strings */ "./src/strings.ts"));
__export(__webpack_require__(/*! ./shared */ "./src/shared.ts"));
__export(__webpack_require__(/*! ./containers/host-container */ "./src/containers/host-container.ts"));
__export(__webpack_require__(/*! ./containers/default/default-container */ "./src/containers/default/default-container.ts"));
__export(__webpack_require__(/*! ./card-designer-surface */ "./src/card-designer-surface.ts"));
__export(__webpack_require__(/*! ./card-designer */ "./src/card-designer.ts"));
__export(__webpack_require__(/*! ./constants */ "./src/constants.ts"));
__export(__webpack_require__(/*! ./draggable-element */ "./src/draggable-element.ts"));
__export(__webpack_require__(/*! ./designer-peers */ "./src/designer-peers.ts"));
__export(__webpack_require__(/*! ./peer-command */ "./src/peer-command.ts"));
__export(__webpack_require__(/*! ./miscellaneous */ "./src/miscellaneous.ts"));
__export(__webpack_require__(/*! ./settings-manager */ "./src/settings-manager.ts"));
__export(__webpack_require__(/*! ./side-panel */ "./src/side-panel.ts"));
__export(__webpack_require__(/*! ./tool-box */ "./src/tool-box.ts"));
__export(__webpack_require__(/*! ./toolbar */ "./src/toolbar.ts"));
__export(__webpack_require__(/*! ./tool-palette */ "./src/tool-palette.ts"));
__export(__webpack_require__(/*! ./splitter */ "./src/splitter.ts"));
__export(__webpack_require__(/*! ./base-tree-item */ "./src/base-tree-item.ts"));
__export(__webpack_require__(/*! ./designer-peer-treeitem */ "./src/designer-peer-treeitem.ts"));
__export(__webpack_require__(/*! ./data */ "./src/data.ts"));
__export(__webpack_require__(/*! ./catalogue */ "./src/catalogue.ts"));
__export(__webpack_require__(/*! ./containers/host-container */ "./src/containers/host-container.ts"));
__export(__webpack_require__(/*! ./containers/default/default-container */ "./src/containers/default/default-container.ts"));


/***/ }),

/***/ "./src/adaptivecards-designer.ts":
/*!***************************************!*\
  !*** ./src/adaptivecards-designer.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var containers = __webpack_require__(/*! ./containers */ "./src/containers/index.ts");
__export(__webpack_require__(/*! ./adaptivecards-designer-standalone */ "./src/adaptivecards-designer-standalone.ts"));
__export(__webpack_require__(/*! ./containers/index */ "./src/containers/index.ts"));
exports.defaultMicrosoftHosts = [
    new containers.WebChatContainer("Bot Framework WebChat", "containers/webchat-container.css"),
    new containers.OutlookContainer("Outlook Actionable Messages", "containers/outlook-container.css"),
    new containers.DarkTeamsContainer("Microsoft Teams - Dark", "containers/teams-container-dark.css"),
    new containers.LightTeamsContainer("Microsoft Teams - Light", "containers/teams-container-light.css"),
    new containers.DarkCortanaContainer("Cortana Skills - Dark", "containers/cortana-container-dark.css"),
    new containers.LightCortanaContainer("Cortana Skills - Light", "containers/cortana-container-light.css"),
    new containers.TimelineContainer("Windows Timeline", "containers/timeline-container.css"),
    new containers.BotFrameworkContainer("Bot Framework Other Channels (Image render)", "containers/bf-image-container.css"),
    new containers.CortanaClassicContainer("Cortana Skills (Classic)", "containers/cortana-classic-container.css"),
    new containers.ToastContainer("Windows Notifications (Preview)", "containers/toast-container.css"),
];


/***/ }),

/***/ "./src/base-tree-item.ts":
/*!*******************************!*\
  !*** ./src/base-tree-item.ts ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var draggable_element_1 = __webpack_require__(/*! ./draggable-element */ "./src/draggable-element.ts");
var BaseTreeItem = /** @class */ (function (_super) {
    __extends(BaseTreeItem, _super);
    function BaseTreeItem() {
        var _this = _super.call(this) || this;
        _this._isExpanded = true;
        _this._isSelected = false;
        _this._level = 0;
        return _this;
    }
    BaseTreeItem.prototype.click = function (e) {
        _super.prototype.click.call(this, e);
        this.selected();
    };
    BaseTreeItem.prototype.getIconClass = function () {
        return null;
    };
    BaseTreeItem.prototype.getAdditionalText = function () {
        return null;
    };
    BaseTreeItem.prototype.getAdditionalTextClass = function () {
        return "acd-tree-item-additionalText";
    };
    BaseTreeItem.prototype.getIndentationLevelIncrement = function () {
        return 8;
    };
    BaseTreeItem.prototype.getDragSourceElement = function () {
        return this._treeItemElement;
    };
    BaseTreeItem.prototype.selected = function () {
        // Do nothing in base implementation
    };
    BaseTreeItem.prototype.internalRender = function () {
        var _this = this;
        var rootElement = document.createElement("div");
        this._treeItemElement = document.createElement("div");
        this._treeItemElement.classList.add("acd-tree-item");
        this._treeItemElement.style.display = "flex";
        this._treeItemElement.style.alignItems = "center";
        this._treeItemElement.style.paddingLeft = this.getIndentationLevelIncrement() * (1 + this.level) + "px";
        this._expandCollapseElement = document.createElement("div");
        this._expandCollapseElement.classList.add("acd-tree-item-expandCollapseButton");
        this._expandCollapseElement.style.flex = "0 0 auto";
        this._expandCollapseElement.style.visibility = this.getChildCount() > 0 ? "visible" : "hidden";
        this._expandCollapseElement.onclick = function (e) {
            _this._isExpanded = !_this._isExpanded;
            _this.updateLayout();
            e.cancelBubble = true;
            e.preventDefault();
        };
        this._treeItemElement.appendChild(this._expandCollapseElement);
        var textElement = document.createElement("div");
        textElement.classList.add("acd-tree-item-text");
        textElement.style.flex = "1 1 auto";
        textElement.style.display = "flex";
        textElement.style.alignItems = "center";
        textElement.style.whiteSpace = "nowrap";
        textElement.style.textOverflow = "ellipsis";
        textElement.style.overflow = "hidden";
        if (this.getIconClass()) {
            var iconElement = document.createElement("div");
            iconElement.classList.add("acd-icon", "acd-treeView-icon", this.getIconClass());
            textElement.appendChild(iconElement);
        }
        var labelSpan = document.createElement("span");
        labelSpan.classList.add("acd-tree-item-typeName");
        labelSpan.innerText = this.getLabelText();
        textElement.appendChild(labelSpan);
        var text = this.getAdditionalText();
        if (text && text != "") {
            var additionalTextSpan = document.createElement("span");
            additionalTextSpan.classList.add(this.getAdditionalTextClass());
            additionalTextSpan.innerText = " [" + text + "]";
            textElement.appendChild(additionalTextSpan);
        }
        this._treeItemElement.appendChild(textElement);
        rootElement.appendChild(this._treeItemElement);
        this._childContainerElement = document.createElement("div");
        for (var i = 0; i < this.getChildCount(); i++) {
            var renderedChildItem = this.getChildAt(i).render();
            this._childContainerElement.appendChild(renderedChildItem);
        }
        rootElement.appendChild(this._childContainerElement);
        this.updateLayout();
        return rootElement;
    };
    BaseTreeItem.prototype.updateLayout = function () {
        if (this._isExpanded) {
            this._childContainerElement.classList.remove("acd-hidden");
            this._expandCollapseElement.classList.remove(BaseTreeItem.collapsedIconClass);
            this._expandCollapseElement.classList.add(BaseTreeItem.expandedIconClass);
        }
        else {
            this._childContainerElement.classList.add("acd-hidden");
            this._expandCollapseElement.classList.add(BaseTreeItem.collapsedIconClass);
            this._expandCollapseElement.classList.remove(BaseTreeItem.expandedIconClass);
        }
    };
    BaseTreeItem.prototype.expand = function () {
        this._isExpanded = true;
        this.updateLayout();
    };
    BaseTreeItem.prototype.isDraggable = function () {
        return false;
    };
    Object.defineProperty(BaseTreeItem.prototype, "level", {
        get: function () {
            return this._level;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseTreeItem.prototype, "isSelected", {
        get: function () {
            return this._isSelected;
        },
        set: function (value) {
            this._isSelected = value;
            if (this._isSelected) {
                this._treeItemElement.classList.add("selected");
            }
            else {
                this._treeItemElement.classList.remove("selected");
            }
        },
        enumerable: true,
        configurable: true
    });
    BaseTreeItem.collapsedIconClass = "acd-icon-chevronRight";
    BaseTreeItem.expandedIconClass = "acd-icon-chevronDown";
    return BaseTreeItem;
}(draggable_element_1.DraggableElement));
exports.BaseTreeItem = BaseTreeItem;


/***/ }),

/***/ "./src/card-designer-surface.ts":
/*!**************************************!*\
  !*** ./src/card-designer-surface.ts ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var Controls = __webpack_require__(/*! adaptivecards-controls */ "../adaptivecards-controls/lib/adaptivecards-controls.js");
var draggable_element_1 = __webpack_require__(/*! ./draggable-element */ "./src/draggable-element.ts");
var DesignerPeers = __webpack_require__(/*! ./designer-peers */ "./src/designer-peers.ts");
var ACData = __webpack_require__(/*! adaptivecards-templating */ "../adaptivecards-templating/lib/adaptivecards-templating.js");
var Shared = __webpack_require__(/*! ./shared */ "./src/shared.ts");
var DesignerPeerCategory = /** @class */ (function () {
    function DesignerPeerCategory() {
    }
    DesignerPeerCategory.Unknown = "Unknown";
    DesignerPeerCategory.Containers = "Containers";
    DesignerPeerCategory.Elements = "Elements";
    DesignerPeerCategory.Inputs = "Inputs";
    DesignerPeerCategory.Actions = "Actions";
    return DesignerPeerCategory;
}());
var DesignerPeerRegistry = /** @class */ (function () {
    function DesignerPeerRegistry() {
        this._items = [];
        this.defaultRegistration = new DesignerPeers.DesignerPeerRegistrationBase(DesignerPeerCategory.Unknown, "acd-icon-unknownPeer");
        this.reset();
    }
    DesignerPeerRegistry.prototype.clear = function () {
        this._items = [];
    };
    DesignerPeerRegistry.prototype.findTypeRegistration = function (sourceType) {
        for (var i = 0; i < this._items.length; i++) {
            if (this._items[i].sourceType === sourceType) {
                return this._items[i];
            }
        }
        return null;
    };
    DesignerPeerRegistry.prototype.registerPeer = function (sourceType, peerType, category, iconClass) {
        if (iconClass === void 0) { iconClass = null; }
        var registrationInfo = this.findTypeRegistration(sourceType);
        if (registrationInfo != null) {
            registrationInfo.peerType = peerType;
        }
        else {
            registrationInfo = new DesignerPeers.DesignerPeerRegistration(sourceType, peerType, category, iconClass);
            this._items.push(registrationInfo);
        }
    };
    DesignerPeerRegistry.prototype.unregisterPeer = function (sourceType) {
        for (var i = 0; i < this._items.length; i++) {
            if (this._items[i].sourceType === sourceType) {
                this._items.splice(i, 1);
                return;
            }
        }
    };
    return DesignerPeerRegistry;
}());
exports.DesignerPeerRegistry = DesignerPeerRegistry;
var CardElementPeerRegistry = /** @class */ (function (_super) {
    __extends(CardElementPeerRegistry, _super);
    function CardElementPeerRegistry() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CardElementPeerRegistry.prototype.reset = function () {
        this.clear();
        this.registerPeer(Adaptive.AdaptiveCard, DesignerPeers.AdaptiveCardPeer, DesignerPeerCategory.Containers, "acd-icon-adaptiveCard");
        this.registerPeer(Adaptive.Container, DesignerPeers.ContainerPeer, DesignerPeerCategory.Containers, "acd-icon-container");
        this.registerPeer(Adaptive.ColumnSet, DesignerPeers.ColumnSetPeer, DesignerPeerCategory.Containers, "acd-icon-columnSet");
        this.registerPeer(Adaptive.Column, DesignerPeers.ColumnPeer, DesignerPeerCategory.Containers, "acd-icon-column");
        this.registerPeer(Adaptive.ImageSet, DesignerPeers.ImageSetPeer, DesignerPeerCategory.Containers, "acd-icon-imageSet");
        this.registerPeer(Adaptive.FactSet, DesignerPeers.FactSetPeer, DesignerPeerCategory.Containers, "acd-icon-factSet");
        this.registerPeer(Adaptive.TextBlock, DesignerPeers.TextBlockPeer, DesignerPeerCategory.Elements, "acd-icon-textBlock");
        this.registerPeer(Adaptive.RichTextBlock, DesignerPeers.RichTextBlockPeer, DesignerPeerCategory.Elements, "acd-icon-richTextBlock");
        this.registerPeer(Adaptive.Image, DesignerPeers.ImagePeer, DesignerPeerCategory.Elements, "acd-icon-image");
        this.registerPeer(Adaptive.Media, DesignerPeers.MediaPeer, DesignerPeerCategory.Elements, "acd-icon-media");
        this.registerPeer(Adaptive.ActionSet, DesignerPeers.ActionSetPeer, DesignerPeerCategory.Elements, "acd-icon-actionSet");
        this.registerPeer(Adaptive.TextInput, DesignerPeers.TextInputPeer, DesignerPeerCategory.Inputs, "acd-icon-inputText");
        this.registerPeer(Adaptive.DateInput, DesignerPeers.DateInputPeer, DesignerPeerCategory.Inputs, "acd-icon-inputDate");
        this.registerPeer(Adaptive.TimeInput, DesignerPeers.TimeInputPeer, DesignerPeerCategory.Inputs, "acd-icon-inputTime");
        this.registerPeer(Adaptive.ToggleInput, DesignerPeers.ToggleInputPeer, DesignerPeerCategory.Inputs, "acd-icon-inputToggle");
        this.registerPeer(Adaptive.NumberInput, DesignerPeers.NumberInputPeer, DesignerPeerCategory.Inputs, "acd-icon-inputNumber");
        this.registerPeer(Adaptive.ChoiceSetInput, DesignerPeers.ChoiceSetInputPeer, DesignerPeerCategory.Inputs, "acd-icon-inputChoiceSet");
    };
    CardElementPeerRegistry.prototype.createPeerInstance = function (designerSurface, parent, cardElement) {
        var registrationInfo = this.findTypeRegistration(cardElement.constructor);
        var peer = registrationInfo ? new registrationInfo.peerType(parent, designerSurface, registrationInfo, cardElement) : new DesignerPeers.CardElementPeer(parent, designerSurface, this.defaultRegistration, cardElement);
        return peer;
    };
    return CardElementPeerRegistry;
}(DesignerPeerRegistry));
exports.CardElementPeerRegistry = CardElementPeerRegistry;
var ActionPeerRegistry = /** @class */ (function (_super) {
    __extends(ActionPeerRegistry, _super);
    function ActionPeerRegistry() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ActionPeerRegistry.prototype.reset = function () {
        this.clear();
        this.registerPeer(Adaptive.HttpAction, DesignerPeers.HttpActionPeer, DesignerPeerCategory.Actions, "acd-icon-actionHttp");
        this.registerPeer(Adaptive.SubmitAction, DesignerPeers.SubmitActionPeer, DesignerPeerCategory.Actions, "acd-icon-actionSubmit");
        this.registerPeer(Adaptive.OpenUrlAction, DesignerPeers.OpenUrlActionPeer, DesignerPeerCategory.Actions, "acd-icon-actionOpenUrl");
        this.registerPeer(Adaptive.ShowCardAction, DesignerPeers.ShowCardActionPeer, DesignerPeerCategory.Actions, "acd-icon-actionShowCard");
        this.registerPeer(Adaptive.ToggleVisibilityAction, DesignerPeers.ToggleVisibilityActionPeer, DesignerPeerCategory.Actions, "acd-icon-actionToggleVisibility");
    };
    ActionPeerRegistry.prototype.createPeerInstance = function (designerSurface, parent, action) {
        var registrationInfo = this.findTypeRegistration(action.constructor);
        var peer = registrationInfo ? new registrationInfo.peerType(parent, designerSurface, registrationInfo, action) : new DesignerPeers.ActionPeer(parent, designerSurface, this.defaultRegistration, action);
        return peer;
    };
    return ActionPeerRegistry;
}(DesignerPeerRegistry));
exports.ActionPeerRegistry = ActionPeerRegistry;
var DragHandle = /** @class */ (function (_super) {
    __extends(DragHandle, _super);
    function DragHandle() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DragHandle.prototype.internalRender = function () {
        var element = document.createElement("div");
        element.classList.add("acd-peerButton", "acd-icon-drag");
        element.title = "Drag to move this element";
        element.style.visibility = "hidden";
        element.style.position = "absolute";
        element.style.zIndex = "500";
        return element;
    };
    return DragHandle;
}(draggable_element_1.DraggableElement));
var CardDesignerSurface = /** @class */ (function () {
    function CardDesignerSurface(parentElement) {
        var _this = this;
        this._updateCount = 0;
        this._allPeers = [];
        this._lastParseErrors = [];
        this._isPreviewMode = false;
        this.fixedHeightCard = false;
        this.parentElement = parentElement;
        var rootElement = document.createElement("div");
        rootElement.style.position = "relative";
        rootElement.style.width = "100%";
        rootElement.style.height = "100%";
        this._cardHost = document.createElement("div");
        this._cardHost.style.height = "100%";
        rootElement.appendChild(this._cardHost);
        this._designerSurface = document.createElement("div");
        this._designerSurface.classList.add("acd-designersurface");
        this._designerSurface.tabIndex = 0;
        this._designerSurface.style.position = "absolute";
        this._designerSurface.style.left = "0";
        this._designerSurface.style.top = "0";
        this._designerSurface.style.width = "100%";
        this._designerSurface.style.height = "100%";
        this._designerSurface.onkeyup = function (e) {
            if (_this._selectedPeer) {
                switch (e.keyCode) {
                    case Controls.KEY_ESCAPE:
                        _this.setSelectedPeer(_this._selectedPeer.parent);
                        break;
                    case Controls.KEY_DELETE:
                        _this.removeSelected();
                        break;
                }
            }
            return !e.cancelBubble;
        };
        this._designerSurface.onpointermove = function (e) {
            var clientRect = _this._designerSurface.getBoundingClientRect();
            _this.tryDrop({ x: e.x - clientRect.left, y: e.y - clientRect.top }, _this.draggedPeer);
        };
        this._designerSurface.onpointerup = function (e) {
            if (_this.draggedPeer) {
                _this.endDrag();
            }
        };
        rootElement.appendChild(this._designerSurface);
        this.parentElement.innerHTML = "";
        this.parentElement.appendChild(rootElement);
    }
    CardDesignerSurface.prototype.updatePeerCommandsLayout = function () {
        if (this._selectedPeer) {
            var peerRect = this._selectedPeer.getBoundingRect();
            var dragHandleRect = this._dragHandle.renderedElement.getBoundingClientRect();
            var removeButtonRect = this._removeCommandElement.getBoundingClientRect();
            var commandsHostRect = this._peerCommandsHostElement.getBoundingClientRect();
            this._dragHandle.renderedElement.style.left = (peerRect.left - dragHandleRect.width) + "px";
            this._dragHandle.renderedElement.style.top = (peerRect.top - dragHandleRect.height) + "px";
            this._removeCommandElement.style.left = peerRect.right + "px";
            this._removeCommandElement.style.top = (peerRect.top - removeButtonRect.height) + "px";
            this._peerCommandsHostElement.style.left = (peerRect.right - commandsHostRect.width) + "px";
            this._peerCommandsHostElement.style.top = (peerRect.bottom + 2) + "px";
            this._dragHandle.renderedElement.style.visibility = this._selectedPeer.isDraggable() ? "visible" : "hidden";
            this._removeCommandElement.style.visibility = this._selectedPeer.canBeRemoved() ? "visible" : "hidden";
            this._peerCommandsHostElement.style.visibility = this._peerCommandsHostElement.childElementCount > 0 ? "visible" : "hidden";
        }
        else {
            this._dragHandle.renderedElement.style.visibility = "hidden";
            this._removeCommandElement.style.visibility = "hidden";
            this._peerCommandsHostElement.style.visibility = "hidden";
        }
    };
    CardDesignerSurface.prototype.setSelectedPeer = function (value) {
        if (this._selectedPeer != value) {
            if (this._selectedPeer) {
                this._selectedPeer.isSelected = false;
            }
            this._selectedPeer = value;
            this._peerCommandsHostElement.innerHTML = "";
            if (this._selectedPeer) {
                this._selectedPeer.isSelected = true;
                var commands = this._selectedPeer.getCommands();
                for (var _i = 0, commands_1 = commands; _i < commands_1.length; _i++) {
                    var command = commands_1[_i];
                    this._peerCommandsHostElement.appendChild(command.render());
                }
                this._designerSurface.focus();
            }
            this.updatePeerCommandsLayout();
            if (this.onSelectedPeerChanged) {
                this.onSelectedPeerChanged(this._selectedPeer);
            }
        }
    };
    CardDesignerSurface.prototype.peerChanged = function (peer, updatePropertySheet) {
        this._lastParseErrors = [];
        this.renderCard();
        this.updateLayout();
        if (updatePropertySheet && this.onSelectedPeerChanged) {
            this.onSelectedPeerChanged(this._selectedPeer);
        }
    };
    CardDesignerSurface.prototype.peerRemoved = function (peer) {
        this._allPeers.splice(this._allPeers.indexOf(peer), 1);
        if (peer == this._selectedPeer) {
            this.setSelectedPeer(null);
        }
        if (this._updateCount == 0) {
            this.renderCard();
            this.updateLayout();
        }
    };
    CardDesignerSurface.prototype.renderCard = function () {
        this._cardHost.innerHTML = "";
        if (this.card) {
            if (this.onCardValidated) {
                this.onCardValidated(this._lastParseErrors, this.card.validateProperties());
            }
            var cardToRender = void 0;
            if (this.isPreviewMode) {
                if (Shared.GlobalSettings.enableDataBindingSupport) {
                    var cardPayload = this.card.toJSON();
                    try {
                        var template = new ACData.Template(cardPayload);
                        var context = new ACData.EvaluationContext();
                        context.$root = this.sampleData;
                        var expandedCardPayload = template.expand(context);
                        cardToRender = new Adaptive.AdaptiveCard();
                        cardToRender.hostConfig = this.card.hostConfig;
                        cardToRender.parse(expandedCardPayload);
                    }
                    catch (e) {
                        console.log("Template expansion error: " + e.message);
                    }
                }
                if (!cardToRender) {
                    cardToRender = this.card;
                    cardToRender.designMode = false;
                }
            }
            else {
                cardToRender = this.card;
                cardToRender.designMode = true;
            }
            var renderedCard = cardToRender.render();
            if (this.fixedHeightCard) {
                renderedCard.style.height = "100%";
            }
            this._cardHost.appendChild(renderedCard);
        }
    };
    CardDesignerSurface.prototype.addPeer = function (peer) {
        var _this = this;
        if (this._allPeers.indexOf(peer) < 0) {
            this._allPeers.push(peer);
            peer.render();
            peer.onSelectedChanged = function (peer) {
                if (peer.isSelected) {
                    _this.setSelectedPeer(peer);
                }
                else {
                    if (_this._selectedPeer == peer) {
                        _this.setSelectedPeer(null);
                    }
                }
            };
            peer.onChanged = function (sender, updatePropertySheet) { _this.peerChanged(sender, updatePropertySheet); };
            peer.onPeerRemoved = function (sender) { _this.peerRemoved(sender); };
            peer.onPeerAdded = function (sender, newPeer) {
                _this.addPeer(newPeer);
                _this.updateLayout();
            };
            peer.onStartDrag = function (sender) { _this.startDrag(sender); };
            peer.onEndDrag = function (sender) { _this.endDrag(); };
            peer.addElementsToDesignerSurface(this._designerSurface);
            for (var i = 0; i < peer.getChildCount(); i++) {
                this.addPeer(peer.getChildAt(i));
            }
        }
    };
    CardDesignerSurface.prototype.internalFindDropTarget = function (pointerPosition, currentPeer, forPeer) {
        if (currentPeer == forPeer) {
            return null;
        }
        var result = null;
        var lookDeeper = currentPeer instanceof DesignerPeers.ActionPeer;
        if (!lookDeeper) {
            var boundingRect = currentPeer.getBoundingRect();
            lookDeeper = boundingRect.isInside(pointerPosition);
        }
        if (lookDeeper) {
            var canDrop = currentPeer.canDrop(forPeer);
            if (canDrop) {
                result = currentPeer;
            }
            for (var i = 0; i < currentPeer.getChildCount(); i++) {
                var deeperResult = this.internalFindDropTarget(pointerPosition, currentPeer.getChildAt(i), forPeer);
                if (deeperResult) {
                    result = deeperResult;
                    break;
                }
            }
        }
        return result;
    };
    CardDesignerSurface.prototype.findCardElementPeer = function (cardElement) {
        for (var i = 0; i < this._allPeers.length; i++) {
            var peer = this._allPeers[i];
            if (peer instanceof DesignerPeers.CardElementPeer && peer.cardElement == cardElement) {
                return peer;
            }
        }
        return null;
    };
    CardDesignerSurface.prototype.findActionPeer = function (action) {
        for (var i = 0; i < this._allPeers.length; i++) {
            var peer = this._allPeers[i];
            if (peer instanceof DesignerPeers.ActionPeer && peer.action == action) {
                return peer;
            }
        }
        return null;
    };
    CardDesignerSurface.prototype.inlineCardExpanded = function (action, isExpanded) {
        var peer = this.findCardElementPeer(action.card);
        if (isExpanded) {
            if (!peer) {
                var registration = CardDesignerSurface.cardElementPeerRegistry.findTypeRegistration(Adaptive.AdaptiveCard);
                peer = new registration.peerType(peer, this, registration, action.card);
                var parentPeer = this.findActionPeer(action);
                if (parentPeer) {
                    parentPeer.insertChild(peer);
                }
                else {
                    this._rootPeer.insertChild(peer);
                }
            }
            else {
                peer.addElementsToDesignerSurface(this._designerSurface, true);
            }
        }
        else {
            if (peer) {
                peer.removeElementsFromDesignerSurface(true);
            }
        }
        this.updateLayout();
    };
    Object.defineProperty(CardDesignerSurface.prototype, "draggedPeer", {
        get: function () {
            return this._draggedPeer;
        },
        set: function (value) {
            if (this._draggedPeer != value) {
                if (this._draggedPeer) {
                    this._draggedPeer.dragging = false;
                }
                this._draggedPeer = value;
                if (this._draggedPeer) {
                    this._draggedPeer.dragging = true;
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    CardDesignerSurface.prototype.getDesignerSurfaceOffset = function () {
        var clientRect = this._designerSurface.getBoundingClientRect();
        return { x: clientRect.left, y: clientRect.top };
    };
    CardDesignerSurface.prototype.findDropTarget = function (pointerPosition, peer) {
        return this.internalFindDropTarget(pointerPosition, this._rootPeer, peer);
    };
    CardDesignerSurface.prototype.findPeer = function (cardObject) {
        for (var _i = 0, _a = this._allPeers; _i < _a.length; _i++) {
            var peer = _a[_i];
            if (peer.getCardObject() === cardObject) {
                return peer;
            }
        }
        return undefined;
    };
    CardDesignerSurface.prototype.beginUpdate = function () {
        this._updateCount++;
    };
    CardDesignerSurface.prototype.endUpdate = function (renderCard) {
        if (this._updateCount > 0) {
            this._updateCount--;
            if (this._updateCount == 0) {
                if (renderCard) {
                    this.renderCard();
                }
                this.updateLayout();
            }
        }
    };
    CardDesignerSurface.prototype.render = function () {
        var _this = this;
        this._designerSurface.innerHTML = "";
        this._allPeers = [];
        this.setSelectedPeer(null);
        this.renderCard();
        if (this.card) {
            this._rootPeer = CardDesignerSurface.cardElementPeerRegistry.createPeerInstance(this, null, this.card);
            this.addPeer(this._rootPeer);
        }
        this._removeCommandElement = document.createElement("div");
        this._removeCommandElement.classList.add("acd-peerButton", "acd-icon-remove");
        this._removeCommandElement.title = "Remove";
        this._removeCommandElement.style.visibility = "hidden";
        this._removeCommandElement.style.position = "absolute";
        this._removeCommandElement.style.zIndex = "500";
        this._removeCommandElement.onclick = function (e) {
            _this.removeSelected();
        };
        this._dragHandle = new DragHandle();
        this._dragHandle.onStartDrag = function (sender) {
            _this._dragHandle.endDrag();
            _this.startDrag(_this._selectedPeer);
        };
        this._dragHandle.render();
        this._peerCommandsHostElement = document.createElement("div");
        this._peerCommandsHostElement.style.visibility = "hidden";
        this._peerCommandsHostElement.style.position = "absolute";
        this._peerCommandsHostElement.style.display = "flex";
        this._peerCommandsHostElement.style.zIndex = "500";
        this._designerSurface.appendChild(this._dragHandle.renderedElement);
        this._designerSurface.appendChild(this._removeCommandElement);
        this._designerSurface.appendChild(this._peerCommandsHostElement);
        this.updateLayout();
    };
    CardDesignerSurface.prototype.setCardPayloadAsObject = function (payload) {
        this._lastParseErrors = [];
        this.card.parse(payload, this._lastParseErrors);
        this.render();
    };
    CardDesignerSurface.prototype.setCardPayloadAsString = function (payload) {
        this.setCardPayloadAsObject(JSON.parse(payload));
    };
    CardDesignerSurface.prototype.updateLayout = function (isFullRefresh) {
        if (isFullRefresh === void 0) { isFullRefresh = true; }
        for (var i = 0; i < this._allPeers.length; i++) {
            this._allPeers[i].updateLayout();
        }
        this.updatePeerCommandsLayout();
        if (this.onLayoutUpdated) {
            this.onLayoutUpdated(isFullRefresh);
        }
    };
    CardDesignerSurface.prototype.removeSelected = function () {
        if (this.selectedPeer) {
            this.beginUpdate();
            try {
                var parent_1 = this.selectedPeer.parent;
                if (this.selectedPeer.remove(false, true)) {
                    this.setSelectedPeer(parent_1);
                }
            }
            finally {
                this.endUpdate(true);
            }
        }
    };
    CardDesignerSurface.prototype.startDrag = function (peer) {
        if (!this.draggedPeer) {
            this._designerSurface.classList.add("dragging");
            this.draggedPeer = peer;
            this.setSelectedPeer(this.draggedPeer);
        }
    };
    CardDesignerSurface.prototype.endDrag = function () {
        if (this.draggedPeer) {
            // Ensure that the dragged peer's elements are at the top in Z order
            this.draggedPeer.removeElementsFromDesignerSurface(true);
            this.draggedPeer.addElementsToDesignerSurface(this._designerSurface, true);
            this._dropTarget.renderedElement.classList.remove("dragover");
            this.draggedPeer = null;
            this._designerSurface.classList.remove("dragging");
        }
    };
    CardDesignerSurface.prototype.tryDrop = function (pointerPosition, peer) {
        var result = false;
        if (peer) {
            if (this._dropTarget) {
                this._dropTarget.renderedElement.classList.remove("dragover");
            }
            var newDropTarget = this.findDropTarget(pointerPosition, peer);
            if (newDropTarget) {
                this._dropTarget = newDropTarget;
                this._dropTarget.renderedElement.classList.add("dragover");
                result = this._dropTarget.tryDrop(peer, pointerPosition);
            }
        }
        return result;
    };
    CardDesignerSurface.prototype.isPointerOver = function (x, y) {
        var clientRect = this._designerSurface.getBoundingClientRect();
        return (x >= clientRect.left) && (x <= clientRect.right) && (y >= clientRect.top) && (y <= clientRect.bottom);
    };
    CardDesignerSurface.prototype.pageToClientCoordinates = function (x, y) {
        var clientRect = this._designerSurface.getBoundingClientRect();
        return {
            x: x - clientRect.left,
            y: y - clientRect.top
        };
    };
    Object.defineProperty(CardDesignerSurface.prototype, "rootPeer", {
        get: function () {
            return this._rootPeer;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesignerSurface.prototype, "selectedPeer", {
        get: function () {
            return this._selectedPeer;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesignerSurface.prototype, "card", {
        get: function () {
            return this._card;
        },
        set: function (value) {
            var _this = this;
            if (value != this._card) {
                if (this._card) {
                    this._card.onInlineCardExpanded = null;
                }
                this._card = value;
                if (this._card) {
                    this._card.onInlineCardExpanded = function (action, isExpanded) { _this.inlineCardExpanded(action, isExpanded); };
                }
                this.render();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesignerSurface.prototype, "isPreviewMode", {
        get: function () {
            return this._isPreviewMode;
        },
        set: function (value) {
            if (this._isPreviewMode != value) {
                this._isPreviewMode = value;
                if (this._isPreviewMode) {
                    this._designerSurface.classList.add("acd-hidden");
                    this._dragHandle.renderedElement.classList.add("acd-hidden");
                    this._removeCommandElement.classList.add("acd-hidden");
                    this._peerCommandsHostElement.classList.add("acd-hidden");
                }
                else {
                    this._designerSurface.classList.remove("acd-hidden");
                    this._dragHandle.renderedElement.classList.remove("acd-hidden");
                    this._removeCommandElement.classList.remove("acd-hidden");
                    this._peerCommandsHostElement.classList.remove("acd-hidden");
                }
                this.renderCard();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesignerSurface.prototype, "sampleData", {
        get: function () {
            return this._sampleData;
        },
        set: function (value) {
            this._sampleData = value;
            if (this.isPreviewMode) {
                this.renderCard();
            }
        },
        enumerable: true,
        configurable: true
    });
    CardDesignerSurface.cardElementPeerRegistry = new CardElementPeerRegistry();
    CardDesignerSurface.actionPeerRegistry = new ActionPeerRegistry();
    return CardDesignerSurface;
}());
exports.CardDesignerSurface = CardDesignerSurface;


/***/ }),

/***/ "./src/card-designer.ts":
/*!******************************!*\
  !*** ./src/card-designer.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Clipboard = __webpack_require__(/*! clipboard */ "./node_modules/clipboard/dist/clipboard.js");
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var Constants = __webpack_require__(/*! ./constants */ "./src/constants.ts");
var Designer = __webpack_require__(/*! ./card-designer-surface */ "./src/card-designer-surface.ts");
var sample_picker_dialog_1 = __webpack_require__(/*! ./sample-picker-dialog */ "./src/sample-picker-dialog.ts");
var adaptive_card_schema_1 = __webpack_require__(/*! ./adaptive-card-schema */ "./src/adaptive-card-schema.ts");
var fullscreen_handler_1 = __webpack_require__(/*! ./fullscreen-handler */ "./src/fullscreen-handler.ts");
var toolbar_1 = __webpack_require__(/*! ./toolbar */ "./src/toolbar.ts");
var miscellaneous_1 = __webpack_require__(/*! ./miscellaneous */ "./src/miscellaneous.ts");
var tool_palette_1 = __webpack_require__(/*! ./tool-palette */ "./src/tool-palette.ts");
var default_container_1 = __webpack_require__(/*! ./containers/default/default-container */ "./src/containers/default/default-container.ts");
var side_panel_1 = __webpack_require__(/*! ./side-panel */ "./src/side-panel.ts");
var tool_box_1 = __webpack_require__(/*! ./tool-box */ "./src/tool-box.ts");
var data_1 = __webpack_require__(/*! ./data */ "./src/data.ts");
var data_treeitem_1 = __webpack_require__(/*! ./data-treeitem */ "./src/data-treeitem.ts");
var strings_1 = __webpack_require__(/*! ./strings */ "./src/strings.ts");
var Shared = __webpack_require__(/*! ./shared */ "./src/shared.ts");
var CardDesigner = /** @class */ (function () {
    function CardDesigner(hostContainers) {
        if (hostContainers === void 0) { hostContainers = null; }
        this._isAttached = false;
        this._isMonacoEditorLoaded = false;
        this._undoStack = [];
        this._undoStackIndex = -1;
        this.preventCardUpdate = false;
        this._cardEditorUpdateCounter = 0;
        this.preventJsonUpdate = false;
        this._fullScreenHandler = new fullscreen_handler_1.FullScreenHandler();
        this.toolbar = new toolbar_1.Toolbar();
        this.sampleCatalogueUrl = undefined;
        Adaptive.AdaptiveCard.enableFullJsonRoundTrip = true;
        Adaptive.AdaptiveCard.onProcessMarkdown = function (text, result) {
            CardDesigner.internalProcessMarkdown(text, result);
        };
        this._hostContainers = hostContainers ? hostContainers : [];
        this.prepareToolbar();
    }
    CardDesigner.internalProcessMarkdown = function (text, result) {
        if (CardDesigner.onProcessMarkdown) {
            CardDesigner.onProcessMarkdown(text, result);
        }
        else {
            // Check for markdownit
            if (window["markdownit"]) {
                result.outputHtml = window["markdownit"]().render(text);
                result.didProcess = true;
            }
        }
    };
    CardDesigner.prototype.togglePreview = function () {
        this._designerSurface.isPreviewMode = !this._designerSurface.isPreviewMode;
        if (this._designerSurface.isPreviewMode) {
            this._togglePreviewButton.toolTip = "Return to Design mode";
        }
        else {
            this._togglePreviewButton.toolTip = "Switch to Preview mode";
            this._designerSurface.updateLayout();
        }
        this.buildTreeView();
    };
    CardDesigner.prototype.buildTreeView = function () {
        if (this._treeViewToolbox.content) {
            this._treeViewToolbox.content.innerHTML = "";
            if (this.designerSurface.isPreviewMode) {
                this.treeViewToolbox.content.innerHTML =
                    '<div style="padding: 8px; display: flex; justify-content: center;">' +
                        '<div>The Card Structure isn\'t available in Preview mode.</div>' +
                        '</div>';
            }
            else {
                this._treeViewToolbox.content.appendChild(this.designerSurface.rootPeer.treeItem.render());
            }
        }
    };
    CardDesigner.prototype.setupDataTreeItemEvents = function (treeItem) {
        var _this = this;
        treeItem.onStartDrag = function (sender) {
            _this._draggedPaletteItem = new tool_palette_1.DataPaletteItem(treeItem.field);
            _this._draggedElement = _this._draggedPaletteItem.renderDragVisual();
            _this._draggedElement.style.position = "absolute";
            _this._draggedElement.style.left = _this._currentMousePosition.x + "px";
            _this._draggedElement.style.top = _this._currentMousePosition.y + "px";
            document.body.appendChild(_this._draggedElement);
            treeItem.endDrag();
        };
        for (var i = 0; i < treeItem.getChildCount(); i++) {
            this.setupDataTreeItemEvents(treeItem.getChildAt(i));
        }
    };
    CardDesigner.prototype.buildDataExplorer = function () {
        if (this._dataToolbox && this._dataToolbox.content) {
            this._dataToolbox.content.innerHTML = "";
            if (this._dataStructure) {
                var treeItem = new data_treeitem_1.DataTreeItem(this._dataStructure);
                this._dataToolbox.content.appendChild(treeItem.render());
                this.setupDataTreeItemEvents(treeItem);
            }
        }
    };
    CardDesigner.prototype.buildPropertySheet = function (peer) {
        if (this._propertySheetToolbox.content) {
            this._propertySheetToolbox.content.innerHTML = "";
            var card = void 0;
            if (peer) {
                card = peer.buildPropertySheetCard(this.currentTargetVersion);
            }
            else {
                card = new Adaptive.AdaptiveCard();
                card.parse({
                    type: "AdaptiveCard",
                    version: "1.0",
                    body: [
                        {
                            type: "TextBlock",
                            wrap: true,
                            text: "**Nothing is selected**"
                        },
                        {
                            type: "TextBlock",
                            wrap: true,
                            text: "Select an element in the card to modify its properties."
                        }
                    ]
                });
                card.padding = new Adaptive.PaddingDefinition(Adaptive.Spacing.Small, Adaptive.Spacing.Small, Adaptive.Spacing.Small, Adaptive.Spacing.Small);
            }
            // card.hostConfig = this._propertySheetHostConfig;
            card.hostConfig = miscellaneous_1.defaultHostConfig;
            this._propertySheetToolbox.content.appendChild(card.render());
        }
    };
    CardDesigner.prototype.addPaletteItem = function (paletteItem, hostElement) {
        var _this = this;
        paletteItem.render();
        paletteItem.onStartDrag = function (sender) {
            _this._draggedPaletteItem = sender;
            _this._draggedElement = sender.renderDragVisual();
            _this._draggedElement.style.position = "absolute";
            _this._draggedElement.style.left = _this._currentMousePosition.x + "px";
            _this._draggedElement.style.top = _this._currentMousePosition.y + "px";
            document.body.appendChild(_this._draggedElement);
        };
        hostElement.appendChild(paletteItem.renderedElement);
    };
    CardDesigner.prototype.buildPalette = function () {
        if (!this._isAttached) {
            return;
        }
        this._toolPaletteToolbox.content.innerHTML = "";
        var categorizedTypes = {};
        for (var i_1 = 0; i_1 < Adaptive.AdaptiveCard.elementTypeRegistry.getItemCount(); i_1++) {
            var dummyCardElement = Adaptive.AdaptiveCard.elementTypeRegistry.getItemAt(i_1).createInstance();
            var peerRegistration = Designer.CardDesignerSurface.cardElementPeerRegistry.findTypeRegistration(dummyCardElement.constructor);
            if (peerRegistration) {
                if (!categorizedTypes.hasOwnProperty(peerRegistration.category)) {
                    categorizedTypes[peerRegistration.category] = [];
                }
                var paletteItem = new tool_palette_1.ElementPaletteItem(Adaptive.AdaptiveCard.elementTypeRegistry.getItemAt(i_1), peerRegistration);
                categorizedTypes[peerRegistration.category].push(paletteItem);
            }
        }
        if (this.customPaletteItems) {
            for (var _i = 0, _a = this.customPaletteItems; _i < _a.length; _i++) {
                var item = _a[_i];
                if (!categorizedTypes.hasOwnProperty(item.category)) {
                    categorizedTypes[item.category] = [];
                }
                categorizedTypes[item.category].push(item);
            }
        }
        for (var category in categorizedTypes) {
            var node = document.createElement('div');
            node.innerText = category;
            node.className = "acd-palette-category";
            this._toolPaletteToolbox.content.appendChild(node);
            for (var i = 0; i < categorizedTypes[category].length; i++) {
                this.addPaletteItem(categorizedTypes[category][i], this._toolPaletteToolbox.content);
            }
        }
    };
    CardDesigner.prototype.endDrag = function () {
        if (this._draggedPaletteItem) {
            this._draggedPaletteItem.endDrag();
            this._draggedElement.remove();
            this._draggedPaletteItem = null;
            this._draggedElement = null;
        }
    };
    CardDesigner.prototype.renderErrorPaneElement = function (message, cardObject) {
        var _this = this;
        var errorElement = document.createElement("div");
        errorElement.className = "acd-error-pane-message";
        if (cardObject) {
            errorElement.classList.add("selectable");
            errorElement.title = "Click to select this element";
            errorElement.onclick = function (e) {
                var peer = _this.designerSurface.findPeer(cardObject);
                if (peer) {
                    peer.isSelected = true;
                    peer.scrollIntoView();
                }
            };
        }
        errorElement.innerText = message;
        return errorElement;
    };
    CardDesigner.prototype.recreateDesignerSurface = function () {
        var _this = this;
        var styleSheetLinkElement = document.getElementById("adaptiveCardStylesheet");
        if (styleSheetLinkElement == null) {
            styleSheetLinkElement = document.createElement("link");
            styleSheetLinkElement.id = "adaptiveCardStylesheet";
            document.getElementsByTagName("head")[0].appendChild(styleSheetLinkElement);
        }
        styleSheetLinkElement.rel = "stylesheet";
        styleSheetLinkElement.type = "text/css";
        if (miscellaneous_1.Utils.isAbsoluteUrl(this.activeHostContainer.styleSheet)) {
            styleSheetLinkElement.href = this.activeHostContainer.styleSheet;
        }
        else {
            styleSheetLinkElement.href = miscellaneous_1.Utils.joinPaths(this._assetPath, this.activeHostContainer.styleSheet);
        }
        var _cardArea = document.getElementById("cardArea");
        if (_cardArea) {
            _cardArea.style.backgroundColor = this.activeHostContainer.getBackgroundColor();
        }
        this.activeHostContainer.initialize();
        this._designerHostElement.innerHTML = "";
        this.activeHostContainer.renderTo(this._designerHostElement);
        var wasInPreviewMode = this._designerSurface ? this._designerSurface.isPreviewMode : false;
        this._designerSurface = new Designer.CardDesignerSurface(this.activeHostContainer.cardHost);
        this._designerSurface.fixedHeightCard = this.activeHostContainer.isFixedHeight;
        this._designerSurface.onSelectedPeerChanged = function (peer) {
            _this.buildPropertySheet(peer);
        };
        this._designerSurface.onLayoutUpdated = function (isFullRefresh) {
            if (isFullRefresh) {
                _this.scheduleUpdateJsonFromCard();
            }
            _this.buildTreeView();
        };
        this._designerSurface.onCardValidated = function (parseErrors, validationResults) {
            var errorPane = document.getElementById("errorPane");
            errorPane.innerHTML = "";
            if (parseErrors.length > 0) {
                var errorMessages = [];
                for (var _i = 0, parseErrors_1 = parseErrors; _i < parseErrors_1.length; _i++) {
                    var error = parseErrors_1[_i];
                    if (errorMessages.indexOf(error.message) < 0) {
                        errorMessages.push(error.message);
                    }
                }
                for (var _a = 0, errorMessages_1 = errorMessages; _a < errorMessages_1.length; _a++) {
                    var message = errorMessages_1[_a];
                    errorPane.appendChild(_this.renderErrorPaneElement("[Error] " + message));
                }
            }
            if (validationResults.failures.length > 0) {
                for (var _b = 0, _c = validationResults.failures; _b < _c.length; _b++) {
                    var failure = _c[_b];
                    for (var _d = 0, _e = failure.errors; _d < _e.length; _d++) {
                        var error = _e[_d];
                        errorPane.appendChild(_this.renderErrorPaneElement("[" + failure.cardObject.getJsonTypeName() + "] " + error.message, failure.cardObject));
                    }
                }
            }
            if (errorPane.childElementCount > 0) {
                errorPane.classList.remove("acd-hidden");
            }
            else {
                errorPane.classList.add("acd-hidden");
            }
        };
        this.buildPalette();
        this.buildPropertySheet(null);
        if (this._card) {
            this._card.hostConfig = this.activeHostContainer.getHostConfig();
        }
        this._designerSurface.card = this._card;
        this.updateSampleData();
        this._designerSurface.isPreviewMode = wasInPreviewMode;
        this.updateFullLayout();
    };
    CardDesigner.prototype.activeHostContainerChanged = function () {
        this.recreateDesignerSurface();
        if (this.onActiveHostContainerChanged) {
            this.onActiveHostContainerChanged(this);
        }
    };
    CardDesigner.prototype.updateToolboxLayout = function (toolbox, hostPanelRect) {
        if (toolbox) {
            var jsonEditorHeaderRect = toolbox.getHeaderBoundingRect();
            toolbox.content.style.height = (hostPanelRect.height - jsonEditorHeaderRect.height) + "px";
        }
    };
    CardDesigner.prototype.updateJsonEditorsLayout = function () {
        if (this._isMonacoEditorLoaded) {
            var jsonEditorsPaneRect = this._jsonEditorsPanel.contentHost.getBoundingClientRect();
            this.updateToolboxLayout(this._cardEditorToolbox, jsonEditorsPaneRect);
            this._cardEditor.layout();
            if (this._sampleDataEditorToolbox) {
                this.updateToolboxLayout(this._sampleDataEditorToolbox, jsonEditorsPaneRect);
                this._sampleDataEditor.layout();
            }
        }
    };
    CardDesigner.prototype.updateFullLayout = function () {
        this.scheduleLayoutUpdate();
        this.updateJsonEditorsLayout();
    };
    CardDesigner.prototype.cardPayloadChanged = function () {
        if (this.onCardPayloadChanged) {
            this.onCardPayloadChanged(this);
        }
    };
    CardDesigner.prototype.beginCardEditorUpdate = function () {
        this._cardEditorUpdateCounter++;
    };
    CardDesigner.prototype.endCardEditorUpdate = function () {
        if (this._cardEditorUpdateCounter > 0) {
            this._cardEditorUpdateCounter--;
        }
    };
    CardDesigner.prototype.setCardPayload = function (payload, addToUndoStack) {
        if (this._isMonacoEditorLoaded) {
            this.beginCardEditorUpdate();
            try {
                this._cardEditor.setValue(JSON.stringify(payload, null, 4));
                this.updateCardFromJson(addToUndoStack);
            }
            finally {
                this.endCardEditorUpdate();
            }
        }
        this.cardPayloadChanged();
    };
    CardDesigner.prototype.setSampleDataPayload = function (payload) {
        if (this._isMonacoEditorLoaded && this._sampleDataEditor) {
            this._sampleDataEditor.setValue(JSON.stringify(payload, null, 4));
        }
    };
    CardDesigner.prototype.updateJsonFromCard = function (addToUndoStack) {
        if (addToUndoStack === void 0) { addToUndoStack = true; }
        try {
            this.preventCardUpdate = true;
            if (!this.preventJsonUpdate && this._isMonacoEditorLoaded) {
                var cardPayload = this.card.toJSON();
                this.setCardPayload(cardPayload, addToUndoStack);
            }
        }
        finally {
            this.preventCardUpdate = false;
        }
    };
    CardDesigner.prototype.scheduleUpdateJsonFromCard = function () {
        var _this = this;
        clearTimeout(this.jsonUpdateTimer);
        if (!this.preventJsonUpdate) {
            this.jsonUpdateTimer = setTimeout(function () { _this.updateJsonFromCard(); }, 100);
        }
    };
    CardDesigner.prototype.getCurrentCardEditorPayload = function () {
        return this._isMonacoEditorLoaded ? this._cardEditor.getValue() : Constants.defaultPayload;
    };
    CardDesigner.prototype.getCurrentSampleDataEditorPayload = function () {
        return this._isMonacoEditorLoaded && this._sampleDataEditor ? this._sampleDataEditor.getValue() : "";
    };
    CardDesigner.prototype.updateCardFromJson = function (addToUndoStack) {
        try {
            this.preventJsonUpdate = true;
            var currentEditorPayload = this.getCurrentCardEditorPayload();
            if (addToUndoStack) {
                try {
                    var parsed = JSON.parse(currentEditorPayload);
                    this.addToUndoStack(parsed);
                }
                catch (_a) {
                    // do nothing
                }
            }
            if (!this.preventCardUpdate) {
                this.designerSurface.setCardPayloadAsString(currentEditorPayload);
                this.cardPayloadChanged();
            }
        }
        finally {
            this.preventJsonUpdate = false;
        }
    };
    CardDesigner.prototype.scheduleUpdateCardFromJson = function () {
        var _this = this;
        clearTimeout(this.cardUpdateTimer);
        if (!this.preventCardUpdate) {
            this.cardUpdateTimer = setTimeout(function () { _this.updateCardFromJson(true); }, 300);
        }
    };
    CardDesigner.prototype.scheduleLayoutUpdate = function () {
        var _this = this;
        clearTimeout(this.updateLayoutTimer);
        this.updateLayoutTimer = setTimeout(function () { _this.designerSurface.updateLayout(false); }, 50);
    };
    CardDesigner.prototype.prepareToolbar = function () {
        var _this = this;
        if (Shared.GlobalSettings.showVersionPicker) {
            this._versionChoicePicker = new toolbar_1.ToolbarChoicePicker(CardDesigner.ToolbarCommands.VersionPicker);
            this._versionChoicePicker.label = "Target version:";
            this._versionChoicePicker.width = 80;
            this._versionChoicePicker.alignment = toolbar_1.ToolbarElementAlignment.Right;
            this._versionChoicePicker.separator = true;
            for (var i = 0; i < Shared.SupportedTargetVersions.length; i++) {
                this._versionChoicePicker.choices.push({
                    name: Shared.SupportedTargetVersions[i].label,
                    value: i.toString()
                });
            }
            this.toolbar.addElement(this._versionChoicePicker);
        }
        this._fullScreenButton = new toolbar_1.ToolbarButton(CardDesigner.ToolbarCommands.FullScreen, "Enter Full Screen", "acd-icon-fullScreen", function (sender) { _this._fullScreenHandler.toggleFullScreen(); });
        this._fullScreenButton.displayCaption = false;
        this._fullScreenButton.toolTip = "Enter full screen";
        this._fullScreenButton.alignment = toolbar_1.ToolbarElementAlignment.Right;
        // Hide full screen button by default. This button is useless
        // and should really be plain and simple removed in a future version
        this._fullScreenButton.isVisible = false;
        this.toolbar.addElement(this._fullScreenButton);
        var openSampleButton = new toolbar_1.ToolbarButton(CardDesigner.ToolbarCommands.OpenPayload, "Open Sample", "acd-icon-open", function (sender) {
            var dialog = new sample_picker_dialog_1.SamplePickerDialog();
            dialog.title = "Pick a sample";
            dialog.width = "30%";
            dialog.height = "60%";
            dialog.catalogueUrl = _this.sampleCatalogueUrl;
            dialog.onClose = function (d) {
                if (dialog.selectedSample) {
                    dialog.selectedSample.onDownloaded = function () {
                        try {
                            var cardPayload = JSON.parse(dialog.selectedSample.cardPayload);
                            _this.setCardPayload(cardPayload, true);
                        }
                        catch (_a) {
                            alert("The sample could not be loaded.");
                        }
                        if (!Adaptive.isNullOrEmpty(dialog.selectedSample.sampleData)) {
                            try {
                                var sampleDataPayload = JSON.parse(dialog.selectedSample.sampleData);
                                _this.setSampleDataPayload(sampleDataPayload);
                                _this.dataStructure = data_1.FieldDefinition.create(sampleDataPayload);
                            }
                            catch (_b) {
                                alert("The sample could not be loaded.");
                            }
                        }
                    };
                    dialog.selectedSample.download();
                }
            };
            dialog.open();
        });
        this.toolbar.addElement(openSampleButton);
        if (this._hostContainers && this._hostContainers.length > 0) {
            this._hostContainerChoicePicker = new toolbar_1.ToolbarChoicePicker(CardDesigner.ToolbarCommands.HostAppPicker);
            this._hostContainerChoicePicker.separator = true;
            this._hostContainerChoicePicker.label = "Select host app:";
            this._hostContainerChoicePicker.width = 350;
            for (var i = 0; i < this._hostContainers.length; i++) {
                this._hostContainerChoicePicker.choices.push({
                    name: this._hostContainers[i].name,
                    value: i.toString(),
                });
            }
            this._hostContainerChoicePicker.onChanged = function (sender) {
                _this.activeHostContainer = _this._hostContainers[Number.parseInt(_this._hostContainerChoicePicker.value)];
                _this.activeHostContainerChanged();
            };
            this.toolbar.addElement(this._hostContainerChoicePicker);
        }
        this._undoButton = new toolbar_1.ToolbarButton(CardDesigner.ToolbarCommands.Undo, "Undo", "acd-icon-undo", function (sender) { _this.undo(); });
        this._undoButton.separator = true;
        this._undoButton.toolTip = "Undo your last change";
        this._undoButton.isEnabled = false;
        this._undoButton.displayCaption = false;
        this.toolbar.addElement(this._undoButton);
        this._redoButton = new toolbar_1.ToolbarButton(CardDesigner.ToolbarCommands.Redo, "Redo", "acd-icon-redo", function (sender) { _this.redo(); });
        this._redoButton.toolTip = "Redo your last changes";
        this._redoButton.isEnabled = false;
        this._redoButton.displayCaption = false;
        this.toolbar.addElement(this._redoButton);
        this._newCardButton = new toolbar_1.ToolbarButton(CardDesigner.ToolbarCommands.NewCard, "New card", "acd-icon-newCard", function (sender) { _this.newCard(); });
        this._newCardButton.separator = true;
        this.toolbar.addElement(this._newCardButton);
        this._copyJSONButton = new toolbar_1.ToolbarButton(CardDesigner.ToolbarCommands.CopyJSON, "Copy card JSON", "acd-icon-copy");
        this.toolbar.addElement(this._copyJSONButton);
        this._togglePreviewButton = new toolbar_1.ToolbarButton(CardDesigner.ToolbarCommands.TogglePreview, "Preview mode", "acd-icon-preview", function (sender) { _this.togglePreview(); });
        this._togglePreviewButton.separator = true;
        this._togglePreviewButton.allowToggle = true;
        this._togglePreviewButton.isVisible = Shared.GlobalSettings.enableDataBindingSupport;
        this.toolbar.addElement(this._togglePreviewButton);
        this._fullScreenHandler = new fullscreen_handler_1.FullScreenHandler();
        this._fullScreenHandler.onFullScreenChanged = function (isFullScreen) {
            _this._fullScreenButton.toolTip = isFullScreen ? "Exit full screen" : "Enter full screen";
            _this.updateFullLayout();
        };
    };
    CardDesigner.prototype.onResize = function () {
        this._cardEditor.layout();
        if (this._sampleDataEditor) {
            this._sampleDataEditor.layout();
        }
    };
    CardDesigner.prototype.updateSampleData = function () {
        try {
            this._sampleData = JSON.parse(this.getCurrentSampleDataEditorPayload());
            this.designerSurface.sampleData = this._sampleData;
        }
        catch (_a) {
            // Swallow expression, the payload isn't a valid JSON document
        }
    };
    CardDesigner.prototype.monacoModuleLoaded = function (monaco) {
        var _this = this;
        if (monaco === void 0) { monaco = null; }
        if (!monaco) {
            monaco = window["monaco"];
        }
        var monacoConfiguration = {
            schemas: [
                {
                    uri: "http://adaptivecards.io/schemas/adaptive-card.json",
                    schema: adaptive_card_schema_1.adaptiveCardSchema,
                    fileMatch: ["*"],
                }
            ],
            validate: false,
            allowComments: true
        };
        // TODO: set this in our editor instead of defaults
        monaco.languages.json.jsonDefaults.setDiagnosticsOptions(monacoConfiguration);
        // Setup card JSON editor
        this._cardEditorToolbox.content = document.createElement("div");
        this._cardEditorToolbox.content.style.overflow = "hidden";
        this._cardEditor = monaco.editor.create(this._cardEditorToolbox.content, {
            folding: true,
            fontSize: 13.5,
            language: 'json',
            minimap: {
                enabled: false
            }
        });
        this._cardEditor.onDidChangeModelContent(function () {
            if (_this._cardEditorUpdateCounter == 0) {
                _this.scheduleUpdateCardFromJson();
            }
        });
        if (this._sampleDataEditorToolbox) {
            // Setup sample data JSON editor
            this._sampleDataEditorToolbox.content = document.createElement("div");
            this._sampleDataEditorToolbox.content.style.overflow = "hidden";
            this._sampleDataEditor = monaco.editor.create(this._sampleDataEditorToolbox.content, {
                folding: true,
                fontSize: 13.5,
                language: 'json',
                minimap: {
                    enabled: false
                }
            });
            this._sampleDataEditor.onDidChangeModelContent(function () {
                _this.updateSampleData();
            });
        }
        window.addEventListener('resize', function () { _this.onResize(); });
        this._isMonacoEditorLoaded = true;
        this.updateJsonEditorsLayout();
        this.updateJsonFromCard(false);
    };
    CardDesigner.prototype.updateToolbar = function () {
        this._undoButton.isEnabled = this.canUndo;
        this._redoButton.isEnabled = this.canRedo;
    };
    CardDesigner.prototype.addToUndoStack = function (payload) {
        var doAdd = true;
        if (this._undoStack.length > 0) {
            doAdd = this._undoStack[this._undoStack.length - 1] != payload;
        }
        if (doAdd) {
            var undoPayloadsToDiscard = this._undoStack.length - (this._undoStackIndex + 1);
            if (undoPayloadsToDiscard > 0) {
                this._undoStack.splice(this._undoStackIndex + 1, undoPayloadsToDiscard);
            }
            this._undoStack.push(payload);
            if (this._undoStack.length > CardDesigner.MAX_UNDO_STACK_SIZE) {
                this._undoStack.splice(0, 1);
            }
            this._undoStackIndex = this._undoStack.length - 1;
            this.updateToolbar();
        }
    };
    CardDesigner.prototype.handlePointerUp = function (e) {
        this.endDrag();
        this.designerSurface.endDrag();
    };
    CardDesigner.prototype.handlePointerMove = function (e) {
        this._currentMousePosition = { x: e.x, y: e.y };
        var isPointerOverDesigner = this.designerSurface.isPointerOver(this._currentMousePosition.x, this._currentMousePosition.y);
        var peerDropped = false;
        if (this._draggedPaletteItem && isPointerOverDesigner) {
            var peer = this._draggedPaletteItem.createPeer(this.designerSurface);
            var clientCoordinates = this.designerSurface.pageToClientCoordinates(this._currentMousePosition.x, this._currentMousePosition.y);
            if (this.designerSurface.tryDrop(clientCoordinates, peer)) {
                this.endDrag();
                this.designerSurface.startDrag(peer);
                peerDropped = true;
            }
        }
        if (!peerDropped && this._draggedElement) {
            this._draggedElement.style.left = this._currentMousePosition.x - 10 + "px";
            this._draggedElement.style.top = this._currentMousePosition.y - 10 + "px";
        }
    };
    CardDesigner.prototype.attachTo = function (root) {
        var _this = this;
        var styleSheetLinkElement = document.createElement("link");
        styleSheetLinkElement.id = "__ac-designer";
        styleSheetLinkElement.rel = "stylesheet";
        styleSheetLinkElement.type = "text/css";
        styleSheetLinkElement.href = miscellaneous_1.Utils.joinPaths(this._assetPath, "adaptivecards-designer.css");
        document.getElementsByTagName("head")[0].appendChild(styleSheetLinkElement);
        if (this._hostContainers && this._hostContainers.length > 0) {
            this._activeHostContainer = this._hostContainers[0];
        }
        else {
            this._activeHostContainer = new default_container_1.DefaultContainer("Default", "adaptivecards-defaulthost.css");
        }
        root.style.flex = "1 1 auto";
        root.style.display = "flex";
        root.style.flexDirection = "column";
        root.style.overflow = "hidden";
        root.innerHTML =
            '<div id="toolbarHost"></div>' +
                '<div class="content" style="display: flex; flex: 1 1 auto; overflow-y: hidden;">' +
                '<div id="leftCollapsedPaneTabHost" class="acd-verticalCollapsedTabContainer acd-dockedLeft" style="border-right: 1px solid #D2D2D2;"></div>' +
                '<div id="toolPalettePanel" class="acd-toolPalette-pane"></div>' +
                '<div style="display: flex; flex-direction: column; flex: 1 1 100%; overflow: hidden;">' +
                '<div style="display: flex; flex: 1 1 100%; overflow: hidden;">' +
                '<div id="cardArea" class="acd-designer-cardArea">' +
                '<div style="flex: 1 1 100%; overflow: auto;">' +
                '<div id="designerHost" style="margin: 20px 40px 20px 20px;"></div>' +
                '</div>' +
                '<div id="errorPane" class="acd-error-pane acd-hidden"></div>' +
                '</div>' +
                '<div id="treeViewPanel" class="acd-treeView-pane"></div>' +
                '<div id="propertySheetPanel" class="acd-propertySheet-pane"></div>' +
                '</div>' +
                '<div id="jsonEditorPanel" class="acd-json-editor-pane"></div>' +
                '<div id="bottomCollapsedPaneTabHost" class="acd-horizontalCollapsedTabContainer" style="border-top: 1px solid #D2D2D2;"></div>' +
                '</div>' +
                '<div id="rightCollapsedPaneTabHost" class="acd-verticalCollapsedTabContainer acd-dockedRight" style="border-left: 1px solid #D2D2D2;"></div>' +
                '</div>';
        this.toolbar.attachTo(document.getElementById("toolbarHost"));
        if (this._versionChoicePicker) {
            this._versionChoicePicker.selectedIndex = Shared.SupportedTargetVersions.indexOf(Shared.Versions.v1_2);
            this._versionChoicePicker.onChanged = function (sender) {
                _this.buildPropertySheet(_this._designerSurface.selectedPeer);
            };
        }
        if (this._copyJSONButton.isVisible) {
            new Clipboard(this._copyJSONButton.renderedElement, {
                text: function (trigger) { return JSON.stringify(_this.card.toJSON(), null, 4); }
            });
        }
        // Tool palette panel
        var toolPaletteHost = document.createElement("div");
        toolPaletteHost.className = "acd-dockedPane";
        this._toolPaletteToolbox = new tool_box_1.Toolbox("toolPalette", strings_1.Strings.toolboxes.toolPalette.title);
        this._toolPaletteToolbox.content = toolPaletteHost;
        var toolPalettePanel = new side_panel_1.SidePanel("toolPalettePanel", side_panel_1.SidePanelAlignment.Left, document.getElementById("leftCollapsedPaneTabHost"));
        toolPalettePanel.addToolbox(this._toolPaletteToolbox);
        toolPalettePanel.isResizable = false;
        toolPalettePanel.attachTo(document.getElementById("toolPalettePanel"));
        // JSON editors panel
        this._cardEditorToolbox = new tool_box_1.Toolbox("cardEditor", strings_1.Strings.toolboxes.cardEditor.title);
        this._cardEditorToolbox.content = document.createElement("div");
        this._cardEditorToolbox.content.style.padding = "8px";
        this._cardEditorToolbox.content.innerText = strings_1.Strings.loadingEditor;
        this._jsonEditorsPanel = new side_panel_1.SidePanel("jsonEditorPanel", side_panel_1.SidePanelAlignment.Bottom, document.getElementById("bottomCollapsedPaneTabHost"));
        this._jsonEditorsPanel.onResized = function (sender) {
            _this.updateJsonEditorsLayout();
        };
        this._jsonEditorsPanel.onToolboxResized = function (sender) {
            _this.updateJsonEditorsLayout();
        };
        this._jsonEditorsPanel.onToolboxExpandedOrCollapsed = function (sender) {
            _this.updateJsonEditorsLayout();
        };
        this._jsonEditorsPanel.addToolbox(this._cardEditorToolbox);
        if (Shared.GlobalSettings.enableDataBindingSupport && Shared.GlobalSettings.showSampleDataEditorToolbox) {
            this._sampleDataEditorToolbox = new tool_box_1.Toolbox("sampleDataEditor", strings_1.Strings.toolboxes.sampleDataEditor.title);
            this._sampleDataEditorToolbox.content = document.createElement("div");
            this._sampleDataEditorToolbox.content.style.padding = "8px";
            this._sampleDataEditorToolbox.content.innerText = strings_1.Strings.loadingEditor;
            this._sampleDataEditorToolbox.commands = [
                {
                    title: "Copy the structure of this data into the Data Structure toolbox",
                    iconClass: "acd-icon-dataStructure",
                    execute: function (sender) {
                        _this.dataStructure = data_1.FieldDefinition.create(JSON.parse(_this.getCurrentSampleDataEditorPayload()));
                    }
                }
            ];
            this._jsonEditorsPanel.addToolbox(this._sampleDataEditorToolbox);
        }
        this._jsonEditorsPanel.attachTo(document.getElementById("jsonEditorPanel"));
        // Property sheet panel
        var propertySheetHost = document.createElement("div");
        propertySheetHost.className = "acd-propertySheet-host";
        this._propertySheetToolbox = new tool_box_1.Toolbox("propertySheet", strings_1.Strings.toolboxes.propertySheet.title);
        this._propertySheetToolbox.content = propertySheetHost;
        var propertySheetPanel = new side_panel_1.SidePanel("propertySheetPanel", side_panel_1.SidePanelAlignment.Right, document.getElementById("rightCollapsedPaneTabHost"));
        propertySheetPanel.addToolbox(this._propertySheetToolbox);
        propertySheetPanel.onResized = function (sender) {
            _this.scheduleLayoutUpdate();
        };
        propertySheetPanel.attachTo(document.getElementById("propertySheetPanel"));
        // Tree view panel
        var treeViewHost = document.createElement("div");
        treeViewHost.className = "acd-treeView-host";
        this._treeViewToolbox = new tool_box_1.Toolbox("treeView", strings_1.Strings.toolboxes.cardStructure.title);
        this._treeViewToolbox.content = treeViewHost;
        var treeViewPanel = new side_panel_1.SidePanel("treeViewPanel", side_panel_1.SidePanelAlignment.Right, document.getElementById("rightCollapsedPaneTabHost"));
        treeViewPanel.addToolbox(this._treeViewToolbox);
        treeViewPanel.onResized = function (sender) {
            _this.scheduleLayoutUpdate();
        };
        if (Shared.GlobalSettings.enableDataBindingSupport && Shared.GlobalSettings.showDataStructureToolbox) {
            var dataExplorerHost = document.createElement("div");
            dataExplorerHost.className = "acd-treeView-host";
            this._dataToolbox = new tool_box_1.Toolbox("data", strings_1.Strings.toolboxes.dataStructure.title);
            this._dataToolbox.content = dataExplorerHost;
            treeViewPanel.addToolbox(this._dataToolbox);
        }
        treeViewPanel.attachTo(document.getElementById("treeViewPanel"));
        this._designerHostElement = document.getElementById("designerHost");
        window.addEventListener("pointermove", function (e) { _this.handlePointerMove(e); });
        window.addEventListener("resize", function () { _this.scheduleLayoutUpdate(); });
        window.addEventListener("pointerup", function (e) { _this.handlePointerUp(e); });
        this._isAttached = true;
        this.recreateDesignerSurface();
        var card = new Adaptive.AdaptiveCard();
        card.onImageLoaded = function (image) {
            _this.scheduleLayoutUpdate();
        };
        this.card = card;
    };
    CardDesigner.prototype.undo = function () {
        if (this.canUndo) {
            this._undoStackIndex--;
            var card = this._undoStack[this._undoStackIndex];
            this.setCardPayload(card, false);
            this.updateToolbar();
        }
    };
    CardDesigner.prototype.redo = function () {
        if (this._undoStackIndex < this._undoStack.length - 1) {
            this._undoStackIndex++;
            var card = this._undoStack[this._undoStackIndex];
            this.setCardPayload(card, false);
            this.updateToolbar();
        }
    };
    CardDesigner.prototype.newCard = function () {
        var card = {
            type: "AdaptiveCard",
            version: "1.0",
            body: []
        };
        this.setCardPayload(card, true);
    };
    CardDesigner.prototype.setCard = function (payload) {
        try {
            this.preventJsonUpdate = true;
            if (!this.preventCardUpdate) {
                this.designerSurface.setCardPayloadAsObject(payload);
            }
        }
        finally {
            this.preventJsonUpdate = false;
        }
        this.updateJsonFromCard();
    };
    CardDesigner.prototype.getCard = function () {
        return this.designerSurface.card.toJSON();
    };
    Object.defineProperty(CardDesigner.prototype, "currentTargetVersion", {
        get: function () {
            if (this._versionChoicePicker) {
                return Shared.SupportedTargetVersions[parseInt(this._versionChoicePicker.value)];
            }
            else {
                return Shared.Versions.latest;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesigner.prototype, "dataStructure", {
        get: function () {
            return this._dataStructure;
        },
        set: function (value) {
            this._dataStructure = value;
            this.buildDataExplorer();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesigner.prototype, "sampleData", {
        get: function () {
            return this._sampleData;
        },
        set: function (value) {
            this._sampleData = value;
            this.setSampleDataPayload(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesigner.prototype, "activeHostContainer", {
        get: function () {
            return this._activeHostContainer;
        },
        set: function (value) {
            if (this._activeHostContainer !== value) {
                this._activeHostContainer = value;
                this.activeHostContainerChanged();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesigner.prototype, "canUndo", {
        get: function () {
            return this._undoStackIndex >= 1;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesigner.prototype, "canRedo", {
        get: function () {
            return this._undoStackIndex < this._undoStack.length - 1;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesigner.prototype, "card", {
        get: function () {
            return this._card;
        },
        set: function (value) {
            if (this._card != value) {
                if (this._card) {
                    this._card.designMode = false;
                }
                this._card = value;
                if (this._card) {
                    this._card.designMode = true;
                    this._card.hostConfig = this.activeHostContainer.getHostConfig();
                }
                this.recreateDesignerSurface();
                this.updateCardFromJson(true);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesigner.prototype, "designerSurface", {
        get: function () {
            return this._designerSurface;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesigner.prototype, "treeViewToolbox", {
        get: function () {
            return this._treeViewToolbox;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesigner.prototype, "propertySheetToolbox", {
        get: function () {
            return this._propertySheetToolbox;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesigner.prototype, "jsonEditorToolbox", {
        get: function () {
            return this._cardEditorToolbox;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesigner.prototype, "toolPaletteToolbox", {
        get: function () {
            return this._toolPaletteToolbox;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesigner.prototype, "dataToolbox", {
        get: function () {
            return this._dataToolbox;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesigner.prototype, "assetPath", {
        get: function () {
            return this._assetPath;
        },
        set: function (value) {
            this._assetPath = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardDesigner.prototype, "customPaletteItems", {
        get: function () {
            return this._customPeletteItems;
        },
        set: function (value) {
            this._customPeletteItems = value;
            this.buildPalette();
        },
        enumerable: true,
        configurable: true
    });
    CardDesigner.onProcessMarkdown = null;
    CardDesigner.MAX_UNDO_STACK_SIZE = 50;
    return CardDesigner;
}());
exports.CardDesigner = CardDesigner;
(function (CardDesigner) {
    var ToolbarCommands = /** @class */ (function () {
        function ToolbarCommands() {
        }
        ToolbarCommands.FullScreen = "__fullScreenButton";
        ToolbarCommands.OpenPayload = "__openPayload";
        ToolbarCommands.HostAppPicker = "__hostAppPicker";
        ToolbarCommands.VersionPicker = "__versionPicker";
        ToolbarCommands.Undo = "__undoButton";
        ToolbarCommands.Redo = "__redoButton";
        ToolbarCommands.NewCard = "__newCardButton";
        ToolbarCommands.CopyJSON = "__copyJsonButton";
        ToolbarCommands.TogglePreview = "__togglePreviewButton";
        return ToolbarCommands;
    }());
    CardDesigner.ToolbarCommands = ToolbarCommands;
})(CardDesigner = exports.CardDesigner || (exports.CardDesigner = {}));
exports.CardDesigner = CardDesigner;


/***/ }),

/***/ "./src/catalogue.ts":
/*!**************************!*\
  !*** ./src/catalogue.ts ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var downloader_1 = __webpack_require__(/*! ./downloader */ "./src/downloader.ts");
var CatalogueEntry = /** @class */ (function () {
    function CatalogueEntry(displayName, cardPayloadUrl, sampleDataUrl) {
        this.displayName = displayName;
        this.cardPayloadUrl = cardPayloadUrl;
        this._cardPayloadDownloaded = false;
        this._sampleDataDownloaded = false;
        this.onDownloaded = null;
        this.sampleDataUrl = sampleDataUrl;
    }
    CatalogueEntry.prototype.downloadCompleted = function () {
        if (this._cardPayloadDownloaded && this._sampleDataDownloaded && this.onDownloaded) {
            this.onDownloaded(this);
        }
    };
    CatalogueEntry.prototype.download = function () {
        var _this = this;
        var payloadDownloader = new downloader_1.Downloader(this.cardPayloadUrl);
        payloadDownloader.onSuccess = function () {
            _this._cardPayload = payloadDownloader.data;
            _this._cardPayloadDownloaded = true;
            _this.downloadCompleted();
        };
        payloadDownloader.onError = function () {
            _this._cardPayloadDownloaded = true;
            _this.downloadCompleted();
        };
        payloadDownloader.download();
        if (!Adaptive.isNullOrEmpty(this.sampleDataUrl)) {
            var sampleDataDownloader_1 = new downloader_1.Downloader(this.sampleDataUrl);
            sampleDataDownloader_1.onSuccess = function () {
                _this._sampleData = sampleDataDownloader_1.data;
                _this._sampleDataDownloaded = true;
                _this.downloadCompleted();
            };
            sampleDataDownloader_1.onError = function () {
                _this._sampleDataDownloaded = true;
                _this.downloadCompleted();
            };
            sampleDataDownloader_1.download();
        }
        else {
            this._sampleDataDownloaded = true;
            this.downloadCompleted();
        }
    };
    Object.defineProperty(CatalogueEntry.prototype, "cardPayload", {
        get: function () {
            return this._cardPayload;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CatalogueEntry.prototype, "sampleData", {
        get: function () {
            return this._sampleData;
        },
        enumerable: true,
        configurable: true
    });
    return CatalogueEntry;
}());
exports.CatalogueEntry = CatalogueEntry;
function parseCatalogue(input) {
    var entries = null;
    if (Array.isArray(input)) {
        entries = input;
    }
    else {
        entries = Array.isArray(input["entries"]) ? input["entried"] : null;
    }
    var result = [];
    if (entries != null) {
        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {
            var entry = entries_1[_i];
            if (typeof entry === "object") {
                var displayName = Adaptive.getStringValue(entry["displayName"]);
                var cardPayloadUrl = Adaptive.getStringValue(entry["cardPayloadUrl"]);
                if (!Adaptive.isNullOrEmpty(displayName) && !Adaptive.isNullOrEmpty(cardPayloadUrl)) {
                    result.push(new CatalogueEntry(displayName, cardPayloadUrl, Adaptive.getStringValue(entry["dataSampleUrl"])));
                }
            }
        }
    }
    return result;
}
exports.parseCatalogue = parseCatalogue;


/***/ }),

/***/ "./src/constants.ts":
/*!**************************!*\
  !*** ./src/constants.ts ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
exports.otherTestPayload = "{\n\t\"$schema\": \"http://adaptivecards.io/schemas/adaptive-card.json\",\n\t\"type\": \"AdaptiveCard\",\n\t\"version\": \"1.0\",\n\t\"body\": [\n\t\t{\n\t\t\t\"type\": \"ActionSet\",\n\t\t\t\"actions\": [\n\t\t\t\t{\n\t\t\t\t\t\"type\": \"Action.ShowCard\",\n\t\t\t\t\t\"title\": \"Set due date\",\n\t\t\t\t\t\"card\": {\n\t\t\t\t\t\t\"type\": \"AdaptiveCard\",\n\t\t\t\t\t\t\"body\": [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"type\": \"Input.Date\",\n\t\t\t\t\t\t\t\t\"id\": \"dueDate\",\n\t\t\t\t\t\t\t\t\"title\": \"Select due date\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"type\": \"Input.Text\",\n\t\t\t\t\t\t\t\t\"id\": \"comment\",\n\t\t\t\t\t\t\t\t\"isMultiline\": true,\n\t\t\t\t\t\t\t\t\"placeholder\": \"Add a comment\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\t\"actions\": [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"type\": \"Action.OpenUrl\",\n\t\t\t\t\t\t\t\t\"title\": \"OK\",\n\t\t\t\t\t\t\t\t\"url\": \"https://adaptivecards.io\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"type\": \"Action.OpenUrl\",\n\t\t\t\t\t\"title\": \"View\",\n\t\t\t\t\t\"url\": \"https://adaptivecards.io\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t]\n}";
exports.defaultPayload = "{\n    \"type\": \"AdaptiveCard\",\n    \"body\": [\n        {\n            \"type\": \"TextBlock\",\n            \"size\": \"Medium\",\n            \"weight\": \"Bolder\",\n            \"text\": \"Publish Adaptive Card schema\"\n        },\n        {\n            \"type\": \"ColumnSet\",\n            \"columns\": [\n                {\n                    \"type\": \"Column\",\n                    \"items\": [\n                        {\n                            \"type\": \"Image\",\n                            \"style\": \"Person\",\n                            \"url\": \"https://pbs.twimg.com/profile_images/3647943215/d7f12830b3c17a5a9e4afcc370e3a37e_400x400.jpeg\",\n                            \"size\": \"Small\"\n                        }\n                    ],\n                    \"width\": \"auto\"\n                },\n                {\n                    \"type\": \"Column\",\n                    \"items\": [\n                        {\n                            \"type\": \"TextBlock\",\n                            \"weight\": \"Bolder\",\n                            \"text\": \"Matt Hidinger\",\n                            \"wrap\": true\n                        },\n                        {\n                            \"type\": \"TextBlock\",\n                            \"spacing\": \"None\",\n                            \"text\": \"Created {{DATE(2017-02-14T06:08:39Z,SHORT)}}\",\n                            \"isSubtle\": true,\n                            \"wrap\": true\n                        }\n                    ],\n                    \"width\": \"stretch\"\n                }\n            ]\n        },\n        {\n            \"type\": \"TextBlock\",\n            \"text\": \"Now that we have defined the main rules and features of the format, we need to produce a schema and publish it to GitHub. The schema will be the starting point of our reference documentation.\",\n            \"wrap\": true\n        },\n        {\n            \"type\": \"FactSet\",\n            \"facts\": [\n                {\n                    \"title\": \"Board:\",\n                    \"value\": \"Adaptive Card\"\n                },\n                {\n                    \"title\": \"List:\",\n                    \"value\": \"Backlog\"\n                },\n                {\n                    \"title\": \"Assigned to:\",\n                    \"value\": \"Matt Hidinger\"\n                },\n                {\n                    \"title\": \"Due date:\",\n                    \"value\": \"Not set\"\n                }\n            ]\n        }\n    ],\n    \"actions\": [\n        {\n            \"type\": \"Action.ShowCard\",\n            \"title\": \"Set due date\",\n            \"card\": {\n                \"type\": \"AdaptiveCard\",\n                \"body\": [\n                    {\n                        \"type\": \"Input.Date\",\n                        \"id\": \"dueDate\"\n                    },\n                    {\n                        \"type\": \"Input.Text\",\n                        \"id\": \"comment\",\n                        \"placeholder\": \"Add a comment\",\n                        \"isMultiline\": true\n                    }\n                ],\n                \"actions\": [\n                    {\n                        \"type\": \"Action.OpenUrl\",\n                        \"title\": \"OK\",\n                        \"url\": \"http://adaptivecards.io\"\n                    }\n                ],\n                \"$schema\": \"http://adaptivecards.io/schemas/adaptive-card.json\"\n            }\n        },\n        {\n            \"type\": \"Action.OpenUrl\",\n            \"title\": \"View\",\n            \"url\": \"http://adaptivecards.io\"\n        }\n    ],\n    \"$schema\": \"http://adaptivecards.io/schemas/adaptive-card.json\",\n    \"version\": \"1.0\"\n}";
exports.defaultTemplatePayload = "{\n    \"type\": \"AdaptiveCard\",\n    \"body\": [\n        {\n            \"type\": \"Container\",\n            \"items\": [\n                {\n                    \"type\": \"TextBlock\",\n                    \"text\": \"This example uses [Adaptive Card Templating](https://docs.microsoft.com/en-us/adaptive-cards/templating/) *(Preview)*\",\n                    \"size\": \"Medium\",\n                    \"wrap\": true\n                },\n                {\n                    \"type\": \"TextBlock\",\n                    \"text\": \"Click the **Preview mode** toolbar button to see the card bound to the **Sample Data** in the lower-right. Sample Data helps design your card by simulating the real data.\",\n                    \"wrap\": true\n                },\n                {\n                    \"type\": \"TextBlock\",\n                    \"text\": \"When you're ready to populate it with real data, use the Adaptive Card [templating SDKs](https://docs.microsoft.com/en-us/adaptive-cards/templating/sdk).\",\n                    \"wrap\": true\n                }\n            ],\n            \"style\": \"good\",\n            \"bleed\": true\n        },\n        {\n            \"type\": \"TextBlock\",\n            \"size\": \"Medium\",\n            \"weight\": \"Bolder\",\n            \"text\": \"{title}\"\n        },\n        {\n            \"type\": \"ColumnSet\",\n            \"columns\": [\n                {\n                    \"type\": \"Column\",\n                    \"items\": [\n                        {\n                            \"type\": \"Image\",\n                            \"style\": \"Person\",\n                            \"url\": \"{creator.profileImage}\",\n                            \"size\": \"Small\"\n                        }\n                    ],\n                    \"width\": \"auto\"\n                },\n                {\n                    \"type\": \"Column\",\n                    \"items\": [\n                        {\n                            \"type\": \"TextBlock\",\n                            \"weight\": \"Bolder\",\n                            \"text\": \"{creator.name}\",\n                            \"wrap\": true\n                        },\n                        {\n                            \"type\": \"TextBlock\",\n                            \"spacing\": \"None\",\n                            \"text\": \"Created {{DATE({createdUtc},SHORT)}}\",\n                            \"isSubtle\": true,\n                            \"wrap\": true\n                        }\n                    ],\n                    \"width\": \"stretch\"\n                }\n            ]\n        },\n        {\n            \"type\": \"TextBlock\",\n            \"text\": \"{description}\",\n            \"wrap\": true\n        },\n        {\n            \"type\": \"FactSet\",\n            \"facts\": [\n                {\n                    \"$data\": \"{properties}\",\n                    \"title\": \"{key}:\",\n                    \"value\": \"{value}\"\n                }\n            ]\n        }\n    ],\n    \"actions\": [\n        {\n            \"type\": \"Action.ShowCard\",\n            \"title\": \"Set due date\",\n            \"card\": {\n                \"type\": \"AdaptiveCard\",\n                \"body\": [\n                    {\n                        \"type\": \"Input.Date\",\n                        \"id\": \"dueDate\"\n                    },\n                    {\n                        \"type\": \"Input.Text\",\n                        \"id\": \"comment\",\n                        \"placeholder\": \"Add a comment\",\n                        \"isMultiline\": true\n                    }\n                ],\n                \"actions\": [\n                    {\n                        \"type\": \"Action.Submit\",\n                        \"title\": \"OK\"\n                    }\n                ],\n                \"$schema\": \"http://adaptivecards.io/schemas/adaptive-card.json\"\n            }\n        },\n        {\n            \"type\": \"Action.OpenUrl\",\n            \"title\": \"View\",\n            \"url\": \"{viewUrl}\"\n        }\n    ],\n    \"$schema\": \"http://adaptivecards.io/schemas/adaptive-card.json\",\n    \"version\": \"1.0\"\n}";
exports.defaultDataPayload = "{\n    \"title\": \"Publish Adaptive Card Schema\",\n    \"description\": \"Now that we have defined the main rules and features of the format, we need to produce a schema and publish it to GitHub. The schema will be the starting point of our reference documentation.\",\n    \"creator\": {\n        \"name\": \"Matt Hidinger\",\n        \"profileImage\": \"https://pbs.twimg.com/profile_images/3647943215/d7f12830b3c17a5a9e4afcc370e3a37e_400x400.jpeg\"\n    },\n    \"createdUtc\": \"2017-02-14T06:08:39Z\",\n    \"viewUrl\": \"https://adaptivecards.io\",\n    \"properties\": [\n        { \"key\": \"Board\", \"value\": \"Adaptive Cards\" },\n        { \"key\": \"List\", \"value\": \"Backlog\" },\n        { \"key\": \"Assigned to\", \"value\": \"Matt Hidinger\" },\n        { \"key\": \"Due date\", \"value\": \"Not set\" }\n    ]\n}";


/***/ }),

/***/ "./src/containers/bf-image/bf-image-container.ts":
/*!*******************************************************!*\
  !*** ./src/containers/bf-image/bf-image-container.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var host_container_1 = __webpack_require__(/*! ../host-container */ "./src/containers/host-container.ts");
var hostConfig = __webpack_require__(/*! ../../hostConfigs/render-to-image.json */ "./src/hostConfigs/render-to-image.json");
var BotFrameworkContainer = /** @class */ (function (_super) {
    __extends(BotFrameworkContainer, _super);
    function BotFrameworkContainer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BotFrameworkContainer.prototype.renderTo = function (hostElement) {
        this.cardHost.classList.add("bf-images-card");
        var frame = document.createElement("div");
        frame.className = "bf-images-frame";
        frame.appendChild(this.cardHost);
        hostElement.appendChild(frame);
    };
    BotFrameworkContainer.prototype.getHostConfig = function () {
        return new Adaptive.HostConfig(hostConfig);
    };
    return BotFrameworkContainer;
}(host_container_1.HostContainer));
exports.BotFrameworkContainer = BotFrameworkContainer;


/***/ }),

/***/ "./src/containers/cortana-classic/cortana-classic-container.ts":
/*!*********************************************************************!*\
  !*** ./src/containers/cortana-classic/cortana-classic-container.ts ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var host_container_1 = __webpack_require__(/*! ../host-container */ "./src/containers/host-container.ts");
var hostConfig = __webpack_require__(/*! ../../hostConfigs/cortana-skills-classic.json */ "./src/hostConfigs/cortana-skills-classic.json");
var CortanaClassicContainer = /** @class */ (function (_super) {
    __extends(CortanaClassicContainer, _super);
    function CortanaClassicContainer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CortanaClassicContainer.prototype.renderTo = function (hostElement) {
        this.cardHost.classList.add("cortana-card");
        var leftSide = document.createElement("div");
        leftSide.classList.add("cortana-leftside");
        var topLeft = document.createElement("div");
        topLeft.classList.add("cortana-topleft");
        var middleLeft = document.createElement("div");
        middleLeft.classList.add("cortana-middleleft");
        var bottomLeft = document.createElement("div");
        bottomLeft.classList.add("cortana-bottomleft");
        leftSide.appendChild(topLeft);
        leftSide.appendChild(middleLeft);
        leftSide.appendChild(bottomLeft);
        var rightSide = document.createElement("div");
        rightSide.classList.add("cortana-rightside");
        var header = document.createElement("div");
        header.classList.add("cortana-header");
        var searchBox = document.createElement("div");
        searchBox.classList.add("cortana-searchbox");
        var magnifyingGlass = document.createElement("div");
        magnifyingGlass.classList.add("cortana-searchbox-magnifyingglass");
        var searchBoxMiddle = document.createElement("div");
        searchBoxMiddle.classList.add("cortana-searchbox-middle");
        var microphone = document.createElement("div");
        microphone.classList.add("cortana-searchbox-microphone");
        searchBox.appendChild(magnifyingGlass);
        searchBox.appendChild(searchBoxMiddle);
        searchBox.appendChild(microphone);
        rightSide.appendChild(header);
        rightSide.appendChild(this.cardHost);
        rightSide.appendChild(searchBox);
        var frame = document.createElement("div");
        frame.classList.add("cortana-frame");
        frame.appendChild(leftSide);
        frame.appendChild(rightSide);
        hostElement.classList.add("cortana-outer-frame");
        hostElement.appendChild(frame);
    };
    CortanaClassicContainer.prototype.getHostConfig = function () {
        return new Adaptive.HostConfig(hostConfig);
    };
    return CortanaClassicContainer;
}(host_container_1.HostContainer));
exports.CortanaClassicContainer = CortanaClassicContainer;


/***/ }),

/***/ "./src/containers/cortana/cortana-container.ts":
/*!*****************************************************!*\
  !*** ./src/containers/cortana/cortana-container.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var host_container_1 = __webpack_require__(/*! ../host-container */ "./src/containers/host-container.ts");
var hostConfigLight = __webpack_require__(/*! ../../hostConfigs/cortana-skills-light.json */ "./src/hostConfigs/cortana-skills-light.json");
var hostConfigDark = __webpack_require__(/*! ../../hostConfigs/cortana-skills-dark.json */ "./src/hostConfigs/cortana-skills-dark.json");
var BaseCortanaContainer = /** @class */ (function (_super) {
    __extends(BaseCortanaContainer, _super);
    function BaseCortanaContainer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BaseCortanaContainer.prototype.renderTo = function (hostElement) {
        var frame = document.createElement("div");
        frame.appendChild(this.cardHost);
        hostElement.appendChild(frame);
    };
    return BaseCortanaContainer;
}(host_container_1.HostContainer));
var LightCortanaContainer = /** @class */ (function (_super) {
    __extends(LightCortanaContainer, _super);
    function LightCortanaContainer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    LightCortanaContainer.prototype.getHostConfig = function () {
        return new Adaptive.HostConfig(hostConfigLight);
    };
    return LightCortanaContainer;
}(BaseCortanaContainer));
exports.LightCortanaContainer = LightCortanaContainer;
var DarkCortanaContainer = /** @class */ (function (_super) {
    __extends(DarkCortanaContainer, _super);
    function DarkCortanaContainer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DarkCortanaContainer.prototype.getBackgroundColor = function () {
        return "#201E1F";
    };
    DarkCortanaContainer.prototype.getHostConfig = function () {
        return new Adaptive.HostConfig(hostConfigDark);
    };
    return DarkCortanaContainer;
}(BaseCortanaContainer));
exports.DarkCortanaContainer = DarkCortanaContainer;


/***/ }),

/***/ "./src/containers/default/default-container.ts":
/*!*****************************************************!*\
  !*** ./src/containers/default/default-container.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var host_container_1 = __webpack_require__(/*! ../host-container */ "./src/containers/host-container.ts");
var DefaultContainer = /** @class */ (function (_super) {
    __extends(DefaultContainer, _super);
    function DefaultContainer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DefaultContainer.prototype.renderTo = function (hostElement) {
        hostElement.classList.add("card-frame");
        hostElement.appendChild(this.cardHost);
    };
    return DefaultContainer;
}(host_container_1.HostContainer));
exports.DefaultContainer = DefaultContainer;


/***/ }),

/***/ "./src/containers/host-container.ts":
/*!******************************************!*\
  !*** ./src/containers/host-container.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var hostConfig = __webpack_require__(/*! ../hostConfigs/sample.json */ "./src/hostConfigs/sample.json");
var HostContainer = /** @class */ (function () {
    function HostContainer(name, styleSheet) {
        this.supportsActionBar = false;
        this.name = name;
        this.styleSheet = styleSheet;
        this._cardHost = document.createElement("div");
        this._cardHost.className = "cardHost";
    }
    HostContainer.prototype.initialize = function () {
        Adaptive.AdaptiveCard.elementTypeRegistry.reset();
        Adaptive.AdaptiveCard.actionTypeRegistry.reset();
        Adaptive.AdaptiveCard.useMarkdownInRadioButtonAndCheckbox = true;
        Adaptive.AdaptiveCard.useAdvancedCardBottomTruncation = false;
        Adaptive.AdaptiveCard.useAdvancedTextBlockTruncation = true;
    };
    HostContainer.prototype.getBackgroundColor = function () {
        return "#F6F6F6";
    };
    HostContainer.prototype.parseElement = function (element, json) {
        // Do nothing in base implementation
    };
    HostContainer.prototype.anchorClicked = function (element, anchor) {
        // Not handled by the host container by default
        return false;
    };
    HostContainer.prototype.getHostConfig = function () {
        return new Adaptive.HostConfig(hostConfig);
    };
    Object.defineProperty(HostContainer.prototype, "cardHost", {
        get: function () {
            return this._cardHost;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HostContainer.prototype, "isFixedHeight", {
        get: function () {
            return false;
        },
        enumerable: true,
        configurable: true
    });
    return HostContainer;
}());
exports.HostContainer = HostContainer;


/***/ }),

/***/ "./src/containers/index.ts":
/*!*********************************!*\
  !*** ./src/containers/index.ts ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
__export(__webpack_require__(/*! ./host-container */ "./src/containers/host-container.ts"));
__export(__webpack_require__(/*! ./default/default-container */ "./src/containers/default/default-container.ts"));
__export(__webpack_require__(/*! ./bf-image/bf-image-container */ "./src/containers/bf-image/bf-image-container.ts"));
__export(__webpack_require__(/*! ./cortana-classic/cortana-classic-container */ "./src/containers/cortana-classic/cortana-classic-container.ts"));
__export(__webpack_require__(/*! ./cortana/cortana-container */ "./src/containers/cortana/cortana-container.ts"));
__export(__webpack_require__(/*! ./notifications/toast-container */ "./src/containers/notifications/toast-container.ts"));
__export(__webpack_require__(/*! ./outlook/outlook-container */ "./src/containers/outlook/outlook-container.ts"));
__export(__webpack_require__(/*! ./skype/skype-container */ "./src/containers/skype/skype-container.ts"));
__export(__webpack_require__(/*! ./teams/teams-container */ "./src/containers/teams/teams-container.ts"));
__export(__webpack_require__(/*! ./timeline/timeline-container */ "./src/containers/timeline/timeline-container.ts"));
__export(__webpack_require__(/*! ./webchat/webchat-container */ "./src/containers/webchat/webchat-container.ts"));


/***/ }),

/***/ "./src/containers/notifications/toast-container.ts":
/*!*********************************************************!*\
  !*** ./src/containers/notifications/toast-container.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var host_container_1 = __webpack_require__(/*! ../host-container */ "./src/containers/host-container.ts");
var hostConfig = __webpack_require__(/*! ../../hostConfigs/windows-notification.json */ "./src/hostConfigs/windows-notification.json");
var ToastContainer = /** @class */ (function (_super) {
    __extends(ToastContainer, _super);
    function ToastContainer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ToastContainer.prototype.renderTo = function (hostElement) {
        this.cardHost.classList.add("toast-card");
        var frame = document.createElement("div");
        frame.className = "toast-frame";
        frame.appendChild(this.cardHost);
        hostElement.appendChild(frame);
    };
    ToastContainer.prototype.getHostConfig = function () {
        return new Adaptive.HostConfig(hostConfig);
    };
    return ToastContainer;
}(host_container_1.HostContainer));
exports.ToastContainer = ToastContainer;


/***/ }),

/***/ "./src/containers/outlook/outlook-container.ts":
/*!*****************************************************!*\
  !*** ./src/containers/outlook/outlook-container.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var host_container_1 = __webpack_require__(/*! ../host-container */ "./src/containers/host-container.ts");
var hostConfig = __webpack_require__(/*! ../../hostConfigs/outlook-desktop.json */ "./src/hostConfigs/outlook-desktop.json");
var OutlookContainer = /** @class */ (function (_super) {
    __extends(OutlookContainer, _super);
    function OutlookContainer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    OutlookContainer.prototype.renderTo = function (hostElement) {
        hostElement.classList.add("outlook-frame");
        hostElement.appendChild(this.cardHost);
    };
    OutlookContainer.prototype.initialize = function () {
        _super.prototype.initialize.call(this);
        Adaptive.AdaptiveCard.actionTypeRegistry.unregisterType("Action.Submit");
        Adaptive.AdaptiveCard.actionTypeRegistry.registerType("Action.Http", function () { return new Adaptive.HttpAction(); });
        Adaptive.AdaptiveCard.useMarkdownInRadioButtonAndCheckbox = false;
    };
    OutlookContainer.prototype.parsePadding = function (json) {
        if (json) {
            if (typeof json === "string") {
                var uniformPadding = Adaptive.getEnumValue(Adaptive.Spacing, json, Adaptive.Spacing.None);
                return new Adaptive.PaddingDefinition(uniformPadding, uniformPadding, uniformPadding, uniformPadding);
            }
            else if (typeof json === "object") {
                return new Adaptive.PaddingDefinition(Adaptive.getEnumValue(Adaptive.Spacing, json["top"], Adaptive.Spacing.None), Adaptive.getEnumValue(Adaptive.Spacing, json["right"], Adaptive.Spacing.None), Adaptive.getEnumValue(Adaptive.Spacing, json["bottom"], Adaptive.Spacing.None), Adaptive.getEnumValue(Adaptive.Spacing, json["left"], Adaptive.Spacing.None));
            }
        }
        return null;
    };
    OutlookContainer.prototype.parseElement = function (element, json) {
        if (element instanceof Adaptive.AdaptiveCard) {
            var card = element;
            var actionArray = [];
            card["resources"] = { actions: actionArray };
            if (typeof json["resources"] === "object") {
                var actionResources = json["resources"]["actions"];
                for (var i = 0; i < actionResources.length; i++) {
                    var action = Adaptive.AdaptiveCard.actionTypeRegistry.createInstance(actionResources[i]["type"]);
                    if (action) {
                        action.parse(actionResources[i]);
                        action.setParent(card);
                        actionArray.push(action);
                    }
                }
            }
        }
        if (element instanceof Adaptive.Image) {
            element.backgroundColor = json["backgroundColor"];
        }
        if (element instanceof Adaptive.Container) {
            var padding = this.parsePadding(json["padding"]);
            if (padding) {
                element.padding = padding;
            }
        }
        if (element instanceof Adaptive.ColumnSet) {
            var padding = this.parsePadding(json["padding"]);
            if (padding) {
                element.padding = padding;
            }
        }
    };
    OutlookContainer.prototype.anchorClicked = function (element, anchor) {
        var regEx = /^action:([a-z0-9]+)$/ig;
        var rootCard = element.getRootElement();
        var matches = regEx.exec(anchor.href);
        if (matches) {
            var actionId = matches[1];
            if (rootCard) {
                var actionArray = rootCard["resources"]["actions"];
                for (var i = 0; i < actionArray.length; i++) {
                    if (actionArray[i].id == actionId) {
                        actionArray[i].execute();
                        return true;
                    }
                }
            }
        }
        return false;
    };
    OutlookContainer.prototype.getHostConfig = function () {
        return new Adaptive.HostConfig(hostConfig);
    };
    return OutlookContainer;
}(host_container_1.HostContainer));
exports.OutlookContainer = OutlookContainer;


/***/ }),

/***/ "./src/containers/skype/skype-container.ts":
/*!*************************************************!*\
  !*** ./src/containers/skype/skype-container.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var host_container_1 = __webpack_require__(/*! ../host-container */ "./src/containers/host-container.ts");
var hostConfig = __webpack_require__(/*! ../../hostConfigs/skype.json */ "./src/hostConfigs/skype.json");
var SkypeContainer = /** @class */ (function (_super) {
    __extends(SkypeContainer, _super);
    function SkypeContainer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SkypeContainer.prototype.renderTo = function (hostElement) {
        this.cardHost.classList.add("skype-card");
        var frame = document.createElement("div");
        frame.className = "skype-frame";
        // Draw the hexagon bot logo
        var hexagonOuter = document.createElement("div");
        hexagonOuter.className = "skype-hexagon-outer";
        var hexagonInner = document.createElement("div");
        hexagonInner.className = "skype-hexagon-inner";
        var botLogo = document.createElement("div");
        botLogo.className = "skype-bot-logo";
        hexagonOuter.appendChild(hexagonInner);
        hexagonInner.appendChild(botLogo);
        frame.appendChild(hexagonOuter);
        frame.appendChild(this.cardHost);
        hostElement.appendChild(frame);
    };
    SkypeContainer.prototype.getHostConfig = function () {
        return new Adaptive.HostConfig(hostConfig);
    };
    return SkypeContainer;
}(host_container_1.HostContainer));
exports.SkypeContainer = SkypeContainer;


/***/ }),

/***/ "./src/containers/teams/teams-container.ts":
/*!*************************************************!*\
  !*** ./src/containers/teams/teams-container.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var host_container_1 = __webpack_require__(/*! ../host-container */ "./src/containers/host-container.ts");
var hostConfigLight = __webpack_require__(/*! ../../hostConfigs/microsoft-teams-light.json */ "./src/hostConfigs/microsoft-teams-light.json");
var hostConfigDark = __webpack_require__(/*! ../../hostConfigs/microsoft-teams-dark.json */ "./src/hostConfigs/microsoft-teams-dark.json");
var BaseTeamsContainer = /** @class */ (function (_super) {
    __extends(BaseTeamsContainer, _super);
    function BaseTeamsContainer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BaseTeamsContainer.prototype.renderTo = function (hostElement) {
        var outerFrame = document.createElement("div");
        outerFrame.className = "teams-frame";
        // Draw the hexagon bot logo
        var hexagonOuter = document.createElement("div");
        hexagonOuter.className = "teams-hexagon-outer";
        var hexagonInner = document.createElement("div");
        hexagonInner.className = "teams-hexagon-inner";
        var botLogo = document.createElement("div");
        botLogo.className = "teams-bot-logo";
        hexagonOuter.appendChild(hexagonInner);
        hexagonInner.appendChild(botLogo);
        outerFrame.appendChild(hexagonOuter);
        var innerFrame = document.createElement("div");
        innerFrame.className = "teams-inner-frame";
        this.cardHost.classList.add("teams-card");
        var botNameAndTime = document.createElement("div");
        botNameAndTime.className = "teams-botNameAndTime";
        botNameAndTime.innerText = "Test Bot    2:36 PM";
        innerFrame.appendChild(botNameAndTime);
        innerFrame.appendChild(this.cardHost);
        outerFrame.appendChild(innerFrame);
        hostElement.appendChild(outerFrame);
    };
    return BaseTeamsContainer;
}(host_container_1.HostContainer));
var LightTeamsContainer = /** @class */ (function (_super) {
    __extends(LightTeamsContainer, _super);
    function LightTeamsContainer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    LightTeamsContainer.prototype.getHostConfig = function () {
        return new Adaptive.HostConfig(hostConfigLight);
    };
    return LightTeamsContainer;
}(BaseTeamsContainer));
exports.LightTeamsContainer = LightTeamsContainer;
var DarkTeamsContainer = /** @class */ (function (_super) {
    __extends(DarkTeamsContainer, _super);
    function DarkTeamsContainer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DarkTeamsContainer.prototype.getBackgroundColor = function () {
        return "#201E1F";
    };
    DarkTeamsContainer.prototype.getHostConfig = function () {
        return new Adaptive.HostConfig(hostConfigDark);
    };
    return DarkTeamsContainer;
}(BaseTeamsContainer));
exports.DarkTeamsContainer = DarkTeamsContainer;


/***/ }),

/***/ "./src/containers/timeline/timeline-container.ts":
/*!*******************************************************!*\
  !*** ./src/containers/timeline/timeline-container.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var host_container_1 = __webpack_require__(/*! ../host-container */ "./src/containers/host-container.ts");
var hostConfig = __webpack_require__(/*! ../../hostConfigs/windows-timeline.json */ "./src/hostConfigs/windows-timeline.json");
var TimelineContainer = /** @class */ (function (_super) {
    __extends(TimelineContainer, _super);
    function TimelineContainer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TimelineContainer.prototype.initialize = function () {
        Adaptive.AdaptiveCard.elementTypeRegistry.reset();
        Adaptive.AdaptiveCard.actionTypeRegistry.reset();
        Adaptive.AdaptiveCard.useMarkdownInRadioButtonAndCheckbox = true;
        Adaptive.AdaptiveCard.useAdvancedCardBottomTruncation = true;
        Adaptive.AdaptiveCard.useAdvancedTextBlockTruncation = true;
    };
    TimelineContainer.prototype.renderTo = function (hostElement) {
        var target = document.getElementById("designerHost");
        var frame = document.createElement("div");
        frame.className = "timeline-frame";
        target.appendChild(frame);
        var cardContainer = document.createElement("div");
        cardContainer.className = "timeline-card";
        frame.appendChild(cardContainer);
        this.cardHost.style.height = "100%";
        this.cardHost.style.width = "100%";
        this.cardHost.style.overflow = "hidden";
        cardContainer.appendChild(this.cardHost);
        hostElement.appendChild(frame);
    };
    TimelineContainer.prototype.getHostConfig = function () {
        return new Adaptive.HostConfig(hostConfig);
    };
    Object.defineProperty(TimelineContainer.prototype, "isFixedHeight", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    return TimelineContainer;
}(host_container_1.HostContainer));
exports.TimelineContainer = TimelineContainer;


/***/ }),

/***/ "./src/containers/webchat/webchat-container.ts":
/*!*****************************************************!*\
  !*** ./src/containers/webchat/webchat-container.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var host_container_1 = __webpack_require__(/*! ../host-container */ "./src/containers/host-container.ts");
var hostConfig = __webpack_require__(/*! ../../hostConfigs/webchat.json */ "./src/hostConfigs/webchat.json");
var WebChatContainer = /** @class */ (function (_super) {
    __extends(WebChatContainer, _super);
    function WebChatContainer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    WebChatContainer.prototype.renderTo = function (hostElement) {
        this.cardHost.classList.add("webChatOuterContainer");
        var frame = document.createElement("div");
        frame.className = "webChatInnerContainer";
        frame.appendChild(this.cardHost);
        hostElement.appendChild(frame);
    };
    WebChatContainer.prototype.getHostConfig = function () {
        return new Adaptive.HostConfig(hostConfig);
    };
    return WebChatContainer;
}(host_container_1.HostContainer));
exports.WebChatContainer = WebChatContainer;


/***/ }),

/***/ "./src/data-treeitem.ts":
/*!******************************!*\
  !*** ./src/data-treeitem.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var base_tree_item_1 = __webpack_require__(/*! ./base-tree-item */ "./src/base-tree-item.ts");
var DataTreeItem = /** @class */ (function (_super) {
    __extends(DataTreeItem, _super);
    function DataTreeItem(field) {
        var _this = _super.call(this) || this;
        _this._children = null;
        _this.field = field;
        _this._level = 0;
        var currentField = field;
        while (currentField) {
            _this._level++;
            currentField = currentField.parent;
        }
        return _this;
    }
    DataTreeItem.prototype.buildChildList = function () {
        if (!this._children) {
            this._children = [];
            var properties = this.field.children;
            if (properties) {
                var keys = Object.keys(properties);
                for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
                    var key = keys_1[_i];
                    this._children.push(new DataTreeItem(properties[key]));
                }
            }
        }
    };
    DataTreeItem.prototype.getLabelText = function () {
        return this.field.name;
    };
    DataTreeItem.prototype.getAdditionalText = function () {
        return this.field.typeName;
    };
    DataTreeItem.prototype.getAdditionalTextClass = function () {
        return "acd-data-tree-item-additionalText";
    };
    DataTreeItem.prototype.isDraggable = function () {
        return true;
    };
    DataTreeItem.prototype.getChildCount = function () {
        this.buildChildList();
        return this._children.length;
    };
    DataTreeItem.prototype.getChildAt = function (index) {
        this.buildChildList();
        return this._children[index];
    };
    return DataTreeItem;
}(base_tree_item_1.BaseTreeItem));
exports.DataTreeItem = DataTreeItem;


/***/ }),

/***/ "./src/data.ts":
/*!*********************!*\
  !*** ./src/data.ts ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var ValueKind;
(function (ValueKind) {
    ValueKind[ValueKind["String"] = 0] = "String";
    ValueKind[ValueKind["Boolean"] = 1] = "Boolean";
    ValueKind[ValueKind["Number"] = 2] = "Number";
})(ValueKind = exports.ValueKind || (exports.ValueKind = {}));
var DataType = /** @class */ (function () {
    function DataType(owner) {
        this.owner = owner;
    }
    DataType.create = function (parent, value) {
        if (typeof value === "string") {
            return new ValueData(parent, ValueKind.String);
        }
        else if (typeof value === "boolean") {
            return new ValueData(parent, ValueKind.Boolean);
        }
        else if (typeof value === "number") {
            return new ValueData(parent, ValueKind.Number);
        }
        else if (typeof value === "object") {
            if (Array.isArray(value)) {
                return ArrayData.create(parent, value);
            }
            else {
                return ObjectData.create(parent, value);
            }
        }
        else {
            throw new Error("Unsupported data type: " + typeof value);
        }
    };
    DataType.prototype.getChildFields = function () {
        return null;
    };
    DataType.prototype.qualifyFieldName = function (fieldName, fieldIsLeaf) {
        return fieldName;
    };
    Object.defineProperty(DataType.prototype, "isCollection", {
        get: function () {
            return false;
        },
        enumerable: true,
        configurable: true
    });
    return DataType;
}());
exports.DataType = DataType;
var ValueData = /** @class */ (function (_super) {
    __extends(ValueData, _super);
    function ValueData(owner, valueKind) {
        var _this = _super.call(this, owner) || this;
        _this.owner = owner;
        _this.valueKind = valueKind;
        return _this;
    }
    Object.defineProperty(ValueData.prototype, "typeName", {
        get: function () {
            return ValueKind[this.valueKind];
        },
        enumerable: true,
        configurable: true
    });
    return ValueData;
}(DataType));
exports.ValueData = ValueData;
var ArrayData = /** @class */ (function (_super) {
    __extends(ArrayData, _super);
    function ArrayData(owner) {
        var _this = _super.call(this, owner) || this;
        _this.owner = owner;
        _this.dataType = undefined;
        return _this;
    }
    ArrayData.create = function (parent, input) {
        if (!Array.isArray(input)) {
            throw new Error("Input is not an array.");
        }
        var result = new ArrayData(parent);
        if (input.length > 0) {
            result.dataType = DataType.create(parent, input[0]);
        }
        return result;
    };
    ArrayData.prototype.getChildFields = function () {
        return this.dataType.getChildFields();
    };
    ArrayData.prototype.qualifyFieldName = function (fieldName, fieldIsLeaf) {
        if (!fieldIsLeaf) {
            return fieldName + "[0]";
        }
        else {
            return _super.prototype.qualifyFieldName.call(this, fieldName, fieldIsLeaf);
        }
    };
    Object.defineProperty(ArrayData.prototype, "isCollection", {
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ArrayData.prototype, "typeName", {
        get: function () {
            return "Array";
        },
        enumerable: true,
        configurable: true
    });
    return ArrayData;
}(DataType));
exports.ArrayData = ArrayData;
var ObjectData = /** @class */ (function (_super) {
    __extends(ObjectData, _super);
    function ObjectData(owner) {
        var _this = _super.call(this, owner) || this;
        _this.owner = owner;
        _this.fields = [];
        return _this;
    }
    ObjectData.create = function (parent, input) {
        var result = new ObjectData(parent);
        for (var _i = 0, _a = Object.keys(input); _i < _a.length; _i++) {
            var key = _a[_i];
            var field = new FieldDefinition(parent);
            field.dataType = DataType.create(field, input[key]);
            field.name = key;
            result.fields.push(field);
        }
        return result;
    };
    ObjectData.prototype.getChildFields = function () {
        return this.fields;
    };
    Object.defineProperty(ObjectData.prototype, "typeName", {
        get: function () {
            return "Object";
        },
        enumerable: true,
        configurable: true
    });
    return ObjectData;
}(DataType));
exports.ObjectData = ObjectData;
var FieldDefinition = /** @class */ (function () {
    function FieldDefinition(parent) {
        this.parent = parent;
    }
    FieldDefinition.create = function (input) {
        var field = new FieldDefinition(null);
        field.name = "$root";
        field.dataType = DataType.create(field, input);
        return field;
    };
    FieldDefinition.prototype.getPath = function (asLeaf) {
        if (asLeaf === void 0) { asLeaf = true; }
        var result = this.qualifiedName(asLeaf);
        var currentField = this.parent;
        while (currentField) {
            result = currentField.qualifiedName(false) + "." + result;
            currentField = currentField.parent;
        }
        return result;
    };
    FieldDefinition.prototype.qualifiedName = function (asLeaf) {
        return this.dataType.qualifyFieldName(this.name, asLeaf);
    };
    Object.defineProperty(FieldDefinition.prototype, "children", {
        get: function () {
            return this.dataType.getChildFields();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FieldDefinition.prototype, "isCollection", {
        get: function () {
            return this.dataType.isCollection;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FieldDefinition.prototype, "typeName", {
        get: function () {
            return this.dataType.typeName;
        },
        enumerable: true,
        configurable: true
    });
    return FieldDefinition;
}());
exports.FieldDefinition = FieldDefinition;


/***/ }),

/***/ "./src/designer-peer-treeitem.ts":
/*!***************************************!*\
  !*** ./src/designer-peer-treeitem.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var base_tree_item_1 = __webpack_require__(/*! ./base-tree-item */ "./src/base-tree-item.ts");
var DesignerPeerTreeItem = /** @class */ (function (_super) {
    __extends(DesignerPeerTreeItem, _super);
    function DesignerPeerTreeItem(owner) {
        var _this = _super.call(this) || this;
        _this.owner = owner;
        _this.owner.onParentChanged = function (sender) {
            _this.computeLevel();
        };
        _this.computeLevel();
        return _this;
    }
    DesignerPeerTreeItem.prototype.computeLevel = function () {
        this._level = 0;
        var peer = this.owner;
        while (peer) {
            this._level++;
            peer = peer.parent;
        }
        for (var i = 0; i < this.getChildCount(); i++) {
            this.getChildAt(i).computeLevel();
        }
    };
    DesignerPeerTreeItem.prototype.getIconClass = function () {
        return this.owner.registration.iconClass;
    };
    DesignerPeerTreeItem.prototype.getLabelText = function () {
        return this.owner.getCardObject().getJsonTypeName();
    };
    DesignerPeerTreeItem.prototype.getAdditionalText = function () {
        return this.owner.getTreeItemText();
    };
    DesignerPeerTreeItem.prototype.selected = function () {
        this.owner.isSelected = true;
    };
    DesignerPeerTreeItem.prototype.getChildCount = function () {
        return this.owner.getChildCount();
    };
    DesignerPeerTreeItem.prototype.getChildAt = function (index) {
        return this.owner.getChildAt(index).treeItem;
    };
    DesignerPeerTreeItem.prototype.updateLayout = function () {
        _super.prototype.updateLayout.call(this);
        this.isSelected = this.owner.isSelected;
    };
    return DesignerPeerTreeItem;
}(base_tree_item_1.BaseTreeItem));
exports.DesignerPeerTreeItem = DesignerPeerTreeItem;


/***/ }),

/***/ "./src/designer-peers.ts":
/*!*******************************!*\
  !*** ./src/designer-peers.ts ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var Controls = __webpack_require__(/*! adaptivecards-controls */ "../adaptivecards-controls/lib/adaptivecards-controls.js");
var draggable_element_1 = __webpack_require__(/*! ./draggable-element */ "./src/draggable-element.ts");
var peer_command_1 = __webpack_require__(/*! ./peer-command */ "./src/peer-command.ts");
var card_designer_surface_1 = __webpack_require__(/*! ./card-designer-surface */ "./src/card-designer-surface.ts");
var designer_peer_treeitem_1 = __webpack_require__(/*! ./designer-peer-treeitem */ "./src/designer-peer-treeitem.ts");
var miscellaneous_1 = __webpack_require__(/*! ./miscellaneous */ "./src/miscellaneous.ts");
var shared_1 = __webpack_require__(/*! ./shared */ "./src/shared.ts");
var DesignerPeerInplaceEditor = /** @class */ (function () {
    function DesignerPeerInplaceEditor() {
    }
    return DesignerPeerInplaceEditor;
}());
exports.DesignerPeerInplaceEditor = DesignerPeerInplaceEditor;
var CardElementPeerInplaceEditor = /** @class */ (function (_super) {
    __extends(CardElementPeerInplaceEditor, _super);
    function CardElementPeerInplaceEditor(cardElement) {
        var _this = _super.call(this) || this;
        _this.cardElement = cardElement;
        return _this;
    }
    return CardElementPeerInplaceEditor;
}(DesignerPeerInplaceEditor));
exports.CardElementPeerInplaceEditor = CardElementPeerInplaceEditor;
var DesignerPeerRegistrationBase = /** @class */ (function () {
    function DesignerPeerRegistrationBase(category, iconClass) {
        if (iconClass === void 0) { iconClass = null; }
        this.category = category;
        this.iconClass = iconClass;
    }
    return DesignerPeerRegistrationBase;
}());
exports.DesignerPeerRegistrationBase = DesignerPeerRegistrationBase;
var DesignerPeerRegistration = /** @class */ (function (_super) {
    __extends(DesignerPeerRegistration, _super);
    function DesignerPeerRegistration(sourceType, peerType, category, iconClass) {
        if (iconClass === void 0) { iconClass = null; }
        var _this = _super.call(this, category, iconClass) || this;
        _this.sourceType = sourceType;
        _this.peerType = peerType;
        return _this;
    }
    return DesignerPeerRegistration;
}(DesignerPeerRegistrationBase));
exports.DesignerPeerRegistration = DesignerPeerRegistration;
var PropertySheetCategory = /** @class */ (function () {
    function PropertySheetCategory(name) {
        this.name = name;
        this._entries = [];
    }
    PropertySheetCategory.prototype.render = function (container, context, displayCategoryName) {
        var entriesToRender = [];
        for (var _i = 0, _a = this._entries; _i < _a.length; _i++) {
            var entry = _a[_i];
            if (shared_1.isVersionLessOrEqual(entry.targetVersion, context.targetVersion)) {
                entriesToRender.push(entry);
            }
        }
        if (entriesToRender.length > 0) {
            if (displayCategoryName) {
                var header = new Adaptive.TextBlock();
                header.separator = true;
                header.text = "**" + (this.name === PropertySheetCategory.DefaultCategory ? context.peer.getCardObject().getJsonTypeName() : this.name) + "**";
                container.addItem(header);
            }
            for (var _b = 0, entriesToRender_1 = entriesToRender; _b < entriesToRender_1.length; _b++) {
                var entry = entriesToRender_1[_b];
                if (shared_1.isVersionLessOrEqual(entry.targetVersion, context.targetVersion)) {
                    container.addItem(entry.render(context));
                }
            }
        }
    };
    PropertySheetCategory.prototype.add = function () {
        var entries = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            entries[_i] = arguments[_i];
        }
        this._entries = this._entries.concat(entries);
    };
    PropertySheetCategory.prototype.remove = function () {
        var entries = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            entries[_i] = arguments[_i];
        }
        for (var _a = 0, entries_1 = entries; _a < entries_1.length; _a++) {
            var entry = entries_1[_a];
            var index = void 0;
            do {
                var index_1 = this._entries.indexOf(entry);
                if (index_1 >= 0) {
                    this._entries.splice(index_1, 1);
                }
            } while (index >= 0);
        }
    };
    PropertySheetCategory.prototype.getEntryAt = function (index) {
        return this._entries[index];
    };
    Object.defineProperty(PropertySheetCategory.prototype, "length", {
        get: function () {
            return this._entries.length;
        },
        enumerable: true,
        configurable: true
    });
    PropertySheetCategory.DefaultCategory = "__defaultCategory";
    PropertySheetCategory.LayoutCategory = "Layout";
    PropertySheetCategory.StyleCategory = "Style";
    PropertySheetCategory.SelectionAction = "Selection action";
    PropertySheetCategory.InlineAction = "Inline action";
    return PropertySheetCategory;
}());
exports.PropertySheetCategory = PropertySheetCategory;
var PropertySheet = /** @class */ (function () {
    function PropertySheet(displayCategoryNames) {
        if (displayCategoryNames === void 0) { displayCategoryNames = true; }
        this.displayCategoryNames = displayCategoryNames;
        this._categories = {};
        this._categories[PropertySheetCategory.DefaultCategory] = new PropertySheetCategory(PropertySheetCategory.DefaultCategory);
        this._categories[PropertySheetCategory.LayoutCategory] = new PropertySheetCategory(PropertySheetCategory.LayoutCategory);
        this._categories[PropertySheetCategory.StyleCategory] = new PropertySheetCategory(PropertySheetCategory.StyleCategory);
    }
    PropertySheet.prototype.add = function (categoryName) {
        var entries = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            entries[_i - 1] = arguments[_i];
        }
        var category = this._categories[categoryName];
        if (!category) {
            category = new PropertySheetCategory(categoryName);
            this._categories[categoryName] = category;
        }
        category.add.apply(category, entries);
    };
    PropertySheet.prototype.remove = function () {
        var _a;
        var entries = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            entries[_i] = arguments[_i];
        }
        for (var _b = 0, _c = Object.keys(this._categories); _b < _c.length; _b++) {
            var categoryName = _c[_b];
            (_a = this._categories[categoryName]).remove.apply(_a, entries);
        }
    };
    PropertySheet.prototype.render = function (container, context) {
        for (var _i = 0, _a = Object.keys(this._categories); _i < _a.length; _i++) {
            var categoryName = _a[_i];
            this._categories[categoryName].render(container, context, this.displayCategoryNames);
        }
    };
    return PropertySheet;
}());
exports.PropertySheet = PropertySheet;
var DesignerPeer = /** @class */ (function (_super) {
    __extends(DesignerPeer, _super);
    function DesignerPeer(parent, designerSurface, registration) {
        var _this = _super.call(this) || this;
        _this._children = [];
        _this._isSelected = false;
        _this._inplaceEditor = null;
        _this._parent = parent;
        if (!registration) {
            alert(_this.constructor.name);
        }
        _this.registration = registration;
        _this.designerSurface = designerSurface;
        _this.treeItem = new designer_peer_treeitem_1.DesignerPeerTreeItem(_this);
        return _this;
    }
    DesignerPeer.prototype.closeInplaceEditor = function (applyChanges) {
        if (this._inplaceEditor) {
            if (applyChanges) {
                this._inplaceEditor.applyChanges();
                this.changed(true);
            }
            this._inplaceEditor = null;
            this._inplaceEditorOverlay.remove();
        }
    };
    DesignerPeer.prototype.tryOpenInplaceEditor = function () {
        var _this = this;
        this._inplaceEditor = this.createInplaceEditor();
        if (this._inplaceEditor) {
            this._inplaceEditor.onClose = function (applyChanges) {
                _this.closeInplaceEditor(applyChanges);
            };
            this._inplaceEditorOverlay = document.createElement("div");
            this._inplaceEditorOverlay.tabIndex = 0;
            this._inplaceEditorOverlay.style.zIndex = "600";
            this._inplaceEditorOverlay.style.backgroundColor = "transparent";
            this._inplaceEditorOverlay.style.position = "absolute";
            this._inplaceEditorOverlay.style.left = "0";
            this._inplaceEditorOverlay.style.top = "0";
            this._inplaceEditorOverlay.style.width = document.documentElement.scrollWidth + "px";
            this._inplaceEditorOverlay.style.height = document.documentElement.scrollHeight + "px";
            this._inplaceEditorOverlay.onfocus = function (e) { _this.closeInplaceEditor(true); };
            var boundingRect = this.getCardObjectBoundingRect();
            var inplaceEditorHost = document.createElement("div");
            inplaceEditorHost.className = "acd-inplace-editor-host";
            inplaceEditorHost.style.left = Math.floor(boundingRect.left + pageXOffset) + "px";
            inplaceEditorHost.style.top = Math.floor(boundingRect.top + pageYOffset) + "px";
            inplaceEditorHost.style.width = Math.ceil(boundingRect.width) + "px";
            inplaceEditorHost.style.height = Math.ceil(boundingRect.height) + "px";
            var renderedInplaceEditor = this._inplaceEditor.render();
            renderedInplaceEditor.classList.add("acd-inplace-editor");
            renderedInplaceEditor.tabIndex = 0;
            renderedInplaceEditor.onblur = function (e) { _this.closeInplaceEditor(true); };
            inplaceEditorHost.appendChild(renderedInplaceEditor);
            this._inplaceEditorOverlay.appendChild(inplaceEditorHost);
            document.body.appendChild(this._inplaceEditorOverlay);
            this._inplaceEditor.initialize();
            return true;
        }
        return false;
    };
    DesignerPeer.prototype.click = function (e) {
        _super.prototype.click.call(this, e);
        this.isSelected = true;
    };
    DesignerPeer.prototype.doubleClick = function (e) {
        _super.prototype.doubleClick.call(this, e);
        this.tryOpenInplaceEditor();
    };
    DesignerPeer.prototype.isContainer = function () {
        return false;
    };
    DesignerPeer.prototype.getToolTip = function () {
        return null;
    };
    DesignerPeer.prototype.internalAddCommands = function (commands) {
        // Do nothing in base implementation
    };
    DesignerPeer.prototype.internalRender = function () {
        var element = document.createElement("div");
        element.classList.add("acd-peer");
        var toolTip = this.getToolTip();
        if (toolTip) {
            element.title = toolTip;
        }
        if (this.isContainer()) {
            element.classList.add("container");
        }
        element.style.position = "absolute";
        return element;
    };
    DesignerPeer.prototype.internalUpdateCssStyles = function () {
        if (this.isSelected) {
            this.renderedElement.classList.add("selected");
        }
        else {
            this.renderedElement.classList.remove("selected");
        }
        if (this.dragging) {
            this.renderedElement.classList.add("dragging");
        }
        else {
            this.renderedElement.classList.remove("dragging");
        }
    };
    DesignerPeer.prototype.peerAdded = function (newPeer) {
        this.changed(false);
        if (this.onPeerAdded) {
            this.onPeerAdded(this, newPeer);
        }
    };
    DesignerPeer.prototype.peerRemoved = function (peer) {
        if (this.onPeerRemoved) {
            this.onPeerRemoved(peer);
        }
    };
    DesignerPeer.prototype.internalUpdateLayout = function () {
        if (this.renderedElement) {
            var clientRect = this.getBoundingRect();
            this.renderedElement.style.width = clientRect.width + "px";
            this.renderedElement.style.height = clientRect.height + "px";
            this.renderedElement.style.left = clientRect.left + "px";
            this.renderedElement.style.top = clientRect.top + "px";
        }
    };
    DesignerPeer.prototype.createInplaceEditor = function () {
        return null;
    };
    DesignerPeer.prototype.internalGetTreeItemText = function () {
        return null;
    };
    DesignerPeer.prototype.changed = function (updatePropertySheet) {
        if (this.onChanged) {
            this.onChanged(this, updatePropertySheet);
        }
    };
    DesignerPeer.prototype.getTreeItemText = function () {
        return this.internalGetTreeItemText();
    };
    DesignerPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        // Do nothing in base implementation
    };
    DesignerPeer.prototype.canDrop = function (peer) {
        return false;
    };
    DesignerPeer.prototype.canBeRemoved = function () {
        return true;
    };
    DesignerPeer.prototype.tryDrop = function (peer, insertionPoint) {
        return false;
    };
    DesignerPeer.prototype.insertChild = function (peer, index) {
        if (index === void 0) { index = -1; }
        if (index == -1) {
            this._children.push(peer);
        }
        else {
            this._children.splice(index, 0, peer);
        }
        peer.parent = this;
        this.peerAdded(peer);
    };
    DesignerPeer.prototype.removeChild = function (peer) {
        var index = this._children.indexOf(peer);
        if (index >= 0) {
            peer.parent = null;
            this._children.splice(index, 1);
        }
    };
    DesignerPeer.prototype.getChildCount = function () {
        return this._children.length;
    };
    DesignerPeer.prototype.getChildAt = function (index) {
        return this._children[index];
    };
    DesignerPeer.prototype.getCommands = function (promoteParentCommands) {
        if (promoteParentCommands === void 0) { promoteParentCommands = false; }
        var result = [];
        this.internalAddCommands(result);
        if (promoteParentCommands && this.parent) {
            var parentCommands = this.parent.getCommands();
            for (var _i = 0, parentCommands_1 = parentCommands; _i < parentCommands_1.length; _i++) {
                var command = parentCommands_1[_i];
                if (command.isPromotable) {
                    result.push(command);
                }
            }
        }
        return result;
    };
    DesignerPeer.prototype.remove = function (onlyFromCard, removeChildren) {
        if (removeChildren) {
            while (this._children.length > 0) {
                this._children[0].remove(onlyFromCard, removeChildren);
            }
        }
        var result = this.internalRemove();
        if (result && !onlyFromCard) {
            if (this.parent) {
                this.parent.removeChild(this);
            }
            this.removeElementsFromDesignerSurface();
            this.peerRemoved(this);
        }
        return result;
    };
    DesignerPeer.prototype.addElementsToDesignerSurface = function (designerSurface, processChildren) {
        if (processChildren === void 0) { processChildren = false; }
        designerSurface.appendChild(this.renderedElement);
        if (processChildren) {
            for (var i = 0; i < this.getChildCount(); i++) {
                this.getChildAt(i).addElementsToDesignerSurface(designerSurface, processChildren);
            }
        }
    };
    DesignerPeer.prototype.removeElementsFromDesignerSurface = function (processChildren) {
        if (processChildren === void 0) { processChildren = false; }
        this.renderedElement.remove();
        if (processChildren) {
            for (var i = 0; i < this.getChildCount(); i++) {
                this.getChildAt(i).removeElementsFromDesignerSurface(processChildren);
            }
        }
    };
    DesignerPeer.prototype.buildPropertySheetCard = function (targetVersion) {
        var card = new Adaptive.AdaptiveCard();
        card.padding = new Adaptive.PaddingDefinition(Adaptive.Spacing.Small, Adaptive.Spacing.Small, Adaptive.Spacing.Small, Adaptive.Spacing.Small);
        var propertySheet = new PropertySheet();
        this.populatePropertySheet(propertySheet);
        propertySheet.render(card, new PropertySheetContext(targetVersion, this));
        var actionSet = new Adaptive.ActionSet();
        var commands = this.getCommands(true);
        var _loop_1 = function (command) {
            var action = new Adaptive.SubmitAction();
            action.title = command.name;
            action.onExecute = function (sender) {
                command.execute(command, action.renderedElement);
            };
            actionSet.addAction(action);
        };
        for (var _i = 0, commands_1 = commands; _i < commands_1.length; _i++) {
            var command = commands_1[_i];
            _loop_1(command);
        }
        actionSet.separator = true;
        card.addItem(actionSet);
        return card;
    };
    DesignerPeer.prototype.scrollIntoView = function () {
        if (this.renderedElement) {
            this.renderedElement.scrollIntoView();
        }
        if (this.treeItem && this.treeItem.renderedElement) {
            this.treeItem.renderedElement.scrollIntoView();
        }
    };
    Object.defineProperty(DesignerPeer.prototype, "parent", {
        get: function () {
            return this._parent;
        },
        set: function (value) {
            this._parent = value;
            if (this.onParentChanged) {
                this.onParentChanged(this);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DesignerPeer.prototype, "isSelected", {
        get: function () {
            return this._isSelected;
        },
        set: function (value) {
            if (value != this._isSelected) {
                this._isSelected = value;
                this.updateLayout();
                this.treeItem.updateLayout();
                if (this.onSelectedChanged) {
                    this.onSelectedChanged(this);
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    return DesignerPeer;
}(draggable_element_1.DraggableElement));
exports.DesignerPeer = DesignerPeer;
var PropertySheetContext = /** @class */ (function () {
    function PropertySheetContext(targetVersion, peer, target) {
        if (target === void 0) { target = undefined; }
        this.targetVersion = targetVersion;
        this.peer = peer;
        this._target = undefined;
        this._target = target;
    }
    Object.defineProperty(PropertySheetContext.prototype, "target", {
        get: function () {
            return this._target != undefined ? this._target : this.peer.getCardObject();
        },
        enumerable: true,
        configurable: true
    });
    return PropertySheetContext;
}());
exports.PropertySheetContext = PropertySheetContext;
var PropertySheetEntry = /** @class */ (function () {
    function PropertySheetEntry(targetVersion) {
        this.targetVersion = targetVersion;
    }
    return PropertySheetEntry;
}());
exports.PropertySheetEntry = PropertySheetEntry;
var SubPropertySheetEntry = /** @class */ (function () {
    function SubPropertySheetEntry(targetVersion, target, propertySheet) {
        this.targetVersion = targetVersion;
        this.target = target;
        this.propertySheet = propertySheet;
    }
    SubPropertySheetEntry.prototype.render = function (context) {
        var container = new Adaptive.Container();
        container.spacing = Adaptive.Spacing.Small;
        this.propertySheet.render(container, new PropertySheetContext(context.targetVersion, context.peer, this.target));
        return container;
    };
    return SubPropertySheetEntry;
}());
exports.SubPropertySheetEntry = SubPropertySheetEntry;
var CustomPropertySheetEntry = /** @class */ (function (_super) {
    __extends(CustomPropertySheetEntry, _super);
    function CustomPropertySheetEntry(targetVersion, onRender) {
        var _this = _super.call(this, targetVersion) || this;
        _this.targetVersion = targetVersion;
        _this.onRender = onRender;
        return _this;
    }
    CustomPropertySheetEntry.prototype.render = function (context) {
        if (this.onRender) {
            return this.onRender(context);
        }
    };
    return CustomPropertySheetEntry;
}(PropertySheetEntry));
exports.CustomPropertySheetEntry = CustomPropertySheetEntry;
var SingleInputPropertyEditor = /** @class */ (function (_super) {
    __extends(SingleInputPropertyEditor, _super);
    function SingleInputPropertyEditor(targetVersion, propertyName, label, causesPropertySheetRefresh) {
        if (causesPropertySheetRefresh === void 0) { causesPropertySheetRefresh = false; }
        var _this = _super.call(this, targetVersion) || this;
        _this.targetVersion = targetVersion;
        _this.propertyName = propertyName;
        _this.label = label;
        _this.causesPropertySheetRefresh = causesPropertySheetRefresh;
        return _this;
    }
    SingleInputPropertyEditor.prototype.getPropertyValue = function (context) {
        return context.target[this.propertyName];
    };
    SingleInputPropertyEditor.prototype.setPropertyValue = function (context, value) {
        context.target[this.propertyName] = value;
    };
    SingleInputPropertyEditor.prototype.render = function (context) {
        var _this = this;
        var leftColumn = new Adaptive.Column();
        leftColumn.width = new Adaptive.SizeAndUnit(100, Adaptive.SizeUnit.Pixel);
        leftColumn.verticalContentAlignment = Adaptive.VerticalAlignment.Center;
        var rightColumn = new Adaptive.Column();
        rightColumn.width = "stretch";
        rightColumn.verticalContentAlignment = Adaptive.VerticalAlignment.Center;
        var columnSet = new Adaptive.ColumnSet();
        columnSet.spacing = Adaptive.Spacing.Small;
        columnSet.addColumn(leftColumn);
        columnSet.addColumn(rightColumn);
        var label = new Adaptive.TextBlock();
        label.horizontalAlignment = Adaptive.HorizontalAlignment.Right;
        label.wrap = true;
        label.text = this.label;
        var input = this.createInput(context);
        input.defaultValue = this.getPropertyValue(context);
        input.onValueChanged = function () {
            _this.setPropertyValue(context, input.value);
            context.peer.changed(_this.causesPropertySheetRefresh);
        };
        leftColumn.addItem(label);
        rightColumn.addItem(input);
        return columnSet;
    };
    return SingleInputPropertyEditor;
}(PropertySheetEntry));
exports.SingleInputPropertyEditor = SingleInputPropertyEditor;
var StringPropertyEditor = /** @class */ (function (_super) {
    __extends(StringPropertyEditor, _super);
    function StringPropertyEditor(targetVersion, propertyName, label, isMultiline, causesPropertySheetRefresh) {
        if (isMultiline === void 0) { isMultiline = false; }
        if (causesPropertySheetRefresh === void 0) { causesPropertySheetRefresh = false; }
        var _this = _super.call(this, targetVersion, propertyName, label, causesPropertySheetRefresh) || this;
        _this.targetVersion = targetVersion;
        _this.propertyName = propertyName;
        _this.label = label;
        _this.isMultiline = isMultiline;
        _this.causesPropertySheetRefresh = causesPropertySheetRefresh;
        return _this;
    }
    StringPropertyEditor.prototype.createInput = function (context) {
        var input = new Adaptive.TextInput();
        input.placeholder = "(not set)";
        input.isMultiline = this.isMultiline;
        return input;
    };
    return StringPropertyEditor;
}(SingleInputPropertyEditor));
exports.StringPropertyEditor = StringPropertyEditor;
var NumberPropertyEditor = /** @class */ (function (_super) {
    __extends(NumberPropertyEditor, _super);
    function NumberPropertyEditor(targetVersion, propertyName, label, defaultValue, causesPropertySheetRefresh) {
        if (defaultValue === void 0) { defaultValue = undefined; }
        if (causesPropertySheetRefresh === void 0) { causesPropertySheetRefresh = false; }
        var _this = _super.call(this, targetVersion, propertyName, label, causesPropertySheetRefresh) || this;
        _this.targetVersion = targetVersion;
        _this.propertyName = propertyName;
        _this.label = label;
        _this.defaultValue = defaultValue;
        _this.causesPropertySheetRefresh = causesPropertySheetRefresh;
        return _this;
    }
    NumberPropertyEditor.prototype.setPropertyValue = function (context, value) {
        try {
            context.target[this.propertyName] = parseFloat(value);
        }
        catch (_a) {
            context.target[this.propertyName] = this.defaultValue;
        }
    };
    NumberPropertyEditor.prototype.createInput = function (context) {
        var input = new Adaptive.NumberInput();
        input.placeholder = "(not set)";
        return input;
    };
    return NumberPropertyEditor;
}(SingleInputPropertyEditor));
exports.NumberPropertyEditor = NumberPropertyEditor;
var ObjectPropertyEditor = /** @class */ (function (_super) {
    __extends(ObjectPropertyEditor, _super);
    function ObjectPropertyEditor() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ObjectPropertyEditor.prototype.getPropertyValue = function (context) {
        return JSON.stringify(context.target[this.propertyName]);
    };
    ObjectPropertyEditor.prototype.setPropertyValue = function (context, value) {
        context.target[this.propertyName] = JSON.parse(value);
    };
    return ObjectPropertyEditor;
}(StringPropertyEditor));
exports.ObjectPropertyEditor = ObjectPropertyEditor;
var CustomCardObjectPropertyEditor = /** @class */ (function (_super) {
    __extends(CustomCardObjectPropertyEditor, _super);
    function CustomCardObjectPropertyEditor() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CustomCardObjectPropertyEditor.prototype.getPropertyValue = function (context) {
        return context.peer.getCardObject().getCustomProperty(this.propertyName);
    };
    CustomCardObjectPropertyEditor.prototype.setPropertyValue = function (context, value) {
        context.peer.getCardObject().setCustomProperty(this.propertyName, value);
    };
    return CustomCardObjectPropertyEditor;
}(StringPropertyEditor));
exports.CustomCardObjectPropertyEditor = CustomCardObjectPropertyEditor;
var BooleanPropertyEditor = /** @class */ (function (_super) {
    __extends(BooleanPropertyEditor, _super);
    function BooleanPropertyEditor() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BooleanPropertyEditor.prototype.getPropertyValue = function (context) {
        var v = context.target[this.propertyName];
        return typeof v === "boolean" ? v.toString() : "false";
    };
    BooleanPropertyEditor.prototype.setPropertyValue = function (context, value) {
        context.target[this.propertyName] = value == "true";
    };
    BooleanPropertyEditor.prototype.createInput = function (context) {
        return new Adaptive.ToggleInput();
    };
    return BooleanPropertyEditor;
}(SingleInputPropertyEditor));
exports.BooleanPropertyEditor = BooleanPropertyEditor;
var ChoicePropertyEditor = /** @class */ (function (_super) {
    __extends(ChoicePropertyEditor, _super);
    function ChoicePropertyEditor(targetVersion, propertyName, label, choices, causesPropertySheetRefresh) {
        if (causesPropertySheetRefresh === void 0) { causesPropertySheetRefresh = false; }
        var _this = _super.call(this, targetVersion, propertyName, label, causesPropertySheetRefresh) || this;
        _this.targetVersion = targetVersion;
        _this.propertyName = propertyName;
        _this.label = label;
        _this.choices = choices;
        _this.causesPropertySheetRefresh = causesPropertySheetRefresh;
        return _this;
    }
    ChoicePropertyEditor.prototype.createInput = function (context) {
        var input = new Adaptive.ChoiceSetInput();
        input.isCompact = true;
        input.placeholder = "(not set)";
        for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {
            var choice = _a[_i];
            if (shared_1.isVersionLessOrEqual(choice.targetVersion, context.targetVersion)) {
                input.choices.push(new Adaptive.Choice(choice.name, choice.value));
            }
        }
        return input;
    };
    return ChoicePropertyEditor;
}(SingleInputPropertyEditor));
exports.ChoicePropertyEditor = ChoicePropertyEditor;
var ContainerStylePropertyEditor = /** @class */ (function (_super) {
    __extends(ContainerStylePropertyEditor, _super);
    function ContainerStylePropertyEditor(targetVersion, propertyName, label) {
        var _this = _super.call(this, targetVersion, propertyName, label, [
            { targetVersion: shared_1.Versions.v1_0, name: "(not set)", value: "not_set" },
            { targetVersion: shared_1.Versions.v1_0, name: "Default", value: "default" },
            { targetVersion: shared_1.Versions.v1_0, name: "Emphasis", value: "emphasis" },
            { targetVersion: shared_1.Versions.v1_2, name: "Accent", value: "accent" },
            { targetVersion: shared_1.Versions.v1_2, name: "Good", value: "good" },
            { targetVersion: shared_1.Versions.v1_2, name: "Attention", value: "attention" },
            { targetVersion: shared_1.Versions.v1_2, name: "Warning", value: "warning" }
        ]) || this;
        _this.targetVersion = targetVersion;
        _this.propertyName = propertyName;
        _this.label = label;
        return _this;
    }
    ContainerStylePropertyEditor.prototype.getPropertyValue = function (context) {
        var currentStyle = context.target[this.propertyName];
        return currentStyle ? currentStyle.toString() : "not_set";
    };
    ContainerStylePropertyEditor.prototype.setPropertyValue = function (context, value) {
        if (value == "not_set") {
            context.target[this.propertyName] = null;
        }
        else {
            context.target[this.propertyName] = value;
        }
    };
    return ContainerStylePropertyEditor;
}(ChoicePropertyEditor));
exports.ContainerStylePropertyEditor = ContainerStylePropertyEditor;
var ColumnWidthPropertyEditor = /** @class */ (function (_super) {
    __extends(ColumnWidthPropertyEditor, _super);
    function ColumnWidthPropertyEditor() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ColumnWidthPropertyEditor.prototype.getPropertyValue = function (context) {
        if (context.target[this.propertyName] instanceof Adaptive.SizeAndUnit) {
            if (context.target[this.propertyName].unit == Adaptive.SizeUnit.Pixel) {
                return "pixels";
            }
            else {
                return "weighted";
            }
        }
        else {
            return context.target[this.propertyName].toString();
        }
    };
    ColumnWidthPropertyEditor.prototype.setPropertyValue = function (context, value) {
        switch (value) {
            case "auto":
                context.target[this.propertyName] = "auto";
                break;
            case "pixels":
                context.target[this.propertyName] = new Adaptive.SizeAndUnit(50, Adaptive.SizeUnit.Pixel);
                break;
            case "weighted":
                context.target[this.propertyName] = new Adaptive.SizeAndUnit(50, Adaptive.SizeUnit.Weight);
                break;
            case "stretch":
            default:
                context.target[this.propertyName] = "stretch";
                break;
        }
    };
    return ColumnWidthPropertyEditor;
}(ChoicePropertyEditor));
exports.ColumnWidthPropertyEditor = ColumnWidthPropertyEditor;
var HeightPropertyEditor = /** @class */ (function (_super) {
    __extends(HeightPropertyEditor, _super);
    function HeightPropertyEditor() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HeightPropertyEditor.prototype.setPropertyValue = function (context, value) {
        var processedValue;
        switch (value) {
            case "auto":
            case "stretch":
                processedValue = value;
                break;
            default:
                processedValue = "auto";
                break;
        }
        context.target[this.propertyName] = processedValue;
    };
    return HeightPropertyEditor;
}(ChoicePropertyEditor));
exports.HeightPropertyEditor = HeightPropertyEditor;
var SizeAndUnitPropertyEditor = /** @class */ (function (_super) {
    __extends(SizeAndUnitPropertyEditor, _super);
    function SizeAndUnitPropertyEditor(targetVersion, propertyName, label, sizeUnit, defaultValue, causesPropertySheetRefresh) {
        if (defaultValue === void 0) { defaultValue = undefined; }
        if (causesPropertySheetRefresh === void 0) { causesPropertySheetRefresh = false; }
        var _this = _super.call(this, targetVersion, propertyName, label, defaultValue, causesPropertySheetRefresh) || this;
        _this.targetVersion = targetVersion;
        _this.propertyName = propertyName;
        _this.label = label;
        _this.sizeUnit = sizeUnit;
        _this.defaultValue = defaultValue;
        _this.causesPropertySheetRefresh = causesPropertySheetRefresh;
        return _this;
    }
    SizeAndUnitPropertyEditor.prototype.getPropertyValue = function (context) {
        return context.target[this.propertyName].physicalSize.toString();
    };
    SizeAndUnitPropertyEditor.prototype.setPropertyValue = function (context, value) {
        context.target[this.propertyName] = new Adaptive.SizeAndUnit(parseFloat(value), this.sizeUnit);
    };
    return SizeAndUnitPropertyEditor;
}(NumberPropertyEditor));
exports.SizeAndUnitPropertyEditor = SizeAndUnitPropertyEditor;
var ActionPropertyEditor = /** @class */ (function (_super) {
    __extends(ActionPropertyEditor, _super);
    function ActionPropertyEditor(targetVersion, propertyName, label, forbiddenActionTypes, causesPropertySheetRefresh) {
        if (forbiddenActionTypes === void 0) { forbiddenActionTypes = []; }
        if (causesPropertySheetRefresh === void 0) { causesPropertySheetRefresh = false; }
        var _this = _super.call(this, targetVersion, propertyName, label, causesPropertySheetRefresh) || this;
        _this.targetVersion = targetVersion;
        _this.propertyName = propertyName;
        _this.label = label;
        _this.forbiddenActionTypes = forbiddenActionTypes;
        _this.causesPropertySheetRefresh = causesPropertySheetRefresh;
        return _this;
    }
    ActionPropertyEditor.prototype.getPropertyValue = function (context) {
        var action = context.target[this.propertyName];
        return action ? action.getJsonTypeName() : "none";
    };
    ActionPropertyEditor.prototype.setPropertyValue = function (context, value) {
        context.target[this.propertyName] = parseInt(value, 10);
        if (value == "none") {
            context.target[this.propertyName] = null;
        }
        else {
            context.target[this.propertyName] = Adaptive.AdaptiveCard.actionTypeRegistry.createInstance(value);
        }
    };
    ActionPropertyEditor.prototype.createInput = function (context) {
        var input = new Adaptive.ChoiceSetInput();
        input.isCompact = true;
        input.placeholder = "(not set)";
        input.choices.push(new Adaptive.Choice("(not set)", "none"));
        for (var i = 0; i < Adaptive.AdaptiveCard.actionTypeRegistry.getItemCount(); i++) {
            var actionType = Adaptive.AdaptiveCard.actionTypeRegistry.getItemAt(i).typeName;
            var doAddActionType = this.forbiddenActionTypes ? this.forbiddenActionTypes.indexOf(actionType) < 0 : true;
            if (doAddActionType) {
                var choice = new Adaptive.Choice(actionType, actionType);
                input.choices.push(choice);
            }
        }
        return input;
    };
    return ActionPropertyEditor;
}(SingleInputPropertyEditor));
exports.ActionPropertyEditor = ActionPropertyEditor;
var CompoundPropertyEditor = /** @class */ (function (_super) {
    __extends(CompoundPropertyEditor, _super);
    function CompoundPropertyEditor(targetVersion, propertyName, entries) {
        if (entries === void 0) { entries = []; }
        var _this = _super.call(this, targetVersion) || this;
        _this.targetVersion = targetVersion;
        _this.propertyName = propertyName;
        _this.entries = entries;
        return _this;
    }
    CompoundPropertyEditor.prototype.render = function (context) {
        var container = new Adaptive.Container();
        for (var _i = 0, _a = this.entries; _i < _a.length; _i++) {
            var entry = _a[_i];
            if (shared_1.isVersionLessOrEqual(entry.targetVersion, context.targetVersion)) {
                container.addItem(entry.render(new PropertySheetContext(context.targetVersion, context.peer, context.target[this.propertyName])));
            }
        }
        return container;
    };
    return CompoundPropertyEditor;
}(PropertySheetEntry));
exports.CompoundPropertyEditor = CompoundPropertyEditor;
var EnumPropertyEditor = /** @class */ (function (_super) {
    __extends(EnumPropertyEditor, _super);
    function EnumPropertyEditor(targetVersion, propertyName, label, enumType, causesPropertySheetRefresh) {
        if (causesPropertySheetRefresh === void 0) { causesPropertySheetRefresh = false; }
        var _this = _super.call(this, targetVersion, propertyName, label, causesPropertySheetRefresh) || this;
        _this.targetVersion = targetVersion;
        _this.propertyName = propertyName;
        _this.label = label;
        _this.enumType = enumType;
        _this.causesPropertySheetRefresh = causesPropertySheetRefresh;
        return _this;
    }
    EnumPropertyEditor.prototype.setPropertyValue = function (context, value) {
        context.target[this.propertyName] = parseInt(value, 10);
    };
    EnumPropertyEditor.prototype.createInput = function (context) {
        var input = new Adaptive.ChoiceSetInput();
        input.isCompact = true;
        input.placeholder = "(not set)";
        for (var key in this.enumType) {
            var v = parseInt(key, 10);
            if (!isNaN(v)) {
                input.choices.push(new Adaptive.Choice(this.enumType[key], key));
            }
        }
        return input;
    };
    return EnumPropertyEditor;
}(SingleInputPropertyEditor));
exports.EnumPropertyEditor = EnumPropertyEditor;
var NameValuePairPropertyEditor = /** @class */ (function (_super) {
    __extends(NameValuePairPropertyEditor, _super);
    function NameValuePairPropertyEditor(targetVersion, collectionPropertyName, namePropertyName, valuePropertyName, createCollectionItem, namePropertyLabel, valuePropertyLabel, addButtonTitle, messageIfEmpty) {
        if (namePropertyLabel === void 0) { namePropertyLabel = "Name"; }
        if (valuePropertyLabel === void 0) { valuePropertyLabel = "Value"; }
        if (addButtonTitle === void 0) { addButtonTitle = "Add"; }
        if (messageIfEmpty === void 0) { messageIfEmpty = "This collection is empty"; }
        var _this = _super.call(this, targetVersion) || this;
        _this.targetVersion = targetVersion;
        _this.collectionPropertyName = collectionPropertyName;
        _this.namePropertyName = namePropertyName;
        _this.valuePropertyName = valuePropertyName;
        _this.createCollectionItem = createCollectionItem;
        _this.namePropertyLabel = namePropertyLabel;
        _this.valuePropertyLabel = valuePropertyLabel;
        _this.addButtonTitle = addButtonTitle;
        _this.messageIfEmpty = messageIfEmpty;
        return _this;
    }
    NameValuePairPropertyEditor.prototype.collectionChanged = function (context, nameValuePairs, refreshPropertySheet) {
        context.target[this.collectionPropertyName] = [];
        for (var _i = 0, nameValuePairs_1 = nameValuePairs; _i < nameValuePairs_1.length; _i++) {
            var nameValuePair = nameValuePairs_1[_i];
            var item = this.createCollectionItem(nameValuePair.name, nameValuePair.value);
            context.target[this.collectionPropertyName].push(item);
        }
        context.peer.changed(refreshPropertySheet);
    };
    NameValuePairPropertyEditor.prototype.render = function (context) {
        var _this = this;
        var result = new Adaptive.Container();
        var collection = context.target[this.collectionPropertyName];
        if (!Array.isArray(collection)) {
            throw new Error("The " + this.collectionPropertyName + " property on " + context.peer.getCardObject().getJsonTypeName() + " either doesn't exist or isn't an array.");
        }
        var nameValuePairs = [];
        for (var _i = 0, collection_1 = collection; _i < collection_1.length; _i++) {
            var pair = collection_1[_i];
            nameValuePairs.push({
                name: pair[this.namePropertyName],
                value: pair[this.valuePropertyName]
            });
        }
        if (nameValuePairs.length == 0) {
            var messageTextBlock = new Adaptive.TextBlock();
            messageTextBlock.spacing = Adaptive.Spacing.Small;
            messageTextBlock.text = this.messageIfEmpty;
            result.addItem(messageTextBlock);
        }
        else {
            var _loop_2 = function (i) {
                var textInput = new Adaptive.TextInput();
                textInput.placeholder = this_1.namePropertyLabel;
                textInput.defaultValue = nameValuePairs[i].name;
                textInput.onValueChanged = function (sender) {
                    nameValuePairs[i].name = sender.value;
                    _this.collectionChanged(context, nameValuePairs, false);
                };
                var nameColumn = new Adaptive.Column("stretch");
                nameColumn.addItem(textInput);
                textInput = new Adaptive.TextInput();
                textInput.placeholder = this_1.valuePropertyLabel;
                textInput.defaultValue = nameValuePairs[i].value;
                textInput.onValueChanged = function (sender) {
                    nameValuePairs[i].value = sender.value;
                    _this.collectionChanged(context, nameValuePairs, false);
                };
                var valueColumn = new Adaptive.Column("stretch");
                valueColumn.spacing = Adaptive.Spacing.Small;
                valueColumn.addItem(textInput);
                var removeAction = new Adaptive.SubmitAction();
                removeAction.title = "X";
                removeAction.onExecute = function (sender) {
                    nameValuePairs.splice(i, 1);
                    _this.collectionChanged(context, nameValuePairs, true);
                };
                var actionSet_1 = new Adaptive.ActionSet();
                actionSet_1.addAction(removeAction);
                var removeColumn = new Adaptive.Column("auto");
                removeColumn.spacing = Adaptive.Spacing.Small;
                removeColumn.addItem(actionSet_1);
                var columnSet = new Adaptive.ColumnSet();
                columnSet.spacing = Adaptive.Spacing.Small;
                columnSet.addColumn(nameColumn);
                columnSet.addColumn(valueColumn);
                columnSet.addColumn(removeColumn);
                result.addItem(columnSet);
            };
            var this_1 = this;
            for (var i = 0; i < nameValuePairs.length; i++) {
                _loop_2(i);
            }
        }
        var addAction = new Adaptive.SubmitAction();
        addAction.title = this.addButtonTitle;
        addAction.onExecute = function (sender) {
            nameValuePairs.push({ name: "", value: "" });
            _this.collectionChanged(context, nameValuePairs, true);
        };
        var actionSet = new Adaptive.ActionSet();
        actionSet.spacing = Adaptive.Spacing.Small;
        actionSet.addAction(addAction);
        result.addItem(actionSet);
        return result;
    };
    return NameValuePairPropertyEditor;
}(PropertySheetEntry));
var CardObjectPeer = /** @class */ (function (_super) {
    __extends(CardObjectPeer, _super);
    function CardObjectPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CardObjectPeer.idProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "id", "Id");
    return CardObjectPeer;
}(DesignerPeer));
exports.CardObjectPeer = CardObjectPeer;
var ActionPeer = /** @class */ (function (_super) {
    __extends(ActionPeer, _super);
    function ActionPeer(parent, designerSurface, registration, action) {
        var _this = _super.call(this, parent, designerSurface, registration) || this;
        _this._action = action;
        return _this;
    }
    ActionPeer.prototype.doubleClick = function (e) {
        _super.prototype.doubleClick.call(this, e);
        this.action.renderedElement.click();
    };
    ActionPeer.prototype.internalRemove = function () {
        return this.action.remove();
    };
    ActionPeer.prototype.internalGetTreeItemText = function () {
        if (this.action.title && this.action.title != "") {
            return this.action.title;
        }
        else {
            return _super.prototype.internalGetTreeItemText.call(this);
        }
    };
    ActionPeer.prototype.getCardObject = function () {
        return this.action;
    };
    ActionPeer.prototype.isDraggable = function () {
        return false;
    };
    ActionPeer.prototype.getBoundingRect = function () {
        var designSurfaceOffset = this.designerSurface.getDesignerSurfaceOffset();
        var actionBoundingRect = this.action.renderedElement.getBoundingClientRect();
        return new miscellaneous_1.Rect(actionBoundingRect.top - designSurfaceOffset.y, actionBoundingRect.right - designSurfaceOffset.x, actionBoundingRect.bottom - designSurfaceOffset.y, actionBoundingRect.left - designSurfaceOffset.x);
    };
    ActionPeer.prototype.getCardObjectBoundingRect = function () {
        var actionBoundingRect = this.action.renderedElement.getBoundingClientRect();
        return new miscellaneous_1.Rect(actionBoundingRect.top, actionBoundingRect.right, actionBoundingRect.bottom, actionBoundingRect.left);
    };
    ActionPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add(defaultCategory, ActionPeer.idProperty, ActionPeer.titleProperty, ActionPeer.styleProperty, ActionPeer.iconUrlProperty);
    };
    Object.defineProperty(ActionPeer.prototype, "action", {
        get: function () {
            return this._action;
        },
        enumerable: true,
        configurable: true
    });
    ActionPeer.titleProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "title", "Title");
    ActionPeer.styleProperty = new ChoicePropertyEditor(shared_1.Versions.v1_2, "style", "Style", [
        { targetVersion: shared_1.Versions.v1_2, name: "Default", value: Adaptive.ActionStyle.Default },
        { targetVersion: shared_1.Versions.v1_2, name: "Positive", value: Adaptive.ActionStyle.Positive },
        { targetVersion: shared_1.Versions.v1_2, name: "Destructive", value: Adaptive.ActionStyle.Destructive }
    ]);
    ActionPeer.iconUrlProperty = new StringPropertyEditor(shared_1.Versions.v1_1, "iconUrl", "Icon URL");
    return ActionPeer;
}(CardObjectPeer));
exports.ActionPeer = ActionPeer;
var TypedActionPeer = /** @class */ (function (_super) {
    __extends(TypedActionPeer, _super);
    function TypedActionPeer(parent, designerSurface, registration, action) {
        return _super.call(this, parent, designerSurface, registration, action) || this;
    }
    Object.defineProperty(TypedActionPeer.prototype, "action", {
        get: function () {
            return this._action;
        },
        enumerable: true,
        configurable: true
    });
    return TypedActionPeer;
}(ActionPeer));
exports.TypedActionPeer = TypedActionPeer;
var HttpActionPeer = /** @class */ (function (_super) {
    __extends(HttpActionPeer, _super);
    function HttpActionPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    HttpActionPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        if (Adaptive.AdaptiveCard.useBuiltInInputValidation) {
            propertySheet.add(PropertySheetCategory.DefaultCategory, HttpActionPeer.ignoreInputValidationProperty);
        }
        propertySheet.add(defaultCategory, HttpActionPeer.methodProperty, HttpActionPeer.urlProperty);
        if (this.action.method == "POST") {
            propertySheet.add(defaultCategory, HttpActionPeer.bodyProperty);
        }
        propertySheet.add("HTTP headers", HttpActionPeer.headersProperty);
    };
    HttpActionPeer.ignoreInputValidationProperty = new BooleanPropertyEditor(shared_1.Versions.vNext, "ignoreInputValidation", "Ignore input validation");
    HttpActionPeer.methodProperty = new ChoicePropertyEditor(shared_1.Versions.v1_0, "method", "Method", [
        { targetVersion: shared_1.Versions.v1_0, name: "GET", value: "GET" },
        { targetVersion: shared_1.Versions.v1_0, name: "POST", value: "POST" }
    ], true);
    HttpActionPeer.urlProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "url", "Url");
    HttpActionPeer.bodyProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "body", "Body", true);
    HttpActionPeer.headersProperty = new NameValuePairPropertyEditor(shared_1.Versions.v1_0, "headers", "name", "value", function (name, value) { return new Adaptive.HttpHeader(name, value); }, "Name", "Value", "Add a new header", "This action has no header.");
    return HttpActionPeer;
}(TypedActionPeer));
exports.HttpActionPeer = HttpActionPeer;
var SubmitActionPeer = /** @class */ (function (_super) {
    __extends(SubmitActionPeer, _super);
    function SubmitActionPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SubmitActionPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add(defaultCategory, SubmitActionPeer.ignoreInputValidationProperty, SubmitActionPeer.dataProperty);
    };
    SubmitActionPeer.ignoreInputValidationProperty = new BooleanPropertyEditor(shared_1.Versions.vNext, "ignoreInputValidation", "Ignore input validation");
    SubmitActionPeer.dataProperty = new ObjectPropertyEditor(shared_1.Versions.v1_0, "data", "Data");
    return SubmitActionPeer;
}(TypedActionPeer));
exports.SubmitActionPeer = SubmitActionPeer;
var OpenUrlActionPeer = /** @class */ (function (_super) {
    __extends(OpenUrlActionPeer, _super);
    function OpenUrlActionPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    OpenUrlActionPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add(defaultCategory, OpenUrlActionPeer.urlProperty);
    };
    OpenUrlActionPeer.urlProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "url", "Url");
    return OpenUrlActionPeer;
}(TypedActionPeer));
exports.OpenUrlActionPeer = OpenUrlActionPeer;
var ShowCardActionPeer = /** @class */ (function (_super) {
    __extends(ShowCardActionPeer, _super);
    function ShowCardActionPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ShowCardActionPeer.prototype.getToolTip = function () {
        return "Double click to open/close";
    };
    return ShowCardActionPeer;
}(TypedActionPeer));
exports.ShowCardActionPeer = ShowCardActionPeer;
var ToggleVisibilityActionPeer = /** @class */ (function (_super) {
    __extends(ToggleVisibilityActionPeer, _super);
    function ToggleVisibilityActionPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return ToggleVisibilityActionPeer;
}(TypedActionPeer));
exports.ToggleVisibilityActionPeer = ToggleVisibilityActionPeer;
var CardElementPeer = /** @class */ (function (_super) {
    __extends(CardElementPeer, _super);
    function CardElementPeer(parent, designerSurface, registration, cardElement) {
        var _this = _super.call(this, parent, designerSurface, registration) || this;
        _this._cardElement = cardElement;
        if (cardElement instanceof Adaptive.CardElementContainer) {
            for (var i = 0; i < cardElement.getItemCount(); i++) {
                _this.insertChild(card_designer_surface_1.CardDesignerSurface.cardElementPeerRegistry.createPeerInstance(_this.designerSurface, _this, cardElement.getItemAt(i)));
            }
        }
        for (var i = 0; i < _this.cardElement.getActionCount(); i++) {
            _this.insertChild(card_designer_surface_1.CardDesignerSurface.actionPeerRegistry.createPeerInstance(_this.designerSurface, _this, cardElement.getActionAt(i)));
        }
        return _this;
    }
    CardElementPeer.prototype.insertElementAfter = function (newElement) {
        if (this.cardElement.parent instanceof Adaptive.Container) {
            this.cardElement.parent.insertItemAfter(newElement, this.cardElement);
            var newPeer = card_designer_surface_1.CardDesignerSurface.cardElementPeerRegistry.createPeerInstance(this.designerSurface, this, newElement);
            this.peerAdded(newPeer);
        }
    };
    CardElementPeer.prototype.internalRemove = function () {
        return this.cardElement.remove();
    };
    CardElementPeer.prototype.internalUpdateCssStyles = function () {
        _super.prototype.internalUpdateCssStyles.call(this);
        if (this.cardElement.isVisible) {
            this.renderedElement.classList.remove("invisible");
        }
        else {
            this.renderedElement.classList.add("invisible");
        }
    };
    CardElementPeer.prototype.getTreeItemText = function () {
        var text = _super.prototype.getTreeItemText.call(this);
        if (this.cardElement.isVisible) {
            return text;
        }
        else {
            var result = "Hidden";
            if (text) {
                result += " - " + text;
            }
            return result;
        }
    };
    CardElementPeer.prototype.getCardObject = function () {
        return this.cardElement;
    };
    CardElementPeer.prototype.initializeCardElement = function () {
        // Do nothing in base implementation
    };
    CardElementPeer.prototype.canDrop = function (peer) {
        return this.cardElement instanceof Adaptive.Container && peer instanceof CardElementPeer;
    };
    CardElementPeer.prototype.tryDrop = function (peer, insertionPoint) {
        if (this.cardElement instanceof Adaptive.Container && peer instanceof CardElementPeer) {
            var targetChild = null;
            var insertAfter = void 0;
            for (var i = 0; i < this.getChildCount(); i++) {
                var rect = this.getChildAt(i).getBoundingRect();
                if (rect.isInside(insertionPoint)) {
                    targetChild = this.getChildAt(i);
                    insertAfter = (insertionPoint.y - rect.top) >= (rect.height / 2);
                    break;
                }
            }
            if (targetChild != peer) {
                if (peer.cardElement.parent) {
                    if (!peer.remove(true, false)) {
                        return false;
                    }
                    peer.parent.removeChild(peer);
                }
                if (!targetChild) {
                    var rect = this.getBoundingRect();
                    insertAfter = (insertionPoint.y - rect.top) >= (rect.height / 2);
                    if (this.cardElement.getItemCount() > 0 && insertAfter) {
                        this.cardElement.insertItemAfter(peer.cardElement, this.cardElement.getItemAt(this.cardElement.getItemCount() - 1));
                    }
                    else {
                        this.cardElement.insertItemAfter(peer.cardElement, null);
                    }
                }
                else {
                    if (insertAfter) {
                        this.cardElement.insertItemAfter(peer.cardElement, targetChild.cardElement);
                    }
                    else {
                        this.cardElement.insertItemBefore(peer.cardElement, targetChild.cardElement);
                    }
                }
                this.insertChild(peer, peer.cardElement.index);
                this.changed(false);
                return true;
            }
        }
        return false;
    };
    CardElementPeer.prototype.getBoundingRect = function () {
        var designSurfaceOffset = this.designerSurface.getDesignerSurfaceOffset();
        var cardElementBoundingRect = this.cardElement.renderedElement.getBoundingClientRect();
        if (this.cardElement.hasVisibleSeparator) {
            var separatorBoundingRect = this.cardElement.separatorElement.getBoundingClientRect();
            return new miscellaneous_1.Rect(Math.min(separatorBoundingRect.top, cardElementBoundingRect.top) - designSurfaceOffset.y, Math.max(separatorBoundingRect.right, cardElementBoundingRect.right) - designSurfaceOffset.x, Math.max(separatorBoundingRect.bottom, cardElementBoundingRect.bottom) - designSurfaceOffset.y, Math.min(separatorBoundingRect.left, cardElementBoundingRect.left) - designSurfaceOffset.x);
        }
        else {
            return new miscellaneous_1.Rect(cardElementBoundingRect.top - designSurfaceOffset.y, cardElementBoundingRect.right - designSurfaceOffset.x, cardElementBoundingRect.bottom - designSurfaceOffset.y, cardElementBoundingRect.left - designSurfaceOffset.x);
        }
    };
    CardElementPeer.prototype.getCardObjectBoundingRect = function () {
        var cardElementBoundingRect = this.cardElement.renderedElement.getBoundingClientRect();
        return new miscellaneous_1.Rect(cardElementBoundingRect.top, cardElementBoundingRect.right, cardElementBoundingRect.bottom, cardElementBoundingRect.left);
    };
    CardElementPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        if (shared_1.GlobalSettings.enableDataBindingSupport) {
            propertySheet.add(defaultCategory, CardElementPeer.dataContextProperty, CardElementPeer.whenProperty);
        }
        propertySheet.add(defaultCategory, CardElementPeer.idProperty, CardElementPeer.isVisibleProperty);
        propertySheet.add(PropertySheetCategory.LayoutCategory, CardElementPeer.spacingProperty, CardElementPeer.separatorProperty, CardElementPeer.horizontalAlignmentProperty, CardElementPeer.heightProperty);
    };
    Object.defineProperty(CardElementPeer.prototype, "cardElement", {
        get: function () {
            return this._cardElement;
        },
        enumerable: true,
        configurable: true
    });
    CardElementPeer.dataContextProperty = new CustomCardObjectPropertyEditor("*", "$data", "Data context");
    CardElementPeer.whenProperty = new CustomCardObjectPropertyEditor("*", "$when", "Only show when");
    CardElementPeer.idProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "id", "Id");
    CardElementPeer.isVisibleProperty = new BooleanPropertyEditor(shared_1.Versions.v1_2, "isVisible", "Initially visible");
    CardElementPeer.spacingProperty = new EnumPropertyEditor(shared_1.Versions.v1_0, "spacing", "Spacing", Adaptive.Spacing);
    CardElementPeer.separatorProperty = new BooleanPropertyEditor(shared_1.Versions.v1_0, "separator", "Separator");
    CardElementPeer.horizontalAlignmentProperty = new EnumPropertyEditor(shared_1.Versions.v1_0, "horizontalAlignment", "Horizontal alignment", Adaptive.HorizontalAlignment);
    CardElementPeer.heightProperty = new HeightPropertyEditor(shared_1.Versions.v1_1, "height", "Height", [
        { targetVersion: shared_1.Versions.v1_1, name: "Automatic", value: "auto" },
        { targetVersion: shared_1.Versions.v1_1, name: "Stretch", value: "stretch" }
    ]);
    return CardElementPeer;
}(CardObjectPeer));
exports.CardElementPeer = CardElementPeer;
var TypedCardElementPeer = /** @class */ (function (_super) {
    __extends(TypedCardElementPeer, _super);
    function TypedCardElementPeer(parent, designerSurface, registration, cardElement) {
        return _super.call(this, parent, designerSurface, registration, cardElement) || this;
    }
    Object.defineProperty(TypedCardElementPeer.prototype, "cardElement", {
        get: function () {
            return this._cardElement;
        },
        enumerable: true,
        configurable: true
    });
    return TypedCardElementPeer;
}(CardElementPeer));
exports.TypedCardElementPeer = TypedCardElementPeer;
var AdaptiveCardPeer = /** @class */ (function (_super) {
    __extends(AdaptiveCardPeer, _super);
    function AdaptiveCardPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    AdaptiveCardPeer.prototype.addAction = function (action) {
        this.cardElement.addAction(action);
        this.insertChild(card_designer_surface_1.CardDesignerSurface.actionPeerRegistry.createPeerInstance(this.designerSurface, this, action));
    };
    AdaptiveCardPeer.prototype.internalRemove = function () {
        return true;
    };
    AdaptiveCardPeer.prototype.internalAddCommands = function (commands) {
        var _this = this;
        _super.prototype.internalAddCommands.call(this, commands);
        commands.push(new peer_command_1.PeerCommand({
            name: "Add an action",
            iconClass: "acd-icon-bolt",
            execute: function (command, clickedElement) {
                var popupMenu = new Controls.PopupMenu();
                for (var i = 0; i < Adaptive.AdaptiveCard.actionTypeRegistry.getItemCount(); i++) {
                    var menuItem = new Controls.DropDownItem(i.toString(), Adaptive.AdaptiveCard.actionTypeRegistry.getItemAt(i).typeName);
                    menuItem.onClick = function (clickedItem) {
                        var registryItem = Adaptive.AdaptiveCard.actionTypeRegistry.getItemAt(Number.parseInt(clickedItem.key));
                        var action = registryItem.createInstance();
                        action.title = registryItem.typeName;
                        _this.addAction(action);
                        popupMenu.closePopup();
                    };
                    popupMenu.items.add(menuItem);
                }
                popupMenu.popup(clickedElement);
            }
        }));
    };
    AdaptiveCardPeer.prototype.isDraggable = function () {
        return false;
    };
    AdaptiveCardPeer.prototype.canBeRemoved = function () {
        return false;
    };
    AdaptiveCardPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        var _this = this;
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.remove(CardObjectPeer.idProperty, CardElementPeer.isVisibleProperty, CardElementPeer.horizontalAlignmentProperty, CardElementPeer.separatorProperty, CardElementPeer.heightProperty, CardElementPeer.spacingProperty);
        propertySheet.add(defaultCategory, AdaptiveCardPeer.langProperty, AdaptiveCardPeer.fallbackTextProperty, AdaptiveCardPeer.speakProperty);
        propertySheet.add(PropertySheetCategory.LayoutCategory, ContainerPeer.minHeightProperty, ContainerPeer.verticalContentAlignmentProperty);
        propertySheet.add("Background image", ContainerPeer.backgroundImageProperty);
        propertySheet.add(PropertySheetCategory.SelectionAction, ContainerPeer.selectActionProperty);
        if (this.cardElement.selectAction) {
            var selectActionPeer = card_designer_surface_1.CardDesignerSurface.actionPeerRegistry.createPeerInstance(this.designerSurface, null, this.cardElement.selectAction);
            selectActionPeer.onChanged = function (sender, updatePropertySheet) { _this.changed(updatePropertySheet); };
            var subPropertySheet = new PropertySheet(false);
            selectActionPeer.populatePropertySheet(subPropertySheet, PropertySheetCategory.SelectionAction);
            subPropertySheet.remove(ActionPeer.iconUrlProperty, ActionPeer.styleProperty);
            propertySheet.add(PropertySheetCategory.SelectionAction, new SubPropertySheetEntry(shared_1.Versions.v1_2, this.cardElement.selectAction, subPropertySheet));
        }
    };
    AdaptiveCardPeer.langProperty = new StringPropertyEditor(shared_1.Versions.v1_1, "lang", "Language");
    AdaptiveCardPeer.fallbackTextProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "fallbackText", "Fallback text", true);
    AdaptiveCardPeer.speakProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "speak", "Speak");
    return AdaptiveCardPeer;
}(TypedCardElementPeer));
exports.AdaptiveCardPeer = AdaptiveCardPeer;
var ColumnPeer = /** @class */ (function (_super) {
    __extends(ColumnPeer, _super);
    function ColumnPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ColumnPeer.prototype.isContainer = function () {
        return true;
    };
    ColumnPeer.prototype.internalGetTreeItemText = function () {
        if (this.cardElement.width instanceof Adaptive.SizeAndUnit) {
            switch (this.cardElement.width.unit) {
                case Adaptive.SizeUnit.Weight:
                    return "Weight: " + this.cardElement.width.physicalSize;
                default:
                    return this.cardElement.width.physicalSize + " pixels";
            }
        }
        else {
            switch (this.cardElement.width) {
                case "stretch":
                    return "Stretch";
                case "auto":
                    return "Automatic";
                default:
                    return "";
            }
        }
    };
    ColumnPeer.prototype.isDraggable = function () {
        return false;
    };
    ColumnPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        var _this = this;
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add(defaultCategory, ColumnPeer.widthProperty);
        if (this.cardElement.width instanceof Adaptive.SizeAndUnit) {
            if (this.cardElement.width.unit == Adaptive.SizeUnit.Pixel) {
                propertySheet.add(PropertySheetCategory.DefaultCategory, ColumnPeer.pixelWidthProperty);
            }
            else {
                propertySheet.add(PropertySheetCategory.DefaultCategory, ColumnPeer.weightProperty);
            }
        }
        propertySheet.add(PropertySheetCategory.LayoutCategory, ContainerPeer.minHeightProperty, ContainerPeer.verticalContentAlignmentProperty);
        propertySheet.add(PropertySheetCategory.StyleCategory, ContainerPeer.styleProperty, ContainerPeer.bleedProperty);
        propertySheet.add("Background image", ContainerPeer.backgroundImageProperty);
        propertySheet.add(PropertySheetCategory.SelectionAction, ContainerPeer.selectActionProperty);
        if (this.cardElement.selectAction) {
            var selectActionPeer = card_designer_surface_1.CardDesignerSurface.actionPeerRegistry.createPeerInstance(this.designerSurface, null, this.cardElement.selectAction);
            selectActionPeer.onChanged = function (sender, updatePropertySheet) { _this.changed(updatePropertySheet); };
            var subPropertySheet = new PropertySheet(false);
            selectActionPeer.populatePropertySheet(subPropertySheet, PropertySheetCategory.SelectionAction);
            subPropertySheet.remove(ActionPeer.iconUrlProperty, ActionPeer.styleProperty);
            propertySheet.add(PropertySheetCategory.SelectionAction, new SubPropertySheetEntry(shared_1.Versions.v1_2, this.cardElement.selectAction, subPropertySheet));
        }
    };
    ColumnPeer.pixelWidthProperty = new SizeAndUnitPropertyEditor(shared_1.Versions.v1_1, "width", "Width in pixels", Adaptive.SizeUnit.Pixel);
    ColumnPeer.weightProperty = new SizeAndUnitPropertyEditor(shared_1.Versions.v1_0, "width", "Weight", Adaptive.SizeUnit.Weight);
    ColumnPeer.widthProperty = new ColumnWidthPropertyEditor(shared_1.Versions.v1_0, "width", "Width", [
        { targetVersion: shared_1.Versions.v1_0, name: "Automatic", value: "auto" },
        { targetVersion: shared_1.Versions.v1_0, name: "Stretch", value: "stretch" },
        { targetVersion: shared_1.Versions.v1_0, name: "Weighted", value: "weighted" },
        { targetVersion: shared_1.Versions.v1_1, name: "Pixels", value: "pixels" }
    ], true);
    return ColumnPeer;
}(TypedCardElementPeer));
exports.ColumnPeer = ColumnPeer;
var ColumnSetPeer = /** @class */ (function (_super) {
    __extends(ColumnSetPeer, _super);
    function ColumnSetPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ColumnSetPeer.prototype.isContainer = function () {
        return true;
    };
    ColumnSetPeer.prototype.internalAddCommands = function (commands) {
        var _this = this;
        _super.prototype.internalAddCommands.call(this, commands);
        commands.push(new peer_command_1.PeerCommand({
            name: "Add a column",
            iconClass: "acd-icon-addColumn",
            isPromotable: true,
            execute: function (command, clickedElement) {
                var column = new Adaptive.Column();
                column.width = "stretch";
                _this.cardElement.addColumn(column);
                _this.insertChild(card_designer_surface_1.CardDesignerSurface.cardElementPeerRegistry.createPeerInstance(_this.designerSurface, _this, column));
            }
        }));
    };
    ColumnSetPeer.prototype.internalGetTreeItemText = function () {
        var columnCount = this.cardElement.getCount();
        switch (columnCount) {
            case 0:
                return "No column";
            case 1:
                return "1 column";
            default:
                return columnCount + " columns";
        }
    };
    ColumnSetPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        var _this = this;
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add(defaultCategory, ContainerPeer.minHeightProperty, ContainerPeer.styleProperty, ContainerPeer.bleedProperty);
        propertySheet.add(PropertySheetCategory.SelectionAction, ContainerPeer.selectActionProperty);
        if (this.cardElement.selectAction) {
            var selectActionPeer = card_designer_surface_1.CardDesignerSurface.actionPeerRegistry.createPeerInstance(this.designerSurface, null, this.cardElement.selectAction);
            selectActionPeer.onChanged = function (sender, updatePropertySheet) { _this.changed(updatePropertySheet); };
            var subPropertySheet = new PropertySheet(false);
            selectActionPeer.populatePropertySheet(subPropertySheet, PropertySheetCategory.SelectionAction);
            subPropertySheet.remove(ActionPeer.iconUrlProperty, ActionPeer.styleProperty);
            propertySheet.add(PropertySheetCategory.SelectionAction, new SubPropertySheetEntry(shared_1.Versions.v1_2, this.cardElement.selectAction, subPropertySheet));
        }
    };
    ColumnSetPeer.prototype.canDrop = function (peer) {
        return true;
    };
    return ColumnSetPeer;
}(TypedCardElementPeer));
exports.ColumnSetPeer = ColumnSetPeer;
var ContainerPeer = /** @class */ (function (_super) {
    __extends(ContainerPeer, _super);
    function ContainerPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ContainerPeer.prototype.isContainer = function () {
        return true;
    };
    ContainerPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        var _this = this;
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add(PropertySheetCategory.LayoutCategory, ContainerPeer.minHeightProperty, ContainerPeer.verticalContentAlignmentProperty);
        propertySheet.add(PropertySheetCategory.StyleCategory, ContainerPeer.styleProperty, ContainerPeer.bleedProperty);
        propertySheet.add("Background image", ContainerPeer.backgroundImageProperty);
        propertySheet.add(PropertySheetCategory.SelectionAction, ContainerPeer.selectActionProperty);
        if (this.cardElement.selectAction) {
            var selectActionPeer = card_designer_surface_1.CardDesignerSurface.actionPeerRegistry.createPeerInstance(this.designerSurface, null, this.cardElement.selectAction);
            selectActionPeer.onChanged = function (sender, updatePropertySheet) { _this.changed(updatePropertySheet); };
            var subPropertySheet = new PropertySheet(false);
            selectActionPeer.populatePropertySheet(subPropertySheet, PropertySheetCategory.SelectionAction);
            subPropertySheet.remove(ActionPeer.iconUrlProperty, ActionPeer.styleProperty);
            propertySheet.add(PropertySheetCategory.SelectionAction, new SubPropertySheetEntry(shared_1.Versions.v1_2, this.cardElement.selectAction, subPropertySheet));
        }
    };
    ContainerPeer.selectActionProperty = new ActionPropertyEditor(shared_1.Versions.v1_0, "selectAction", "Action type", [Adaptive.ShowCardAction.JsonTypeName], true);
    ContainerPeer.minHeightProperty = new NumberPropertyEditor(shared_1.Versions.v1_2, "minPixelHeight", "Minimum height in pixels");
    ContainerPeer.verticalContentAlignmentProperty = new EnumPropertyEditor(shared_1.Versions.v1_1, "verticalContentAlignment", "Vertical content alignment", Adaptive.VerticalAlignment);
    ContainerPeer.styleProperty = new ContainerStylePropertyEditor(shared_1.Versions.v1_0, "style", "Style");
    ContainerPeer.bleedProperty = new BooleanPropertyEditor(shared_1.Versions.v1_2, "bleed", "Bleed");
    ContainerPeer.backgroundImageProperty = new CompoundPropertyEditor(shared_1.Versions.v1_0, "backgroundImage", [
        new StringPropertyEditor(shared_1.Versions.v1_0, "url", "URL"),
        new EnumPropertyEditor(shared_1.Versions.v1_2, "fillMode", "Fill mode", Adaptive.FillMode),
        new EnumPropertyEditor(shared_1.Versions.v1_2, "horizontalAlignment", "Horizontal alignment", Adaptive.HorizontalAlignment),
        new EnumPropertyEditor(shared_1.Versions.v1_2, "verticalAlignment", "Vertical alignment", Adaptive.VerticalAlignment)
    ]);
    return ContainerPeer;
}(TypedCardElementPeer));
exports.ContainerPeer = ContainerPeer;
var ActionSetPeer = /** @class */ (function (_super) {
    __extends(ActionSetPeer, _super);
    function ActionSetPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ActionSetPeer.prototype.addAction = function (action) {
        this.cardElement.addAction(action);
        this.insertChild(card_designer_surface_1.CardDesignerSurface.actionPeerRegistry.createPeerInstance(this.designerSurface, this, action));
    };
    ActionSetPeer.prototype.internalAddCommands = function (commands) {
        var _this = this;
        _super.prototype.internalAddCommands.call(this, commands);
        commands.push(new peer_command_1.PeerCommand({
            name: "Add an action",
            iconClass: "acd-icon-bolt",
            execute: function (command, clickedElement) {
                var popupMenu = new Controls.PopupMenu();
                for (var i = 0; i < Adaptive.AdaptiveCard.actionTypeRegistry.getItemCount(); i++) {
                    var menuItem = new Controls.DropDownItem(i.toString(), Adaptive.AdaptiveCard.actionTypeRegistry.getItemAt(i).typeName);
                    menuItem.onClick = function (clickedItem) {
                        var registryItem = Adaptive.AdaptiveCard.actionTypeRegistry.getItemAt(Number.parseInt(clickedItem.key));
                        var action = registryItem.createInstance();
                        action.title = registryItem.typeName;
                        _this.addAction(action);
                        popupMenu.closePopup();
                    };
                    popupMenu.items.add(menuItem);
                }
                popupMenu.popup(clickedElement);
            }
        }));
    };
    return ActionSetPeer;
}(TypedCardElementPeer));
exports.ActionSetPeer = ActionSetPeer;
var ImageSetPeer = /** @class */ (function (_super) {
    __extends(ImageSetPeer, _super);
    function ImageSetPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ImageSetPeer.prototype.internalAddCommands = function (commands) {
        var _this = this;
        _super.prototype.internalAddCommands.call(this, commands);
        commands.push(new peer_command_1.PeerCommand({
            name: "Add an image",
            iconClass: "acd-icon-image",
            isPromotable: true,
            execute: function (command, clickedElement) {
                var newImage = new Adaptive.Image();
                _this.cardElement.addImage(newImage);
                _this.insertChild(card_designer_surface_1.CardDesignerSurface.cardElementPeerRegistry.createPeerInstance(_this.designerSurface, _this, newImage));
            }
        }));
    };
    ImageSetPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add(defaultCategory, ImageSetPeer.ImageSizeProperty);
    };
    ImageSetPeer.ImageSizeProperty = new EnumPropertyEditor(shared_1.Versions.v1_0, "imageSize", "Image size", Adaptive.Size);
    return ImageSetPeer;
}(TypedCardElementPeer));
exports.ImageSetPeer = ImageSetPeer;
var ImagePeer = /** @class */ (function (_super) {
    __extends(ImagePeer, _super);
    function ImagePeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(ImagePeer.prototype, "isParentImageSet", {
        get: function () {
            return this.parent && this.parent instanceof ImageSetPeer;
        },
        enumerable: true,
        configurable: true
    });
    ImagePeer.prototype.isDraggable = function () {
        return !this.isParentImageSet;
    };
    ImagePeer.prototype.getBoundingRect = function () {
        if (this.isParentImageSet) {
            var designSurfaceOffset = this.designerSurface.getDesignerSurfaceOffset();
            var actionBoundingRect = this.cardElement.renderedElement.getBoundingClientRect();
            return new miscellaneous_1.Rect(actionBoundingRect.top - designSurfaceOffset.y, actionBoundingRect.right - designSurfaceOffset.x, actionBoundingRect.bottom - designSurfaceOffset.y, actionBoundingRect.left - designSurfaceOffset.x);
        }
        else {
            return _super.prototype.getBoundingRect.call(this);
        }
    };
    ImagePeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        var _this = this;
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add(defaultCategory, ImagePeer.urlProperty, ImagePeer.altTextProperty);
        if (!this.isParentImageSet) {
            propertySheet.add(PropertySheetCategory.LayoutCategory, ImagePeer.sizeProperty, ImagePeer.pixelWidthProperty, ImagePeer.pixelHeightProperty);
            propertySheet.add(PropertySheetCategory.StyleCategory, ImagePeer.styleProperty, ImagePeer.backgroundColorProperty);
            propertySheet.add(PropertySheetCategory.SelectionAction, ContainerPeer.selectActionProperty);
            if (this.cardElement.selectAction) {
                var selectActionPeer = card_designer_surface_1.CardDesignerSurface.actionPeerRegistry.createPeerInstance(this.designerSurface, null, this.cardElement.selectAction);
                selectActionPeer.onChanged = function (sender, updatePropertySheet) { _this.changed(updatePropertySheet); };
                var subPropertySheet = new PropertySheet(false);
                selectActionPeer.populatePropertySheet(subPropertySheet, PropertySheetCategory.SelectionAction);
                subPropertySheet.remove(ActionPeer.iconUrlProperty, ActionPeer.styleProperty);
                propertySheet.add(PropertySheetCategory.SelectionAction, new SubPropertySheetEntry(shared_1.Versions.v1_2, this.cardElement.selectAction, subPropertySheet));
            }
        }
    };
    ImagePeer.urlProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "url", "Url");
    ImagePeer.altTextProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "altText", "Alternate text");
    ImagePeer.sizeProperty = new EnumPropertyEditor(shared_1.Versions.v1_0, "size", "Size", Adaptive.Size);
    ImagePeer.pixelWidthProperty = new NumberPropertyEditor(shared_1.Versions.v1_1, "pixelWidth", "Width in pixels");
    ImagePeer.pixelHeightProperty = new NumberPropertyEditor(shared_1.Versions.v1_1, "pixelHeight", "Height in pixels");
    ImagePeer.styleProperty = new EnumPropertyEditor(shared_1.Versions.v1_0, "style", "Style", Adaptive.ImageStyle);
    ImagePeer.backgroundColorProperty = new StringPropertyEditor(shared_1.Versions.v1_1, "backgroundColor", "Background color");
    return ImagePeer;
}(TypedCardElementPeer));
exports.ImagePeer = ImagePeer;
var MediaPeer = /** @class */ (function (_super) {
    __extends(MediaPeer, _super);
    function MediaPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MediaPeer.prototype.internalGetTreeItemText = function () {
        if (this.cardElement.selectedMediaType == "audio") {
            return "audio";
        }
        else if (this.cardElement.selectedMediaType == "video") {
            return "video";
        }
        else {
            return _super.prototype.internalGetTreeItemText.call(this);
        }
    };
    MediaPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add(defaultCategory, MediaPeer.altTextProperty, MediaPeer.posterUrlProperty);
        propertySheet.add("Sources", MediaPeer.sourcesProperty);
    };
    MediaPeer.altTextProperty = new StringPropertyEditor(shared_1.Versions.v1_1, "altText", "Alternate text");
    MediaPeer.posterUrlProperty = new StringPropertyEditor(shared_1.Versions.v1_1, "posterUrl", "Poster URL");
    MediaPeer.sourcesProperty = new NameValuePairPropertyEditor(shared_1.Versions.v1_1, "sources", "url", "mimeType", function (name, value) { return new Adaptive.MediaSource(name, value); }, "URL", "MIME type", "Add a new source", "No source has been defined.");
    return MediaPeer;
}(TypedCardElementPeer));
exports.MediaPeer = MediaPeer;
var FactSetPeer = /** @class */ (function (_super) {
    __extends(FactSetPeer, _super);
    function FactSetPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    FactSetPeer.prototype.internalGetTreeItemText = function () {
        if (this.cardElement.facts.length == 0) {
            return "No fact";
        }
        var allNames = this.cardElement.facts.map(function (value, index, array) {
            return value.name;
        });
        return allNames.join(", ");
    };
    FactSetPeer.prototype.initializeCardElement = function () {
        _super.prototype.initializeCardElement.call(this);
        this.cardElement.facts.push(new Adaptive.Fact("Fact 1", "Value 1"), new Adaptive.Fact("Fact 2", "Value 2"));
    };
    FactSetPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add("Facts", FactSetPeer.factsProperty);
        propertySheet.remove(CardElementPeer.horizontalAlignmentProperty);
    };
    FactSetPeer.factsProperty = new NameValuePairPropertyEditor(shared_1.Versions.v1_0, "facts", "name", "value", function (name, value) { return new Adaptive.Fact(name, value); }, "Name", "Value", "Add a new fact", "This FactSet is empty.");
    return FactSetPeer;
}(TypedCardElementPeer));
exports.FactSetPeer = FactSetPeer;
var InputPeer = /** @class */ (function (_super) {
    __extends(InputPeer, _super);
    function InputPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    InputPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add("Validation", InputPeer.validationProperty);
        propertySheet.remove(CardElementPeer.horizontalAlignmentProperty, CardElementPeer.heightProperty);
    };
    InputPeer.defaultValueProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "defaultValue", "Default value");
    InputPeer.validationProperty = new CompoundPropertyEditor(shared_1.Versions.vNext, "validation", [
        new EnumPropertyEditor(shared_1.Versions.vNext, "necessity", "Necessity", Adaptive.InputValidationNecessity),
        new StringPropertyEditor(shared_1.Versions.vNext, "errorMessage", "Error message")
    ]);
    return InputPeer;
}(TypedCardElementPeer));
exports.InputPeer = InputPeer;
var TextInputPeer = /** @class */ (function (_super) {
    __extends(TextInputPeer, _super);
    function TextInputPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TextInputPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        var _this = this;
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add(defaultCategory, TextInputPeer.placeholderProperty, TextInputPeer.isMultilineProperty);
        if (!this.cardElement.isMultiline) {
            propertySheet.add(PropertySheetCategory.DefaultCategory, TextInputPeer.styleProperty);
        }
        propertySheet.add(PropertySheetCategory.InlineAction, TextInputPeer.inlineActionProperty);
        if (this.cardElement.inlineAction) {
            var inlineActionPeer = card_designer_surface_1.CardDesignerSurface.actionPeerRegistry.createPeerInstance(this.designerSurface, null, this.cardElement.inlineAction);
            inlineActionPeer.onChanged = function (sender, updatePropertySheet) { _this.changed(updatePropertySheet); };
            var subPropertySheet = new PropertySheet(false);
            inlineActionPeer.populatePropertySheet(subPropertySheet, PropertySheetCategory.InlineAction);
            subPropertySheet.remove(ActionPeer.styleProperty);
            propertySheet.add(PropertySheetCategory.InlineAction, new SubPropertySheetEntry(shared_1.Versions.v1_2, this.cardElement.inlineAction, subPropertySheet));
        }
        propertySheet.add(defaultCategory, TextInputPeer.maxLengthProperty, TextInputPeer.defaultValueProperty);
    };
    TextInputPeer.prototype.initializeCardElement = function () {
        _super.prototype.initializeCardElement.call(this);
        this.cardElement.placeholder = "Placeholder text";
    };
    TextInputPeer.placeholderProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "placeholder", "Placeholder");
    TextInputPeer.isMultilineProperty = new BooleanPropertyEditor(shared_1.Versions.v1_0, "isMultiline", "Multi-line", true);
    TextInputPeer.styleProperty = new EnumPropertyEditor(shared_1.Versions.v1_0, "style", "Style", Adaptive.InputTextStyle);
    TextInputPeer.maxLengthProperty = new NumberPropertyEditor(shared_1.Versions.v1_0, "maxLength", "Maximum length");
    TextInputPeer.inlineActionProperty = new ActionPropertyEditor(shared_1.Versions.v1_2, "inlineAction", "Action type", [Adaptive.ShowCardAction.JsonTypeName], true);
    return TextInputPeer;
}(InputPeer));
exports.TextInputPeer = TextInputPeer;
var NumberInputPeer = /** @class */ (function (_super) {
    __extends(NumberInputPeer, _super);
    function NumberInputPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    NumberInputPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add(defaultCategory, NumberInputPeer.placeholderProperty, NumberInputPeer.defaultValueProperty, NumberInputPeer.minProperty, NumberInputPeer.maxProperty);
    };
    NumberInputPeer.prototype.initializeCardElement = function () {
        _super.prototype.initializeCardElement.call(this);
        this.cardElement.placeholder = "Placeholder text";
    };
    NumberInputPeer.placeholderProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "placeholder", "Placeholder");
    NumberInputPeer.minProperty = new NumberPropertyEditor(shared_1.Versions.v1_0, "min", "Minimum value");
    NumberInputPeer.maxProperty = new NumberPropertyEditor(shared_1.Versions.v1_0, "max", "Maximum value");
    return NumberInputPeer;
}(InputPeer));
exports.NumberInputPeer = NumberInputPeer;
var DateInputPeer = /** @class */ (function (_super) {
    __extends(DateInputPeer, _super);
    function DateInputPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DateInputPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add(defaultCategory, DateInputPeer.defaultValueProperty, DateInputPeer.minProperty, DateInputPeer.maxProperty);
    };
    DateInputPeer.minProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "min", "Minimum value");
    DateInputPeer.maxProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "max", "Maximum value");
    return DateInputPeer;
}(InputPeer));
exports.DateInputPeer = DateInputPeer;
var TimeInputPeer = /** @class */ (function (_super) {
    __extends(TimeInputPeer, _super);
    function TimeInputPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TimeInputPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add(defaultCategory, TimeInputPeer.defaultValueProperty, TimeInputPeer.minProperty, TimeInputPeer.maxProperty);
    };
    TimeInputPeer.minProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "min", "Minimum value");
    TimeInputPeer.maxProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "max", "Maximum value");
    return TimeInputPeer;
}(InputPeer));
exports.TimeInputPeer = TimeInputPeer;
var ToggleInputPeer = /** @class */ (function (_super) {
    __extends(ToggleInputPeer, _super);
    function ToggleInputPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ToggleInputPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add(defaultCategory, ToggleInputPeer.titleProperty, ToggleInputPeer.valueOnProperty, ToggleInputPeer.valueOffProperty, ToggleInputPeer.defaultValueProperty);
        propertySheet.add(PropertySheetCategory.LayoutCategory, ToggleInputPeer.wrapProperty);
    };
    ToggleInputPeer.prototype.initializeCardElement = function () {
        this.cardElement.title = "New Input.Toggle";
    };
    ToggleInputPeer.titleProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "title", "Title");
    ToggleInputPeer.valueOnProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "valueOn", "Value when on");
    ToggleInputPeer.valueOffProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "valueOff", "Value when off");
    ToggleInputPeer.wrapProperty = new BooleanPropertyEditor(shared_1.Versions.v1_2, "wrap", "Wrap");
    return ToggleInputPeer;
}(InputPeer));
exports.ToggleInputPeer = ToggleInputPeer;
var ChoiceSetInputPeer = /** @class */ (function (_super) {
    __extends(ChoiceSetInputPeer, _super);
    function ChoiceSetInputPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ChoiceSetInputPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add(defaultCategory, ChoiceSetInputPeer.placeholderProperty, ChoiceSetInputPeer.isMultiselectProperty, ChoiceSetInputPeer.isCompactProperty, ChoiceSetInputPeer.defaultValueProperty);
        propertySheet.add(PropertySheetCategory.LayoutCategory, ToggleInputPeer.wrapProperty);
        propertySheet.add("Choices", ChoiceSetInputPeer.choicesProperty);
    };
    ChoiceSetInputPeer.prototype.initializeCardElement = function () {
        this.cardElement.placeholder = "Placeholder text";
        this.cardElement.choices.push(new Adaptive.Choice("Choice 1", "Choice 1"), new Adaptive.Choice("Choice 2", "Choice 2"));
    };
    ChoiceSetInputPeer.placeholderProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "placeholder", "Placeholder");
    ChoiceSetInputPeer.isMultiselectProperty = new BooleanPropertyEditor(shared_1.Versions.v1_0, "isMultiSelect", "Allow multi selection");
    ChoiceSetInputPeer.isCompactProperty = new BooleanPropertyEditor(shared_1.Versions.v1_0, "isCompact", "Compact style");
    ChoiceSetInputPeer.wrapProperty = new BooleanPropertyEditor(shared_1.Versions.v1_2, "wrap", "Wrap");
    ChoiceSetInputPeer.choicesProperty = new NameValuePairPropertyEditor(shared_1.Versions.v1_0, "choices", "title", "value", function (name, value) { return new Adaptive.Choice(name, value); }, "Title", "Value", "Add a new choice", "This ChoiceSet is empty");
    return ChoiceSetInputPeer;
}(InputPeer));
exports.ChoiceSetInputPeer = ChoiceSetInputPeer;
var TextBlockPeerInplaceEditor = /** @class */ (function (_super) {
    __extends(TextBlockPeerInplaceEditor, _super);
    function TextBlockPeerInplaceEditor() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TextBlockPeerInplaceEditor.prototype.close = function (applyChanges) {
        if (this.onClose) {
            this.onClose(applyChanges);
        }
    };
    TextBlockPeerInplaceEditor.prototype.initialize = function () {
        this._renderedElement.select();
    };
    TextBlockPeerInplaceEditor.prototype.applyChanges = function () {
        this.cardElement.text = this._renderedElement.value;
    };
    TextBlockPeerInplaceEditor.prototype.render = function () {
        var _this = this;
        this._renderedElement = document.createElement("textarea");
        this._renderedElement.className = "acd-textBlock-inplace-editor";
        this._renderedElement.value = this.cardElement.text;
        this._renderedElement.onkeydown = function (e) {
            switch (e.keyCode) {
                case Controls.KEY_ESCAPE:
                    _this.close(false);
                    e.preventDefault();
                    e.cancelBubble = true;
                    break;
                case Controls.KEY_ENTER:
                    _this.close(true);
                    e.preventDefault();
                    e.cancelBubble = true;
                    break;
            }
            return !e.cancelBubble;
        };
        this.cardElement.applyStylesTo(this._renderedElement);
        return this._renderedElement;
    };
    return TextBlockPeerInplaceEditor;
}(CardElementPeerInplaceEditor));
var TextBlockPeer = /** @class */ (function (_super) {
    __extends(TextBlockPeer, _super);
    function TextBlockPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TextBlockPeer.prototype.createInplaceEditor = function () {
        return new TextBlockPeerInplaceEditor(this.cardElement);
    };
    TextBlockPeer.prototype.internalGetTreeItemText = function () {
        return this.cardElement.text;
    };
    TextBlockPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add(defaultCategory, TextBlockPeer.textProperty);
        propertySheet.add(PropertySheetCategory.LayoutCategory, TextBlockPeer.wrapProperty, TextBlockPeer.maxLinesProperty);
        propertySheet.add(PropertySheetCategory.StyleCategory, TextBlockPeer.fontTypeProperty, TextBlockPeer.sizeProperty, TextBlockPeer.weightProperty, TextBlockPeer.colorProperty, TextBlockPeer.subtleProperty);
    };
    TextBlockPeer.prototype.getToolTip = function () {
        return "Double click to edit";
    };
    TextBlockPeer.prototype.initializeCardElement = function () {
        if (!this.cardElement.text || this.cardElement.text == "") {
            this.cardElement.text = "New TextBlock";
        }
    };
    TextBlockPeer.textProperty = new StringPropertyEditor(shared_1.Versions.v1_0, "text", "Text", true);
    TextBlockPeer.wrapProperty = new BooleanPropertyEditor(shared_1.Versions.v1_0, "wrap", "Wrap");
    TextBlockPeer.maxLinesProperty = new NumberPropertyEditor(shared_1.Versions.v1_0, "maxLines", "Maximum lines", 0);
    TextBlockPeer.fontTypeProperty = new EnumPropertyEditor(shared_1.Versions.v1_2, "fontType", "Font type", Adaptive.FontType);
    TextBlockPeer.sizeProperty = new EnumPropertyEditor(shared_1.Versions.v1_0, "size", "Size", Adaptive.TextSize);
    TextBlockPeer.weightProperty = new EnumPropertyEditor(shared_1.Versions.v1_0, "weight", "Weight", Adaptive.TextWeight);
    TextBlockPeer.colorProperty = new EnumPropertyEditor(shared_1.Versions.v1_0, "color", "Color", Adaptive.TextColor);
    TextBlockPeer.subtleProperty = new BooleanPropertyEditor(shared_1.Versions.v1_0, "subtle", "Subtle");
    return TextBlockPeer;
}(TypedCardElementPeer));
exports.TextBlockPeer = TextBlockPeer;
var RichTextBlockPeer = /** @class */ (function (_super) {
    __extends(RichTextBlockPeer, _super);
    function RichTextBlockPeer() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    RichTextBlockPeer.prototype.internalGetTreeItemText = function () {
        return this.cardElement.asString();
    };
    RichTextBlockPeer.prototype.populatePropertySheet = function (propertySheet, defaultCategory) {
        if (defaultCategory === void 0) { defaultCategory = PropertySheetCategory.DefaultCategory; }
        _super.prototype.populatePropertySheet.call(this, propertySheet, defaultCategory);
        propertySheet.add(defaultCategory, new CustomPropertySheetEntry("*", function (context) {
            var infoTextBlock = new Adaptive.TextBlock();
            infoTextBlock.text = "Use the **Card Payload Editor** to edit the text of this RichTextBlock element.";
            infoTextBlock.wrap = true;
            infoTextBlock.spacing = Adaptive.Spacing.Large;
            infoTextBlock.separator = true;
            infoTextBlock.horizontalAlignment = Adaptive.HorizontalAlignment.Center;
            return infoTextBlock;
        }));
    };
    RichTextBlockPeer.prototype.initializeCardElement = function () {
        var textRun = new Adaptive.TextRun();
        textRun.text = "New RichTextBlock";
        this.cardElement.addInline(textRun);
    };
    return RichTextBlockPeer;
}(TypedCardElementPeer));
exports.RichTextBlockPeer = RichTextBlockPeer;


/***/ }),

/***/ "./src/dialog.ts":
/*!***********************!*\
  !*** ./src/dialog.ts ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Dialog = /** @class */ (function () {
    function Dialog() {
        this._isOpen = false;
        this.onClose = null;
    }
    Dialog.prototype.open = function () {
        if (!this._isOpen) {
            this._overlayElement = document.createElement("div");
            this._overlayElement.className = "acd-dialog-overlay";
            var dialogFrameElement = document.createElement("div");
            dialogFrameElement.className = "acd-dialog-frame";
            dialogFrameElement.style.width = this.width;
            dialogFrameElement.style.height = this.height;
            var content = this.renderContent();
            content.style.flex = "1 1 auto";
            dialogFrameElement.appendChild(content);
            this._overlayElement.appendChild(dialogFrameElement);
            document.body.appendChild(this._overlayElement);
            this._isOpen = true;
        }
    };
    Dialog.prototype.close = function () {
        if (this._isOpen) {
            document.body.removeChild(this._overlayElement);
            this._isOpen = false;
            if (this.onClose) {
                this.onClose(this);
            }
        }
    };
    return Dialog;
}());
exports.Dialog = Dialog;


/***/ }),

/***/ "./src/downloader.ts":
/*!***************************!*\
  !*** ./src/downloader.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Downloader = /** @class */ (function () {
    function Downloader(url) {
        this.url = url;
        this.onError = null;
        this.onSuccess = null;
    }
    Downloader.prototype.error = function () {
        if (this.onError) {
            this.onError(this);
        }
    };
    Downloader.prototype.success = function () {
        if (this.onSuccess) {
            this.onSuccess(this);
        }
    };
    Downloader.prototype.download = function () {
        var _this = this;
        var request = new XMLHttpRequest();
        request.onerror = function () {
            _this.error();
        };
        request.onload = function () {
            _this._data = request.responseText;
            _this.success();
        };
        try {
            request.open("GET", this.url, true);
            request.send();
        }
        catch (e) {
            this.error();
        }
    };
    Object.defineProperty(Downloader.prototype, "data", {
        get: function () {
            return this._data;
        },
        enumerable: true,
        configurable: true
    });
    return Downloader;
}());
exports.Downloader = Downloader;


/***/ }),

/***/ "./src/draggable-element.ts":
/*!**********************************!*\
  !*** ./src/draggable-element.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.DRAG_THRESHOLD = 10;
var DraggableElement = /** @class */ (function () {
    function DraggableElement() {
    }
    DraggableElement.prototype.releasePointerCapture = function (pointerId) {
        this.getDragSourceElement().releasePointerCapture(pointerId);
        this._isPointerDown = false;
    };
    Object.defineProperty(DraggableElement.prototype, "isPointerOver", {
        get: function () {
            return this._isPointerOver;
        },
        set: function (value) {
            if (value != this._isPointerOver) {
                this._isPointerOver = value;
                this.updateLayout();
            }
        },
        enumerable: true,
        configurable: true
    });
    DraggableElement.prototype.startDrag = function () {
        if (this.isDraggable() && !this.dragging) {
            this.dragging = true;
            if (this.onStartDrag) {
                this.onStartDrag(this);
            }
        }
    };
    DraggableElement.prototype.pointerDown = function (e) {
        if (!this._isPointerDown) {
            this._isPointerDown = true;
            this._lastClickedPoint = { x: e.offsetX, y: e.offsetY };
            this.getDragSourceElement().setPointerCapture(e.pointerId);
        }
    };
    DraggableElement.prototype.pointerUp = function (e) {
        if (this._isPointerDown) {
            this.releasePointerCapture(e.pointerId);
            this.endDrag();
        }
    };
    DraggableElement.prototype.pointerMove = function (e) {
        if (this._isPointerDown) {
            if (Math.abs(e.offsetX - this._lastClickedPoint.x) >= exports.DRAG_THRESHOLD || Math.abs(e.offsetY - this._lastClickedPoint.y) >= exports.DRAG_THRESHOLD) {
                this.releasePointerCapture(e.pointerId);
                this.startDrag();
            }
        }
    };
    DraggableElement.prototype.click = function (e) {
        if (this.onClick) {
            this.onDoubleClick(this);
        }
    };
    DraggableElement.prototype.doubleClick = function (e) {
        if (this.onDoubleClick) {
            this.onDoubleClick(this);
        }
    };
    DraggableElement.prototype.internalUpdateCssStyles = function () {
        // Do nothing in base implementation
    };
    DraggableElement.prototype.internalUpdateLayout = function () {
        // Do nothing in base implementation
    };
    DraggableElement.prototype.getDragSourceElement = function () {
        return this._renderedElement;
    };
    DraggableElement.prototype.isDraggable = function () {
        return true;
    };
    DraggableElement.prototype.endDrag = function () {
        if (this.dragging) {
            this.dragging = false;
            if (this.onEndDrag) {
                this.onEndDrag(this);
            }
        }
    };
    DraggableElement.prototype.updateLayout = function () {
        this.internalUpdateCssStyles();
        this.internalUpdateLayout();
    };
    DraggableElement.prototype.render = function () {
        var _this = this;
        this._renderedElement = this.internalRender();
        var dragSourceElement = this.getDragSourceElement();
        dragSourceElement.onclick = function (e) { _this.click(e); };
        dragSourceElement.ondblclick = function (e) { _this.doubleClick(e); };
        if (this.isDraggable()) {
            dragSourceElement.onmousedown = function (e) { e.preventDefault(); };
            dragSourceElement.onpointerenter = function () { _this.isPointerOver = true; };
            dragSourceElement.onpointerleave = function () { _this.isPointerOver = false; };
            dragSourceElement.onpointerdown = function (e) { _this.pointerDown(e); };
            dragSourceElement.onpointerup = function (e) { _this.pointerUp(e); };
            dragSourceElement.onpointermove = function (e) { _this.pointerMove(e); };
        }
        return this._renderedElement;
    };
    Object.defineProperty(DraggableElement.prototype, "renderedElement", {
        get: function () {
            return this._renderedElement;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DraggableElement.prototype, "dragging", {
        get: function () {
            return this._dragging;
        },
        set: function (value) {
            this._dragging = value;
            this.internalUpdateCssStyles();
        },
        enumerable: true,
        configurable: true
    });
    return DraggableElement;
}());
exports.DraggableElement = DraggableElement;


/***/ }),

/***/ "./src/fullscreen-handler.ts":
/*!***********************************!*\
  !*** ./src/fullscreen-handler.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var FullScreenHandler = /** @class */ (function () {
    function FullScreenHandler() {
        var _this = this;
        var untypedBody = document.body;
        if (typeof untypedBody.onfullscreenchange !== "undefined") {
            untypedBody.onfullscreenchange = function () { return _this.fullScrerenChanged(); };
        }
        else if (typeof untypedBody.onwebkitfullscreenchange !== "undefined") {
            untypedBody.onwebkitfullscreenchange = function () { return _this.fullScrerenChanged(); };
        }
        else if (typeof untypedBody.onwebkitfullscreenchange !== "undefined") {
            untypedBody.onmozfullscreenchange = function () { return _this.fullScrerenChanged(); };
        }
        else if (typeof untypedBody.onwebkitfullscreenchange !== "undefined") {
            untypedBody.MSFullscreenChange = function () { return _this.fullScrerenChanged(); };
        }
    }
    FullScreenHandler.prototype.fullScrerenChanged = function () {
        if (this.onFullScreenChanged) {
            this.onFullScreenChanged(this.isFullScreen);
        }
    };
    FullScreenHandler.prototype.enterFullScreen = function () {
        if (!this.isFullScreen) {
            var untypedBody = document.body;
            if (untypedBody.requestFullscreen) {
                untypedBody.requestFullscreen();
            }
            else if (untypedBody.webkitRequestFullscreen) {
                untypedBody.webkitRequestFullscreen();
            }
            else if (untypedBody.mozRequestFullScreen) {
                untypedBody.mozRequestFullScreen();
            }
            else if (untypedBody.msRequestFullscreen) {
                untypedBody.msRequestFullscreen();
            }
            else {
                alert("Your browser doesn't support fullscreen.");
            }
        }
    };
    FullScreenHandler.prototype.exitFullScreen = function () {
        if (this.isFullScreen) {
            var untypedDocument = document;
            if (untypedDocument.exitFullscreen) {
                untypedDocument.exitFullscreen();
            }
            else if (untypedDocument.webkitExitFullscreen) {
                untypedDocument.webkitExitFullscreen();
            }
            else if (untypedDocument.mozCancelFullScreen) {
                untypedDocument.mozCancelFullScreen();
            }
            else if (untypedDocument.msExitFullscreen) {
                untypedDocument.msExitFullscreen();
            }
        }
    };
    FullScreenHandler.prototype.toggleFullScreen = function () {
        if (this.isFullScreen) {
            this.exitFullScreen();
        }
        else {
            this.enterFullScreen();
        }
    };
    Object.defineProperty(FullScreenHandler.prototype, "isFullScreen", {
        get: function () {
            var untypedDocument = document;
            return untypedDocument.fullscreen || untypedDocument.webkitIsFullScreen || untypedDocument.mozFullScreen;
        },
        enumerable: true,
        configurable: true
    });
    return FullScreenHandler;
}());
exports.FullScreenHandler = FullScreenHandler;


/***/ }),

/***/ "./src/hostConfigs/cortana-skills-classic.json":
/*!*****************************************************!*\
  !*** ./src/hostConfigs/cortana-skills-classic.json ***!
  \*****************************************************/
/*! exports provided: spacing, separator, supportsInteractivity, fontTypes, containerStyles, imageSizes, actions, adaptiveCard, imageSet, factSet, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"spacing\":{\"small\":3,\"default\":8,\"medium\":20,\"large\":30,\"extraLarge\":40,\"padding\":10},\"separator\":{\"lineThickness\":1,\"lineColor\":\"#FF999999\"},\"supportsInteractivity\":true,\"fontTypes\":{\"default\":{\"fontFamily\":\"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\"fontSizes\":{\"small\":13,\"default\":15,\"medium\":18,\"large\":20,\"extraLarge\":24},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}},\"monospace\":{\"fontFamily\":\"'Courier New', Courier, monospace\",\"fontSizes\":{\"small\":13,\"default\":15,\"medium\":18,\"large\":20,\"extraLarge\":24},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}}},\"containerStyles\":{\"default\":{\"backgroundColor\":\"#000000\",\"foregroundColors\":{\"default\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#99FFFFFF\"},\"accent\":{\"default\":\"#FF2E89FC\",\"subtle\":\"#CC2E89FC\"},\"dark\":{\"default\":\"#FF999999\",\"subtle\":\"#99999999\"},\"light\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#99FFFFFF\"},\"attention\":{\"default\":\"#CCFF0000\",\"subtle\":\"#99FF0000\"},\"good\":{\"default\":\"#CC00FF00\",\"subtle\":\"#9900FF00\"},\"warning\":{\"default\":\"#CCFF9800\",\"subtle\":\"#99FF9800\"}}},\"emphasis\":{\"backgroundColor\":\"#33FFFFFF\",\"foregroundColors\":{\"default\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#99FFFFFF\"},\"accent\":{\"default\":\"#FF2E89FC\",\"subtle\":\"#CC2E89FC\"},\"dark\":{\"default\":\"#FF999999\",\"subtle\":\"#99999999\"},\"light\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#99FFFFFF\"},\"attention\":{\"default\":\"#CCFF0000\",\"subtle\":\"#99FF0000\"},\"good\":{\"default\":\"#CC00FF00\",\"subtle\":\"#9900FF00\"},\"warning\":{\"default\":\"#CCFF9800\",\"subtle\":\"#99FF9800\"}}},\"accent\":{\"backgroundColor\":\"#C7DEF9\",\"foregroundColors\":{\"default\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#99FFFFFF\"},\"accent\":{\"default\":\"#FF2E89FC\",\"subtle\":\"#CC2E89FC\"},\"dark\":{\"default\":\"#FF999999\",\"subtle\":\"#99999999\"},\"light\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#99FFFFFF\"},\"attention\":{\"default\":\"#CCFF0000\",\"subtle\":\"#99FF0000\"},\"good\":{\"default\":\"#CC00FF00\",\"subtle\":\"#9900FF00\"},\"warning\":{\"default\":\"#CCFF9800\",\"subtle\":\"#99FF9800\"}}},\"good\":{\"backgroundColor\":\"#CCFFCC\",\"foregroundColors\":{\"default\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#99FFFFFF\"},\"accent\":{\"default\":\"#FF2E89FC\",\"subtle\":\"#CC2E89FC\"},\"dark\":{\"default\":\"#FF999999\",\"subtle\":\"#99999999\"},\"light\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#99FFFFFF\"},\"attention\":{\"default\":\"#CCFF0000\",\"subtle\":\"#99FF0000\"},\"good\":{\"default\":\"#CC00FF00\",\"subtle\":\"#9900FF00\"},\"warning\":{\"default\":\"#CCFF9800\",\"subtle\":\"#99FF9800\"}}},\"attention\":{\"backgroundColor\":\"#FFC5B2\",\"foregroundColors\":{\"default\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#99FFFFFF\"},\"accent\":{\"default\":\"#FF2E89FC\",\"subtle\":\"#CC2E89FC\"},\"dark\":{\"default\":\"#FF999999\",\"subtle\":\"#99999999\"},\"light\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#99FFFFFF\"},\"attention\":{\"default\":\"#CCFF0000\",\"subtle\":\"#99FF0000\"},\"good\":{\"default\":\"#CC00FF00\",\"subtle\":\"#9900FF00\"},\"warning\":{\"default\":\"#CCFF9800\",\"subtle\":\"#99FF9800\"}}},\"warning\":{\"backgroundColor\":\"#FFE2B2\",\"foregroundColors\":{\"default\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#99FFFFFF\"},\"accent\":{\"default\":\"#FF2E89FC\",\"subtle\":\"#CC2E89FC\"},\"dark\":{\"default\":\"#FF999999\",\"subtle\":\"#99999999\"},\"light\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#99FFFFFF\"},\"attention\":{\"default\":\"#CCFF0000\",\"subtle\":\"#99FF0000\"},\"good\":{\"default\":\"#CC00FF00\",\"subtle\":\"#9900FF00\"},\"warning\":{\"default\":\"#CCFF9800\",\"subtle\":\"#99FF9800\"}}}},\"imageSizes\":{\"small\":40,\"medium\":68,\"large\":320},\"actions\":{\"maxActions\":5,\"spacing\":\"default\",\"buttonSpacing\":5,\"showCard\":{\"actionMode\":\"inline\",\"inlineTopMargin\":20},\"actionsOrientation\":\"horizontal\",\"actionAlignment\":\"stretch\"},\"adaptiveCard\":{\"allowCustomStyle\":false},\"imageSet\":{\"imageSize\":\"small\",\"maxImageHeight\":100},\"factSet\":{\"title\":{\"color\":\"default\",\"size\":\"default\",\"isSubtle\":false,\"weight\":\"bolder\",\"wrap\":true},\"value\":{\"color\":\"default\",\"size\":\"default\",\"isSubtle\":false,\"weight\":\"default\",\"wrap\":true},\"spacing\":12}}");

/***/ }),

/***/ "./src/hostConfigs/cortana-skills-dark.json":
/*!**************************************************!*\
  !*** ./src/hostConfigs/cortana-skills-dark.json ***!
  \**************************************************/
/*! exports provided: spacing, separator, fontTypes, fontSizes, fontWeights, imageSizes, containerStyles, actions, imageSet, factSet, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"spacing\":{\"small\":4,\"default\":8,\"medium\":12,\"padding\":16,\"large\":20,\"extraLarge\":32},\"separator\":{\"lineThickness\":1,\"lineColor\":\"#505050\"},\"fontTypes\":{\"default\":{\"fontFamily\":\"Segoe UI, Tahoma, Geneva, Verdana, sans-serif\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":16,\"large\":18,\"extraLarge\":24},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}},\"monospace\":{\"fontFamily\":\"Courier New, Courier, monospace\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":16,\"large\":18,\"extraLarge\":24},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}}},\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":16,\"large\":18,\"extraLarge\":24},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600},\"imageSizes\":{\"small\":32,\"medium\":48,\"large\":96},\"containerStyles\":{\"default\":{\"foregroundColors\":{\"default\":{\"default\":\"#ffffffff\",\"subtle\":\"#b3ffffff\"},\"dark\":{\"default\":\"#ffffff\",\"subtle\":\"#3fffffff\"},\"light\":{\"default\":\"#000000\",\"subtle\":\"#3e000000\"},\"accent\":{\"default\":\"#69afe5\",\"subtle\":\"#3e00aeef\"},\"good\":{\"default\":\"#ff92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#fff8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#ffd74654\",\"subtle\":\"#e5d74654\"}},\"backgroundColor\":\"#1f1f1f\"},\"emphasis\":{\"foregroundColors\":{\"default\":{\"default\":\"#ffffffff\",\"subtle\":\"#b3ffffff\"},\"dark\":{\"default\":\"#ffffff\",\"subtle\":\"#3fffffff\"},\"light\":{\"default\":\"#000000\",\"subtle\":\"#3e000000\"},\"accent\":{\"default\":\"#69afe5\",\"subtle\":\"#3e00aeef\"},\"good\":{\"default\":\"#ff92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#fff8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#ffd74654\",\"subtle\":\"#e5d74654\"}},\"backgroundColor\":\"#737373\"},\"accent\":{\"backgroundColor\":\"#c7def9\",\"foregroundColors\":{\"default\":{\"default\":\"#1f1f1f\",\"subtle\":\"#b31f1f1f\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#3e000000\"},\"light\":{\"default\":\"#ffffff\",\"subtle\":\"#3fffffff\"},\"accent\":{\"default\":\"#0078d4\",\"subtle\":\"#3e00aeef\"},\"good\":{\"default\":\"#92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#f8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#c4314b\",\"subtle\":\"#e5c4314b\"}}},\"good\":{\"backgroundColor\":\"#ccffcc\",\"foregroundColors\":{\"default\":{\"default\":\"#1f1f1f\",\"subtle\":\"#b31f1f1f\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#3e000000\"},\"light\":{\"default\":\"#ffffff\",\"subtle\":\"#3fffffff\"},\"accent\":{\"default\":\"#0078d4\",\"subtle\":\"#3e00aeef\"},\"good\":{\"default\":\"#92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#f8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#c4314b\",\"subtle\":\"#e5c4314b\"}}},\"attention\":{\"backgroundColor\":\"#ffc5b2\",\"foregroundColors\":{\"default\":{\"default\":\"#1f1f1f\",\"subtle\":\"#b31f1f1f\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#3e000000\"},\"light\":{\"default\":\"#ffffff\",\"subtle\":\"#3fffffff\"},\"accent\":{\"default\":\"#0078d4\",\"subtle\":\"#3e00aeef\"},\"good\":{\"default\":\"#92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#f8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#c4314b\",\"subtle\":\"#e5c4314b\"}}},\"warning\":{\"backgroundColor\":\"#ffe2b2\",\"foregroundColors\":{\"default\":{\"default\":\"#1f1f1f\",\"subtle\":\"#b31f1f1f\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#3e000000\"},\"light\":{\"default\":\"#ffffff\",\"subtle\":\"#3fffffff\"},\"accent\":{\"default\":\"#0078d4\",\"subtle\":\"#3e00aeef\"},\"good\":{\"default\":\"#92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#f8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#c4314b\",\"subtle\":\"#e5c4314b\"}}}},\"actions\":{\"maxActions\":5,\"spacing\":\"Default\",\"buttonSpacing\":12,\"showCard\":{\"actionMode\":\"Inline\",\"inlineTopMargin\":16,\"style\":\"Emphasis\"},\"preExpandSingleShowCardAction\":false,\"actionsOrientation\":\"Horizontal\",\"actionAlignment\":\"Stretch\",\"iconSize\":20,\"iconPlacement\":\"leftOfTitle\"},\"imageSet\":{\"imageSize\":\"Medium\",\"maxImageHeight\":100},\"factSet\":{\"title\":{\"size\":\"Default\",\"color\":\"Default\",\"isSubtle\":false,\"weight\":\"Bolder\",\"warp\":true,\"maxWidth\":150},\"value\":{\"size\":\"Default\",\"color\":\"Default\",\"isSubtle\":false,\"weight\":\"Default\",\"warp\":true},\"spacing\":12}}");

/***/ }),

/***/ "./src/hostConfigs/cortana-skills-light.json":
/*!***************************************************!*\
  !*** ./src/hostConfigs/cortana-skills-light.json ***!
  \***************************************************/
/*! exports provided: spacing, separator, imageSizes, fontTypes, fontSizes, fontWeights, containerStyles, actions, imageSet, factSet, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"spacing\":{\"small\":4,\"default\":8,\"medium\":12,\"padding\":16,\"large\":20,\"extraLarge\":32},\"separator\":{\"lineThickness\":1,\"lineColor\":\"#E6E6E6\"},\"imageSizes\":{\"small\":32,\"medium\":48,\"large\":96},\"fontTypes\":{\"default\":{\"fontFamily\":\"Segoe UI, Tahoma, Geneva, Verdana, sans-serif\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":16,\"large\":18,\"extraLarge\":24},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}},\"monospace\":{\"fontFamily\":\"Courier New, Courier, monospace\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":16,\"large\":18,\"extraLarge\":24},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}}},\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":16,\"large\":18,\"extraLarge\":24},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600},\"containerStyles\":{\"default\":{\"foregroundColors\":{\"default\":{\"default\":\"#1f1f1f\",\"subtle\":\"#b31f1f1f\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#3e000000\"},\"light\":{\"default\":\"#ffffff\",\"subtle\":\"#3fffffff\"},\"accent\":{\"default\":\"#0078d4\",\"subtle\":\"#3e00aeef\"},\"good\":{\"default\":\"#92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#f8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#c4314b\",\"subtle\":\"#e5c4314b\"}},\"backgroundColor\":\"#ffffff\"},\"emphasis\":{\"foregroundColors\":{\"default\":{\"default\":\"#1f1f1f\",\"subtle\":\"#b31f1f1f\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#3e000000\"},\"light\":{\"default\":\"#ffffff\",\"subtle\":\"#3fffffff\"},\"accent\":{\"default\":\"#0078d4\",\"subtle\":\"#3e00aeef\"},\"good\":{\"default\":\"#92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#f8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#c4314b\",\"subtle\":\"#e5c4314b\"}},\"backgroundColor\":\"#D2D2D2\"},\"accent\":{\"backgroundColor\":\"#C7DEF9\",\"foregroundColors\":{\"default\":{\"default\":\"#1f1f1f\",\"subtle\":\"#b31f1f1f\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#3e000000\"},\"light\":{\"default\":\"#ffffff\",\"subtle\":\"#3fffffff\"},\"accent\":{\"default\":\"#0078d4\",\"subtle\":\"#3e00aeef\"},\"good\":{\"default\":\"#92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#f8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#c4314b\",\"subtle\":\"#e5c4314b\"}}},\"good\":{\"backgroundColor\":\"#CCFFCC\",\"foregroundColors\":{\"default\":{\"default\":\"#1f1f1f\",\"subtle\":\"#b31f1f1f\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#3e000000\"},\"light\":{\"default\":\"#ffffff\",\"subtle\":\"#3fffffff\"},\"accent\":{\"default\":\"#0078d4\",\"subtle\":\"#3e00aeef\"},\"good\":{\"default\":\"#92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#f8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#c4314b\",\"subtle\":\"#e5c4314b\"}}},\"attention\":{\"backgroundColor\":\"#FFC5B2\",\"foregroundColors\":{\"default\":{\"default\":\"#1f1f1f\",\"subtle\":\"#b31f1f1f\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#3e000000\"},\"light\":{\"default\":\"#ffffff\",\"subtle\":\"#3fffffff\"},\"accent\":{\"default\":\"#0078d4\",\"subtle\":\"#3e00aeef\"},\"good\":{\"default\":\"#92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#f8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#c4314b\",\"subtle\":\"#e5c4314b\"}}},\"warning\":{\"backgroundColor\":\"#FFE2B2\",\"foregroundColors\":{\"default\":{\"default\":\"#1f1f1f\",\"subtle\":\"#b31f1f1f\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#3e000000\"},\"light\":{\"default\":\"#ffffff\",\"subtle\":\"#3fffffff\"},\"accent\":{\"default\":\"#0078d4\",\"subtle\":\"#3e00aeef\"},\"good\":{\"default\":\"#92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#f8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#c4314b\",\"subtle\":\"#e5c4314b\"}}}},\"actions\":{\"maxActions\":5,\"spacing\":\"Default\",\"buttonSpacing\":12,\"showCard\":{\"actionMode\":\"Inline\",\"inlineTopMargin\":16,\"style\":\"Emphasis\"},\"preExpandSingleShowCardAction\":false,\"actionsOrientation\":\"Horizontal\",\"actionAlignment\":\"Stretch\",\"iconSize\":20,\"iconPlacement\":\"leftOfTitle\"},\"imageSet\":{\"imageSize\":\"Medium\",\"maxImageHeight\":100},\"factSet\":{\"title\":{\"size\":\"Default\",\"color\":\"Default\",\"isSubtle\":false,\"weight\":\"Bolder\",\"wrap\":true,\"maxWidth\":150},\"value\":{\"size\":\"Default\",\"color\":\"Default\",\"isSubtle\":false,\"weight\":\"Default\",\"warp\":true},\"spacing\":12}}");

/***/ }),

/***/ "./src/hostConfigs/microsoft-teams-dark.json":
/*!***************************************************!*\
  !*** ./src/hostConfigs/microsoft-teams-dark.json ***!
  \***************************************************/
/*! exports provided: choiceSetInputValueSeparator, supportsInteractivity, spacing, separator, fontTypes, imageSizes, containerStyles, actions, adaptiveCard, imageSet, factSet, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"choiceSetInputValueSeparator\":\",\",\"supportsInteractivity\":true,\"spacing\":{\"small\":8,\"default\":12,\"medium\":16,\"large\":20,\"extraLarge\":24,\"padding\":16},\"separator\":{\"lineThickness\":1,\"lineColor\":\"#EEEEEE\"},\"fontTypes\":{\"default\":{\"fontFamily\":\"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":14,\"large\":18,\"extraLarge\":24},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}},\"monospace\":{\"fontFamily\":\"'Courier New', Courier, monospace\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":14,\"large\":18,\"extraLarge\":24},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}}},\"imageSizes\":{\"small\":32,\"medium\":52,\"large\":100},\"containerStyles\":{\"default\":{\"foregroundColors\":{\"default\":{\"default\":\"#ffffffff\",\"subtle\":\"#bfffffff\"},\"dark\":{\"default\":\"#ff201f1f\",\"subtle\":\"#ff2d2c2c\"},\"light\":{\"default\":\"#ffffffff\",\"subtle\":\"#bfffffff\"},\"accent\":{\"default\":\"#ffa6a7dc\",\"subtle\":\"#ff8b8cc7\"},\"good\":{\"default\":\"#ff92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#fff8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#ffd74654\",\"subtle\":\"#e5d74654\"}},\"backgroundColor\":\"#ff2d2c2c\"},\"emphasis\":{\"foregroundColors\":{\"default\":{\"default\":\"#ffffffff\",\"subtle\":\"#bfffffff\"},\"dark\":{\"default\":\"#ff201f1f\",\"subtle\":\"#ff2d2c2c\"},\"light\":{\"default\":\"#ffffffff\",\"subtle\":\"#bfffffff\"},\"accent\":{\"default\":\"#ffa6a7dc\",\"subtle\":\"#ff8b8cc7\"},\"good\":{\"default\":\"#ff92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#fff8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#ffd74654\",\"subtle\":\"#e5d74654\"}},\"backgroundColor\":\"#ff292828\"},\"accent\":{\"backgroundColor\":\"#C7DEF9\",\"foregroundColors\":{\"default\":{\"default\":\"#ff201f1f\",\"subtle\":\"#ff2d2c2c\"},\"dark\":{\"default\":\"#ff201f1f\",\"subtle\":\"#ff2d2c2c\"},\"light\":{\"default\":\"#ffffffff\",\"subtle\":\"#bfffffff\"},\"accent\":{\"default\":\"#ffa6a7dc\",\"subtle\":\"#ff8b8cc7\"},\"good\":{\"default\":\"#ff92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#fff8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#ffd74654\",\"subtle\":\"#e5d74654\"}}},\"good\":{\"backgroundColor\":\"#CCFFCC\",\"foregroundColors\":{\"default\":{\"default\":\"#ff201f1f\",\"subtle\":\"#ff2d2c2c\"},\"dark\":{\"default\":\"#ff201f1f\",\"subtle\":\"#ff2d2c2c\"},\"light\":{\"default\":\"#ffffffff\",\"subtle\":\"#bfffffff\"},\"accent\":{\"default\":\"#ffa6a7dc\",\"subtle\":\"#ff8b8cc7\"},\"good\":{\"default\":\"#ff92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#fff8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#ffd74654\",\"subtle\":\"#e5d74654\"}}},\"attention\":{\"backgroundColor\":\"#FFC5B2\",\"foregroundColors\":{\"default\":{\"default\":\"#ff201f1f\",\"subtle\":\"#ff2d2c2c\"},\"dark\":{\"default\":\"#ff201f1f\",\"subtle\":\"#ff2d2c2c\"},\"light\":{\"default\":\"#ffffffff\",\"subtle\":\"#bfffffff\"},\"accent\":{\"default\":\"#ffa6a7dc\",\"subtle\":\"#ff8b8cc7\"},\"good\":{\"default\":\"#ff92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#fff8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#ffd74654\",\"subtle\":\"#e5d74654\"}}},\"warning\":{\"backgroundColor\":\"#FFE2B2\",\"foregroundColors\":{\"default\":{\"default\":\"#ff201f1f\",\"subtle\":\"#ff2d2c2c\"},\"dark\":{\"default\":\"#ff201f1f\",\"subtle\":\"#ff2d2c2c\"},\"light\":{\"default\":\"#ffffffff\",\"subtle\":\"#bfffffff\"},\"accent\":{\"default\":\"#ffa6a7dc\",\"subtle\":\"#ff8b8cc7\"},\"good\":{\"default\":\"#ff92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#fff8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#ffd74654\",\"subtle\":\"#e5d74654\"}}}},\"actions\":{\"maxActions\":6,\"spacing\":\"Default\",\"buttonSpacing\":8,\"showCard\":{\"actionMode\":\"Inline\",\"inlineTopMargin\":16,\"style\":\"emphasis\"},\"preExpandSingleShowCardAction\":false,\"actionsOrientation\":\"Horizontal\",\"actionAlignment\":\"Left\"},\"adaptiveCard\":{\"allowCustomStyle\":false},\"imageSet\":{\"imageSize\":\"Medium\",\"maxImageHeight\":100},\"factSet\":{\"title\":{\"size\":\"Default\",\"color\":\"Default\",\"isSubtle\":false,\"weight\":\"Bolder\",\"warp\":true},\"value\":{\"size\":\"Default\",\"color\":\"Default\",\"isSubtle\":false,\"weight\":\"Default\",\"warp\":true},\"spacing\":16}}");

/***/ }),

/***/ "./src/hostConfigs/microsoft-teams-light.json":
/*!****************************************************!*\
  !*** ./src/hostConfigs/microsoft-teams-light.json ***!
  \****************************************************/
/*! exports provided: choiceSetInputValueSeparator, supportsInteractivity, spacing, separator, imageSizes, fontTypes, containerStyles, actions, adaptiveCard, imageSet, factSet, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"choiceSetInputValueSeparator\":\",\",\"supportsInteractivity\":true,\"spacing\":{\"small\":8,\"default\":12,\"medium\":16,\"large\":20,\"extraLarge\":24,\"padding\":16},\"separator\":{\"lineThickness\":1,\"lineColor\":\"#EEEEEE\"},\"imageSizes\":{\"small\":32,\"medium\":52,\"large\":100},\"fontTypes\":{\"default\":{\"fontFamily\":\"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":14,\"large\":18,\"extraLarge\":24},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}},\"monospace\":{\"fontFamily\":\"'Courier New', Courier, monospace\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":14,\"large\":18,\"extraLarge\":24},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}}},\"containerStyles\":{\"default\":{\"foregroundColors\":{\"default\":{\"default\":\"#ff252424\",\"subtle\":\"#bf252424\"},\"dark\":{\"default\":\"#252424\",\"subtle\":\"#bf252424\"},\"light\":{\"default\":\"#ffffff\",\"subtle\":\"#fff3f2f1\"},\"accent\":{\"default\":\"#6264a7\",\"subtle\":\"#8b8cc7\"},\"good\":{\"default\":\"#92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#f8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#c4314b\",\"subtle\":\"#e5c4314b\"}},\"backgroundColor\":\"#ffffff\"},\"emphasis\":{\"foregroundColors\":{\"default\":{\"default\":\"#ff252424\",\"subtle\":\"#bf252424\"},\"dark\":{\"default\":\"#252424\",\"subtle\":\"#bf252424\"},\"light\":{\"default\":\"#ffffff\",\"subtle\":\"#fff3f2f1\"},\"accent\":{\"default\":\"#6264a7\",\"subtle\":\"#8b8cc7\"},\"good\":{\"default\":\"#92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#f8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#c4314b\",\"subtle\":\"#e5c4314b\"}},\"backgroundColor\":\"#fff9f8f7\"},\"accent\":{\"backgroundColor\":\"#C7DEF9\",\"foregroundColors\":{\"default\":{\"default\":\"#ff252424\",\"subtle\":\"#bf252424\"},\"dark\":{\"default\":\"#252424\",\"subtle\":\"#bf252424\"},\"light\":{\"default\":\"#ffffff\",\"subtle\":\"#fff3f2f1\"},\"accent\":{\"default\":\"#6264a7\",\"subtle\":\"#8b8cc7\"},\"good\":{\"default\":\"#92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#f8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#c4314b\",\"subtle\":\"#e5c4314b\"}}},\"good\":{\"backgroundColor\":\"#CCFFCC\",\"foregroundColors\":{\"default\":{\"default\":\"#ff252424\",\"subtle\":\"#bf252424\"},\"dark\":{\"default\":\"#252424\",\"subtle\":\"#bf252424\"},\"light\":{\"default\":\"#ffffff\",\"subtle\":\"#fff3f2f1\"},\"accent\":{\"default\":\"#6264a7\",\"subtle\":\"#8b8cc7\"},\"good\":{\"default\":\"#92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#f8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#c4314b\",\"subtle\":\"#e5c4314b\"}}},\"attention\":{\"backgroundColor\":\"#FFC5B2\",\"foregroundColors\":{\"default\":{\"default\":\"#ff252424\",\"subtle\":\"#bf252424\"},\"dark\":{\"default\":\"#252424\",\"subtle\":\"#bf252424\"},\"light\":{\"default\":\"#ffffff\",\"subtle\":\"#fff3f2f1\"},\"accent\":{\"default\":\"#6264a7\",\"subtle\":\"#8b8cc7\"},\"good\":{\"default\":\"#92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#f8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#c4314b\",\"subtle\":\"#e5c4314b\"}}},\"warning\":{\"backgroundColor\":\"#FFE2B2\",\"foregroundColors\":{\"default\":{\"default\":\"#ff252424\",\"subtle\":\"#bf252424\"},\"dark\":{\"default\":\"#252424\",\"subtle\":\"#bf252424\"},\"light\":{\"default\":\"#ffffff\",\"subtle\":\"#fff3f2f1\"},\"accent\":{\"default\":\"#6264a7\",\"subtle\":\"#8b8cc7\"},\"good\":{\"default\":\"#92c353\",\"subtle\":\"#e592c353\"},\"warning\":{\"default\":\"#f8d22a\",\"subtle\":\"#e5f8d22a\"},\"attention\":{\"default\":\"#c4314b\",\"subtle\":\"#e5c4314b\"}}}},\"actions\":{\"maxActions\":6,\"spacing\":\"Default\",\"buttonSpacing\":8,\"showCard\":{\"actionMode\":\"Inline\",\"inlineTopMargin\":16,\"style\":\"emphasis\"},\"preExpandSingleShowCardAction\":false,\"actionsOrientation\":\"Horizontal\",\"actionAlignment\":\"Left\"},\"adaptiveCard\":{\"allowCustomStyle\":false},\"imageSet\":{\"imageSize\":\"Medium\",\"maxImageHeight\":100},\"factSet\":{\"title\":{\"size\":\"Default\",\"color\":\"Default\",\"isSubtle\":false,\"weight\":\"Bolder\",\"warp\":true},\"value\":{\"size\":\"Default\",\"color\":\"Default\",\"isSubtle\":false,\"weight\":\"Default\",\"warp\":true},\"spacing\":16}}");

/***/ }),

/***/ "./src/hostConfigs/outlook-desktop.json":
/*!**********************************************!*\
  !*** ./src/hostConfigs/outlook-desktop.json ***!
  \**********************************************/
/*! exports provided: preExpandSingleShowCardAction, supportsInteractivity, spacing, separator, imageSizes, fontTypes, containerStyles, actions, adaptiveCard, imageSet, factSet, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"preExpandSingleShowCardAction\":true,\"supportsInteractivity\":true,\"spacing\":{\"small\":10,\"default\":20,\"medium\":30,\"large\":40,\"extraLarge\":50,\"padding\":20},\"separator\":{\"lineThickness\":1,\"lineColor\":\"#EEEEEE\"},\"imageSizes\":{\"small\":40,\"medium\":80,\"large\":160},\"fontTypes\":{\"default\":{\"fontFamily\":\"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":17,\"large\":21,\"extraLarge\":26},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}},\"monospace\":{\"fontFamily\":\"'Courier New', Courier, monospace\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":17,\"large\":21,\"extraLarge\":26},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}}},\"containerStyles\":{\"default\":{\"backgroundColor\":\"#FFFFFF\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"emphasis\":{\"backgroundColor\":\"#08000000\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"accent\":{\"backgroundColor\":\"#C7DEF9\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"good\":{\"backgroundColor\":\"#CCFFCC\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"attention\":{\"backgroundColor\":\"#FFC5B2\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"warning\":{\"backgroundColor\":\"#FFE2B2\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}}},\"actions\":{\"maxActions\":5,\"spacing\":\"default\",\"buttonSpacing\":10,\"showCard\":{\"actionMode\":\"inline\",\"inlineTopMargin\":16},\"actionsOrientation\":\"horizontal\",\"actionAlignment\":\"left\"},\"adaptiveCard\":{\"allowCustomStyle\":true},\"imageSet\":{\"imageSize\":\"medium\",\"maxImageHeight\":100},\"factSet\":{\"title\":{\"color\":\"default\",\"size\":\"default\",\"isSubtle\":false,\"weight\":\"bolder\",\"wrap\":true,\"maxWidth\":150},\"value\":{\"color\":\"default\",\"size\":\"default\",\"isSubtle\":false,\"weight\":\"default\",\"wrap\":true},\"spacing\":10}}");

/***/ }),

/***/ "./src/hostConfigs/render-to-image.json":
/*!**********************************************!*\
  !*** ./src/hostConfigs/render-to-image.json ***!
  \**********************************************/
/*! exports provided: spacing, separator, supportsInteractivity, fontTypes, containerStyles, imageSizes, imageSet, factSet, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"spacing\":{\"small\":3,\"default\":8,\"medium\":20,\"large\":30,\"extraLarge\":40,\"padding\":10},\"separator\":{\"lineThickness\":1,\"lineColor\":\"#EEEEEE\"},\"supportsInteractivity\":false,\"fontTypes\":{\"default\":{\"fontFamily\":\"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":17,\"large\":21,\"extraLarge\":26},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}},\"monospace\":{\"fontFamily\":\"'Courier New', Courier, monospace\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":17,\"large\":21,\"extraLarge\":26},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}}},\"containerStyles\":{\"default\":{\"backgroundColor\":\"#FFFFFF\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#FF0000\",\"subtle\":\"#DDFF0000\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#c3ab23\",\"subtle\":\"#DDc3ab23\"}}},\"emphasis\":{\"backgroundColor\":\"#08000000\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#FF0000\",\"subtle\":\"#DDFF0000\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#c3ab23\",\"subtle\":\"#DDc3ab23\"}}},\"accent\":{\"backgroundColor\":\"#C7DEF9\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"good\":{\"backgroundColor\":\"#CCFFCC\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"attention\":{\"backgroundColor\":\"#FFC5B2\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"warning\":{\"backgroundColor\":\"#FFE2B2\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}}},\"imageSizes\":{\"small\":40,\"medium\":80,\"large\":160},\"imageSet\":{\"imageSize\":\"medium\",\"maxImageHeight\":100},\"factSet\":{\"title\":{\"color\":\"default\",\"size\":\"default\",\"isSubtle\":false,\"weight\":\"bolder\",\"wrap\":true,\"maxWidth\":150},\"value\":{\"color\":\"default\",\"size\":\"default\",\"isSubtle\":false,\"weight\":\"default\",\"wrap\":true},\"spacing\":10}}");

/***/ }),

/***/ "./src/hostConfigs/sample.json":
/*!*************************************!*\
  !*** ./src/hostConfigs/sample.json ***!
  \*************************************/
/*! exports provided: spacing, separator, supportsInteractivity, fontTypes, containerStyles, imageSizes, actions, adaptiveCard, imageSet, factSet, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"spacing\":{\"small\":3,\"default\":8,\"medium\":20,\"large\":30,\"extraLarge\":40,\"padding\":10},\"separator\":{\"lineThickness\":1,\"lineColor\":\"#EEEEEE\"},\"supportsInteractivity\":true,\"fontTypes\":{\"default\":{\"fontFamily\":\"'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":17,\"large\":21,\"extraLarge\":26},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}},\"monospace\":{\"fontFamily\":\"'Courier New', Courier, monospace\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":17,\"large\":21,\"extraLarge\":26},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}}},\"containerStyles\":{\"default\":{\"backgroundColor\":\"#FFFFFF\",\"foregroundColors\":{\"default\":{\"default\":\"#000000\",\"subtle\":\"#767676\"},\"accent\":{\"default\":\"#0063B1\",\"subtle\":\"#0063B1\"},\"attention\":{\"default\":\"#FF0000\",\"subtle\":\"#DDFF0000\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#c3ab23\",\"subtle\":\"#DDc3ab23\"}}},\"emphasis\":{\"backgroundColor\":\"#F0F0F0\",\"foregroundColors\":{\"default\":{\"default\":\"#000000\",\"subtle\":\"#767676\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#FF0000\",\"subtle\":\"#DDFF0000\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#c3ab23\",\"subtle\":\"#DDc3ab23\"}}},\"accent\":{\"backgroundColor\":\"#C7DEF9\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"good\":{\"backgroundColor\":\"#CCFFCC\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"attention\":{\"backgroundColor\":\"#FFC5B2\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"warning\":{\"backgroundColor\":\"#FFE2B2\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}}},\"imageSizes\":{\"small\":40,\"medium\":80,\"large\":160},\"actions\":{\"maxActions\":5,\"spacing\":\"default\",\"buttonSpacing\":8,\"showCard\":{\"actionMode\":\"inline\",\"inlineTopMargin\":8},\"actionsOrientation\":\"horizontal\",\"actionAlignment\":\"stretch\"},\"adaptiveCard\":{\"allowCustomStyle\":false},\"imageSet\":{\"imageSize\":\"medium\",\"maxImageHeight\":100},\"factSet\":{\"title\":{\"color\":\"default\",\"size\":\"default\",\"isSubtle\":false,\"weight\":\"bolder\",\"wrap\":true,\"maxWidth\":150},\"value\":{\"color\":\"default\",\"size\":\"default\",\"isSubtle\":false,\"weight\":\"default\",\"wrap\":true},\"spacing\":8}}");

/***/ }),

/***/ "./src/hostConfigs/skype.json":
/*!************************************!*\
  !*** ./src/hostConfigs/skype.json ***!
  \************************************/
/*! exports provided: spacing, separator, supportsInteractivity, fontTypes, containerStyles, imageSizes, actions, adaptiveCard, imageSet, factSet, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"spacing\":{\"small\":3,\"default\":8,\"medium\":20,\"large\":30,\"extraLarge\":40,\"padding\":10},\"separator\":{\"lineThickness\":1,\"lineColor\":\"#EEEEEE\"},\"supportsInteractivity\":true,\"fontTypes\":{\"default\":{\"fontFamily\":\"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":17,\"large\":21,\"extraLarge\":26},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}},\"monospace\":{\"fontFamily\":\"'Courier New', Courier, monospace\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":17,\"large\":21,\"extraLarge\":26},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}}},\"containerStyles\":{\"default\":{\"backgroundColor\":\"#EAEAEA\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#FF0000\",\"subtle\":\"#DDFF0000\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#c3ab23\",\"subtle\":\"#DDc3ab23\"}}},\"emphasis\":{\"backgroundColor\":\"#08000000\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#FF0000\",\"subtle\":\"#DDFF0000\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#c3ab23\",\"subtle\":\"#DDc3ab23\"}}},\"accent\":{\"backgroundColor\":\"#C7DEF9\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"good\":{\"backgroundColor\":\"#CCFFCC\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"attention\":{\"backgroundColor\":\"#FFC5B2\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"warning\":{\"backgroundColor\":\"#FFE2B2\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}}},\"imageSizes\":{\"small\":40,\"medium\":80,\"large\":160},\"actions\":{\"maxActions\":5,\"spacing\":\"default\",\"buttonSpacing\":10,\"showCard\":{\"actionMode\":\"popup\",\"inlineTopMargin\":16},\"actionsOrientation\":\"vertical\",\"actionAlignment\":\"stretch\"},\"adaptiveCard\":{\"allowCustomStyle\":false},\"imageSet\":{\"imageSize\":\"medium\",\"maxImageHeight\":100},\"factSet\":{\"title\":{\"color\":\"default\",\"size\":\"default\",\"isSubtle\":false,\"weight\":\"bolder\",\"wrap\":true,\"maxWidth\":150},\"value\":{\"color\":\"default\",\"size\":\"default\",\"isSubtle\":false,\"weight\":\"default\",\"wrap\":true},\"spacing\":5}}");

/***/ }),

/***/ "./src/hostConfigs/webchat.json":
/*!**************************************!*\
  !*** ./src/hostConfigs/webchat.json ***!
  \**************************************/
/*! exports provided: spacing, separator, supportsInteractivity, fontTypes, containerStyles, imageSizes, actions, adaptiveCard, imageSet, factSet, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"spacing\":{\"small\":3,\"default\":8,\"medium\":20,\"large\":30,\"extraLarge\":40,\"padding\":10},\"separator\":{\"lineThickness\":1,\"lineColor\":\"#EEEEEE\"},\"supportsInteractivity\":true,\"fontTypes\":{\"default\":{\"fontFamily\":\"Calibri, sans-serif\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":17,\"large\":21,\"extraLarge\":26},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}},\"monospace\":{\"fontFamily\":\"'Courier New', Courier, monospace\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":17,\"large\":21,\"extraLarge\":26},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}}},\"containerStyles\":{\"default\":{\"backgroundColor\":\"#FFFFFF\",\"foregroundColors\":{\"default\":{\"default\":\"#000000\",\"subtle\":\"#767676\"},\"accent\":{\"default\":\"#0063B1\",\"subtle\":\"#0063B1\"},\"attention\":{\"default\":\"#FF0000\",\"subtle\":\"#DDFF0000\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#c3ab23\",\"subtle\":\"#DDc3ab23\"}}},\"emphasis\":{\"backgroundColor\":\"#F0F0F0\",\"foregroundColors\":{\"default\":{\"default\":\"#000000\",\"subtle\":\"#767676\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#FF0000\",\"subtle\":\"#DDFF0000\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#c3ab23\",\"subtle\":\"#DDc3ab23\"}}},\"accent\":{\"backgroundColor\":\"#C7DEF9\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"good\":{\"backgroundColor\":\"#CCFFCC\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"attention\":{\"backgroundColor\":\"#FFC5B2\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"warning\":{\"backgroundColor\":\"#FFE2B2\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}}},\"imageSizes\":{\"small\":40,\"medium\":80,\"large\":160},\"actions\":{\"maxActions\":100,\"spacing\":\"default\",\"buttonSpacing\":8,\"showCard\":{\"actionMode\":\"inline\",\"inlineTopMargin\":8},\"actionsOrientation\":\"vertical\",\"actionAlignment\":\"stretch\"},\"adaptiveCard\":{\"allowCustomStyle\":false},\"imageSet\":{\"imageSize\":\"medium\",\"maxImageHeight\":100},\"factSet\":{\"title\":{\"color\":\"default\",\"size\":\"default\",\"isSubtle\":false,\"weight\":\"bolder\",\"wrap\":true,\"maxWidth\":150},\"value\":{\"color\":\"default\",\"size\":\"default\",\"isSubtle\":false,\"weight\":\"default\",\"wrap\":true},\"spacing\":8}}");

/***/ }),

/***/ "./src/hostConfigs/windows-notification.json":
/*!***************************************************!*\
  !*** ./src/hostConfigs/windows-notification.json ***!
  \***************************************************/
/*! exports provided: spacing, separator, supportsInteractivity, fontTypes, containerStyles, imageSizes, actions, adaptiveCard, imageSet, factSet, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"spacing\":{\"small\":3,\"default\":8,\"medium\":20,\"large\":30,\"extraLarge\":40,\"padding\":10},\"separator\":{\"lineThickness\":1,\"lineColor\":\"#EEEEEE\"},\"supportsInteractivity\":true,\"fontTypes\":{\"default\":{\"fontFamily\":\"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":17,\"large\":21,\"extraLarge\":26},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}},\"monospace\":{\"fontFamily\":\"'Courier New', Courier, monospace\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":17,\"large\":21,\"extraLarge\":26},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":600}}},\"containerStyles\":{\"default\":{\"backgroundColor\":\"#1F1F1F\",\"foregroundColors\":{\"default\":{\"default\":\"#FFFFFF\",\"subtle\":\"#88FFFFFF\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#FF0000\",\"subtle\":\"#DDFF0000\"},\"good\":{\"default\":\"#00FF00\",\"subtle\":\"#DD00FF00\"},\"warning\":{\"default\":\"#FFD800\",\"subtle\":\"#DDFFD800\"}}},\"emphasis\":{\"backgroundColor\":\"#19FFFFFF\",\"foregroundColors\":{\"default\":{\"default\":\"#FFFFFF\",\"subtle\":\"#88FFFFFF\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#FFD800\",\"subtle\":\"#DDFFD800\"},\"good\":{\"default\":\"#00FF00\",\"subtle\":\"#DD00FF00\"},\"warning\":{\"default\":\"#FF0000\",\"subtle\":\"#DDFF0000\"}}},\"accent\":{\"backgroundColor\":\"#C7DEF9\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"good\":{\"backgroundColor\":\"#CCFFCC\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"attention\":{\"backgroundColor\":\"#FFC5B2\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}},\"warning\":{\"backgroundColor\":\"#FFE2B2\",\"foregroundColors\":{\"default\":{\"default\":\"#333333\",\"subtle\":\"#EE333333\"},\"dark\":{\"default\":\"#000000\",\"subtle\":\"#66000000\"},\"light\":{\"default\":\"#FFFFFF\",\"subtle\":\"#33000000\"},\"accent\":{\"default\":\"#2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#cc3300\",\"subtle\":\"#DDcc3300\"},\"good\":{\"default\":\"#54a254\",\"subtle\":\"#DD54a254\"},\"warning\":{\"default\":\"#e69500\",\"subtle\":\"#DDe69500\"}}}},\"imageSizes\":{\"small\":40,\"medium\":80,\"large\":160},\"actions\":{\"maxActions\":5,\"spacing\":\"default\",\"buttonSpacing\":10,\"showCard\":{\"actionMode\":\"inline\",\"inlineTopMargin\":16},\"actionsOrientation\":\"horizontal\",\"actionAlignment\":\"stretch\"},\"adaptiveCard\":{\"allowCustomStyle\":false},\"imageSet\":{\"imageSize\":\"medium\",\"maxImageHeight\":100},\"factSet\":{\"title\":{\"color\":\"default\",\"size\":\"default\",\"isSubtle\":false,\"weight\":\"bolder\",\"wrap\":true,\"maxWidth\":150},\"value\":{\"color\":\"default\",\"size\":\"default\",\"isSubtle\":false,\"weight\":\"default\",\"wrap\":true},\"spacing\":10}}");

/***/ }),

/***/ "./src/hostConfigs/windows-timeline.json":
/*!***********************************************!*\
  !*** ./src/hostConfigs/windows-timeline.json ***!
  \***********************************************/
/*! exports provided: spacing, separator, supportsInteractivity, fontTypes, containerStyles, imageSizes, imageSet, factSet, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"spacing\":{\"small\":4,\"default\":12,\"medium\":20,\"large\":30,\"extraLarge\":40,\"padding\":15},\"separator\":{\"lineThickness\":1,\"lineColor\":\"#EEEEEE\"},\"supportsInteractivity\":false,\"fontTypes\":{\"default\":{\"fontFamily\":\"Segoe UI, Helvetica Neue, Helvetica, sans-serif\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":20,\"large\":20,\"extraLarge\":26},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":700}},\"monospace\":{\"fontFamily\":\"Segoe UI Mono\",\"fontSizes\":{\"small\":12,\"default\":14,\"medium\":20,\"large\":20,\"extraLarge\":26},\"fontWeights\":{\"lighter\":200,\"default\":400,\"bolder\":700}}},\"containerStyles\":{\"default\":{\"backgroundColor\":\"#FF535454\",\"foregroundColors\":{\"default\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#FF9C9E9F\"},\"accent\":{\"default\":\"#FF2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#FFFF0000\",\"subtle\":\"#DDFF0000\"},\"good\":{\"default\":\"#FF00FF00\",\"subtle\":\"#DD00FF00\"},\"warning\":{\"default\":\"#FFFFD800\",\"subtle\":\"#DDFFD800\"}}},\"emphasis\":{\"backgroundColor\":\"#33000000\",\"foregroundColors\":{\"default\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#FF9C9E9F\"},\"accent\":{\"default\":\"#FF2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#FFFF0000\",\"subtle\":\"#DDFF0000\"},\"good\":{\"default\":\"#FF00FF00\",\"subtle\":\"#DD00FF00\"},\"warning\":{\"default\":\"#FFFFD800\",\"subtle\":\"#DDFFD800\"}}},\"accent\":{\"backgroundColor\":\"#882E89FC\",\"foregroundColors\":{\"default\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#FF9C9E9F\"},\"accent\":{\"default\":\"#FF2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#FFFF0000\",\"subtle\":\"#DDFF0000\"},\"good\":{\"default\":\"#FF00FF00\",\"subtle\":\"#DD00FF00\"},\"warning\":{\"default\":\"#FFFFD800\",\"subtle\":\"#DDFFD800\"}}},\"attention\":{\"backgroundColor\":\"#DDFF0000\",\"foregroundColors\":{\"default\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#FF9C9E9F\"},\"accent\":{\"default\":\"#FF2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#FFFF0000\",\"subtle\":\"#DDFF0000\"},\"good\":{\"default\":\"#FF00FF00\",\"subtle\":\"#DD00FF00\"},\"warning\":{\"default\":\"#FFFFD800\",\"subtle\":\"#DDFFD800\"}}},\"good\":{\"backgroundColor\":\"#DD00FF00\",\"foregroundColors\":{\"default\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#FF9C9E9F\"},\"accent\":{\"default\":\"#FF2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#FFFF0000\",\"subtle\":\"#DDFF0000\"},\"good\":{\"default\":\"#FF00FF00\",\"subtle\":\"#DD00FF00\"},\"warning\":{\"default\":\"#FFFFD800\",\"subtle\":\"#DDFFD800\"}}},\"warning\":{\"backgroundColor\":\"#DDFFD800\",\"foregroundColors\":{\"default\":{\"default\":\"#FFFFFFFF\",\"subtle\":\"#FF9C9E9F\"},\"accent\":{\"default\":\"#FF2E89FC\",\"subtle\":\"#882E89FC\"},\"attention\":{\"default\":\"#FFFF0000\",\"subtle\":\"#DDFF0000\"},\"good\":{\"default\":\"#FF00FF00\",\"subtle\":\"#DD00FF00\"},\"warning\":{\"default\":\"#FFFFD800\",\"subtle\":\"#DDFFD800\"}}}},\"imageSizes\":{\"small\":40,\"medium\":80,\"large\":120},\"imageSet\":{\"imageSize\":\"medium\",\"maxImageHeight\":100},\"factSet\":{\"title\":{\"color\":\"default\",\"size\":\"default\",\"isSubtle\":false,\"weight\":\"bolder\",\"wrap\":false,\"maxWidth\":150},\"value\":{\"color\":\"default\",\"size\":\"default\",\"isSubtle\":false,\"weight\":\"default\",\"wrap\":true},\"spacing\":10}}");

/***/ }),

/***/ "./src/miscellaneous.ts":
/*!******************************!*\
  !*** ./src/miscellaneous.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var Rect = /** @class */ (function () {
    function Rect(top, right, bottom, left) {
        if (top === void 0) { top = 0; }
        if (right === void 0) { right = 0; }
        if (bottom === void 0) { bottom = 0; }
        if (left === void 0) { left = 0; }
        this.top = top;
        this.right = right;
        this.bottom = bottom;
        this.left = left;
    }
    Rect.prototype.union = function (otherRect) {
        this.top = Math.min(this.top, otherRect.top);
        this.left = Math.min(this.left, otherRect.left);
        this.bottom = Math.max(this.bottom, otherRect.bottom);
        this.right = Math.max(this.right, otherRect.right);
    };
    Rect.prototype.isInside = function (point) {
        return point.x >= this.left && point.x <= this.right && point.y >= this.top && point.y <= this.bottom;
    };
    Object.defineProperty(Rect.prototype, "width", {
        get: function () {
            return this.right - this.left;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Rect.prototype, "height", {
        get: function () {
            return this.bottom - this.top;
        },
        enumerable: true,
        configurable: true
    });
    return Rect;
}());
exports.Rect = Rect;
var Utils = /** @class */ (function () {
    function Utils() {
    }
    Utils.isAbsoluteUrl = function (urlString) {
        return urlString.indexOf('http://') === 0
            || urlString.indexOf('https://') === 0;
    };
    Utils.joinPaths = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        return args.map(function (part, i) {
            if (!part) {
                part = "";
            }
            if (i === 0) {
                return part.trim().replace(/[\/]*$/g, '');
            }
            else {
                return part.trim().replace(/(^[\/]*|[\/]*$)/g, '');
            }
        }).filter(function (x) { return x.length; }).join('/');
    };
    return Utils;
}());
exports.Utils = Utils;
exports.defaultHostConfig = new Adaptive.HostConfig({
    preExpandSingleShowCardAction: true,
    supportsInteractivity: true,
    spacing: {
        small: 10,
        default: 20,
        medium: 30,
        large: 40,
        extraLarge: 50,
        padding: 20
    },
    separator: {
        lineThickness: 1,
        lineColor: "#EEEEEE"
    },
    textAlign: {
        right: "right"
    },
    imageSizes: {
        small: 40,
        medium: 80,
        large: 160
    },
    fontStyles: {
        default: {
            fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
            fontSizes: {
                small: 12,
                default: 14,
                medium: 17,
                large: 21,
                extraLarge: 26
            },
            fontWeights: {
                lighter: 200,
                default: 400,
                bolder: 600
            }
        },
        monospace: {
            fontFamily: "'Courier New', Courier, monospace",
            fontSizes: {
                small: 12,
                default: 14,
                medium: 17,
                large: 21,
                extraLarge: 26
            },
            fontWeights: {
                lighter: 200,
                default: 400,
                bolder: 600
            }
        }
    },
    containerStyles: {
        default: {
            backgroundColor: "#f9f9f9",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#54a254",
                    subtle: "#DD54a254"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        emphasis: {
            backgroundColor: "#08000000",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#54a254",
                    subtle: "#DD54a254"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        accent: {
            backgroundColor: "#C7DEF9",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#54a254",
                    subtle: "#DD54a254"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        good: {
            backgroundColor: "#CCFFCC",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#54a254",
                    subtle: "#DD54a254"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        attention: {
            backgroundColor: "#FFC5B2",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#54a254",
                    subtle: "#DD54a254"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        },
        warning: {
            backgroundColor: "#FFE2B2",
            foregroundColors: {
                default: {
                    default: "#333333",
                    subtle: "#EE333333"
                },
                dark: {
                    default: "#000000",
                    subtle: "#66000000"
                },
                light: {
                    default: "#FFFFFF",
                    subtle: "#33000000"
                },
                accent: {
                    default: "#2E89FC",
                    subtle: "#882E89FC"
                },
                attention: {
                    default: "#cc3300",
                    subtle: "#DDcc3300"
                },
                good: {
                    default: "#54a254",
                    subtle: "#DD54a254"
                },
                warning: {
                    default: "#e69500",
                    subtle: "#DDe69500"
                }
            }
        }
    },
    actions: {
        maxActions: 5,
        spacing: Adaptive.Spacing.Default,
        buttonSpacing: 10,
        showCard: {
            actionMode: Adaptive.ShowCardActionMode.Inline,
            inlineTopMargin: 16
        },
        actionsOrientation: Adaptive.Orientation.Horizontal,
        actionAlignment: Adaptive.ActionAlignment.Left
    },
    adaptiveCard: {
        allowCustomStyle: true
    },
    imageSet: {
        imageSize: Adaptive.Size.Medium,
        maxImageHeight: 100
    },
    factSet: {
        title: {
            color: Adaptive.TextColor.Default,
            size: Adaptive.TextSize.Default,
            isSubtle: false,
            weight: Adaptive.TextWeight.Bolder,
            wrap: true,
            maxWidth: 150,
        },
        value: {
            color: Adaptive.TextColor.Default,
            size: Adaptive.TextSize.Default,
            isSubtle: false,
            weight: Adaptive.TextWeight.Default,
            wrap: true,
        },
        spacing: 10
    }
});
exports.defaultHostConfig.cssClassNamePrefix = "default";


/***/ }),

/***/ "./src/peer-command.ts":
/*!*****************************!*\
  !*** ./src/peer-command.ts ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var PeerCommand = /** @class */ (function () {
    function PeerCommand(init) {
        this.isPromotable = false;
        Object.assign(this, init);
    }
    PeerCommand.prototype.internalRender = function () {
        var _this = this;
        var buttonElement = document.createElement("button");
        buttonElement.type = "button";
        buttonElement.title = this.name;
        buttonElement.classList.add("acd-peerButton");
        buttonElement.classList.add(this.iconClass);
        buttonElement.style.display = "flex";
        buttonElement.style.flex = "0 0 auto";
        buttonElement.style.alignItems = "center";
        buttonElement.onclick = function (e) {
            if (_this.execute) {
                _this.execute(_this, buttonElement);
            }
        };
        buttonElement.onpointerdown = function (e) { e.cancelBubble = true; };
        return buttonElement;
    };
    PeerCommand.prototype.render = function () {
        this._renderedElement = this.internalRender();
        return this._renderedElement;
    };
    Object.defineProperty(PeerCommand.prototype, "renderedElement", {
        get: function () {
            return this._renderedElement;
        },
        enumerable: true,
        configurable: true
    });
    return PeerCommand;
}());
exports.PeerCommand = PeerCommand;


/***/ }),

/***/ "./src/sample-picker-dialog.ts":
/*!*************************************!*\
  !*** ./src/sample-picker-dialog.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var catalogue_1 = __webpack_require__(/*! ./catalogue */ "./src/catalogue.ts");
var ACData = __webpack_require__(/*! adaptivecards-templating */ "../adaptivecards-templating/lib/adaptivecards-templating.js");
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var dialog_1 = __webpack_require__(/*! ./dialog */ "./src/dialog.ts");
var miscellaneous_1 = __webpack_require__(/*! ./miscellaneous */ "./src/miscellaneous.ts");
var downloader_1 = __webpack_require__(/*! ./downloader */ "./src/downloader.ts");
var SamplePickerDialog = /** @class */ (function (_super) {
    __extends(SamplePickerDialog, _super);
    function SamplePickerDialog() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SamplePickerDialog.prototype.renderMessage = function (message) {
        var _this = this;
        var templatePayload = {
            type: "AdaptiveCard",
            version: "1.0",
            body: [
                {
                    type: "TextBlock",
                    text: "**{title}**",
                    size: "large"
                },
                {
                    type: "Container",
                    verticalContentAlignment: "center",
                    height: "stretch",
                    items: [
                        {
                            type: "TextBlock",
                            text: "{message}",
                            horizontalAlignment: "center",
                            wrap: true
                        }
                    ]
                },
                {
                    type: "ActionSet",
                    horizontalAlignment: "right",
                    actions: [
                        {
                            type: "Action.Submit",
                            id: "cancel",
                            title: "Cancel"
                        }
                    ]
                }
            ]
        };
        var template = new ACData.Template(templatePayload);
        var context = new ACData.EvaluationContext();
        context.$root = {
            title: this.title,
            message: message
        };
        var expandedCardPayload = template.expand(context);
        var card = new Adaptive.AdaptiveCard();
        card.hostConfig = miscellaneous_1.defaultHostConfig;
        card.onExecuteAction = function (action) {
            if (action.id == "cancel") {
                _this.close();
            }
        };
        card.parse(expandedCardPayload);
        var renderedCard = card.render();
        renderedCard.style.height = "100%";
        this._renderedElement.innerHTML = "";
        this._renderedElement.appendChild(renderedCard);
    };
    SamplePickerDialog.prototype.renderCatalogue = function (catalogue) {
        var _this = this;
        var templatePayload = {
            type: "AdaptiveCard",
            version: "1.0",
            body: [
                {
                    type: "TextBlock",
                    text: "**{title}**",
                    size: "large"
                },
                {
                    type: "Container",
                    height: "stretch",
                    allowVerticalOverflow: true,
                    items: [
                        {
                            type: "Container",
                            $data: "{catalogue}",
                            minHeight: "36px",
                            verticalContentAlignment: "center",
                            selectAction: {
                                type: "Action.Submit",
                                data: {
                                    catalogueIndex: "{$index}"
                                }
                            },
                            spacing: "none",
                            items: [
                                {
                                    type: "TextBlock",
                                    text: "{displayName}",
                                    size: "medium"
                                }
                            ]
                        }
                    ]
                },
                {
                    type: "ActionSet",
                    horizontalAlignment: "right",
                    actions: [
                        {
                            type: "Action.Submit",
                            id: "cancel",
                            title: "Cancel"
                        }
                    ]
                }
            ]
        };
        var template = new ACData.Template(templatePayload);
        var context = new ACData.EvaluationContext();
        context.$root = {
            title: this.title,
            catalogue: catalogue
        };
        var expandedCardPayload = template.expand(context);
        var card = new Adaptive.AdaptiveCard();
        card.hostConfig = miscellaneous_1.defaultHostConfig;
        card.onExecuteAction = function (action) {
            if (action.id == "cancel") {
                _this.close();
            }
            else if (action instanceof Adaptive.SubmitAction) {
                _this._selectedSample = catalogue[action.data["catalogueIndex"]];
                _this.close();
            }
        };
        card.onParseElement = function (element, json, errors) {
            if (element instanceof Adaptive.CardElementContainer) {
                element.allowVerticalOverflow = Adaptive.getBoolValue(json["allowVerticalOverflow"], false);
            }
        };
        card.parse(expandedCardPayload);
        var renderedCard = card.render();
        renderedCard.style.height = "100%";
        this._renderedElement.innerHTML = "";
        this._renderedElement.appendChild(renderedCard);
    };
    SamplePickerDialog.prototype.renderContent = function () {
        var _this = this;
        this._renderedElement = document.createElement("div");
        this._renderedElement.style.overflow = "auto";
        this.renderMessage("Loading sample catalogue...");
        var downloader = new downloader_1.Downloader(this.catalogueUrl);
        downloader.onError = function () { _this.renderMessage("The catalogue couldn't be loaded. Please try again later."); };
        downloader.onSuccess = function () {
            if (!Adaptive.isNullOrEmpty(downloader.data)) {
                try {
                    var catalogue = catalogue_1.parseCatalogue(JSON.parse(downloader.data));
                    _this.renderCatalogue(catalogue);
                }
                catch (e) {
                    _this.renderMessage("The catalogue couldn't be loaded. Please try again later.");
                }
            }
        };
        downloader.download();
        return this._renderedElement;
    };
    Object.defineProperty(SamplePickerDialog.prototype, "selectedSample", {
        get: function () {
            return this._selectedSample;
        },
        enumerable: true,
        configurable: true
    });
    return SamplePickerDialog;
}(dialog_1.Dialog));
exports.SamplePickerDialog = SamplePickerDialog;


/***/ }),

/***/ "./src/settings-manager.ts":
/*!*********************************!*\
  !*** ./src/settings-manager.ts ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var SettingsManager = /** @class */ (function () {
    function SettingsManager() {
    }
    SettingsManager.determineIfStorageIsAvailable = function (type) {
        try {
            var storage = window[type];
            var x = '__storage_test__';
            storage.setItem(x, x);
            storage.removeItem(x);
            return true;
        }
        catch (e) {
            return e instanceof DOMException && (
            // everything except Firefox
            e.code === 22 ||
                // Firefox
                e.code === 1014 ||
                // test name field too, because code might not be present
                // everything except Firefox
                e.name === 'QuotaExceededError' ||
                // Firefox
                e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&
                // acknowledge QuotaExceededError only if there's something already stored
                storage.length !== 0;
        }
    };
    SettingsManager.trySaveSetting = function (name, value) {
        if (SettingsManager.isLocalStorageAvailable) {
            localStorage.setItem(name, value);
        }
    };
    SettingsManager.tryLoadStringSetting = function (name) {
        if (SettingsManager.isLocalStorageAvailable) {
            var returnValue = localStorage.getItem(name);
            return {
                succeeded: true,
                value: returnValue
            };
        }
        else {
            return { succeeded: false };
        }
    };
    SettingsManager.tryLoadNumberSetting = function (name) {
        if (SettingsManager.isLocalStorageAvailable) {
            var returnValue = localStorage.getItem(name);
            return {
                succeeded: true,
                value: returnValue ? parseFloat(returnValue) : undefined
            };
        }
        else {
            return { succeeded: false };
        }
    };
    SettingsManager.tryLoadBooleanSetting = function (name, defaultValue) {
        if (SettingsManager.isLocalStorageAvailable) {
            var returnValue = localStorage.getItem(name);
            return {
                succeeded: true,
                value: returnValue ? returnValue == "true" : defaultValue
            };
        }
        else {
            return { succeeded: false };
        }
    };
    Object.defineProperty(SettingsManager, "isLocalStorageAvailable", {
        get: function () {
            if (!SettingsManager._isLocalStorageAvailable) {
                SettingsManager._isLocalStorageAvailable = SettingsManager.determineIfStorageIsAvailable("localStorage");
            }
            return SettingsManager._isLocalStorageAvailable;
        },
        enumerable: true,
        configurable: true
    });
    SettingsManager._isLocalStorageAvailable = undefined;
    return SettingsManager;
}());
exports.SettingsManager = SettingsManager;


/***/ }),

/***/ "./src/shared.ts":
/*!***********************!*\
  !*** ./src/shared.ts ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var GlobalSettings = /** @class */ (function () {
    function GlobalSettings() {
    }
    GlobalSettings.enableDataBindingSupport = false;
    GlobalSettings.showDataStructureToolbox = false;
    GlobalSettings.showSampleDataEditorToolbox = false;
    GlobalSettings.showVersionPicker = false;
    return GlobalSettings;
}());
exports.GlobalSettings = GlobalSettings;
var Versions = /** @class */ (function () {
    function Versions() {
    }
    Versions.v1_0 = new Adaptive.Version(1, 0);
    Versions.v1_1 = new Adaptive.Version(1, 1);
    Versions.v1_2 = new Adaptive.Version(1, 2);
    Versions.latest = Versions.v1_2;
    Versions.vNext = new Adaptive.Version(1000, 0, "vNext");
    return Versions;
}());
exports.Versions = Versions;
exports.SupportedTargetVersions = [Versions.v1_0, Versions.v1_1, Versions.v1_2, Versions.vNext];
function isVersionLessOrEqual(version, targetVersion) {
    if (version instanceof Adaptive.Version) {
        if (targetVersion instanceof Adaptive.Version) {
            return targetVersion.compareTo(version) >= 0;
        }
        else {
            // Target version is *
            return true;
        }
    }
    else {
        // Version is *
        return true;
    }
}
exports.isVersionLessOrEqual = isVersionLessOrEqual;


/***/ }),

/***/ "./src/side-panel.ts":
/*!***************************!*\
  !*** ./src/side-panel.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var splitter_1 = __webpack_require__(/*! ./splitter */ "./src/splitter.ts");
var tool_box_1 = __webpack_require__(/*! ./tool-box */ "./src/tool-box.ts");
var settings_manager_1 = __webpack_require__(/*! ./settings-manager */ "./src/settings-manager.ts");
var SidePanelAlignment;
(function (SidePanelAlignment) {
    SidePanelAlignment[SidePanelAlignment["Top"] = 0] = "Top";
    SidePanelAlignment[SidePanelAlignment["Right"] = 1] = "Right";
    SidePanelAlignment[SidePanelAlignment["Bottom"] = 2] = "Bottom";
    SidePanelAlignment[SidePanelAlignment["Left"] = 3] = "Left";
})(SidePanelAlignment = exports.SidePanelAlignment || (exports.SidePanelAlignment = {}));
var ToolboxInfo = /** @class */ (function () {
    function ToolboxInfo(toolbox) {
        var _this = this;
        this.toolbox = toolbox;
        toolbox.onToggled = function (sender) {
            if (sender.isExpanded) {
                _this.showSplitter();
                _this.toolbox.renderedElement.classList.remove("acd-hidden");
            }
            else {
                _this.hideSplitter();
                _this.toolbox.renderedElement.classList.add("acd-hidden");
            }
            if (_this.onToggled) {
                _this.onToggled(_this);
            }
        };
    }
    ToolboxInfo.prototype.resizeEnded = function () {
        if (this.onResizeEnded) {
            this.onResizeEnded(this);
        }
    };
    ToolboxInfo.prototype.resized = function () {
        if (this.onResized) {
            this.onResized(this);
        }
    };
    ToolboxInfo.prototype.showSplitter = function () {
        if (this.splitter) {
            this.splitter.attachedTo.classList.remove("acd-hidden");
        }
    };
    ToolboxInfo.prototype.hideSplitter = function () {
        if (this.splitter) {
            this.splitter.attachedTo.classList.add("acd-hidden");
        }
    };
    Object.defineProperty(ToolboxInfo.prototype, "splitter", {
        get: function () {
            return this._splitter;
        },
        set: function (value) {
            var _this = this;
            this._splitter = value;
            this._splitter.onResizeEnded = function (sender) {
                _this.resizeEnded();
            };
            this._splitter.onResized = function (sender) {
                _this.resized();
            };
        },
        enumerable: true,
        configurable: true
    });
    return ToolboxInfo;
}());
var SidePanel = /** @class */ (function () {
    function SidePanel(id, alignment, collapsedTabContainer) {
        this._toolboxes = [];
        this._isRestoring = false;
        this.isResizable = true;
        this.id = id;
        this._alignment = alignment;
        this._collapsedTabContainer = collapsedTabContainer;
    }
    SidePanel.prototype.updateLayout = function () {
        var expandedToolboxCount = 0;
        for (var _i = 0, _a = this._toolboxes; _i < _a.length; _i++) {
            var toolboxInfo = _a[_i];
            if (toolboxInfo.toolbox.isExpanded) {
                expandedToolboxCount++;
                if (expandedToolboxCount == 1) {
                    toolboxInfo.hideSplitter();
                    toolboxInfo.toolbox.stretch = true;
                }
                else {
                    toolboxInfo.showSplitter();
                    toolboxInfo.toolbox.stretch = false;
                }
            }
        }
        if (expandedToolboxCount > 0) {
            this._attachedTo.classList.remove("acd-hidden");
        }
        else {
            this._attachedTo.classList.add("acd-hidden");
        }
    };
    SidePanel.prototype.computeToolboxSize = function (toolbox) {
        var boundingRect = this._attachedTo.getBoundingClientRect();
        var toolboxBoundingRect = toolbox.renderedElement.getBoundingClientRect();
        if (this.isVertical) {
            toolbox.renderedElement.style.height = (100 / boundingRect.height * toolboxBoundingRect.height) + "%";
        }
        else {
            toolbox.renderedElement.style.width = (100 / boundingRect.width * toolboxBoundingRect.width) + "%";
        }
    };
    SidePanel.prototype.resized = function () {
        if (this.onResized) {
            this.onResized(this);
        }
        this.saveState();
    };
    SidePanel.prototype.toolboxResized = function (toolbox) {
        if (this.onToolboxResized) {
            this.onToolboxResized(this, toolbox);
        }
        this.saveState();
    };
    SidePanel.prototype.toolboxExpandedOrCollapsed = function (toolbox) {
        if (this.onToolboxExpandedOrCollapsed) {
            this.onToolboxExpandedOrCollapsed(this, toolbox);
        }
        this.saveState();
    };
    SidePanel.prototype.getDimensionSettingName = function () {
        return this.id + (this.isVertical ? "Height" : "Width");
    };
    Object.defineProperty(SidePanel.prototype, "isVertical", {
        get: function () {
            return this._alignment == SidePanelAlignment.Right || this._alignment == SidePanelAlignment.Left;
        },
        enumerable: true,
        configurable: true
    });
    SidePanel.prototype.addToolbox = function (toolbox) {
        var _this = this;
        var toolboxInfo = new ToolboxInfo(toolbox);
        toolboxInfo.onToggled = function (sender) {
            _this.updateLayout();
            _this.toolboxExpandedOrCollapsed(toolboxInfo.toolbox);
        };
        toolboxInfo.onResizeEnded = function (sender) {
            _this.computeToolboxSize(sender.toolbox);
            _this.toolboxResized(sender.toolbox);
        };
        toolboxInfo.onResized = function (sender) {
            _this.toolboxResized(sender.toolbox);
        };
        this._toolboxes.push(toolboxInfo);
    };
    SidePanel.prototype.attachTo = function (attachTo) {
        var _this = this;
        this._attachedTo = attachTo;
        this._contentHost = document.createElement("div");
        this._contentHost.style.display = "flex";
        this._contentHost.style.overflow = "hidden";
        this._contentHost.style.flex = "1 1 auto";
        if (this.isVertical) {
            this._contentHost.style.flexDirection = "column";
        }
        else {
            this._contentHost.style.flexDirection = "row";
        }
        for (var i = 0; i < this._toolboxes.length; i++) {
            var toolboxInfo = this._toolboxes[i];
            toolboxInfo.toolbox.render(this.isVertical ? tool_box_1.ToolboxOrientation.Vertical : tool_box_1.ToolboxOrientation.Horizontal, this._collapsedTabContainer);
            if (i > 0) {
                var splitterElement_1 = document.createElement("div");
                if (this.isVertical) {
                    splitterElement_1.className = "acd-horizontal-splitter";
                    toolboxInfo.toolbox.renderedElement.style.height = (100 / this._toolboxes.length) + "%";
                }
                else {
                    splitterElement_1.className = "acd-vertical-splitter";
                    toolboxInfo.toolbox.renderedElement.style.width = (100 / this._toolboxes.length) + "%";
                }
                this._contentHost.appendChild(splitterElement_1);
                toolboxInfo.splitter = new splitter_1.Splitter(splitterElement_1, toolboxInfo.toolbox.renderedElement, !this.isVertical);
            }
            this._contentHost.appendChild(toolboxInfo.toolbox.renderedElement);
        }
        var splitterElement = null;
        if (this.isResizable) {
            splitterElement = document.createElement("div");
            splitterElement.className = this.isVertical ? "acd-vertical-splitter" : "acd-horizontal-splitter";
            var splitter = new splitter_1.Splitter(splitterElement, this._attachedTo, this.isVertical, this._alignment == SidePanelAlignment.Left || this._alignment == SidePanelAlignment.Top);
            splitter.onResized = function (splitter) {
                _this.resized();
            };
        }
        this._attachedTo.innerHTML = "";
        this._attachedTo.style.display = "flex";
        if (this.isVertical) {
            if (this.size) {
                this._attachedTo.style.width = this.size + "px";
            }
            this._attachedTo.style.flexDirection = "row";
            this._attachedTo.style.overflowX = "hidden";
        }
        else {
            if (this.size) {
                this._attachedTo.style.height = this.size + "px";
            }
            this._attachedTo.style.flexDirection = "column";
            this._attachedTo.style.overflowY = "hidden";
        }
        if (this._alignment == SidePanelAlignment.Right || this._alignment == SidePanelAlignment.Bottom) {
            if (splitterElement) {
                this._attachedTo.appendChild(splitterElement);
            }
            this._attachedTo.appendChild(this._contentHost);
        }
        else {
            this._attachedTo.append(this._contentHost);
            if (splitterElement) {
                this._attachedTo.appendChild(splitterElement);
            }
        }
        this.restoreState();
        this.updateLayout();
    };
    SidePanel.prototype.saveState = function () {
        if (!this._isRestoring) {
            settings_manager_1.SettingsManager.trySaveSetting(this.getDimensionSettingName(), this.isVertical ? this._attachedTo.style.width : this._attachedTo.style.height);
            for (var _i = 0, _a = this._toolboxes; _i < _a.length; _i++) {
                var toolboxInfo = _a[_i];
                toolboxInfo.toolbox.saveState();
            }
        }
    };
    SidePanel.prototype.restoreState = function () {
        if (this._attachedTo && !this._isRestoring) {
            this._isRestoring = true;
            try {
                var dimensionSetting = settings_manager_1.SettingsManager.tryLoadStringSetting(this.getDimensionSettingName());
                if (dimensionSetting.succeeded && dimensionSetting.value != undefined && dimensionSetting.value != "") {
                    if (this.isVertical) {
                        this._attachedTo.style.width = dimensionSetting.value;
                    }
                    else {
                        this._attachedTo.style.height = dimensionSetting.value;
                    }
                }
                for (var _i = 0, _a = this._toolboxes; _i < _a.length; _i++) {
                    var toolboxInfo = _a[_i];
                    toolboxInfo.toolbox.restoreState();
                }
                this.updateLayout();
                this.resized();
            }
            finally {
                this._isRestoring = false;
            }
        }
    };
    Object.defineProperty(SidePanel.prototype, "contentHost", {
        get: function () {
            return this._contentHost;
        },
        enumerable: true,
        configurable: true
    });
    return SidePanel;
}());
exports.SidePanel = SidePanel;


/***/ }),

/***/ "./src/splitter.ts":
/*!*************************!*\
  !*** ./src/splitter.ts ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Splitter = /** @class */ (function () {
    function Splitter(attachedTo, sizedElement, isVertical, isAttachedAfter, minimumSize) {
        var _this = this;
        if (isVertical === void 0) { isVertical = false; }
        if (isAttachedAfter === void 0) { isAttachedAfter = false; }
        if (minimumSize === void 0) { minimumSize = 140; }
        this._isVertical = false;
        this._isAttachedAfter = false;
        this.minimum = 50;
        this.attachedTo = attachedTo;
        this._sizedELement = sizedElement;
        this._isVertical = isVertical;
        this._isAttachedAfter = isAttachedAfter;
        this.minimum = minimumSize;
        this.attachedTo.onmousedown = function (e) { e.preventDefault(); };
        this.attachedTo.onpointerdown = function (e) { _this.pointerDown(e); };
        this.attachedTo.onpointermove = function (e) { _this.pointerMove(e); };
        this.attachedTo.onpointerup = function (e) { _this.pointerUp(e); };
    }
    Splitter.prototype.resizeEnded = function () {
        if (this.onResizeEnded) {
            this.onResizeEnded(this);
        }
    };
    Splitter.prototype.pointerDown = function (e) {
        e.preventDefault();
        this.attachedTo.setPointerCapture(e.pointerId);
        this._lastClickedOffset = { x: e.x, y: e.y };
        this._isPointerDown = true;
    };
    Splitter.prototype.pointerMove = function (e) {
        if (this._isPointerDown) {
            e.preventDefault();
            var sizeApplied = false;
            var newSize = void 0;
            if (this._isVertical) {
                if (this._isAttachedAfter) {
                    newSize = this._sizedELement.getBoundingClientRect().width - (this._lastClickedOffset.x - e.x);
                }
                else {
                    newSize = this._sizedELement.getBoundingClientRect().width - (e.x - this._lastClickedOffset.x);
                }
                if (newSize >= this.minimum) {
                    this._sizedELement.style.width = newSize + "px";
                    sizeApplied = true;
                }
            }
            else {
                if (this._isAttachedAfter) {
                    newSize = this._sizedELement.getBoundingClientRect().height - (this._lastClickedOffset.y - e.y);
                }
                else {
                    newSize = this._sizedELement.getBoundingClientRect().height - (e.y - this._lastClickedOffset.y);
                }
                if (newSize >= this.minimum) {
                    this._sizedELement.style.height = newSize + "px";
                    sizeApplied = true;
                }
            }
            if (sizeApplied) {
                if (this.onResized) {
                    this.onResized(this);
                }
                this._lastClickedOffset = { x: e.x, y: e.y };
            }
        }
    };
    Splitter.prototype.pointerUp = function (e) {
        e.preventDefault();
        this.attachedTo.releasePointerCapture(e.pointerId);
        this.resizeEnded();
        this._isPointerDown = false;
    };
    return Splitter;
}());
exports.Splitter = Splitter;


/***/ }),

/***/ "./src/strings.ts":
/*!************************!*\
  !*** ./src/strings.ts ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Strings = /** @class */ (function () {
    function Strings() {
    }
    Strings.toolboxes = {
        toolPalette: {
            title: "Card Elements"
        },
        cardEditor: {
            title: "Card Payload Editor"
        },
        sampleDataEditor: {
            title: "Sample Data Editor"
        },
        propertySheet: {
            title: "Element Properties"
        },
        cardStructure: {
            title: "Card Structure"
        },
        dataStructure: {
            title: "Data Structure"
        }
    };
    Strings.loadingEditor = "Loading editor...";
    return Strings;
}());
exports.Strings = Strings;


/***/ }),

/***/ "./src/tool-box.ts":
/*!*************************!*\
  !*** ./src/tool-box.ts ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var settings_manager_1 = __webpack_require__(/*! ./settings-manager */ "./src/settings-manager.ts");
var ToolboxOrientation;
(function (ToolboxOrientation) {
    ToolboxOrientation[ToolboxOrientation["Horizontal"] = 0] = "Horizontal";
    ToolboxOrientation[ToolboxOrientation["Vertical"] = 1] = "Vertical";
})(ToolboxOrientation = exports.ToolboxOrientation || (exports.ToolboxOrientation = {}));
var Toolbox = /** @class */ (function () {
    function Toolbox(id, title) {
        this._isExpanded = true;
        this._stretch = false;
        this._isRestoring = false;
        this.commands = null;
        this.id = id;
        this.title = title;
    }
    Toolbox.prototype.getDimensionSettingName = function () {
        return "Toolbox" + this.id + (this._orientation == ToolboxOrientation.Vertical ? "Height" : "Width");
    };
    Toolbox.prototype.updateContent = function () {
        if (this._contentHost) {
            this._contentHost.innerHTML = "";
            if (this._content) {
                this._contentHost.appendChild(this._content);
            }
        }
    };
    Toolbox.prototype.toggled = function () {
        if (this.onToggled) {
            this.onToggled(this);
        }
    };
    Toolbox.prototype.render = function (orientation, collapsedTabContainer) {
        var _this = this;
        this._orientation = orientation;
        this._collapsedTabContainer = collapsedTabContainer;
        this._renderedElement = document.createElement("div");
        this._renderedElement.style.overflow = "auto";
        this._renderedElement.style.display = "flex";
        this._renderedElement.style.flexDirection = "column";
        this._headerRootElement = document.createElement("div");
        this._headerRootElement.innerHTML = "";
        this._headerRootElement.className = "acd-toolbox-header";
        var headerContentElement = document.createElement("div");
        headerContentElement.className = "acd-toolbox-header-content";
        var headerTitleElement = document.createElement("span");
        headerTitleElement.className = "acd-toolbox-header-title";
        headerTitleElement.innerText = this.title;
        headerContentElement.appendChild(headerTitleElement);
        var headerCommandsHostElement = document.createElement("span");
        headerCommandsHostElement.className = "acd-toolbox-header-commandsHost";
        this._customCommandsHost = document.createElement("div");
        this._customCommandsHost.style.display = "flex";
        if (this.commands) {
            var _loop_1 = function (command) {
                var commandButtonElement = document.createElement("div");
                commandButtonElement.className = "acd-toolbox-header-commandButton";
                commandButtonElement.title = command.title;
                commandButtonElement.onclick = function (e) {
                    command.execute(command);
                };
                var commandIconElement = document.createElement("div");
                commandIconElement.classList.add("acd-icon", command.iconClass);
                commandButtonElement.appendChild(commandIconElement);
                this_1._customCommandsHost.appendChild(commandButtonElement);
            };
            var this_1 = this;
            for (var _i = 0, _a = this.commands; _i < _a.length; _i++) {
                var command = _a[_i];
                _loop_1(command);
            }
        }
        headerCommandsHostElement.appendChild(this._customCommandsHost);
        this._expandCollapseButtonElement = document.createElement("span");
        this._expandCollapseButtonElement.className = "acd-toolbox-header-commandButton";
        this._expandCollapseButtonElement.title = "Hide";
        this._headerIconElement = document.createElement("span");
        this._headerIconElement.classList.add("acd-icon", "acd-icon-header-expanded");
        this._expandCollapseButtonElement.appendChild(this._headerIconElement);
        this._expandCollapseButtonElement.onmousedown = function (e) {
            e.preventDefault();
            return true;
        };
        this._expandCollapseButtonElement.onclick = function (e) {
            _this.toggle();
            e.preventDefault();
            return true;
        };
        headerCommandsHostElement.appendChild(this._expandCollapseButtonElement);
        headerContentElement.appendChild(headerCommandsHostElement);
        this._headerRootElement.appendChild(headerContentElement);
        this._contentHost = document.createElement("div");
        this._contentHost.style.overflow = "auto";
        this._renderedElement.append(this._headerRootElement, this._contentHost);
        this.updateContent();
    };
    Toolbox.prototype.collapse = function () {
        if (this._isExpanded) {
            this._headerIconElement.classList.add("acd-icon-header-collapsed");
            this._headerIconElement.classList.remove("acd-icon-header-expanded");
            this._customCommandsHost.classList.add("acd-hidden");
            if (this._collapsedTabContainer) {
                this._renderedElement.removeChild(this._headerRootElement);
                this._collapsedTabContainer.appendChild(this._headerRootElement);
            }
            this._expandCollapseButtonElement.title = "Show";
            this._isExpanded = false;
            this.toggled();
        }
    };
    Toolbox.prototype.expand = function () {
        if (!this._isExpanded) {
            this._headerIconElement.classList.add("acd-icon-header-expanded");
            this._headerIconElement.classList.remove("acd-icon-header-collapsed");
            this._customCommandsHost.classList.remove("acd-hidden");
            if (this._collapsedTabContainer) {
                this._collapsedTabContainer.removeChild(this._headerRootElement);
                this._renderedElement.insertBefore(this._headerRootElement, this._renderedElement.firstChild);
            }
            this._expandCollapseButtonElement.title = "Hide";
            this._isExpanded = true;
            this.toggled();
        }
    };
    Toolbox.prototype.toggle = function () {
        if (this.isExpanded) {
            this.collapse();
        }
        else {
            this.expand();
        }
    };
    Toolbox.prototype.getHeaderBoundingRect = function () {
        return this._headerRootElement.getBoundingClientRect();
    };
    Toolbox.prototype.saveState = function () {
        if (!this._isRestoring) {
            settings_manager_1.SettingsManager.trySaveSetting("Toolbox" + this.id + "IsExpanded", this.isExpanded.toString());
            settings_manager_1.SettingsManager.trySaveSetting(this.getDimensionSettingName(), this.orientation == ToolboxOrientation.Vertical ? this.renderedElement.style.height : this.renderedElement.style.width);
        }
    };
    Toolbox.prototype.restoreState = function () {
        if (this.renderedElement && !this._isRestoring) {
            this._isRestoring = true;
            try {
                var dimensionSetting = settings_manager_1.SettingsManager.tryLoadStringSetting(this.getDimensionSettingName());
                if (dimensionSetting.succeeded && dimensionSetting.value != undefined && dimensionSetting.value != "") {
                    if (this.orientation == ToolboxOrientation.Vertical) {
                        this.renderedElement.style.height = dimensionSetting.value;
                    }
                    else {
                        this.renderedElement.style.width = dimensionSetting.value;
                    }
                }
                var isExpandedSetting = settings_manager_1.SettingsManager.tryLoadBooleanSetting("Toolbox" + this.id + "IsExpanded", true);
                if (isExpandedSetting.succeeded) {
                    if (isExpandedSetting.value) {
                        this.expand();
                    }
                    else {
                        this.collapse();
                    }
                }
            }
            finally {
                this._isRestoring = false;
            }
        }
    };
    Object.defineProperty(Toolbox.prototype, "orientation", {
        get: function () {
            return this._orientation;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Toolbox.prototype, "renderedElement", {
        get: function () {
            return this._renderedElement;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Toolbox.prototype, "content", {
        get: function () {
            return this._content;
        },
        set: function (value) {
            this._content = value;
            this.updateContent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Toolbox.prototype, "isExpanded", {
        get: function () {
            return this._isExpanded;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Toolbox.prototype, "stretch", {
        get: function () {
            return this._stretch;
        },
        set: function (value) {
            this._stretch = value;
            if (this._stretch) {
                this.renderedElement.style.flex = "1 1 auto";
            }
            else {
                this.renderedElement.style.flex = "0 0 auto";
            }
        },
        enumerable: true,
        configurable: true
    });
    return Toolbox;
}());
exports.Toolbox = Toolbox;


/***/ }),

/***/ "./src/tool-palette.ts":
/*!*****************************!*\
  !*** ./src/tool-palette.ts ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var DesignerSurface = __webpack_require__(/*! ./card-designer-surface */ "./src/card-designer-surface.ts");
var Adaptive = __webpack_require__(/*! adaptivecards */ "../adaptivecards/lib/adaptivecards.js");
var draggable_element_1 = __webpack_require__(/*! ./draggable-element */ "./src/draggable-element.ts");
var BasePaletteItem = /** @class */ (function (_super) {
    __extends(BasePaletteItem, _super);
    function BasePaletteItem() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BasePaletteItem.prototype.internalRender = function () {
        var element = document.createElement("div");
        element.className = "acd-palette-item";
        element.style.display = "flex";
        var iconElement = document.createElement("div");
        iconElement.classList.add("acd-icon", "acd-toolPalette-icon", this.getIconClass());
        iconElement.style.flex = "0 0 auto";
        var labelElement = document.createElement("div");
        labelElement.className = "acd-palette-item-label";
        labelElement.style.flex = "1 1 100%";
        labelElement.innerText = this.getText();
        element.appendChild(iconElement);
        element.appendChild(labelElement);
        return element;
    };
    BasePaletteItem.prototype.renderDragVisual = function () {
        return this.internalRender();
    };
    return BasePaletteItem;
}(draggable_element_1.DraggableElement));
exports.BasePaletteItem = BasePaletteItem;
var ElementPaletteItem = /** @class */ (function (_super) {
    __extends(ElementPaletteItem, _super);
    function ElementPaletteItem(typeRegistration, peerRegistration) {
        var _this = _super.call(this) || this;
        _this.typeRegistration = typeRegistration;
        _this.peerRegistration = peerRegistration;
        return _this;
    }
    ElementPaletteItem.prototype.getText = function () {
        return this.typeRegistration.typeName;
    };
    ElementPaletteItem.prototype.getIconClass = function () {
        return this.peerRegistration.iconClass;
    };
    ElementPaletteItem.prototype.createPeer = function (designer) {
        var peer = DesignerSurface.CardDesignerSurface.cardElementPeerRegistry.createPeerInstance(designer, null, this.typeRegistration.createInstance());
        peer.initializeCardElement();
        return peer;
    };
    return ElementPaletteItem;
}(BasePaletteItem));
exports.ElementPaletteItem = ElementPaletteItem;
var DataPaletteItem = /** @class */ (function (_super) {
    __extends(DataPaletteItem, _super);
    function DataPaletteItem(field) {
        var _this = _super.call(this) || this;
        _this.field = field;
        return _this;
    }
    DataPaletteItem.prototype.getText = function () {
        return this.field.name;
    };
    DataPaletteItem.prototype.getIconClass = function () {
        return null;
    };
    DataPaletteItem.prototype.createPeer = function (designer) {
        var element;
        if (this.field.isCollection) {
            element = new Adaptive.Container();
            element.setCustomProperty("$data", "{" + this.field.getPath() + "}");
        }
        else {
            var textBlock = new Adaptive.TextBlock();
            textBlock.text = "{" + this.field.getPath() + "}";
            element = textBlock;
        }
        var peer = DesignerSurface.CardDesignerSurface.cardElementPeerRegistry.createPeerInstance(designer, null, element);
        peer.initializeCardElement();
        return peer;
    };
    return DataPaletteItem;
}(BasePaletteItem));
exports.DataPaletteItem = DataPaletteItem;
var CustomPaletteItem = /** @class */ (function (_super) {
    __extends(CustomPaletteItem, _super);
    function CustomPaletteItem(category) {
        var _this = _super.call(this) || this;
        _this.category = category;
        return _this;
    }
    CustomPaletteItem.prototype.getIconClass = function () {
        return "acd-icon-customPaletteItem";
    };
    return CustomPaletteItem;
}(BasePaletteItem));
exports.CustomPaletteItem = CustomPaletteItem;
var SnippetPaletteItem = /** @class */ (function (_super) {
    __extends(SnippetPaletteItem, _super);
    function SnippetPaletteItem(category, name) {
        var _this = _super.call(this, category) || this;
        _this.name = name;
        return _this;
    }
    SnippetPaletteItem.prototype.getText = function () {
        return this.name;
    };
    SnippetPaletteItem.prototype.createPeer = function (designer) {
        if (this.snippet) {
            var rootElementTypeName = this.snippet["type"];
            if (rootElementTypeName) {
                var adaptiveElement = Adaptive.AdaptiveCard.elementTypeRegistry.createInstance(rootElementTypeName);
                if (adaptiveElement) {
                    adaptiveElement.parse(this.snippet);
                    var peer = DesignerSurface.CardDesignerSurface.cardElementPeerRegistry.createPeerInstance(designer, null, adaptiveElement);
                    peer.initializeCardElement();
                    return peer;
                }
            }
        }
    };
    return SnippetPaletteItem;
}(CustomPaletteItem));
exports.SnippetPaletteItem = SnippetPaletteItem;


/***/ }),

/***/ "./src/toolbar.ts":
/*!************************!*\
  !*** ./src/toolbar.ts ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
var adaptivecards_controls_1 = __webpack_require__(/*! adaptivecards-controls */ "../adaptivecards-controls/lib/adaptivecards-controls.js");
var ToolbarElementAlignment;
(function (ToolbarElementAlignment) {
    ToolbarElementAlignment[ToolbarElementAlignment["Left"] = 0] = "Left";
    ToolbarElementAlignment[ToolbarElementAlignment["Right"] = 1] = "Right";
})(ToolbarElementAlignment = exports.ToolbarElementAlignment || (exports.ToolbarElementAlignment = {}));
var ToolbarElement = /** @class */ (function () {
    function ToolbarElement(id) {
        this._renderedElement = undefined;
        this.isVisible = true;
        this.separator = false;
        this.label = null;
        this.alignment = ToolbarElementAlignment.Left;
        if (!id || id === "") {
            throw new Error("Toolbar elements must have an Id.");
        }
        this.id = id;
    }
    ToolbarElement.prototype.internalUpdateLayout = function () {
        // Do nothing in base implementation
    };
    ToolbarElement.prototype.updateLayout = function () {
        if (this._renderedElement) {
            this.internalUpdateLayout();
        }
    };
    ToolbarElement.prototype.render = function () {
        this._renderedElement = this.internalRender();
        this.updateLayout();
        return this._renderedElement;
    };
    Object.defineProperty(ToolbarElement.prototype, "renderedElement", {
        get: function () {
            return this._renderedElement;
        },
        enumerable: true,
        configurable: true
    });
    return ToolbarElement;
}());
exports.ToolbarElement = ToolbarElement;
var ToolbarButton = /** @class */ (function (_super) {
    __extends(ToolbarButton, _super);
    function ToolbarButton(id, caption, iconClass, onClick) {
        if (onClick === void 0) { onClick = null; }
        var _this = _super.call(this, id) || this;
        _this._displayCaption = true;
        _this._iconClass = undefined;
        _this._toolTip = undefined;
        _this._isEnabled = true;
        _this._allowToggle = false;
        _this._isToggled = false;
        _this.caption = caption;
        _this.iconClass = iconClass;
        _this.onClick = onClick;
        return _this;
    }
    ToolbarButton.prototype.clicked = function () {
        if (this.onClick) {
            this.onClick(this);
        }
    };
    ToolbarButton.prototype.internalUpdateLayout = function () {
        this.renderedElement.className = "acd-toolbar-button";
        this.renderedElement.disabled = !this.isEnabled;
        if (this.isToggled) {
            this.renderedElement.classList.add("acd-toolbar-button-toggled");
        }
        else {
            this.renderedElement.classList.remove("acd-toolbar-button-toggled");
        }
        if (this.iconClass) {
            this.renderedElement.classList.add(this.iconClass);
        }
        if (!this.displayCaption) {
            this.renderedElement.classList.add("acd-toolbar-button-iconOnly");
            this.renderedElement.innerText = "";
        }
        else {
            this.renderedElement.innerText = this.caption;
        }
        this.renderedElement.title = this.toolTip ? this.toolTip : "";
    };
    ToolbarButton.prototype.internalRender = function () {
        var _this = this;
        var element = document.createElement("button");
        element.onclick = function (e) {
            if (_this.allowToggle) {
                _this.isToggled = !_this.isToggled;
            }
            _this.clicked();
        };
        return element;
    };
    Object.defineProperty(ToolbarButton.prototype, "allowToggle", {
        get: function () {
            return this._allowToggle;
        },
        set: function (value) {
            this._allowToggle = value;
            if (!this._allowToggle) {
                this.isToggled = false;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ToolbarButton.prototype, "isToggled", {
        get: function () {
            return this._isToggled;
        },
        set: function (value) {
            this._isToggled = value;
            this.updateLayout();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ToolbarButton.prototype, "caption", {
        get: function () {
            return this._caption;
        },
        set: function (value) {
            this._caption = value;
            this.updateLayout();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ToolbarButton.prototype, "displayCaption", {
        get: function () {
            return this._displayCaption;
        },
        set: function (value) {
            this._displayCaption = value;
            this.updateLayout();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ToolbarButton.prototype, "iconClass", {
        get: function () {
            return this._iconClass;
        },
        set: function (value) {
            this._iconClass = value;
            this.updateLayout();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ToolbarButton.prototype, "toolTip", {
        get: function () {
            return this._toolTip;
        },
        set: function (value) {
            this._toolTip = value;
            this.updateLayout();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ToolbarButton.prototype, "isEnabled", {
        get: function () {
            return this._isEnabled;
        },
        set: function (value) {
            this._isEnabled = value;
            this.updateLayout();
        },
        enumerable: true,
        configurable: true
    });
    return ToolbarButton;
}(ToolbarElement));
exports.ToolbarButton = ToolbarButton;
var ToolbarChoicePicker = /** @class */ (function (_super) {
    __extends(ToolbarChoicePicker, _super);
    function ToolbarChoicePicker() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.label = null;
        _this.choices = [];
        _this.width = null;
        return _this;
    }
    ToolbarChoicePicker.prototype.internalRender = function () {
        var _this = this;
        this._dropDown = new adaptivecards_controls_1.DropDown();
        for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {
            var choice = _a[_i];
            var dropDownItem = new adaptivecards_controls_1.DropDownItem(choice.value, choice.name);
            this._dropDown.items.add(dropDownItem);
        }
        this._dropDown.selectedIndex = 0;
        this._dropDown.onValueChanged = function (sender) {
            if (_this.onChanged) {
                _this.onChanged(_this);
            }
        };
        var pickerElement = document.createElement("div");
        if (this.width && this.width > 0) {
            pickerElement.style.width = this.width + "px";
        }
        this._dropDown.attach(pickerElement);
        var pickerContainerElement = document.createElement("div");
        pickerContainerElement.className = "acd-toolbar-choicePicker";
        pickerContainerElement.style.display = "flex";
        pickerContainerElement.style.alignItems = "center";
        if (this.label) {
            var labelElement = document.createElement("span");
            labelElement.className = "acd-toolbar-label";
            labelElement.innerText = this.label;
            pickerContainerElement.appendChild(labelElement);
        }
        pickerContainerElement.appendChild(pickerElement);
        return pickerContainerElement;
    };
    Object.defineProperty(ToolbarChoicePicker.prototype, "value", {
        get: function () {
            return this._dropDown.value.key;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ToolbarChoicePicker.prototype, "selectedIndex", {
        get: function () {
            return this._dropDown.selectedIndex;
        },
        set: function (value) {
            this._dropDown.selectedIndex = value;
        },
        enumerable: true,
        configurable: true
    });
    return ToolbarChoicePicker;
}(ToolbarElement));
exports.ToolbarChoicePicker = ToolbarChoicePicker;
var Toolbar = /** @class */ (function () {
    function Toolbar() {
        this._elements = [];
    }
    Toolbar.prototype.createSeparatorElement = function () {
        var separatorElement = document.createElement("div");
        separatorElement.className = "acd-toolbar-separator";
        return separatorElement;
    };
    Toolbar.prototype.renderElementsInto = function (container, elements, separatorPosition) {
        for (var i = 0; i < elements.length; i++) {
            if (elements[i].separator && separatorPosition == ToolbarElementAlignment.Left && i > 0) {
                container.appendChild(this.createSeparatorElement());
            }
            container.appendChild(elements[i].render());
            if (elements[i].separator && separatorPosition == ToolbarElementAlignment.Right && i < elements.length - 1) {
                container.appendChild(this.createSeparatorElement());
            }
        }
    };
    Toolbar.prototype.attachTo = function (element) {
        this._attachedTo = element;
        this._attachedTo.className = "acd-toolbar";
        this._attachedTo.style.display = "flex";
        this._attachedTo.style.justifyContent = "space-between";
        this._attachedTo.innerHTML = "";
        var leftElements = [];
        var rightElements = [];
        for (var _i = 0, _a = this._elements; _i < _a.length; _i++) {
            var element_1 = _a[_i];
            if (element_1.isVisible) {
                if (element_1.alignment == ToolbarElementAlignment.Left) {
                    leftElements.push(element_1);
                }
                else {
                    rightElements.push(element_1);
                }
            }
        }
        var leftContainer = document.createElement("div");
        leftContainer.style.display = "flex";
        leftContainer.style.alignItems = "center";
        var rightContainer = document.createElement("div");
        rightContainer.style.display = "flex";
        rightContainer.style.alignItems = "center";
        this.renderElementsInto(leftContainer, leftElements, ToolbarElementAlignment.Left);
        this.renderElementsInto(rightContainer, rightElements, ToolbarElementAlignment.Right);
        this._attachedTo.appendChild(leftContainer);
        this._attachedTo.appendChild(rightContainer);
    };
    Toolbar.prototype.addElement = function (element) {
        this._elements.push(element);
    };
    Toolbar.prototype.getElementById = function (elementId) {
        for (var _i = 0, _a = this._elements; _i < _a.length; _i++) {
            var element = _a[_i];
            if (element.id == elementId) {
                return element;
            }
        }
        return null;
    };
    Toolbar.prototype.insertElementAfter = function (element, afterElementId) {
        for (var i = 0; i < this._elements.length; i++) {
            if (this._elements[i].id == afterElementId) {
                this._elements.splice(i + 1, 0, element);
                return;
            }
        }
        // Add as the last element if no element was found with the
        // specified id
        this._elements.push(element);
    };
    Toolbar.prototype.insertElementBefore = function (element, beforeElementId) {
        for (var i = this._elements.length - 1; i >= 0; i--) {
            if (this._elements[i].id == beforeElementId) {
                this._elements.splice(i, 0, element);
                return;
            }
        }
        // Insert as first element if no element was found with the
        // specified id
        this._elements.splice(0, 0, element);
    };
    return Toolbar;
}());
exports.Toolbar = Toolbar;


/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9BQ0Rlc2lnbmVyL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0FDRGVzaWduZXIvLi4vYWRhcHRpdmVjYXJkcy1jb250cm9scy9saWIvYWRhcHRpdmVjYXJkcy1jb250cm9scy5qcyIsIndlYnBhY2s6Ly9BQ0Rlc2lnbmVyLy4uL2FkYXB0aXZlY2FyZHMtY29udHJvbHMvbGliL2NhbGVuZGFyLmpzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi4vYWRhcHRpdmVjYXJkcy1jb250cm9scy9saWIvY2hlY2tib3guanMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uLi9hZGFwdGl2ZWNhcmRzLWNvbnRyb2xzL2xpYi9jb2xsZWN0aW9uLmpzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi4vYWRhcHRpdmVjYXJkcy1jb250cm9scy9saWIvY29uc3RhbnRzLmpzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi4vYWRhcHRpdmVjYXJkcy1jb250cm9scy9saWIvZGF0ZXBpY2tlci5qcyIsIndlYnBhY2s6Ly9BQ0Rlc2lnbmVyLy4uL2FkYXB0aXZlY2FyZHMtY29udHJvbHMvbGliL2Ryb3Bkb3duLmpzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi4vYWRhcHRpdmVjYXJkcy1jb250cm9scy9saWIvZW51bXMuanMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uLi9hZGFwdGl2ZWNhcmRzLWNvbnRyb2xzL2xpYi9pbnB1dGNvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uLi9hZGFwdGl2ZWNhcmRzLWNvbnRyb2xzL2xpYi9pbnB1dHdpdGhwb3B1cC5qcyIsIndlYnBhY2s6Ly9BQ0Rlc2lnbmVyLy4uL2FkYXB0aXZlY2FyZHMtY29udHJvbHMvbGliL3BvcHVwbWVudS5qcyIsIndlYnBhY2s6Ly9BQ0Rlc2lnbmVyLy4uL2FkYXB0aXZlY2FyZHMtY29udHJvbHMvbGliL3JhZGlvYnV0dG9uLmpzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi4vYWRhcHRpdmVjYXJkcy1jb250cm9scy9saWIvdGV4dGJveC5qcyIsIndlYnBhY2s6Ly9BQ0Rlc2lnbmVyLy4uL2FkYXB0aXZlY2FyZHMtY29udHJvbHMvbGliL3V0aWxzLmpzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi4vYWRhcHRpdmVjYXJkcy10ZW1wbGF0aW5nL2xpYi9hZGFwdGl2ZWNhcmRzLXRlbXBsYXRpbmcuanMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uLi9hZGFwdGl2ZWNhcmRzLXRlbXBsYXRpbmcvbGliL2V4cHJlc3Npb24tcGFyc2VyLmpzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi4vYWRhcHRpdmVjYXJkcy10ZW1wbGF0aW5nL2xpYi9zaGFyZWQuanMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uLi9hZGFwdGl2ZWNhcmRzLXRlbXBsYXRpbmcvbGliL3RlbXBsYXRlLWVuZ2luZS5qcyIsIndlYnBhY2s6Ly9BQ0Rlc2lnbmVyLy4uL2FkYXB0aXZlY2FyZHMvbGliL2FkYXB0aXZlY2FyZHMuanMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uLi9hZGFwdGl2ZWNhcmRzL2xpYi9jYXJkLWVsZW1lbnRzLmpzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi4vYWRhcHRpdmVjYXJkcy9saWIvZW51bXMuanMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uLi9hZGFwdGl2ZWNhcmRzL2xpYi9ob3N0LWNvbmZpZy5qcyIsIndlYnBhY2s6Ly9BQ0Rlc2lnbmVyLy4uL2FkYXB0aXZlY2FyZHMvbGliL3NoYXJlZC5qcyIsIndlYnBhY2s6Ly9BQ0Rlc2lnbmVyLy4uL2FkYXB0aXZlY2FyZHMvbGliL3RleHQtZm9ybWF0dGVycy5qcyIsIndlYnBhY2s6Ly9BQ0Rlc2lnbmVyLy4uL2FkYXB0aXZlY2FyZHMvbGliL3V0aWxzLmpzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9ub2RlX21vZHVsZXMvY2xpcGJvYXJkL2Rpc3QvY2xpcGJvYXJkLmpzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvYWRhcHRpdmUtY2FyZC1zY2hlbWEudHMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uL3NyYy9hZGFwdGl2ZWNhcmRzLWRlc2lnbmVyLXN0YW5kYWxvbmUudHMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uL3NyYy9hZGFwdGl2ZWNhcmRzLWRlc2lnbmVyLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvYmFzZS10cmVlLWl0ZW0udHMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uL3NyYy9jYXJkLWRlc2lnbmVyLXN1cmZhY2UudHMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uL3NyYy9jYXJkLWRlc2lnbmVyLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvY2F0YWxvZ3VlLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvY29uc3RhbnRzLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvY29udGFpbmVycy9iZi1pbWFnZS9iZi1pbWFnZS1jb250YWluZXIudHMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uL3NyYy9jb250YWluZXJzL2NvcnRhbmEtY2xhc3NpYy9jb3J0YW5hLWNsYXNzaWMtY29udGFpbmVyLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvY29udGFpbmVycy9jb3J0YW5hL2NvcnRhbmEtY29udGFpbmVyLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvY29udGFpbmVycy9kZWZhdWx0L2RlZmF1bHQtY29udGFpbmVyLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvY29udGFpbmVycy9ob3N0LWNvbnRhaW5lci50cyIsIndlYnBhY2s6Ly9BQ0Rlc2lnbmVyLy4vc3JjL2NvbnRhaW5lcnMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uL3NyYy9jb250YWluZXJzL25vdGlmaWNhdGlvbnMvdG9hc3QtY29udGFpbmVyLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvY29udGFpbmVycy9vdXRsb29rL291dGxvb2stY29udGFpbmVyLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvY29udGFpbmVycy9za3lwZS9za3lwZS1jb250YWluZXIudHMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uL3NyYy9jb250YWluZXJzL3RlYW1zL3RlYW1zLWNvbnRhaW5lci50cyIsIndlYnBhY2s6Ly9BQ0Rlc2lnbmVyLy4vc3JjL2NvbnRhaW5lcnMvdGltZWxpbmUvdGltZWxpbmUtY29udGFpbmVyLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvY29udGFpbmVycy93ZWJjaGF0L3dlYmNoYXQtY29udGFpbmVyLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvZGF0YS10cmVlaXRlbS50cyIsIndlYnBhY2s6Ly9BQ0Rlc2lnbmVyLy4vc3JjL2RhdGEudHMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uL3NyYy9kZXNpZ25lci1wZWVyLXRyZWVpdGVtLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvZGVzaWduZXItcGVlcnMudHMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uL3NyYy9kaWFsb2cudHMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uL3NyYy9kb3dubG9hZGVyLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvZHJhZ2dhYmxlLWVsZW1lbnQudHMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uL3NyYy9mdWxsc2NyZWVuLWhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uL3NyYy9taXNjZWxsYW5lb3VzLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvcGVlci1jb21tYW5kLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvc2FtcGxlLXBpY2tlci1kaWFsb2cudHMiLCJ3ZWJwYWNrOi8vQUNEZXNpZ25lci8uL3NyYy9zZXR0aW5ncy1tYW5hZ2VyLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvc2hhcmVkLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvc2lkZS1wYW5lbC50cyIsIndlYnBhY2s6Ly9BQ0Rlc2lnbmVyLy4vc3JjL3NwbGl0dGVyLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvc3RyaW5ncy50cyIsIndlYnBhY2s6Ly9BQ0Rlc2lnbmVyLy4vc3JjL3Rvb2wtYm94LnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvdG9vbC1wYWxldHRlLnRzIiwid2VicGFjazovL0FDRGVzaWduZXIvLi9zcmMvdG9vbGJhci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0RBQTBDLGdDQUFnQztBQUMxRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdFQUF3RCxrQkFBa0I7QUFDMUU7QUFDQSx5REFBaUQsY0FBYztBQUMvRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQXlDLGlDQUFpQztBQUMxRSx3SEFBZ0gsbUJBQW1CLEVBQUU7QUFDckk7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBMkIsMEJBQTBCLEVBQUU7QUFDdkQseUNBQWlDLGVBQWU7QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOERBQXNELCtEQUErRDs7QUFFckg7QUFDQTs7O0FBR0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ2xGYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQSxTQUFTLG1CQUFPLENBQUMsK0RBQWE7QUFDOUIsU0FBUyxtQkFBTyxDQUFDLHVEQUFTO0FBQzFCLFNBQVMsbUJBQU8sQ0FBQyx1REFBUztBQUMxQixTQUFTLG1CQUFPLENBQUMsaUVBQWM7QUFDL0IsU0FBUyxtQkFBTyxDQUFDLHFFQUFnQjtBQUNqQyxTQUFTLG1CQUFPLENBQUMseUVBQWtCO0FBQ25DLFNBQVMsbUJBQU8sQ0FBQyw2REFBWTtBQUM3QixTQUFTLG1CQUFPLENBQUMsNkRBQVk7QUFDN0IsU0FBUyxtQkFBTyxDQUFDLGlFQUFjO0FBQy9CLFNBQVMsbUJBQU8sQ0FBQyw2REFBWTtBQUM3QixTQUFTLG1CQUFPLENBQUMsbUVBQWU7QUFDaEMsU0FBUyxtQkFBTyxDQUFDLDJEQUFXO0FBQzVCLFNBQVMsbUJBQU8sQ0FBQywrREFBYTtBQUM5QixrRDs7Ozs7Ozs7Ozs7O0FDcEJhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsY0FBYyxnQkFBZ0Isc0NBQXNDLGlCQUFpQixFQUFFO0FBQ3ZGLDZCQUE2Qix1REFBdUQ7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBLFlBQVksbUJBQU8sQ0FBQyx1REFBUztBQUM3QixnQkFBZ0IsbUJBQU8sQ0FBQywrREFBYTtBQUNyQyxxQkFBcUIsbUJBQU8sQ0FBQyxxRUFBZ0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxrQkFBa0I7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsMkJBQTJCLHVCQUF1QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHVDQUF1QztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix1QkFBdUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFT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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsd0JBQXdCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBLG1DOzs7Ozs7Ozs7Ozs7QUMvUGE7QUFDYiw4Q0FBOEMsY0FBYztBQUM1RDtBQUNBO0FBQ0EsWUFBWSxtQkFBTyxDQUFDLHVEQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxnQkFBZ0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxnQkFBZ0I7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7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QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMEJBQTBCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0U7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLG1CQUFtQjtBQUN2RCxzQ0FBc0MscUJBQXFCO0FBQzNELHVDQUF1QyxzQkFBc0I7QUFDN0QscUNBQXFDLG9CQUFvQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyx3QkFBd0I7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esb0NBQW9DLElBQUk7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0hBQWdIO0FBQ2hIO0FBQ0E7QUFDQSxxR0FBcUc7QUFDckc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLG9CQUFvQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyx5QkFBeUI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGtCQUFrQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsZ0JBQWdCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxnQkFBZ0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGdCQUFnQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsZ0JBQWdCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGtCQUFrQjtBQUNoRCwrQkFBK0IsbUJBQW1CO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix1QkFBdUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCx5QkFBeUI7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlGQUFpRjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsZ0JBQWdCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxnQkFBZ0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGdCQUFnQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixvQ0FBb0M7QUFDN0Q7QUFDQSwyQ0FBMkMsZ0JBQWdCO0FBQzNEO0FBQ0E7QUFDQSw2QkFBNkIsdURBQXVEO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELHNCQUFzQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Qsc0JBQXNCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsc0JBQXNCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsbUJBQW1CO0FBQ2xELCtCQUErQixtQkFBbUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUNBLHNEQUFzRCxzQkFBc0I7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxzQkFBc0I7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLEVBQUUsT0FBTyxFQUFFO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw4Q0FBOEM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLGdCQUFnQjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsZ0NBQWdDO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHVDQUF1QztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHlCQUF5QjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsZ0JBQWdCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsZ0JBQWdCO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsa0NBQWtDO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELGdCQUFnQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx1QkFBdUI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLFdBQVc7QUFDekMsK0JBQStCLFlBQVk7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxnQkFBZ0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLGdCQUFnQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLCtDQUErQyxnQkFBZ0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsZ0JBQWdCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Q0E7QUFDQTtBQUNBLHVCQUF1Qix5QkFBeUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIseUJBQXlCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUJBQXVCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHVCQUF1QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHdCQUF3QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxnQkFBZ0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGdCQUFnQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxnQkFBZ0I7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsZ0JBQWdCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsUUFBUTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0JBQXdCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsUUFBUTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixrQkFBa0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG1EQUFtRDtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix3QkFBd0I7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsbUJBQW1CO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsZ0JBQWdCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsZ0JBQWdCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsZ0JBQWdCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxnQkFBZ0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxnQkFBZ0I7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDBCQUEwQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELGdCQUFnQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxnQkFBZ0I7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix3QkFBd0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLGdCQUFnQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMEJBQTBCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsMkJBQTJCO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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LEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLENBQUM7QUFDRCx5Qzs7Ozs7Ozs7Ozs7O0FD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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwwQ0FBMEM7QUFDbEUscUJBQXFCLDBDQUEwQztBQUMvRCxzQkFBc0IsMENBQTBDO0FBQ2hFLHVCQUF1QiwwQ0FBMEM7QUFDakUscUJBQXFCLDBDQUEwQztBQUMvRCx3QkFBd0IsMENBQTBDO0FBQ2xFLDBCQUEwQjtBQUMxQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsZ0NBQWdDO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxxQkFBcUI7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixXQUFXO0FBQzFDLCtCQUErQixXQUFXO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELDBCQUEwQjtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQSx1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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUU7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDOzs7Ozs7Ozs7OztBQ3pRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBeUQ7QUFDN0Q7QUFDQSxNQUFNLEVBSzRCO0FBQ2xDLENBQUM7QUFDRCxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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IFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9zcmMvYWRhcHRpdmVjYXJkcy1kZXNpZ25lci50c1wiKTtcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5mdW5jdGlvbiBfX2V4cG9ydChtKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5fX2V4cG9ydChyZXF1aXJlKFwiLi9jb25zdGFudHNcIikpO1xyXG5fX2V4cG9ydChyZXF1aXJlKFwiLi9lbnVtc1wiKSk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL3V0aWxzXCIpKTtcclxuX19leHBvcnQocmVxdWlyZShcIi4vY29sbGVjdGlvblwiKSk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL2lucHV0Y29udHJvbFwiKSk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL2lucHV0d2l0aHBvcHVwXCIpKTtcclxuX19leHBvcnQocmVxdWlyZShcIi4vY2FsZW5kYXJcIikpO1xyXG5fX2V4cG9ydChyZXF1aXJlKFwiLi9kcm9wZG93blwiKSk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL2RhdGVwaWNrZXJcIikpO1xyXG5fX2V4cG9ydChyZXF1aXJlKFwiLi9jaGVja2JveFwiKSk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL3JhZGlvYnV0dG9uXCIpKTtcclxuX19leHBvcnQocmVxdWlyZShcIi4vdGV4dGJveFwiKSk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL3BvcHVwbWVudVwiKSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFkYXB0aXZlY2FyZHMtY29udHJvbHMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbnZhciBVdGlscyA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xyXG52YXIgQ29uc3RhbnRzID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xyXG52YXIgaW5wdXRjb250cm9sXzEgPSByZXF1aXJlKFwiLi9pbnB1dGNvbnRyb2xcIik7XHJcbnZhciBEYXlDZWxsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGF5Q2VsbChkYXRlKSB7XHJcbiAgICAgICAgdGhpcy5faXNTdWJkdWVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZGF0ZSA9IGRhdGU7XHJcbiAgICB9XHJcbiAgICBEYXlDZWxsLnByb3RvdHlwZS5zZWxlY3RlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5vblNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25TZWxlY3RlZCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRGF5Q2VsbC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc05hbWUgPSBcIm1zLWN0cmwgbXMtY3RybC1jYWxlbmRhckRheVwiO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQuaW5uZXJUZXh0ID0gdGhpcy5kYXRlLmdldERhdGUoKS50b1N0cmluZygpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQudGFiSW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQub25jbGljayA9IGZ1bmN0aW9uIChlKSB7IF90aGlzLnNlbGVjdGVkKCk7IH07XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5vbmtleWRvd24gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IENvbnN0YW50cy5LRVlfRU5URVIpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNlbGVjdGVkKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gICAgfTtcclxuICAgIERheUNlbGwucHJvdG90eXBlLmZvY3VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQuZm9jdXMoKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF5Q2VsbC5wcm90b3R5cGUsIFwiaXNTdWJkdWVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzU3ViZHVlZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzU3ViZHVlZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faXNTdWJkdWVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzdWJkdWVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwic3ViZHVlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERheUNlbGwucHJvdG90eXBlLCBcImlzU2VsZWN0ZWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXNTZWxlY3RlZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzU2VsZWN0ZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2lzU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBEYXlDZWxsO1xyXG59KCkpO1xyXG5leHBvcnRzLkRheUNlbGwgPSBEYXlDZWxsO1xyXG52YXIgQ2FsZW5kYXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQ2FsZW5kYXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBDYWxlbmRhcigpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLl9zZWxlY3RlZERheSA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMuX21pbmlDYWxlbmRhckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGFibGVcIik7XHJcbiAgICAgICAgX3RoaXMuX21pbmlDYWxlbmRhckVsZW1lbnQuY2xhc3NOYW1lID0gXCJtcy1jdHJsIG1zLWN0cmwtc2xpZGVcIjtcclxuICAgICAgICBfdGhpcy5fbWluaUNhbGVuZGFyRWxlbWVudC5jZWxsUGFkZGluZyA9IFwiMHB4XCI7XHJcbiAgICAgICAgX3RoaXMuX21pbmlDYWxlbmRhckVsZW1lbnQuY2VsbFNwYWNpbmcgPSBcIjBweFwiO1xyXG4gICAgICAgIHZhciBtaW5pQ2FsZW5kYXJIZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIG1pbmlDYWxlbmRhckhlYWRlci5jbGFzc05hbWUgPSBcIm1zLWN0cmwgbXMtY3RybC1jYWxlbmRhckhlYWRlclwiO1xyXG4gICAgICAgIG1pbmlDYWxlbmRhckhlYWRlci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgX3RoaXMuX21vbnRoWWVhckxhYmVsRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgX3RoaXMuX21vbnRoWWVhckxhYmVsRWxlbWVudC5zdHlsZS5mbGV4ID0gXCIxIDEgMTAwJVwiO1xyXG4gICAgICAgIG1pbmlDYWxlbmRhckhlYWRlci5hcHBlbmRDaGlsZChfdGhpcy5fbW9udGhZZWFyTGFiZWxFbGVtZW50KTtcclxuICAgICAgICB2YXIgbmF2QnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbmF2QnV0dG9ucy5zdHlsZS5mbGV4ID0gXCIwIDAgYXV0b1wiO1xyXG4gICAgICAgIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaVwiKTtcclxuICAgICAgICBidXR0b24uY2xhc3NOYW1lID0gXCJtcy1pY29uIG1zLWN0cmwtY2FsZW5kYXJOYXZCdXR0b24gbXMtaWNvbi1jaGV2cm9uTGVmdFwiO1xyXG4gICAgICAgIGJ1dHRvbi50YWJJbmRleCA9IDA7XHJcbiAgICAgICAgYnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5kYXRlID0gVXRpbHMuYWRkTW9udGhzKF90aGlzLmRhdGUsIC0xKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGJ1dHRvbi5vbmtleWRvd24gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IENvbnN0YW50cy5LRVlfRU5URVIpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmRhdGUgPSBVdGlscy5hZGRNb250aHMoX3RoaXMuZGF0ZSwgLTEpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBuYXZCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcbiAgICAgICAgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlcIik7XHJcbiAgICAgICAgYnV0dG9uLmNsYXNzTmFtZSA9IFwibXMtaWNvbiBtcy1jdHJsLWNhbGVuZGFyTmF2QnV0dG9uIG1zLWljb24tY2hldnJvblJpZ2h0XCI7XHJcbiAgICAgICAgYnV0dG9uLnRhYkluZGV4ID0gMDtcclxuICAgICAgICBidXR0b24ub25jbGljayA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmRhdGUgPSBVdGlscy5hZGRNb250aHMoX3RoaXMuZGF0ZSwgMSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBidXR0b24ub25rZXlkb3duID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSBDb25zdGFudHMuS0VZX0VOVEVSKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5kYXRlID0gVXRpbHMuYWRkTW9udGhzKF90aGlzLmRhdGUsIDEpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBuYXZCdXR0b25zLmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcbiAgICAgICAgbWluaUNhbGVuZGFySGVhZGVyLmFwcGVuZENoaWxkKG5hdkJ1dHRvbnMpO1xyXG4gICAgICAgIF90aGlzLl9yb290Q29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgX3RoaXMuX3Jvb3RDb250YWluZXJFbGVtZW50LmNsYXNzTmFtZSA9IFwibXMtY3RybCBtcy1jdHJsLWNhbGVuZGFyXCI7XHJcbiAgICAgICAgX3RoaXMuX3Jvb3RDb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKG1pbmlDYWxlbmRhckhlYWRlcik7XHJcbiAgICAgICAgX3RoaXMuX3Jvb3RDb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKF90aGlzLl9taW5pQ2FsZW5kYXJFbGVtZW50KTtcclxuICAgICAgICBfdGhpcy5kYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBDYWxlbmRhci5wcm90b3R5cGUuZ2VuZXJhdGVEYXlDZWxscyA9IGZ1bmN0aW9uIChiYXNlRGF0ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5fZGF5cyA9IFtdO1xyXG4gICAgICAgIHZhciBpbnB1dE1vbnRoID0gYmFzZURhdGUuZ2V0TW9udGgoKTtcclxuICAgICAgICB2YXIgaW5wdXRZZWFyID0gYmFzZURhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICB2YXIgc3RhcnQgPSBuZXcgRGF0ZShpbnB1dFllYXIsIGlucHV0TW9udGgsIDEpO1xyXG4gICAgICAgIHZhciBlbmQgPSBuZXcgRGF0ZShpbnB1dFllYXIsIGlucHV0TW9udGgsIFV0aWxzLmRheXNJbk1vbnRoKGlucHV0WWVhciwgaW5wdXRNb250aCkpO1xyXG4gICAgICAgIHZhciBzdGFydERhdGVEYXlPZldlZWsgPSBzdGFydC5nZXREYXkoKTtcclxuICAgICAgICBpZiAoKHN0YXJ0RGF0ZURheU9mV2VlayAtIFV0aWxzLkNhbGVuZGFyU2V0dGluZ3MuZmlyc3REYXlPZldlZWspID4gMCkge1xyXG4gICAgICAgICAgICBzdGFydCA9IFV0aWxzLmFkZERheXMoc3RhcnQsIFV0aWxzLkNhbGVuZGFyU2V0dGluZ3MuZmlyc3REYXlPZldlZWsgLSBzdGFydERhdGVEYXlPZldlZWspO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZW5kRGF0ZURheU9mV2VlayA9IGVuZC5nZXREYXkoKTtcclxuICAgICAgICB2YXIgbGFzdERheU9mV2VlayA9IFV0aWxzLkNhbGVuZGFyU2V0dGluZ3MuZmlyc3REYXlPZldlZWsgKyA2O1xyXG4gICAgICAgIGlmICgobGFzdERheU9mV2VlayAtIGVuZERhdGVEYXlPZldlZWspID4gMCkge1xyXG4gICAgICAgICAgICBlbmQgPSBVdGlscy5hZGREYXlzKGVuZCwgbGFzdERheU9mV2VlayAtIGVuZERhdGVEYXlPZldlZWspO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZW5kRGF0ZSA9IGVuZC5nZXREYXRlKCk7XHJcbiAgICAgICAgdmFyIGVuZE1vbnRoID0gZW5kLmdldE1vbnRoKCk7XHJcbiAgICAgICAgdmFyIGVuZFllYXIgPSBlbmQuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIHZhciBkYXlDZWxsID0gbmV3IERheUNlbGwoc3RhcnQpO1xyXG4gICAgICAgICAgICBkYXlDZWxsLm9uU2VsZWN0ZWQgPSBmdW5jdGlvbiAoY2xpY2tlZENlbGwpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNlbGVjdGVkRGF5Q2VsbCA9IGNsaWNrZWRDZWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLm9uRGF0ZUNoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbkRhdGVDaGFuZ2VkKF90aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5fZGF5cy5wdXNoKGRheUNlbGwpO1xyXG4gICAgICAgICAgICB2YXIgZG9uZSA9IHN0YXJ0LmdldERhdGUoKSA9PSBlbmREYXRlICYmIHN0YXJ0LmdldE1vbnRoKCkgPT0gZW5kTW9udGggJiYgc3RhcnQuZ2V0RnVsbFllYXIoKSA9PSBlbmRZZWFyO1xyXG4gICAgICAgICAgICBzdGFydCA9IFV0aWxzLmFkZERheXMoc3RhcnQsIDEpO1xyXG4gICAgICAgIH0gd2hpbGUgKCFkb25lKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2FsZW5kYXIucHJvdG90eXBlLCBcInNlbGVjdGVkRGF5Q2VsbFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZERheTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zZWxlY3RlZERheSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWREYXkuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkRGF5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zZWxlY3RlZERheSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWREYXkuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRlID0gdGhpcy5fc2VsZWN0ZWREYXkuZGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQ2FsZW5kYXIucHJvdG90eXBlLmluaXRpYWxpemVTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RhdGUpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9kYXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoVXRpbHMuYXJlRGF0ZXNFcXVhbCh0aGlzLl9kYXlzW2ldLmRhdGUsIHRoaXMuZGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF5Q2VsbCA9IHRoaXMuX2RheXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ2FsZW5kYXIucHJvdG90eXBlLnJlYnVpbGRNaW5pQ2FsZW5kYXIgPSBmdW5jdGlvbiAobmV3RGF0ZSwgb2xkRGF0ZSkge1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVEYXlDZWxscyhuZXdEYXRlKTtcclxuICAgICAgICB2YXIgbW9udGggPSBuZXdEYXRlLmdldE1vbnRoKCk7XHJcbiAgICAgICAgdGhpcy5fbWluaUNhbGVuZGFyRWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuX21pbmlDYWxlbmRhckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1zLWN0cmwtc2xpZGVcIiwgXCJtcy1jdHJsLXNsaWRlTGVmdFRvUmlnaHRcIiwgXCJtcy1jdHJsLXNsaWRlUmlnaHRUb0xlZnRcIik7XHJcbiAgICAgICAgdmFyIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuICAgICAgICB2YXIgZGF5SW5kZXggPSBVdGlscy5DYWxlbmRhclNldHRpbmdzLmZpcnN0RGF5T2ZXZWVrO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVXRpbHMuQ2FsZW5kYXJTZXR0aW5ncy5kYXlzSW5XZWVrOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgICAgICAgICAgIGNlbGwuY2xhc3NOYW1lID0gXCJtcy1jdHJsIG1zLWN0cmwtY2FsZW5kYXJEYXlIZWFkZXJcIjtcclxuICAgICAgICAgICAgY2VsbC5pbm5lclRleHQgPSBVdGlscy5DYWxlbmRhclNldHRpbmdzLmdldEluaXRpYWxEYXlOYW1lKGRheUluZGV4KTtcclxuICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGwpO1xyXG4gICAgICAgICAgICBkYXlJbmRleCsrO1xyXG4gICAgICAgICAgICBpZiAoZGF5SW5kZXggPj0gVXRpbHMuQ2FsZW5kYXJTZXR0aW5ncy5kYXlzSW5XZWVrKSB7XHJcbiAgICAgICAgICAgICAgICBkYXlJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbWluaUNhbGVuZGFyRWxlbWVudC5hcHBlbmRDaGlsZChyb3cpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fZGF5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaSAlIDcgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWluaUNhbGVuZGFyRWxlbWVudC5hcHBlbmRDaGlsZChyb3cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciB0YWJsZUNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgICAgICAgICAgIHRhYmxlQ2VsbC5hcHBlbmRDaGlsZCh0aGlzLl9kYXlzW2ldLnJlbmRlcigpKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RheXNbaV0uZGF0ZS5nZXRNb250aCgpICE9IG1vbnRoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kYXlzW2ldLmlzU3ViZHVlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKHRhYmxlQ2VsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvbGREYXRlKSB7XHJcbiAgICAgICAgICAgIHZhciB0aW1lRGVsdGEgPSBuZXdEYXRlLmdldFRpbWUoKSAtIG9sZERhdGUuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICBpZiAodGltZURlbHRhID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWluaUNhbGVuZGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibXMtY3RybC1zbGlkZVwiLCBcIm1zLWN0cmwtc2xpZGVSaWdodFRvTGVmdFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0aW1lRGVsdGEgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9taW5pQ2FsZW5kYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtcy1jdHJsLXNsaWRlXCIsIFwibXMtY3RybC1zbGlkZUxlZnRUb1JpZ2h0XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENhbGVuZGFyLnByb3RvdHlwZS5hdHRhY2ggPSBmdW5jdGlvbiAocm9vdEVsZW1lbnQpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmF0dGFjaC5jYWxsKHRoaXMsIHJvb3RFbGVtZW50KTtcclxuICAgICAgICByb290RWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHJvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3Jvb3RDb250YWluZXJFbGVtZW50KTtcclxuICAgIH07XHJcbiAgICBDYWxlbmRhci5wcm90b3R5cGUuZm9jdXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3NlbGVjdGVkRGF5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkRGF5LmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYWxlbmRhci5wcm90b3R5cGUsIFwiZGF0ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kYXRlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIHJlYnVpbGROZWVkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB2YXIgdGltZURlbHRhID0gMDtcclxuICAgICAgICAgICAgdmFyIG5ld0RhdGUgPSB2YWx1ZSA/IHZhbHVlIDogbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RhdGUpIHtcclxuICAgICAgICAgICAgICAgIHJlYnVpbGROZWVkZWQgPSAhdGhpcy5fZGF5cyB8fCBuZXdEYXRlLmdldEZ1bGxZZWFyKCkgIT0gdGhpcy5fZGF0ZS5nZXRGdWxsWWVhcigpIHx8IG5ld0RhdGUuZ2V0TW9udGgoKSAhPSB0aGlzLl9kYXRlLmdldE1vbnRoKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHJlYnVpbGROZWVkZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVidWlsZE1pbmlDYWxlbmRhcihuZXdEYXRlLCB0aGlzLl9kYXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9kYXRlID0gbmV3RGF0ZTtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21vbnRoWWVhckxhYmVsRWxlbWVudC5pbm5lclRleHQgPSBVdGlscy5DYWxlbmRhclNldHRpbmdzLmdldExvbmdNb250aE5hbWUodGhpcy5fZGF0ZS5nZXRNb250aCgpKSArIFwiIFwiICsgdGhpcy5fZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIENhbGVuZGFyO1xyXG59KGlucHV0Y29udHJvbF8xLklucHV0Q29udHJvbCkpO1xyXG5leHBvcnRzLkNhbGVuZGFyID0gQ2FsZW5kYXI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhbGVuZGFyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG52YXIgQ29uc3RhbnRzID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xyXG52YXIgaW5wdXRjb250cm9sXzEgPSByZXF1aXJlKFwiLi9pbnB1dGNvbnRyb2xcIik7XHJcbnZhciBDaGVja0JveCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhDaGVja0JveCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIENoZWNrQm94KCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLl9sYWJlbCA9IFwiXCI7XHJcbiAgICAgICAgX3RoaXMuX2NoZWNrYm94RWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMuX3NwYW5FbGVtZW50ID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBDaGVja0JveC5jcmVhdGVJZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gQ2hlY2tCb3guY3JlYXRpb25JbmRleDtcclxuICAgICAgICBDaGVja0JveC5jcmVhdGlvbkluZGV4Kys7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBDaGVja0JveC5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5vbkNoYW5nZSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDaGVja0JveC5wcm90b3R5cGUua2V5RG93biA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgc3dpdGNoIChlLmtleUNvZGUpIHtcclxuICAgICAgICAgICAgY2FzZSBDb25zdGFudHMuS0VZX0VOVEVSOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0NoZWNrZWQgPSAhdGhpcy5pc0NoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ2hlY2tCb3gucHJvdG90eXBlLmF0dGFjaCA9IGZ1bmN0aW9uIChyb290RWxlbWVudCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hdHRhY2guY2FsbCh0aGlzLCByb290RWxlbWVudCk7XHJcbiAgICAgICAgcm9vdEVsZW1lbnQuY2xhc3NOYW1lID0gXCJtcy1jdHJsIG1zLWN0cmwtY2hlY2tib3hcIjtcclxuICAgICAgICByb290RWxlbWVudC50YWJJbmRleCA9IDA7XHJcbiAgICAgICAgdmFyIGxhYmVsQXR0cmlidXRlID0gcm9vdEVsZW1lbnQuYXR0cmlidXRlc1tcImxhYmVsXCJdO1xyXG4gICAgICAgIGlmIChsYWJlbEF0dHJpYnV0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9sYWJlbCA9IGxhYmVsQXR0cmlidXRlLnZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaXNDaGVja2VkQXR0cmlidXRlID0gcm9vdEVsZW1lbnQuYXR0cmlidXRlc1tcImlzY2hlY2tlZFwiXTtcclxuICAgICAgICBpZiAoaXNDaGVja2VkQXR0cmlidXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzQ2hlY2tlZCA9IGlzQ2hlY2tlZEF0dHJpYnV0ZS52YWx1ZSA9PT0gXCJ0cnVlXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2NoZWNrYm94RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICB0aGlzLl9jaGVja2JveEVsZW1lbnQuaWQgPSBcIm1zLWN0cmwtY2hlY2tib3gtXCIgKyBDaGVja0JveC5jcmVhdGVJZCgpO1xyXG4gICAgICAgIHRoaXMuX2NoZWNrYm94RWxlbWVudC50eXBlID0gXCJjaGVja2JveFwiO1xyXG4gICAgICAgIHRoaXMuX2NoZWNrYm94RWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgICB0aGlzLl9jaGVja2JveEVsZW1lbnQuY2hlY2tlZCA9IHRoaXMuaXNDaGVja2VkO1xyXG4gICAgICAgIHRoaXMuX2NoZWNrYm94RWxlbWVudC5vbmNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7IF90aGlzLmNoYW5nZWQoKTsgfTtcclxuICAgICAgICB2YXIgbGFiZWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xyXG4gICAgICAgIGxhYmVsRWxlbWVudC5odG1sRm9yID0gdGhpcy5fY2hlY2tib3hFbGVtZW50LmlkO1xyXG4gICAgICAgIHRoaXMuX3NwYW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgdGhpcy5fc3BhbkVsZW1lbnQuaW5uZXJUZXh0ID0gdGhpcy5fbGFiZWw7XHJcbiAgICAgICAgbGFiZWxFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3NwYW5FbGVtZW50KTtcclxuICAgICAgICByb290RWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHJvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2NoZWNrYm94RWxlbWVudCk7XHJcbiAgICAgICAgcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQobGFiZWxFbGVtZW50KTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2hlY2tCb3gucHJvdG90eXBlLCBcImxhYmVsXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xhYmVsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fbGFiZWwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3NwYW5FbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zcGFuRWxlbWVudC5pbm5lclRleHQgPSB0aGlzLl9sYWJlbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENoZWNrQm94LnByb3RvdHlwZSwgXCJpc0NoZWNrZWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXNDaGVja2VkO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2lzQ2hlY2tlZCAhPSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faXNDaGVja2VkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fY2hlY2tib3hFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tib3hFbGVtZW50LmNoZWNrZWQgPSB0aGlzLl9pc0NoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLy8gVXNlZCB0byBnZW5lcmF0ZSB1bmlxdWUgSWRzXHJcbiAgICBDaGVja0JveC5jcmVhdGlvbkluZGV4ID0gMDtcclxuICAgIHJldHVybiBDaGVja0JveDtcclxufShpbnB1dGNvbnRyb2xfMS5JbnB1dENvbnRyb2wpKTtcclxuZXhwb3J0cy5DaGVja0JveCA9IENoZWNrQm94O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaGVja2JveC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG52YXIgQ29sbGVjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENvbGxlY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMgPSBbXTtcclxuICAgICAgICB0aGlzLm9uSXRlbUFkZGVkID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9uSXRlbVJlbW92ZWQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zW2luZGV4XTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgaWYgKHRoaXMub25JdGVtQWRkZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkl0ZW1BZGRlZChpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICB2YXIgaSA9IHRoaXMuX2l0ZW1zLmluZGV4T2YoaXRlbSk7XHJcbiAgICAgICAgaWYgKGkgPj0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl9pdGVtcyA9IHRoaXMuX2l0ZW1zLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMub25JdGVtUmVtb3ZlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkl0ZW1SZW1vdmVkKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pdGVtcy5pbmRleE9mKGl0ZW0pO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb2xsZWN0aW9uLnByb3RvdHlwZSwgXCJsZW5ndGhcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXRlbXMubGVuZ3RoO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIENvbGxlY3Rpb247XHJcbn0oKSk7XHJcbmV4cG9ydHMuQ29sbGVjdGlvbiA9IENvbGxlY3Rpb247XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbGxlY3Rpb24uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuZXhwb3J0cy5LRVlfVEFCID0gOTtcclxuZXhwb3J0cy5LRVlfRU5URVIgPSAxMztcclxuZXhwb3J0cy5LRVlfRVNDQVBFID0gMjc7XHJcbmV4cG9ydHMuS0VZX1VQID0gMzg7XHJcbmV4cG9ydHMuS0VZX0RPV04gPSA0MDtcclxuZXhwb3J0cy5LRVlfREVMRVRFID0gNDY7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnN0YW50cy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxudmFyIGlucHV0d2l0aHBvcHVwXzEgPSByZXF1aXJlKFwiLi9pbnB1dHdpdGhwb3B1cFwiKTtcclxudmFyIGNhbGVuZGFyXzEgPSByZXF1aXJlKFwiLi9jYWxlbmRhclwiKTtcclxudmFyIENhbGVuZGFyUG9wdXBDb250cm9sID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKENhbGVuZGFyUG9wdXBDb250cm9sLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ2FsZW5kYXJQb3B1cENvbnRyb2wob3duZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLl9vd25lciA9IG93bmVyO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIENhbGVuZGFyUG9wdXBDb250cm9sLnByb3RvdHlwZS5yZW5kZXJDb250ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gXCJtcy1jdHJsIG1zLWNhbGVuZGFyUG9wdXBcIjtcclxuICAgICAgICB0aGlzLl9jYWxlbmRhciA9IG5ldyBjYWxlbmRhcl8xLkNhbGVuZGFyKCk7XHJcbiAgICAgICAgdGhpcy5fY2FsZW5kYXIuZGF0ZSA9IHRoaXMuX293bmVyLnZhbHVlO1xyXG4gICAgICAgIHRoaXMuX2NhbGVuZGFyLm9uRGF0ZUNoYW5nZWQgPSBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICBfdGhpcy5fb3duZXIudmFsdWUgPSBjLmRhdGU7XHJcbiAgICAgICAgICAgIF90aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLl9jYWxlbmRhci5hdHRhY2goZWxlbWVudCk7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9O1xyXG4gICAgQ2FsZW5kYXJQb3B1cENvbnRyb2wucHJvdG90eXBlLmZvY3VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9jYWxlbmRhcikge1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxlbmRhci5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gQ2FsZW5kYXJQb3B1cENvbnRyb2w7XHJcbn0oaW5wdXR3aXRocG9wdXBfMS5Qb3B1cENvbnRyb2wpKTtcclxuZXhwb3J0cy5DYWxlbmRhclBvcHVwQ29udHJvbCA9IENhbGVuZGFyUG9wdXBDb250cm9sO1xyXG52YXIgRGF0ZVBpY2tlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhEYXRlUGlja2VyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRGF0ZVBpY2tlcigpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBEYXRlUGlja2VyLnByb3RvdHlwZS52YWxpZGF0ZVJvb3RFbGVtZW50ID0gZnVuY3Rpb24gKHJvb3RFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKCEocm9vdEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRGl2RWxlbWVudCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGF0ZVBpY2tlciByZXF1aXJlcyBhIERJViBlbGVtZW50IGFzIGl0cyByb290LlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRGF0ZVBpY2tlci5wcm90b3R5cGUuY3JlYXRlUG9wdXBDb250cm9sID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ2FsZW5kYXJQb3B1cENvbnRyb2wodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgRGF0ZVBpY2tlci5wcm90b3R5cGUuZ2V0VmFsdWVBc1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuICAgIH07XHJcbiAgICBEYXRlUGlja2VyLnByb3RvdHlwZS5nZXRDc3NDbGFzc05hbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwibXMtY3RybCBtcy1jdHJsLWRhdGVQaWNrZXJcIjtcclxuICAgIH07XHJcbiAgICBEYXRlUGlja2VyLnByb3RvdHlwZS5nZXRCdXR0b25JY29uQ3NzQ2xhc3NOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcIm1zLWljb24tY2FsZW5kYXJcIjtcclxuICAgIH07XHJcbiAgICBEYXRlUGlja2VyLnByb3RvdHlwZS5wb3B1cCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnBvcHVwLmNhbGwodGhpcyk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9wdXBDb250cm9sLmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBEYXRlUGlja2VyO1xyXG59KGlucHV0d2l0aHBvcHVwXzEuSW5wdXRXaXRoUG9wdXApKTtcclxuZXhwb3J0cy5EYXRlUGlja2VyID0gRGF0ZVBpY2tlcjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0ZXBpY2tlci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxudmFyIENvbnN0YW50cyA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcclxudmFyIGNvbGxlY3Rpb25fMSA9IHJlcXVpcmUoXCIuL2NvbGxlY3Rpb25cIik7XHJcbnZhciBpbnB1dHdpdGhwb3B1cF8xID0gcmVxdWlyZShcIi4vaW5wdXR3aXRocG9wdXBcIik7XHJcbnZhciBEcm9wRG93bkl0ZW0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEcm9wRG93bkl0ZW0oa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xyXG4gICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBEcm9wRG93bkl0ZW0ucHJvdG90eXBlLmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9uQ2xpY2spIHtcclxuICAgICAgICAgICAgdGhpcy5vbkNsaWNrKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEcm9wRG93bkl0ZW0ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xyXG4gICAgfTtcclxuICAgIERyb3BEb3duSXRlbS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9lbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc05hbWUgPSBcIm1zLWN0cmwgbXMtY3RybC1kcm9wZG93bi1pdGVtXCI7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQuaW5uZXJUZXh0ID0gdGhpcy52YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5vbm1vdXNldXAgPSBmdW5jdGlvbiAoZSkgeyBfdGhpcy5jbGljaygpOyB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRHJvcERvd25JdGVtLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9lbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50LmlubmVyVGV4dCA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gRHJvcERvd25JdGVtO1xyXG59KCkpO1xyXG5leHBvcnRzLkRyb3BEb3duSXRlbSA9IERyb3BEb3duSXRlbTtcclxudmFyIERyb3BEb3duUG9wdXBDb250cm9sID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKERyb3BEb3duUG9wdXBDb250cm9sLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRHJvcERvd25Qb3B1cENvbnRyb2wob3duZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLl9yZW5kZXJlZEl0ZW1zID0gW107XHJcbiAgICAgICAgX3RoaXMuX3NlbGVjdGVkSW5kZXggPSAtMTtcclxuICAgICAgICBfdGhpcy5fb3duZXIgPSBvd25lcjtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBEcm9wRG93blBvcHVwQ29udHJvbC5wcm90b3R5cGUucmVuZGVyQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBcIm1zLWN0cmwgbXMtcG9wdXBcIjtcclxuICAgICAgICB2YXIgc2VsZWN0ZWRJbmRleCA9IHRoaXMuX293bmVyLnNlbGVjdGVkSW5kZXg7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9vd25lci5pdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcmVuZGVyZWRJdGVtID0gdGhpcy5fb3duZXIuaXRlbXMuZ2V0KGkpLnJlbmRlcigpO1xyXG4gICAgICAgICAgICByZW5kZXJlZEl0ZW0udGFiSW5kZXggPSAwO1xyXG4gICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKHJlbmRlcmVkSXRlbSk7XHJcbiAgICAgICAgICAgIGlmIChpID09IHNlbGVjdGVkSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHJlbmRlcmVkSXRlbS5mb2N1cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMucHVzaChyZW5kZXJlZEl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH07XHJcbiAgICBEcm9wRG93blBvcHVwQ29udHJvbC5wcm90b3R5cGUua2V5RG93biA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5rZXlEb3duLmNhbGwodGhpcywgZSk7XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkSXRlbUluZGV4ID0gdGhpcy5fc2VsZWN0ZWRJbmRleDtcclxuICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xyXG4gICAgICAgICAgICBjYXNlIENvbnN0YW50cy5LRVlfVEFCOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ29uc3RhbnRzLktFWV9FTlRFUjpcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLnNlbGVjdGVkSW5kZXggPSB0aGlzLnNlbGVjdGVkSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ29uc3RhbnRzLktFWV9VUDpcclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZEl0ZW1JbmRleCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtSW5kZXggPSB0aGlzLl9yZW5kZXJlZEl0ZW1zLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW1JbmRleC0tO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZEl0ZW1JbmRleCA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtSW5kZXggPSB0aGlzLl9yZW5kZXJlZEl0ZW1zLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gc2VsZWN0ZWRJdGVtSW5kZXg7XHJcbiAgICAgICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDb25zdGFudHMuS0VZX0RPV046XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRJdGVtSW5kZXggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtSW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRJdGVtSW5kZXggPj0gdGhpcy5fcmVuZGVyZWRJdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IHNlbGVjdGVkSXRlbUluZGV4O1xyXG4gICAgICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERyb3BEb3duUG9wdXBDb250cm9sLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAocm9vdEVsZW1lbnRCb3VuZHMpIHtcclxuICAgICAgICB2YXIgcmVuZGVyZWRFbGVtZW50ID0gX3N1cGVyLnByb3RvdHlwZS5yZW5kZXIuY2FsbCh0aGlzLCByb290RWxlbWVudEJvdW5kcyk7XHJcbiAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLm1pbldpZHRoID0gKHJvb3RFbGVtZW50Qm91bmRzLndpZHRoIC8gMikgKyBcInB4XCI7XHJcbiAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLm1heFdpZHRoID0gcm9vdEVsZW1lbnRCb3VuZHMud2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgcmV0dXJuIHJlbmRlcmVkRWxlbWVudDtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRHJvcERvd25Qb3B1cENvbnRyb2wucHJvdG90eXBlLCBcInNlbGVjdGVkSW5kZXhcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWRJbmRleDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5fcmVuZGVyZWRJdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkSXRlbXNbaW5kZXhdLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RlZEluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBEcm9wRG93blBvcHVwQ29udHJvbDtcclxufShpbnB1dHdpdGhwb3B1cF8xLlBvcHVwQ29udHJvbCkpO1xyXG5leHBvcnRzLkRyb3BEb3duUG9wdXBDb250cm9sID0gRHJvcERvd25Qb3B1cENvbnRyb2w7XHJcbnZhciBEcm9wRG93biA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhEcm9wRG93biwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIERyb3BEb3duKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuX2l0ZW1zID0gbmV3IGNvbGxlY3Rpb25fMS5Db2xsZWN0aW9uKCk7XHJcbiAgICAgICAgX3RoaXMuX2l0ZW1zLm9uSXRlbUFkZGVkID0gZnVuY3Rpb24gKGl0ZW0pIHsgaXRlbS5vbkNsaWNrID0gZnVuY3Rpb24gKGNsaWNrZWRJdGVtKSB7IF90aGlzLml0ZW1DbGlja2VkKGNsaWNrZWRJdGVtKTsgfTsgfTtcclxuICAgICAgICBfdGhpcy5faXRlbXMub25JdGVtUmVtb3ZlZCA9IGZ1bmN0aW9uIChpdGVtKSB7IGl0ZW0ub25DbGljayA9IG51bGw7IH07XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgRHJvcERvd24ucHJvdG90eXBlLml0ZW1DbGlja2VkID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IGl0ZW07XHJcbiAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgdGhpcy5yb290RWxlbWVudC5mb2N1cygpO1xyXG4gICAgfTtcclxuICAgIERyb3BEb3duLnByb3RvdHlwZS52YWxpZGF0ZVJvb3RFbGVtZW50ID0gZnVuY3Rpb24gKHJvb3RFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKCEocm9vdEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRGl2RWxlbWVudCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRHJvcERvd24gcmVxdWlyZXMgYSBESVYgZWxlbWVudCBhcyBpdHMgcm9vdC5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERyb3BEb3duLnByb3RvdHlwZS5jcmVhdGVQb3B1cENvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEcm9wRG93blBvcHVwQ29udHJvbCh0aGlzKTtcclxuICAgIH07XHJcbiAgICBEcm9wRG93bi5wcm90b3R5cGUuZ2V0Q3NzQ2xhc3NOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcIm1zLWN0cmwgbXMtY3RybC1kcm9wZG93blwiO1xyXG4gICAgfTtcclxuICAgIERyb3BEb3duLnByb3RvdHlwZS5hdHRhY2ggPSBmdW5jdGlvbiAocm9vdEVsZW1lbnQpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmF0dGFjaC5jYWxsKHRoaXMsIHJvb3RFbGVtZW50KTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucm9vdEVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkRWxlbWVudCA9IHRoaXMucm9vdEVsZW1lbnQuY2hpbGRyZW5baV07XHJcbiAgICAgICAgICAgIGlmIChjaGlsZEVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09IFwibXMtZHJvcGRvd24taXRlbVwiKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IG5ldyBEcm9wRG93bkl0ZW0oY2hpbGRFbGVtZW50LmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwia2V5XCIpLnZhbHVlLCBjaGlsZEVsZW1lbnQuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJ2YWx1ZVwiKS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pdGVtcy5hZGQoaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRHJvcERvd24ucHJvdG90eXBlLnBvcHVwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucG9wdXAuY2FsbCh0aGlzKTtcclxuICAgICAgICB0aGlzLnBvcHVwQ29udHJvbC5zZWxlY3RlZEluZGV4ID0gdGhpcy5zZWxlY3RlZEluZGV4O1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEcm9wRG93bi5wcm90b3R5cGUsIFwiaXRlbXNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXRlbXM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRHJvcERvd24ucHJvdG90eXBlLCBcInNlbGVjdGVkSXRlbVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERyb3BEb3duLnByb3RvdHlwZSwgXCJzZWxlY3RlZEluZGV4XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMuaW5kZXhPZih0aGlzLnZhbHVlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwICYmIHRoaXMuaXRlbXMubGVuZ3RoID4gaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gdGhpcy5pdGVtcy5nZXQoaW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gRHJvcERvd247XHJcbn0oaW5wdXR3aXRocG9wdXBfMS5JbnB1dFdpdGhQb3B1cCkpO1xyXG5leHBvcnRzLkRyb3BEb3duID0gRHJvcERvd247XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRyb3Bkb3duLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbnZhciBEYXlPZldlZWs7XHJcbihmdW5jdGlvbiAoRGF5T2ZXZWVrKSB7XHJcbiAgICBEYXlPZldlZWtbRGF5T2ZXZWVrW1wiU3VuZGF5XCJdID0gMF0gPSBcIlN1bmRheVwiO1xyXG4gICAgRGF5T2ZXZWVrW0RheU9mV2Vla1tcIk1vbmRheVwiXSA9IDFdID0gXCJNb25kYXlcIjtcclxuICAgIERheU9mV2Vla1tEYXlPZldlZWtbXCJUdWVzZGF5XCJdID0gMl0gPSBcIlR1ZXNkYXlcIjtcclxuICAgIERheU9mV2Vla1tEYXlPZldlZWtbXCJXZWRuZXNkYXlcIl0gPSAzXSA9IFwiV2VkbmVzZGF5XCI7XHJcbiAgICBEYXlPZldlZWtbRGF5T2ZXZWVrW1wiVGh1cnNkYXlcIl0gPSA0XSA9IFwiVGh1cnNkYXlcIjtcclxuICAgIERheU9mV2Vla1tEYXlPZldlZWtbXCJGcmlkYXlcIl0gPSA1XSA9IFwiRnJpZGF5XCI7XHJcbiAgICBEYXlPZldlZWtbRGF5T2ZXZWVrW1wiU2F0dXJkYXlcIl0gPSA2XSA9IFwiU2F0dXJkYXlcIjtcclxufSkoRGF5T2ZXZWVrID0gZXhwb3J0cy5EYXlPZldlZWsgfHwgKGV4cG9ydHMuRGF5T2ZXZWVrID0ge30pKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW51bXMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxudmFyIElucHV0Q29udHJvbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIElucHV0Q29udHJvbCgpIHtcclxuICAgIH1cclxuICAgIElucHV0Q29udHJvbC5wcm90b3R5cGUudmFsaWRhdGVSb290RWxlbWVudCA9IGZ1bmN0aW9uIChyb290RWxlbWVudCkge1xyXG4gICAgICAgIC8vIERvIG5vdGhpbmcgLSBhbGwgcm9vdCBlbGVtZW50IHR5cGVzIGFyZSB2YWxpZC5cclxuICAgIH07XHJcbiAgICBJbnB1dENvbnRyb2wucHJvdG90eXBlLmtleURvd24gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIC8vIERvIG5vdGhpbmcgaW4gYmFzZSBpbXBsZW1lbnRhdGlvblxyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnB1dENvbnRyb2wucHJvdG90eXBlLCBcInJvb3RFbGVtZW50XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Jvb3RFbGVtZW50O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgSW5wdXRDb250cm9sLnByb3RvdHlwZS5hdHRhY2ggPSBmdW5jdGlvbiAocm9vdEVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGVSb290RWxlbWVudChyb290RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fcm9vdEVsZW1lbnQgPSByb290RWxlbWVudDtcclxuICAgICAgICB0aGlzLl9yb290RWxlbWVudC5vbmtleWRvd24gPSBmdW5jdGlvbiAoZSkgeyBfdGhpcy5rZXlEb3duKGUpOyB9O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBJbnB1dENvbnRyb2w7XHJcbn0oKSk7XHJcbmV4cG9ydHMuSW5wdXRDb250cm9sID0gSW5wdXRDb250cm9sO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnB1dGNvbnRyb2wuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbnZhciBDb25zdGFudHMgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XHJcbnZhciBVdGlscyA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xyXG52YXIgaW5wdXRjb250cm9sXzEgPSByZXF1aXJlKFwiLi9pbnB1dGNvbnRyb2xcIik7XHJcbnZhciBQb3B1cENvbnRyb2wgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQb3B1cENvbnRyb2woKSB7XHJcbiAgICB9XHJcbiAgICBQb3B1cENvbnRyb2wucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9uQ2xvc2UpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkNsb3NlKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQb3B1cENvbnRyb2wucHJvdG90eXBlLmtleURvd24gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ29uc3RhbnRzLktFWV9FU0NBUEU6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUG9wdXBDb250cm9sLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAocm9vdEVsZW1lbnRCb3VuZHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnRhYkluZGV4ID0gMDtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NOYW1lID0gXCJtcy1jdHJsIG1zLWN0cmwtcG9wdXAtY29udGFpbmVyXCI7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50Lm9ua2V5ZG93biA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmtleURvd24oZSk7XHJcbiAgICAgICAgICAgIHJldHVybiAhZS5jYW5jZWxCdWJibGU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJDb250ZW50KCkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wb3B1cEVsZW1lbnQ7XHJcbiAgICB9O1xyXG4gICAgUG9wdXBDb250cm9sLnByb3RvdHlwZS5mb2N1cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5fcG9wdXBFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gUG9wdXBDb250cm9sO1xyXG59KCkpO1xyXG5leHBvcnRzLlBvcHVwQ29udHJvbCA9IFBvcHVwQ29udHJvbDtcclxudmFyIElucHV0V2l0aFBvcHVwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKElucHV0V2l0aFBvcHVwLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gSW5wdXRXaXRoUG9wdXAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgSW5wdXRXaXRoUG9wdXAucHJvdG90eXBlLmtleURvd24gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ29uc3RhbnRzLktFWV9FTlRFUjpcclxuICAgICAgICAgICAgICAgIHRoaXMucG9wdXAoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbnB1dFdpdGhQb3B1cC5wcm90b3R5cGUudXBkYXRlTGFiZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2xhYmVsRWxlbWVudCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xhYmVsRWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLmdldFZhbHVlQXNTdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xhYmVsRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicGxhY2Vob2xkZXJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9sYWJlbEVsZW1lbnQuaW5uZXJUZXh0ID0gdGhpcy5fcGxhY2Vob2xkZXJUZXh0ID8gdGhpcy5fcGxhY2Vob2xkZXJUZXh0IDogXCJcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xhYmVsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicGxhY2Vob2xkZXJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KElucHV0V2l0aFBvcHVwLnByb3RvdHlwZSwgXCJwb3B1cENvbnRyb2xcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcG9wdXBDb250cm9sO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgSW5wdXRXaXRoUG9wdXAucHJvdG90eXBlLmdldEJ1dHRvbkljb25Dc3NDbGFzc05hbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwibXMtaWNvbi1jaGV2cm9uRG93blwiO1xyXG4gICAgfTtcclxuICAgIElucHV0V2l0aFBvcHVwLnByb3RvdHlwZS5nZXRWYWx1ZUFzU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl92YWx1ZS50b1N0cmluZygpO1xyXG4gICAgfTtcclxuICAgIElucHV0V2l0aFBvcHVwLnByb3RvdHlwZS52YWx1ZUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub25WYWx1ZUNoYW5nZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vblZhbHVlQ2hhbmdlZCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW5wdXRXaXRoUG9wdXAucHJvdG90eXBlLmF0dGFjaCA9IGZ1bmN0aW9uIChyb290RWxlbWVudCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hdHRhY2guY2FsbCh0aGlzLCByb290RWxlbWVudCk7XHJcbiAgICAgICAgcm9vdEVsZW1lbnQudGFiSW5kZXggPSAwO1xyXG4gICAgICAgIHJvb3RFbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuZ2V0Q3NzQ2xhc3NOYW1lKCk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZnVuY3Rpb24gKGUpIHsgX3RoaXMuY2xvc2VQb3B1cCgpOyB9KTtcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuX2lzT3Blbikge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY2xvc2VQb3B1cCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucG9wdXAoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHBsYWNlSG9sZGVyRG9tSXRlbSA9IHRoaXMucm9vdEVsZW1lbnQuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJwbGFjZWhvbGRlclwiKTtcclxuICAgICAgICBpZiAocGxhY2VIb2xkZXJEb21JdGVtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BsYWNlaG9sZGVyVGV4dCA9IHBsYWNlSG9sZGVyRG9tSXRlbS52YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbGFiZWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgdGhpcy5fbGFiZWxFbGVtZW50LmNsYXNzTmFtZSA9IFwibXMtY3RybCBtcy1kcm9wZG93bi1sYWJlbFwiO1xyXG4gICAgICAgIHRoaXMuX2Ryb3BEb3duQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpXCIpO1xyXG4gICAgICAgIHRoaXMuX2Ryb3BEb3duQnV0dG9uRWxlbWVudC5jbGFzc05hbWUgPSBcIm1zLWljb24gbXMtY3RybC1kcm9wZG93bi1idXR0b24gXCIgKyB0aGlzLmdldEJ1dHRvbkljb25Dc3NDbGFzc05hbWUoKTtcclxuICAgICAgICA7XHJcbiAgICAgICAgdGhpcy5yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9sYWJlbEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMucm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fZHJvcERvd25CdXR0b25FbGVtZW50KTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUxhYmVsKCk7XHJcbiAgICB9O1xyXG4gICAgSW5wdXRXaXRoUG9wdXAucHJvdG90eXBlLnBvcHVwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pc09wZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5fb3ZlcmxheUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICB0aGlzLl9vdmVybGF5RWxlbWVudC5jbGFzc05hbWUgPSBcIm1zLWN0cmwtb3ZlcmxheVwiO1xyXG4gICAgICAgICAgICB0aGlzLl9vdmVybGF5RWxlbWVudC50YWJJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuX292ZXJsYXlFbGVtZW50LnN0eWxlLndpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICB0aGlzLl9vdmVybGF5RWxlbWVudC5zdHlsZS5oZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICB0aGlzLl9vdmVybGF5RWxlbWVudC5vbmZvY3VzID0gZnVuY3Rpb24gKGUpIHsgX3RoaXMuY2xvc2VQb3B1cCgpOyB9O1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuX292ZXJsYXlFbGVtZW50KTtcclxuICAgICAgICAgICAgdGhpcy5fcG9wdXBDb250cm9sID0gdGhpcy5jcmVhdGVQb3B1cENvbnRyb2woKTtcclxuICAgICAgICAgICAgdGhpcy5fcG9wdXBDb250cm9sLm9uQ2xvc2UgPSBmdW5jdGlvbiAoc2VuZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5yb290RWxlbWVudC5mb2N1cygpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgcm9vdEVsZW1lbnRCb3VuZHMgPSB0aGlzLnJvb3RFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9wb3B1cENvbnRyb2xFbGVtZW50ID0gdGhpcy5fcG9wdXBDb250cm9sLnJlbmRlcihyb290RWxlbWVudEJvdW5kcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwQ29udHJvbEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1zLWN0cmwtc2xpZGVcIiwgXCJtcy1jdHJsLXNsaWRlTGVmdFRvUmlnaHRcIiwgXCJtcy1jdHJsLXNsaWRlUmlnaHRUb0xlZnRcIiwgXCJtcy1jdHJsLXNsaWRlVG9wVG9Cb3R0b21cIiwgXCJtcy1jdHJsLXNsaWRlUmlnaHRUb0xlZnRcIik7XHJcbiAgICAgICAgICAgIHRoaXMuX292ZXJsYXlFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3BvcHVwQ29udHJvbEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB2YXIgcG9wdXBFbGVtZW50Qm91bmRzID0gdGhpcy5fcG9wdXBDb250cm9sRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgdmFyIGF2YWlsYWJsZVNwYWNlQmVsb3cgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSByb290RWxlbWVudEJvdW5kcy5ib3R0b207XHJcbiAgICAgICAgICAgIHZhciBhdmFpbGFibGVTcGFjZUFib3ZlID0gcm9vdEVsZW1lbnRCb3VuZHMudG9wO1xyXG4gICAgICAgICAgICB2YXIgbGVmdCA9IHJvb3RFbGVtZW50Qm91bmRzLmxlZnQgKyBVdGlscy5nZXRTY3JvbGxYKCk7XHJcbiAgICAgICAgICAgIHZhciB0b3A7XHJcbiAgICAgICAgICAgIGlmIChhdmFpbGFibGVTcGFjZUFib3ZlIDwgcG9wdXBFbGVtZW50Qm91bmRzLmhlaWdodCAmJiBhdmFpbGFibGVTcGFjZUJlbG93IDwgcG9wdXBFbGVtZW50Qm91bmRzLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgLy8gTm90IGVub3VnaCBzcGFjZSBhYm92ZSBvciBiZWxvdyByb290IGVsZW1lbnRcclxuICAgICAgICAgICAgICAgIHZhciBhY3R1YWxQb3B1cEhlaWdodCA9IE1hdGgubWluKHBvcHVwRWxlbWVudEJvdW5kcy5oZWlnaHQsIHdpbmRvdy5pbm5lckhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wb3B1cENvbnRyb2xFbGVtZW50LnN0eWxlLm1heEhlaWdodCA9IGFjdHVhbFBvcHVwSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdHVhbFBvcHVwSGVpZ2h0IDwgcG9wdXBFbGVtZW50Qm91bmRzLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IFV0aWxzLmdldFNjcm9sbFkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IFV0aWxzLmdldFNjcm9sbFkoKSArIHJvb3RFbGVtZW50Qm91bmRzLnRvcCArIChyb290RWxlbWVudEJvdW5kcy5oZWlnaHQgLSBhY3R1YWxQb3B1cEhlaWdodCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGF2YWlsYWJsZVNwYWNlUmlnaHQgPSB3aW5kb3cuaW5uZXJXaWR0aCAtIHJvb3RFbGVtZW50Qm91bmRzLnJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdmFyIGF2YWlsYWJsZVNwYWNlTGVmdCA9IHJvb3RFbGVtZW50Qm91bmRzLmxlZnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXZhaWxhYmxlU3BhY2VMZWZ0IDwgcG9wdXBFbGVtZW50Qm91bmRzLndpZHRoICYmIGF2YWlsYWJsZVNwYWNlUmlnaHQgPCBwb3B1cEVsZW1lbnRCb3VuZHMud2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZW5vdWdoIHNwYWNlIGxlZnQgb3IgcmlnaHQgb2Ygcm9vdCBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdHVhbFBvcHVwV2lkdGggPSBNYXRoLm1pbihwb3B1cEVsZW1lbnRCb3VuZHMud2lkdGgsIHdpbmRvdy5pbm5lcldpZHRoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wb3B1cENvbnRyb2xFbGVtZW50LnN0eWxlLm1heFdpZHRoID0gYWN0dWFsUG9wdXBXaWR0aCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0dWFsUG9wdXBXaWR0aCA8IHBvcHVwRWxlbWVudEJvdW5kcy53aWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gVXRpbHMuZ2V0U2Nyb2xsWCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IFV0aWxzLmdldFNjcm9sbFgoKSArIHJvb3RFbGVtZW50Qm91bmRzLmxlZnQgKyAocm9vdEVsZW1lbnRCb3VuZHMud2lkdGggLSBhY3R1YWxQb3B1cFdpZHRoKSAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRW5vdWdoIHNwYWNlIG9uIHRoZSBsZWZ0IG9yIHJpZ2h0IG9mIHRoZSByb290IGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXZhaWxhYmxlU3BhY2VSaWdodCA+PSBwb3B1cEVsZW1lbnRCb3VuZHMud2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IFV0aWxzLmdldFNjcm9sbFgoKSArIHJvb3RFbGVtZW50Qm91bmRzLnJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wb3B1cENvbnRyb2xFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtcy1jdHJsLXNsaWRlXCIsIFwibXMtY3RybC1zbGlkZUxlZnRUb1JpZ2h0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IFV0aWxzLmdldFNjcm9sbFgoKSArIHJvb3RFbGVtZW50Qm91bmRzLmxlZnQgLSBwb3B1cEVsZW1lbnRCb3VuZHMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3BvcHVwQ29udHJvbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1zLWN0cmwtc2xpZGVcIiwgXCJtcy1jdHJsLXNsaWRlUmlnaHRUb0xlZnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gRW5vdWdoIHNwYWNlIGFib3ZlIG9yIGJlbG93IHJvb3QgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgaWYgKGF2YWlsYWJsZVNwYWNlQmVsb3cgPj0gcG9wdXBFbGVtZW50Qm91bmRzLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IFV0aWxzLmdldFNjcm9sbFkoKSArIHJvb3RFbGVtZW50Qm91bmRzLmJvdHRvbTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wb3B1cENvbnRyb2xFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtcy1jdHJsLXNsaWRlXCIsIFwibXMtY3RybC1zbGlkZVRvcFRvQm90dG9tXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wID0gVXRpbHMuZ2V0U2Nyb2xsWSgpICsgcm9vdEVsZW1lbnRCb3VuZHMudG9wIC0gcG9wdXBFbGVtZW50Qm91bmRzLmhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wb3B1cENvbnRyb2xFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtcy1jdHJsLXNsaWRlXCIsIFwibXMtY3RybC1zbGlkZUJvdHRvbVRvVG9wXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwQ29udHJvbEVsZW1lbnQuc3R5bGUubGVmdCA9IGxlZnQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwQ29udHJvbEVsZW1lbnQuc3R5bGUudG9wID0gdG9wICsgXCJweFwiO1xyXG4gICAgICAgICAgICB0aGlzLl9wb3B1cENvbnRyb2xFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzT3BlbiA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIElucHV0V2l0aFBvcHVwLnByb3RvdHlwZS5jbG9zZVBvcHVwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc09wZW4pIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLl9vdmVybGF5RWxlbWVudCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSW5wdXRXaXRoUG9wdXAucHJvdG90eXBlLCBcImlzT3BlblwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pc09wZW47XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSW5wdXRXaXRoUG9wdXAucHJvdG90eXBlLCBcInBsYWNlaG9sZGVyVGV4dFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wbGFjZWhvbGRlclRleHQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9wbGFjZWhvbGRlclRleHQgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnB1dFdpdGhQb3B1cC5wcm90b3R5cGUsIFwidmFsdWVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fdmFsdWUgIT0gbmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxhYmVsKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gSW5wdXRXaXRoUG9wdXA7XHJcbn0oaW5wdXRjb250cm9sXzEuSW5wdXRDb250cm9sKSk7XHJcbmV4cG9ydHMuSW5wdXRXaXRoUG9wdXAgPSBJbnB1dFdpdGhQb3B1cDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5wdXR3aXRocG9wdXAuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbnZhciBVdGlscyA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xyXG52YXIgQ29uc3RhbnRzID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xyXG52YXIgY29sbGVjdGlvbl8xID0gcmVxdWlyZShcIi4vY29sbGVjdGlvblwiKTtcclxudmFyIGlucHV0d2l0aHBvcHVwXzEgPSByZXF1aXJlKFwiLi9pbnB1dHdpdGhwb3B1cFwiKTtcclxudmFyIFBvcHVwTWVudSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhQb3B1cE1lbnUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBQb3B1cE1lbnUoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5faXRlbXMgPSBuZXcgY29sbGVjdGlvbl8xLkNvbGxlY3Rpb24oKTtcclxuICAgICAgICBfdGhpcy5fcmVuZGVyZWRJdGVtcyA9IFtdO1xyXG4gICAgICAgIF90aGlzLl9zZWxlY3RlZEluZGV4ID0gLTE7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgUG9wdXBNZW51LnByb3RvdHlwZS5yZW5kZXJDb250ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IFwibXMtY3RybCBtcy1wb3B1cFwiO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5faXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHJlbmRlcmVkSXRlbSA9IHRoaXMuX2l0ZW1zLmdldChpKS5yZW5kZXIoKTtcclxuICAgICAgICAgICAgcmVuZGVyZWRJdGVtLnRhYkluZGV4ID0gMDtcclxuICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChyZW5kZXJlZEl0ZW0pO1xyXG4gICAgICAgICAgICBpZiAoaSA9PSB0aGlzLnNlbGVjdGVkSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHJlbmRlcmVkSXRlbS5mb2N1cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMucHVzaChyZW5kZXJlZEl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH07XHJcbiAgICBQb3B1cE1lbnUucHJvdG90eXBlLmtleURvd24gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUua2V5RG93bi5jYWxsKHRoaXMsIGUpO1xyXG4gICAgICAgIHZhciBzZWxlY3RlZEl0ZW1JbmRleCA9IHRoaXMuX3NlbGVjdGVkSW5kZXg7XHJcbiAgICAgICAgc3dpdGNoIChlLmtleUNvZGUpIHtcclxuICAgICAgICAgICAgY2FzZSBDb25zdGFudHMuS0VZX1RBQjpcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICBjYXNlIENvbnN0YW50cy5LRVlfRU5URVI6XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSB0aGlzLnNlbGVjdGVkSW5kZXg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgY2FzZSBDb25zdGFudHMuS0VZX1VQOlxyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkSXRlbUluZGV4IDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW1JbmRleCA9IHRoaXMuX3JlbmRlcmVkSXRlbXMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSXRlbUluZGV4LS07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkSXRlbUluZGV4IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW1JbmRleCA9IHRoaXMuX3JlbmRlcmVkSXRlbXMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBzZWxlY3RlZEl0ZW1JbmRleDtcclxuICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENvbnN0YW50cy5LRVlfRE9XTjpcclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZEl0ZW1JbmRleCA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW1JbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW1JbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZEl0ZW1JbmRleCA+PSB0aGlzLl9yZW5kZXJlZEl0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW1JbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gc2VsZWN0ZWRJdGVtSW5kZXg7XHJcbiAgICAgICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUG9wdXBNZW51LnByb3RvdHlwZS5wb3B1cCA9IGZ1bmN0aW9uIChyb290RWxlbWVudCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pc09wZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5fb3ZlcmxheUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICB0aGlzLl9vdmVybGF5RWxlbWVudC5jbGFzc05hbWUgPSBcIm1zLWN0cmwtb3ZlcmxheVwiO1xyXG4gICAgICAgICAgICB0aGlzLl9vdmVybGF5RWxlbWVudC50YWJJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuX292ZXJsYXlFbGVtZW50LnN0eWxlLndpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICB0aGlzLl9vdmVybGF5RWxlbWVudC5zdHlsZS5oZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICB0aGlzLl9vdmVybGF5RWxlbWVudC5vbmZvY3VzID0gZnVuY3Rpb24gKGUpIHsgX3RoaXMuY2xvc2VQb3B1cCgpOyB9O1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuX292ZXJsYXlFbGVtZW50KTtcclxuICAgICAgICAgICAgdmFyIHJvb3RFbGVtZW50Qm91bmRzID0gcm9vdEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwQ29udHJvbEVsZW1lbnQgPSB0aGlzLnJlbmRlcihyb290RWxlbWVudEJvdW5kcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwQ29udHJvbEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1zLWN0cmwtc2xpZGVcIiwgXCJtcy1jdHJsLXNsaWRlTGVmdFRvUmlnaHRcIiwgXCJtcy1jdHJsLXNsaWRlUmlnaHRUb0xlZnRcIiwgXCJtcy1jdHJsLXNsaWRlVG9wVG9Cb3R0b21cIiwgXCJtcy1jdHJsLXNsaWRlUmlnaHRUb0xlZnRcIik7XHJcbiAgICAgICAgICAgIHRoaXMuX292ZXJsYXlFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3BvcHVwQ29udHJvbEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB2YXIgcG9wdXBFbGVtZW50Qm91bmRzID0gdGhpcy5fcG9wdXBDb250cm9sRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgdmFyIGF2YWlsYWJsZVNwYWNlQmVsb3cgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSByb290RWxlbWVudEJvdW5kcy5ib3R0b207XHJcbiAgICAgICAgICAgIHZhciBhdmFpbGFibGVTcGFjZUFib3ZlID0gcm9vdEVsZW1lbnRCb3VuZHMudG9wO1xyXG4gICAgICAgICAgICB2YXIgbGVmdCA9IHJvb3RFbGVtZW50Qm91bmRzLmxlZnQgKyBVdGlscy5nZXRTY3JvbGxYKCk7XHJcbiAgICAgICAgICAgIHZhciB0b3A7XHJcbiAgICAgICAgICAgIGlmIChhdmFpbGFibGVTcGFjZUFib3ZlIDwgcG9wdXBFbGVtZW50Qm91bmRzLmhlaWdodCAmJiBhdmFpbGFibGVTcGFjZUJlbG93IDwgcG9wdXBFbGVtZW50Qm91bmRzLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgLy8gTm90IGVub3VnaCBzcGFjZSBhYm92ZSBvciBiZWxvdyByb290IGVsZW1lbnRcclxuICAgICAgICAgICAgICAgIHZhciBtYXhQb3B1cEhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BvcHVwQ29udHJvbEVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0ID0gbWF4UG9wdXBIZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF4UG9wdXBIZWlnaHQgPCBwb3B1cEVsZW1lbnRCb3VuZHMuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wID0gVXRpbHMuZ2V0U2Nyb2xsWSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wID0gVXRpbHMuZ2V0U2Nyb2xsWSgpICsgcm9vdEVsZW1lbnRCb3VuZHMudG9wICsgKHJvb3RFbGVtZW50Qm91bmRzLmhlaWdodCAtIG1heFBvcHVwSGVpZ2h0KSAvIDI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgYXZhaWxhYmxlU3BhY2VSaWdodCA9IHdpbmRvdy5pbm5lcldpZHRoIC0gcm9vdEVsZW1lbnRCb3VuZHMucmlnaHQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXZhaWxhYmxlU3BhY2VMZWZ0ID0gcm9vdEVsZW1lbnRCb3VuZHMubGVmdDtcclxuICAgICAgICAgICAgICAgIGlmIChhdmFpbGFibGVTcGFjZUxlZnQgPCBwb3B1cEVsZW1lbnRCb3VuZHMud2lkdGggJiYgYXZhaWxhYmxlU3BhY2VSaWdodCA8IHBvcHVwRWxlbWVudEJvdW5kcy53aWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdCBlbm91Z2ggc3BhY2UgbGVmdCBvciByaWdodCBvZiByb290IGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF4UG9wdXBXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3BvcHVwQ29udHJvbEVsZW1lbnQuc3R5bGUubWF4V2lkdGggPSBtYXhQb3B1cFdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXhQb3B1cFdpZHRoIDwgcG9wdXBFbGVtZW50Qm91bmRzLndpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgPSBVdGlscy5nZXRTY3JvbGxYKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gVXRpbHMuZ2V0U2Nyb2xsWCgpICsgcm9vdEVsZW1lbnRCb3VuZHMubGVmdCArIChyb290RWxlbWVudEJvdW5kcy53aWR0aCAtIG1heFBvcHVwV2lkdGgpIC8gMjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBFbm91Z2ggc3BhY2Ugb24gdGhlIGxlZnQgb3IgcmlnaHQgb2YgdGhlIHJvb3QgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdmFpbGFibGVTcGFjZVJpZ2h0ID49IHBvcHVwRWxlbWVudEJvdW5kcy53aWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gVXRpbHMuZ2V0U2Nyb2xsWCgpICsgcm9vdEVsZW1lbnRCb3VuZHMucmlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3BvcHVwQ29udHJvbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1zLWN0cmwtc2xpZGVcIiwgXCJtcy1jdHJsLXNsaWRlTGVmdFRvUmlnaHRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gVXRpbHMuZ2V0U2Nyb2xsWCgpICsgcm9vdEVsZW1lbnRCb3VuZHMubGVmdCAtIHBvcHVwRWxlbWVudEJvdW5kcy53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcG9wdXBDb250cm9sRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibXMtY3RybC1zbGlkZVwiLCBcIm1zLWN0cmwtc2xpZGVSaWdodFRvTGVmdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBFbm91Z2ggc3BhY2UgYWJvdmUgb3IgYmVsb3cgcm9vdCBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICBpZiAoYXZhaWxhYmxlU3BhY2VCZWxvdyA+PSBwb3B1cEVsZW1lbnRCb3VuZHMuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wID0gVXRpbHMuZ2V0U2Nyb2xsWSgpICsgcm9vdEVsZW1lbnRCb3VuZHMuYm90dG9tO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3BvcHVwQ29udHJvbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1zLWN0cmwtc2xpZGVcIiwgXCJtcy1jdHJsLXNsaWRlVG9wVG9Cb3R0b21cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0b3AgPSBVdGlscy5nZXRTY3JvbGxZKCkgKyByb290RWxlbWVudEJvdW5kcy50b3AgLSBwb3B1cEVsZW1lbnRCb3VuZHMuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3BvcHVwQ29udHJvbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1zLWN0cmwtc2xpZGVcIiwgXCJtcy1jdHJsLXNsaWRlQm90dG9tVG9Ub3BcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fcG9wdXBDb250cm9sRWxlbWVudC5zdHlsZS5sZWZ0ID0gbGVmdCArIFwicHhcIjtcclxuICAgICAgICAgICAgdGhpcy5fcG9wdXBDb250cm9sRWxlbWVudC5zdHlsZS50b3AgPSB0b3AgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwQ29udHJvbEVsZW1lbnQuZm9jdXMoKTtcclxuICAgICAgICAgICAgdGhpcy5faXNPcGVuID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUG9wdXBNZW51LnByb3RvdHlwZS5jbG9zZVBvcHVwID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc09wZW4pIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLl9vdmVybGF5RWxlbWVudCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUG9wdXBNZW51LnByb3RvdHlwZSwgXCJpc09wZW5cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXNPcGVuO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFBvcHVwTWVudS5wcm90b3R5cGUsIFwiaXRlbXNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXRlbXM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUG9wdXBNZW51LnByb3RvdHlwZSwgXCJzZWxlY3RlZEluZGV4XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkSW5kZXg7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCAmJiBpbmRleCA8IHRoaXMuX3JlbmRlcmVkSXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zW2luZGV4XS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWRJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gUG9wdXBNZW51O1xyXG59KGlucHV0d2l0aHBvcHVwXzEuUG9wdXBDb250cm9sKSk7XHJcbmV4cG9ydHMuUG9wdXBNZW51ID0gUG9wdXBNZW51O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wb3B1cG1lbnUuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbnZhciBDb25zdGFudHMgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XHJcbnZhciBpbnB1dGNvbnRyb2xfMSA9IHJlcXVpcmUoXCIuL2lucHV0Y29udHJvbFwiKTtcclxudmFyIFJhZGlvQnV0dG9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFJhZGlvQnV0dG9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gUmFkaW9CdXR0b24oKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuX2xhYmVsID0gXCJcIjtcclxuICAgICAgICBfdGhpcy5fY2hlY2tib3hFbGVtZW50ID0gbnVsbDtcclxuICAgICAgICBfdGhpcy5fc3BhbkVsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFJhZGlvQnV0dG9uLmNyZWF0ZUlkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBSYWRpb0J1dHRvbi5jcmVhdGlvbkluZGV4O1xyXG4gICAgICAgIFJhZGlvQnV0dG9uLmNyZWF0aW9uSW5kZXgrKztcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIFJhZGlvQnV0dG9uLnByb3RvdHlwZS5jaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9uQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25DaGFuZ2UodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFJhZGlvQnV0dG9uLnByb3RvdHlwZS5rZXlEb3duID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xyXG4gICAgICAgICAgICBjYXNlIENvbnN0YW50cy5LRVlfRU5URVI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ2hlY2tlZCA9ICF0aGlzLmlzQ2hlY2tlZDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBSYWRpb0J1dHRvbi5wcm90b3R5cGUuYXR0YWNoID0gZnVuY3Rpb24gKHJvb3RFbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmF0dGFjaC5jYWxsKHRoaXMsIHJvb3RFbGVtZW50KTtcclxuICAgICAgICByb290RWxlbWVudC5jbGFzc05hbWUgPSBcIm1zLWN0cmwgbXMtY3RybC1yYWRpb2J1dHRvblwiO1xyXG4gICAgICAgIHJvb3RFbGVtZW50LnRhYkluZGV4ID0gMDtcclxuICAgICAgICB2YXIgbGFiZWxBdHRyaWJ1dGUgPSByb290RWxlbWVudC5hdHRyaWJ1dGVzW1wibGFiZWxcIl07XHJcbiAgICAgICAgaWYgKGxhYmVsQXR0cmlidXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xhYmVsID0gbGFiZWxBdHRyaWJ1dGUudmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpc0NoZWNrZWRBdHRyaWJ1dGUgPSByb290RWxlbWVudC5hdHRyaWJ1dGVzW1wiaXNjaGVja2VkXCJdO1xyXG4gICAgICAgIGlmIChpc0NoZWNrZWRBdHRyaWJ1dGUpIHtcclxuICAgICAgICAgICAgdGhpcy5faXNDaGVja2VkID0gaXNDaGVja2VkQXR0cmlidXRlLnZhbHVlID09PSBcInRydWVcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fY2hlY2tib3hFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIHRoaXMuX2NoZWNrYm94RWxlbWVudC5pZCA9IFwibXMtY3RybC1yYWRpby1cIiArIFJhZGlvQnV0dG9uLmNyZWF0ZUlkKCk7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tib3hFbGVtZW50LnR5cGUgPSBcInJhZGlvXCI7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tib3hFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgICAgIHRoaXMuX2NoZWNrYm94RWxlbWVudC5jaGVja2VkID0gdGhpcy5pc0NoZWNrZWQ7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tib3hFbGVtZW50Lm9uY2hhbmdlID0gZnVuY3Rpb24gKGUpIHsgX3RoaXMuY2hhbmdlZCgpOyB9O1xyXG4gICAgICAgIHZhciBncm91cE5hbWVBdHRyaWJ1dGUgPSByb290RWxlbWVudC5hdHRyaWJ1dGVzW1wiZ3JvdXBuYW1lXCJdO1xyXG4gICAgICAgIGlmIChncm91cE5hbWVBdHRyaWJ1dGUpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2hlY2tib3hFbGVtZW50Lm5hbWUgPSBncm91cE5hbWVBdHRyaWJ1dGUudmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBsYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XHJcbiAgICAgICAgbGFiZWxFbGVtZW50Lmh0bWxGb3IgPSB0aGlzLl9jaGVja2JveEVsZW1lbnQuaWQ7XHJcbiAgICAgICAgdGhpcy5fc3BhbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICB0aGlzLl9zcGFuRWxlbWVudC5pbm5lclRleHQgPSB0aGlzLl9sYWJlbDtcclxuICAgICAgICBsYWJlbEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fc3BhbkVsZW1lbnQpO1xyXG4gICAgICAgIHJvb3RFbGVtZW50LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fY2hlY2tib3hFbGVtZW50KTtcclxuICAgICAgICByb290RWxlbWVudC5hcHBlbmRDaGlsZChsYWJlbEVsZW1lbnQpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSYWRpb0J1dHRvbi5wcm90b3R5cGUsIFwibGFiZWxcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGFiZWw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9sYWJlbCA9IHZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fc3BhbkVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NwYW5FbGVtZW50LmlubmVyVGV4dCA9IHRoaXMuX2xhYmVsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmFkaW9CdXR0b24ucHJvdG90eXBlLCBcImlzQ2hlY2tlZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pc0NoZWNrZWQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faXNDaGVja2VkICE9IHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pc0NoZWNrZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jaGVja2JveEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jaGVja2JveEVsZW1lbnQuY2hlY2tlZCA9IHRoaXMuX2lzQ2hlY2tlZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvLyBVc2VkIHRvIGdlbmVyYXRlIHVuaXF1ZSBJZHNcclxuICAgIFJhZGlvQnV0dG9uLmNyZWF0aW9uSW5kZXggPSAwO1xyXG4gICAgcmV0dXJuIFJhZGlvQnV0dG9uO1xyXG59KGlucHV0Y29udHJvbF8xLklucHV0Q29udHJvbCkpO1xyXG5leHBvcnRzLlJhZGlvQnV0dG9uID0gUmFkaW9CdXR0b247XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJhZGlvYnV0dG9uLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgVXRpbHMgPSByZXF1aXJlKFwiLi91dGlsc1wiKTtcclxudmFyIGlucHV0Y29udHJvbF8xID0gcmVxdWlyZShcIi4vaW5wdXRjb250cm9sXCIpO1xyXG52YXIgRWRpdEJveCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEVkaXRCb3goKSB7XHJcbiAgICB9XHJcbiAgICBFZGl0Qm94LnByb3RvdHlwZS5jaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9uQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25DaGFuZ2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEVkaXRCb3g7XHJcbn0oKSk7XHJcbnZhciBTaW5nbGVMaW5lRWRpdEJveCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTaW5nbGVMaW5lRWRpdEJveCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFNpbmdsZUxpbmVFZGl0Qm94KCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuX2lucHV0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICBfdGhpcy5faW5wdXRFbGVtZW50LmNsYXNzTmFtZSA9IFwibXMtY3RybCBtcy1jdHJsLXRleHRib3hcIjtcclxuICAgICAgICBfdGhpcy5faW5wdXRFbGVtZW50LnR5cGUgPSBcInRleHRcIjtcclxuICAgICAgICBfdGhpcy5faW5wdXRFbGVtZW50Lm9uaW5wdXQgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5jaGFuZ2VkKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2luZ2xlTGluZUVkaXRCb3gucHJvdG90eXBlLCBcImVsZW1lbnRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRFbGVtZW50O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNpbmdsZUxpbmVFZGl0Qm94LnByb3RvdHlwZSwgXCJwbGFjZWhvbGRlclwiLCB7XHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5faW5wdXRFbGVtZW50LnBsYWNlaG9sZGVyID0gdmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2luZ2xlTGluZUVkaXRCb3gucHJvdG90eXBlLCBcImxpbmVDb3VudFwiLCB7XHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gbGluZUNvdW50IGNhbid0IGJlIHNldCBvbiBhIFNpbmdsZUxpbmVFZGl0Qm94XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2luZ2xlTGluZUVkaXRCb3gucHJvdG90eXBlLCBcIm1heExlbmd0aFwiLCB7XHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2lucHV0RWxlbWVudC5tYXhMZW5ndGggIT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2lucHV0RWxlbWVudC5tYXhMZW5ndGggPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTaW5nbGVMaW5lRWRpdEJveC5wcm90b3R5cGUsIFwidmFsdWVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRFbGVtZW50LnZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5faW5wdXRFbGVtZW50LnZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gU2luZ2xlTGluZUVkaXRCb3g7XHJcbn0oRWRpdEJveCkpO1xyXG52YXIgTXVsdGlsaW5lRWRpdEJveCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhNdWx0aWxpbmVFZGl0Qm94LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTXVsdGlsaW5lRWRpdEJveCgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLl90ZXh0YXJlYUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XHJcbiAgICAgICAgX3RoaXMuX3RleHRhcmVhRWxlbWVudC5jbGFzc05hbWUgPSBcIm1zLWN0cmwgbXMtY3RybC10ZXh0Ym94IG1zLWN0cmwtdGV4dGJveC1tdWx0aWxpbmVcIjtcclxuICAgICAgICBfdGhpcy5fdGV4dGFyZWFFbGVtZW50Lm9uaW5wdXQgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5jaGFuZ2VkKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTXVsdGlsaW5lRWRpdEJveC5wcm90b3R5cGUsIFwiZWxlbWVudFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90ZXh0YXJlYUVsZW1lbnQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTXVsdGlsaW5lRWRpdEJveC5wcm90b3R5cGUsIFwicGxhY2Vob2xkZXJcIiwge1xyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RleHRhcmVhRWxlbWVudC5wbGFjZWhvbGRlciA9IHZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE11bHRpbGluZUVkaXRCb3gucHJvdG90eXBlLCBcImxpbmVDb3VudFwiLCB7XHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fdGV4dGFyZWFFbGVtZW50LnJvd3MgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNdWx0aWxpbmVFZGl0Qm94LnByb3RvdHlwZSwgXCJtYXhMZW5ndGhcIiwge1xyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl90ZXh0YXJlYUVsZW1lbnQubWF4TGVuZ3RoICE9IHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90ZXh0YXJlYUVsZW1lbnQubWF4TGVuZ3RoID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy52YWx1ZS5zdWJzdHIoMCwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTXVsdGlsaW5lRWRpdEJveC5wcm90b3R5cGUsIFwidmFsdWVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdGV4dGFyZWFFbGVtZW50LnZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fdGV4dGFyZWFFbGVtZW50LnZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gTXVsdGlsaW5lRWRpdEJveDtcclxufShFZGl0Qm94KSk7XHJcbnZhciBUZXh0Qm94ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFRleHRCb3gsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBUZXh0Qm94KCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLl9pc011bHRpbGluZSA9IGZhbHNlO1xyXG4gICAgICAgIF90aGlzLl9saW5lQ291bnQgPSAzO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFRleHRCb3gucHJvdG90eXBlLmVkaXRCb3hDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9uQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25DaGFuZ2UodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFRleHRCb3gucHJvdG90eXBlLnJlY3JlYXRlRWRpdEJveCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLl9lZGl0Qm94KSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IHRoaXMuX2VkaXRCb3gudmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjdXJyZW50VmFsdWUgPSB0aGlzLnJvb3RFbGVtZW50LmlubmVyVGV4dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzTXVsdGlsaW5lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VkaXRCb3ggPSBuZXcgTXVsdGlsaW5lRWRpdEJveCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZWRpdEJveCA9IG5ldyBTaW5nbGVMaW5lRWRpdEJveCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY3VycmVudFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VkaXRCb3gudmFsdWUgPSBjdXJyZW50VmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2VkaXRCb3gubGluZUNvdW50ID0gdGhpcy5fbGluZUNvdW50O1xyXG4gICAgICAgIHRoaXMuX2VkaXRCb3gubWF4TGVuZ3RoID0gdGhpcy5fbWF4TGVuZ3RoO1xyXG4gICAgICAgIHRoaXMuX2VkaXRCb3gucGxhY2Vob2xkZXIgPSB0aGlzLl9wbGFjZWhvbGRlcjtcclxuICAgICAgICB0aGlzLl9lZGl0Qm94Lm9uQ2hhbmdlID0gZnVuY3Rpb24gKCkgeyBfdGhpcy5lZGl0Qm94Q2hhbmdlZCgpOyB9O1xyXG4gICAgICAgIHRoaXMucm9vdEVsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2VkaXRCb3guZWxlbWVudCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRleHRCb3gucHJvdG90eXBlLCBcImVkaXRCb3hcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2VkaXRCb3gpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVjcmVhdGVFZGl0Qm94KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VkaXRCb3g7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBUZXh0Qm94LnByb3RvdHlwZS5hdHRhY2ggPSBmdW5jdGlvbiAocm9vdEVsZW1lbnQpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmF0dGFjaC5jYWxsKHRoaXMsIHJvb3RFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl9pc011bHRpbGluZSA9IFV0aWxzLmdldEF0dHJpYnV0ZVZhbHVlQXNCb29sKHJvb3RFbGVtZW50LCBcImlzbXVsdGlsaW5lXCIsIGZhbHNlKTtcclxuICAgICAgICB0aGlzLl9saW5lQ291bnQgPSBVdGlscy5nZXRBdHRyaWJ1dGVWYWx1ZUFzSW50KHJvb3RFbGVtZW50LCBcImxpbmVzXCIsIDMpO1xyXG4gICAgICAgIHRoaXMuX21heExlbmd0aCA9IFV0aWxzLmdldEF0dHJpYnV0ZVZhbHVlQXNJbnQocm9vdEVsZW1lbnQsIFwibWF4bGVuZ3RoXCIsIDUwMDAwKTtcclxuICAgICAgICB0aGlzLl9wbGFjZWhvbGRlciA9IFV0aWxzLmdldEF0dHJpYnV0ZVZhbHVlQXNTdHJpbmcocm9vdEVsZW1lbnQsIFwicGxhY2Vob2xkZXJcIiwgbnVsbCk7XHJcbiAgICAgICAgdGhpcy5yZWNyZWF0ZUVkaXRCb3goKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGV4dEJveC5wcm90b3R5cGUsIFwidmFsdWVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lZGl0Qm94LnZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5lZGl0Qm94LnZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGV4dEJveC5wcm90b3R5cGUsIFwicGxhY2Vob2xkZXJcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcGxhY2Vob2xkZXI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9wbGFjZWhvbGRlciA9IHZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLmVkaXRCb3gucGxhY2Vob2xkZXIgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZXh0Qm94LnByb3RvdHlwZSwgXCJpc011bHRpbGluZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pc011bHRpbGluZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc011bHRpbGluZSAhPSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faXNNdWx0aWxpbmUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVjcmVhdGVFZGl0Qm94KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZXh0Qm94LnByb3RvdHlwZSwgXCJsaW5lQ291bnRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGluZUNvdW50O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGluZUNvdW50ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRCb3gubGluZUNvdW50ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZXh0Qm94LnByb3RvdHlwZSwgXCJtYXhMZW5ndGhcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWF4TGVuZ3RoO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWF4TGVuZ3RoID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRCb3gubWF4TGVuZ3RoID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBUZXh0Qm94O1xyXG59KGlucHV0Y29udHJvbF8xLklucHV0Q29udHJvbCkpO1xyXG5leHBvcnRzLlRleHRCb3ggPSBUZXh0Qm94O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD10ZXh0Ym94LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbnZhciBFbnVtcyA9IHJlcXVpcmUoXCIuL2VudW1zXCIpO1xyXG52YXIgQ2FsZW5kYXJTZXR0aW5ncyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENhbGVuZGFyU2V0dGluZ3MoKSB7XHJcbiAgICB9XHJcbiAgICBDYWxlbmRhclNldHRpbmdzLmdldExvbmdEYXlOYW1lID0gZnVuY3Rpb24gKGRheUluZGV4KSB7XHJcbiAgICAgICAgaWYgKGRheUluZGV4ID49IDAgJiYgZGF5SW5kZXggPCBDYWxlbmRhclNldHRpbmdzLmxvbmdEYXlOYW1lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIENhbGVuZGFyU2V0dGluZ3MubG9uZ0RheU5hbWVzW2RheUluZGV4XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGF5IGluZGV4IG91dCBvZiByYW5nZTogXCIgKyBkYXlJbmRleCk7XHJcbiAgICB9O1xyXG4gICAgQ2FsZW5kYXJTZXR0aW5ncy5nZXRTaG9ydERheU5hbWUgPSBmdW5jdGlvbiAoZGF5SW5kZXgpIHtcclxuICAgICAgICBpZiAoZGF5SW5kZXggPj0gMCAmJiBkYXlJbmRleCA8IENhbGVuZGFyU2V0dGluZ3Muc2hvcnREYXlOYW1lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIENhbGVuZGFyU2V0dGluZ3Muc2hvcnREYXlOYW1lc1tkYXlJbmRleF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRheSBpbmRleCBvdXQgb2YgcmFuZ2U6IFwiICsgZGF5SW5kZXgpO1xyXG4gICAgfTtcclxuICAgIENhbGVuZGFyU2V0dGluZ3MuZ2V0SW5pdGlhbERheU5hbWUgPSBmdW5jdGlvbiAoZGF5SW5kZXgpIHtcclxuICAgICAgICBpZiAoZGF5SW5kZXggPj0gMCAmJiBkYXlJbmRleCA8IENhbGVuZGFyU2V0dGluZ3MubWluaW1hbERheU5hbWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gQ2FsZW5kYXJTZXR0aW5ncy5taW5pbWFsRGF5TmFtZXNbZGF5SW5kZXhdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEYXkgaW5kZXggb3V0IG9mIHJhbmdlOiBcIiArIGRheUluZGV4KTtcclxuICAgIH07XHJcbiAgICBDYWxlbmRhclNldHRpbmdzLmdldExvbmdNb250aE5hbWUgPSBmdW5jdGlvbiAobW9udGhJbmRleCkge1xyXG4gICAgICAgIGlmIChtb250aEluZGV4ID49IDAgJiYgbW9udGhJbmRleCA8IENhbGVuZGFyU2V0dGluZ3MubG9uZ01vbnRoTmFtZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBDYWxlbmRhclNldHRpbmdzLmxvbmdNb250aE5hbWVzW21vbnRoSW5kZXhdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNb250aCBpbmRleCBvdXQgb2YgcmFuZ2U6IFwiICsgbW9udGhJbmRleCk7XHJcbiAgICB9O1xyXG4gICAgQ2FsZW5kYXJTZXR0aW5ncy5nZXRTaG9ydE1vbnRoTmFtZSA9IGZ1bmN0aW9uIChtb250aEluZGV4KSB7XHJcbiAgICAgICAgaWYgKG1vbnRoSW5kZXggPj0gMCAmJiBtb250aEluZGV4IDwgQ2FsZW5kYXJTZXR0aW5ncy5zaG9ydE1vbnRoTmFtZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBDYWxlbmRhclNldHRpbmdzLnNob3J0TW9udGhOYW1lc1ttb250aEluZGV4XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTW9udGggaW5kZXggb3V0IG9mIHJhbmdlOiBcIiArIG1vbnRoSW5kZXgpO1xyXG4gICAgfTtcclxuICAgIENhbGVuZGFyU2V0dGluZ3MubW9udGhzSW5ZZWFyID0gMTI7XHJcbiAgICBDYWxlbmRhclNldHRpbmdzLmRheXNJbldlZWsgPSA3O1xyXG4gICAgQ2FsZW5kYXJTZXR0aW5ncy5maXJzdERheU9mV2VlayA9IEVudW1zLkRheU9mV2Vlay5TdW5kYXk7XHJcbiAgICBDYWxlbmRhclNldHRpbmdzLmxvbmdEYXlOYW1lcyA9IFtcIlN1bmRheVwiLCBcIk1vbmRheVwiLCBcIlR1ZXNkYXlcIiwgXCJXZWRuZXNkYXlcIiwgXCJUaHVyc2RheVwiLCBcIkZyaWRheVwiLCBcIlNhdHVyZGF5XCJdO1xyXG4gICAgQ2FsZW5kYXJTZXR0aW5ncy5zaG9ydERheU5hbWVzID0gW1wiU3VuXCIsIFwiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCJdO1xyXG4gICAgQ2FsZW5kYXJTZXR0aW5ncy5taW5pbWFsRGF5TmFtZXMgPSBbXCJTdVwiLCBcIk1vXCIsIFwiVHVcIiwgXCJXZVwiLCBcIlRoXCIsIFwiRnJcIiwgXCJTYVwiXTtcclxuICAgIENhbGVuZGFyU2V0dGluZ3MubG9uZ01vbnRoTmFtZXMgPSBbXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIiwgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXTtcclxuICAgIENhbGVuZGFyU2V0dGluZ3Muc2hvcnRNb250aE5hbWVzID0gW1wiSmFuXCIsIFwiRmViXCIsIFwiTWFyXCIsIFwiQXByXCIsIFwiTWF5XCIsIFwiSnVuXCIsIFwiSnVsXCIsIFwiQXVnXCIsIFwiU2VwXCIsIFwiT2N0XCIsIFwiTm92XCIsIFwiRGVjXCJdO1xyXG4gICAgcmV0dXJuIENhbGVuZGFyU2V0dGluZ3M7XHJcbn0oKSk7XHJcbmV4cG9ydHMuQ2FsZW5kYXJTZXR0aW5ncyA9IENhbGVuZGFyU2V0dGluZ3M7XHJcbmZ1bmN0aW9uIGRheXNJbk1vbnRoKHllYXIsIG1vbnRoKSB7XHJcbiAgICBzd2l0Y2ggKG1vbnRoKSB7XHJcbiAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICByZXR1cm4gKHllYXIgJSA0ID09IDAgJiYgeWVhciAlIDEwMCkgfHwgeWVhciAlIDQwMCA9PSAwID8gMjkgOiAyODtcclxuICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgIGNhc2UgODpcclxuICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICByZXR1cm4gMzA7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIDMxO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZGF5c0luTW9udGggPSBkYXlzSW5Nb250aDtcclxuZnVuY3Rpb24gYWRkRGF5cyhkYXRlLCBkYXlzKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpO1xyXG4gICAgcmVzdWx0LnNldERhdGUocmVzdWx0LmdldERhdGUoKSArIGRheXMpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5leHBvcnRzLmFkZERheXMgPSBhZGREYXlzO1xyXG5mdW5jdGlvbiBhZGRNb250aHMoZGF0ZSwgbW9udGhzKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpO1xyXG4gICAgdmFyIG5ld01vbnRoID0gcmVzdWx0LmdldE1vbnRoKCkgKyBtb250aHM7XHJcbiAgICByZXN1bHQuc2V0TW9udGgobmV3TW9udGgpO1xyXG4gICAgLy8gV2Ugd2FudCB0byBtYWludGFpbiB0aGUgc2FtZSBkYXktb2YtbW9udGgsIGJ1dCB0aGF0IG1heSBub3QgYmUgcG9zc2libGUgaWYgdGhlIG5ldyBtb250aCBkb2Vzbid0IGhhdmUgZW5vdWdoIGRheXMuXHJcbiAgICAvLyBMb29wIHVudGlsIHdlIGJhY2sgdXAgdG8gYSBkYXkgdGhlIG5ldyBtb250aCBoYXMuXHJcbiAgICAvLyAoV2VpcmQgbW9kdWxvIG1hdGggaXMgZHVlIHRvIEphdmFzY3JpcHQncyB0cmVhdG1lbnQgb2YgbmVnYXRpdmUgbnVtYmVycyBpbiBtb2R1bG8pXHJcbiAgICBpZiAocmVzdWx0LmdldE1vbnRoKCkgIT09ICgobmV3TW9udGggJSBDYWxlbmRhclNldHRpbmdzLm1vbnRoc0luWWVhcikgKyBDYWxlbmRhclNldHRpbmdzLm1vbnRoc0luWWVhcikgJSBDYWxlbmRhclNldHRpbmdzLm1vbnRoc0luWWVhcikge1xyXG4gICAgICAgIHJlc3VsdCA9IGFkZERheXMocmVzdWx0LCAtcmVzdWx0LmdldERhdGUoKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydHMuYWRkTW9udGhzID0gYWRkTW9udGhzO1xyXG5mdW5jdGlvbiBhcmVEYXRlc0VxdWFsKGRhdGUxLCBkYXRlMikge1xyXG4gICAgcmV0dXJuIGRhdGUxLmdldEZ1bGxZZWFyKCkgPT0gZGF0ZTIuZ2V0RnVsbFllYXIoKSAmJlxyXG4gICAgICAgIGRhdGUxLmdldE1vbnRoKCkgPT0gZGF0ZTIuZ2V0TW9udGgoKSAmJlxyXG4gICAgICAgIGRhdGUxLmdldERhdGUoKSA9PSBkYXRlMi5nZXREYXRlKCk7XHJcbn1cclxuZXhwb3J0cy5hcmVEYXRlc0VxdWFsID0gYXJlRGF0ZXNFcXVhbDtcclxuZnVuY3Rpb24gZ2V0U2Nyb2xsWCgpIHtcclxuICAgIHJldHVybiB3aW5kb3cucGFnZVhPZmZzZXQ7XHJcbn1cclxuZXhwb3J0cy5nZXRTY3JvbGxYID0gZ2V0U2Nyb2xsWDtcclxuZnVuY3Rpb24gZ2V0U2Nyb2xsWSgpIHtcclxuICAgIHJldHVybiB3aW5kb3cucGFnZVlPZmZzZXQ7XHJcbn1cclxuZXhwb3J0cy5nZXRTY3JvbGxZID0gZ2V0U2Nyb2xsWTtcclxuZnVuY3Rpb24gZ2V0QXR0cmlidXRlVmFsdWVBc0Jvb2woZWxlbWVudCwgYXR0cmlidXRlTmFtZSwgZGVmYXVsdFZhbHVlKSB7XHJcbiAgICB2YXIgYXR0cmlidXRlID0gZWxlbWVudC5hdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdO1xyXG4gICAgaWYgKGF0dHJpYnV0ZSkge1xyXG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGUudmFsdWUgPT09IFwidHJ1ZVwiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcclxufVxyXG5leHBvcnRzLmdldEF0dHJpYnV0ZVZhbHVlQXNCb29sID0gZ2V0QXR0cmlidXRlVmFsdWVBc0Jvb2w7XHJcbmZ1bmN0aW9uIGdldEF0dHJpYnV0ZVZhbHVlQXNTdHJpbmcoZWxlbWVudCwgYXR0cmlidXRlTmFtZSwgZGVmYXVsdFZhbHVlKSB7XHJcbiAgICB2YXIgYXR0cmlidXRlID0gZWxlbWVudC5hdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdO1xyXG4gICAgaWYgKGF0dHJpYnV0ZSkge1xyXG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGUudmFsdWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xyXG59XHJcbmV4cG9ydHMuZ2V0QXR0cmlidXRlVmFsdWVBc1N0cmluZyA9IGdldEF0dHJpYnV0ZVZhbHVlQXNTdHJpbmc7XHJcbmZ1bmN0aW9uIGdldEF0dHJpYnV0ZVZhbHVlQXNJbnQoZWxlbWVudCwgYXR0cmlidXRlTmFtZSwgZGVmYXVsdFZhbHVlKSB7XHJcbiAgICB2YXIgYXR0cmlidXRlID0gZWxlbWVudC5hdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdO1xyXG4gICAgaWYgKGF0dHJpYnV0ZSkge1xyXG4gICAgICAgIHZhciBuID0gcGFyc2VJbnQoYXR0cmlidXRlLnZhbHVlKTtcclxuICAgICAgICBpZiAoIWlzTmFOKG4pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XHJcbn1cclxuZXhwb3J0cy5nZXRBdHRyaWJ1dGVWYWx1ZUFzSW50ID0gZ2V0QXR0cmlidXRlVmFsdWVBc0ludDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL2V4cHJlc3Npb24tcGFyc2VyXCIpKTtcclxuX19leHBvcnQocmVxdWlyZShcIi4vdGVtcGxhdGUtZW5naW5lXCIpKTtcclxuX19leHBvcnQocmVxdWlyZShcIi4vc2hhcmVkXCIpKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRhcHRpdmVjYXJkcy10ZW1wbGF0aW5nLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgb3JkZXJlZE9wZXJhdG9ycyA9IFtcclxuICAgIFwiL1wiLFxyXG4gICAgXCIqXCIsXHJcbiAgICBcIi1cIixcclxuICAgIFwiK1wiLFxyXG4gICAgXCI9PVwiLFxyXG4gICAgXCIhPVwiLFxyXG4gICAgXCI8XCIsXHJcbiAgICBcIjw9XCIsXHJcbiAgICBcIj5cIixcclxuICAgIFwiPj1cIlxyXG5dO1xyXG52YXIgbGl0ZXJhbHMgPSBbXHJcbiAgICBcImlkZW50aWZpZXJcIixcclxuICAgIFwic3RyaW5nXCIsXHJcbiAgICBcIm51bWJlclwiLFxyXG4gICAgXCJib29sZWFuXCJcclxuXTtcclxudmFyIFRva2VuaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRva2VuaXplcigpIHtcclxuICAgIH1cclxuICAgIFRva2VuaXplci5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIFRva2VuaXplci5ydWxlcy5wdXNoKHsgdG9rZW5UeXBlOiB1bmRlZmluZWQsIHJlZ0V4OiAvXlxccy8gfSwgeyB0b2tlblR5cGU6IFwie1wiLCByZWdFeDogL157LyB9LCB7IHRva2VuVHlwZTogXCI/I1wiLCByZWdFeDogL15cXD8jLyB9LCB7IHRva2VuVHlwZTogXCJ9XCIsIHJlZ0V4OiAvXn0vIH0sIHsgdG9rZW5UeXBlOiBcIltcIiwgcmVnRXg6IC9eXFxbLyB9LCB7IHRva2VuVHlwZTogXCJdXCIsIHJlZ0V4OiAvXlxcXS8gfSwgeyB0b2tlblR5cGU6IFwiKFwiLCByZWdFeDogL15cXCgvIH0sIHsgdG9rZW5UeXBlOiBcIilcIiwgcmVnRXg6IC9eXFwpLyB9LCB7IHRva2VuVHlwZTogXCJib29sZWFuXCIsIHJlZ0V4OiAvXnRydWV8XmZhbHNlLyB9LCB7IHRva2VuVHlwZTogXCJpZGVudGlmaWVyXCIsIHJlZ0V4OiAvXlskYS16X10rL2kgfSwgeyB0b2tlblR5cGU6IFwiLlwiLCByZWdFeDogL15cXC4vIH0sIHsgdG9rZW5UeXBlOiBcIixcIiwgcmVnRXg6IC9eLC8gfSwgeyB0b2tlblR5cGU6IFwiK1wiLCByZWdFeDogL15cXCsvIH0sIHsgdG9rZW5UeXBlOiBcIi1cIiwgcmVnRXg6IC9eLS8gfSwgeyB0b2tlblR5cGU6IFwiKlwiLCByZWdFeDogL15cXCovIH0sIHsgdG9rZW5UeXBlOiBcIi9cIiwgcmVnRXg6IC9eXFwvLyB9LCB7IHRva2VuVHlwZTogXCI9PVwiLCByZWdFeDogL149PS8gfSwgeyB0b2tlblR5cGU6IFwiIT1cIiwgcmVnRXg6IC9eIT0vIH0sIHsgdG9rZW5UeXBlOiBcIjw9XCIsIHJlZ0V4OiAvXjw9LyB9LCB7IHRva2VuVHlwZTogXCI8XCIsIHJlZ0V4OiAvXjwvIH0sIHsgdG9rZW5UeXBlOiBcIj49XCIsIHJlZ0V4OiAvXj49LyB9LCB7IHRva2VuVHlwZTogXCI+XCIsIHJlZ0V4OiAvXj4vIH0sIHsgdG9rZW5UeXBlOiBcInN0cmluZ1wiLCByZWdFeDogL15cIihbXlwiXSopXCIvIH0sIHsgdG9rZW5UeXBlOiBcInN0cmluZ1wiLCByZWdFeDogL14nKFteJ10qKScvIH0sIHsgdG9rZW5UeXBlOiBcIm51bWJlclwiLCByZWdFeDogL15cXGQqXFwuP1xcZCsvIH0pO1xyXG4gICAgfTtcclxuICAgIFRva2VuaXplci5wYXJzZSA9IGZ1bmN0aW9uIChleHByZXNzaW9uKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICB3aGlsZSAoaSA8IGV4cHJlc3Npb24ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHZhciBzdWJFeHByZXNzaW9uID0gZXhwcmVzc2lvbi5zdWJzdHJpbmcoaSk7XHJcbiAgICAgICAgICAgIHZhciBtYXRjaEZvdW5kID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBUb2tlbml6ZXIucnVsZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcnVsZSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIHZhciBtYXRjaGVzID0gcnVsZS5yZWdFeC5leGVjKHN1YkV4cHJlc3Npb24pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPiAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkEgdG9rZW5pemVyIHJ1bGUgbWF0Y2hlZCBtb3JlIHRoYW4gb25lIGdyb3VwLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUudG9rZW5UeXBlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogcnVsZS50b2tlblR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbWF0Y2hlc1ttYXRjaGVzLmxlbmd0aCA9PT0gMSA/IDAgOiAxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsUG9zaXRpb246IGlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGkgKz0gbWF0Y2hlc1swXS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hGb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFtYXRjaEZvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIGNoYXJhY3RlciBcIiArIHN1YkV4cHJlc3Npb25bMF0gKyBcIiBhdCBwb3NpdGlvbiBcIiArIGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgVG9rZW5pemVyLnJ1bGVzID0gW107XHJcbiAgICByZXR1cm4gVG9rZW5pemVyO1xyXG59KCkpO1xyXG5Ub2tlbml6ZXIuaW5pdCgpO1xyXG5mdW5jdGlvbiBlbnN1cmVWYWx1ZVR5cGUodmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHZhbHVlIHR5cGU6IFwiICsgdHlwZW9mIHZhbHVlKTtcclxufVxyXG52YXIgRnVuY3Rpb25Db2xsZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRnVuY3Rpb25Db2xsZWN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuX2Z1bmN0aW9ucyA9IFtdO1xyXG4gICAgfVxyXG4gICAgRnVuY3Rpb25Db2xsZWN0aW9uLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZnVuY3Rpb25zLmZpbmRJbmRleChmdW5jdGlvbiAoZikgeyByZXR1cm4gZi5uYW1lID09PSBuYW1lOyB9KTtcclxuICAgIH07XHJcbiAgICBGdW5jdGlvbkNvbGxlY3Rpb24ucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleE9mKG5hbWUpO1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Z1bmN0aW9uc1tpbmRleF0uY2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Z1bmN0aW9ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2tcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEZ1bmN0aW9uQ29sbGVjdGlvbi5wcm90b3R5cGUudW5yZWdpc3RlciA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleE9mKG5hbWUpO1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Z1bmN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBGdW5jdGlvbkNvbGxlY3Rpb24ucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXhPZihuYW1lKTtcclxuICAgICAgICByZXR1cm4gaW5kZXggPj0gMCA/IHRoaXMuX2Z1bmN0aW9uc1tpbmRleF0gOiB1bmRlZmluZWQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZ1bmN0aW9uQ29sbGVjdGlvbjtcclxufSgpKTtcclxudmFyIEV2YWx1YXRpb25Db250ZXh0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRXZhbHVhdGlvbkNvbnRleHQoKSB7XHJcbiAgICAgICAgdGhpcy5fZnVuY3Rpb25zID0gbmV3IEZ1bmN0aW9uQ29sbGVjdGlvbigpO1xyXG4gICAgICAgIHRoaXMuX3N0YXRlU3RhY2sgPSBbXTtcclxuICAgIH1cclxuICAgIEV2YWx1YXRpb25Db250ZXh0LmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgRXZhbHVhdGlvbkNvbnRleHQuX2J1aWx0SW5GdW5jdGlvbnMucmVnaXN0ZXIoXCJzdWJzdHJcIiwgZnVuY3Rpb24gKHMsIGluZGV4LCBjb3VudCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHMgPT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIGluZGV4ID09PSBcIm51bWJlclwiICYmIHR5cGVvZiBjb3VudCA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChzLnN1YnN0cihpbmRleCwgY291bnQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgRXZhbHVhdGlvbkNvbnRleHQuX2J1aWx0SW5GdW5jdGlvbnMucmVnaXN0ZXIoXCJKU09OLnBhcnNlXCIsIGZ1bmN0aW9uIChpbnB1dCkge1xyXG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShpbnB1dCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgRXZhbHVhdGlvbkNvbnRleHQuX2J1aWx0SW5GdW5jdGlvbnMucmVnaXN0ZXIoXCJ0b1N0cmluZ1wiLCBmdW5jdGlvbiAoaW5wdXQpIHtcclxuICAgICAgICAgICAgaWYgKGlucHV0LnRvU3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXQudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgRXZhbHVhdGlvbkNvbnRleHQuX2J1aWx0SW5GdW5jdGlvbnMucmVnaXN0ZXIoXCJwYXJzZUludFwiLCBmdW5jdGlvbiAoaW5wdXQsIHJhZGl4KSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIgJiYgKHJhZGl4ID09PSB1bmRlZmluZWQgfHwgdHlwZW9mIHJhZGl4ID09PSBcIm51bWJlclwiKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGlucHV0LCByYWRpeCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBFdmFsdWF0aW9uQ29udGV4dC5fYnVpbHRJbkZ1bmN0aW9ucy5yZWdpc3RlcihcInBhcnNlRmxvYXRcIiwgZnVuY3Rpb24gKGlucHV0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIgPyBwYXJzZUZsb2F0KGlucHV0KSA6IGlucHV0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIEV2YWx1YXRpb25Db250ZXh0Ll9idWlsdEluRnVuY3Rpb25zLnJlZ2lzdGVyKFwiaWZcIiwgZnVuY3Rpb24gKGNvbmRpdGlvbiwgaWZUcnVlLCBpZkZhbHNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb25kaXRpb24gPyBpZlRydWUgOiBpZkZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIEV2YWx1YXRpb25Db250ZXh0Ll9idWlsdEluRnVuY3Rpb25zLnJlZ2lzdGVyKFwidG9VcHBlclwiLCBmdW5jdGlvbiAoaW5wdXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIiA/IGlucHV0LnRvVXBwZXJDYXNlKCkgOiBpbnB1dDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBFdmFsdWF0aW9uQ29udGV4dC5fYnVpbHRJbkZ1bmN0aW9ucy5yZWdpc3RlcihcInRvTG93ZXJcIiwgZnVuY3Rpb24gKGlucHV0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIgPyBpbnB1dC50b0xvd2VyQ2FzZSgpIDogaW5wdXQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgRXZhbHVhdGlvbkNvbnRleHQuX2J1aWx0SW5GdW5jdGlvbnMucmVnaXN0ZXIoXCJEYXRlLmZvcm1hdFwiLCBmdW5jdGlvbiAoaW5wdXQsIGZvcm1hdCkge1xyXG4gICAgICAgICAgICB2YXIgYWNjZXB0ZWRGb3JtYXRzID0gW1wibG9uZ1wiLCBcInNob3J0XCIsIFwiY29tcGFjdFwiXTtcclxuICAgICAgICAgICAgdmFyIGlucHV0QXNOdW1iZXI7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0QXNOdW1iZXIgPSBEYXRlLnBhcnNlKGlucHV0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0QXNOdW1iZXIgPSBpbnB1dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGlucHV0QXNOdW1iZXIpO1xyXG4gICAgICAgICAgICB2YXIgZWZmZWN0aXZlRm9ybWF0ID0gXCJjb21wYWN0XCI7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZm9ybWF0ID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICBlZmZlY3RpdmVGb3JtYXQgPSBmb3JtYXQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIGlmIChhY2NlcHRlZEZvcm1hdHMuaW5kZXhPZihlZmZlY3RpdmVGb3JtYXQpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdGl2ZUZvcm1hdCA9IFwiY29tcGFjdFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBlZmZlY3RpdmVGb3JtYXQgPT09IFwiY29tcGFjdFwiID8gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKSA6IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKHVuZGVmaW5lZCwgeyBkYXk6IFwibnVtZXJpY1wiLCB3ZWVrZGF5OiBlZmZlY3RpdmVGb3JtYXQsIG1vbnRoOiBlZmZlY3RpdmVGb3JtYXQsIHllYXI6IFwibnVtZXJpY1wiIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIEV2YWx1YXRpb25Db250ZXh0Ll9idWlsdEluRnVuY3Rpb25zLnJlZ2lzdGVyKFwiVGltZS5mb3JtYXRcIiwgZnVuY3Rpb24gKGlucHV0KSB7XHJcbiAgICAgICAgICAgIHZhciBpbnB1dEFzTnVtYmVyO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEFzTnVtYmVyID0gRGF0ZS5wYXJzZShpbnB1dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEFzTnVtYmVyID0gaW5wdXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShpbnB1dEFzTnVtYmVyKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKHVuZGVmaW5lZCwgeyBob3VyOiAnbnVtZXJpYycsIG1pbnV0ZTogJzItZGlnaXQnIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIEV2YWx1YXRpb25Db250ZXh0Ll9idWlsdEluRnVuY3Rpb25zLnJlZ2lzdGVyKFwicm91bmRcIiwgZnVuY3Rpb24gKGlucHV0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgaW5wdXQgPT09IFwibnVtYmVyXCIgPyBNYXRoLnJvdW5kKGlucHV0KSA6IGlucHV0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIEV2YWx1YXRpb25Db250ZXh0Ll9idWlsdEluRnVuY3Rpb25zLnJlZ2lzdGVyKFwiY2VpbFwiLCBmdW5jdGlvbiAoaW5wdXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gXCJudW1iZXJcIiA/IE1hdGguY2VpbChpbnB1dCkgOiBpbnB1dDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBFdmFsdWF0aW9uQ29udGV4dC5fYnVpbHRJbkZ1bmN0aW9ucy5yZWdpc3RlcihcImZsb29yXCIsIGZ1bmN0aW9uIChpbnB1dCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSBcIm51bWJlclwiID8gTWF0aC5mbG9vcihpbnB1dCkgOiBpbnB1dDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBFdmFsdWF0aW9uQ29udGV4dC5wcm90b3R5cGUucmVnaXN0ZXJGdW5jdGlvbiA9IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuX2Z1bmN0aW9ucy5yZWdpc3RlcihuYW1lLCBjYWxsYmFjayk7XHJcbiAgICB9O1xyXG4gICAgRXZhbHVhdGlvbkNvbnRleHQucHJvdG90eXBlLnVucmVnaXN0ZXJGdW5jdGlvbiA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5fZnVuY3Rpb25zLnVucmVnaXN0ZXIobmFtZSk7XHJcbiAgICB9O1xyXG4gICAgRXZhbHVhdGlvbkNvbnRleHQucHJvdG90eXBlLmdldEZ1bmN0aW9uID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICB2YXIgZiA9IHRoaXMuX2Z1bmN0aW9ucy5maW5kKG5hbWUpO1xyXG4gICAgICAgIGlmICghZikge1xyXG4gICAgICAgICAgICBmID0gRXZhbHVhdGlvbkNvbnRleHQuX2J1aWx0SW5GdW5jdGlvbnMuZmluZChuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGYgPyBmLmNhbGxiYWNrIDogdW5kZWZpbmVkO1xyXG4gICAgfTtcclxuICAgIEV2YWx1YXRpb25Db250ZXh0LnByb3RvdHlwZS5pc1Jlc2VydmVkRmllbGQgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIHJldHVybiBFdmFsdWF0aW9uQ29udGV4dC5fcmVzZXJ2ZWRGaWVsZHMuaW5kZXhPZihuYW1lKSA+PSAwO1xyXG4gICAgfTtcclxuICAgIEV2YWx1YXRpb25Db250ZXh0LnByb3RvdHlwZS5zYXZlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3RhdGVTdGFjay5wdXNoKHsgJGRhdGE6IHRoaXMuJGRhdGEsICRpbmRleDogdGhpcy4kaW5kZXggfSk7XHJcbiAgICB9O1xyXG4gICAgRXZhbHVhdGlvbkNvbnRleHQucHJvdG90eXBlLnJlc3RvcmVMYXN0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3N0YXRlU3RhY2subGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZXJlIGlzIG5vIGV2YWx1YXRpb24gY29udGV4dCBzdGF0ZSB0byByZXN0b3JlLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHNhdmVkQ29udGV4dCA9IHRoaXMuX3N0YXRlU3RhY2sucG9wKCk7XHJcbiAgICAgICAgdGhpcy4kZGF0YSA9IHNhdmVkQ29udGV4dC4kZGF0YTtcclxuICAgICAgICB0aGlzLiRpbmRleCA9IHNhdmVkQ29udGV4dC4kaW5kZXg7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2YWx1YXRpb25Db250ZXh0LnByb3RvdHlwZSwgXCJjdXJyZW50RGF0YUNvbnRleHRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kZGF0YSAhPT0gdW5kZWZpbmVkID8gdGhpcy4kZGF0YSA6IHRoaXMuJHJvb3Q7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBFdmFsdWF0aW9uQ29udGV4dC5fcmVzZXJ2ZWRGaWVsZHMgPSBbXCIkZGF0YVwiLCBcIiRyb290XCIsIFwiJGluZGV4XCJdO1xyXG4gICAgRXZhbHVhdGlvbkNvbnRleHQuX2J1aWx0SW5GdW5jdGlvbnMgPSBuZXcgRnVuY3Rpb25Db2xsZWN0aW9uKCk7XHJcbiAgICByZXR1cm4gRXZhbHVhdGlvbkNvbnRleHQ7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRXZhbHVhdGlvbkNvbnRleHQgPSBFdmFsdWF0aW9uQ29udGV4dDtcclxuRXZhbHVhdGlvbkNvbnRleHQuaW5pdCgpO1xyXG52YXIgRXZhbHVhdGlvbk5vZGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFdmFsdWF0aW9uTm9kZSgpIHtcclxuICAgIH1cclxuICAgIHJldHVybiBFdmFsdWF0aW9uTm9kZTtcclxufSgpKTtcclxudmFyIEV4cHJlc3Npb25Ob2RlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEV4cHJlc3Npb25Ob2RlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRXhwcmVzc2lvbk5vZGUoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMubm9kZXMgPSBbXTtcclxuICAgICAgICBfdGhpcy5hbGxvd051bGwgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEV4cHJlc3Npb25Ob2RlLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XHJcbiAgICAgICAgdmFyIG9wZXJhdG9yUHJpb3JpdHlHcm91cHMgPSBbXHJcbiAgICAgICAgICAgIFtcIi9cIiwgXCIqXCJdLFxyXG4gICAgICAgICAgICBbXCItXCIsIFwiK1wiXSxcclxuICAgICAgICAgICAgW1wiPT1cIiwgXCIhPVwiLCBcIjxcIiwgXCI8PVwiLCBcIj5cIiwgXCI+PVwiXVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgdmFyIG5vZGVzQ29weSA9IHRoaXMubm9kZXMuc2xpY2UoKTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG9wZXJhdG9yUHJpb3JpdHlHcm91cHNfMSA9IG9wZXJhdG9yUHJpb3JpdHlHcm91cHM7IF9pIDwgb3BlcmF0b3JQcmlvcml0eUdyb3Vwc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgcHJpb3JpdHlHcm91cCA9IG9wZXJhdG9yUHJpb3JpdHlHcm91cHNfMVtfaV07XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKGkgPCBub2Rlc0NvcHkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IG5vZGVzQ29weVtpXTtcclxuICAgICAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgT3BlcmF0b3JOb2RlICYmIHByaW9yaXR5R3JvdXAuaW5kZXhPZihub2RlLm9wZXJhdG9yKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBlbnN1cmVWYWx1ZVR5cGUobm9kZXNDb3B5W2kgLSAxXS5ldmFsdWF0ZShjb250ZXh0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gZW5zdXJlVmFsdWVUeXBlKG5vZGVzQ29weVtpICsgMV0uZXZhbHVhdGUoY29udGV4dCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbGVmdCAhPT0gdHlwZW9mIHJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluY29tcGF0aWJsZSBvcGVyYW5kcyBcIiArIGxlZnQgKyBcIiBhbmQgXCIgKyByaWdodCArIFwiIGZvciBvcGVyYXRvciBcIiArIG5vZGUub3BlcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdm9pZCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbGVmdCA9PT0gXCJudW1iZXJcIiAmJiB0eXBlb2YgcmlnaHQgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChub2RlLm9wZXJhdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiL1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGxlZnQgLyByaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIqXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbGVmdCAqIHJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIi1cIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBsZWZ0IC0gcmlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiK1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGxlZnQgKyByaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGxlZnQgPT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIHJpZ2h0ID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobm9kZS5vcGVyYXRvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIitcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBsZWZ0ICsgcmlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChub2RlLm9wZXJhdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCI9PVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbGVmdCA9PT0gcmlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiE9XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBsZWZ0ICE9PSByaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiPFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbGVmdCA8IHJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCI8PVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbGVmdCA8PSByaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiPlwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbGVmdCA+IHJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCI+PVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbGVmdCA+PSByaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHNob3VsZCBuZXZlciBoYXBwZW5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZXNDb3B5LnNwbGljZShpIC0gMSwgMywgbmV3IExpdGVyYWxOb2RlKHJlc3VsdCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGktLTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBub2Rlc0NvcHlbMF0uZXZhbHVhdGUoY29udGV4dCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEV4cHJlc3Npb25Ob2RlO1xyXG59KEV2YWx1YXRpb25Ob2RlKSk7XHJcbnZhciBJZGVudGlmaWVyTm9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhJZGVudGlmaWVyTm9kZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIElkZW50aWZpZXJOb2RlKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIElkZW50aWZpZXJOb2RlLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaWRlbnRpZmllcjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSWRlbnRpZmllck5vZGU7XHJcbn0oRXZhbHVhdGlvbk5vZGUpKTtcclxudmFyIEluZGV4ZXJOb2RlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEluZGV4ZXJOb2RlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gSW5kZXhlck5vZGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgSW5kZXhlck5vZGUucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbmRleC5ldmFsdWF0ZShjb250ZXh0KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSW5kZXhlck5vZGU7XHJcbn0oRXZhbHVhdGlvbk5vZGUpKTtcclxudmFyIEZ1bmN0aW9uQ2FsbE5vZGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoRnVuY3Rpb25DYWxsTm9kZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEZ1bmN0aW9uQ2FsbE5vZGUoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuZnVuY3Rpb25OYW1lID0gbnVsbDtcclxuICAgICAgICBfdGhpcy5wYXJhbWV0ZXJzID0gW107XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgRnVuY3Rpb25DYWxsTm9kZS5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAoY29udGV4dCkge1xyXG4gICAgICAgIHZhciBjYWxsYmFjayA9IGNvbnRleHQuZ2V0RnVuY3Rpb24odGhpcy5mdW5jdGlvbk5hbWUpO1xyXG4gICAgICAgIGlmIChjYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHZhciBldmFsdWF0ZWRQYXJhbXMgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMucGFyYW1ldGVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJhbSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGV2YWx1YXRlZFBhcmFtcy5wdXNoKHBhcmFtLmV2YWx1YXRlKGNvbnRleHQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkodm9pZCAwLCBldmFsdWF0ZWRQYXJhbXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmRlZmluZWQgZnVuY3Rpb246IFwiICsgdGhpcy5mdW5jdGlvbk5hbWUpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGdW5jdGlvbkNhbGxOb2RlO1xyXG59KEV2YWx1YXRpb25Ob2RlKSk7XHJcbnZhciBMaXRlcmFsTm9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhMaXRlcmFsTm9kZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIExpdGVyYWxOb2RlKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIExpdGVyYWxOb2RlLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIExpdGVyYWxOb2RlO1xyXG59KEV2YWx1YXRpb25Ob2RlKSk7XHJcbnZhciBPcGVyYXRvck5vZGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoT3BlcmF0b3JOb2RlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gT3BlcmF0b3JOb2RlKG9wZXJhdG9yKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5vcGVyYXRvciA9IG9wZXJhdG9yO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIE9wZXJhdG9yTm9kZS5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAoY29udGV4dCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFuIG9wZXJhdG9yIGNhbm5vdCBiZSBldmFsdWF0ZWQgb24gaXRzIG93bi5cIik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE9wZXJhdG9yTm9kZTtcclxufShFdmFsdWF0aW9uTm9kZSkpO1xyXG52YXIgUGF0aE5vZGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoUGF0aE5vZGUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBQYXRoTm9kZSgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5wYXJ0cyA9IFtdO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFBhdGhOb2RlLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB2YXIgaW5kZXggPSAwO1xyXG4gICAgICAgIHdoaWxlIChpbmRleCA8IHRoaXMucGFydHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gdGhpcy5wYXJ0c1tpbmRleF07XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIElkZW50aWZpZXJOb2RlICYmIGluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwYXJ0LmlkZW50aWZpZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiRyb290XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBjb250ZXh0LiRyb290O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIkZGF0YVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gY29udGV4dC5jdXJyZW50RGF0YUNvbnRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiRpbmRleFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gY29udGV4dC4kaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNvbnRleHQuY3VycmVudERhdGFDb250ZXh0W3BhcnQuaWRlbnRpZmllcl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydFZhbHVlID0gcGFydC5ldmFsdWF0ZShjb250ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcGFydFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdHlwZW9mIHBhcnRWYWx1ZSAhPT0gXCJib29sZWFuXCIgPyByZXN1bHRbcGFydFZhbHVlXSA6IHJlc3VsdFtwYXJ0VmFsdWUudG9TdHJpbmcoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBhdGhOb2RlO1xyXG59KEV2YWx1YXRpb25Ob2RlKSk7XHJcbnZhciBFeHByZXNzaW9uUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRXhwcmVzc2lvblBhcnNlcih0b2tlbnMpIHtcclxuICAgICAgICB0aGlzLl9pbmRleCA9IDA7XHJcbiAgICAgICAgdGhpcy5fdG9rZW5zID0gdG9rZW5zO1xyXG4gICAgfVxyXG4gICAgRXhwcmVzc2lvblBhcnNlci5wcm90b3R5cGUudW5leHBlY3RlZFRva2VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgdG9rZW4gXCIgKyB0aGlzLmN1cnJlbnQudmFsdWUgKyBcIiBhdCBwb3NpdGlvbiBcIiArIHRoaXMuY3VycmVudC5vcmlnaW5hbFBvc2l0aW9uICsgXCIuXCIpO1xyXG4gICAgfTtcclxuICAgIEV4cHJlc3Npb25QYXJzZXIucHJvdG90eXBlLnVuZXhwZWN0ZWRFb2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBlbmQgb2YgZXhwcmVzc2lvbi5cIik7XHJcbiAgICB9O1xyXG4gICAgRXhwcmVzc2lvblBhcnNlci5wcm90b3R5cGUubW92ZU5leHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5faW5kZXgrKztcclxuICAgIH07XHJcbiAgICBFeHByZXNzaW9uUGFyc2VyLnByb3RvdHlwZS5wYXJzZVRva2VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBleHBlY3RlZFRva2VuVHlwZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBleHBlY3RlZFRva2VuVHlwZXNbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZW9lKSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5leHBlY3RlZEVvZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY3VycmVudFRva2VuID0gdGhpcy5jdXJyZW50O1xyXG4gICAgICAgIGlmIChleHBlY3RlZFRva2VuVHlwZXMuaW5kZXhPZih0aGlzLmN1cnJlbnQudHlwZSkgPCAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5leHBlY3RlZFRva2VuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubW92ZU5leHQoKTtcclxuICAgICAgICByZXR1cm4gY3VycmVudFRva2VuO1xyXG4gICAgfTtcclxuICAgIEV4cHJlc3Npb25QYXJzZXIucHJvdG90eXBlLnBhcnNlT3B0aW9uYWxUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZXhwZWN0ZWRUb2tlblR5cGVzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZXhwZWN0ZWRUb2tlblR5cGVzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmVvZSkge1xyXG4gICAgICAgICAgICB0aGlzLnVuZXhwZWN0ZWRFb2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZXhwZWN0ZWRUb2tlblR5cGVzLmluZGV4T2YodGhpcy5jdXJyZW50LnR5cGUpIDwgMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVOZXh0KCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBFeHByZXNzaW9uUGFyc2VyLnByb3RvdHlwZS5wYXJzZUZ1bmN0aW9uQ2FsbCA9IGZ1bmN0aW9uIChmdW5jdGlvbk5hbWUpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEZ1bmN0aW9uQ2FsbE5vZGUoKTtcclxuICAgICAgICByZXN1bHQuZnVuY3Rpb25OYW1lID0gZnVuY3Rpb25OYW1lO1xyXG4gICAgICAgIHRoaXMucGFyc2VUb2tlbihcIihcIik7XHJcbiAgICAgICAgdmFyIGZpcnN0UGFyYW1ldGVyID0gdGhpcy5wYXJzZUV4cHJlc3Npb24oKTtcclxuICAgICAgICB2YXIgbW9yZVBhcmFtZXRlcnMgPSBmYWxzZTtcclxuICAgICAgICBpZiAoZmlyc3RQYXJhbWV0ZXIpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnBhcmFtZXRlcnMucHVzaChmaXJzdFBhcmFtZXRlcik7XHJcbiAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgIG1vcmVQYXJhbWV0ZXJzID0gdGhpcy5wYXJzZU9wdGlvbmFsVG9rZW4oXCIsXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1vcmVQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtZXRlciA9IHRoaXMucGFyc2VFeHByZXNzaW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnBhcmFtZXRlcnMucHVzaChwYXJhbWV0ZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IHdoaWxlIChtb3JlUGFyYW1ldGVycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucGFyc2VUb2tlbihcIilcIik7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBFeHByZXNzaW9uUGFyc2VyLnByb3RvdHlwZS5wYXJzZUlkZW50aWZpZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBJZGVudGlmaWVyTm9kZSgpO1xyXG4gICAgICAgIHJlc3VsdC5pZGVudGlmaWVyID0gdGhpcy5jdXJyZW50LnZhbHVlO1xyXG4gICAgICAgIHRoaXMubW92ZU5leHQoKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIEV4cHJlc3Npb25QYXJzZXIucHJvdG90eXBlLnBhcnNlSW5kZXhlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEluZGV4ZXJOb2RlKCk7XHJcbiAgICAgICAgdGhpcy5wYXJzZVRva2VuKFwiW1wiKTtcclxuICAgICAgICByZXN1bHQuaW5kZXggPSB0aGlzLnBhcnNlRXhwcmVzc2lvbigpO1xyXG4gICAgICAgIHRoaXMucGFyc2VUb2tlbihcIl1cIik7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBFeHByZXNzaW9uUGFyc2VyLnByb3RvdHlwZS5wYXJzZVBhdGggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBQYXRoTm9kZSgpO1xyXG4gICAgICAgIHZhciBleHBlY3RlZE5leHRUb2tlblR5cGVzID0gW1wiaWRlbnRpZmllclwiLCBcIihcIl07XHJcbiAgICAgICAgd2hpbGUgKCF0aGlzLmVvZSkge1xyXG4gICAgICAgICAgICBpZiAoZXhwZWN0ZWROZXh0VG9rZW5UeXBlcy5pbmRleE9mKHRoaXMuY3VycmVudC50eXBlKSA8IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmN1cnJlbnQudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIihcIjpcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnBhcnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmVOZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wYXJ0cy5wdXNoKHRoaXMucGFyc2VFeHByZXNzaW9uKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlVG9rZW4oXCIpXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZ1bmN0aW9uTmFtZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSByZXN1bHQucGFydHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFydCA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHBhcnQgaW5zdGFuY2VvZiBJZGVudGlmaWVyTm9kZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZXhwZWN0ZWRUb2tlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZ1bmN0aW9uTmFtZSAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uTmFtZSArPSBcIi5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uTmFtZSArPSBwYXJ0LmlkZW50aWZpZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnBhcnRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wYXJ0cy5wdXNoKHRoaXMucGFyc2VGdW5jdGlvbkNhbGwoZnVuY3Rpb25OYW1lKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkTmV4dFRva2VuVHlwZXMgPSBbXCIuXCIsIFwiW1wiXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJbXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnBhcnRzLnB1c2godGhpcy5wYXJzZUluZGV4ZXIoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWROZXh0VG9rZW5UeXBlcyA9IFtcIi5cIiwgXCIoXCIsIFwiW1wiXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJpZGVudGlmaWVyXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnBhcnRzLnB1c2godGhpcy5wYXJzZUlkZW50aWZpZXIoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWROZXh0VG9rZW5UeXBlcyA9IFtcIi5cIiwgXCIoXCIsIFwiW1wiXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIuXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlTmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkTmV4dFRva2VuVHlwZXMgPSBbXCJpZGVudGlmaWVyXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3RlZE5leHRUb2tlblR5cGVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRXhwcmVzc2lvblBhcnNlci5wcm90b3R5cGUucGFyc2VFeHByZXNzaW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBuZXcgRXhwcmVzc2lvbk5vZGUoKTtcclxuICAgICAgICB2YXIgZXhwZWN0ZWROZXh0VG9rZW5UeXBlcyA9IGxpdGVyYWxzLmNvbmNhdChcIihcIiwgXCIrXCIsIFwiLVwiKTtcclxuICAgICAgICB3aGlsZSAoIXRoaXMuZW9lKSB7XHJcbiAgICAgICAgICAgIGlmIChleHBlY3RlZE5leHRUb2tlblR5cGVzLmluZGV4T2YodGhpcy5jdXJyZW50LnR5cGUpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5ub2Rlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZXhwZWN0ZWRUb2tlbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuY3VycmVudC50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiKFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcImlkZW50aWZpZXJcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQubm9kZXMucHVzaCh0aGlzLnBhcnNlUGF0aCgpKTtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3RlZE5leHRUb2tlblR5cGVzID0gb3JkZXJlZE9wZXJhdG9ycztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJudW1iZXJcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJib29sZWFuXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudC50eXBlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5ub2Rlcy5wdXNoKG5ldyBMaXRlcmFsTm9kZSh0aGlzLmN1cnJlbnQudmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jdXJyZW50LnR5cGUgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lm5vZGVzLnB1c2gobmV3IExpdGVyYWxOb2RlKHBhcnNlRmxvYXQodGhpcy5jdXJyZW50LnZhbHVlKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lm5vZGVzLnB1c2gobmV3IExpdGVyYWxOb2RlKHRoaXMuY3VycmVudC52YWx1ZSA9PT0gXCJ0cnVlXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlTmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkTmV4dFRva2VuVHlwZXMgPSBvcmRlcmVkT3BlcmF0b3JzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIi1cIjpcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lm5vZGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQubm9kZXMucHVzaChuZXcgTGl0ZXJhbE5vZGUoLTEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lm5vZGVzLnB1c2gobmV3IE9wZXJhdG9yTm9kZShcIipcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZE5leHRUb2tlblR5cGVzID0gW1wiaWRlbnRpZmllclwiLCBcIm51bWJlclwiLCBcIihcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQubm9kZXMucHVzaChuZXcgT3BlcmF0b3JOb2RlKHRoaXMuY3VycmVudC50eXBlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkTmV4dFRva2VuVHlwZXMgPSBsaXRlcmFscy5jb25jYXQoXCIoXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmVOZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiK1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubm9kZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkTmV4dFRva2VuVHlwZXMgPSBsaXRlcmFscy5jb25jYXQoXCIoXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lm5vZGVzLnB1c2gobmV3IE9wZXJhdG9yTm9kZSh0aGlzLmN1cnJlbnQudHlwZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZE5leHRUb2tlblR5cGVzID0gbGl0ZXJhbHMuY29uY2F0KFwiKFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlTmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIipcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIvXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiPT1cIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIhPVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIjxcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCI8PVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIj5cIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCI+PVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5ub2Rlcy5wdXNoKG5ldyBPcGVyYXRvck5vZGUodGhpcy5jdXJyZW50LnR5cGUpKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmVOZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWROZXh0VG9rZW5UeXBlcyA9IGxpdGVyYWxzLmNvbmNhdChcIihcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkTmV4dFRva2VuVHlwZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRXhwcmVzc2lvblBhcnNlci5wcm90b3R5cGUsIFwiZW9lXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2luZGV4ID49IHRoaXMuX3Rva2Vucy5sZW5ndGg7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRXhwcmVzc2lvblBhcnNlci5wcm90b3R5cGUsIFwiY3VycmVudFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90b2tlbnNbdGhpcy5faW5kZXhdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgRXhwcmVzc2lvblBhcnNlci5wYXJzZUJpbmRpbmcgPSBmdW5jdGlvbiAoZXhwcmVzc2lvblN0cmluZykge1xyXG4gICAgICAgIHZhciBwYXJzZXIgPSBuZXcgRXhwcmVzc2lvblBhcnNlcihUb2tlbml6ZXIucGFyc2UoZXhwcmVzc2lvblN0cmluZykpO1xyXG4gICAgICAgIHBhcnNlci5wYXJzZVRva2VuKFwie1wiKTtcclxuICAgICAgICB2YXIgYWxsb3dOdWxsID0gIXBhcnNlci5wYXJzZU9wdGlvbmFsVG9rZW4oXCI/I1wiKTtcclxuICAgICAgICB2YXIgZXhwcmVzc2lvbiA9IHBhcnNlci5wYXJzZUV4cHJlc3Npb24oKTtcclxuICAgICAgICBwYXJzZXIucGFyc2VUb2tlbihcIn1cIik7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCaW5kaW5nKGV4cHJlc3Npb25TdHJpbmcsIGV4cHJlc3Npb24sIGFsbG93TnVsbCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEV4cHJlc3Npb25QYXJzZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRXhwcmVzc2lvblBhcnNlciA9IEV4cHJlc3Npb25QYXJzZXI7XHJcbnZhciBCaW5kaW5nID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQmluZGluZyhleHByZXNzaW9uU3RyaW5nLCBleHByZXNzaW9uLCBhbGxvd051bGwpIHtcclxuICAgICAgICBpZiAoYWxsb3dOdWxsID09PSB2b2lkIDApIHsgYWxsb3dOdWxsID0gdHJ1ZTsgfVxyXG4gICAgICAgIHRoaXMuZXhwcmVzc2lvblN0cmluZyA9IGV4cHJlc3Npb25TdHJpbmc7XHJcbiAgICAgICAgdGhpcy5leHByZXNzaW9uID0gZXhwcmVzc2lvbjtcclxuICAgICAgICB0aGlzLmFsbG93TnVsbCA9IGFsbG93TnVsbDtcclxuICAgIH1cclxuICAgIEJpbmRpbmcucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKGNvbnRleHQpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBCaW5kaW5nO1xyXG59KCkpO1xyXG5leHBvcnRzLkJpbmRpbmcgPSBCaW5kaW5nO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1leHByZXNzaW9uLXBhcnNlci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG52YXIgR2xvYmFsU2V0dGluZ3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBHbG9iYWxTZXR0aW5ncygpIHtcclxuICAgIH1cclxuICAgIEdsb2JhbFNldHRpbmdzLnVuZGVmaW5lZEV4cHJlc3Npb25WYWx1ZVN1YnN0aXR1dGlvblN0cmluZyA9IHVuZGVmaW5lZDtcclxuICAgIHJldHVybiBHbG9iYWxTZXR0aW5ncztcclxufSgpKTtcclxuZXhwb3J0cy5HbG9iYWxTZXR0aW5ncyA9IEdsb2JhbFNldHRpbmdzO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGFyZWQuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxudmFyIGV4cHJlc3Npb25fcGFyc2VyXzEgPSByZXF1aXJlKFwiLi9leHByZXNzaW9uLXBhcnNlclwiKTtcclxudmFyIFNoYXJlZCA9IHJlcXVpcmUoXCIuL3NoYXJlZFwiKTtcclxudmFyIFRlbXBsYXRpemVkU3RyaW5nID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVGVtcGxhdGl6ZWRTdHJpbmcoKSB7XHJcbiAgICAgICAgdGhpcy5fcGFydHMgPSBbXTtcclxuICAgICAgICB0aGlzLl9zaG91bGREcm9wT3duZXIgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIFRlbXBsYXRpemVkU3RyaW5nLnBhcnNlID0gZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFRlbXBsYXRpemVkU3RyaW5nKCk7XHJcbiAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAgdmFyIGV4cHJlc3Npb25Gb3VuZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBpO1xyXG4gICAgICAgICAgICB2YXIgbG9vcCA9IHZvaWQgMDtcclxuICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgbG9vcCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgc3RhcnQgPSBzLmluZGV4T2YoXCJ7XCIsIHN0YXJ0KTtcclxuICAgICAgICAgICAgICAgIGlmIChzdGFydCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0ICsgMSA8IHMubGVuZ3RoICYmIHNbc3RhcnQgKyAxXSA9PT0gXCJ7XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQgKz0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9vcCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IHdoaWxlIChsb29wKTtcclxuICAgICAgICAgICAgaWYgKHN0YXJ0ID49IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBzLmluZGV4T2YoXCJ9XCIsIHN0YXJ0KTtcclxuICAgICAgICAgICAgICAgIGlmIChlbmQgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb25Gb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0ID4gaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuX3BhcnRzLnB1c2gocy5zdWJzdHJpbmcoaSwgc3RhcnQpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpbmRuZ0V4cHJlc3Npb24gPSBzLnN1YnN0cmluZyhzdGFydCwgZW5kICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnQgPSB2b2lkIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydCA9IGV4cHJlc3Npb25fcGFyc2VyXzEuRXhwcmVzc2lvblBhcnNlci5wYXJzZUJpbmRpbmcoYmluZG5nRXhwcmVzc2lvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQgPSBiaW5kbmdFeHByZXNzaW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuX3BhcnRzLnB1c2gocGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaSA9IGVuZCArIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFleHByZXNzaW9uRm91bmQpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5fcGFydHMucHVzaChzLnN1YnN0cihpKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gd2hpbGUgKGkgPCBzLmxlbmd0aCk7XHJcbiAgICAgICAgaWYgKHJlc3VsdC5fcGFydHMubGVuZ3RoID09PSAxICYmIHR5cGVvZiByZXN1bHQuX3BhcnRzWzBdID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuX3BhcnRzWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVGVtcGxhdGl6ZWRTdHJpbmcucHJvdG90eXBlLmV2YWxFeHByZXNzaW9uID0gZnVuY3Rpb24gKGJpbmRpbmdFeHByZXNzaW9uLCBjb250ZXh0KSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IGJpbmRpbmdFeHByZXNzaW9uLmV2YWx1YXRlKGNvbnRleHQpO1xyXG4gICAgICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zaG91bGREcm9wT3duZXIgPSB0aGlzLl9zaG91bGREcm9wT3duZXIgfHwgIWJpbmRpbmdFeHByZXNzaW9uLmFsbG93TnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBUZW1wbGF0aXplZFN0cmluZy5wcm90b3R5cGUuaW50ZXJuYWxFdmFsdWF0ZSA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3BhcnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLl9wYXJ0cy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHRlbXBsYXRpemVkIHN0cmluZyBvbmx5IGhhcyAxIHBhcnQsIHdlIHdhbnQgaXQgdG8gZXZhbHVhdGVcclxuICAgICAgICAgICAgLy8gdG8gc2FtZSB0aGUgdHlwZSBhcyBwcm9kdWNlZCBieSB0aGUgZXhwcmVzc2lvblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuX3BhcnRzWzBdID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcGFydHNbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ldmFsRXhwcmVzc2lvbih0aGlzLl9wYXJ0c1swXSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSB0ZW1wbGF0aXplZCBzdHJpbmcgaGFzIG11bHRpcGxlIHBhcnRzLCB3ZSB3YW50IGl0IHRvIGV2YWx1YXRlXHJcbiAgICAgICAgICAgIC8vIHRvIGEgc3RyaW5nLiBJbiB0aGF0IGNvbnRleHQsIGVhY2ggcGFydCB0aGF0IGV2YWx1YXRlcyB0byB1bmRlZmluZWRcclxuICAgICAgICAgICAgLy8gZ2V0cyByZXBsYWNlZCBieSB0aGUgb3JpZ2luYWwgZXhwcmVzc2lvbiBieSBkZWZhdWx0IG9yIGJ5IGEgcmVzb3VyY2VcclxuICAgICAgICAgICAgLy8gc3RyaW5nIHByb3ZpZGVkIGJ5IHRoZSBhcHBsaWNhdGlvblxyXG4gICAgICAgICAgICB2YXIgcyA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLl9wYXJ0czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJ0ID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcyArPSBwYXJ0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV2YWx1YXRlZFBhcnQgPSB0aGlzLmV2YWxFeHByZXNzaW9uKHBhcnQsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmFsdWF0ZWRQYXJ0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZhbHVhdGVkUGFydCA9IFNoYXJlZC5HbG9iYWxTZXR0aW5ncy51bmRlZmluZWRFeHByZXNzaW9uVmFsdWVTdWJzdGl0dXRpb25TdHJpbmcgPyBTaGFyZWQuR2xvYmFsU2V0dGluZ3MudW5kZWZpbmVkRXhwcmVzc2lvblZhbHVlU3Vic3RpdHV0aW9uU3RyaW5nIDogcGFydC5leHByZXNzaW9uU3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzICs9IGV2YWx1YXRlZFBhcnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFRlbXBsYXRpemVkU3RyaW5nLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5fc2hvdWxkRHJvcE93bmVyID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxFdmFsdWF0ZShjb250ZXh0KTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGVtcGxhdGl6ZWRTdHJpbmcucHJvdG90eXBlLCBcInNob3VsZERyb3BPd25lclwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zaG91bGREcm9wT3duZXI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gVGVtcGxhdGl6ZWRTdHJpbmc7XHJcbn0oKSk7XHJcbnZhciBUZW1wbGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRlbXBsYXRlKHBheWxvYWQpIHtcclxuICAgICAgICB0aGlzLnByZXBhcmVkUGF5bG9hZCA9IFRlbXBsYXRlLnByZXBhcmUocGF5bG9hZCk7XHJcbiAgICB9XHJcbiAgICBUZW1wbGF0ZS5wcmVwYXJlID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICBpZiAodHlwZW9mIG5vZGUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRlbXBsYXRpemVkU3RyaW5nLnBhcnNlKG5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2Ygbm9kZSA9PT0gXCJvYmplY3RcIiAmJiBub2RlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG5vZGVfMSA9IG5vZGU7IF9pIDwgbm9kZV8xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gbm9kZV8xW19pXTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChUZW1wbGF0ZS5wcmVwYXJlKGl0ZW0pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBrZXlzXzEgPSBrZXlzOyBfYSA8IGtleXNfMS5sZW5ndGg7IF9hKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0ga2V5c18xW19hXTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IFRlbXBsYXRlLnByZXBhcmUobm9kZVtrZXldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUZW1wbGF0ZS5wcm90b3R5cGUuZXhwYW5kU2luZ2xlT2JqZWN0ID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhub2RlKTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGtleXNfMiA9IGtleXM7IF9pIDwga2V5c18yLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0ga2V5c18yW19pXTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9jb250ZXh0LmlzUmVzZXJ2ZWRGaWVsZChrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmludGVybmFsRXhwYW5kKG5vZGVba2V5XSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBUZW1wbGF0ZS5wcm90b3R5cGUuaW50ZXJuYWxFeHBhbmQgPSBmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgdGhpcy5fY29udGV4dC5zYXZlU3RhdGUoKTtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub2RlKSkge1xyXG4gICAgICAgICAgICB2YXIgaXRlbUFycmF5ID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgbm9kZV8yID0gbm9kZTsgX2kgPCBub2RlXzIubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IG5vZGVfMltfaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgZXhwYW5kZWRJdGVtID0gdGhpcy5pbnRlcm5hbEV4cGFuZChpdGVtKTtcclxuICAgICAgICAgICAgICAgIGlmIChleHBhbmRlZEl0ZW0gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShleHBhbmRlZEl0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1BcnJheSA9IGl0ZW1BcnJheS5jb25jYXQoZXhwYW5kZWRJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1BcnJheS5wdXNoKGV4cGFuZGVkSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGl0ZW1BcnJheTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobm9kZSBpbnN0YW5jZW9mIFRlbXBsYXRpemVkU3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IG5vZGUuZXZhbHVhdGUodGhpcy5fY29udGV4dCk7XHJcbiAgICAgICAgICAgIGlmIChub2RlLnNob3VsZERyb3BPd25lcikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2Ygbm9kZSA9PT0gXCJvYmplY3RcIiAmJiBub2RlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHZhciBkcm9wT2JqZWN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciB3aGVuID0gbm9kZVtcIiR3aGVuXCJdO1xyXG4gICAgICAgICAgICBpZiAod2hlbiBpbnN0YW5jZW9mIFRlbXBsYXRpemVkU3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2hlblZhbHVlID0gdm9pZCAwO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB3aGVuVmFsdWUgPSB3aGVuLmV2YWx1YXRlKHRoaXMuX2NvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmICR3aGVuIGRvZXNuJ3QgZXZhbHVhdGUgdG8gYSBib29sZWFuLCBjb25zaWRlciBpdCBpcyBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2hlblZhbHVlICE9PSBcImJvb2xlYW5cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVuVmFsdWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBoaXQgYW4gZXhjZXB0aW9uLCBjb25zaWRlciAkd2hlbiB0byBiZSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHdoZW5WYWx1ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZHJvcE9iamVjdCA9ICF3aGVuVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFkcm9wT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YUNvbnRleHQgPSBub2RlW1wiJGRhdGFcIl07XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YUNvbnRleHQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhQ29udGV4dCBpbnN0YW5jZW9mIFRlbXBsYXRpemVkU3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFDb250ZXh0ID0gZGF0YUNvbnRleHQuZXZhbHVhdGUodGhpcy5fY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGFDb250ZXh0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhQ29udGV4dC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29udGV4dC4kZGF0YSA9IGRhdGFDb250ZXh0W2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29udGV4dC4kaW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4cGFuZGVkT2JqZWN0ID0gdGhpcy5leHBhbmRTaW5nbGVPYmplY3Qobm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhwYW5kZWRPYmplY3QgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChleHBhbmRlZE9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuJGRhdGEgPSBkYXRhQ29udGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5leHBhbmRTaW5nbGVPYmplY3Qobm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5leHBhbmRTaW5nbGVPYmplY3Qobm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBub2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9jb250ZXh0LnJlc3RvcmVMYXN0U3RhdGUoKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIFRlbXBsYXRlLnByb3RvdHlwZS5leHBhbmQgPSBmdW5jdGlvbiAoY29udGV4dCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsRXhwYW5kKHRoaXMucHJlcGFyZWRQYXlsb2FkKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVGVtcGxhdGU7XHJcbn0oKSk7XHJcbmV4cG9ydHMuVGVtcGxhdGUgPSBUZW1wbGF0ZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGVtcGxhdGUtZW5naW5lLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG5mdW5jdGlvbiBfX2V4cG9ydChtKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5fX2V4cG9ydChyZXF1aXJlKFwiLi9jYXJkLWVsZW1lbnRzXCIpKTtcclxuX19leHBvcnQocmVxdWlyZShcIi4vZW51bXNcIikpO1xyXG5fX2V4cG9ydChyZXF1aXJlKFwiLi9ob3N0LWNvbmZpZ1wiKSk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL3NoYXJlZFwiKSk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL3V0aWxzXCIpKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRhcHRpdmVjYXJkcy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxudmFyIEVudW1zID0gcmVxdWlyZShcIi4vZW51bXNcIik7XHJcbnZhciBTaGFyZWQgPSByZXF1aXJlKFwiLi9zaGFyZWRcIik7XHJcbnZhciBVdGlscyA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xyXG52YXIgSG9zdENvbmZpZyA9IHJlcXVpcmUoXCIuL2hvc3QtY29uZmlnXCIpO1xyXG52YXIgVGV4dEZvcm1hdHRlcnMgPSByZXF1aXJlKFwiLi90ZXh0LWZvcm1hdHRlcnNcIik7XHJcbmZ1bmN0aW9uIGludm9rZVNldENvbGxlY3Rpb24oYWN0aW9uLCBjb2xsZWN0aW9uKSB7XHJcbiAgICBpZiAoYWN0aW9uKSB7XHJcbiAgICAgICAgLy8gQ2xvc2VzdCBlbXVsYXRpb24gb2YgXCJpbnRlcm5hbFwiIGluIFR5cGVTY3JpcHQuXHJcbiAgICAgICAgYWN0aW9uW1wic2V0Q29sbGVjdGlvblwiXShjb2xsZWN0aW9uKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc0FjdGlvbkFsbG93ZWQoYWN0aW9uLCBmb3JiaWRkZW5BY3Rpb25UeXBlcykge1xyXG4gICAgaWYgKGZvcmJpZGRlbkFjdGlvblR5cGVzKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmb3JiaWRkZW5BY3Rpb25UeXBlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoYWN0aW9uLmdldEpzb25UeXBlTmFtZSgpID09PSBmb3JiaWRkZW5BY3Rpb25UeXBlc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxudmFyIEluc3RhbmNlQ3JlYXRpb25FcnJvclR5cGU7XHJcbihmdW5jdGlvbiAoSW5zdGFuY2VDcmVhdGlvbkVycm9yVHlwZSkge1xyXG4gICAgSW5zdGFuY2VDcmVhdGlvbkVycm9yVHlwZVtJbnN0YW5jZUNyZWF0aW9uRXJyb3JUeXBlW1wiVW5rbm93blR5cGVcIl0gPSAwXSA9IFwiVW5rbm93blR5cGVcIjtcclxuICAgIEluc3RhbmNlQ3JlYXRpb25FcnJvclR5cGVbSW5zdGFuY2VDcmVhdGlvbkVycm9yVHlwZVtcIkZvcmJpZGRlblR5cGVcIl0gPSAxXSA9IFwiRm9yYmlkZGVuVHlwZVwiO1xyXG59KShJbnN0YW5jZUNyZWF0aW9uRXJyb3JUeXBlIHx8IChJbnN0YW5jZUNyZWF0aW9uRXJyb3JUeXBlID0ge30pKTtcclxuZnVuY3Rpb24gY3JlYXRlQ2FyZE9iamVjdEluc3RhbmNlKHBhcmVudCwganNvbiwgZm9yYmlkZGVuVHlwZU5hbWVzLCBhbGxvd0ZhbGxiYWNrLCBjcmVhdGVJbnN0YW5jZUNhbGxiYWNrLCBjcmVhdGVWYWxpZGF0aW9uRXJyb3JDYWxsYmFjaywgZXJyb3JzKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gbnVsbDtcclxuICAgIGlmIChqc29uICYmIHR5cGVvZiBqc29uID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgdmFyIHRyeVRvRmFsbGJhY2sgPSBmYWxzZTtcclxuICAgICAgICB2YXIgdHlwZU5hbWUgPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1widHlwZVwiXSk7XHJcbiAgICAgICAgaWYgKGZvcmJpZGRlblR5cGVOYW1lcyAmJiBmb3JiaWRkZW5UeXBlTmFtZXMuaW5kZXhPZih0eXBlTmFtZSkgPj0gMCkge1xyXG4gICAgICAgICAgICByYWlzZVBhcnNlRXJyb3IoY3JlYXRlVmFsaWRhdGlvbkVycm9yQ2FsbGJhY2sodHlwZU5hbWUsIEluc3RhbmNlQ3JlYXRpb25FcnJvclR5cGUuRm9yYmlkZGVuVHlwZSksIGVycm9ycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBjcmVhdGVJbnN0YW5jZUNhbGxiYWNrKHR5cGVOYW1lKTtcclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHRyeVRvRmFsbGJhY2sgPSBhbGxvd0ZhbGxiYWNrO1xyXG4gICAgICAgICAgICAgICAgcmFpc2VQYXJzZUVycm9yKGNyZWF0ZVZhbGlkYXRpb25FcnJvckNhbGxiYWNrKHR5cGVOYW1lLCBJbnN0YW5jZUNyZWF0aW9uRXJyb3JUeXBlLlVua25vd25UeXBlKSwgZXJyb3JzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5zZXRQYXJlbnQocGFyZW50KTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wYXJzZShqc29uLCBlcnJvcnMpO1xyXG4gICAgICAgICAgICAgICAgdHJ5VG9GYWxsYmFjayA9IHJlc3VsdC5zaG91bGRGYWxsYmFjaygpICYmIGFsbG93RmFsbGJhY2s7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRyeVRvRmFsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHZhciBmYWxsYmFjayA9IGpzb25bXCJmYWxsYmFja1wiXTtcclxuICAgICAgICAgICAgICAgIGlmICghZmFsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuc2V0U2hvdWxkRmFsbGJhY2sodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZhbGxiYWNrID09PSBcInN0cmluZ1wiICYmIGZhbGxiYWNrLnRvTG93ZXJDYXNlKCkgPT09IFwiZHJvcFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBmYWxsYmFjayA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNyZWF0ZUNhcmRPYmplY3RJbnN0YW5jZShwYXJlbnQsIGZhbGxiYWNrLCBmb3JiaWRkZW5UeXBlTmFtZXMsIHRydWUsIGNyZWF0ZUluc3RhbmNlQ2FsbGJhY2ssIGNyZWF0ZVZhbGlkYXRpb25FcnJvckNhbGxiYWNrLCBlcnJvcnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVBY3Rpb25JbnN0YW5jZShwYXJlbnQsIGpzb24sIGZvcmJpZGRlbkFjdGlvblR5cGVzLCBhbGxvd0ZhbGxiYWNrLCBlcnJvcnMpIHtcclxuICAgIHJldHVybiBjcmVhdGVDYXJkT2JqZWN0SW5zdGFuY2UocGFyZW50LCBqc29uLCBmb3JiaWRkZW5BY3Rpb25UeXBlcywgYWxsb3dGYWxsYmFjaywgZnVuY3Rpb24gKHR5cGVOYW1lKSB7IHJldHVybiBBZGFwdGl2ZUNhcmQuYWN0aW9uVHlwZVJlZ2lzdHJ5LmNyZWF0ZUluc3RhbmNlKHR5cGVOYW1lKTsgfSwgZnVuY3Rpb24gKHR5cGVOYW1lLCBlcnJvclR5cGUpIHtcclxuICAgICAgICBpZiAoZXJyb3JUeXBlID09IEluc3RhbmNlQ3JlYXRpb25FcnJvclR5cGUuVW5rbm93blR5cGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBFbnVtcy5WYWxpZGF0aW9uRXJyb3IuVW5rbm93bkFjdGlvblR5cGUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlVua25vd24gYWN0aW9uIHR5cGU6IFwiICsgdHlwZU5hbWUgKyBcIi4gRmFsbGJhY2sgd2lsbCBiZSB1c2VkIGlmIHByZXNlbnQuXCJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBlcnJvcjogRW51bXMuVmFsaWRhdGlvbkVycm9yLkFjdGlvblR5cGVOb3RBbGxvd2VkLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBY3Rpb24gdHlwZSBcIiArIHR5cGVOYW1lICsgXCIgaXMgbm90IGFsbG93ZWQgaW4gdGhpcyBjb250ZXh0LlwiXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfSwgZXJyb3JzKTtcclxufVxyXG5leHBvcnRzLmNyZWF0ZUFjdGlvbkluc3RhbmNlID0gY3JlYXRlQWN0aW9uSW5zdGFuY2U7XHJcbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRJbnN0YW5jZShwYXJlbnQsIGpzb24sIGFsbG93RmFsbGJhY2ssIGVycm9ycykge1xyXG4gICAgcmV0dXJuIGNyZWF0ZUNhcmRPYmplY3RJbnN0YW5jZShwYXJlbnQsIGpzb24sIFtdLCAvLyBGb3JiaWRkZW4gdHlwZXMgbm90IHN1cHBvcnRlZCBmb3IgZWxlbWVudHMgZm9yIG5vd1xyXG4gICAgYWxsb3dGYWxsYmFjaywgZnVuY3Rpb24gKHR5cGVOYW1lKSB7IHJldHVybiBBZGFwdGl2ZUNhcmQuZWxlbWVudFR5cGVSZWdpc3RyeS5jcmVhdGVJbnN0YW5jZSh0eXBlTmFtZSk7IH0sIGZ1bmN0aW9uICh0eXBlTmFtZSwgZXJyb3JUeXBlKSB7XHJcbiAgICAgICAgaWYgKGVycm9yVHlwZSA9PSBJbnN0YW5jZUNyZWF0aW9uRXJyb3JUeXBlLlVua25vd25UeXBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBlcnJvcjogRW51bXMuVmFsaWRhdGlvbkVycm9yLlVua25vd25FbGVtZW50VHlwZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVW5rbm93biBlbGVtZW50IHR5cGU6IFwiICsgdHlwZU5hbWUgKyBcIi4gRmFsbGJhY2sgd2lsbCBiZSB1c2VkIGlmIHByZXNlbnQuXCJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBlcnJvcjogRW51bXMuVmFsaWRhdGlvbkVycm9yLkVsZW1lbnRUeXBlTm90QWxsb3dlZCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRWxlbWVudCB0eXBlIFwiICsgdHlwZU5hbWUgKyBcIiBpcyBub3QgYWxsb3dlZCBpbiB0aGlzIGNvbnRleHQuXCJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9LCBlcnJvcnMpO1xyXG59XHJcbmV4cG9ydHMuY3JlYXRlRWxlbWVudEluc3RhbmNlID0gY3JlYXRlRWxlbWVudEluc3RhbmNlO1xyXG52YXIgU2VyaWFsaXphYmxlT2JqZWN0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU2VyaWFsaXphYmxlT2JqZWN0KCkge1xyXG4gICAgICAgIHRoaXMuX3Jhd1Byb3BlcnRpZXMgPSB7fTtcclxuICAgIH1cclxuICAgIFNlcmlhbGl6YWJsZU9iamVjdC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbiwgZXJyb3JzKSB7XHJcbiAgICAgICAgdGhpcy5fcmF3UHJvcGVydGllcyA9IEFkYXB0aXZlQ2FyZC5lbmFibGVGdWxsSnNvblJvdW5kVHJpcCA/IGpzb24gOiB7fTtcclxuICAgIH07XHJcbiAgICBTZXJpYWxpemFibGVPYmplY3QucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0O1xyXG4gICAgICAgIGlmIChBZGFwdGl2ZUNhcmQuZW5hYmxlRnVsbEpzb25Sb3VuZFRyaXAgJiYgdGhpcy5fcmF3UHJvcGVydGllcyAmJiB0eXBlb2YgdGhpcy5fcmF3UHJvcGVydGllcyA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9yYXdQcm9wZXJ0aWVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgU2VyaWFsaXphYmxlT2JqZWN0LnByb3RvdHlwZS5zZXRDdXN0b21Qcm9wZXJ0eSA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBzaG91bGREZWxldGVQcm9wZXJ0eSA9ICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgVXRpbHMuaXNOdWxsT3JFbXB0eSh2YWx1ZSkpIHx8IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGw7XHJcbiAgICAgICAgaWYgKHNob3VsZERlbGV0ZVByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9yYXdQcm9wZXJ0aWVzW25hbWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fcmF3UHJvcGVydGllc1tuYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBTZXJpYWxpemFibGVPYmplY3QucHJvdG90eXBlLmdldEN1c3RvbVByb3BlcnR5ID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmF3UHJvcGVydGllc1tuYW1lXTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU2VyaWFsaXphYmxlT2JqZWN0O1xyXG59KCkpO1xyXG5leHBvcnRzLlNlcmlhbGl6YWJsZU9iamVjdCA9IFNlcmlhbGl6YWJsZU9iamVjdDtcclxudmFyIFZhbGlkYXRpb25GYWlsdXJlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVmFsaWRhdGlvbkZhaWx1cmUoY2FyZE9iamVjdCkge1xyXG4gICAgICAgIHRoaXMuY2FyZE9iamVjdCA9IGNhcmRPYmplY3Q7XHJcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBbXTtcclxuICAgIH1cclxuICAgIHJldHVybiBWYWxpZGF0aW9uRmFpbHVyZTtcclxufSgpKTtcclxuZXhwb3J0cy5WYWxpZGF0aW9uRmFpbHVyZSA9IFZhbGlkYXRpb25GYWlsdXJlO1xyXG52YXIgVmFsaWRhdGlvblJlc3VsdHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBWYWxpZGF0aW9uUmVzdWx0cygpIHtcclxuICAgICAgICB0aGlzLmFsbElkcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuZmFpbHVyZXMgPSBbXTtcclxuICAgIH1cclxuICAgIFZhbGlkYXRpb25SZXN1bHRzLnByb3RvdHlwZS5nZXRGYWlsdXJlSW5kZXggPSBmdW5jdGlvbiAoY2FyZE9iamVjdCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5mYWlsdXJlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5mYWlsdXJlc1tpXS5jYXJkT2JqZWN0ID09PSBjYXJkT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9O1xyXG4gICAgVmFsaWRhdGlvblJlc3VsdHMucHJvdG90eXBlLmFkZEZhaWx1cmUgPSBmdW5jdGlvbiAoY2FyZE9iamVjdCwgZXJyb3IpIHtcclxuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdldEZhaWx1cmVJbmRleChjYXJkT2JqZWN0KTtcclxuICAgICAgICB2YXIgZmFpbHVyZTtcclxuICAgICAgICBpZiAoaW5kZXggPCAwKSB7XHJcbiAgICAgICAgICAgIGZhaWx1cmUgPSBuZXcgVmFsaWRhdGlvbkZhaWx1cmUoY2FyZE9iamVjdCk7XHJcbiAgICAgICAgICAgIHRoaXMuZmFpbHVyZXMucHVzaChmYWlsdXJlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZhaWx1cmUgPSB0aGlzLmZhaWx1cmVzW2luZGV4XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmFpbHVyZS5lcnJvcnMucHVzaChlcnJvcik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFZhbGlkYXRpb25SZXN1bHRzO1xyXG59KCkpO1xyXG5leHBvcnRzLlZhbGlkYXRpb25SZXN1bHRzID0gVmFsaWRhdGlvblJlc3VsdHM7XHJcbnZhciBDYXJkT2JqZWN0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKENhcmRPYmplY3QsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBDYXJkT2JqZWN0KCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIENhcmRPYmplY3QucHJvdG90eXBlLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcclxuICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy5pZCkpIHtcclxuICAgICAgICAgICAgaWYgKGNvbnRleHQuYWxsSWRzLmhhc093blByb3BlcnR5KHRoaXMuaWQpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5hbGxJZHNbdGhpcy5pZF0gPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuYWRkRmFpbHVyZSh0aGlzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBFbnVtcy5WYWxpZGF0aW9uRXJyb3IuRHVwbGljYXRlSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRHVwbGljYXRlIElkOiBcIiArIHRoaXMuaWRcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnRleHQuYWxsSWRzW3RoaXMuaWRdICs9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmFsbElkc1t0aGlzLmlkXSA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ2FyZE9iamVjdC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbiwgZXJyb3JzKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wYXJzZS5jYWxsKHRoaXMsIGpzb24sIGVycm9ycyk7XHJcbiAgICAgICAgdGhpcy5pZCA9IFV0aWxzLmdldFN0cmluZ1ZhbHVlKGpzb25bXCJpZFwiXSk7XHJcbiAgICB9O1xyXG4gICAgQ2FyZE9iamVjdC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBfc3VwZXIucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJ0eXBlXCIsIHRoaXMuZ2V0SnNvblR5cGVOYW1lKCkpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJpZFwiLCB0aGlzLmlkKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIENhcmRPYmplY3QucHJvdG90eXBlLnZhbGlkYXRlUHJvcGVydGllcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFZhbGlkYXRpb25SZXN1bHRzKCk7XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhyZXN1bHQpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENhcmRPYmplY3Q7XHJcbn0oU2VyaWFsaXphYmxlT2JqZWN0KSk7XHJcbmV4cG9ydHMuQ2FyZE9iamVjdCA9IENhcmRPYmplY3Q7XHJcbnZhciBDYXJkRWxlbWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhDYXJkRWxlbWVudCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIENhcmRFbGVtZW50KCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLl9zaG91bGRGYWxsYmFjayA9IGZhbHNlO1xyXG4gICAgICAgIF90aGlzLl9sYW5nID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIF90aGlzLl9ob3N0Q29uZmlnID0gbnVsbDtcclxuICAgICAgICBfdGhpcy5fcGFyZW50ID0gbnVsbDtcclxuICAgICAgICBfdGhpcy5fcmVuZGVyZWRFbGVtZW50ID0gbnVsbDtcclxuICAgICAgICBfdGhpcy5fc2VwYXJhdG9yRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMuX2lzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgX3RoaXMuX3RydW5jYXRlZER1ZVRvT3ZlcmZsb3cgPSBmYWxzZTtcclxuICAgICAgICBfdGhpcy5fZGVmYXVsdFJlbmRlcmVkRWxlbWVudERpc3BsYXlNb2RlID0gbnVsbDtcclxuICAgICAgICBfdGhpcy5fcGFkZGluZyA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMucmVxdWlyZXMgPSBuZXcgSG9zdENvbmZpZy5Ib3N0Q2FwYWJpbGl0aWVzKCk7XHJcbiAgICAgICAgX3RoaXMuaG9yaXpvbnRhbEFsaWdubWVudCA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMuc3BhY2luZyA9IEVudW1zLlNwYWNpbmcuRGVmYXVsdDtcclxuICAgICAgICBfdGhpcy5zZXBhcmF0b3IgPSBmYWxzZTtcclxuICAgICAgICBfdGhpcy5jdXN0b21Dc3NTZWxlY3RvciA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMuaGVpZ2h0ID0gXCJhdXRvXCI7XHJcbiAgICAgICAgX3RoaXMubWluUGl4ZWxIZWlnaHQgPSBudWxsO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIENhcmRFbGVtZW50LnByb3RvdHlwZS5pbnRlcm5hbFJlbmRlclNlcGFyYXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVuZGVyZWRTZXBhcmF0b3IgPSBVdGlscy5yZW5kZXJTZXBhcmF0aW9uKHRoaXMuaG9zdENvbmZpZywge1xyXG4gICAgICAgICAgICBzcGFjaW5nOiB0aGlzLmhvc3RDb25maWcuZ2V0RWZmZWN0aXZlU3BhY2luZyh0aGlzLnNwYWNpbmcpLFxyXG4gICAgICAgICAgICBsaW5lVGhpY2tuZXNzOiB0aGlzLnNlcGFyYXRvciA/IHRoaXMuaG9zdENvbmZpZy5zZXBhcmF0b3IubGluZVRoaWNrbmVzcyA6IG51bGwsXHJcbiAgICAgICAgICAgIGxpbmVDb2xvcjogdGhpcy5zZXBhcmF0b3IgPyB0aGlzLmhvc3RDb25maWcuc2VwYXJhdG9yLmxpbmVDb2xvciA6IG51bGxcclxuICAgICAgICB9LCB0aGlzLnNlcGFyYXRvck9yaWVudGF0aW9uKTtcclxuICAgICAgICBpZiAoQWRhcHRpdmVDYXJkLmFsd2F5c0JsZWVkU2VwYXJhdG9ycyAmJiByZW5kZXJlZFNlcGFyYXRvciAmJiB0aGlzLnNlcGFyYXRvck9yaWVudGF0aW9uID09IEVudW1zLk9yaWVudGF0aW9uLkhvcml6b250YWwpIHtcclxuICAgICAgICAgICAgLy8gQWRqdXN0IHNlcGFyYXRvcidzIG1hcmdpbnMgaWYgdGhlIG9wdGlvbiB0byBhbHdheXMgYmxlZWQgc2VwYXJhdG9ycyBpcyB0dXJuZWQgb25cclxuICAgICAgICAgICAgdmFyIHBhcmVudENvbnRhaW5lciA9IHRoaXMuZ2V0UGFyZW50Q29udGFpbmVyKCk7XHJcbiAgICAgICAgICAgIGlmIChwYXJlbnRDb250YWluZXIgJiYgcGFyZW50Q29udGFpbmVyLmdldEVmZmVjdGl2ZVBhZGRpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudFBoeXNpY2FsUGFkZGluZyA9IHRoaXMuaG9zdENvbmZpZy5wYWRkaW5nRGVmaW5pdGlvblRvU3BhY2luZ0RlZmluaXRpb24ocGFyZW50Q29udGFpbmVyLmdldEVmZmVjdGl2ZVBhZGRpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJlZFNlcGFyYXRvci5zdHlsZS5tYXJnaW5MZWZ0ID0gXCItXCIgKyBwYXJlbnRQaHlzaWNhbFBhZGRpbmcubGVmdCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgIHJlbmRlcmVkU2VwYXJhdG9yLnN0eWxlLm1hcmdpblJpZ2h0ID0gXCItXCIgKyBwYXJlbnRQaHlzaWNhbFBhZGRpbmcucmlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlbmRlcmVkU2VwYXJhdG9yO1xyXG4gICAgfTtcclxuICAgIENhcmRFbGVtZW50LnByb3RvdHlwZS51cGRhdGVSZW5kZXJlZEVsZW1lbnRWaXNpYmlsaXR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkaXNwbGF5TW9kZSA9IHRoaXMuaXNEZXNpZ25Nb2RlKCkgfHwgdGhpcy5pc1Zpc2libGUgPyB0aGlzLl9kZWZhdWx0UmVuZGVyZWRFbGVtZW50RGlzcGxheU1vZGUgOiBcIm5vbmVcIjtcclxuICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheU1vZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9zZXBhcmF0b3JFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudCAmJiB0aGlzLnBhcmVudC5pc0ZpcnN0RWxlbWVudCh0aGlzKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VwYXJhdG9yRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXBhcmF0b3JFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5TW9kZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuaGlkZUVsZW1lbnREdWVUb092ZXJmbG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9yZW5kZXJlZEVsZW1lbnQgJiYgdGhpcy5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuICAgICAgICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmFpc2VFbGVtZW50VmlzaWJpbGl0eUNoYW5nZWRFdmVudCh0aGlzLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENhcmRFbGVtZW50LnByb3RvdHlwZS5zaG93RWxlbWVudEhpZGRlbkR1ZVRvT3ZlcmZsb3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3JlbmRlcmVkRWxlbWVudCAmJiAhdGhpcy5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHJhaXNlRWxlbWVudFZpc2liaWxpdHlDaGFuZ2VkRXZlbnQodGhpcywgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBNYXJrZWQgcHJpdmF0ZSB0byBlbXVsYXRlIGludGVybmFsIGFjY2Vzc1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLmhhbmRsZU92ZXJmbG93ID0gZnVuY3Rpb24gKG1heEhlaWdodCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSB8fCB0aGlzLmlzSGlkZGVuRHVlVG9PdmVyZmxvdygpKSB7XHJcbiAgICAgICAgICAgIHZhciBoYW5kbGVkID0gdGhpcy50cnVuY2F0ZU92ZXJmbG93KG1heEhlaWdodCk7XHJcbiAgICAgICAgICAgIC8vIEV2ZW4gaWYgd2Ugd2VyZSB1bmFibGUgdG8gdHJ1bmNhdGUgdGhlIGVsZW1lbnQgdG8gZml0IHRoaXMgdGltZSxcclxuICAgICAgICAgICAgLy8gaXQgc3RpbGwgY291bGQgaGF2ZSBiZWVuIHByZXZpb3VzbHkgdHJ1bmNhdGVkXHJcbiAgICAgICAgICAgIHRoaXMuX3RydW5jYXRlZER1ZVRvT3ZlcmZsb3cgPSBoYW5kbGVkIHx8IHRoaXMuX3RydW5jYXRlZER1ZVRvT3ZlcmZsb3c7XHJcbiAgICAgICAgICAgIGlmICghaGFuZGxlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlRWxlbWVudER1ZVRvT3ZlcmZsb3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChoYW5kbGVkICYmICF0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RWxlbWVudEhpZGRlbkR1ZVRvT3ZlcmZsb3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBNYXJrZWQgcHJpdmF0ZSB0byBlbXVsYXRlIGludGVybmFsIGFjY2Vzc1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLnJlc2V0T3ZlcmZsb3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNpemVDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuX3RydW5jYXRlZER1ZVRvT3ZlcmZsb3cpIHtcclxuICAgICAgICAgICAgdGhpcy51bmRvT3ZlcmZsb3dUcnVuY2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3RydW5jYXRlZER1ZVRvT3ZlcmZsb3cgPSBmYWxzZTtcclxuICAgICAgICAgICAgc2l6ZUNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pc0hpZGRlbkR1ZVRvT3ZlcmZsb3cpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93RWxlbWVudEhpZGRlbkR1ZVRvT3ZlcmZsb3coKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNpemVDaGFuZ2VkO1xyXG4gICAgfTtcclxuICAgIENhcmRFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVQbGFjZWhvbGRlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUuYm9yZGVyID0gXCIxcHggZGFzaGVkICNERERERERcIjtcclxuICAgICAgICBlbGVtZW50LnN0eWxlLnBhZGRpbmcgPSBcIjRweFwiO1xyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUubWluSGVpZ2h0ID0gXCIzMnB4XCI7XHJcbiAgICAgICAgZWxlbWVudC5zdHlsZS5mb250U2l6ZSA9IFwiMTBweFwiO1xyXG4gICAgICAgIGVsZW1lbnQuaW5uZXJUZXh0ID0gXCJFbXB0eSBcIiArIHRoaXMuZ2V0SnNvblR5cGVOYW1lKCk7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLmFkanVzdFJlbmRlcmVkRWxlbWVudFNpemUgPSBmdW5jdGlvbiAocmVuZGVyZWRFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGVpZ2h0ID09PSBcImF1dG9cIikge1xyXG4gICAgICAgICAgICByZW5kZXJlZEVsZW1lbnQuc3R5bGUuZmxleCA9IFwiMCAwIGF1dG9cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlbmRlcmVkRWxlbWVudC5zdHlsZS5mbGV4ID0gXCIxIDEgYXV0b1wiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5taW5QaXhlbEhlaWdodCkge1xyXG4gICAgICAgICAgICByZW5kZXJlZEVsZW1lbnQuc3R5bGUubWluSGVpZ2h0ID0gdGhpcy5taW5QaXhlbEhlaWdodCArIFwicHhcIjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLm92ZXJyaWRlSW50ZXJuYWxSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxSZW5kZXIoKTtcclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuYXBwbHlQYWRkaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNlcGFyYXRvckVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKEFkYXB0aXZlQ2FyZC5hbHdheXNCbGVlZFNlcGFyYXRvcnMgJiYgdGhpcy5zZXBhcmF0b3JPcmllbnRhdGlvbiA9PSBFbnVtcy5PcmllbnRhdGlvbi5Ib3Jpem9udGFsICYmICF0aGlzLmlzQmxlZWRpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSBuZXcgU2hhcmVkLlBhZGRpbmdEZWZpbml0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldEltbWVkaWF0ZVN1cnJvdW5kaW5nUGFkZGluZyhwYWRkaW5nKTtcclxuICAgICAgICAgICAgICAgIHZhciBwaHlzaWNhbFBhZGRpbmcgPSB0aGlzLmhvc3RDb25maWcucGFkZGluZ0RlZmluaXRpb25Ub1NwYWNpbmdEZWZpbml0aW9uKHBhZGRpbmcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXBhcmF0b3JFbGVtZW50LnN0eWxlLm1hcmdpbkxlZnQgPSBcIi1cIiArIHBoeXNpY2FsUGFkZGluZy5sZWZ0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXBhcmF0b3JFbGVtZW50LnN0eWxlLm1hcmdpblJpZ2h0ID0gXCItXCIgKyBwaHlzaWNhbFBhZGRpbmcucmlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcGFyYXRvckVsZW1lbnQuc3R5bGUubWFyZ2luUmlnaHQgPSBcIjBcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VwYXJhdG9yRWxlbWVudC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCIwXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLypcclxuICAgICAqIENhbGxlZCB3aGVuIHRoaXMgZWxlbWVudCBvdmVyZmxvd3MgdGhlIGJvdHRvbSBvZiB0aGUgY2FyZC5cclxuICAgICAqIG1heEhlaWdodCB3aWxsIGJlIHRoZSBhbW91bnQgb2Ygc3BhY2Ugc3RpbGwgYXZhaWxhYmxlIG9uIHRoZSBjYXJkICgwIGlmXHJcbiAgICAgKiB0aGUgZWxlbWVudCBpcyBmdWxseSBvZmYgdGhlIGNhcmQpLlxyXG4gICAgICovXHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUudHJ1bmNhdGVPdmVyZmxvdyA9IGZ1bmN0aW9uIChtYXhIZWlnaHQpIHtcclxuICAgICAgICAvLyBDaGlsZCBpbXBsZW1lbnRhdGlvbnMgc2hvdWxkIHJldHVybiB0cnVlIGlmIHRoZSBlbGVtZW50IGhhbmRsZWRcclxuICAgICAgICAvLyB0aGUgdHJ1bmNhdGlvbiByZXF1ZXN0IHN1Y2ggdGhhdCBpdHMgY29udGVudCBmaXRzIHdpdGhpbiBtYXhIZWlnaHQsXHJcbiAgICAgICAgLy8gZmFsc2UgaWYgdGhlIGVsZW1lbnQgc2hvdWxkIGZhbGwgYmFjayB0byBiZWluZyBoaWRkZW5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLypcclxuICAgICAqIFRoaXMgc2hvdWxkIHJldmVyc2UgYW55IGNoYW5nZXMgcGVyZm9ybWVkIGluIHRydW5jYXRlT3ZlcmZsb3coKS5cclxuICAgICAqL1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLnVuZG9PdmVyZmxvd1RydW5jYXRpb24gPSBmdW5jdGlvbiAoKSB7IH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuZ2V0RGVmYXVsdFBhZGRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTaGFyZWQuUGFkZGluZ0RlZmluaXRpb24oKTtcclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuZ2V0SGFzQmFja2dyb3VuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLmdldFBhZGRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhZGRpbmc7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLnNldFBhZGRpbmcgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9wYWRkaW5nID0gdmFsdWU7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENhcmRFbGVtZW50LnByb3RvdHlwZSwgXCJzdXBwb3J0c01pbkhlaWdodFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYXJkRWxlbWVudC5wcm90b3R5cGUsIFwidXNlRGVmYXVsdFNpemluZ1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENhcmRFbGVtZW50LnByb3RvdHlwZSwgXCJhbGxvd0N1c3RvbVBhZGRpbmdcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYXJkRWxlbWVudC5wcm90b3R5cGUsIFwic2VwYXJhdG9yT3JpZW50YXRpb25cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bXMuT3JpZW50YXRpb24uSG9yaXpvbnRhbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYXJkRWxlbWVudC5wcm90b3R5cGUsIFwiZGVmYXVsdFN0eWxlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1zLkNvbnRhaW5lclN0eWxlLkRlZmF1bHQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuYXNTdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLmlzQmxlZWRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIENhcmRFbGVtZW50LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcImlzVmlzaWJsZVwiLCB0aGlzLmlzVmlzaWJsZSwgdHJ1ZSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaG9yaXpvbnRhbEFsaWdubWVudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBVdGlscy5zZXRFbnVtUHJvcGVydHkoRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudCwgcmVzdWx0LCBcImhvcml6b250YWxBbGlnbm1lbnRcIiwgdGhpcy5ob3Jpem9udGFsQWxpZ25tZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgVXRpbHMuc2V0RW51bVByb3BlcnR5KEVudW1zLlNwYWNpbmcsIHJlc3VsdCwgXCJzcGFjaW5nXCIsIHRoaXMuc3BhY2luZywgRW51bXMuU3BhY2luZy5EZWZhdWx0KTtcclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwic2VwYXJhdG9yXCIsIHRoaXMuc2VwYXJhdG9yLCBmYWxzZSk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcImhlaWdodFwiLCB0aGlzLmhlaWdodCwgXCJhdXRvXCIpO1xyXG4gICAgICAgIGlmICh0aGlzLnN1cHBvcnRzTWluSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJtaW5IZWlnaHRcIiwgdHlwZW9mIHRoaXMubWluUGl4ZWxIZWlnaHQgPT09IFwibnVtYmVyXCIgJiYgIWlzTmFOKHRoaXMubWluUGl4ZWxIZWlnaHQpID8gdGhpcy5taW5QaXhlbEhlaWdodCArIFwicHhcIiA6IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLnNldFBhcmVudCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3BhcmVudCA9IHZhbHVlO1xyXG4gICAgfTtcclxuICAgIENhcmRFbGVtZW50LnByb3RvdHlwZS5nZXRFZmZlY3RpdmVTdHlsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldEVmZmVjdGl2ZVN0eWxlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRTdHlsZTtcclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuZ2V0Rm9yYmlkZGVuRWxlbWVudFR5cGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIENhcmRFbGVtZW50LnByb3RvdHlwZS5nZXRGb3JiaWRkZW5BY3Rpb25UeXBlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuZ2V0SW1tZWRpYXRlU3Vycm91bmRpbmdQYWRkaW5nID0gZnVuY3Rpb24gKHJlc3VsdCwgcHJvY2Vzc1RvcCwgcHJvY2Vzc1JpZ2h0LCBwcm9jZXNzQm90dG9tLCBwcm9jZXNzTGVmdCkge1xyXG4gICAgICAgIGlmIChwcm9jZXNzVG9wID09PSB2b2lkIDApIHsgcHJvY2Vzc1RvcCA9IHRydWU7IH1cclxuICAgICAgICBpZiAocHJvY2Vzc1JpZ2h0ID09PSB2b2lkIDApIHsgcHJvY2Vzc1JpZ2h0ID0gdHJ1ZTsgfVxyXG4gICAgICAgIGlmIChwcm9jZXNzQm90dG9tID09PSB2b2lkIDApIHsgcHJvY2Vzc0JvdHRvbSA9IHRydWU7IH1cclxuICAgICAgICBpZiAocHJvY2Vzc0xlZnQgPT09IHZvaWQgMCkgeyBwcm9jZXNzTGVmdCA9IHRydWU7IH1cclxuICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGRvUHJvY2Vzc1RvcCA9IHByb2Nlc3NUb3AgJiYgdGhpcy5wYXJlbnQuaXNUb3BFbGVtZW50KHRoaXMpO1xyXG4gICAgICAgICAgICB2YXIgZG9Qcm9jZXNzUmlnaHQgPSBwcm9jZXNzUmlnaHQgJiYgdGhpcy5wYXJlbnQuaXNSaWdodE1vc3RFbGVtZW50KHRoaXMpO1xyXG4gICAgICAgICAgICB2YXIgZG9Qcm9jZXNzQm90dG9tID0gcHJvY2Vzc0JvdHRvbSAmJiB0aGlzLnBhcmVudC5pc0JvdHRvbUVsZW1lbnQodGhpcyk7XHJcbiAgICAgICAgICAgIHZhciBkb1Byb2Nlc3NMZWZ0ID0gcHJvY2Vzc0xlZnQgJiYgdGhpcy5wYXJlbnQuaXNMZWZ0TW9zdEVsZW1lbnQodGhpcyk7XHJcbiAgICAgICAgICAgIHZhciBlZmZlY3RpdmVQYWRkaW5nID0gdGhpcy5wYXJlbnQuZ2V0RWZmZWN0aXZlUGFkZGluZygpO1xyXG4gICAgICAgICAgICBpZiAoZWZmZWN0aXZlUGFkZGluZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRvUHJvY2Vzc1RvcCAmJiBlZmZlY3RpdmVQYWRkaW5nLnRvcCAhPSBFbnVtcy5TcGFjaW5nLk5vbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQudG9wID0gZWZmZWN0aXZlUGFkZGluZy50b3A7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9Qcm9jZXNzVG9wID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9Qcm9jZXNzUmlnaHQgJiYgZWZmZWN0aXZlUGFkZGluZy5yaWdodCAhPSBFbnVtcy5TcGFjaW5nLk5vbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucmlnaHQgPSBlZmZlY3RpdmVQYWRkaW5nLnJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIGRvUHJvY2Vzc1JpZ2h0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9Qcm9jZXNzQm90dG9tICYmIGVmZmVjdGl2ZVBhZGRpbmcuYm90dG9tICE9IEVudW1zLlNwYWNpbmcuTm9uZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5ib3R0b20gPSBlZmZlY3RpdmVQYWRkaW5nLmJvdHRvbTtcclxuICAgICAgICAgICAgICAgICAgICBkb1Byb2Nlc3NCb3R0b20gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkb1Byb2Nlc3NMZWZ0ICYmIGVmZmVjdGl2ZVBhZGRpbmcubGVmdCAhPSBFbnVtcy5TcGFjaW5nLk5vbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQubGVmdCA9IGVmZmVjdGl2ZVBhZGRpbmcubGVmdDtcclxuICAgICAgICAgICAgICAgICAgICBkb1Byb2Nlc3NMZWZ0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRvUHJvY2Vzc1RvcCB8fCBkb1Byb2Nlc3NSaWdodCB8fCBkb1Byb2Nlc3NCb3R0b20gfHwgZG9Qcm9jZXNzTGVmdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZ2V0SW1tZWRpYXRlU3Vycm91bmRpbmdQYWRkaW5nKHJlc3VsdCwgZG9Qcm9jZXNzVG9wLCBkb1Byb2Nlc3NSaWdodCwgZG9Qcm9jZXNzQm90dG9tLCBkb1Byb2Nlc3NMZWZ0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbiwgZXJyb3JzKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wYXJzZS5jYWxsKHRoaXMsIGpzb24sIGVycm9ycyk7XHJcbiAgICAgICAgcmFpc2VQYXJzZUVsZW1lbnRFdmVudCh0aGlzLCBqc29uLCBlcnJvcnMpO1xyXG4gICAgICAgIHRoaXMucmVxdWlyZXMucGFyc2UoanNvbltcInJlcXVpcmVzXCJdLCBlcnJvcnMpO1xyXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gVXRpbHMuZ2V0Qm9vbFZhbHVlKGpzb25bXCJpc1Zpc2libGVcIl0sIHRoaXMuaXNWaXNpYmxlKTtcclxuICAgICAgICB0aGlzLmhvcml6b250YWxBbGlnbm1lbnQgPSBVdGlscy5nZXRFbnVtVmFsdWUoRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudCwganNvbltcImhvcml6b250YWxBbGlnbm1lbnRcIl0sIHRoaXMuaG9yaXpvbnRhbEFsaWdubWVudCk7XHJcbiAgICAgICAgdGhpcy5zcGFjaW5nID0gVXRpbHMuZ2V0RW51bVZhbHVlKEVudW1zLlNwYWNpbmcsIGpzb25bXCJzcGFjaW5nXCJdLCBFbnVtcy5TcGFjaW5nLkRlZmF1bHQpO1xyXG4gICAgICAgIHRoaXMuc2VwYXJhdG9yID0gVXRpbHMuZ2V0Qm9vbFZhbHVlKGpzb25bXCJzZXBhcmF0b3JcIl0sIHRoaXMuc2VwYXJhdG9yKTtcclxuICAgICAgICB2YXIganNvblNlcGFyYXRpb24gPSBqc29uW1wic2VwYXJhdGlvblwiXTtcclxuICAgICAgICBpZiAoanNvblNlcGFyYXRpb24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAoanNvblNlcGFyYXRpb24gPT09IFwibm9uZVwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwYWNpbmcgPSBFbnVtcy5TcGFjaW5nLk5vbmU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcGFyYXRvciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGpzb25TZXBhcmF0aW9uID09PSBcInN0cm9uZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwYWNpbmcgPSBFbnVtcy5TcGFjaW5nLkxhcmdlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXBhcmF0b3IgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGpzb25TZXBhcmF0aW9uID09PSBcImRlZmF1bHRcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGFjaW5nID0gRW51bXMuU3BhY2luZy5EZWZhdWx0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXBhcmF0b3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByYWlzZVBhcnNlRXJyb3Ioe1xyXG4gICAgICAgICAgICAgICAgZXJyb3I6IEVudW1zLlZhbGlkYXRpb25FcnJvci5EZXByZWNhdGVkLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaGUgXFxcInNlcGFyYXRpb25cXFwiIHByb3BlcnR5IGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZC4gVXNlIHRoZSBcXFwic3BhY2luZ1xcXCIgYW5kIFxcXCJzZXBhcmF0b3JcXFwiIHByb3BlcnRpZXMgaW5zdGVhZC5cIlxyXG4gICAgICAgICAgICB9LCBlcnJvcnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIganNvbkhlaWdodCA9IGpzb25bXCJoZWlnaHRcIl07XHJcbiAgICAgICAgaWYgKGpzb25IZWlnaHQgPT09IFwiYXV0b1wiIHx8IGpzb25IZWlnaHQgPT09IFwic3RyZXRjaFwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0ganNvbkhlaWdodDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc3VwcG9ydHNNaW5IZWlnaHQpIHtcclxuICAgICAgICAgICAgdmFyIGpzb25NaW5IZWlnaHQgPSBqc29uW1wibWluSGVpZ2h0XCJdO1xyXG4gICAgICAgICAgICBpZiAoanNvbk1pbkhlaWdodCAmJiB0eXBlb2YganNvbk1pbkhlaWdodCA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlzVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNpemUgPSBTaGFyZWQuU2l6ZUFuZFVuaXQucGFyc2UoanNvbk1pbkhlaWdodCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpemUudW5pdCA9PSBFbnVtcy5TaXplVW5pdC5QaXhlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1pblBpeGVsSGVpZ2h0ID0gc2l6ZS5waHlzaWNhbFNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmcuIEEgcGFyc2UgZXJyb3IgaXMgZW1pdHRlZCBiZWxvd1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFpc2VQYXJzZUVycm9yKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IEVudW1zLlZhbGlkYXRpb25FcnJvci5JbnZhbGlkUHJvcGVydHlWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIFxcXCJtaW5IZWlnaHRcXFwiIHZhbHVlOiBcIiArIGpzb25NaW5IZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICB9LCBlcnJvcnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm1pblBpeGVsSGVpZ2h0ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLmdldEFjdGlvbkNvdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfTtcclxuICAgIENhcmRFbGVtZW50LnByb3RvdHlwZS5nZXRBY3Rpb25BdCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluZGV4IG91dCBvZiByYW5nZS5cIik7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQgaW5zdGFuY2VvZiBDYXJkRWxlbWVudENvbnRhaW5lcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQucmVtb3ZlSXRlbSh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIENhcmRFbGVtZW50LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRFbGVtZW50ID0gdGhpcy5vdmVycmlkZUludGVybmFsUmVuZGVyKCk7XHJcbiAgICAgICAgdGhpcy5fc2VwYXJhdG9yRWxlbWVudCA9IHRoaXMuaW50ZXJuYWxSZW5kZXJTZXBhcmF0b3IoKTtcclxuICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbUNzc1NlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmN1c3RvbUNzc1NlbGVjdG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlZEVsZW1lbnQuc3R5bGUuYm94U2l6aW5nID0gXCJib3JkZXItYm94XCI7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlZmF1bHRSZW5kZXJlZEVsZW1lbnREaXNwbGF5TW9kZSA9IHRoaXMuX3JlbmRlcmVkRWxlbWVudC5zdHlsZS5kaXNwbGF5O1xyXG4gICAgICAgICAgICB0aGlzLmFkanVzdFJlbmRlcmVkRWxlbWVudFNpemUodGhpcy5fcmVuZGVyZWRFbGVtZW50KTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzRGVzaWduTW9kZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudCA9IHRoaXMuY3JlYXRlUGxhY2Vob2xkZXJFbGVtZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlZEVsZW1lbnQ7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLnVwZGF0ZUxheW91dCA9IGZ1bmN0aW9uIChwcm9jZXNzQ2hpbGRyZW4pIHtcclxuICAgICAgICBpZiAocHJvY2Vzc0NoaWxkcmVuID09PSB2b2lkIDApIHsgcHJvY2Vzc0NoaWxkcmVuID0gdHJ1ZTsgfVxyXG4gICAgICAgIHRoaXMudXBkYXRlUmVuZGVyZWRFbGVtZW50VmlzaWJpbGl0eSgpO1xyXG4gICAgICAgIHRoaXMuYXBwbHlQYWRkaW5nKCk7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiAoY2FyZEVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLmlzRGVzaWduTW9kZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcm9vdEVsZW1lbnQgPSB0aGlzLmdldFJvb3RFbGVtZW50KCk7XHJcbiAgICAgICAgcmV0dXJuIHJvb3RFbGVtZW50IGluc3RhbmNlb2YgQWRhcHRpdmVDYXJkICYmIHJvb3RFbGVtZW50LmRlc2lnbk1vZGU7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLmlzUmVuZGVyZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVkRWxlbWVudCAmJiB0aGlzLl9yZW5kZXJlZEVsZW1lbnQub2Zmc2V0SGVpZ2h0ID4gMDtcclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuaXNGaXJzdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIENhcmRFbGVtZW50LnByb3RvdHlwZS5pc0xhc3RFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuaXNBdFRoZVZlcnlMZWZ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50LmlzTGVmdE1vc3RFbGVtZW50KHRoaXMpICYmIHRoaXMucGFyZW50LmlzQXRUaGVWZXJ5TGVmdCgpIDogdHJ1ZTtcclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuaXNBdFRoZVZlcnlSaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQgPyB0aGlzLnBhcmVudC5pc1JpZ2h0TW9zdEVsZW1lbnQodGhpcykgJiYgdGhpcy5wYXJlbnQuaXNBdFRoZVZlcnlSaWdodCgpIDogdHJ1ZTtcclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuaXNBdFRoZVZlcnlUb3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50ID8gdGhpcy5wYXJlbnQuaXNGaXJzdEVsZW1lbnQodGhpcykgJiYgdGhpcy5wYXJlbnQuaXNBdFRoZVZlcnlUb3AoKSA6IHRydWU7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLmlzQXRUaGVWZXJ5Qm90dG9tID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50LmlzTGFzdEVsZW1lbnQodGhpcykgJiYgdGhpcy5wYXJlbnQuaXNBdFRoZVZlcnlCb3R0b20oKSA6IHRydWU7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLmlzQmxlZWRpbmdBdFRvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLmlzQmxlZWRpbmdBdEJvdHRvbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLmlzTGVmdE1vc3RFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuaXNSaWdodE1vc3RFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuaXNUb3BFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0ZpcnN0RWxlbWVudChlbGVtZW50KTtcclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuaXNCb3R0b21FbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0xhc3RFbGVtZW50KGVsZW1lbnQpO1xyXG4gICAgfTtcclxuICAgIENhcmRFbGVtZW50LnByb3RvdHlwZS5pc0hpZGRlbkR1ZVRvT3ZlcmZsb3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVkRWxlbWVudCAmJiB0aGlzLl9yZW5kZXJlZEVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9PSAnaGlkZGVuJztcclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuZ2V0Um9vdEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJvb3RFbGVtZW50ID0gdGhpcztcclxuICAgICAgICB3aGlsZSAocm9vdEVsZW1lbnQucGFyZW50KSB7XHJcbiAgICAgICAgICAgIHJvb3RFbGVtZW50ID0gcm9vdEVsZW1lbnQucGFyZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcm9vdEVsZW1lbnQ7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnQucHJvdG90eXBlLmdldFBhcmVudENvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudEVsZW1lbnQgPSB0aGlzLnBhcmVudDtcclxuICAgICAgICB3aGlsZSAoY3VycmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRFbGVtZW50IGluc3RhbmNlb2YgQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQgPSBjdXJyZW50RWxlbWVudC5wYXJlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIENhcmRFbGVtZW50LnByb3RvdHlwZS5nZXRBbGxJbnB1dHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfTtcclxuICAgIENhcmRFbGVtZW50LnByb3RvdHlwZS5nZXRSZXNvdXJjZUluZm9ybWF0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuZ2V0RWxlbWVudEJ5SWQgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pZCA9PT0gaWQgPyB0aGlzIDogbnVsbDtcclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuZ2V0QWN0aW9uQnlJZCA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIENhcmRFbGVtZW50LnByb3RvdHlwZS5zaG91bGRGYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2hvdWxkRmFsbGJhY2sgfHwgIXRoaXMucmVxdWlyZXMuYXJlQWxsTWV0KHRoaXMuaG9zdENvbmZpZy5ob3N0Q2FwYWJpbGl0aWVzKTtcclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudC5wcm90b3R5cGUuc2V0U2hvdWxkRmFsbGJhY2sgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9zaG91bGRGYWxsYmFjayA9IHZhbHVlO1xyXG4gICAgfTtcclxuICAgIENhcmRFbGVtZW50LnByb3RvdHlwZS5nZXRFZmZlY3RpdmVQYWRkaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwYWRkaW5nID0gdGhpcy5nZXRQYWRkaW5nKCk7XHJcbiAgICAgICAgcmV0dXJuIChwYWRkaW5nICYmIHRoaXMuYWxsb3dDdXN0b21QYWRkaW5nKSA/IHBhZGRpbmcgOiB0aGlzLmdldERlZmF1bHRQYWRkaW5nKCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENhcmRFbGVtZW50LnByb3RvdHlwZSwgXCJsYW5nXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2xhbmcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9sYW5nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50Lmxhbmc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgdmFsdWUgIT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlZ0V4ID0gL15bYS16XXsyLDN9JC9pZztcclxuICAgICAgICAgICAgICAgIHZhciBtYXRjaGVzID0gcmVnRXguZXhlYyh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1hdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGxhbmd1YWdlIGlkZW50aWZpZXI6IFwiICsgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2xhbmcgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYXJkRWxlbWVudC5wcm90b3R5cGUsIFwiaG9zdENvbmZpZ1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9ob3N0Q29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faG9zdENvbmZpZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5ob3N0Q29uZmlnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRIb3N0Q29uZmlnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9ob3N0Q29uZmlnID0gdmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2FyZEVsZW1lbnQucHJvdG90eXBlLCBcImluZGV4XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuaW5kZXhPZih0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2FyZEVsZW1lbnQucHJvdG90eXBlLCBcImlzSW50ZXJhY3RpdmVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2FyZEVsZW1lbnQucHJvdG90eXBlLCBcImlzU3RhbmRhbG9uZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENhcmRFbGVtZW50LnByb3RvdHlwZSwgXCJpc0lubGluZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYXJkRWxlbWVudC5wcm90b3R5cGUsIFwicGFyZW50XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYXJkRWxlbWVudC5wcm90b3R5cGUsIFwiaXNWaXNpYmxlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzVmlzaWJsZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBlbGVtZW50IGlzIGdvaW5nIHRvIGJlIGhpZGRlbiwgcmVzZXQgYW55IGNoYW5nZXMgdGhhdCB3ZXJlIGR1ZVxyXG4gICAgICAgICAgICAvLyB0byBvdmVyZmxvdyB0cnVuY2F0aW9uICh0aGlzIGVuc3VyZXMgdGhhdCBpZiB0aGUgZWxlbWVudCBpcyBsYXRlclxyXG4gICAgICAgICAgICAvLyB1bi1oaWRkZW4gaXQgaGFzIHRoZSByaWdodCBjb250ZW50KVxyXG4gICAgICAgICAgICBpZiAoQWRhcHRpdmVDYXJkLnVzZUFkdmFuY2VkQ2FyZEJvdHRvbVRydW5jYXRpb24gJiYgIXZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVuZG9PdmVyZmxvd1RydW5jYXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5faXNWaXNpYmxlICE9IHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pc1Zpc2libGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUmVuZGVyZWRFbGVtZW50VmlzaWJpbGl0eSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlbmRlcmVkRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhaXNlRWxlbWVudFZpc2liaWxpdHlDaGFuZ2VkRXZlbnQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYXJkRWxlbWVudC5wcm90b3R5cGUsIFwiaGFzVmlzaWJsZVNlcGFyYXRvclwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudCAmJiB0aGlzLnNlcGFyYXRvckVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhdGhpcy5wYXJlbnQuaXNGaXJzdEVsZW1lbnQodGhpcykgJiYgKHRoaXMuaXNWaXNpYmxlIHx8IHRoaXMuaXNEZXNpZ25Nb2RlKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2FyZEVsZW1lbnQucHJvdG90eXBlLCBcInJlbmRlcmVkRWxlbWVudFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlZEVsZW1lbnQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2FyZEVsZW1lbnQucHJvdG90eXBlLCBcInNlcGFyYXRvckVsZW1lbnRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VwYXJhdG9yRWxlbWVudDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBDYXJkRWxlbWVudDtcclxufShDYXJkT2JqZWN0KSk7XHJcbmV4cG9ydHMuQ2FyZEVsZW1lbnQgPSBDYXJkRWxlbWVudDtcclxudmFyIEJhc2VUZXh0QmxvY2sgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQmFzZVRleHRCbG9jaywgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEJhc2VUZXh0QmxvY2soKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuX3NlbGVjdEFjdGlvbiA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMuc2l6ZSA9IEVudW1zLlRleHRTaXplLkRlZmF1bHQ7XHJcbiAgICAgICAgX3RoaXMud2VpZ2h0ID0gRW51bXMuVGV4dFdlaWdodC5EZWZhdWx0O1xyXG4gICAgICAgIF90aGlzLmNvbG9yID0gRW51bXMuVGV4dENvbG9yLkRlZmF1bHQ7XHJcbiAgICAgICAgX3RoaXMuaXNTdWJ0bGUgPSBmYWxzZTtcclxuICAgICAgICBfdGhpcy5mb250VHlwZSA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgQmFzZVRleHRCbG9jay5wcm90b3R5cGUuZ2V0RWZmZWN0aXZlU3R5bGVEZWZpbml0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhvc3RDb25maWcuY29udGFpbmVyU3R5bGVzLmdldFN0eWxlQnlOYW1lKHRoaXMuZ2V0RWZmZWN0aXZlU3R5bGUoKSk7XHJcbiAgICB9O1xyXG4gICAgQmFzZVRleHRCbG9jay5wcm90b3R5cGUuZ2V0Rm9udFNpemUgPSBmdW5jdGlvbiAoZm9udFR5cGUpIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2l6ZSkge1xyXG4gICAgICAgICAgICBjYXNlIEVudW1zLlRleHRTaXplLlNtYWxsOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvbnRUeXBlLmZvbnRTaXplcy5zbWFsbDtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0U2l6ZS5NZWRpdW06XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9udFR5cGUuZm9udFNpemVzLm1lZGl1bTtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0U2l6ZS5MYXJnZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmb250VHlwZS5mb250U2l6ZXMubGFyZ2U7XHJcbiAgICAgICAgICAgIGNhc2UgRW51bXMuVGV4dFNpemUuRXh0cmFMYXJnZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmb250VHlwZS5mb250U2l6ZXMuZXh0cmFMYXJnZTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmb250VHlwZS5mb250U2l6ZXMuZGVmYXVsdDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQmFzZVRleHRCbG9jay5wcm90b3R5cGUuZ2V0Q29sb3JEZWZpbml0aW9uID0gZnVuY3Rpb24gKGNvbG9yU2V0LCBjb2xvcikge1xyXG4gICAgICAgIHN3aXRjaCAoY29sb3IpIHtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0Q29sb3IuQWNjZW50OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yU2V0LmFjY2VudDtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0Q29sb3IuRGFyazpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvclNldC5kYXJrO1xyXG4gICAgICAgICAgICBjYXNlIEVudW1zLlRleHRDb2xvci5MaWdodDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvclNldC5saWdodDtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0Q29sb3IuR29vZDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvclNldC5nb29kO1xyXG4gICAgICAgICAgICBjYXNlIEVudW1zLlRleHRDb2xvci5XYXJuaW5nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yU2V0Lndhcm5pbmc7XHJcbiAgICAgICAgICAgIGNhc2UgRW51bXMuVGV4dENvbG9yLkF0dGVudGlvbjpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvclNldC5hdHRlbnRpb247XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3JTZXQuZGVmYXVsdDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQmFzZVRleHRCbG9jay5wcm90b3R5cGUuc2V0VGV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3RleHQgPSB2YWx1ZTtcclxuICAgIH07XHJcbiAgICBCYXNlVGV4dEJsb2NrLnByb3RvdHlwZS5hc1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50ZXh0O1xyXG4gICAgfTtcclxuICAgIEJhc2VUZXh0QmxvY2sucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gX3N1cGVyLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtcclxuICAgICAgICBVdGlscy5zZXRFbnVtUHJvcGVydHkoRW51bXMuVGV4dFNpemUsIHJlc3VsdCwgXCJzaXplXCIsIHRoaXMuc2l6ZSwgRW51bXMuVGV4dFNpemUuRGVmYXVsdCk7XHJcbiAgICAgICAgVXRpbHMuc2V0RW51bVByb3BlcnR5KEVudW1zLlRleHRXZWlnaHQsIHJlc3VsdCwgXCJ3ZWlnaHRcIiwgdGhpcy53ZWlnaHQsIEVudW1zLlRleHRXZWlnaHQuRGVmYXVsdCk7XHJcbiAgICAgICAgVXRpbHMuc2V0RW51bVByb3BlcnR5KEVudW1zLlRleHRDb2xvciwgcmVzdWx0LCBcImNvbG9yXCIsIHRoaXMuY29sb3IsIEVudW1zLlRleHRDb2xvci5EZWZhdWx0KTtcclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwidGV4dFwiLCB0aGlzLnRleHQpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJpc1N1YnRsZVwiLCB0aGlzLmlzU3VidGxlLCBmYWxzZSk7XHJcbiAgICAgICAgVXRpbHMuc2V0RW51bVByb3BlcnR5KEVudW1zLkZvbnRUeXBlLCByZXN1bHQsIFwiZm9udFR5cGVcIiwgdGhpcy5mb250VHlwZSwgRW51bXMuRm9udFR5cGUuRGVmYXVsdCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBCYXNlVGV4dEJsb2NrLnByb3RvdHlwZS5hcHBseVN0eWxlc1RvID0gZnVuY3Rpb24gKHRhcmdldEVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgZm9udFR5cGUgPSB0aGlzLmhvc3RDb25maWcuZ2V0Rm9udFR5cGVEZWZpbml0aW9uKHRoaXMuZm9udFR5cGUpO1xyXG4gICAgICAgIGlmIChmb250VHlwZS5mb250RmFtaWx5KSB7XHJcbiAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUuZm9udEZhbWlseSA9IGZvbnRUeXBlLmZvbnRGYW1pbHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmb250U2l6ZTtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2l6ZSkge1xyXG4gICAgICAgICAgICBjYXNlIEVudW1zLlRleHRTaXplLlNtYWxsOlxyXG4gICAgICAgICAgICAgICAgZm9udFNpemUgPSBmb250VHlwZS5mb250U2l6ZXMuc21hbGw7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0U2l6ZS5NZWRpdW06XHJcbiAgICAgICAgICAgICAgICBmb250U2l6ZSA9IGZvbnRUeXBlLmZvbnRTaXplcy5tZWRpdW07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0U2l6ZS5MYXJnZTpcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplID0gZm9udFR5cGUuZm9udFNpemVzLmxhcmdlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRW51bXMuVGV4dFNpemUuRXh0cmFMYXJnZTpcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplID0gZm9udFR5cGUuZm9udFNpemVzLmV4dHJhTGFyZ2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplID0gZm9udFR5cGUuZm9udFNpemVzLmRlZmF1bHQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplICsgXCJweFwiO1xyXG4gICAgICAgIHZhciBjb2xvckRlZmluaXRpb24gPSB0aGlzLmdldENvbG9yRGVmaW5pdGlvbih0aGlzLmdldEVmZmVjdGl2ZVN0eWxlRGVmaW5pdGlvbigpLmZvcmVncm91bmRDb2xvcnMsIHRoaXMuZWZmZWN0aXZlQ29sb3IpO1xyXG4gICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUuY29sb3IgPSBVdGlscy5zdHJpbmdUb0Nzc0NvbG9yKHRoaXMuaXNTdWJ0bGUgPyBjb2xvckRlZmluaXRpb24uc3VidGxlIDogY29sb3JEZWZpbml0aW9uLmRlZmF1bHQpO1xyXG4gICAgICAgIHZhciBmb250V2VpZ2h0O1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy53ZWlnaHQpIHtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0V2VpZ2h0LkxpZ2h0ZXI6XHJcbiAgICAgICAgICAgICAgICBmb250V2VpZ2h0ID0gZm9udFR5cGUuZm9udFdlaWdodHMubGlnaHRlcjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEVudW1zLlRleHRXZWlnaHQuQm9sZGVyOlxyXG4gICAgICAgICAgICAgICAgZm9udFdlaWdodCA9IGZvbnRUeXBlLmZvbnRXZWlnaHRzLmJvbGRlcjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgZm9udFdlaWdodCA9IGZvbnRUeXBlLmZvbnRXZWlnaHRzLmRlZmF1bHQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS5mb250V2VpZ2h0ID0gZm9udFdlaWdodC50b1N0cmluZygpO1xyXG4gICAgfTtcclxuICAgIEJhc2VUZXh0QmxvY2sucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGpzb24sIGVycm9ycykge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucGFyc2UuY2FsbCh0aGlzLCBqc29uLCBlcnJvcnMpO1xyXG4gICAgICAgIHRoaXMudGV4dCA9IFV0aWxzLmdldFN0cmluZ1ZhbHVlKGpzb25bXCJ0ZXh0XCJdKTtcclxuICAgICAgICB2YXIgc2l6ZVN0cmluZyA9IFV0aWxzLmdldFN0cmluZ1ZhbHVlKGpzb25bXCJzaXplXCJdKTtcclxuICAgICAgICBpZiAoc2l6ZVN0cmluZyAmJiBzaXplU3RyaW5nLnRvTG93ZXJDYXNlKCkgPT09IFwibm9ybWFsXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5zaXplID0gRW51bXMuVGV4dFNpemUuRGVmYXVsdDtcclxuICAgICAgICAgICAgcmFpc2VQYXJzZUVycm9yKHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBFbnVtcy5WYWxpZGF0aW9uRXJyb3IuRGVwcmVjYXRlZCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGhlIFRleHRCbG9jay5zaXplIHZhbHVlIFxcXCJub3JtYWxcXFwiIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZC4gVXNlIFxcXCJkZWZhdWx0XFxcIiBpbnN0ZWFkLlwiXHJcbiAgICAgICAgICAgIH0sIGVycm9ycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNpemUgPSBVdGlscy5nZXRFbnVtVmFsdWUoRW51bXMuVGV4dFNpemUsIHNpemVTdHJpbmcsIHRoaXMuc2l6ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB3ZWlnaHRTdHJpbmcgPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1wid2VpZ2h0XCJdKTtcclxuICAgICAgICBpZiAod2VpZ2h0U3RyaW5nICYmIHdlaWdodFN0cmluZy50b0xvd2VyQ2FzZSgpID09PSBcIm5vcm1hbFwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2VpZ2h0ID0gRW51bXMuVGV4dFdlaWdodC5EZWZhdWx0O1xyXG4gICAgICAgICAgICByYWlzZVBhcnNlRXJyb3Ioe1xyXG4gICAgICAgICAgICAgICAgZXJyb3I6IEVudW1zLlZhbGlkYXRpb25FcnJvci5EZXByZWNhdGVkLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaGUgVGV4dEJsb2NrLndlaWdodCB2YWx1ZSBcXFwibm9ybWFsXFxcIiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQuIFVzZSBcXFwiZGVmYXVsdFxcXCIgaW5zdGVhZC5cIlxyXG4gICAgICAgICAgICB9LCBlcnJvcnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy53ZWlnaHQgPSBVdGlscy5nZXRFbnVtVmFsdWUoRW51bXMuVGV4dFdlaWdodCwgd2VpZ2h0U3RyaW5nLCB0aGlzLndlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29sb3IgPSBVdGlscy5nZXRFbnVtVmFsdWUoRW51bXMuVGV4dENvbG9yLCBqc29uW1wiY29sb3JcIl0sIHRoaXMuY29sb3IpO1xyXG4gICAgICAgIHRoaXMuaXNTdWJ0bGUgPSBVdGlscy5nZXRCb29sVmFsdWUoanNvbltcImlzU3VidGxlXCJdLCB0aGlzLmlzU3VidGxlKTtcclxuICAgICAgICB0aGlzLmZvbnRUeXBlID0gVXRpbHMuZ2V0RW51bVZhbHVlKEVudW1zLkZvbnRUeXBlLCBqc29uW1wiZm9udFR5cGVcIl0sIHRoaXMuZm9udFR5cGUpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCYXNlVGV4dEJsb2NrLnByb3RvdHlwZSwgXCJlZmZlY3RpdmVDb2xvclwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbG9yID8gdGhpcy5jb2xvciA6IEVudW1zLlRleHRDb2xvci5EZWZhdWx0O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2VUZXh0QmxvY2sucHJvdG90eXBlLCBcInRleHRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdGV4dDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VGV4dCh2YWx1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFzZVRleHRCbG9jay5wcm90b3R5cGUsIFwic2VsZWN0QWN0aW9uXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdEFjdGlvbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdEFjdGlvbiA9IHZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fc2VsZWN0QWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RBY3Rpb24uc2V0UGFyZW50KHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gQmFzZVRleHRCbG9jaztcclxufShDYXJkRWxlbWVudCkpO1xyXG5leHBvcnRzLkJhc2VUZXh0QmxvY2sgPSBCYXNlVGV4dEJsb2NrO1xyXG52YXIgVGV4dEJsb2NrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFRleHRCbG9jaywgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFRleHRCbG9jaygpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5fcHJvY2Vzc2VkVGV4dCA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMuX3RyZWF0QXNQbGFpblRleHQgPSB0cnVlO1xyXG4gICAgICAgIF90aGlzLndyYXAgPSBmYWxzZTtcclxuICAgICAgICBfdGhpcy51c2VNYXJrZG93biA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgVGV4dEJsb2NrLnByb3RvdHlwZS5yZXN0b3JlT3JpZ2luYWxDb250ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBtYXhIZWlnaHQgPSB0aGlzLm1heExpbmVzXHJcbiAgICAgICAgICAgID8gKHRoaXMuX2NvbXB1dGVkTGluZUhlaWdodCAqIHRoaXMubWF4TGluZXMpICsgJ3B4J1xyXG4gICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0ID0gbWF4SGVpZ2h0O1xyXG4gICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LmlubmVySFRNTCA9IHRoaXMuX29yaWdpbmFsSW5uZXJIdG1sO1xyXG4gICAgfTtcclxuICAgIFRleHRCbG9jay5wcm90b3R5cGUudHJ1bmNhdGVJZlN1cHBvcnRlZCA9IGZ1bmN0aW9uIChtYXhIZWlnaHQpIHtcclxuICAgICAgICAvLyBGb3Igbm93LCBvbmx5IHRydW5jYXRlIFRleHRCbG9ja3MgdGhhdCBjb250YWluIGp1c3QgYSBzaW5nbGVcclxuICAgICAgICAvLyBwYXJhZ3JhcGggLS0gc2luY2UgdGhlIG1heExpbmVzIGNhbGN1bGF0aW9uIGRvZXNuJ3QgdGFrZSBpbnRvXHJcbiAgICAgICAgLy8gYWNjb3VudCBNYXJrZG93biBsaXN0c1xyXG4gICAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMucmVuZGVyZWRFbGVtZW50LmNoaWxkcmVuO1xyXG4gICAgICAgIHZhciBpc1RleHRPbmx5ID0gIWNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICB2YXIgdHJ1bmNhdGlvblN1cHBvcnRlZCA9IGlzVGV4dE9ubHkgfHwgY2hpbGRyZW4ubGVuZ3RoID09IDFcclxuICAgICAgICAgICAgJiYgY2hpbGRyZW5bMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpID09ICdwJztcclxuICAgICAgICBpZiAodHJ1bmNhdGlvblN1cHBvcnRlZCkge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGlzVGV4dE9ubHlcclxuICAgICAgICAgICAgICAgID8gdGhpcy5yZW5kZXJlZEVsZW1lbnRcclxuICAgICAgICAgICAgICAgIDogY2hpbGRyZW5bMF07XHJcbiAgICAgICAgICAgIFV0aWxzLnRydW5jYXRlKGVsZW1lbnQsIG1heEhlaWdodCwgdGhpcy5fY29tcHV0ZWRMaW5lSGVpZ2h0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBUZXh0QmxvY2sucHJvdG90eXBlLnNldFRleHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnNldFRleHQuY2FsbCh0aGlzLCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5fcHJvY2Vzc2VkVGV4dCA9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgVGV4dEJsb2NrLnByb3RvdHlwZS5nZXRSZW5kZXJlZERvbUVsZW1lbnRUeXBlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcImRpdlwiO1xyXG4gICAgfTtcclxuICAgIFRleHRCbG9jay5wcm90b3R5cGUuaW50ZXJuYWxSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLl9wcm9jZXNzZWRUZXh0ID0gbnVsbDtcclxuICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy50ZXh0KSkge1xyXG4gICAgICAgICAgICB2YXIgaG9zdENvbmZpZyA9IHRoaXMuaG9zdENvbmZpZztcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMuZ2V0UmVuZGVyZWREb21FbGVtZW50VHlwZSgpKTtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLXRleHRCbG9ja1wiKSk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5U3R5bGVzVG8oZWxlbWVudCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdEFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNlbGVjdEFjdGlvbi5leGVjdXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKGhvc3RDb25maWcuc3VwcG9ydHNJbnRlcmFjdGl2aXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC50YWJJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCB0aGlzLnNlbGVjdEFjdGlvbi50aXRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLXNlbGVjdGFibGVcIikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fcHJvY2Vzc2VkVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdHJlYXRBc1BsYWluVGV4dCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgZm9ybWF0dGVkVGV4dCA9IFRleHRGb3JtYXR0ZXJzLmZvcm1hdFRleHQodGhpcy5sYW5nLCB0aGlzLnRleHQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlTWFya2Rvd24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoQWRhcHRpdmVDYXJkLmFsbG93TWFya0ZvclRleHRIaWdobGlnaHRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkVGV4dCA9IGZvcm1hdHRlZFRleHQucmVwbGFjZSgvPG1hcms+L2csIFwiPT09XCIpLnJlcGxhY2UoLzxcXC9tYXJrPi9nLCBcIi89PVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtkb3duUHJvY2Vzc2luZ1Jlc3VsdCA9IEFkYXB0aXZlQ2FyZC5hcHBseU1hcmtkb3duKGZvcm1hdHRlZFRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXJrZG93blByb2Nlc3NpbmdSZXN1bHQuZGlkUHJvY2VzcyAmJiBtYXJrZG93blByb2Nlc3NpbmdSZXN1bHQub3V0cHV0SHRtbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzZWRUZXh0ID0gbWFya2Rvd25Qcm9jZXNzaW5nUmVzdWx0Lm91dHB1dEh0bWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RyZWF0QXNQbGFpblRleHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBwcm9jZXNzIDxtYXJrPiB0YWcgaWYgbWFya2Rvd24gcHJvY2Vzc2luZyB3YXMgYXBwbGllZCBiZWNhdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hcmtkb3duIHByb2Nlc3NpbmcgaXMgYWxzbyByZXNwb25zaWJsZSBmb3Igc2FuaXRpemluZyB0aGUgaW5wdXQgc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBZGFwdGl2ZUNhcmQuYWxsb3dNYXJrRm9yVGV4dEhpZ2hsaWdodGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtTdHlsZSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWZmZWN0aXZlU3R5bGUgPSB0aGlzLmdldEVmZmVjdGl2ZVN0eWxlRGVmaW5pdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVmZmVjdGl2ZVN0eWxlLmhpZ2hsaWdodEJhY2tncm91bmRDb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtTdHlsZSArPSBcImJhY2tncm91bmQtY29sb3I6IFwiICsgZWZmZWN0aXZlU3R5bGUuaGlnaGxpZ2h0QmFja2dyb3VuZENvbG9yICsgXCI7XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWZmZWN0aXZlU3R5bGUuaGlnaGxpZ2h0Rm9yZWdyb3VuZENvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya1N0eWxlICs9IFwiY29sb3I6IFwiICsgZWZmZWN0aXZlU3R5bGUuaGlnaGxpZ2h0Rm9yZWdyb3VuZENvbG9yICsgXCI7XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbE9yRW1wdHkobWFya1N0eWxlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtTdHlsZSA9ICdzdHlsZT1cIicgKyBtYXJrU3R5bGUgKyAnXCInO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvY2Vzc2VkVGV4dCA9IHRoaXMuX3Byb2Nlc3NlZFRleHQucmVwbGFjZSgvPT09L2csIFwiPG1hcmsgXCIgKyBtYXJrU3R5bGUgKyBcIj5cIikucmVwbGFjZSgvXFwvPT0vZywgXCI8L21hcms+XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzZWRUZXh0ID0gZm9ybWF0dGVkVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJlYXRBc1BsYWluVGV4dCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvY2Vzc2VkVGV4dCA9IGZvcm1hdHRlZFRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJlYXRBc1BsYWluVGV4dCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3RyZWF0QXNQbGFpblRleHQpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJUZXh0ID0gdGhpcy5fcHJvY2Vzc2VkVGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5fcHJvY2Vzc2VkVGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3RFbGVtZW50Q2hpbGQgPSBlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkO1xyXG4gICAgICAgICAgICAgICAgZmlyc3RFbGVtZW50Q2hpbGQuc3R5bGUubWFyZ2luVG9wID0gXCIwcHhcIjtcclxuICAgICAgICAgICAgICAgIGZpcnN0RWxlbWVudENoaWxkLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMud3JhcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0RWxlbWVudENoaWxkLnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdEVsZW1lbnRDaGlsZC5zdHlsZS50ZXh0T3ZlcmZsb3cgPSBcImVsbGlwc2lzXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQubGFzdEVsZW1lbnRDaGlsZCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lmxhc3RFbGVtZW50Q2hpbGQuc3R5bGUubWFyZ2luQm90dG9tID0gXCIwcHhcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgYW5jaG9ycyA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhXCIpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFuY2hvcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBhbmNob3IgPSBhbmNob3JzW2ldO1xyXG4gICAgICAgICAgICAgICAgYW5jaG9yLmNsYXNzTGlzdC5hZGQoaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtYW5jaG9yXCIpKTtcclxuICAgICAgICAgICAgICAgIGFuY2hvci50YXJnZXQgPSBcIl9ibGFua1wiO1xyXG4gICAgICAgICAgICAgICAgYW5jaG9yLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyYWlzZUFuY2hvckNsaWNrZWRFdmVudChfdGhpcywgZS50YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMud3JhcCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS53b3JkV3JhcCA9IFwiYnJlYWstd29yZFwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWF4TGluZXMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSAodGhpcy5fY29tcHV0ZWRMaW5lSGVpZ2h0ICogdGhpcy5tYXhMaW5lcykgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLndoaXRlU3BhY2UgPSBcIm5vd3JhcFwiO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50ZXh0T3ZlcmZsb3cgPSBcImVsbGlwc2lzXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKEFkYXB0aXZlQ2FyZC51c2VBZHZhbmNlZFRleHRCbG9ja1RydW5jYXRpb24gfHwgQWRhcHRpdmVDYXJkLnVzZUFkdmFuY2VkQ2FyZEJvdHRvbVRydW5jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29yaWdpbmFsSW5uZXJIdG1sID0gZWxlbWVudC5pbm5lckhUTUw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVGV4dEJsb2NrLnByb3RvdHlwZS50cnVuY2F0ZU92ZXJmbG93ID0gZnVuY3Rpb24gKG1heEhlaWdodCkge1xyXG4gICAgICAgIGlmIChtYXhIZWlnaHQgPj0gdGhpcy5fY29tcHV0ZWRMaW5lSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRydW5jYXRlSWZTdXBwb3J0ZWQobWF4SGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFRleHRCbG9jay5wcm90b3R5cGUudW5kb092ZXJmbG93VHJ1bmNhdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnJlc3RvcmVPcmlnaW5hbENvbnRlbnQoKTtcclxuICAgICAgICBpZiAoQWRhcHRpdmVDYXJkLnVzZUFkdmFuY2VkVGV4dEJsb2NrVHJ1bmNhdGlvbiAmJiB0aGlzLm1heExpbmVzKSB7XHJcbiAgICAgICAgICAgIHZhciBtYXhIZWlnaHQgPSB0aGlzLl9jb21wdXRlZExpbmVIZWlnaHQgKiB0aGlzLm1heExpbmVzO1xyXG4gICAgICAgICAgICB0aGlzLnRydW5jYXRlSWZTdXBwb3J0ZWQobWF4SGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVGV4dEJsb2NrLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcIndyYXBcIiwgdGhpcy53cmFwLCBmYWxzZSk7XHJcbiAgICAgICAgVXRpbHMuc2V0TnVtYmVyUHJvcGVydHkocmVzdWx0LCBcIm1heExpbmVzXCIsIHRoaXMubWF4TGluZXMpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgVGV4dEJsb2NrLnByb3RvdHlwZS5hcHBseVN0eWxlc1RvID0gZnVuY3Rpb24gKHRhcmdldEVsZW1lbnQpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmFwcGx5U3R5bGVzVG8uY2FsbCh0aGlzLCB0YXJnZXRFbGVtZW50KTtcclxuICAgICAgICB2YXIgcGFyZW50Q29udGFpbmVyID0gdGhpcy5nZXRQYXJlbnRDb250YWluZXIoKTtcclxuICAgICAgICB2YXIgaXNSdGwgPSBwYXJlbnRDb250YWluZXIgPyBwYXJlbnRDb250YWluZXIuaXNSdGwoKSA6IGZhbHNlO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5ob3Jpem9udGFsQWxpZ25tZW50KSB7XHJcbiAgICAgICAgICAgIGNhc2UgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXI6XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50LnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5Ib3Jpem9udGFsQWxpZ25tZW50LlJpZ2h0OlxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS50ZXh0QWxpZ24gPSBpc1J0bCA/IFwibGVmdFwiIDogXCJyaWdodFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50LnN0eWxlLnRleHRBbGlnbiA9IGlzUnRsID8gXCJyaWdodFwiIDogXCJsZWZ0XCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGxpbmVIZWlnaHRzID0gdGhpcy5ob3N0Q29uZmlnLmxpbmVIZWlnaHRzO1xyXG4gICAgICAgIGlmIChsaW5lSGVpZ2h0cykge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuc2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5UZXh0U2l6ZS5TbWFsbDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb21wdXRlZExpbmVIZWlnaHQgPSBsaW5lSGVpZ2h0cy5zbWFsbDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuVGV4dFNpemUuTWVkaXVtOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbXB1dGVkTGluZUhlaWdodCA9IGxpbmVIZWlnaHRzLm1lZGl1bTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuVGV4dFNpemUuTGFyZ2U6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29tcHV0ZWRMaW5lSGVpZ2h0ID0gbGluZUhlaWdodHMubGFyZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLlRleHRTaXplLkV4dHJhTGFyZ2U6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29tcHV0ZWRMaW5lSGVpZ2h0ID0gbGluZUhlaWdodHMuZXh0cmFMYXJnZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29tcHV0ZWRMaW5lSGVpZ2h0ID0gbGluZUhlaWdodHMuZGVmYXVsdDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gTG9va3MgbGlrZSAxLjMzIGlzIHRoZSBtYWdpYyBudW1iZXIgdG8gY29tcHV0ZSBsaW5lLWhlaWdodFxyXG4gICAgICAgICAgICAvLyBmcm9tIGZvbnQgc2l6ZS5cclxuICAgICAgICAgICAgdGhpcy5fY29tcHV0ZWRMaW5lSGVpZ2h0ID0gdGhpcy5nZXRGb250U2l6ZSh0aGlzLmhvc3RDb25maWcuZ2V0Rm9udFR5cGVEZWZpbml0aW9uKHRoaXMuZm9udFR5cGUpKSAqIDEuMzM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUubGluZUhlaWdodCA9IHRoaXMuX2NvbXB1dGVkTGluZUhlaWdodCArIFwicHhcIjtcclxuICAgIH07XHJcbiAgICBUZXh0QmxvY2sucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGpzb24sIGVycm9ycykge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucGFyc2UuY2FsbCh0aGlzLCBqc29uLCBlcnJvcnMpO1xyXG4gICAgICAgIHRoaXMud3JhcCA9IFV0aWxzLmdldEJvb2xWYWx1ZShqc29uW1wid3JhcFwiXSwgdGhpcy53cmFwKTtcclxuICAgICAgICB0aGlzLm1heExpbmVzID0gVXRpbHMuZ2V0TnVtYmVyVmFsdWUoanNvbltcIm1heExpbmVzXCJdKTtcclxuICAgIH07XHJcbiAgICBUZXh0QmxvY2sucHJvdG90eXBlLmdldEpzb25UeXBlTmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gXCJUZXh0QmxvY2tcIjtcclxuICAgIH07XHJcbiAgICBUZXh0QmxvY2sucHJvdG90eXBlLnVwZGF0ZUxheW91dCA9IGZ1bmN0aW9uIChwcm9jZXNzQ2hpbGRyZW4pIHtcclxuICAgICAgICBpZiAocHJvY2Vzc0NoaWxkcmVuID09PSB2b2lkIDApIHsgcHJvY2Vzc0NoaWxkcmVuID0gZmFsc2U7IH1cclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVwZGF0ZUxheW91dC5jYWxsKHRoaXMsIHByb2Nlc3NDaGlsZHJlbik7XHJcbiAgICAgICAgaWYgKEFkYXB0aXZlQ2FyZC51c2VBZHZhbmNlZFRleHRCbG9ja1RydW5jYXRpb24gJiYgdGhpcy5tYXhMaW5lcyAmJiB0aGlzLmlzUmVuZGVyZWQoKSkge1xyXG4gICAgICAgICAgICAvLyBSZXNldCB0aGUgZWxlbWVudCdzIGlubmVySFRNTCBpbiBjYXNlIHRoZSBhdmFpbGFibGUgcm9vbSBmb3JcclxuICAgICAgICAgICAgLy8gY29udGVudCBoYXMgaW5jcmVhc2VkXHJcbiAgICAgICAgICAgIHRoaXMucmVzdG9yZU9yaWdpbmFsQ29udGVudCgpO1xyXG4gICAgICAgICAgICB0aGlzLnRydW5jYXRlSWZTdXBwb3J0ZWQodGhpcy5fY29tcHV0ZWRMaW5lSGVpZ2h0ICogdGhpcy5tYXhMaW5lcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBUZXh0QmxvY2s7XHJcbn0oQmFzZVRleHRCbG9jaykpO1xyXG5leHBvcnRzLlRleHRCbG9jayA9IFRleHRCbG9jaztcclxudmFyIExhYmVsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKExhYmVsLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTGFiZWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgTGFiZWwucHJvdG90eXBlLmdldFJlbmRlcmVkRG9tRWxlbWVudFR5cGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwibGFiZWxcIjtcclxuICAgIH07XHJcbiAgICBMYWJlbC5wcm90b3R5cGUuaW50ZXJuYWxSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlbmRlcmVkRWxlbWVudCA9IF9zdXBlci5wcm90b3R5cGUuaW50ZXJuYWxSZW5kZXIuY2FsbCh0aGlzKTtcclxuICAgICAgICBpZiAocmVuZGVyZWRFbGVtZW50ICYmICFVdGlscy5pc051bGxPckVtcHR5KHRoaXMuZm9yRWxlbWVudElkKSkge1xyXG4gICAgICAgICAgICByZW5kZXJlZEVsZW1lbnQuaHRtbEZvciA9IHRoaXMuZm9yRWxlbWVudElkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVuZGVyZWRFbGVtZW50O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBMYWJlbDtcclxufShUZXh0QmxvY2spKTtcclxudmFyIFRleHRSdW4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoVGV4dFJ1biwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFRleHRSdW4oKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuaXRhbGljID0gZmFsc2U7XHJcbiAgICAgICAgX3RoaXMuc3RyaWtldGhyb3VnaCA9IGZhbHNlO1xyXG4gICAgICAgIF90aGlzLmhpZ2hsaWdodCA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFRleHRSdW4ucHJvdG90eXBlLmludGVybmFsUmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCFVdGlscy5pc051bGxPckVtcHR5KHRoaXMudGV4dCkpIHtcclxuICAgICAgICAgICAgdmFyIGhvc3RDb25maWcgPSB0aGlzLmhvc3RDb25maWc7XHJcbiAgICAgICAgICAgIHZhciBmb3JtYXR0ZWRUZXh0ID0gVGV4dEZvcm1hdHRlcnMuZm9ybWF0VGV4dCh0aGlzLmxhbmcsIHRoaXMudGV4dCk7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy10ZXh0UnVuXCIpKTtcclxuICAgICAgICAgICAgdGhpcy5hcHBseVN0eWxlc1RvKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RBY3Rpb24gJiYgaG9zdENvbmZpZy5zdXBwb3J0c0ludGVyYWN0aXZpdHkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICAgICAgICAgICAgICAgIGFuY2hvci5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWFuY2hvclwiKSk7XHJcbiAgICAgICAgICAgICAgICBhbmNob3IuaHJlZiA9IHRoaXMuc2VsZWN0QWN0aW9uLmdldEhyZWYoKTtcclxuICAgICAgICAgICAgICAgIGFuY2hvci50YXJnZXQgPSBcIl9ibGFua1wiO1xyXG4gICAgICAgICAgICAgICAgYW5jaG9yLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2VsZWN0QWN0aW9uLmV4ZWN1dGUoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBhbmNob3IuaW5uZXJUZXh0ID0gZm9ybWF0dGVkVGV4dDtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoYW5jaG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJUZXh0ID0gZm9ybWF0dGVkVGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUZXh0UnVuLnByb3RvdHlwZS5hcHBseVN0eWxlc1RvID0gZnVuY3Rpb24gKHRhcmdldEVsZW1lbnQpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmFwcGx5U3R5bGVzVG8uY2FsbCh0aGlzLCB0YXJnZXRFbGVtZW50KTtcclxuICAgICAgICBpZiAodGhpcy5pdGFsaWMpIHtcclxuICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5zdHlsZS5mb250U3R5bGUgPSBcIml0YWxpY1wiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zdHJpa2V0aHJvdWdoKSB7XHJcbiAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUudGV4dERlY29yYXRpb24gPSBcImxpbmUtdGhyb3VnaFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5oaWdobGlnaHQpIHtcclxuICAgICAgICAgICAgdmFyIGNvbG9yRGVmaW5pdGlvbiA9IHRoaXMuZ2V0Q29sb3JEZWZpbml0aW9uKHRoaXMuZ2V0RWZmZWN0aXZlU3R5bGVEZWZpbml0aW9uKCkuZm9yZWdyb3VuZENvbG9ycywgdGhpcy5lZmZlY3RpdmVDb2xvcik7XHJcbiAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gVXRpbHMuc3RyaW5nVG9Dc3NDb2xvcih0aGlzLmlzU3VidGxlID8gY29sb3JEZWZpbml0aW9uLmhpZ2hsaWdodENvbG9ycy5zdWJ0bGUgOiBjb2xvckRlZmluaXRpb24uaGlnaGxpZ2h0Q29sb3JzLmRlZmF1bHQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUZXh0UnVuLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcIml0YWxpY1wiLCB0aGlzLml0YWxpYywgZmFsc2UpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJzdHJpa2V0aHJvdWdoXCIsIHRoaXMuc3RyaWtldGhyb3VnaCwgZmFsc2UpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJoaWdobGlnaHRcIiwgdGhpcy5oaWdobGlnaHQsIGZhbHNlKTtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RBY3Rpb24pIHtcclxuICAgICAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcInNlbGVjdEFjdGlvblwiLCB0aGlzLnNlbGVjdEFjdGlvbi50b0pTT04oKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgVGV4dFJ1bi5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbiwgZXJyb3JzKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wYXJzZS5jYWxsKHRoaXMsIGpzb24sIGVycm9ycyk7XHJcbiAgICAgICAgdGhpcy5pdGFsaWMgPSBVdGlscy5nZXRCb29sVmFsdWUoanNvbltcIml0YWxpY1wiXSwgdGhpcy5pdGFsaWMpO1xyXG4gICAgICAgIHRoaXMuc3RyaWtldGhyb3VnaCA9IFV0aWxzLmdldEJvb2xWYWx1ZShqc29uW1wic3RyaWtldGhyb3VnaFwiXSwgdGhpcy5zdHJpa2V0aHJvdWdoKTtcclxuICAgICAgICB0aGlzLmhpZ2hsaWdodCA9IFV0aWxzLmdldEJvb2xWYWx1ZShqc29uW1wiaGlnaGxpZ2h0XCJdLCB0aGlzLmhpZ2hsaWdodCk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RBY3Rpb24gPSBjcmVhdGVBY3Rpb25JbnN0YW5jZSh0aGlzLCBqc29uW1wic2VsZWN0QWN0aW9uXCJdLCBbU2hvd0NhcmRBY3Rpb24uSnNvblR5cGVOYW1lXSwgIXRoaXMuaXNEZXNpZ25Nb2RlKCksIGVycm9ycyk7XHJcbiAgICB9O1xyXG4gICAgVGV4dFJ1bi5wcm90b3R5cGUuZ2V0SnNvblR5cGVOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcIlRleHRSdW5cIjtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGV4dFJ1bi5wcm90b3R5cGUsIFwiaXNTdGFuZGFsb25lXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRleHRSdW4ucHJvdG90eXBlLCBcImlzSW5saW5lXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gVGV4dFJ1bjtcclxufShCYXNlVGV4dEJsb2NrKSk7XHJcbmV4cG9ydHMuVGV4dFJ1biA9IFRleHRSdW47XHJcbnZhciBSaWNoVGV4dEJsb2NrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFJpY2hUZXh0QmxvY2ssIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBSaWNoVGV4dEJsb2NrKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLl9pbmxpbmVzID0gW107XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgUmljaFRleHRCbG9jay5wcm90b3R5cGUuaW50ZXJuYWxBZGRJbmxpbmUgPSBmdW5jdGlvbiAoaW5saW5lLCBmb3JjZUFkZCkge1xyXG4gICAgICAgIGlmIChmb3JjZUFkZCA9PT0gdm9pZCAwKSB7IGZvcmNlQWRkID0gZmFsc2U7IH1cclxuICAgICAgICBpZiAoIWlubGluZS5pc0lubGluZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSaWNoVGV4dEJsb2NrLmFkZElubGluZTogdGhlIHNwZWNpZmllZCBjYXJkIGVsZW1lbnQgY2Fubm90IGJlIHVzZWQgYXMgYSBSaWNoVGV4dEJsb2NrIGlubGluZS5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBkb0FkZCA9IGlubGluZS5wYXJlbnQgPT0gbnVsbCB8fCBmb3JjZUFkZDtcclxuICAgICAgICBpZiAoIWRvQWRkICYmIGlubGluZS5wYXJlbnQgIT0gdGhpcykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSaWNoVGV4dEJsb2NrLmFkZElubGluZTogdGhlIHNwZWNpZmllZCBpbmxpbmUgYWxyZWFkeSBiZWxvbmdzIHRvIGFub3RoZXIgUmljaFRleHRCbG9jay5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpbmxpbmUuc2V0UGFyZW50KHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLl9pbmxpbmVzLnB1c2goaW5saW5lKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUmljaFRleHRCbG9jay5wcm90b3R5cGUuaW50ZXJuYWxSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lubGluZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gdGhpcy5ob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1yaWNoVGV4dEJsb2NrXCIpO1xyXG4gICAgICAgICAgICB2YXIgcGFyZW50Q29udGFpbmVyID0gdGhpcy5nZXRQYXJlbnRDb250YWluZXIoKTtcclxuICAgICAgICAgICAgdmFyIGlzUnRsID0gcGFyZW50Q29udGFpbmVyID8gcGFyZW50Q29udGFpbmVyLmlzUnRsKCkgOiBmYWxzZTtcclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmhvcml6b250YWxBbGlnbm1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5Ib3Jpem9udGFsQWxpZ25tZW50LlJpZ2h0OlxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudGV4dEFsaWduID0gaXNSdGwgPyBcImxlZnRcIiA6IFwicmlnaHRcIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50ZXh0QWxpZ24gPSBpc1J0bCA/IFwicmlnaHRcIiA6IFwibGVmdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByZW5kZXJlZElubGluZXMgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5faW5saW5lczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmxpbmUgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVuZGVyZWRJbmxpbmUgPSBpbmxpbmUucmVuZGVyKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVuZGVyZWRJbmxpbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKHJlbmRlcmVkSW5saW5lKTtcclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlZElubGluZXMrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocmVuZGVyZWRJbmxpbmVzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgUmljaFRleHRCbG9jay5wcm90b3R5cGUuYXNTdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IFwiXCI7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuX2lubGluZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmxpbmUgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIHJlc3VsdCArPSBpbmxpbmUuYXNTdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBSaWNoVGV4dEJsb2NrLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChqc29uLCBlcnJvcnMpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnBhcnNlLmNhbGwodGhpcywganNvbiwgZXJyb3JzKTtcclxuICAgICAgICB0aGlzLl9pbmxpbmVzID0gW107XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoanNvbltcImlubGluZXNcIl0pKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBqc29uW1wiaW5saW5lc1wiXTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBqc29uSW5saW5lID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIGlubGluZSA9IHZvaWQgMDtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YganNvbklubGluZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0UnVuID0gbmV3IFRleHRSdW4oKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0UnVuLnRleHQgPSBqc29uSW5saW5lO1xyXG4gICAgICAgICAgICAgICAgICAgIGlubGluZSA9IHRleHRSdW47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpbmxpbmUgPSBjcmVhdGVFbGVtZW50SW5zdGFuY2UodGhpcywganNvbklubGluZSwgZmFsc2UsIC8vIE5vIGZhbGxiYWNrIGZvciBpbmxpbmVzIGluIDEuMlxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9ycyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5saW5lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlcm5hbEFkZElubGluZShpbmxpbmUsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFJpY2hUZXh0QmxvY2sucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gX3N1cGVyLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtcclxuICAgICAgICBpZiAodGhpcy5faW5saW5lcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBqc29uSW5saW5lcyA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5faW5saW5lczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmxpbmUgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBqc29uSW5saW5lcy5wdXNoKGlubGluZS50b0pTT04oKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcImlubGluZXNcIiwganNvbklubGluZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIFJpY2hUZXh0QmxvY2sucHJvdG90eXBlLmdldEpzb25UeXBlTmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gXCJSaWNoVGV4dEJsb2NrXCI7XHJcbiAgICB9O1xyXG4gICAgUmljaFRleHRCbG9jay5wcm90b3R5cGUuZ2V0SW5saW5lQ291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lubGluZXMubGVuZ3RoO1xyXG4gICAgfTtcclxuICAgIFJpY2hUZXh0QmxvY2sucHJvdG90eXBlLmdldElubGluZUF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLl9pbmxpbmVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faW5saW5lc1tpbmRleF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSaWNoVGV4dEJsb2NrLmdldElubGluZUF0OiBJbmRleCBvdXQgb2YgcmFuZ2UgKFwiICsgaW5kZXggKyBcIilcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFJpY2hUZXh0QmxvY2sucHJvdG90eXBlLmFkZElubGluZSA9IGZ1bmN0aW9uIChpbmxpbmUpIHtcclxuICAgICAgICB0aGlzLmludGVybmFsQWRkSW5saW5lKGlubGluZSk7XHJcbiAgICB9O1xyXG4gICAgUmljaFRleHRCbG9jay5wcm90b3R5cGUucmVtb3ZlSW5saW5lID0gZnVuY3Rpb24gKGlubGluZSkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuX2lubGluZXMuaW5kZXhPZihpbmxpbmUpO1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lubGluZXNbaW5kZXhdLnNldFBhcmVudChudWxsKTtcclxuICAgICAgICAgICAgdGhpcy5faW5saW5lcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBSaWNoVGV4dEJsb2NrO1xyXG59KENhcmRFbGVtZW50KSk7XHJcbmV4cG9ydHMuUmljaFRleHRCbG9jayA9IFJpY2hUZXh0QmxvY2s7XHJcbnZhciBGYWN0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEZhY3QsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBGYWN0KG5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKG5hbWUgPT09IHZvaWQgMCkgeyBuYW1lID0gdW5kZWZpbmVkOyB9XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHsgdmFsdWUgPSB1bmRlZmluZWQ7IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIF90aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgRmFjdC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucGFyc2UuY2FsbCh0aGlzLCBqc29uKTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1widGl0bGVcIl0pO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1widmFsdWVcIl0pO1xyXG4gICAgfTtcclxuICAgIEZhY3QucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gX3N1cGVyLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtcclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwidGl0bGVcIiwgdGhpcy5uYW1lKTtcclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwidmFsdWVcIiwgdGhpcy52YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmFjdDtcclxufShTZXJpYWxpemFibGVPYmplY3QpKTtcclxuZXhwb3J0cy5GYWN0ID0gRmFjdDtcclxudmFyIEZhY3RTZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoRmFjdFNldCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEZhY3RTZXQoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuZmFjdHMgPSBbXTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmFjdFNldC5wcm90b3R5cGUsIFwidXNlRGVmYXVsdFNpemluZ1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEZhY3RTZXQucHJvdG90eXBlLmludGVybmFsUmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gbnVsbDtcclxuICAgICAgICB2YXIgaG9zdENvbmZpZyA9IHRoaXMuaG9zdENvbmZpZztcclxuICAgICAgICBpZiAodGhpcy5mYWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGFibGVcIik7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYm9yZGVyV2lkdGggPSBcIjBweFwiO1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJvcmRlclNwYWNpbmcgPSBcIjBweFwiO1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJvcmRlclN0eWxlID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYm9yZGVyQ29sbGFwc2UgPSBcImNvbGxhcHNlXCI7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1mYWN0c2V0XCIpKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZhY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJFbGVtZW50LnN0eWxlLm1hcmdpblRvcCA9IGhvc3RDb25maWcuZmFjdFNldC5zcGFjaW5nICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gVGl0bGUgY29sdW1uXHJcbiAgICAgICAgICAgICAgICB2YXIgdGRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gICAgICAgICAgICAgICAgdGRFbGVtZW50LnN0eWxlLnBhZGRpbmcgPSBcIjBcIjtcclxuICAgICAgICAgICAgICAgIHRkRWxlbWVudC5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWZhY3QtdGl0bGVcIikpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGhvc3RDb25maWcuZmFjdFNldC50aXRsZS5tYXhXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRkRWxlbWVudC5zdHlsZS5tYXhXaWR0aCA9IGhvc3RDb25maWcuZmFjdFNldC50aXRsZS5tYXhXaWR0aCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRkRWxlbWVudC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gXCJ0b3BcIjtcclxuICAgICAgICAgICAgICAgIHZhciB0ZXh0QmxvY2sgPSBuZXcgVGV4dEJsb2NrKCk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QmxvY2suc2V0UGFyZW50KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrLnRleHQgPSAoVXRpbHMuaXNOdWxsT3JFbXB0eSh0aGlzLmZhY3RzW2ldLm5hbWUpICYmIHRoaXMuaXNEZXNpZ25Nb2RlKCkpID8gXCJUaXRsZVwiIDogdGhpcy5mYWN0c1tpXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrLnNpemUgPSBob3N0Q29uZmlnLmZhY3RTZXQudGl0bGUuc2l6ZTtcclxuICAgICAgICAgICAgICAgIHRleHRCbG9jay5jb2xvciA9IGhvc3RDb25maWcuZmFjdFNldC50aXRsZS5jb2xvcjtcclxuICAgICAgICAgICAgICAgIHRleHRCbG9jay5pc1N1YnRsZSA9IGhvc3RDb25maWcuZmFjdFNldC50aXRsZS5pc1N1YnRsZTtcclxuICAgICAgICAgICAgICAgIHRleHRCbG9jay53ZWlnaHQgPSBob3N0Q29uZmlnLmZhY3RTZXQudGl0bGUud2VpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrLndyYXAgPSBob3N0Q29uZmlnLmZhY3RTZXQudGl0bGUud3JhcDtcclxuICAgICAgICAgICAgICAgIHRleHRCbG9jay5zcGFjaW5nID0gRW51bXMuU3BhY2luZy5Ob25lO1xyXG4gICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQodGRFbGVtZW50LCB0ZXh0QmxvY2sucmVuZGVyKCkpO1xyXG4gICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQodHJFbGVtZW50LCB0ZEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgLy8gU3BhY2VyIGNvbHVtblxyXG4gICAgICAgICAgICAgICAgdGRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gICAgICAgICAgICAgICAgdGRFbGVtZW50LnN0eWxlLndpZHRoID0gXCIxMHB4XCI7XHJcbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZCh0ckVsZW1lbnQsIHRkRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAvLyBWYWx1ZSBjb2x1bW5cclxuICAgICAgICAgICAgICAgIHRkRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICAgICAgICAgICAgICAgIHRkRWxlbWVudC5zdHlsZS5wYWRkaW5nID0gXCIwXCI7XHJcbiAgICAgICAgICAgICAgICB0ZEVsZW1lbnQuc3R5bGUudmVydGljYWxBbGlnbiA9IFwidG9wXCI7XHJcbiAgICAgICAgICAgICAgICB0ZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1mYWN0LXZhbHVlXCIpKTtcclxuICAgICAgICAgICAgICAgIHRleHRCbG9jayA9IG5ldyBUZXh0QmxvY2soKTtcclxuICAgICAgICAgICAgICAgIHRleHRCbG9jay5zZXRQYXJlbnQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QmxvY2sudGV4dCA9IHRoaXMuZmFjdHNbaV0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QmxvY2suc2l6ZSA9IGhvc3RDb25maWcuZmFjdFNldC52YWx1ZS5zaXplO1xyXG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrLmNvbG9yID0gaG9zdENvbmZpZy5mYWN0U2V0LnZhbHVlLmNvbG9yO1xyXG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrLmlzU3VidGxlID0gaG9zdENvbmZpZy5mYWN0U2V0LnZhbHVlLmlzU3VidGxlO1xyXG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrLndlaWdodCA9IGhvc3RDb25maWcuZmFjdFNldC52YWx1ZS53ZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QmxvY2sud3JhcCA9IGhvc3RDb25maWcuZmFjdFNldC52YWx1ZS53cmFwO1xyXG4gICAgICAgICAgICAgICAgdGV4dEJsb2NrLnNwYWNpbmcgPSBFbnVtcy5TcGFjaW5nLk5vbmU7XHJcbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZCh0ZEVsZW1lbnQsIHRleHRCbG9jay5yZW5kZXIoKSk7XHJcbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZCh0ckVsZW1lbnQsIHRkRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCB0ckVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfTtcclxuICAgIEZhY3RTZXQucHJvdG90eXBlLmdldEpzb25UeXBlTmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gXCJGYWN0U2V0XCI7XHJcbiAgICB9O1xyXG4gICAgRmFjdFNldC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBfc3VwZXIucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO1xyXG4gICAgICAgIFV0aWxzLnNldEFycmF5UHJvcGVydHkocmVzdWx0LCBcImZhY3RzXCIsIHRoaXMuZmFjdHMpO1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgbGV0IGZhY3RzID0gW107XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZhY3RzKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGZhY3Qgb2YgdGhpcy5mYWN0cykge1xyXG4gICAgICAgICAgICAgICAgZmFjdHMucHVzaChmYWN0LnRvSlNPTigpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcImZhY3RzXCIsIGZhY3RzKTtcclxuICAgICAgICAqL1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgRmFjdFNldC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbiwgZXJyb3JzKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wYXJzZS5jYWxsKHRoaXMsIGpzb24sIGVycm9ycyk7XHJcbiAgICAgICAgdGhpcy5mYWN0cyA9IFtdO1xyXG4gICAgICAgIHZhciBqc29uRmFjdHMgPSBqc29uW1wiZmFjdHNcIl07XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoanNvbkZhY3RzKSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGpzb25GYWN0c18xID0ganNvbkZhY3RzOyBfaSA8IGpzb25GYWN0c18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGpzb25GYWN0ID0ganNvbkZhY3RzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZhY3QgPSBuZXcgRmFjdCgpO1xyXG4gICAgICAgICAgICAgICAgZmFjdC5wYXJzZShqc29uRmFjdCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZhY3RzLnB1c2goZmFjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZhY3RTZXQ7XHJcbn0oQ2FyZEVsZW1lbnQpKTtcclxuZXhwb3J0cy5GYWN0U2V0ID0gRmFjdFNldDtcclxudmFyIEltYWdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEltYWdlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gSW1hZ2UoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuc3R5bGUgPSBFbnVtcy5JbWFnZVN0eWxlLkRlZmF1bHQ7XHJcbiAgICAgICAgX3RoaXMuc2l6ZSA9IEVudW1zLlNpemUuQXV0bztcclxuICAgICAgICBfdGhpcy5waXhlbFdpZHRoID0gbnVsbDtcclxuICAgICAgICBfdGhpcy5waXhlbEhlaWdodCA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMuYWx0VGV4dCA9IFwiXCI7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgSW1hZ2UucHJvdG90eXBlLnBhcnNlRGltZW5zaW9uID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlLCBlcnJvcnMpIHtcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IFNoYXJlZC5TaXplQW5kVW5pdC5wYXJzZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpemUudW5pdCA9PSBFbnVtcy5TaXplVW5pdC5QaXhlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZS5waHlzaWNhbFNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGVycm9yXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmFpc2VQYXJzZUVycm9yKHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBFbnVtcy5WYWxpZGF0aW9uRXJyb3IuSW52YWxpZFByb3BlcnR5VmFsdWUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgaW1hZ2UgXCIgKyBuYW1lICsgXCI6IFwiICsgdmFsdWVcclxuICAgICAgICAgICAgfSwgZXJyb3JzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9O1xyXG4gICAgSW1hZ2UucHJvdG90eXBlLmFwcGx5U2l6ZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMucGl4ZWxXaWR0aCB8fCB0aGlzLnBpeGVsSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBpeGVsV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSB0aGlzLnBpeGVsV2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMucGl4ZWxIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5waXhlbEhlaWdodCArIFwicHhcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnNpemUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuU2l6ZS5TdHJldGNoOlxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuU2l6ZS5BdXRvOlxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubWF4V2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuU2l6ZS5TbWFsbDpcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gdGhpcy5ob3N0Q29uZmlnLmltYWdlU2l6ZXMuc21hbGwgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLlNpemUuTGFyZ2U6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IHRoaXMuaG9zdENvbmZpZy5pbWFnZVNpemVzLmxhcmdlICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5TaXplLk1lZGl1bTpcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gdGhpcy5ob3N0Q29uZmlnLmltYWdlU2l6ZXMubWVkaXVtICsgXCJweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbWFnZS5wcm90b3R5cGUsIFwidXNlRGVmYXVsdFNpemluZ1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEltYWdlLnByb3RvdHlwZS5pbnRlcm5hbFJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gbnVsbDtcclxuICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy51cmwpKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJmbGV4LXN0YXJ0XCI7XHJcbiAgICAgICAgICAgIGVsZW1lbnQub25rZXlwcmVzcyA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuc2VsZWN0QWN0aW9uICYmIChlLmtleUNvZGUgPT0gMTMgfHwgZS5rZXlDb2RlID09IDMyKSkgeyAvLyBlbnRlciBvciBzcGFjZSBwcmVzc2VkXHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZWxlY3RBY3Rpb24uZXhlY3V0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBlbGVtZW50Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnNlbGVjdEFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2VsZWN0QWN0aW9uLmV4ZWN1dGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmhvcml6b250YWxBbGlnbm1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQuUmlnaHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiZmxleC1lbmRcIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiZmxleC1zdGFydFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIENhY2hlIGhvc3RDb25maWcgdG8gYXZvaWQgd2Fsa2luZyB0aGUgcGFyZW50IGhpZXJhcmNoeSBtdWx0aXBsZSB0aW1lc1xyXG4gICAgICAgICAgICB2YXIgaG9zdENvbmZpZyA9IHRoaXMuaG9zdENvbmZpZztcclxuICAgICAgICAgICAgdmFyIGltYWdlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgICAgIGltYWdlRWxlbWVudC5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgcmFpc2VJbWFnZUxvYWRlZEV2ZW50KF90aGlzKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhcmQgPSBfdGhpcy5nZXRSb290RWxlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucmVuZGVyZWRFbGVtZW50LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FyZCAmJiBjYXJkLmRlc2lnbk1vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvckVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yRWxlbWVudC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvckVsZW1lbnQuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImNlbnRlclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNFRUVFRUVcIjtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvckVsZW1lbnQuc3R5bGUuY29sb3IgPSBcImJsYWNrXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JFbGVtZW50LmlubmVyVGV4dCA9IFwiOi0oXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JFbGVtZW50LnN0eWxlLnBhZGRpbmcgPSBcIjEwcHhcIjtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5hcHBseVNpemUoZXJyb3JFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW5kZXJlZEVsZW1lbnQuYXBwZW5kQ2hpbGQoZXJyb3JFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJhaXNlSW1hZ2VMb2FkZWRFdmVudChfdGhpcyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGltYWdlRWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50LnN0eWxlLm1pbldpZHRoID0gXCIwXCI7XHJcbiAgICAgICAgICAgIGltYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWltYWdlXCIpKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0QWN0aW9uICE9IG51bGwgJiYgaG9zdENvbmZpZy5zdXBwb3J0c0ludGVyYWN0aXZpdHkpIHtcclxuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudC50YWJJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHRoaXMuc2VsZWN0QWN0aW9uLnRpdGxlKTtcclxuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLXNlbGVjdGFibGVcIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlTaXplKGltYWdlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0eWxlID09PSBFbnVtcy5JbWFnZVN0eWxlLlBlcnNvbikge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50LnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNTAlXCI7XHJcbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gXCI1MCUgNTAlXCI7XHJcbiAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFJlcGVhdCA9IFwibm8tcmVwZWF0XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFVdGlscy5pc051bGxPckVtcHR5KHRoaXMuYmFja2dyb3VuZENvbG9yKSkge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFV0aWxzLnN0cmluZ1RvQ3NzQ29sb3IodGhpcy5iYWNrZ3JvdW5kQ29sb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGltYWdlRWxlbWVudC5zcmMgPSB0aGlzLnVybDtcclxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuYWx0VGV4dDtcclxuICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChpbWFnZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH07XHJcbiAgICBJbWFnZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBfc3VwZXIucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO1xyXG4gICAgICAgIGlmICh0aGlzLl9zZWxlY3RBY3Rpb24pIHtcclxuICAgICAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcInNlbGVjdEFjdGlvblwiLCB0aGlzLl9zZWxlY3RBY3Rpb24udG9KU09OKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBVdGlscy5zZXRFbnVtUHJvcGVydHkoRW51bXMuSW1hZ2VTdHlsZSwgcmVzdWx0LCBcInN0eWxlXCIsIHRoaXMuc3R5bGUsIEVudW1zLkltYWdlU3R5bGUuRGVmYXVsdCk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcImJhY2tncm91bmRDb2xvclwiLCB0aGlzLmJhY2tncm91bmRDb2xvcik7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcInVybFwiLCB0aGlzLnVybCk7XHJcbiAgICAgICAgVXRpbHMuc2V0RW51bVByb3BlcnR5KEVudW1zLlNpemUsIHJlc3VsdCwgXCJzaXplXCIsIHRoaXMuc2l6ZSwgRW51bXMuU2l6ZS5BdXRvKTtcclxuICAgICAgICBpZiAodGhpcy5waXhlbFdpZHRoKSB7XHJcbiAgICAgICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJ3aWR0aFwiLCB0aGlzLnBpeGVsV2lkdGggKyBcInB4XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5waXhlbEhlaWdodCkge1xyXG4gICAgICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwiaGVpZ2h0XCIsIHRoaXMucGl4ZWxIZWlnaHQgKyBcInB4XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwiYWx0VGV4dFwiLCB0aGlzLmFsdFRleHQpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgSW1hZ2UucHJvdG90eXBlLmdldEpzb25UeXBlTmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gXCJJbWFnZVwiO1xyXG4gICAgfTtcclxuICAgIEltYWdlLnByb3RvdHlwZS5nZXRBY3Rpb25CeUlkID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUuZ2V0QWN0aW9uQnlJZC5jYWxsKHRoaXMsIGlkKTtcclxuICAgICAgICBpZiAoIXJlc3VsdCAmJiB0aGlzLnNlbGVjdEFjdGlvbikge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnNlbGVjdEFjdGlvbi5nZXRBY3Rpb25CeUlkKGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBJbWFnZS5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbiwgZXJyb3JzKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wYXJzZS5jYWxsKHRoaXMsIGpzb24sIGVycm9ycyk7XHJcbiAgICAgICAgdGhpcy51cmwgPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1widXJsXCJdKTtcclxuICAgICAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9IFV0aWxzLmdldFN0cmluZ1ZhbHVlKGpzb25bXCJiYWNrZ3JvdW5kQ29sb3JcIl0pO1xyXG4gICAgICAgIHZhciBzdHlsZVN0cmluZyA9IFV0aWxzLmdldFN0cmluZ1ZhbHVlKGpzb25bXCJzdHlsZVwiXSk7XHJcbiAgICAgICAgaWYgKHN0eWxlU3RyaW5nICYmIHN0eWxlU3RyaW5nLnRvTG93ZXJDYXNlKCkgPT09IFwibm9ybWFsXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5zdHlsZSA9IEVudW1zLkltYWdlU3R5bGUuRGVmYXVsdDtcclxuICAgICAgICAgICAgcmFpc2VQYXJzZUVycm9yKHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBFbnVtcy5WYWxpZGF0aW9uRXJyb3IuRGVwcmVjYXRlZCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGhlIEltYWdlLnN0eWxlIHZhbHVlIFxcXCJub3JtYWxcXFwiIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZC4gVXNlIFxcXCJkZWZhdWx0XFxcIiBpbnN0ZWFkLlwiXHJcbiAgICAgICAgICAgIH0sIGVycm9ycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnN0eWxlID0gVXRpbHMuZ2V0RW51bVZhbHVlKEVudW1zLkltYWdlU3R5bGUsIHN0eWxlU3RyaW5nLCB0aGlzLnN0eWxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaXplID0gVXRpbHMuZ2V0RW51bVZhbHVlKEVudW1zLlNpemUsIGpzb25bXCJzaXplXCJdLCB0aGlzLnNpemUpO1xyXG4gICAgICAgIHRoaXMuYWx0VGV4dCA9IFV0aWxzLmdldFN0cmluZ1ZhbHVlKGpzb25bXCJhbHRUZXh0XCJdKTtcclxuICAgICAgICAvLyBwaXhlbFdpZHRoIGFuZCBwaXhlbEhlaWdodCBhcmUgb25seSBwYXJzZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxyXG4gICAgICAgIC8vIFBheWxvYWRzIHNob3VsZCB1c2UgdGhlIHdpZHRoIGFuZCBoZWlnaHQgcHJvZXJ0aWVzIGluc3RlYWQuXHJcbiAgICAgICAgaWYgKGpzb25bXCJwaXhlbFdpZHRoXCJdICYmIHR5cGVvZiBqc29uW1wicGl4ZWxXaWR0aFwiXSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgICB0aGlzLnBpeGVsV2lkdGggPSBqc29uW1wicGl4ZWxXaWR0aFwiXTtcclxuICAgICAgICAgICAgcmFpc2VQYXJzZUVycm9yKHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBFbnVtcy5WYWxpZGF0aW9uRXJyb3IuRGVwcmVjYXRlZCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGhlIHBpeGVsV2lkdGggcHJvcGVydHkgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkLiBVc2UgdGhlIHdpZHRoIHByb3BlcnR5IGluc3RlYWQuXCJcclxuICAgICAgICAgICAgfSwgZXJyb3JzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGpzb25bXCJwaXhlbEhlaWdodFwiXSAmJiB0eXBlb2YganNvbltcInBpeGVsSGVpZ2h0XCJdID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGl4ZWxIZWlnaHQgPSBqc29uW1wicGl4ZWxIZWlnaHRcIl07XHJcbiAgICAgICAgICAgIHJhaXNlUGFyc2VFcnJvcih7XHJcbiAgICAgICAgICAgICAgICBlcnJvcjogRW51bXMuVmFsaWRhdGlvbkVycm9yLkRlcHJlY2F0ZWQsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlRoZSBwaXhlbEhlaWdodCBwcm9wZXJ0eSBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQuIFVzZSB0aGUgaGVpZ2h0IHByb3BlcnR5IGluc3RlYWQuXCJcclxuICAgICAgICAgICAgfSwgZXJyb3JzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLnBhcnNlRGltZW5zaW9uKFwid2lkdGhcIiwganNvbltcIndpZHRoXCJdLCBlcnJvcnMpO1xyXG4gICAgICAgIGlmIChzaXplID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnBpeGVsV2lkdGggPSBzaXplO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzaXplID0gdGhpcy5wYXJzZURpbWVuc2lvbihcImhlaWdodFwiLCBqc29uW1wiaGVpZ2h0XCJdLCBlcnJvcnMpO1xyXG4gICAgICAgIGlmIChzaXplID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnBpeGVsSGVpZ2h0ID0gc2l6ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZWxlY3RBY3Rpb24gPSBjcmVhdGVBY3Rpb25JbnN0YW5jZSh0aGlzLCBqc29uW1wic2VsZWN0QWN0aW9uXCJdLCBbU2hvd0NhcmRBY3Rpb24uSnNvblR5cGVOYW1lXSwgIXRoaXMuaXNEZXNpZ25Nb2RlKCksIGVycm9ycyk7XHJcbiAgICB9O1xyXG4gICAgSW1hZ2UucHJvdG90eXBlLmdldFJlc291cmNlSW5mb3JtYXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCFVdGlscy5pc051bGxPckVtcHR5KHRoaXMudXJsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gW3sgdXJsOiB0aGlzLnVybCwgbWltZVR5cGU6IFwiaW1hZ2VcIiB9XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEltYWdlLnByb3RvdHlwZSwgXCJzZWxlY3RBY3Rpb25cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0QWN0aW9uO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2VsZWN0QWN0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zZWxlY3RBY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdEFjdGlvbi5zZXRQYXJlbnQodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBJbWFnZTtcclxufShDYXJkRWxlbWVudCkpO1xyXG5leHBvcnRzLkltYWdlID0gSW1hZ2U7XHJcbnZhciBDYXJkRWxlbWVudENvbnRhaW5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhDYXJkRWxlbWVudENvbnRhaW5lciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIENhcmRFbGVtZW50Q29udGFpbmVyKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLl9zZWxlY3RBY3Rpb24gPSBudWxsO1xyXG4gICAgICAgIF90aGlzLmFsbG93VmVydGljYWxPdmVyZmxvdyA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIENhcmRFbGVtZW50Q29udGFpbmVyLnByb3RvdHlwZS5pc0VsZW1lbnRBbGxvd2VkID0gZnVuY3Rpb24gKGVsZW1lbnQsIGZvcmJpZGRlbkVsZW1lbnRUeXBlcykge1xyXG4gICAgICAgIGlmICghdGhpcy5ob3N0Q29uZmlnLnN1cHBvcnRzSW50ZXJhY3Rpdml0eSAmJiBlbGVtZW50LmlzSW50ZXJhY3RpdmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZm9yYmlkZGVuRWxlbWVudFR5cGVzKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZm9yYmlkZGVuRWxlbWVudFR5cGVzXzEgPSBmb3JiaWRkZW5FbGVtZW50VHlwZXM7IF9pIDwgZm9yYmlkZGVuRWxlbWVudFR5cGVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZm9yYmlkZGVuRWxlbWVudFR5cGUgPSBmb3JiaWRkZW5FbGVtZW50VHlwZXNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5nZXRKc29uVHlwZU5hbWUoKSA9PT0gZm9yYmlkZGVuRWxlbWVudFR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnRDb250YWluZXIucHJvdG90eXBlLmFwcGx5UGFkZGluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmFwcGx5UGFkZGluZy5jYWxsKHRoaXMpO1xyXG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJlZEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcGh5c2ljYWxQYWRkaW5nID0gbmV3IFNoYXJlZC5TcGFjaW5nRGVmaW5pdGlvbigpO1xyXG4gICAgICAgIGlmICh0aGlzLmdldEVmZmVjdGl2ZVBhZGRpbmcoKSkge1xyXG4gICAgICAgICAgICBwaHlzaWNhbFBhZGRpbmcgPSB0aGlzLmhvc3RDb25maWcucGFkZGluZ0RlZmluaXRpb25Ub1NwYWNpbmdEZWZpbml0aW9uKHRoaXMuZ2V0RWZmZWN0aXZlUGFkZGluZygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuc3R5bGUucGFkZGluZ1RvcCA9IHBoeXNpY2FsUGFkZGluZy50b3AgKyBcInB4XCI7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGh5c2ljYWxQYWRkaW5nLnJpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLnBhZGRpbmdCb3R0b20gPSBwaHlzaWNhbFBhZGRpbmcuYm90dG9tICsgXCJweFwiO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0ID0gcGh5c2ljYWxQYWRkaW5nLmxlZnQgKyBcInB4XCI7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuc3R5bGUubWFyZ2luUmlnaHQgPSBcIjBcIjtcclxuICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCIwXCI7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnRDb250YWluZXIucHJvdG90eXBlLmdldFNlbGVjdEFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0QWN0aW9uO1xyXG4gICAgfTtcclxuICAgIENhcmRFbGVtZW50Q29udGFpbmVyLnByb3RvdHlwZS5zZXRTZWxlY3RBY3Rpb24gPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9zZWxlY3RBY3Rpb24gPSB2YWx1ZTtcclxuICAgICAgICBpZiAodGhpcy5fc2VsZWN0QWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdEFjdGlvbi5zZXRQYXJlbnQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYXJkRWxlbWVudENvbnRhaW5lci5wcm90b3R5cGUsIFwiaXNTZWxlY3RhYmxlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQ2FyZEVsZW1lbnRDb250YWluZXIucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGpzb24sIGVycm9ycykge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucGFyc2UuY2FsbCh0aGlzLCBqc29uLCBlcnJvcnMpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzU2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWxlY3RBY3Rpb24gPSBjcmVhdGVBY3Rpb25JbnN0YW5jZSh0aGlzLCBqc29uW1wic2VsZWN0QWN0aW9uXCJdLCBbU2hvd0NhcmRBY3Rpb24uSnNvblR5cGVOYW1lXSwgIXRoaXMuaXNEZXNpZ25Nb2RlKCksIGVycm9ycyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENhcmRFbGVtZW50Q29udGFpbmVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XHJcbiAgICAgICAgaWYgKHRoaXMuX3NlbGVjdEFjdGlvbiAmJiB0aGlzLmlzU2VsZWN0YWJsZSkge1xyXG4gICAgICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwic2VsZWN0QWN0aW9uXCIsIHRoaXMuX3NlbGVjdEFjdGlvbi50b0pTT04oKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnRDb250YWluZXIucHJvdG90eXBlLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzLmNhbGwodGhpcywgY29udGV4dCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmdldEl0ZW1Db3VudCgpOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLmdldEl0ZW1BdChpKTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmhvc3RDb25maWcuc3VwcG9ydHNJbnRlcmFjdGl2aXR5ICYmIGl0ZW0uaXNJbnRlcmFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKHRoaXMsIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogRW51bXMuVmFsaWRhdGlvbkVycm9yLkludGVyYWN0aXZpdHlOb3RBbGxvd2VkLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW50ZXJhY3Rpdml0eSBpcyBub3QgYWxsb3dlZC5cIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRWxlbWVudEFsbG93ZWQoaXRlbSwgdGhpcy5nZXRGb3JiaWRkZW5FbGVtZW50VHlwZXMoKSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQuYWRkRmFpbHVyZSh0aGlzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IEVudW1zLlZhbGlkYXRpb25FcnJvci5JbnRlcmFjdGl2aXR5Tm90QWxsb3dlZCxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkVsZW1lbnRzIG9mIHR5cGUgXCIgKyBpdGVtLmdldEpzb25UeXBlTmFtZSgpICsgXCIgYXJlIG5vdCBhbGxvd2VkIGluIHRoaXMgY29udGFpbmVyLlwiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpdGVtLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fc2VsZWN0QWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdEFjdGlvbi5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnRDb250YWluZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gX3N1cGVyLnByb3RvdHlwZS5yZW5kZXIuY2FsbCh0aGlzKTtcclxuICAgICAgICB2YXIgaG9zdENvbmZpZyA9IHRoaXMuaG9zdENvbmZpZztcclxuICAgICAgICBpZiAodGhpcy5hbGxvd1ZlcnRpY2FsT3ZlcmZsb3cpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5vdmVyZmxvd1ggPSBcImhpZGRlblwiO1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLm92ZXJmbG93WSA9IFwiYXV0b1wiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZWxlbWVudCAmJiB0aGlzLmlzU2VsZWN0YWJsZSAmJiB0aGlzLl9zZWxlY3RBY3Rpb24gJiYgaG9zdENvbmZpZy5zdXBwb3J0c0ludGVyYWN0aXZpdHkpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLXNlbGVjdGFibGVcIikpO1xyXG4gICAgICAgICAgICBlbGVtZW50LnRhYkluZGV4ID0gMDtcclxuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgdGhpcy5fc2VsZWN0QWN0aW9uLnRpdGxlKTtcclxuICAgICAgICAgICAgZWxlbWVudC5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5fc2VsZWN0QWN0aW9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9zZWxlY3RBY3Rpb24uZXhlY3V0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBlbGVtZW50Lm9ua2V5cHJlc3MgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLl9zZWxlY3RBY3Rpb24gIT0gbnVsbCAmJiAoZS5rZXlDb2RlID09IDEzIHx8IGUua2V5Q29kZSA9PSAzMikpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBFbnRlciBvciBzcGFjZSBwcmVzc2VkXHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fc2VsZWN0QWN0aW9uLmV4ZWN1dGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9O1xyXG4gICAgQ2FyZEVsZW1lbnRDb250YWluZXIucHJvdG90eXBlLnVwZGF0ZUxheW91dCA9IGZ1bmN0aW9uIChwcm9jZXNzQ2hpbGRyZW4pIHtcclxuICAgICAgICBpZiAocHJvY2Vzc0NoaWxkcmVuID09PSB2b2lkIDApIHsgcHJvY2Vzc0NoaWxkcmVuID0gdHJ1ZTsgfVxyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUudXBkYXRlTGF5b3V0LmNhbGwodGhpcywgcHJvY2Vzc0NoaWxkcmVuKTtcclxuICAgICAgICBpZiAocHJvY2Vzc0NoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5nZXRJdGVtQ291bnQoKTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldEl0ZW1BdChpKS51cGRhdGVMYXlvdXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudENvbnRhaW5lci5wcm90b3R5cGUuZ2V0QWxsSW5wdXRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZ2V0SXRlbUNvdW50KCk7IGkrKykge1xyXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KHRoaXMuZ2V0SXRlbUF0KGkpLmdldEFsbElucHV0cygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBDYXJkRWxlbWVudENvbnRhaW5lci5wcm90b3R5cGUuZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmdldEl0ZW1Db3VudCgpOyBpKyspIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdCh0aGlzLmdldEl0ZW1BdChpKS5nZXRSZXNvdXJjZUluZm9ybWF0aW9uKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIENhcmRFbGVtZW50Q29udGFpbmVyLnByb3RvdHlwZS5nZXRFbGVtZW50QnlJZCA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBfc3VwZXIucHJvdG90eXBlLmdldEVsZW1lbnRCeUlkLmNhbGwodGhpcywgaWQpO1xyXG4gICAgICAgIGlmICghcmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5nZXRJdGVtQ291bnQoKTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLmdldEl0ZW1BdChpKS5nZXRFbGVtZW50QnlJZChpZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ2FyZEVsZW1lbnRDb250YWluZXI7XHJcbn0oQ2FyZEVsZW1lbnQpKTtcclxuZXhwb3J0cy5DYXJkRWxlbWVudENvbnRhaW5lciA9IENhcmRFbGVtZW50Q29udGFpbmVyO1xyXG52YXIgSW1hZ2VTZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoSW1hZ2VTZXQsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBJbWFnZVNldCgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5faW1hZ2VzID0gW107XHJcbiAgICAgICAgX3RoaXMuaW1hZ2VTaXplID0gRW51bXMuU2l6ZS5NZWRpdW07XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgSW1hZ2VTZXQucHJvdG90eXBlLmludGVybmFsUmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5faW1hZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmZsZXhXcmFwID0gXCJ3cmFwXCI7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5faW1hZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pbWFnZXNbaV0uc2l6ZSA9IHRoaXMuaW1hZ2VTaXplO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlbmRlcmVkSW1hZ2UgPSB0aGlzLl9pbWFnZXNbaV0ucmVuZGVyKCk7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJlZEltYWdlLnN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1mbGV4XCI7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJlZEltYWdlLnN0eWxlLm1hcmdpbiA9IFwiMHB4XCI7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJlZEltYWdlLnN0eWxlLm1hcmdpblJpZ2h0ID0gXCIxMHB4XCI7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJlZEltYWdlLnN0eWxlLm1heEhlaWdodCA9IHRoaXMuaG9zdENvbmZpZy5pbWFnZVNldC5tYXhJbWFnZUhlaWdodCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKGVsZW1lbnQsIHJlbmRlcmVkSW1hZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfTtcclxuICAgIEltYWdlU2V0LnByb3RvdHlwZS5nZXRJdGVtQ291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ltYWdlcy5sZW5ndGg7XHJcbiAgICB9O1xyXG4gICAgSW1hZ2VTZXQucHJvdG90eXBlLmdldEl0ZW1BdCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbWFnZXNbaW5kZXhdO1xyXG4gICAgfTtcclxuICAgIEltYWdlU2V0LnByb3RvdHlwZS5nZXRGaXJzdFZpc2libGVSZW5kZXJlZEl0ZW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ltYWdlcyAmJiB0aGlzLl9pbWFnZXMubGVuZ3RoID4gMCA/IHRoaXMuX2ltYWdlc1swXSA6IG51bGw7XHJcbiAgICB9O1xyXG4gICAgSW1hZ2VTZXQucHJvdG90eXBlLmdldExhc3RWaXNpYmxlUmVuZGVyZWRJdGVtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbWFnZXMgJiYgdGhpcy5faW1hZ2VzLmxlbmd0aCA+IDAgPyB0aGlzLl9pbWFnZXNbdGhpcy5faW1hZ2VzLmxlbmd0aCAtIDFdIDogbnVsbDtcclxuICAgIH07XHJcbiAgICBJbWFnZVNldC5wcm90b3R5cGUucmVtb3ZlSXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBJbWFnZSkge1xyXG4gICAgICAgICAgICB2YXIgaXRlbUluZGV4ID0gdGhpcy5faW1hZ2VzLmluZGV4T2YoaXRlbSk7XHJcbiAgICAgICAgICAgIGlmIChpdGVtSW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW1hZ2VzLnNwbGljZShpdGVtSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5zZXRQYXJlbnQobnVsbCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIEltYWdlU2V0LnByb3RvdHlwZS5nZXRKc29uVHlwZU5hbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiSW1hZ2VTZXRcIjtcclxuICAgIH07XHJcbiAgICBJbWFnZVNldC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBfc3VwZXIucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO1xyXG4gICAgICAgIFV0aWxzLnNldEVudW1Qcm9wZXJ0eShFbnVtcy5TaXplLCByZXN1bHQsIFwiaW1hZ2VTaXplXCIsIHRoaXMuaW1hZ2VTaXplLCBFbnVtcy5TaXplLk1lZGl1bSk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2ltYWdlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBpbWFnZXMgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuX2ltYWdlczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbWFnZSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGltYWdlcy5wdXNoKGltYWdlLnRvSlNPTigpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwiaW1hZ2VzXCIsIGltYWdlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgSW1hZ2VTZXQucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGpzb24sIGVycm9ycykge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucGFyc2UuY2FsbCh0aGlzLCBqc29uLCBlcnJvcnMpO1xyXG4gICAgICAgIHRoaXMuaW1hZ2VTaXplID0gVXRpbHMuZ2V0RW51bVZhbHVlKEVudW1zLlNpemUsIGpzb25bXCJpbWFnZVNpemVcIl0sIEVudW1zLlNpemUuTWVkaXVtKTtcclxuICAgICAgICBpZiAoanNvbltcImltYWdlc1wiXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHZhciBqc29uSW1hZ2VzID0ganNvbltcImltYWdlc1wiXTtcclxuICAgICAgICAgICAgdGhpcy5faW1hZ2VzID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwganNvbkltYWdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICBpbWFnZS5wYXJzZShqc29uSW1hZ2VzW2ldLCBlcnJvcnMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRJbWFnZShpbWFnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW1hZ2VTZXQucHJvdG90eXBlLmFkZEltYWdlID0gZnVuY3Rpb24gKGltYWdlKSB7XHJcbiAgICAgICAgaWYgKCFpbWFnZS5wYXJlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5faW1hZ2VzLnB1c2goaW1hZ2UpO1xyXG4gICAgICAgICAgICBpbWFnZS5zZXRQYXJlbnQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIGltYWdlIGFscmVhZHkgYmVsb25ncyB0byBhbm90aGVyIEltYWdlU2V0XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbWFnZVNldC5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIChjYXJkRWxlbWVudCkge1xyXG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudCBpbnN0YW5jZW9mIEltYWdlID8gdGhpcy5faW1hZ2VzLmluZGV4T2YoY2FyZEVsZW1lbnQpIDogLTE7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEltYWdlU2V0O1xyXG59KENhcmRFbGVtZW50Q29udGFpbmVyKSk7XHJcbmV4cG9ydHMuSW1hZ2VTZXQgPSBJbWFnZVNldDtcclxudmFyIE1lZGlhU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKE1lZGlhU291cmNlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTWVkaWFTb3VyY2UodXJsLCBtaW1lVHlwZSkge1xyXG4gICAgICAgIGlmICh1cmwgPT09IHZvaWQgMCkgeyB1cmwgPSB1bmRlZmluZWQ7IH1cclxuICAgICAgICBpZiAobWltZVR5cGUgPT09IHZvaWQgMCkgeyBtaW1lVHlwZSA9IHVuZGVmaW5lZDsgfVxyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMudXJsID0gdXJsO1xyXG4gICAgICAgIF90aGlzLm1pbWVUeXBlID0gbWltZVR5cGU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgTWVkaWFTb3VyY2UucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGpzb24sIGVycm9ycykge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucGFyc2UuY2FsbCh0aGlzLCBqc29uLCBlcnJvcnMpO1xyXG4gICAgICAgIHRoaXMubWltZVR5cGUgPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1wibWltZVR5cGVcIl0pO1xyXG4gICAgICAgIHRoaXMudXJsID0gVXRpbHMuZ2V0U3RyaW5nVmFsdWUoanNvbltcInVybFwiXSk7XHJcbiAgICB9O1xyXG4gICAgTWVkaWFTb3VyY2UucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gX3N1cGVyLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtcclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwibWltZVR5cGVcIiwgdGhpcy5taW1lVHlwZSk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcInVybFwiLCB0aGlzLnVybCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTWVkaWFTb3VyY2U7XHJcbn0oU2VyaWFsaXphYmxlT2JqZWN0KSk7XHJcbmV4cG9ydHMuTWVkaWFTb3VyY2UgPSBNZWRpYVNvdXJjZTtcclxudmFyIE1lZGlhID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKE1lZGlhLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTWVkaWEoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuc291cmNlcyA9IFtdO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIE1lZGlhLnByb3RvdHlwZS5nZXRQb3N0ZXJVcmwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdGVyID8gdGhpcy5wb3N0ZXIgOiB0aGlzLmhvc3RDb25maWcubWVkaWEuZGVmYXVsdFBvc3RlcjtcclxuICAgIH07XHJcbiAgICBNZWRpYS5wcm90b3R5cGUucHJvY2Vzc1NvdXJjZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWRTb3VyY2VzID0gW107XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWRNZWRpYVR5cGUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuc291cmNlczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IF9hW19pXTtcclxuICAgICAgICAgICAgdmFyIG1pbWVDb21wb25lbnRzID0gc291cmNlLm1pbWVUeXBlID8gc291cmNlLm1pbWVUeXBlLnNwbGl0KCcvJykgOiBbXTtcclxuICAgICAgICAgICAgaWYgKG1pbWVDb21wb25lbnRzLmxlbmd0aCA9PSAyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3NlbGVjdGVkTWVkaWFUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gTWVkaWEuc3VwcG9ydGVkTWVkaWFUeXBlcy5pbmRleE9mKG1pbWVDb21wb25lbnRzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RlZE1lZGlhVHlwZSA9IE1lZGlhLnN1cHBvcnRlZE1lZGlhVHlwZXNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtaW1lQ29tcG9uZW50c1swXSA9PSB0aGlzLl9zZWxlY3RlZE1lZGlhVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkU291cmNlcy5wdXNoKHNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTWVkaWEucHJvdG90eXBlLnJlbmRlclBvc3RlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBwbGF5QnV0dG9uQXJyb3dXaWR0aCA9IDEyO1xyXG4gICAgICAgIHZhciBwbGF5QnV0dG9uQXJyb3dIZWlnaHQgPSAxNTtcclxuICAgICAgICB2YXIgcG9zdGVyUm9vdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHBvc3RlclJvb3RFbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtbWVkaWEtcG9zdGVyXCIpO1xyXG4gICAgICAgIHBvc3RlclJvb3RFbGVtZW50LnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJjb250ZW50aW5mb1wiKTtcclxuICAgICAgICBwb3N0ZXJSb290RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHRoaXMuYWx0VGV4dCA/IHRoaXMuYWx0VGV4dCA6IFwiTWVkaWEgY29udGVudFwiKTtcclxuICAgICAgICBwb3N0ZXJSb290RWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcclxuICAgICAgICBwb3N0ZXJSb290RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgdmFyIHBvc3RlclVybCA9IHRoaXMuZ2V0UG9zdGVyVXJsKCk7XHJcbiAgICAgICAgaWYgKHBvc3RlclVybCkge1xyXG4gICAgICAgICAgICB2YXIgcG9zdGVySW1hZ2VFbGVtZW50XzEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgICAgICBwb3N0ZXJJbWFnZUVsZW1lbnRfMS5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICBwb3N0ZXJJbWFnZUVsZW1lbnRfMS5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgcG9zdGVySW1hZ2VFbGVtZW50XzEub25lcnJvciA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0ZXJJbWFnZUVsZW1lbnRfMS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHBvc3RlckltYWdlRWxlbWVudF8xKTtcclxuICAgICAgICAgICAgICAgIHBvc3RlclJvb3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJlbXB0eVwiKTtcclxuICAgICAgICAgICAgICAgIHBvc3RlclJvb3RFbGVtZW50LnN0eWxlLm1pbkhlaWdodCA9IFwiMTUwcHhcIjtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcG9zdGVySW1hZ2VFbGVtZW50XzEuc3JjID0gcG9zdGVyVXJsO1xyXG4gICAgICAgICAgICBwb3N0ZXJSb290RWxlbWVudC5hcHBlbmRDaGlsZChwb3N0ZXJJbWFnZUVsZW1lbnRfMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwb3N0ZXJSb290RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZW1wdHlcIik7XHJcbiAgICAgICAgICAgIHBvc3RlclJvb3RFbGVtZW50LnN0eWxlLm1pbkhlaWdodCA9IFwiMTUwcHhcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaG9zdENvbmZpZy5zdXBwb3J0c0ludGVyYWN0aXZpdHkgJiYgdGhpcy5fc2VsZWN0ZWRTb3VyY2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIHBsYXlCdXR0b25PdXRlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBwbGF5QnV0dG9uT3V0ZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25PdXRlckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBcIlBsYXkgbWVkaWFcIik7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25PdXRlckVsZW1lbnQuY2xhc3NOYW1lID0gdGhpcy5ob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1tZWRpYS1wbGF5QnV0dG9uXCIpO1xyXG4gICAgICAgICAgICBwbGF5QnV0dG9uT3V0ZXJFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICAgICAgcGxheUJ1dHRvbk91dGVyRWxlbWVudC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgcGxheUJ1dHRvbk91dGVyRWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25PdXRlckVsZW1lbnQub25jbGljayA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaG9zdENvbmZpZy5tZWRpYS5hbGxvd0lubGluZVBsYXliYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWVkaWFQbGF5ZXJFbGVtZW50ID0gX3RoaXMucmVuZGVyTWVkaWFQbGF5ZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW5kZXJlZEVsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW5kZXJlZEVsZW1lbnQuYXBwZW5kQ2hpbGQobWVkaWFQbGF5ZXJFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBtZWRpYVBsYXllckVsZW1lbnQucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1lZGlhLm9uUGxheSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWVkaWEub25QbGF5KF90aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBwbGF5QnV0dG9uSW5uZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgcGxheUJ1dHRvbklubmVyRWxlbWVudC5jbGFzc05hbWUgPSB0aGlzLmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLW1lZGlhLXBsYXlCdXR0b24tYXJyb3dcIik7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuc3R5bGUud2lkdGggPSBwbGF5QnV0dG9uQXJyb3dXaWR0aCArIFwicHhcIjtcclxuICAgICAgICAgICAgcGxheUJ1dHRvbklubmVyRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBwbGF5QnV0dG9uQXJyb3dIZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuc3R5bGUuYm9yZGVyVG9wV2lkdGggPSAocGxheUJ1dHRvbkFycm93SGVpZ2h0IC8gMikgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuc3R5bGUuYm9yZGVyQm90dG9tV2lkdGggPSAocGxheUJ1dHRvbkFycm93SGVpZ2h0IC8gMikgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuc3R5bGUuYm9yZGVyTGVmdFdpZHRoID0gcGxheUJ1dHRvbkFycm93V2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuc3R5bGUuYm9yZGVyUmlnaHRXaWR0aCA9IFwiMFwiO1xyXG4gICAgICAgICAgICBwbGF5QnV0dG9uSW5uZXJFbGVtZW50LnN0eWxlLmJvcmRlclN0eWxlID0gXCJzb2xpZFwiO1xyXG4gICAgICAgICAgICBwbGF5QnV0dG9uSW5uZXJFbGVtZW50LnN0eWxlLmJvcmRlclRvcENvbG9yID0gXCJ0cmFuc3BhcmVudFwiO1xyXG4gICAgICAgICAgICBwbGF5QnV0dG9uSW5uZXJFbGVtZW50LnN0eWxlLmJvcmRlclJpZ2h0Q29sb3IgPSBcInRyYW5zcGFyZW50XCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuc3R5bGUuYm9yZGVyQm90dG9tQ29sb3IgPSBcInRyYW5zcGFyZW50XCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Jbm5lckVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoXCIgKyAocGxheUJ1dHRvbkFycm93V2lkdGggLyAxMCkgKyBcInB4LDBweClcIjtcclxuICAgICAgICAgICAgcGxheUJ1dHRvbk91dGVyRWxlbWVudC5hcHBlbmRDaGlsZChwbGF5QnV0dG9uSW5uZXJFbGVtZW50KTtcclxuICAgICAgICAgICAgdmFyIHBsYXlCdXR0b25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBwbGF5QnV0dG9uQ29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgICAgICAgICBwbGF5QnV0dG9uQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBcIjBcIjtcclxuICAgICAgICAgICAgcGxheUJ1dHRvbkNvbnRhaW5lci5zdHlsZS50b3AgPSBcIjBcIjtcclxuICAgICAgICAgICAgcGxheUJ1dHRvbkNvbnRhaW5lci5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICBwbGF5QnV0dG9uQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICBwbGF5QnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICAgICAgcGxheUJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Db250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgIHBsYXlCdXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQocGxheUJ1dHRvbk91dGVyRWxlbWVudCk7XHJcbiAgICAgICAgICAgIHBvc3RlclJvb3RFbGVtZW50LmFwcGVuZENoaWxkKHBsYXlCdXR0b25Db250YWluZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcG9zdGVyUm9vdEVsZW1lbnQ7XHJcbiAgICB9O1xyXG4gICAgTWVkaWEucHJvdG90eXBlLnJlbmRlck1lZGlhUGxheWVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBtZWRpYUVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKHRoaXMuX3NlbGVjdGVkTWVkaWFUeXBlID09IFwidmlkZW9cIikge1xyXG4gICAgICAgICAgICB2YXIgdmlkZW9QbGF5ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidmlkZW9cIik7XHJcbiAgICAgICAgICAgIHZhciBwb3N0ZXJVcmwgPSB0aGlzLmdldFBvc3RlclVybCgpO1xyXG4gICAgICAgICAgICBpZiAocG9zdGVyVXJsKSB7XHJcbiAgICAgICAgICAgICAgICB2aWRlb1BsYXllci5wb3N0ZXIgPSBwb3N0ZXJVcmw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWVkaWFFbGVtZW50ID0gdmlkZW9QbGF5ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBtZWRpYUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lZGlhRWxlbWVudC5jb250cm9scyA9IHRydWU7XHJcbiAgICAgICAgbWVkaWFFbGVtZW50LnByZWxvYWQgPSBcIm5vbmVcIjtcclxuICAgICAgICBtZWRpYUVsZW1lbnQuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5zb3VyY2VzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgc291cmNlID0gX2FbX2ldO1xyXG4gICAgICAgICAgICB2YXIgc3JjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNvdXJjZVwiKTtcclxuICAgICAgICAgICAgc3JjLnNyYyA9IHNvdXJjZS51cmw7XHJcbiAgICAgICAgICAgIHNyYy50eXBlID0gc291cmNlLm1pbWVUeXBlO1xyXG4gICAgICAgICAgICBtZWRpYUVsZW1lbnQuYXBwZW5kQ2hpbGQoc3JjKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1lZGlhRWxlbWVudDtcclxuICAgIH07XHJcbiAgICBNZWRpYS5wcm90b3R5cGUuaW50ZXJuYWxSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gdGhpcy5ob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1tZWRpYVwiKTtcclxuICAgICAgICB0aGlzLnByb2Nlc3NTb3VyY2VzKCk7XHJcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlclBvc3RlcigpKTtcclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH07XHJcbiAgICBNZWRpYS5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbiwgZXJyb3JzKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wYXJzZS5jYWxsKHRoaXMsIGpzb24sIGVycm9ycyk7XHJcbiAgICAgICAgdGhpcy5wb3N0ZXIgPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1wicG9zdGVyXCJdKTtcclxuICAgICAgICB0aGlzLmFsdFRleHQgPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1wiYWx0VGV4dFwiXSk7XHJcbiAgICAgICAgdGhpcy5zb3VyY2VzID0gW107XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoanNvbltcInNvdXJjZXNcIl0pKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBqc29uW1wic291cmNlc1wiXTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBqc29uU291cmNlID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IG5ldyBNZWRpYVNvdXJjZSgpO1xyXG4gICAgICAgICAgICAgICAgc291cmNlLnBhcnNlKGpzb25Tb3VyY2UsIGVycm9ycyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZXMucHVzaChzb3VyY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE1lZGlhLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcInBvc3RlclwiLCB0aGlzLnBvc3Rlcik7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcImFsdFRleHRcIiwgdGhpcy5hbHRUZXh0KTtcclxuICAgICAgICAvKlxyXG4gICAgICAgIGlmICh0aGlzLnNvdXJjZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBsZXQgc2VyaWFsaXplZFNvdXJjZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHNvdXJjZSBvZiB0aGlzLnNvdXJjZXMpIHtcclxuICAgICAgICAgICAgICAgIHNlcmlhbGl6ZWRTb3VyY2VzLnB1c2goc291cmNlLnRvSlNPTigpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcInNvdXJjZXNcIiwgc2VyaWFsaXplZFNvdXJjZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAqL1xyXG4gICAgICAgIFV0aWxzLnNldEFycmF5UHJvcGVydHkocmVzdWx0LCBcInNvdXJjZXNcIiwgdGhpcy5zb3VyY2VzKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIE1lZGlhLnByb3RvdHlwZS5nZXRKc29uVHlwZU5hbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiTWVkaWFcIjtcclxuICAgIH07XHJcbiAgICBNZWRpYS5wcm90b3R5cGUuZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgdmFyIHBvc3RlclVybCA9IHRoaXMuZ2V0UG9zdGVyVXJsKCk7XHJcbiAgICAgICAgaWYgKCFVdGlscy5pc051bGxPckVtcHR5KHBvc3RlclVybCkpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goeyB1cmw6IHBvc3RlclVybCwgbWltZVR5cGU6IFwiaW1hZ2VcIiB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuc291cmNlczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIG1lZGlhU291cmNlID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbE9yRW1wdHkobWVkaWFTb3VyY2UudXJsKSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goeyB1cmw6IG1lZGlhU291cmNlLnVybCwgbWltZVR5cGU6IG1lZGlhU291cmNlLm1pbWVUeXBlIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lZGlhLnByb3RvdHlwZSwgXCJzZWxlY3RlZE1lZGlhVHlwZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZE1lZGlhVHlwZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE1lZGlhLnN1cHBvcnRlZE1lZGlhVHlwZXMgPSBbXCJhdWRpb1wiLCBcInZpZGVvXCJdO1xyXG4gICAgTWVkaWEub25QbGF5ID0gbnVsbDtcclxuICAgIHJldHVybiBNZWRpYTtcclxufShDYXJkRWxlbWVudCkpO1xyXG5leHBvcnRzLk1lZGlhID0gTWVkaWE7XHJcbnZhciBJbnB1dFZhbGlkYXRpb25PcHRpb25zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKElucHV0VmFsaWRhdGlvbk9wdGlvbnMsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBJbnB1dFZhbGlkYXRpb25PcHRpb25zKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLm5lY2Vzc2l0eSA9IEVudW1zLklucHV0VmFsaWRhdGlvbk5lY2Vzc2l0eS5PcHRpb25hbDtcclxuICAgICAgICBfdGhpcy5lcnJvck1lc3NhZ2UgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgSW5wdXRWYWxpZGF0aW9uT3B0aW9ucy5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucGFyc2UuY2FsbCh0aGlzLCBqc29uKTtcclxuICAgICAgICB0aGlzLm5lY2Vzc2l0eSA9IFV0aWxzLmdldEVudW1WYWx1ZShFbnVtcy5JbnB1dFZhbGlkYXRpb25OZWNlc3NpdHksIGpzb25bXCJuZWNlc3NpdHlcIl0sIHRoaXMubmVjZXNzaXR5KTtcclxuICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IFV0aWxzLmdldFN0cmluZ1ZhbHVlKGpzb25bXCJlcnJvck1lc3NhZ2VcIl0pO1xyXG4gICAgfTtcclxuICAgIElucHV0VmFsaWRhdGlvbk9wdGlvbnMucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5uZWNlc3NpdHkgIT0gRW51bXMuSW5wdXRWYWxpZGF0aW9uTmVjZXNzaXR5Lk9wdGlvbmFsIHx8ICFVdGlscy5pc051bGxPckVtcHR5KHRoaXMuZXJyb3JNZXNzYWdlKSkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gX3N1cGVyLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtcclxuICAgICAgICAgICAgVXRpbHMuc2V0RW51bVByb3BlcnR5KEVudW1zLklucHV0VmFsaWRhdGlvbk5lY2Vzc2l0eSwgcmVzdWx0LCBcIm5lY2Vzc2l0eVwiLCB0aGlzLm5lY2Vzc2l0eSwgRW51bXMuSW5wdXRWYWxpZGF0aW9uTmVjZXNzaXR5Lk9wdGlvbmFsKTtcclxuICAgICAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcImVycm9yTWVzc2FnZVwiLCB0aGlzLmVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIElucHV0VmFsaWRhdGlvbk9wdGlvbnM7XHJcbn0oU2VyaWFsaXphYmxlT2JqZWN0KSk7XHJcbmV4cG9ydHMuSW5wdXRWYWxpZGF0aW9uT3B0aW9ucyA9IElucHV0VmFsaWRhdGlvbk9wdGlvbnM7XHJcbnZhciBJbnB1dCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhJbnB1dCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIElucHV0KCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnZhbGlkYXRpb24gPSBuZXcgSW5wdXRWYWxpZGF0aW9uT3B0aW9ucygpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnB1dC5wcm90b3R5cGUsIFwiaXNOdWxsYWJsZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KElucHV0LnByb3RvdHlwZSwgXCJyZW5kZXJlZElucHV0Q29udHJvbEVsZW1lbnRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRJbnB1dENvbnRyb2xFbGVtZW50O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KElucHV0LnByb3RvdHlwZSwgXCJpbnB1dENvbnRyb2xDb250YWluZXJFbGVtZW50XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0Q29udHJvbENvbnRhaW5lckVsZW1lbnQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBJbnB1dC5wcm90b3R5cGUub3ZlcnJpZGVJbnRlcm5hbFJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaG9zdENvbmZpZyA9IHRoaXMuaG9zdENvbmZpZztcclxuICAgICAgICB0aGlzLl9vdXRlckNvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuX291dGVyQ29udGFpbmVyRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgdGhpcy5fb3V0ZXJDb250YWluZXJFbGVtZW50LnN0eWxlLmZsZXhEaXJlY3Rpb24gPSBcImNvbHVtblwiO1xyXG4gICAgICAgIHRoaXMuX2lucHV0Q29udHJvbENvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0Q29udHJvbENvbnRhaW5lckVsZW1lbnQuY2xhc3NOYW1lID0gaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXQtY29udGFpbmVyXCIpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0Q29udHJvbENvbnRhaW5lckVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudCA9IHRoaXMuaW50ZXJuYWxSZW5kZXIoKTtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZElucHV0Q29udHJvbEVsZW1lbnQuc3R5bGUubWluV2lkdGggPSBcIjBweFwiO1xyXG4gICAgICAgIGlmIChBZGFwdGl2ZUNhcmQudXNlQnVpbHRJbklucHV0VmFsaWRhdGlvbiAmJiB0aGlzLmlzTnVsbGFibGUgJiYgdGhpcy52YWxpZGF0aW9uLm5lY2Vzc2l0eSA9PSBFbnVtcy5JbnB1dFZhbGlkYXRpb25OZWNlc3NpdHkuUmVxdWlyZWRXaXRoVmlzdWFsQ3VlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudC5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWlucHV0LXJlcXVpcmVkXCIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5faW5wdXRDb250cm9sQ29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9yZW5kZXJlZElucHV0Q29udHJvbEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX291dGVyQ29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9pbnB1dENvbnRyb2xDb250YWluZXJFbGVtZW50KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb3V0ZXJDb250YWluZXJFbGVtZW50O1xyXG4gICAgfTtcclxuICAgIElucHV0LnByb3RvdHlwZS52YWx1ZUNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5yZXNldFZhbGlkYXRpb25GYWlsdXJlQ3VlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMub25WYWx1ZUNoYW5nZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vblZhbHVlQ2hhbmdlZCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmFpc2VJbnB1dFZhbHVlQ2hhbmdlZEV2ZW50KHRoaXMpO1xyXG4gICAgfTtcclxuICAgIElucHV0LnByb3RvdHlwZS5yZXNldFZhbGlkYXRpb25GYWlsdXJlQ3VlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChBZGFwdGl2ZUNhcmQudXNlQnVpbHRJbklucHV0VmFsaWRhdGlvbiAmJiB0aGlzLnJlbmRlcmVkRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlZElucHV0Q29udHJvbEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWlucHV0LXZhbGlkYXRpb24tZmFpbGVkXCIpKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX291dGVyQ29udGFpbmVyRWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIElucHV0LnByb3RvdHlwZS5zaG93VmFsaWRhdGlvbkVycm9yTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZEVsZW1lbnQgJiYgQWRhcHRpdmVDYXJkLnVzZUJ1aWx0SW5JbnB1dFZhbGlkYXRpb24gJiYgQWRhcHRpdmVDYXJkLmRpc3BsYXlJbnB1dFZhbGlkYXRpb25FcnJvcnMgJiYgIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy52YWxpZGF0aW9uLmVycm9yTWVzc2FnZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5fZXJyb3JNZXNzYWdlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXQtdmFsaWRhdGlvbi1lcnJvci1tZXNzYWdlXCIpO1xyXG4gICAgICAgICAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy52YWxpZGF0aW9uLmVycm9yTWVzc2FnZTtcclxuICAgICAgICAgICAgdGhpcy5fb3V0ZXJDb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2Vycm9yTWVzc2FnZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbnB1dC5wcm90b3R5cGUucGFyc2VJbnB1dFZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfTtcclxuICAgIElucHV0LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcInRpdGxlXCIsIHRoaXMudGl0bGUpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJ2YWx1ZVwiLCB0aGlzLnJlbmRlcmVkRWxlbWVudCAmJiAhVXRpbHMuaXNOdWxsT3JFbXB0eSh0aGlzLnZhbHVlKSA/IHRoaXMudmFsdWUgOiB0aGlzLmRlZmF1bHRWYWx1ZSk7XHJcbiAgICAgICAgaWYgKEFkYXB0aXZlQ2FyZC51c2VCdWlsdEluSW5wdXRWYWxpZGF0aW9uKSB7XHJcbiAgICAgICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJ2YWxpZGF0aW9uXCIsIHRoaXMudmFsaWRhdGlvbi50b0pTT04oKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgSW5wdXQucHJvdG90eXBlLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzLmNhbGwodGhpcywgY29udGV4dCk7XHJcbiAgICAgICAgaWYgKFV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy5pZCkpIHtcclxuICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKHRoaXMsIHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBFbnVtcy5WYWxpZGF0aW9uRXJyb3IuUHJvcGVydHlDYW50QmVOdWxsLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBbGwgaW5wdXRzIG11c3QgaGF2ZSBhIHVuaXF1ZSBJZFwiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbnB1dC5wcm90b3R5cGUudmFsaWRhdGVWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoQWRhcHRpdmVDYXJkLnVzZUJ1aWx0SW5JbnB1dFZhbGlkYXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNldFZhbGlkYXRpb25GYWlsdXJlQ3VlKCk7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnZhbGlkYXRpb24ubmVjZXNzaXR5ICE9IEVudW1zLklucHV0VmFsaWRhdGlvbk5lY2Vzc2l0eS5PcHRpb25hbCA/ICFVdGlscy5pc051bGxPckVtcHR5KHRoaXMudmFsdWUpIDogdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQgJiYgdGhpcy5yZW5kZXJlZEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXQtdmFsaWRhdGlvbi1mYWlsZWRcIikpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93VmFsaWRhdGlvbkVycm9yTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW5wdXQucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGpzb24sIGVycm9ycykge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucGFyc2UuY2FsbCh0aGlzLCBqc29uLCBlcnJvcnMpO1xyXG4gICAgICAgIHRoaXMuaWQgPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1wiaWRcIl0pO1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gVXRpbHMuZ2V0U3RyaW5nVmFsdWUoanNvbltcInZhbHVlXCJdKTtcclxuICAgICAgICBpZiAoQWRhcHRpdmVDYXJkLnVzZUJ1aWx0SW5JbnB1dFZhbGlkYXRpb24pIHtcclxuICAgICAgICAgICAgdmFyIGpzb25WYWxpZGF0aW9uID0ganNvbltcInZhbGlkYXRpb25cIl07XHJcbiAgICAgICAgICAgIGlmIChqc29uVmFsaWRhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0aW9uLnBhcnNlKGpzb25WYWxpZGF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbnB1dC5wcm90b3R5cGUuZ2V0QWxsSW5wdXRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBbdGhpc107XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KElucHV0LnByb3RvdHlwZSwgXCJkZWZhdWx0VmFsdWVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVmYXVsdFZhbHVlID0gdGhpcy5wYXJzZUlucHV0VmFsdWUodmFsdWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KElucHV0LnByb3RvdHlwZSwgXCJpc0ludGVyYWN0aXZlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gSW5wdXQ7XHJcbn0oQ2FyZEVsZW1lbnQpKTtcclxuZXhwb3J0cy5JbnB1dCA9IElucHV0O1xyXG52YXIgVGV4dElucHV0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFRleHRJbnB1dCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFRleHRJbnB1dCgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5pc011bHRpbGluZSA9IGZhbHNlO1xyXG4gICAgICAgIF90aGlzLnN0eWxlID0gRW51bXMuSW5wdXRUZXh0U3R5bGUuVGV4dDtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBUZXh0SW5wdXQucHJvdG90eXBlLmludGVybmFsUmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNNdWx0aWxpbmUpIHtcclxuICAgICAgICAgICAgdmFyIHRleHRhcmVhRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcclxuICAgICAgICAgICAgdGV4dGFyZWFFbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXRcIiwgXCJhYy10ZXh0SW5wdXRcIiwgXCJhYy1tdWx0aWxpbmVcIik7XHJcbiAgICAgICAgICAgIHRleHRhcmVhRWxlbWVudC5zdHlsZS5mbGV4ID0gXCIxIDEgYXV0b1wiO1xyXG4gICAgICAgICAgICB0ZXh0YXJlYUVsZW1lbnQudGFiSW5kZXggPSAwO1xyXG4gICAgICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy5wbGFjZWhvbGRlcikpIHtcclxuICAgICAgICAgICAgICAgIHRleHRhcmVhRWxlbWVudC5wbGFjZWhvbGRlciA9IHRoaXMucGxhY2Vob2xkZXI7XHJcbiAgICAgICAgICAgICAgICB0ZXh0YXJlYUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCB0aGlzLnBsYWNlaG9sZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy5kZWZhdWx0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0YXJlYUVsZW1lbnQudmFsdWUgPSB0aGlzLmRlZmF1bHRWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXhMZW5ndGggJiYgdGhpcy5tYXhMZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0YXJlYUVsZW1lbnQubWF4TGVuZ3RoID0gdGhpcy5tYXhMZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGV4dGFyZWFFbGVtZW50Lm9uaW5wdXQgPSBmdW5jdGlvbiAoKSB7IF90aGlzLnZhbHVlQ2hhbmdlZCgpOyB9O1xyXG4gICAgICAgICAgICB0ZXh0YXJlYUVsZW1lbnQub25rZXlwcmVzcyA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDdHJsK0VudGVyIHByZXNzZWRcclxuICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTAgJiYgX3RoaXMuaW5saW5lQWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5saW5lQWN0aW9uLmV4ZWN1dGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHRleHRhcmVhRWxlbWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBpbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC50eXBlID0gRW51bXMuSW5wdXRUZXh0U3R5bGVbdGhpcy5zdHlsZV0udG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXRcIiwgXCJhYy10ZXh0SW5wdXRcIik7XHJcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5zdHlsZS5mbGV4ID0gXCIxIDEgYXV0b1wiO1xyXG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQudGFiSW5kZXggPSAwO1xyXG4gICAgICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy5wbGFjZWhvbGRlcikpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0RWxlbWVudC5wbGFjZWhvbGRlciA9IHRoaXMucGxhY2Vob2xkZXI7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCB0aGlzLnBsYWNlaG9sZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy5kZWZhdWx0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVsZW1lbnQudmFsdWUgPSB0aGlzLmRlZmF1bHRWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXhMZW5ndGggJiYgdGhpcy5tYXhMZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVsZW1lbnQubWF4TGVuZ3RoID0gdGhpcy5tYXhMZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaW5wdXRFbGVtZW50Lm9uaW5wdXQgPSBmdW5jdGlvbiAoKSB7IF90aGlzLnZhbHVlQ2hhbmdlZCgpOyB9O1xyXG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQub25rZXlwcmVzcyA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBFbnRlciBwcmVzc2VkXHJcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzICYmIF90aGlzLmlubGluZUFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmlubGluZUFjdGlvbi5leGVjdXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiBpbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFRleHRJbnB1dC5wcm90b3R5cGUub3ZlcnJpZGVJbnRlcm5hbFJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZW5kZXJlZElucHV0Q29udHJvbCA9IF9zdXBlci5wcm90b3R5cGUub3ZlcnJpZGVJbnRlcm5hbFJlbmRlci5jYWxsKHRoaXMpO1xyXG4gICAgICAgIGlmICh0aGlzLmlubGluZUFjdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgYnV0dG9uXzEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICBidXR0b25fMS5jbGFzc05hbWUgPSB0aGlzLmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWlubGluZUFjdGlvbkJ1dHRvblwiKTtcclxuICAgICAgICAgICAgYnV0dG9uXzEub25jbGljayA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5pbmxpbmVBY3Rpb24uZXhlY3V0ZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy5pbmxpbmVBY3Rpb24uaWNvblVybCkpIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbl8xLmNsYXNzTGlzdC5hZGQoXCJpY29uT25seVwiKTtcclxuICAgICAgICAgICAgICAgIHZhciBpY29uXzEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgICAgICAgICAgaWNvbl8xLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICAgICAgLy8gVGhlIGJlbG93IHRyaWNrIGlzIG5lY2Vzc2FyeSBhcyBhIHdvcmthcm91bmQgaW4gQ2hyb21lIHdoZXJlIHRoZSBpY29uIGlzIGluaXRpYWxseSBkaXNwbGF5ZWRcclxuICAgICAgICAgICAgICAgIC8vIGF0IGl0cyBuYXRpdmUgc2l6ZSB0aGVuIHJlc2l6ZWQgdG8gMTAwJSBvZiB0aGUgYnV0dG9uJ3MgaGVpZ2h0LiBUaGlzIGNmcmVhdGVzIGFuIHVucGxlYXNhbnRcclxuICAgICAgICAgICAgICAgIC8vIGZsaWNrZXIuIE9uIHRvcCBvZiB0aGF0LCBDaHJvbWUncyBmbGV4IGltcGxlbWVudGF0aW9uIGZhaWxzIHRvIHBycGVybHkgcmUtbGF5b3V0IHRoZSBidXR0b25cclxuICAgICAgICAgICAgICAgIC8vIGFmdGVyIHRoZSBpbWFnZSBoYXMgbG9hZGVkIGFuZCBiZWVuIGdpY3ZlbiBpdHMgZmluYWwgc2l6ZS4gVGhlIGJlbG93IHRyaWNrIGFsc28gZml4ZXMgdGhhdC5cclxuICAgICAgICAgICAgICAgIGljb25fMS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICBpY29uXzEub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGljb25fMS5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcImRpc3BsYXlcIik7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgaWNvbl8xLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uXzEucmVtb3ZlQ2hpbGQoaWNvbl8xKTtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b25fMS5jbGFzc0xpc3QucmVtb3ZlKFwiaWNvbk9ubHlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uXzEuY2xhc3NMaXN0LmFkZChcInRleHRPbmx5XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbl8xLnRleHRDb250ZW50ID0gIVV0aWxzLmlzTnVsbE9yRW1wdHkoX3RoaXMuaW5saW5lQWN0aW9uLnRpdGxlKSA/IF90aGlzLmlubGluZUFjdGlvbi50aXRsZSA6IFwiVGl0bGVcIjtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpY29uXzEuc3JjID0gdGhpcy5pbmxpbmVBY3Rpb24uaWNvblVybDtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbl8xLmFwcGVuZENoaWxkKGljb25fMSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy5pbmxpbmVBY3Rpb24udGl0bGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uXzEudGl0bGUgPSB0aGlzLmlubGluZUFjdGlvbi50aXRsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbl8xLmNsYXNzTGlzdC5hZGQoXCJ0ZXh0T25seVwiKTtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbl8xLnRleHRDb250ZW50ID0gIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy5pbmxpbmVBY3Rpb24udGl0bGUpID8gdGhpcy5pbmxpbmVBY3Rpb24udGl0bGUgOiBcIlRpdGxlXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnV0dG9uXzEuc3R5bGUubWFyZ2luTGVmdCA9IFwiOHB4XCI7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRDb250cm9sQ29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChidXR0b25fMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZW5kZXJlZElucHV0Q29udHJvbDtcclxuICAgIH07XHJcbiAgICBUZXh0SW5wdXQucHJvdG90eXBlLmdldEpzb25UeXBlTmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gXCJJbnB1dC5UZXh0XCI7XHJcbiAgICB9O1xyXG4gICAgVGV4dElucHV0LnByb3RvdHlwZS5nZXRBY3Rpb25CeUlkID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUuZ2V0QWN0aW9uQnlJZC5jYWxsKHRoaXMsIGlkKTtcclxuICAgICAgICBpZiAoIXJlc3VsdCAmJiB0aGlzLmlubGluZUFjdGlvbikge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLmlubGluZUFjdGlvbi5nZXRBY3Rpb25CeUlkKGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBUZXh0SW5wdXQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gX3N1cGVyLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtcclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwicGxhY2Vob2xkZXJcIiwgdGhpcy5wbGFjZWhvbGRlcik7XHJcbiAgICAgICAgVXRpbHMuc2V0TnVtYmVyUHJvcGVydHkocmVzdWx0LCBcIm1heExlbmd0aFwiLCB0aGlzLm1heExlbmd0aCk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcImlzTXVsdGlsaW5lXCIsIHRoaXMuaXNNdWx0aWxpbmUsIGZhbHNlKTtcclxuICAgICAgICBVdGlscy5zZXRFbnVtUHJvcGVydHkoRW51bXMuSW5wdXRUZXh0U3R5bGUsIHJlc3VsdCwgXCJzdHlsZVwiLCB0aGlzLnN0eWxlLCBFbnVtcy5JbnB1dFRleHRTdHlsZS5UZXh0KTtcclxuICAgICAgICBpZiAodGhpcy5faW5saW5lQWN0aW9uKSB7XHJcbiAgICAgICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJpbmxpbmVBY3Rpb25cIiwgdGhpcy5faW5saW5lQWN0aW9uLnRvSlNPTigpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBUZXh0SW5wdXQucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGpzb24sIGVycm9ycykge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucGFyc2UuY2FsbCh0aGlzLCBqc29uLCBlcnJvcnMpO1xyXG4gICAgICAgIHRoaXMubWF4TGVuZ3RoID0gVXRpbHMuZ2V0TnVtYmVyVmFsdWUoanNvbltcIm1heExlbmd0aFwiXSk7XHJcbiAgICAgICAgdGhpcy5pc011bHRpbGluZSA9IFV0aWxzLmdldEJvb2xWYWx1ZShqc29uW1wiaXNNdWx0aWxpbmVcIl0sIHRoaXMuaXNNdWx0aWxpbmUpO1xyXG4gICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1wicGxhY2Vob2xkZXJcIl0pO1xyXG4gICAgICAgIHRoaXMuc3R5bGUgPSBVdGlscy5nZXRFbnVtVmFsdWUoRW51bXMuSW5wdXRUZXh0U3R5bGUsIGpzb25bXCJzdHlsZVwiXSwgdGhpcy5zdHlsZSk7XHJcbiAgICAgICAgdGhpcy5pbmxpbmVBY3Rpb24gPSBjcmVhdGVBY3Rpb25JbnN0YW5jZSh0aGlzLCBqc29uW1wiaW5saW5lQWN0aW9uXCJdLCBbU2hvd0NhcmRBY3Rpb24uSnNvblR5cGVOYW1lXSwgIXRoaXMuaXNEZXNpZ25Nb2RlKCksIGVycm9ycyk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRleHRJbnB1dC5wcm90b3R5cGUsIFwiaW5saW5lQWN0aW9uXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lubGluZUFjdGlvbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lubGluZUFjdGlvbiA9IHZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faW5saW5lQWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pbmxpbmVBY3Rpb24uc2V0UGFyZW50KHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGV4dElucHV0LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlcmVkSW5wdXRDb250cm9sRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNdWx0aWxpbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlZElucHV0Q29udHJvbEVsZW1lbnQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlZElucHV0Q29udHJvbEVsZW1lbnQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIFRleHRJbnB1dDtcclxufShJbnB1dCkpO1xyXG5leHBvcnRzLlRleHRJbnB1dCA9IFRleHRJbnB1dDtcclxudmFyIFRvZ2dsZUlucHV0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFRvZ2dsZUlucHV0LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVG9nZ2xlSW5wdXQoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMudmFsdWVPbiA9IFwidHJ1ZVwiO1xyXG4gICAgICAgIF90aGlzLnZhbHVlT2ZmID0gXCJmYWxzZVwiO1xyXG4gICAgICAgIF90aGlzLndyYXAgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBUb2dnbGVJbnB1dC5wcm90b3R5cGUuaW50ZXJuYWxSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSB0aGlzLmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWlucHV0XCIsIFwiYWMtdG9nZ2xlSW5wdXRcIik7XHJcbiAgICAgICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQuaWQgPSBVdGlscy5nZW5lcmF0ZVVuaXF1ZUlkKCk7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQudHlwZSA9IFwiY2hlY2tib3hcIjtcclxuICAgICAgICB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcclxuICAgICAgICB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gXCJtaWRkbGVcIjtcclxuICAgICAgICB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC5zdHlsZS5tYXJnaW4gPSBcIjBcIjtcclxuICAgICAgICB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC5zdHlsZS5mbGV4ID0gXCIwIDAgYXV0b1wiO1xyXG4gICAgICAgIHRoaXMuX2NoZWNrYm94SW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgdGhpcy50aXRsZSk7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQudGFiSW5kZXggPSAwO1xyXG4gICAgICAgIGlmICh0aGlzLmRlZmF1bHRWYWx1ZSA9PSB0aGlzLnZhbHVlT24pIHtcclxuICAgICAgICAgICAgdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2NoZWNrYm94SW5wdXRFbGVtZW50Lm9uY2hhbmdlID0gZnVuY3Rpb24gKCkgeyBfdGhpcy52YWx1ZUNoYW5nZWQoKTsgfTtcclxuICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudCk7XHJcbiAgICAgICAgaWYgKCFVdGlscy5pc051bGxPckVtcHR5KHRoaXMudGl0bGUpIHx8IHRoaXMuaXNEZXNpZ25Nb2RlKCkpIHtcclxuICAgICAgICAgICAgdmFyIGxhYmVsID0gbmV3IExhYmVsKCk7XHJcbiAgICAgICAgICAgIGxhYmVsLnNldFBhcmVudCh0aGlzKTtcclxuICAgICAgICAgICAgbGFiZWwuZm9yRWxlbWVudElkID0gdGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQuaWQ7XHJcbiAgICAgICAgICAgIGxhYmVsLmhvc3RDb25maWcgPSB0aGlzLmhvc3RDb25maWc7XHJcbiAgICAgICAgICAgIGxhYmVsLnRleHQgPSBVdGlscy5pc051bGxPckVtcHR5KHRoaXMudGl0bGUpID8gdGhpcy5nZXRKc29uVHlwZU5hbWUoKSA6IHRoaXMudGl0bGU7XHJcbiAgICAgICAgICAgIGxhYmVsLnVzZU1hcmtkb3duID0gQWRhcHRpdmVDYXJkLnVzZU1hcmtkb3duSW5SYWRpb0J1dHRvbkFuZENoZWNrYm94O1xyXG4gICAgICAgICAgICBsYWJlbC53cmFwID0gdGhpcy53cmFwO1xyXG4gICAgICAgICAgICB2YXIgbGFiZWxFbGVtZW50ID0gbGFiZWwucmVuZGVyKCk7XHJcbiAgICAgICAgICAgIGxhYmVsRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcclxuICAgICAgICAgICAgbGFiZWxFbGVtZW50LnN0eWxlLmZsZXggPSBcIjEgMSBhdXRvXCI7XHJcbiAgICAgICAgICAgIGxhYmVsRWxlbWVudC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCI2cHhcIjtcclxuICAgICAgICAgICAgbGFiZWxFbGVtZW50LnN0eWxlLnZlcnRpY2FsQWxpZ24gPSBcIm1pZGRsZVwiO1xyXG4gICAgICAgICAgICB2YXIgc3BhY2VyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIHNwYWNlckVsZW1lbnQuc3R5bGUud2lkdGggPSBcIjZweFwiO1xyXG4gICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCBzcGFjZXJFbGVtZW50KTtcclxuICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoZWxlbWVudCwgbGFiZWxFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRvZ2dsZUlucHV0LnByb3RvdHlwZSwgXCJpc051bGxhYmxlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgVG9nZ2xlSW5wdXQucHJvdG90eXBlLmdldEpzb25UeXBlTmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gXCJJbnB1dC5Ub2dnbGVcIjtcclxuICAgIH07XHJcbiAgICBUb2dnbGVJbnB1dC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBfc3VwZXIucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJ2YWx1ZU9uXCIsIHRoaXMudmFsdWVPbiwgXCJ0cnVlXCIpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJ2YWx1ZU9mZlwiLCB0aGlzLnZhbHVlT2ZmLCBcImZhbHNlXCIpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJ3cmFwXCIsIHRoaXMud3JhcCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBUb2dnbGVJbnB1dC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbiwgZXJyb3JzKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wYXJzZS5jYWxsKHRoaXMsIGpzb24sIGVycm9ycyk7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IFV0aWxzLmdldFN0cmluZ1ZhbHVlKGpzb25bXCJ0aXRsZVwiXSk7XHJcbiAgICAgICAgdGhpcy52YWx1ZU9uID0gVXRpbHMuZ2V0U3RyaW5nVmFsdWUoanNvbltcInZhbHVlT25cIl0sIHRoaXMudmFsdWVPbik7XHJcbiAgICAgICAgdGhpcy52YWx1ZU9mZiA9IFV0aWxzLmdldFN0cmluZ1ZhbHVlKGpzb25bXCJ2YWx1ZU9mZlwiXSwgdGhpcy52YWx1ZU9mZik7XHJcbiAgICAgICAgdGhpcy53cmFwID0gVXRpbHMuZ2V0Qm9vbFZhbHVlKGpzb25bXCJ3cmFwXCJdLCB0aGlzLndyYXApO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUb2dnbGVJbnB1dC5wcm90b3R5cGUsIFwidmFsdWVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fY2hlY2tib3hJbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja2JveElucHV0RWxlbWVudC5jaGVja2VkID8gdGhpcy52YWx1ZU9uIDogdGhpcy52YWx1ZU9mZjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gVG9nZ2xlSW5wdXQ7XHJcbn0oSW5wdXQpKTtcclxuZXhwb3J0cy5Ub2dnbGVJbnB1dCA9IFRvZ2dsZUlucHV0O1xyXG52YXIgQ2hvaWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKENob2ljZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIENob2ljZSh0aXRsZSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAodGl0bGUgPT09IHZvaWQgMCkgeyB0aXRsZSA9IHVuZGVmaW5lZDsgfVxyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7IHZhbHVlID0gdW5kZWZpbmVkOyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIF90aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgQ2hvaWNlLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wYXJzZS5jYWxsKHRoaXMsIGpzb24pO1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1widGl0bGVcIl0sIFwiXCIpO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1widmFsdWVcIl0sIFwiXCIpO1xyXG4gICAgfTtcclxuICAgIENob2ljZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBfc3VwZXIucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJ0aXRsZVwiLCB0aGlzLnRpdGxlKTtcclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwidmFsdWVcIiwgdGhpcy52YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ2hvaWNlO1xyXG59KFNlcmlhbGl6YWJsZU9iamVjdCkpO1xyXG5leHBvcnRzLkNob2ljZSA9IENob2ljZTtcclxudmFyIENob2ljZVNldElucHV0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKENob2ljZVNldElucHV0LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ2hvaWNlU2V0SW5wdXQoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY2hvaWNlcyA9IFtdO1xyXG4gICAgICAgIF90aGlzLmlzQ29tcGFjdCA9IGZhbHNlO1xyXG4gICAgICAgIF90aGlzLmlzTXVsdGlTZWxlY3QgPSBmYWxzZTtcclxuICAgICAgICBfdGhpcy53cmFwID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgQ2hvaWNlU2V0SW5wdXQuZ2V0VW5pcXVlQ2F0ZWdvcnlOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB1bmlxdWVDd3RlZ29yeU5hbWUgPSBcIl9fYWMtY2F0ZWdvcnlcIiArIENob2ljZVNldElucHV0LnVuaXF1ZUNhdGVnb3J5Q291bnRlcjtcclxuICAgICAgICBDaG9pY2VTZXRJbnB1dC51bmlxdWVDYXRlZ29yeUNvdW50ZXIrKztcclxuICAgICAgICByZXR1cm4gdW5pcXVlQ3d0ZWdvcnlOYW1lO1xyXG4gICAgfTtcclxuICAgIENob2ljZVNldElucHV0LnByb3RvdHlwZS5pbnRlcm5hbFJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICghdGhpcy5pc011bHRpU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ29tcGFjdCkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVuZGVyIGFzIGEgY29tYm8gYm94XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdEVsZW1lbnQuY2xhc3NOYW1lID0gdGhpcy5ob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1pbnB1dFwiLCBcImFjLW11bHRpY2hvaWNlSW5wdXRcIiwgXCJhYy1jaG9pY2VTZXRJbnB1dC1jb21wYWN0XCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0RWxlbWVudC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5oaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnRleHQgPSB0aGlzLnBsYWNlaG9sZGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQodGhpcy5fc2VsZWN0RWxlbWVudCwgb3B0aW9uKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaG9pY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbl8xID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25fMS52YWx1ZSA9IHRoaXMuY2hvaWNlc1tpXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25fMS50ZXh0ID0gdGhpcy5jaG9pY2VzW2ldLnRpdGxlO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbl8xLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgdGhpcy5jaG9pY2VzW2ldLnRpdGxlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaG9pY2VzW2ldLnZhbHVlID09IHRoaXMuZGVmYXVsdFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbl8xLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQodGhpcy5fc2VsZWN0RWxlbWVudCwgb3B0aW9uXzEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0RWxlbWVudC5vbmNoYW5nZSA9IGZ1bmN0aW9uICgpIHsgX3RoaXMudmFsdWVDaGFuZ2VkKCk7IH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0RWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlbmRlciBhcyBhIHNlcmllcyBvZiByYWRpbyBidXR0b25zXHJcbiAgICAgICAgICAgICAgICB2YXIgdW5pcXVlQ2F0ZWdvcnlOYW1lID0gQ2hvaWNlU2V0SW5wdXQuZ2V0VW5pcXVlQ2F0ZWdvcnlOYW1lKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXRcIiwgXCJhYy1jaG9pY2VTZXRJbnB1dC1leHBhbmRlZFwiKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUlucHV0cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaV8xID0gMDsgaV8xIDwgdGhpcy5jaG9pY2VzLmxlbmd0aDsgaV8xKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmFkaW9JbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICAgICAgICAgICAgICByYWRpb0lucHV0LmlkID0gVXRpbHMuZ2VuZXJhdGVVbmlxdWVJZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJhZGlvSW5wdXQudHlwZSA9IFwicmFkaW9cIjtcclxuICAgICAgICAgICAgICAgICAgICByYWRpb0lucHV0LnN0eWxlLm1hcmdpbiA9IFwiMFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJhZGlvSW5wdXQuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFkaW9JbnB1dC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gXCJtaWRkbGVcIjtcclxuICAgICAgICAgICAgICAgICAgICByYWRpb0lucHV0Lm5hbWUgPSBVdGlscy5pc051bGxPckVtcHR5KHRoaXMuaWQpID8gdW5pcXVlQ2F0ZWdvcnlOYW1lIDogdGhpcy5pZDtcclxuICAgICAgICAgICAgICAgICAgICByYWRpb0lucHV0LnZhbHVlID0gdGhpcy5jaG9pY2VzW2lfMV0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFkaW9JbnB1dC5zdHlsZS5mbGV4ID0gXCIwIDAgYXV0b1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJhZGlvSW5wdXQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCB0aGlzLmNob2ljZXNbaV8xXS50aXRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hvaWNlc1tpXzFdLnZhbHVlID09IHRoaXMuZGVmYXVsdFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhZGlvSW5wdXQuY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJhZGlvSW5wdXQub25jaGFuZ2UgPSBmdW5jdGlvbiAoKSB7IF90aGlzLnZhbHVlQ2hhbmdlZCgpOyB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUlucHV0cy5wdXNoKHJhZGlvSW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IG5ldyBMYWJlbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsLnNldFBhcmVudCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbC5mb3JFbGVtZW50SWQgPSByYWRpb0lucHV0LmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsLmhvc3RDb25maWcgPSB0aGlzLmhvc3RDb25maWc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWwudGV4dCA9IFV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy5jaG9pY2VzW2lfMV0udGl0bGUpID8gXCJDaG9pY2UgXCIgKyBpXzEgOiB0aGlzLmNob2ljZXNbaV8xXS50aXRsZTtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbC51c2VNYXJrZG93biA9IEFkYXB0aXZlQ2FyZC51c2VNYXJrZG93bkluUmFkaW9CdXR0b25BbmRDaGVja2JveDtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbC53cmFwID0gdGhpcy53cmFwO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbEVsZW1lbnQgPSBsYWJlbC5yZW5kZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxFbGVtZW50LnN0eWxlLmZsZXggPSBcIjEgMSBhdXRvXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxFbGVtZW50LnN0eWxlLm1hcmdpbkxlZnQgPSBcIjZweFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsRWxlbWVudC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gXCJtaWRkbGVcIjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3BhY2VyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc3BhY2VyRWxlbWVudC5zdHlsZS53aWR0aCA9IFwiNnB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBvdW5kSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvdW5kSW5wdXQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvdW5kSW5wdXQuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoY29tcG91bmRJbnB1dCwgcmFkaW9JbnB1dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoY29tcG91bmRJbnB1dCwgc3BhY2VyRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoY29tcG91bmRJbnB1dCwgbGFiZWxFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCBjb21wb3VuZElucHV0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBSZW5kZXIgYXMgYSBsaXN0IG9mIHRvZ2dsZSBpbnB1dHNcclxuICAgICAgICAgICAgdmFyIGRlZmF1bHRWYWx1ZXMgPSB0aGlzLmRlZmF1bHRWYWx1ZSA/IHRoaXMuZGVmYXVsdFZhbHVlLnNwbGl0KHRoaXMuaG9zdENvbmZpZy5jaG9pY2VTZXRJbnB1dFZhbHVlU2VwYXJhdG9yKSA6IG51bGw7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSB0aGlzLmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWlucHV0XCIsIFwiYWMtY2hvaWNlU2V0SW5wdXQtbXVsdGlTZWxlY3RcIik7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgdGhpcy5fdG9nZ2xlSW5wdXRzID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGlfMiA9IDA7IGlfMiA8IHRoaXMuY2hvaWNlcy5sZW5ndGg7IGlfMisrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hlY2tib3hJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICAgICAgICAgIGNoZWNrYm94SW5wdXQuaWQgPSBVdGlscy5nZW5lcmF0ZVVuaXF1ZUlkKCk7XHJcbiAgICAgICAgICAgICAgICBjaGVja2JveElucHV0LnR5cGUgPSBcImNoZWNrYm94XCI7XHJcbiAgICAgICAgICAgICAgICBjaGVja2JveElucHV0LnN0eWxlLm1hcmdpbiA9IFwiMFwiO1xyXG4gICAgICAgICAgICAgICAgY2hlY2tib3hJbnB1dC5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIGNoZWNrYm94SW5wdXQuc3R5bGUudmVydGljYWxBbGlnbiA9IFwibWlkZGxlXCI7XHJcbiAgICAgICAgICAgICAgICBjaGVja2JveElucHV0LnZhbHVlID0gdGhpcy5jaG9pY2VzW2lfMl0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICBjaGVja2JveElucHV0LnN0eWxlLmZsZXggPSBcIjAgMCBhdXRvXCI7XHJcbiAgICAgICAgICAgICAgICBjaGVja2JveElucHV0LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgdGhpcy5jaG9pY2VzW2lfMl0udGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRWYWx1ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdFZhbHVlcy5pbmRleE9mKHRoaXMuY2hvaWNlc1tpXzJdLnZhbHVlKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94SW5wdXQuY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2hlY2tib3hJbnB1dC5vbmNoYW5nZSA9IGZ1bmN0aW9uICgpIHsgX3RoaXMudmFsdWVDaGFuZ2VkKCk7IH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVJbnB1dHMucHVzaChjaGVja2JveElucHV0KTtcclxuICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IG5ldyBMYWJlbCgpO1xyXG4gICAgICAgICAgICAgICAgbGFiZWwuc2V0UGFyZW50KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgbGFiZWwuZm9yRWxlbWVudElkID0gY2hlY2tib3hJbnB1dC5pZDtcclxuICAgICAgICAgICAgICAgIGxhYmVsLmhvc3RDb25maWcgPSB0aGlzLmhvc3RDb25maWc7XHJcbiAgICAgICAgICAgICAgICBsYWJlbC50ZXh0ID0gVXRpbHMuaXNOdWxsT3JFbXB0eSh0aGlzLmNob2ljZXNbaV8yXS50aXRsZSkgPyBcIkNob2ljZSBcIiArIGlfMiA6IHRoaXMuY2hvaWNlc1tpXzJdLnRpdGxlO1xyXG4gICAgICAgICAgICAgICAgbGFiZWwudXNlTWFya2Rvd24gPSBBZGFwdGl2ZUNhcmQudXNlTWFya2Rvd25JblJhZGlvQnV0dG9uQW5kQ2hlY2tib3g7XHJcbiAgICAgICAgICAgICAgICBsYWJlbC53cmFwID0gdGhpcy53cmFwO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsRWxlbWVudCA9IGxhYmVsLnJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgbGFiZWxFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgbGFiZWxFbGVtZW50LnN0eWxlLmZsZXggPSBcIjEgMSBhdXRvXCI7XHJcbiAgICAgICAgICAgICAgICBsYWJlbEVsZW1lbnQuc3R5bGUubWFyZ2luTGVmdCA9IFwiNnB4XCI7XHJcbiAgICAgICAgICAgICAgICBsYWJlbEVsZW1lbnQuc3R5bGUudmVydGljYWxBbGlnbiA9IFwibWlkZGxlXCI7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3BhY2VyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICBzcGFjZXJFbGVtZW50LnN0eWxlLndpZHRoID0gXCI2cHhcIjtcclxuICAgICAgICAgICAgICAgIHZhciBjb21wb3VuZElucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgICAgIGNvbXBvdW5kSW5wdXQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgICAgICAgICAgY29tcG91bmRJbnB1dC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKGNvbXBvdW5kSW5wdXQsIGNoZWNrYm94SW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoY29tcG91bmRJbnB1dCwgc3BhY2VyRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChjb21wb3VuZElucHV0LCBsYWJlbEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoZWxlbWVudCwgY29tcG91bmRJbnB1dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENob2ljZVNldElucHV0LnByb3RvdHlwZS5nZXRKc29uVHlwZU5hbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiSW5wdXQuQ2hvaWNlU2V0XCI7XHJcbiAgICB9O1xyXG4gICAgQ2hvaWNlU2V0SW5wdXQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gX3N1cGVyLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtcclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwicGxhY2Vob2xkZXJcIiwgdGhpcy5wbGFjZWhvbGRlcik7XHJcbiAgICAgICAgVXRpbHMuc2V0QXJyYXlQcm9wZXJ0eShyZXN1bHQsIFwiY2hvaWNlc1wiLCB0aGlzLmNob2ljZXMpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJzdHlsZVwiLCB0aGlzLmlzQ29tcGFjdCA/IG51bGwgOiBcImV4cGFuZGVkXCIpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJpc011bHRpU2VsZWN0XCIsIHRoaXMuaXNNdWx0aVNlbGVjdCwgZmFsc2UpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJ3cmFwXCIsIHRoaXMud3JhcCwgZmFsc2UpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgQ2hvaWNlU2V0SW5wdXQucHJvdG90eXBlLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzLmNhbGwodGhpcywgY29udGV4dCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY2hvaWNlcy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUodGhpcywge1xyXG4gICAgICAgICAgICAgICAgZXJyb3I6IEVudW1zLlZhbGlkYXRpb25FcnJvci5Db2xsZWN0aW9uQ2FudEJlRW1wdHksXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkFuIElucHV0LkNob2ljZVNldCBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIGNob2ljZSBkZWZpbmVkLlwiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5jaG9pY2VzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgY2hvaWNlID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBpZiAoIWNob2ljZS50aXRsZSB8fCAhY2hvaWNlLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUodGhpcywge1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBFbnVtcy5WYWxpZGF0aW9uRXJyb3IuUHJvcGVydHlDYW50QmVOdWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQWxsIGNob2ljZXMgaW4gYW4gSW5wdXQuQ2hvaWNlU2V0IG11c3QgaGF2ZSB0aGVpciB0aXRsZSBhbmQgdmFsdWUgcHJvcGVydGllcyBzZXQuXCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENob2ljZVNldElucHV0LnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChqc29uLCBlcnJvcnMpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnBhcnNlLmNhbGwodGhpcywganNvbiwgZXJyb3JzKTtcclxuICAgICAgICB0aGlzLmlzQ29tcGFjdCA9ICEoanNvbltcInN0eWxlXCJdID09PSBcImV4cGFuZGVkXCIpO1xyXG4gICAgICAgIHRoaXMuaXNNdWx0aVNlbGVjdCA9IFV0aWxzLmdldEJvb2xWYWx1ZShqc29uW1wiaXNNdWx0aVNlbGVjdFwiXSwgdGhpcy5pc011bHRpU2VsZWN0KTtcclxuICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gVXRpbHMuZ2V0U3RyaW5nVmFsdWUoanNvbltcInBsYWNlaG9sZGVyXCJdKTtcclxuICAgICAgICB0aGlzLmNob2ljZXMgPSBbXTtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShqc29uW1wiY2hvaWNlc1wiXSkpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGpzb25bXCJjaG9pY2VzXCJdOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGpzb25DaG9pY2UgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hvaWNlID0gbmV3IENob2ljZSgpO1xyXG4gICAgICAgICAgICAgICAgY2hvaWNlLnBhcnNlKGpzb25DaG9pY2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaG9pY2VzLnB1c2goY2hvaWNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLndyYXAgPSBVdGlscy5nZXRCb29sVmFsdWUoanNvbltcIndyYXBcIl0sIHRoaXMud3JhcCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENob2ljZVNldElucHV0LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc011bHRpU2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NvbXBhY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2VsZWN0RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0RWxlbWVudC5zZWxlY3RlZEluZGV4ID4gMCA/IHRoaXMuX3NlbGVjdEVsZW1lbnQudmFsdWUgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fdG9nZ2xlSW5wdXRzIHx8IHRoaXMuX3RvZ2dsZUlucHV0cy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl90b2dnbGVJbnB1dHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3RvZ2dsZUlucHV0c1tpXS5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdG9nZ2xlSW5wdXRzW2ldLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl90b2dnbGVJbnB1dHMgfHwgdGhpcy5fdG9nZ2xlSW5wdXRzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fdG9nZ2xlSW5wdXRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3RvZ2dsZUlucHV0c1tpXS5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IHRoaXMuaG9zdENvbmZpZy5jaG9pY2VTZXRJbnB1dFZhbHVlU2VwYXJhdG9yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSB0aGlzLl90b2dnbGVJbnB1dHNbaV0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCA9PSBcIlwiID8gbnVsbCA6IHJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQ2hvaWNlU2V0SW5wdXQudW5pcXVlQ2F0ZWdvcnlDb3VudGVyID0gMDtcclxuICAgIHJldHVybiBDaG9pY2VTZXRJbnB1dDtcclxufShJbnB1dCkpO1xyXG5leHBvcnRzLkNob2ljZVNldElucHV0ID0gQ2hvaWNlU2V0SW5wdXQ7XHJcbnZhciBOdW1iZXJJbnB1dCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhOdW1iZXJJbnB1dCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIE51bWJlcklucHV0KCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIE51bWJlcklucHV0LnByb3RvdHlwZS5pbnRlcm5hbFJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuX251bWJlcklucHV0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcIm51bWJlclwiKTtcclxuICAgICAgICBpZiAodGhpcy5taW4pIHtcclxuICAgICAgICAgICAgdGhpcy5fbnVtYmVySW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1pblwiLCB0aGlzLm1pbi50b1N0cmluZygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubWF4KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX251bWJlcklucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtYXhcIiwgdGhpcy5tYXgudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX251bWJlcklucHV0RWxlbWVudC5jbGFzc05hbWUgPSB0aGlzLmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImFjLWlucHV0XCIsIFwiYWMtbnVtYmVySW5wdXRcIik7XHJcbiAgICAgICAgdGhpcy5fbnVtYmVySW5wdXRFbGVtZW50LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgdGhpcy5fbnVtYmVySW5wdXRFbGVtZW50LnRhYkluZGV4ID0gMDtcclxuICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy5kZWZhdWx0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX251bWJlcklucHV0RWxlbWVudC52YWx1ZSA9IHRoaXMuZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy5wbGFjZWhvbGRlcikpIHtcclxuICAgICAgICAgICAgdGhpcy5fbnVtYmVySW5wdXRFbGVtZW50LnBsYWNlaG9sZGVyID0gdGhpcy5wbGFjZWhvbGRlcjtcclxuICAgICAgICAgICAgdGhpcy5fbnVtYmVySW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgdGhpcy5wbGFjZWhvbGRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX251bWJlcklucHV0RWxlbWVudC5vbmlucHV0ID0gZnVuY3Rpb24gKCkgeyBfdGhpcy52YWx1ZUNoYW5nZWQoKTsgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbnVtYmVySW5wdXRFbGVtZW50O1xyXG4gICAgfTtcclxuICAgIE51bWJlcklucHV0LnByb3RvdHlwZS5nZXRKc29uVHlwZU5hbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiSW5wdXQuTnVtYmVyXCI7XHJcbiAgICB9O1xyXG4gICAgTnVtYmVySW5wdXQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gX3N1cGVyLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtcclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwicGxhY2Vob2xkZXJcIiwgdGhpcy5wbGFjZWhvbGRlcik7XHJcbiAgICAgICAgVXRpbHMuc2V0TnVtYmVyUHJvcGVydHkocmVzdWx0LCBcIm1pblwiLCB0aGlzLm1pbik7XHJcbiAgICAgICAgVXRpbHMuc2V0TnVtYmVyUHJvcGVydHkocmVzdWx0LCBcIm1heFwiLCB0aGlzLm1heCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBOdW1iZXJJbnB1dC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbiwgZXJyb3JzKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wYXJzZS5jYWxsKHRoaXMsIGpzb24sIGVycm9ycyk7XHJcbiAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9IFV0aWxzLmdldFN0cmluZ1ZhbHVlKGpzb25bXCJwbGFjZWhvbGRlclwiXSk7XHJcbiAgICAgICAgdGhpcy5taW4gPSBVdGlscy5nZXROdW1iZXJWYWx1ZShqc29uW1wibWluXCJdKTtcclxuICAgICAgICB0aGlzLm1heCA9IFV0aWxzLmdldE51bWJlclZhbHVlKGpzb25bXCJtYXhcIl0pO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOdW1iZXJJbnB1dC5wcm90b3R5cGUsIFwibWluXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21pbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21pbiA9IHZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE51bWJlcklucHV0LnByb3RvdHlwZSwgXCJtYXhcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWF4O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWF4ID0gdmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTnVtYmVySW5wdXQucHJvdG90eXBlLCBcInZhbHVlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX251bWJlcklucHV0RWxlbWVudCA/IHRoaXMuX251bWJlcklucHV0RWxlbWVudC52YWx1ZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOdW1iZXJJbnB1dC5wcm90b3R5cGUsIFwidmFsdWVBc051bWJlclwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQgPyB0aGlzLl9udW1iZXJJbnB1dEVsZW1lbnQudmFsdWVBc051bWJlciA6IHVuZGVmaW5lZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBOdW1iZXJJbnB1dDtcclxufShJbnB1dCkpO1xyXG5leHBvcnRzLk51bWJlcklucHV0ID0gTnVtYmVySW5wdXQ7XHJcbnZhciBEYXRlSW5wdXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoRGF0ZUlucHV0LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRGF0ZUlucHV0KCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIERhdGVJbnB1dC5wcm90b3R5cGUuaW50ZXJuYWxSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLl9kYXRlSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIHRoaXMuX2RhdGVJbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImRhdGVcIik7XHJcbiAgICAgICAgdGhpcy5fZGF0ZUlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtaW5cIiwgdGhpcy5taW4pO1xyXG4gICAgICAgIHRoaXMuX2RhdGVJbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4XCIsIHRoaXMubWF4KTtcclxuICAgICAgICB0aGlzLl9kYXRlSW5wdXRFbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtaW5wdXRcIiwgXCJhYy1kYXRlSW5wdXRcIik7XHJcbiAgICAgICAgdGhpcy5fZGF0ZUlucHV0RWxlbWVudC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgIHRoaXMuX2RhdGVJbnB1dEVsZW1lbnQub25pbnB1dCA9IGZ1bmN0aW9uICgpIHsgX3RoaXMudmFsdWVDaGFuZ2VkKCk7IH07XHJcbiAgICAgICAgaWYgKCFVdGlscy5pc051bGxPckVtcHR5KHRoaXMuZGVmYXVsdFZhbHVlKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kYXRlSW5wdXRFbGVtZW50LnZhbHVlID0gdGhpcy5kZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRlSW5wdXRFbGVtZW50O1xyXG4gICAgfTtcclxuICAgIERhdGVJbnB1dC5wcm90b3R5cGUuZ2V0SnNvblR5cGVOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcIklucHV0LkRhdGVcIjtcclxuICAgIH07XHJcbiAgICBEYXRlSW5wdXQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gX3N1cGVyLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtcclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwibWluXCIsIHRoaXMubWluKTtcclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwibWF4XCIsIHRoaXMubWF4KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIERhdGVJbnB1dC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbiwgZXJyb3JzKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wYXJzZS5jYWxsKHRoaXMsIGpzb24sIGVycm9ycyk7XHJcbiAgICAgICAgdGhpcy5taW4gPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1wibWluXCJdKTtcclxuICAgICAgICB0aGlzLm1heCA9IFV0aWxzLmdldFN0cmluZ1ZhbHVlKGpzb25bXCJtYXhcIl0pO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEYXRlSW5wdXQucHJvdG90eXBlLCBcIm1pblwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9taW47XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9taW4gPSB0aGlzLnBhcnNlSW5wdXRWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0ZUlucHV0LnByb3RvdHlwZSwgXCJtYXhcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWF4O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWF4ID0gdGhpcy5wYXJzZUlucHV0VmFsdWUodmFsdWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERhdGVJbnB1dC5wcm90b3R5cGUsIFwidmFsdWVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGF0ZUlucHV0RWxlbWVudCA/IHRoaXMuX2RhdGVJbnB1dEVsZW1lbnQudmFsdWUgOiBudWxsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIERhdGVJbnB1dDtcclxufShJbnB1dCkpO1xyXG5leHBvcnRzLkRhdGVJbnB1dCA9IERhdGVJbnB1dDtcclxudmFyIFRpbWVJbnB1dCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhUaW1lSW5wdXQsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBUaW1lSW5wdXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgVGltZUlucHV0LnByb3RvdHlwZS5pbnRlcm5hbFJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuX3RpbWVJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgdGhpcy5fdGltZUlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGltZVwiKTtcclxuICAgICAgICB0aGlzLl90aW1lSW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1pblwiLCB0aGlzLm1pbik7XHJcbiAgICAgICAgdGhpcy5fdGltZUlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtYXhcIiwgdGhpcy5tYXgpO1xyXG4gICAgICAgIHRoaXMuX3RpbWVJbnB1dEVsZW1lbnQuY2xhc3NOYW1lID0gdGhpcy5ob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1pbnB1dFwiLCBcImFjLXRpbWVJbnB1dFwiKTtcclxuICAgICAgICB0aGlzLl90aW1lSW5wdXRFbGVtZW50LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgICAgICAgdGhpcy5fdGltZUlucHV0RWxlbWVudC5vbmlucHV0ID0gZnVuY3Rpb24gKCkgeyBfdGhpcy52YWx1ZUNoYW5nZWQoKTsgfTtcclxuICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy5kZWZhdWx0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RpbWVJbnB1dEVsZW1lbnQudmFsdWUgPSB0aGlzLmRlZmF1bHRWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RpbWVJbnB1dEVsZW1lbnQ7XHJcbiAgICB9O1xyXG4gICAgVGltZUlucHV0LnByb3RvdHlwZS5wYXJzZUlucHV0VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICBpZiAoL15bMC05XXsyfTpbMC05XXsyfSQvLnRlc3QodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUaW1lSW5wdXQucHJvdG90eXBlLmdldEpzb25UeXBlTmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gXCJJbnB1dC5UaW1lXCI7XHJcbiAgICB9O1xyXG4gICAgVGltZUlucHV0LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcIm1pblwiLCB0aGlzLm1pbik7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcIm1heFwiLCB0aGlzLm1heCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBUaW1lSW5wdXQucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGpzb24sIGVycm9ycykge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucGFyc2UuY2FsbCh0aGlzLCBqc29uLCBlcnJvcnMpO1xyXG4gICAgICAgIHRoaXMubWluID0gVXRpbHMuZ2V0U3RyaW5nVmFsdWUoanNvbltcIm1pblwiXSk7XHJcbiAgICAgICAgdGhpcy5tYXggPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1wibWF4XCJdKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGltZUlucHV0LnByb3RvdHlwZSwgXCJtaW5cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWluO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWluID0gdGhpcy5wYXJzZUlucHV0VmFsdWUodmFsdWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRpbWVJbnB1dC5wcm90b3R5cGUsIFwibWF4XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21heDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21heCA9IHRoaXMucGFyc2VJbnB1dFZhbHVlKHZhbHVlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUaW1lSW5wdXQucHJvdG90eXBlLCBcInZhbHVlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RpbWVJbnB1dEVsZW1lbnQgPyB0aGlzLl90aW1lSW5wdXRFbGVtZW50LnZhbHVlIDogbnVsbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBUaW1lSW5wdXQ7XHJcbn0oSW5wdXQpKTtcclxuZXhwb3J0cy5UaW1lSW5wdXQgPSBUaW1lSW5wdXQ7XHJcbnZhciBBY3Rpb25CdXR0b25TdGF0ZTtcclxuKGZ1bmN0aW9uIChBY3Rpb25CdXR0b25TdGF0ZSkge1xyXG4gICAgQWN0aW9uQnV0dG9uU3RhdGVbQWN0aW9uQnV0dG9uU3RhdGVbXCJOb3JtYWxcIl0gPSAwXSA9IFwiTm9ybWFsXCI7XHJcbiAgICBBY3Rpb25CdXR0b25TdGF0ZVtBY3Rpb25CdXR0b25TdGF0ZVtcIkV4cGFuZGVkXCJdID0gMV0gPSBcIkV4cGFuZGVkXCI7XHJcbiAgICBBY3Rpb25CdXR0b25TdGF0ZVtBY3Rpb25CdXR0b25TdGF0ZVtcIlN1YmR1ZWRcIl0gPSAyXSA9IFwiU3ViZHVlZFwiO1xyXG59KShBY3Rpb25CdXR0b25TdGF0ZSB8fCAoQWN0aW9uQnV0dG9uU3RhdGUgPSB7fSkpO1xyXG52YXIgQWN0aW9uQnV0dG9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQWN0aW9uQnV0dG9uKGFjdGlvbiwgcGFyZW50Q29udGFpbmVyU3R5bGUpIHtcclxuICAgICAgICB0aGlzLl9zdGF0ZSA9IEFjdGlvbkJ1dHRvblN0YXRlLk5vcm1hbDtcclxuICAgICAgICB0aGlzLm9uQ2xpY2sgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYWN0aW9uID0gYWN0aW9uO1xyXG4gICAgICAgIHRoaXMuX3BhcmVudENvbnRhaW5lclN0eWxlID0gcGFyZW50Q29udGFpbmVyU3R5bGU7XHJcbiAgICB9XHJcbiAgICBBY3Rpb25CdXR0b24ucHJvdG90eXBlLnVwZGF0ZUNzc1N0eWxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgdmFyIGhvc3RDb25maWcgPSB0aGlzLmFjdGlvbi5wYXJlbnQuaG9zdENvbmZpZztcclxuICAgICAgICB0aGlzLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQuY2xhc3NOYW1lID0gaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtcHVzaEJ1dHRvblwiKTtcclxuICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy5fcGFyZW50Q29udGFpbmVyU3R5bGUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uLnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwic3R5bGUtXCIgKyB0aGlzLl9wYXJlbnRDb250YWluZXJTdHlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmFjdGlvbiBpbnN0YW5jZW9mIFNob3dDYXJkQWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uLnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImV4cGFuZGFibGVcIikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJleHBhbmRlZFwiKSk7XHJcbiAgICAgICAgdGhpcy5hY3Rpb24ucmVuZGVyZWRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwic3ViZHVlZFwiKSk7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLl9zdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIEFjdGlvbkJ1dHRvblN0YXRlLkV4cGFuZGVkOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb24ucmVuZGVyZWRFbGVtZW50LmNsYXNzTGlzdC5hZGQoaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiZXhwYW5kZWRcIikpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQWN0aW9uQnV0dG9uU3RhdGUuU3ViZHVlZDpcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uLnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QuYWRkKGhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcInN1YmR1ZWRcIikpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghVXRpbHMuaXNOdWxsT3JFbXB0eSh0aGlzLmFjdGlvbi5zdHlsZSkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aW9uLnN0eWxlID09PSBFbnVtcy5BY3Rpb25TdHlsZS5Qb3NpdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgKF9hID0gdGhpcy5hY3Rpb24ucmVuZGVyZWRFbGVtZW50LmNsYXNzTGlzdCkuYWRkLmFwcGx5KF9hLCBob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWVzKFwicHJpbWFyeVwiLCBcInN0eWxlLXBvc2l0aXZlXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIChfYiA9IHRoaXMuYWN0aW9uLnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QpLmFkZC5hcHBseShfYiwgaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lcyhcInN0eWxlLVwiICsgdGhpcy5hY3Rpb24uc3R5bGUudG9Mb3dlckNhc2UoKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEFjdGlvbkJ1dHRvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5hY3Rpb24ucmVuZGVyKCk7XHJcbiAgICAgICAgdGhpcy5hY3Rpb24ucmVuZGVyZWRFbGVtZW50Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgX3RoaXMuY2xpY2soKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudXBkYXRlQ3NzU3R5bGUoKTtcclxuICAgIH07XHJcbiAgICBBY3Rpb25CdXR0b24ucHJvdG90eXBlLmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9uQ2xpY2sgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2xpY2sodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBY3Rpb25CdXR0b24ucHJvdG90eXBlLCBcInN0YXRlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fc3RhdGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVDc3NTdHlsZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIEFjdGlvbkJ1dHRvbjtcclxufSgpKTtcclxudmFyIEFjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhBY3Rpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBBY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuX3Nob3VsZEZhbGxiYWNrID0gZmFsc2U7XHJcbiAgICAgICAgX3RoaXMuX3BhcmVudCA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMuX2FjdGlvbkNvbGxlY3Rpb24gPSBudWxsOyAvLyBob2xkIHRoZSByZWZlcmVuY2UgdG8gaXRzIGFjdGlvbiBjb2xsZWN0aW9uXHJcbiAgICAgICAgX3RoaXMuX3JlbmRlcmVkRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMucmVxdWlyZXMgPSBuZXcgSG9zdENvbmZpZy5Ib3N0Q2FwYWJpbGl0aWVzKCk7XHJcbiAgICAgICAgX3RoaXMuc3R5bGUgPSBFbnVtcy5BY3Rpb25TdHlsZS5EZWZhdWx0O1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEFjdGlvbi5wcm90b3R5cGUuc2V0Q29sbGVjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb25Db2xsZWN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5fYWN0aW9uQ29sbGVjdGlvbiA9IGFjdGlvbkNvbGxlY3Rpb247XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uLnByb3RvdHlwZS5hZGRDc3NDbGFzc2VzID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAvLyBEbyBub3RoaW5nIGluIGJhc2UgaW1wbGVtZW50YXRpb25cclxuICAgIH07XHJcbiAgICBBY3Rpb24ucHJvdG90eXBlLmludGVybmFsR2V0UmVmZXJlbmNlZElucHV0cyA9IGZ1bmN0aW9uIChhbGxJbnB1dHMpIHtcclxuICAgICAgICByZXR1cm4ge307XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uLnByb3RvdHlwZS5pbnRlcm5hbFByZXBhcmVGb3JFeGVjdXRpb24gPSBmdW5jdGlvbiAoaW5wdXRzKSB7XHJcbiAgICAgICAgLy8gRG8gbm90aGluZyBpbiBiYXNlIGltcGxlbWVudGF0aW9uXHJcbiAgICB9O1xyXG4gICAgQWN0aW9uLnByb3RvdHlwZS5pbnRlcm5hbFZhbGlkYXRlSW5wdXRzID0gZnVuY3Rpb24gKHJlZmVyZW5jZWRJbnB1dHMpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgaWYgKEFkYXB0aXZlQ2FyZC51c2VCdWlsdEluSW5wdXRWYWxpZGF0aW9uICYmICF0aGlzLmlnbm9yZUlucHV0VmFsaWRhdGlvbikge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMocmVmZXJlbmNlZElucHV0cyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gcmVmZXJlbmNlZElucHV0c1trZXldO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC52YWxpZGF0ZVZhbHVlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBBY3Rpb24ucHJvdG90eXBlLmdldEhyZWYgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcInR5cGVcIiwgdGhpcy5nZXRKc29uVHlwZU5hbWUoKSk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcInRpdGxlXCIsIHRoaXMudGl0bGUpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJpY29uVXJsXCIsIHRoaXMuaWNvblVybCk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcInN0eWxlXCIsIHRoaXMuc3R5bGUsIEVudW1zLkFjdGlvblN0eWxlLkRlZmF1bHQpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoYmFzZUNzc0NsYXNzKSB7XHJcbiAgICAgICAgaWYgKGJhc2VDc3NDbGFzcyA9PT0gdm9pZCAwKSB7IGJhc2VDc3NDbGFzcyA9IFwiYWMtcHVzaEJ1dHRvblwiOyB9XHJcbiAgICAgICAgLy8gQ2FjaGUgaG9zdENvbmZpZyBmb3IgcGVyZlxyXG4gICAgICAgIHZhciBob3N0Q29uZmlnID0gdGhpcy5wYXJlbnQuaG9zdENvbmZpZztcclxuICAgICAgICB2YXIgYnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgdGhpcy5hZGRDc3NDbGFzc2VzKGJ1dHRvbkVsZW1lbnQpO1xyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCB0aGlzLnRpdGxlKTtcclxuICAgICAgICBidXR0b25FbGVtZW50LnR5cGUgPSBcImJ1dHRvblwiO1xyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgYnV0dG9uRWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgdmFyIGhhc1RpdGxlID0gIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy50aXRsZSk7XHJcbiAgICAgICAgdmFyIHRpdGxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGl0bGVFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICB0aXRsZUVsZW1lbnQuc3R5bGUudGV4dE92ZXJmbG93ID0gXCJlbGxpcHNpc1wiO1xyXG4gICAgICAgIGlmICghKGhvc3RDb25maWcuYWN0aW9ucy5pY29uUGxhY2VtZW50ID09IEVudW1zLkFjdGlvbkljb25QbGFjZW1lbnQuQWJvdmVUaXRsZSB8fCBob3N0Q29uZmlnLmFjdGlvbnMuYWxsb3dUaXRsZVRvV3JhcCkpIHtcclxuICAgICAgICAgICAgdGl0bGVFbGVtZW50LnN0eWxlLndoaXRlU3BhY2UgPSBcIm5vd3JhcFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaGFzVGl0bGUpIHtcclxuICAgICAgICAgICAgdGl0bGVFbGVtZW50LmlubmVyVGV4dCA9IHRoaXMudGl0bGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChVdGlscy5pc051bGxPckVtcHR5KHRoaXMuaWNvblVybCkpIHtcclxuICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibm9JY29uXCIpO1xyXG4gICAgICAgICAgICBidXR0b25FbGVtZW50LmFwcGVuZENoaWxkKHRpdGxlRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgaWNvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgICAgICBpY29uRWxlbWVudC5zcmMgPSB0aGlzLmljb25Vcmw7XHJcbiAgICAgICAgICAgIGljb25FbGVtZW50LnN0eWxlLndpZHRoID0gaG9zdENvbmZpZy5hY3Rpb25zLmljb25TaXplICsgXCJweFwiO1xyXG4gICAgICAgICAgICBpY29uRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBob3N0Q29uZmlnLmFjdGlvbnMuaWNvblNpemUgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIGljb25FbGVtZW50LnN0eWxlLmZsZXggPSBcIjAgMCBhdXRvXCI7XHJcbiAgICAgICAgICAgIGlmIChob3N0Q29uZmlnLmFjdGlvbnMuaWNvblBsYWNlbWVudCA9PSBFbnVtcy5BY3Rpb25JY29uUGxhY2VtZW50LkFib3ZlVGl0bGUpIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImljb25BYm92ZVwiKTtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuc3R5bGUuZmxleERpcmVjdGlvbiA9IFwiY29sdW1uXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzVGl0bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpY29uRWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjRweFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaWNvbkxlZnRcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzVGl0bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpY29uRWxlbWVudC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiNHB4XCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5hcHBlbmRDaGlsZChpY29uRWxlbWVudCk7XHJcbiAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGl0bGVFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRFbGVtZW50ID0gYnV0dG9uRWxlbWVudDtcclxuICAgIH07XHJcbiAgICBBY3Rpb24ucHJvdG90eXBlLnNldFBhcmVudCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3BhcmVudCA9IHZhbHVlO1xyXG4gICAgfTtcclxuICAgIEFjdGlvbi5wcm90b3R5cGUuZXhlY3V0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5vbkV4ZWN1dGUpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkV4ZWN1dGUodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJhaXNlRXhlY3V0ZUFjdGlvbkV2ZW50KHRoaXMpO1xyXG4gICAgfTtcclxuICAgIEFjdGlvbi5wcm90b3R5cGUucHJlcGFyZUZvckV4ZWN1dGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVmZXJlbmNlZElucHV0cyA9IHRoaXMuZ2V0UmVmZXJlbmNlZElucHV0cygpO1xyXG4gICAgICAgIGlmICh0aGlzLmludGVybmFsVmFsaWRhdGVJbnB1dHMocmVmZXJlbmNlZElucHV0cykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxQcmVwYXJlRm9yRXhlY3V0aW9uKHJlZmVyZW5jZWRJbnB1dHMpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIDtcclxuICAgIEFjdGlvbi5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbiwgZXJyb3JzKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wYXJzZS5jYWxsKHRoaXMsIGpzb24sIGVycm9ycyk7XHJcbiAgICAgICAgcmFpc2VQYXJzZUFjdGlvbkV2ZW50KHRoaXMsIGpzb24sIGVycm9ycyk7XHJcbiAgICAgICAgdGhpcy5yZXF1aXJlcy5wYXJzZShqc29uW1wicmVxdWlyZXNcIl0sIGVycm9ycyk7XHJcbiAgICAgICAgaWYgKCFqc29uW1widGl0bGVcIl0gJiYganNvbltcInRpdGxlXCJdICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIHJhaXNlUGFyc2VFcnJvcih7XHJcbiAgICAgICAgICAgICAgICBlcnJvcjogRW51bXMuVmFsaWRhdGlvbkVycm9yLlByb3BlcnR5Q2FudEJlTnVsbCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQWN0aW9ucyBzaG91bGQgYWx3YXlzIGhhdmUgYSB0aXRsZS5cIlxyXG4gICAgICAgICAgICB9LCBlcnJvcnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRpdGxlID0gVXRpbHMuZ2V0U3RyaW5nVmFsdWUoanNvbltcInRpdGxlXCJdKTtcclxuICAgICAgICB0aGlzLmljb25VcmwgPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1wiaWNvblVybFwiXSk7XHJcbiAgICAgICAgdGhpcy5zdHlsZSA9IFV0aWxzLmdldFN0cmluZ1ZhbHVlKGpzb25bXCJzdHlsZVwiXSwgdGhpcy5zdHlsZSk7XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24ucmVtb3ZlQWN0aW9uKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uLnByb3RvdHlwZS5nZXRBbGxJbnB1dHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfTtcclxuICAgIEFjdGlvbi5wcm90b3R5cGUuZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy5pY29uVXJsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gW3sgdXJsOiB0aGlzLmljb25VcmwsIG1pbWVUeXBlOiBcImltYWdlXCIgfV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEFjdGlvbi5wcm90b3R5cGUuZ2V0QWN0aW9uQnlJZCA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlkID09IGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBBY3Rpb24ucHJvdG90eXBlLmdldFJlZmVyZW5jZWRJbnB1dHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxHZXRSZWZlcmVuY2VkSW5wdXRzKHRoaXMucGFyZW50LmdldFJvb3RFbGVtZW50KCkuZ2V0QWxsSW5wdXRzKCkpO1xyXG4gICAgfTtcclxuICAgIEFjdGlvbi5wcm90b3R5cGUudmFsaWRhdGVJbnB1dHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWxpZGF0ZUlucHV0cyh0aGlzLmdldFJlZmVyZW5jZWRJbnB1dHMoKSk7XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uLnByb3RvdHlwZS5zaG91bGRGYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2hvdWxkRmFsbGJhY2sgfHwgIXRoaXMucmVxdWlyZXMuYXJlQWxsTWV0KHRoaXMucGFyZW50Lmhvc3RDb25maWcuaG9zdENhcGFiaWxpdGllcyk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFjdGlvbi5wcm90b3R5cGUsIFwiaXNQcmltYXJ5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3R5bGUgPT0gRW51bXMuQWN0aW9uU3R5bGUuUG9zaXRpdmU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUgPSBFbnVtcy5BY3Rpb25TdHlsZS5Qb3NpdGl2ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0eWxlID09IEVudW1zLkFjdGlvblN0eWxlLlBvc2l0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHlsZSA9IEVudW1zLkFjdGlvblN0eWxlLkRlZmF1bHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBY3Rpb24ucHJvdG90eXBlLCBcImlnbm9yZUlucHV0VmFsaWRhdGlvblwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFjdGlvbi5wcm90b3R5cGUsIFwicGFyZW50XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBY3Rpb24ucHJvdG90eXBlLCBcInJlbmRlcmVkRWxlbWVudFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlZEVsZW1lbnQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gQWN0aW9uO1xyXG59KENhcmRPYmplY3QpKTtcclxuZXhwb3J0cy5BY3Rpb24gPSBBY3Rpb247XHJcbnZhciBTdWJtaXRBY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoU3VibWl0QWN0aW9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU3VibWl0QWN0aW9uKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLl9pc1ByZXBhcmVkID0gZmFsc2U7XHJcbiAgICAgICAgX3RoaXMuX2lnbm9yZUlucHV0VmFsaWRhdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFN1Ym1pdEFjdGlvbi5wcm90b3R5cGUuaW50ZXJuYWxHZXRSZWZlcmVuY2VkSW5wdXRzID0gZnVuY3Rpb24gKGFsbElucHV0cykge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGFsbElucHV0c18xID0gYWxsSW5wdXRzOyBfaSA8IGFsbElucHV0c18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBhbGxJbnB1dHNfMVtfaV07XHJcbiAgICAgICAgICAgIHJlc3VsdFtpbnB1dC5pZF0gPSBpbnB1dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBTdWJtaXRBY3Rpb24ucHJvdG90eXBlLmludGVybmFsUHJlcGFyZUZvckV4ZWN1dGlvbiA9IGZ1bmN0aW9uIChpbnB1dHMpIHtcclxuICAgICAgICBpZiAodGhpcy5fb3JpZ2luYWxEYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NlZERhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuX29yaWdpbmFsRGF0YSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fcHJvY2Vzc2VkRGF0YSA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMoaW5wdXRzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IF9hW19pXTtcclxuICAgICAgICAgICAgdmFyIGlucHV0ID0gaW5wdXRzW2tleV07XHJcbiAgICAgICAgICAgIGlmIChpbnB1dC52YWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzZWREYXRhW2lucHV0LmlkXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2lzUHJlcGFyZWQgPSB0cnVlO1xyXG4gICAgfTtcclxuICAgIFN1Ym1pdEFjdGlvbi5wcm90b3R5cGUuZ2V0SnNvblR5cGVOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBTdWJtaXRBY3Rpb24uSnNvblR5cGVOYW1lO1xyXG4gICAgfTtcclxuICAgIFN1Ym1pdEFjdGlvbi5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBfc3VwZXIucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJpZ25vcmVJbnB1dFZhbGlkYXRpb25cIiwgdGhpcy5pZ25vcmVJbnB1dFZhbGlkYXRpb24sIGZhbHNlKTtcclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwiZGF0YVwiLCB0aGlzLl9vcmlnaW5hbERhdGEpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgU3VibWl0QWN0aW9uLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChqc29uLCBlcnJvcnMpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnBhcnNlLmNhbGwodGhpcywganNvbiwgZXJyb3JzKTtcclxuICAgICAgICB0aGlzLl9pZ25vcmVJbnB1dFZhbGlkYXRpb24gPSBVdGlscy5nZXRCb29sVmFsdWUoanNvbltcImlnbm9yZUlucHV0VmFsaWRhdGlvblwiXSwgdGhpcy5faWdub3JlSW5wdXRWYWxpZGF0aW9uKTtcclxuICAgICAgICB0aGlzLmRhdGEgPSBqc29uW1wiZGF0YVwiXTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VibWl0QWN0aW9uLnByb3RvdHlwZSwgXCJpZ25vcmVJbnB1dFZhbGlkYXRpb25cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faWdub3JlSW5wdXRWYWxpZGF0aW9uO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5faWdub3JlSW5wdXRWYWxpZGF0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3VibWl0QWN0aW9uLnByb3RvdHlwZSwgXCJkYXRhXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzUHJlcGFyZWQgPyB0aGlzLl9wcm9jZXNzZWREYXRhIDogdGhpcy5fb3JpZ2luYWxEYXRhO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fb3JpZ2luYWxEYXRhID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzUHJlcGFyZWQgPSBmYWxzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8vIE5vdGUgdGhlIFwid2VpcmRcIiB3YXkgdGhpcyBmaWVsZCBpcyBkZWNsYXJlZCBpcyB0byB3b3JrIGFyb3VuZCBhIGJyZWFraW5nXHJcbiAgICAvLyBjaGFuZ2UgaW50cm9kdWNlZCBpbiBUUyAzLjEgd3J0IGQudHMgZ2VuZXJhdGlvbi4gRE8gTk9UIENIQU5HRVxyXG4gICAgU3VibWl0QWN0aW9uLkpzb25UeXBlTmFtZSA9IFwiQWN0aW9uLlN1Ym1pdFwiO1xyXG4gICAgcmV0dXJuIFN1Ym1pdEFjdGlvbjtcclxufShBY3Rpb24pKTtcclxuZXhwb3J0cy5TdWJtaXRBY3Rpb24gPSBTdWJtaXRBY3Rpb247XHJcbnZhciBPcGVuVXJsQWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKE9wZW5VcmxBY3Rpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBPcGVuVXJsQWN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIE9wZW5VcmxBY3Rpb24ucHJvdG90eXBlLmdldEpzb25UeXBlTmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gT3BlblVybEFjdGlvbi5Kc29uVHlwZU5hbWU7XHJcbiAgICB9O1xyXG4gICAgT3BlblVybEFjdGlvbi5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBfc3VwZXIucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJ1cmxcIiwgdGhpcy51cmwpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgT3BlblVybEFjdGlvbi5wcm90b3R5cGUuaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMgPSBmdW5jdGlvbiAoY29udGV4dCkge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMuY2FsbCh0aGlzLCBjb250ZXh0KTtcclxuICAgICAgICBpZiAoVXRpbHMuaXNOdWxsT3JFbXB0eSh0aGlzLnVybCkpIHtcclxuICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKHRoaXMsIHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBFbnVtcy5WYWxpZGF0aW9uRXJyb3IuUHJvcGVydHlDYW50QmVOdWxsLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBbiBBY3Rpb24uT3BlblVybCBtdXN0IGhhdmUgaXRzIHVybCBwcm9wZXJ0eSBzZXQuXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9wZW5VcmxBY3Rpb24ucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGpzb24sIGVycm9ycykge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucGFyc2UuY2FsbCh0aGlzLCBqc29uLCBlcnJvcnMpO1xyXG4gICAgICAgIHRoaXMudXJsID0gVXRpbHMuZ2V0U3RyaW5nVmFsdWUoanNvbltcInVybFwiXSk7XHJcbiAgICB9O1xyXG4gICAgT3BlblVybEFjdGlvbi5wcm90b3R5cGUuZ2V0SHJlZiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy51cmw7XHJcbiAgICB9O1xyXG4gICAgLy8gTm90ZSB0aGUgXCJ3ZWlyZFwiIHdheSB0aGlzIGZpZWxkIGlzIGRlY2xhcmVkIGlzIHRvIHdvcmsgYXJvdW5kIGEgYnJlYWtpbmdcclxuICAgIC8vIGNoYW5nZSBpbnRyb2R1Y2VkIGluIFRTIDMuMSB3cnQgZC50cyBnZW5lcmF0aW9uLiBETyBOT1QgQ0hBTkdFXHJcbiAgICBPcGVuVXJsQWN0aW9uLkpzb25UeXBlTmFtZSA9IFwiQWN0aW9uLk9wZW5VcmxcIjtcclxuICAgIHJldHVybiBPcGVuVXJsQWN0aW9uO1xyXG59KEFjdGlvbikpO1xyXG5leHBvcnRzLk9wZW5VcmxBY3Rpb24gPSBPcGVuVXJsQWN0aW9uO1xyXG52YXIgVG9nZ2xlVmlzaWJpbGl0eUFjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhUb2dnbGVWaXNpYmlsaXR5QWN0aW9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVG9nZ2xlVmlzaWJpbGl0eUFjdGlvbigpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy50YXJnZXRFbGVtZW50cyA9IHt9O1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFRvZ2dsZVZpc2liaWxpdHlBY3Rpb24ucHJvdG90eXBlLmdldEpzb25UeXBlTmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gVG9nZ2xlVmlzaWJpbGl0eUFjdGlvbi5Kc29uVHlwZU5hbWU7XHJcbiAgICB9O1xyXG4gICAgVG9nZ2xlVmlzaWJpbGl0eUFjdGlvbi5wcm90b3R5cGUuZXhlY3V0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXModGhpcy50YXJnZXRFbGVtZW50cyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50SWQgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRFbGVtZW50ID0gdGhpcy5wYXJlbnQuZ2V0Um9vdEVsZW1lbnQoKS5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnRhcmdldEVsZW1lbnRzW2VsZW1lbnRJZF0gPT09IFwiYm9vbGVhblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5pc1Zpc2libGUgPSB0aGlzLnRhcmdldEVsZW1lbnRzW2VsZW1lbnRJZF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50LmlzVmlzaWJsZSA9ICF0YXJnZXRFbGVtZW50LmlzVmlzaWJsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUb2dnbGVWaXNpYmlsaXR5QWN0aW9uLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wYXJzZS5jYWxsKHRoaXMsIGpzb24pO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0RWxlbWVudHMgPSB7fTtcclxuICAgICAgICB2YXIganNvblRhcmdldEVsZW1lbnRzID0ganNvbltcInRhcmdldEVsZW1lbnRzXCJdO1xyXG4gICAgICAgIGlmIChqc29uVGFyZ2V0RWxlbWVudHMgJiYgQXJyYXkuaXNBcnJheShqc29uVGFyZ2V0RWxlbWVudHMpKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwganNvblRhcmdldEVsZW1lbnRzXzEgPSBqc29uVGFyZ2V0RWxlbWVudHM7IF9pIDwganNvblRhcmdldEVsZW1lbnRzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGpzb25UYXJnZXRFbGVtZW50c18xW19pXTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0RWxlbWVudHNbaXRlbV0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBqc29uRWxlbWVudElkID0gaXRlbVtcImVsZW1lbnRJZFwiXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoanNvbkVsZW1lbnRJZCAmJiB0eXBlb2YganNvbkVsZW1lbnRJZCA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldEVsZW1lbnRzW2pzb25FbGVtZW50SWRdID0gVXRpbHMuZ2V0Qm9vbFZhbHVlKGl0ZW1bXCJpc1Zpc2libGVcIl0sIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFRvZ2dsZVZpc2liaWxpdHlBY3Rpb24ucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gX3N1cGVyLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtcclxuICAgICAgICB2YXIgdGFyZ2V0RWxlbWVudHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXModGhpcy50YXJnZXRFbGVtZW50cyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBpZCA9IF9hW19pXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnRhcmdldEVsZW1lbnRzW2lkXSA9PT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRJZDogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNWaXNpYmxlOiB0aGlzLnRhcmdldEVsZW1lbnRzW2lkXVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50cy5wdXNoKGlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXN1bHRbXCJ0YXJnZXRFbGVtZW50c1wiXSA9IHRhcmdldEVsZW1lbnRzO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgVG9nZ2xlVmlzaWJpbGl0eUFjdGlvbi5wcm90b3R5cGUuYWRkVGFyZ2V0RWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50SWQsIGlzVmlzaWJsZSkge1xyXG4gICAgICAgIGlmIChpc1Zpc2libGUgPT09IHZvaWQgMCkgeyBpc1Zpc2libGUgPSB1bmRlZmluZWQ7IH1cclxuICAgICAgICB0aGlzLnRhcmdldEVsZW1lbnRzW2VsZW1lbnRJZF0gPSBpc1Zpc2libGU7XHJcbiAgICB9O1xyXG4gICAgVG9nZ2xlVmlzaWJpbGl0eUFjdGlvbi5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0RWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50SWQpIHtcclxuICAgICAgICBkZWxldGUgdGhpcy50YXJnZXRFbGVtZW50c1tlbGVtZW50SWRdO1xyXG4gICAgfTtcclxuICAgIC8vIE5vdGUgdGhlIFwid2VpcmRcIiB3YXkgdGhpcyBmaWVsZCBpcyBkZWNsYXJlZCBpcyB0byB3b3JrIGFyb3VuZCBhIGJyZWFraW5nXHJcbiAgICAvLyBjaGFuZ2UgaW50cm9kdWNlZCBpbiBUUyAzLjEgd3J0IGQudHMgZ2VuZXJhdGlvbi4gRE8gTk9UIENIQU5HRVxyXG4gICAgVG9nZ2xlVmlzaWJpbGl0eUFjdGlvbi5Kc29uVHlwZU5hbWUgPSBcIkFjdGlvbi5Ub2dnbGVWaXNpYmlsaXR5XCI7XHJcbiAgICByZXR1cm4gVG9nZ2xlVmlzaWJpbGl0eUFjdGlvbjtcclxufShBY3Rpb24pKTtcclxuZXhwb3J0cy5Ub2dnbGVWaXNpYmlsaXR5QWN0aW9uID0gVG9nZ2xlVmlzaWJpbGl0eUFjdGlvbjtcclxudmFyIEh0dHBIZWFkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoSHR0cEhlYWRlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEh0dHBIZWFkZXIobmFtZSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAobmFtZSA9PT0gdm9pZCAwKSB7IG5hbWUgPSBcIlwiOyB9XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHsgdmFsdWUgPSBcIlwiOyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5fdmFsdWUgPSBuZXcgU2hhcmVkLlN0cmluZ1dpdGhTdWJzdGl0dXRpb25zKCk7XHJcbiAgICAgICAgX3RoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgX3RoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBIdHRwSGVhZGVyLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wYXJzZS5jYWxsKHRoaXMsIGpzb24pO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IFV0aWxzLmdldFN0cmluZ1ZhbHVlKGpzb25bXCJuYW1lXCJdKTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gVXRpbHMuZ2V0U3RyaW5nVmFsdWUoanNvbltcInZhbHVlXCJdKTtcclxuICAgIH07XHJcbiAgICBIdHRwSGVhZGVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcIm5hbWVcIiwgdGhpcy5uYW1lKTtcclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwidmFsdWVcIiwgdGhpcy5fdmFsdWUuZ2V0T3JpZ2luYWwoKSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBIdHRwSGVhZGVyLnByb3RvdHlwZS5nZXRSZWZlcmVuY2VkSW5wdXRzID0gZnVuY3Rpb24gKGlucHV0cywgcmVmZXJlbmNlZElucHV0cykge1xyXG4gICAgICAgIHRoaXMuX3ZhbHVlLmdldFJlZmVyZW5jZWRJbnB1dHMoaW5wdXRzLCByZWZlcmVuY2VkSW5wdXRzKTtcclxuICAgIH07XHJcbiAgICBIdHRwSGVhZGVyLnByb3RvdHlwZS5wcmVwYXJlRm9yRXhlY3V0aW9uID0gZnVuY3Rpb24gKGlucHV0cykge1xyXG4gICAgICAgIHRoaXMuX3ZhbHVlLnN1YnN0aXR1dGVJbnB1dFZhbHVlcyhpbnB1dHMsIFNoYXJlZC5Db250ZW50VHlwZXMuYXBwbGljYXRpb25YV3d3Rm9ybVVybGVuY29kZWQpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShIdHRwSGVhZGVyLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl92YWx1ZS5nZXQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlLnNldChuZXdWYWx1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gSHR0cEhlYWRlcjtcclxufShTZXJpYWxpemFibGVPYmplY3QpKTtcclxuZXhwb3J0cy5IdHRwSGVhZGVyID0gSHR0cEhlYWRlcjtcclxudmFyIEh0dHBBY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoSHR0cEFjdGlvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEh0dHBBY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuX3VybCA9IG5ldyBTaGFyZWQuU3RyaW5nV2l0aFN1YnN0aXR1dGlvbnMoKTtcclxuICAgICAgICBfdGhpcy5fYm9keSA9IG5ldyBTaGFyZWQuU3RyaW5nV2l0aFN1YnN0aXR1dGlvbnMoKTtcclxuICAgICAgICBfdGhpcy5faGVhZGVycyA9IFtdO1xyXG4gICAgICAgIF90aGlzLl9pZ25vcmVJbnB1dFZhbGlkYXRpb24gPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBIdHRwQWN0aW9uLnByb3RvdHlwZS5pbnRlcm5hbEdldFJlZmVyZW5jZWRJbnB1dHMgPSBmdW5jdGlvbiAoYWxsSW5wdXRzKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgICAgIHRoaXMuX3VybC5nZXRSZWZlcmVuY2VkSW5wdXRzKGFsbElucHV0cywgcmVzdWx0KTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5faGVhZGVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGhlYWRlciA9IF9hW19pXTtcclxuICAgICAgICAgICAgaGVhZGVyLmdldFJlZmVyZW5jZWRJbnB1dHMoYWxsSW5wdXRzLCByZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9ib2R5LmdldFJlZmVyZW5jZWRJbnB1dHMoYWxsSW5wdXRzLCByZXN1bHQpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgSHR0cEFjdGlvbi5wcm90b3R5cGUuaW50ZXJuYWxQcmVwYXJlRm9yRXhlY3V0aW9uID0gZnVuY3Rpb24gKGlucHV0cykge1xyXG4gICAgICAgIHRoaXMuX3VybC5zdWJzdGl0dXRlSW5wdXRWYWx1ZXMoaW5wdXRzLCBTaGFyZWQuQ29udGVudFR5cGVzLmFwcGxpY2F0aW9uWFd3d0Zvcm1VcmxlbmNvZGVkKTtcclxuICAgICAgICB2YXIgY29udGVudFR5cGUgPSBTaGFyZWQuQ29udGVudFR5cGVzLmFwcGxpY2F0aW9uSnNvbjtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5faGVhZGVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGhlYWRlciA9IF9hW19pXTtcclxuICAgICAgICAgICAgaGVhZGVyLnByZXBhcmVGb3JFeGVjdXRpb24oaW5wdXRzKTtcclxuICAgICAgICAgICAgaWYgKGhlYWRlci5uYW1lICYmIGhlYWRlci5uYW1lLnRvTG93ZXJDYXNlKCkgPT0gXCJjb250ZW50LXR5cGVcIikge1xyXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGUgPSBoZWFkZXIudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fYm9keS5zdWJzdGl0dXRlSW5wdXRWYWx1ZXMoaW5wdXRzLCBjb250ZW50VHlwZSk7XHJcbiAgICB9O1xyXG4gICAgO1xyXG4gICAgSHR0cEFjdGlvbi5wcm90b3R5cGUuZ2V0SnNvblR5cGVOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBIdHRwQWN0aW9uLkpzb25UeXBlTmFtZTtcclxuICAgIH07XHJcbiAgICBIdHRwQWN0aW9uLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcIm1ldGhvZFwiLCB0aGlzLm1ldGhvZCk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcInVybFwiLCB0aGlzLl91cmwuZ2V0T3JpZ2luYWwoKSk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcImJvZHlcIiwgdGhpcy5fYm9keS5nZXRPcmlnaW5hbCgpKTtcclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwiaWdub3JlSW5wdXRWYWxpZGF0aW9uXCIsIHRoaXMuaWdub3JlSW5wdXRWYWxpZGF0aW9uLCBmYWxzZSk7XHJcbiAgICAgICAgVXRpbHMuc2V0QXJyYXlQcm9wZXJ0eShyZXN1bHQsIFwiaGVhZGVyc1wiLCB0aGlzLmhlYWRlcnMpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgSHR0cEFjdGlvbi5wcm90b3R5cGUuaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMgPSBmdW5jdGlvbiAoY29udGV4dCkge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMuY2FsbCh0aGlzLCBjb250ZXh0KTtcclxuICAgICAgICBpZiAoVXRpbHMuaXNOdWxsT3JFbXB0eSh0aGlzLnVybCkpIHtcclxuICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKHRoaXMsIHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBFbnVtcy5WYWxpZGF0aW9uRXJyb3IuUHJvcGVydHlDYW50QmVOdWxsLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBbiBBY3Rpb24uSHR0cCBtdXN0IGhhdmUgaXRzIHVybCBwcm9wZXJ0eSBzZXQuXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmhlYWRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5oZWFkZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlciA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGlmICghaGVhZGVyLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUodGhpcywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogRW51bXMuVmFsaWRhdGlvbkVycm9yLlByb3BlcnR5Q2FudEJlTnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBbGwgaGVhZGVycyBvZiBhbiBBY3Rpb24uSHR0cCBtdXN0IGhhdmUgdGhlaXIgbmFtZSBhbmQgdmFsdWUgcHJvcGVydGllcyBzZXQuXCJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBIdHRwQWN0aW9uLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChqc29uLCBlcnJvcnMpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnBhcnNlLmNhbGwodGhpcywganNvbiwgZXJyb3JzKTtcclxuICAgICAgICB0aGlzLnVybCA9IFV0aWxzLmdldFN0cmluZ1ZhbHVlKGpzb25bXCJ1cmxcIl0pO1xyXG4gICAgICAgIHRoaXMubWV0aG9kID0gVXRpbHMuZ2V0U3RyaW5nVmFsdWUoanNvbltcIm1ldGhvZFwiXSk7XHJcbiAgICAgICAgdGhpcy5ib2R5ID0gVXRpbHMuZ2V0U3RyaW5nVmFsdWUoanNvbltcImJvZHlcIl0pO1xyXG4gICAgICAgIHRoaXMuX2lnbm9yZUlucHV0VmFsaWRhdGlvbiA9IFV0aWxzLmdldEJvb2xWYWx1ZShqc29uW1wiaWdub3JlSW5wdXRWYWxpZGF0aW9uXCJdLCB0aGlzLl9pZ25vcmVJbnB1dFZhbGlkYXRpb24pO1xyXG4gICAgICAgIHRoaXMuX2hlYWRlcnMgPSBbXTtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShqc29uW1wiaGVhZGVyc1wiXSkpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGpzb25bXCJoZWFkZXJzXCJdOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGpzb25IZWFkZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgaHR0cEhlYWRlciA9IG5ldyBIdHRwSGVhZGVyKCk7XHJcbiAgICAgICAgICAgICAgICBodHRwSGVhZGVyLnBhcnNlKGpzb25IZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJzLnB1c2goaHR0cEhlYWRlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEh0dHBBY3Rpb24ucHJvdG90eXBlLCBcImlnbm9yZUlucHV0VmFsaWRhdGlvblwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pZ25vcmVJbnB1dFZhbGlkYXRpb247XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9pZ25vcmVJbnB1dFZhbGlkYXRpb24gPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShIdHRwQWN0aW9uLnByb3RvdHlwZSwgXCJ1cmxcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXJsLmdldCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fdXJsLnNldCh2YWx1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSHR0cEFjdGlvbi5wcm90b3R5cGUsIFwiYm9keVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9ib2R5LmdldCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fYm9keS5zZXQodmFsdWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEh0dHBBY3Rpb24ucHJvdG90eXBlLCBcImhlYWRlcnNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faGVhZGVycyA/IHRoaXMuX2hlYWRlcnMgOiBbXTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYWRlcnMgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8vIE5vdGUgdGhlIFwid2VpcmRcIiB3YXkgdGhpcyBmaWVsZCBpcyBkZWNsYXJlZCBpcyB0byB3b3JrIGFyb3VuZCBhIGJyZWFraW5nXHJcbiAgICAvLyBjaGFuZ2UgaW50cm9kdWNlZCBpbiBUUyAzLjEgd3J0IGQudHMgZ2VuZXJhdGlvbi4gRE8gTk9UIENIQU5HRVxyXG4gICAgSHR0cEFjdGlvbi5Kc29uVHlwZU5hbWUgPSBcIkFjdGlvbi5IdHRwXCI7XHJcbiAgICByZXR1cm4gSHR0cEFjdGlvbjtcclxufShBY3Rpb24pKTtcclxuZXhwb3J0cy5IdHRwQWN0aW9uID0gSHR0cEFjdGlvbjtcclxudmFyIFNob3dDYXJkQWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFNob3dDYXJkQWN0aW9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU2hvd0NhcmRBY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY2FyZCA9IG5ldyBJbmxpbmVBZGFwdGl2ZUNhcmQoKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBTaG93Q2FyZEFjdGlvbi5wcm90b3R5cGUuYWRkQ3NzQ2xhc3NlcyA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hZGRDc3NDbGFzc2VzLmNhbGwodGhpcywgZWxlbWVudCk7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMucGFyZW50Lmhvc3RDb25maWcubWFrZUNzc0NsYXNzTmFtZShcImV4cGFuZGFibGVcIikpO1xyXG4gICAgfTtcclxuICAgIFNob3dDYXJkQWN0aW9uLnByb3RvdHlwZS5nZXRKc29uVHlwZU5hbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFNob3dDYXJkQWN0aW9uLkpzb25UeXBlTmFtZTtcclxuICAgIH07XHJcbiAgICBTaG93Q2FyZEFjdGlvbi5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBfc3VwZXIucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO1xyXG4gICAgICAgIGlmICh0aGlzLmNhcmQpIHtcclxuICAgICAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcImNhcmRcIiwgdGhpcy5jYXJkLnRvSlNPTigpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBTaG93Q2FyZEFjdGlvbi5wcm90b3R5cGUuaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMgPSBmdW5jdGlvbiAoY29udGV4dCkge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMuY2FsbCh0aGlzLCBjb250ZXh0KTtcclxuICAgICAgICB0aGlzLmNhcmQuaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMoY29udGV4dCk7XHJcbiAgICB9O1xyXG4gICAgU2hvd0NhcmRBY3Rpb24ucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGpzb24sIGVycm9ycykge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucGFyc2UuY2FsbCh0aGlzLCBqc29uLCBlcnJvcnMpO1xyXG4gICAgICAgIHZhciBqc29uQ2FyZCA9IGpzb25bXCJjYXJkXCJdO1xyXG4gICAgICAgIGlmIChqc29uQ2FyZCkge1xyXG4gICAgICAgICAgICB0aGlzLmNhcmQucGFyc2UoanNvbkNhcmQsIGVycm9ycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByYWlzZVBhcnNlRXJyb3Ioe1xyXG4gICAgICAgICAgICAgICAgZXJyb3I6IEVudW1zLlZhbGlkYXRpb25FcnJvci5Qcm9wZXJ0eUNhbnRCZU51bGwsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkFuIEFjdGlvbi5TaG93Q2FyZCBtdXN0IGhhdmUgaXRzIFxcXCJjYXJkXFxcIiBwcm9wZXJ0eSBzZXQgdG8gYSB2YWxpZCBBZGFwdGl2ZUNhcmQgb2JqZWN0LlwiXHJcbiAgICAgICAgICAgIH0sIGVycm9ycyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFNob3dDYXJkQWN0aW9uLnByb3RvdHlwZS5zZXRQYXJlbnQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnNldFBhcmVudC5jYWxsKHRoaXMsIHZhbHVlKTtcclxuICAgICAgICB0aGlzLmNhcmQuc2V0UGFyZW50KHZhbHVlKTtcclxuICAgIH07XHJcbiAgICBTaG93Q2FyZEFjdGlvbi5wcm90b3R5cGUuZ2V0QWxsSW5wdXRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhcmQuZ2V0QWxsSW5wdXRzKCk7XHJcbiAgICB9O1xyXG4gICAgU2hvd0NhcmRBY3Rpb24ucHJvdG90eXBlLmdldFJlc291cmNlSW5mb3JtYXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbi5jYWxsKHRoaXMpLmNvbmNhdCh0aGlzLmNhcmQuZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbigpKTtcclxuICAgIH07XHJcbiAgICBTaG93Q2FyZEFjdGlvbi5wcm90b3R5cGUuZ2V0QWN0aW9uQnlJZCA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBfc3VwZXIucHJvdG90eXBlLmdldEFjdGlvbkJ5SWQuY2FsbCh0aGlzLCBpZCk7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5jYXJkLmdldEFjdGlvbkJ5SWQoaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIC8vIE5vdGUgdGhlIFwid2VpcmRcIiB3YXkgdGhpcyBmaWVsZCBpcyBkZWNsYXJlZCBpcyB0byB3b3JrIGFyb3VuZCBhIGJyZWFraW5nXHJcbiAgICAvLyBjaGFuZ2UgaW50cm9kdWNlZCBpbiBUUyAzLjEgd3J0IGQudHMgZ2VuZXJhdGlvbi4gRE8gTk9UIENIQU5HRVxyXG4gICAgU2hvd0NhcmRBY3Rpb24uSnNvblR5cGVOYW1lID0gXCJBY3Rpb24uU2hvd0NhcmRcIjtcclxuICAgIHJldHVybiBTaG93Q2FyZEFjdGlvbjtcclxufShBY3Rpb24pKTtcclxuZXhwb3J0cy5TaG93Q2FyZEFjdGlvbiA9IFNob3dDYXJkQWN0aW9uO1xyXG52YXIgQWN0aW9uQ29sbGVjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFjdGlvbkNvbGxlY3Rpb24ob3duZXIpIHtcclxuICAgICAgICB0aGlzLl9leHBhbmRlZEFjdGlvbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRBY3Rpb25Db3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5fYWN0aW9uQ2FyZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuYnV0dG9ucyA9IFtdO1xyXG4gICAgICAgIHRoaXMuX293bmVyID0gb3duZXI7XHJcbiAgICB9XHJcbiAgICBBY3Rpb25Db2xsZWN0aW9uLnByb3RvdHlwZS5yZWZyZXNoQ29udGFpbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2FjdGlvbkNhcmRDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICBpZiAodGhpcy5fYWN0aW9uQ2FyZCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9hY3Rpb25DYXJkQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9IFwiMHB4XCI7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fYWN0aW9uQ2FyZENvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSB0aGlzLl9yZW5kZXJlZEFjdGlvbkNvdW50ID4gMCA/IHRoaXMuX293bmVyLmhvc3RDb25maWcuYWN0aW9ucy5zaG93Q2FyZC5pbmxpbmVUb3BNYXJnaW4gKyBcInB4XCIgOiBcIjBweFwiO1xyXG4gICAgICAgIHZhciBwYWRkaW5nID0gdGhpcy5fb3duZXIuZ2V0RWZmZWN0aXZlUGFkZGluZygpO1xyXG4gICAgICAgIHRoaXMuX293bmVyLmdldEltbWVkaWF0ZVN1cnJvdW5kaW5nUGFkZGluZyhwYWRkaW5nKTtcclxuICAgICAgICB2YXIgcGh5c2ljYWxQYWRkaW5nID0gdGhpcy5fb3duZXIuaG9zdENvbmZpZy5wYWRkaW5nRGVmaW5pdGlvblRvU3BhY2luZ0RlZmluaXRpb24ocGFkZGluZyk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2FjdGlvbkNhcmQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5fYWN0aW9uQ2FyZC5zdHlsZS5wYWRkaW5nTGVmdCA9IHBoeXNpY2FsUGFkZGluZy5sZWZ0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICB0aGlzLl9hY3Rpb25DYXJkLnN0eWxlLnBhZGRpbmdSaWdodCA9IHBoeXNpY2FsUGFkZGluZy5yaWdodCArIFwicHhcIjtcclxuICAgICAgICAgICAgdGhpcy5fYWN0aW9uQ2FyZC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCItXCIgKyBwaHlzaWNhbFBhZGRpbmcubGVmdCArIFwicHhcIjtcclxuICAgICAgICAgICAgdGhpcy5fYWN0aW9uQ2FyZC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiLVwiICsgcGh5c2ljYWxQYWRkaW5nLnJpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICBpZiAocGh5c2ljYWxQYWRkaW5nLmJvdHRvbSAhPSAwICYmICF0aGlzLl9vd25lci5pc0Rlc2lnbk1vZGUoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYWN0aW9uQ2FyZC5zdHlsZS5wYWRkaW5nQm90dG9tID0gcGh5c2ljYWxQYWRkaW5nLmJvdHRvbSArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNhcmQuc3R5bGUubWFyZ2luQm90dG9tID0gXCItXCIgKyBwaHlzaWNhbFBhZGRpbmcuYm90dG9tICsgXCJweFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKHRoaXMuX2FjdGlvbkNhcmRDb250YWluZXIsIHRoaXMuX2FjdGlvbkNhcmQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBBY3Rpb25Db2xsZWN0aW9uLnByb3RvdHlwZS5sYXlvdXRDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX293bmVyLmdldFJvb3RFbGVtZW50KCkudXBkYXRlTGF5b3V0KCk7XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uQ29sbGVjdGlvbi5wcm90b3R5cGUuaGlkZUFjdGlvbkNhcmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHByZXZpb3VzbHlFeHBhbmRlZEFjdGlvbiA9IHRoaXMuX2V4cGFuZGVkQWN0aW9uO1xyXG4gICAgICAgIHRoaXMuX2V4cGFuZGVkQWN0aW9uID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9hY3Rpb25DYXJkID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJlZnJlc2hDb250YWluZXIoKTtcclxuICAgICAgICBpZiAocHJldmlvdXNseUV4cGFuZGVkQWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGF5b3V0Q2hhbmdlZCgpO1xyXG4gICAgICAgICAgICByYWlzZUlubGluZUNhcmRFeHBhbmRlZEV2ZW50KHByZXZpb3VzbHlFeHBhbmRlZEFjdGlvbiwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBBY3Rpb25Db2xsZWN0aW9uLnByb3RvdHlwZS5zaG93QWN0aW9uQ2FyZCA9IGZ1bmN0aW9uIChhY3Rpb24sIHN1cHByZXNzU3R5bGUsIHJhaXNlRXZlbnQpIHtcclxuICAgICAgICBpZiAoc3VwcHJlc3NTdHlsZSA9PT0gdm9pZCAwKSB7IHN1cHByZXNzU3R5bGUgPSBmYWxzZTsgfVxyXG4gICAgICAgIGlmIChyYWlzZUV2ZW50ID09PSB2b2lkIDApIHsgcmFpc2VFdmVudCA9IHRydWU7IH1cclxuICAgICAgICBpZiAoYWN0aW9uLmNhcmQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFjdGlvbi5jYXJkLnN1cHByZXNzU3R5bGUgPSBzdXBwcmVzc1N0eWxlO1xyXG4gICAgICAgIHZhciByZW5kZXJlZENhcmQgPSBhY3Rpb24uY2FyZC5yZW5kZXJlZEVsZW1lbnQgPyBhY3Rpb24uY2FyZC5yZW5kZXJlZEVsZW1lbnQgOiBhY3Rpb24uY2FyZC5yZW5kZXIoKTtcclxuICAgICAgICB0aGlzLl9hY3Rpb25DYXJkID0gcmVuZGVyZWRDYXJkO1xyXG4gICAgICAgIHRoaXMuX2V4cGFuZGVkQWN0aW9uID0gYWN0aW9uO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaENvbnRhaW5lcigpO1xyXG4gICAgICAgIGlmIChyYWlzZUV2ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMubGF5b3V0Q2hhbmdlZCgpO1xyXG4gICAgICAgICAgICByYWlzZUlubGluZUNhcmRFeHBhbmRlZEV2ZW50KGFjdGlvbiwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEFjdGlvbkNvbGxlY3Rpb24ucHJvdG90eXBlLmNvbGxhcHNlRXhwYW5kZWRBY3Rpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5idXR0b25zW2ldLnN0YXRlID0gQWN0aW9uQnV0dG9uU3RhdGUuTm9ybWFsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhpZGVBY3Rpb25DYXJkKCk7XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uQ29sbGVjdGlvbi5wcm90b3R5cGUuZXhwYW5kU2hvd0NhcmRBY3Rpb24gPSBmdW5jdGlvbiAoYWN0aW9uLCByYWlzZUV2ZW50KSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYnV0dG9uc1tpXS5hY3Rpb24gIT09IGFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5idXR0b25zW2ldLnN0YXRlID0gQWN0aW9uQnV0dG9uU3RhdGUuU3ViZHVlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uc1tpXS5zdGF0ZSA9IEFjdGlvbkJ1dHRvblN0YXRlLkV4cGFuZGVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2hvd0FjdGlvbkNhcmQoYWN0aW9uLCAhKHRoaXMuX293bmVyLmlzQXRUaGVWZXJ5TGVmdCgpICYmIHRoaXMuX293bmVyLmlzQXRUaGVWZXJ5UmlnaHQoKSksIHJhaXNlRXZlbnQpO1xyXG4gICAgfTtcclxuICAgIEFjdGlvbkNvbGxlY3Rpb24ucHJvdG90eXBlLmFjdGlvbkNsaWNrZWQgPSBmdW5jdGlvbiAoYWN0aW9uQnV0dG9uKSB7XHJcbiAgICAgICAgaWYgKCEoYWN0aW9uQnV0dG9uLmFjdGlvbiBpbnN0YW5jZW9mIFNob3dDYXJkQWN0aW9uKSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYnV0dG9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5idXR0b25zW2ldLnN0YXRlID0gQWN0aW9uQnV0dG9uU3RhdGUuTm9ybWFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZUFjdGlvbkNhcmQoKTtcclxuICAgICAgICAgICAgYWN0aW9uQnV0dG9uLmFjdGlvbi5leGVjdXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIuaG9zdENvbmZpZy5hY3Rpb25zLnNob3dDYXJkLmFjdGlvbk1vZGUgPT09IEVudW1zLlNob3dDYXJkQWN0aW9uTW9kZS5Qb3B1cCkge1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9uLmFjdGlvbi5leGVjdXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoYWN0aW9uQnV0dG9uLmFjdGlvbiA9PT0gdGhpcy5fZXhwYW5kZWRBY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VFeHBhbmRlZEFjdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmRTaG93Q2FyZEFjdGlvbihhY3Rpb25CdXR0b24uYWN0aW9uLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBBY3Rpb25Db2xsZWN0aW9uLnByb3RvdHlwZS5nZXRQYXJlbnRDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX293bmVyIGluc3RhbmNlb2YgQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5nZXRQYXJlbnRDb250YWluZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uQ29sbGVjdGlvbi5wcm90b3R5cGUuZmluZEFjdGlvbkJ1dHRvbiA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5idXR0b25zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgYWN0aW9uQnV0dG9uID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBpZiAoYWN0aW9uQnV0dG9uLmFjdGlvbiA9PSBhY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25CdXR0b247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uQ29sbGVjdGlvbi5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbiwgZXJyb3JzKSB7XHJcbiAgICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICAgIGlmIChqc29uICYmIGpzb24gaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGpzb25fMSA9IGpzb247IF9pIDwganNvbl8xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGpzb25BY3Rpb24gPSBqc29uXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IGNyZWF0ZUFjdGlvbkluc3RhbmNlKHRoaXMuX293bmVyLCBqc29uQWN0aW9uLCBbXSwgIXRoaXMuX293bmVyLmlzRGVzaWduTW9kZSgpLCBlcnJvcnMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQWN0aW9uKGFjdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uQ29sbGVjdGlvbi5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLml0ZW1zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5pdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChhY3Rpb24udG9KU09OKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0QWN0aW9uQnlJZCA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBudWxsO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLml0ZW1zW2ldLmdldEFjdGlvbkJ5SWQoaWQpO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIEFjdGlvbkNvbGxlY3Rpb24ucHJvdG90eXBlLnZhbGlkYXRlUHJvcGVydGllcyA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX293bmVyLmhvc3RDb25maWcuYWN0aW9ucy5tYXhBY3Rpb25zICYmIHRoaXMuaXRlbXMubGVuZ3RoID4gdGhpcy5fb3duZXIuaG9zdENvbmZpZy5hY3Rpb25zLm1heEFjdGlvbnMpIHtcclxuICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKHRoaXMuX293bmVyLCB7XHJcbiAgICAgICAgICAgICAgICBlcnJvcjogRW51bXMuVmFsaWRhdGlvbkVycm9yLlRvb01hbnlBY3Rpb25zLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBIG1heGltdW0gb2YgXCIgKyB0aGlzLl9vd25lci5ob3N0Q29uZmlnLmFjdGlvbnMubWF4QWN0aW9ucyArIFwiIGFjdGlvbnMgYXJlIGFsbG93ZWQuXCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLml0ZW1zLmxlbmd0aCA+IDAgJiYgIXRoaXMuX293bmVyLmhvc3RDb25maWcuc3VwcG9ydHNJbnRlcmFjdGl2aXR5KSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQuYWRkRmFpbHVyZSh0aGlzLl9vd25lciwge1xyXG4gICAgICAgICAgICAgICAgZXJyb3I6IEVudW1zLlZhbGlkYXRpb25FcnJvci5JbnRlcmFjdGl2aXR5Tm90QWxsb3dlZCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW50ZXJhY3Rpdml0eSBpcyBub3QgYWxsb3dlZC5cIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuaXRlbXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBpZiAoIWlzQWN0aW9uQWxsb3dlZChpdGVtLCB0aGlzLl9vd25lci5nZXRGb3JiaWRkZW5BY3Rpb25UeXBlcygpKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKHRoaXMuX293bmVyLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IEVudW1zLlZhbGlkYXRpb25FcnJvci5BY3Rpb25UeXBlTm90QWxsb3dlZCxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkFjdGlvbnMgb2YgdHlwZSBcIiArIGl0ZW0uZ2V0SnNvblR5cGVOYW1lKCkgKyBcIiBhcmUgbm90IGFsbG93ZS5cIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaXRlbS5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyhjb250ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uQ29sbGVjdGlvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKG9yaWVudGF0aW9uLCBpc0Rlc2lnbk1vZGUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIENhY2hlIGhvc3RDb25maWcgZm9yIGJldHRlciBwZXJmXHJcbiAgICAgICAgdmFyIGhvc3RDb25maWcgPSB0aGlzLl9vd25lci5ob3N0Q29uZmlnO1xyXG4gICAgICAgIGlmICghaG9zdENvbmZpZy5zdXBwb3J0c0ludGVyYWN0aXZpdHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB2YXIgbWF4QWN0aW9ucyA9IGhvc3RDb25maWcuYWN0aW9ucy5tYXhBY3Rpb25zID8gTWF0aC5taW4oaG9zdENvbmZpZy5hY3Rpb25zLm1heEFjdGlvbnMsIHRoaXMuaXRlbXMubGVuZ3RoKSA6IHRoaXMuaXRlbXMubGVuZ3RoO1xyXG4gICAgICAgIHZhciBmb3JiaWRkZW5BY3Rpb25UeXBlcyA9IHRoaXMuX293bmVyLmdldEZvcmJpZGRlbkFjdGlvblR5cGVzKCk7XHJcbiAgICAgICAgdGhpcy5fYWN0aW9uQ2FyZENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRBY3Rpb25Db3VudCA9IDA7XHJcbiAgICAgICAgaWYgKGhvc3RDb25maWcuYWN0aW9ucy5wcmVFeHBhbmRTaW5nbGVTaG93Q2FyZEFjdGlvbiAmJiBtYXhBY3Rpb25zID09IDEgJiYgdGhpcy5pdGVtc1swXSBpbnN0YW5jZW9mIFNob3dDYXJkQWN0aW9uICYmIGlzQWN0aW9uQWxsb3dlZCh0aGlzLml0ZW1zWzBdLCBmb3JiaWRkZW5BY3Rpb25UeXBlcykpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93QWN0aW9uQ2FyZCh0aGlzLml0ZW1zWzBdLCB0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRBY3Rpb25Db3VudCA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgYnV0dG9uU3RyaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBidXR0b25TdHJpcC5jbGFzc05hbWUgPSBob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1hY3Rpb25TZXRcIik7XHJcbiAgICAgICAgICAgIGJ1dHRvblN0cmlwLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICAgICAgaWYgKG9yaWVudGF0aW9uID09IEVudW1zLk9yaWVudGF0aW9uLkhvcml6b250YWwpIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvblN0cmlwLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSBcInJvd1wiO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyLmhvcml6b250YWxBbGlnbm1lbnQgJiYgaG9zdENvbmZpZy5hY3Rpb25zLmFjdGlvbkFsaWdubWVudCAhPSBFbnVtcy5BY3Rpb25BbGlnbm1lbnQuU3RyZXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5fb3duZXIuaG9yaXpvbnRhbEFsaWdubWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQuQ2VudGVyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3RyaXAuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImNlbnRlclwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5SaWdodDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0cmlwLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJmbGV4LWVuZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TdHJpcC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiZmxleC1zdGFydFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChob3N0Q29uZmlnLmFjdGlvbnMuYWN0aW9uQWxpZ25tZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuQWN0aW9uQWxpZ25tZW50LkNlbnRlcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0cmlwLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkFjdGlvbkFsaWdubWVudC5SaWdodDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0cmlwLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJmbGV4LWVuZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TdHJpcC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiZmxleC1zdGFydFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uU3RyaXAuc3R5bGUuZmxleERpcmVjdGlvbiA9IFwiY29sdW1uXCI7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fb3duZXIuaG9yaXpvbnRhbEFsaWdubWVudCAmJiBob3N0Q29uZmlnLmFjdGlvbnMuYWN0aW9uQWxpZ25tZW50ICE9IEVudW1zLkFjdGlvbkFsaWdubWVudC5TdHJldGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLl9vd25lci5ob3Jpem9udGFsQWxpZ25tZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TdHJpcC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQuUmlnaHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TdHJpcC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJmbGV4LWVuZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TdHJpcC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJmbGV4LXN0YXJ0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGhvc3RDb25maWcuYWN0aW9ucy5hY3Rpb25BbGlnbm1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5BY3Rpb25BbGlnbm1lbnQuQ2VudGVyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3RyaXAuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5BY3Rpb25BbGlnbm1lbnQuUmlnaHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TdHJpcC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJmbGV4LWVuZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuQWN0aW9uQWxpZ25tZW50LlN0cmV0Y2g6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25TdHJpcC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJzdHJldGNoXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvblN0cmlwLnN0eWxlLmFsaWduSXRlbXMgPSBcImZsZXgtc3RhcnRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcGFyZW50Q29udGFpbmVyU3R5bGUgPSB0aGlzLmdldFBhcmVudENvbnRhaW5lcigpLmdldEVmZmVjdGl2ZVN0eWxlKCk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzQWN0aW9uQWxsb3dlZCh0aGlzLml0ZW1zW2ldLCBmb3JiaWRkZW5BY3Rpb25UeXBlcykpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uQnV0dG9uID0gdGhpcy5maW5kQWN0aW9uQnV0dG9uKHRoaXMuaXRlbXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYWN0aW9uQnV0dG9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkJ1dHRvbiA9IG5ldyBBY3Rpb25CdXR0b24odGhpcy5pdGVtc1tpXSwgcGFyZW50Q29udGFpbmVyU3R5bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25CdXR0b24ub25DbGljayA9IGZ1bmN0aW9uIChhYikgeyBfdGhpcy5hY3Rpb25DbGlja2VkKGFiKTsgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXR0b25zLnB1c2goYWN0aW9uQnV0dG9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9uLnJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChob3N0Q29uZmlnLmFjdGlvbnMuYWN0aW9uc09yaWVudGF0aW9uID09IEVudW1zLk9yaWVudGF0aW9uLkhvcml6b250YWwgJiYgaG9zdENvbmZpZy5hY3Rpb25zLmFjdGlvbkFsaWdubWVudCA9PSBFbnVtcy5BY3Rpb25BbGlnbm1lbnQuU3RyZXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25CdXR0b24uYWN0aW9uLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5mbGV4ID0gXCIwIDEgMTAwJVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9uLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQuc3R5bGUuZmxleCA9IFwiMCAxIGF1dG9cIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uU3RyaXAuYXBwZW5kQ2hpbGQoYWN0aW9uQnV0dG9uLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkQWN0aW9uQ291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRBY3Rpb25Db3VudCA+PSBob3N0Q29uZmlnLmFjdGlvbnMubWF4QWN0aW9ucyB8fCBpID09IHRoaXMuaXRlbXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaG9zdENvbmZpZy5hY3Rpb25zLmJ1dHRvblNwYWNpbmcgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFjZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JpZW50YXRpb24gPT09IEVudW1zLk9yaWVudGF0aW9uLkhvcml6b250YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlci5zdHlsZS5mbGV4ID0gXCIwIDAgYXV0b1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2VyLnN0eWxlLndpZHRoID0gaG9zdENvbmZpZy5hY3Rpb25zLmJ1dHRvblNwYWNpbmcgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFjZXIuc3R5bGUuaGVpZ2h0ID0gaG9zdENvbmZpZy5hY3Rpb25zLmJ1dHRvblNwYWNpbmcgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoYnV0dG9uU3RyaXAsIHNwYWNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBidXR0b25TdHJpcENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGJ1dHRvblN0cmlwQ29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICAgICAgYnV0dG9uU3RyaXBDb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uU3RyaXApO1xyXG4gICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCBidXR0b25TdHJpcENvbnRhaW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKGVsZW1lbnQsIHRoaXMuX2FjdGlvbkNhcmRDb250YWluZXIpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5idXR0b25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJ1dHRvbnNbaV0uc3RhdGUgPT0gQWN0aW9uQnV0dG9uU3RhdGUuRXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kU2hvd0NhcmRBY3Rpb24odGhpcy5idXR0b25zW2ldLmFjdGlvbiwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVkQWN0aW9uQ291bnQgPiAwID8gZWxlbWVudCA6IG51bGw7XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkQWN0aW9uID0gZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgIGlmICghYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBhY3Rpb24gcGFyYW1ldGVyIGNhbm5vdCBiZSBudWxsLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCghYWN0aW9uLnBhcmVudCB8fCBhY3Rpb24ucGFyZW50ID09PSB0aGlzLl9vd25lcikgJiYgdGhpcy5pdGVtcy5pbmRleE9mKGFjdGlvbikgPCAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXMucHVzaChhY3Rpb24pO1xyXG4gICAgICAgICAgICBpZiAoIWFjdGlvbi5wYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIGFjdGlvbi5zZXRQYXJlbnQodGhpcy5fb3duZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGludm9rZVNldENvbGxlY3Rpb24oYWN0aW9uLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBhY3Rpb24gYWxyZWFkeSBiZWxvbmdzIHRvIGFub3RoZXIgZWxlbWVudC5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEFjdGlvbkNvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUFjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICBpZiAodGhpcy5leHBhbmRlZEFjdGlvbiAmJiB0aGlzLl9leHBhbmRlZEFjdGlvbiA9PSBhY3Rpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUV4cGFuZGVkQWN0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBhY3Rpb25JbmRleCA9IHRoaXMuaXRlbXMuaW5kZXhPZihhY3Rpb24pO1xyXG4gICAgICAgIGlmIChhY3Rpb25JbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKGFjdGlvbkluZGV4LCAxKTtcclxuICAgICAgICAgICAgYWN0aW9uLnNldFBhcmVudChudWxsKTtcclxuICAgICAgICAgICAgaW52b2tlU2V0Q29sbGVjdGlvbihhY3Rpb24sIG51bGwpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYnV0dG9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYnV0dG9uc1tpXS5hY3Rpb24gPT0gYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idXR0b25zLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIEFjdGlvbkNvbGxlY3Rpb24ucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBbXTtcclxuICAgICAgICB0aGlzLmJ1dHRvbnMgPSBbXTtcclxuICAgICAgICB0aGlzLl9leHBhbmRlZEFjdGlvbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRBY3Rpb25Db3VudCA9IDA7XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0QWxsSW5wdXRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGFjdGlvbiA9IHRoaXMuaXRlbXNbaV07XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQoYWN0aW9uLmdldEFsbElucHV0cygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBBY3Rpb25Db2xsZWN0aW9uLnByb3RvdHlwZS5nZXRSZXNvdXJjZUluZm9ybWF0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdCh0aGlzLml0ZW1zW2ldLmdldFJlc291cmNlSW5mb3JtYXRpb24oKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFjdGlvbkNvbGxlY3Rpb24ucHJvdG90eXBlLCBcInJlbmRlcmVkQWN0aW9uQ291bnRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRBY3Rpb25Db3VudDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBY3Rpb25Db2xsZWN0aW9uLnByb3RvdHlwZSwgXCJleHBhbmRlZEFjdGlvblwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRlZEFjdGlvbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBBY3Rpb25Db2xsZWN0aW9uO1xyXG59KCkpO1xyXG52YXIgQWN0aW9uU2V0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEFjdGlvblNldCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEFjdGlvblNldCgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLm9yaWVudGF0aW9uID0gbnVsbDtcclxuICAgICAgICBfdGhpcy5fYWN0aW9uQ29sbGVjdGlvbiA9IG5ldyBBY3Rpb25Db2xsZWN0aW9uKF90aGlzKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBBY3Rpb25TZXQucHJvdG90eXBlLmludGVybmFsUmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLnJlbmRlcih0aGlzLm9yaWVudGF0aW9uID8gdGhpcy5vcmllbnRhdGlvbiA6IHRoaXMuaG9zdENvbmZpZy5hY3Rpb25zLmFjdGlvbnNPcmllbnRhdGlvbiwgdGhpcy5pc0Rlc2lnbk1vZGUoKSk7XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uU2V0LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XHJcbiAgICAgICAgVXRpbHMuc2V0RW51bVByb3BlcnR5KEVudW1zLk9yaWVudGF0aW9uLCByZXN1bHQsIFwib3JpZW50YXRpb25cIiwgdGhpcy5vcmllbnRhdGlvbik7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcImFjdGlvbnNcIiwgdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi50b0pTT04oKSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBBY3Rpb25TZXQucHJvdG90eXBlLmlzQmxlZWRpbmdBdEJvdHRvbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5yZW5kZXJlZEFjdGlvbkNvdW50ID09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuaXNCbGVlZGluZ0F0Qm90dG9tLmNhbGwodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5pdGVtcy5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uZXhwYW5kZWRBY3Rpb24gIT0gbnVsbCAmJiAhdGhpcy5ob3N0Q29uZmlnLmFjdGlvbnMucHJlRXhwYW5kU2luZ2xlU2hvd0NhcmRBY3Rpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5leHBhbmRlZEFjdGlvbiAhPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEFjdGlvblNldC5wcm90b3R5cGUuZ2V0SnNvblR5cGVOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcIkFjdGlvblNldFwiO1xyXG4gICAgfTtcclxuICAgIEFjdGlvblNldC5wcm90b3R5cGUuZ2V0QWN0aW9uQ291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uaXRlbXMubGVuZ3RoO1xyXG4gICAgfTtcclxuICAgIEFjdGlvblNldC5wcm90b3R5cGUuZ2V0QWN0aW9uQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICBpZiAoaW5kZXggPj0gMCAmJiBpbmRleCA8IHRoaXMuZ2V0QWN0aW9uQ291bnQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5pdGVtc1tpbmRleF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmdldEFjdGlvbkF0LmNhbGwodGhpcywgaW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBBY3Rpb25TZXQucHJvdG90eXBlLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmludGVybmFsVmFsaWRhdGVQcm9wZXJ0aWVzLmNhbGwodGhpcywgY29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi52YWxpZGF0ZVByb3BlcnRpZXMoY29udGV4dCk7XHJcbiAgICB9O1xyXG4gICAgQWN0aW9uU2V0LnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChqc29uLCBlcnJvcnMpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnBhcnNlLmNhbGwodGhpcywganNvbiwgZXJyb3JzKTtcclxuICAgICAgICB2YXIganNvbk9yaWVudGF0aW9uID0ganNvbltcIm9yaWVudGF0aW9uXCJdO1xyXG4gICAgICAgIGlmIChqc29uT3JpZW50YXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5vcmllbnRhdGlvbiA9IFV0aWxzLmdldEVudW1WYWx1ZShFbnVtcy5PcmllbnRhdGlvbiwganNvbk9yaWVudGF0aW9uLCBFbnVtcy5PcmllbnRhdGlvbi5Ib3Jpem9udGFsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5wYXJzZShqc29uW1wiYWN0aW9uc1wiXSwgZXJyb3JzKTtcclxuICAgIH07XHJcbiAgICBBY3Rpb25TZXQucHJvdG90eXBlLmFkZEFjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLmFkZEFjdGlvbihhY3Rpb24pO1xyXG4gICAgfTtcclxuICAgIEFjdGlvblNldC5wcm90b3R5cGUuZ2V0QWxsSW5wdXRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLmdldEFsbElucHV0cygpO1xyXG4gICAgfTtcclxuICAgIEFjdGlvblNldC5wcm90b3R5cGUuZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5nZXRSZXNvdXJjZUluZm9ybWF0aW9uKCk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFjdGlvblNldC5wcm90b3R5cGUsIFwiaXNJbnRlcmFjdGl2ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIEFjdGlvblNldDtcclxufShDYXJkRWxlbWVudCkpO1xyXG5leHBvcnRzLkFjdGlvblNldCA9IEFjdGlvblNldDtcclxudmFyIFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXIoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuX3N0eWxlID0gbnVsbDtcclxuICAgICAgICBfdGhpcy5fYmxlZWQgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBTdHlsYWJsZUNhcmRFbGVtZW50Q29udGFpbmVyLnByb3RvdHlwZS5hcHBseUJhY2tncm91bmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHN0eWxlRGVmaW5pdGlvbiA9IHRoaXMuaG9zdENvbmZpZy5jb250YWluZXJTdHlsZXMuZ2V0U3R5bGVCeU5hbWUodGhpcy5zdHlsZSwgdGhpcy5ob3N0Q29uZmlnLmNvbnRhaW5lclN0eWxlcy5nZXRTdHlsZUJ5TmFtZSh0aGlzLmRlZmF1bHRTdHlsZSkpO1xyXG4gICAgICAgIGlmICghVXRpbHMuaXNOdWxsT3JFbXB0eShzdHlsZURlZmluaXRpb24uYmFja2dyb3VuZENvbG9yKSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBVdGlscy5zdHJpbmdUb0Nzc0NvbG9yKHN0eWxlRGVmaW5pdGlvbi5iYWNrZ3JvdW5kQ29sb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBTdHlsYWJsZUNhcmRFbGVtZW50Q29udGFpbmVyLnByb3RvdHlwZS5hcHBseVBhZGRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hcHBseVBhZGRpbmcuY2FsbCh0aGlzKTtcclxuICAgICAgICBpZiAoIXRoaXMucmVuZGVyZWRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHBoeXNpY2FsUGFkZGluZyA9IG5ldyBTaGFyZWQuU3BhY2luZ0RlZmluaXRpb24oKTtcclxuICAgICAgICBpZiAodGhpcy5nZXRFZmZlY3RpdmVQYWRkaW5nKCkpIHtcclxuICAgICAgICAgICAgcGh5c2ljYWxQYWRkaW5nID0gdGhpcy5ob3N0Q29uZmlnLnBhZGRpbmdEZWZpbml0aW9uVG9TcGFjaW5nRGVmaW5pdGlvbih0aGlzLmdldEVmZmVjdGl2ZVBhZGRpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLnBhZGRpbmdUb3AgPSBwaHlzaWNhbFBhZGRpbmcudG9wICsgXCJweFwiO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodCA9IHBoeXNpY2FsUGFkZGluZy5yaWdodCArIFwicHhcIjtcclxuICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5wYWRkaW5nQm90dG9tID0gcGh5c2ljYWxQYWRkaW5nLmJvdHRvbSArIFwicHhcIjtcclxuICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdCA9IHBoeXNpY2FsUGFkZGluZy5sZWZ0ICsgXCJweFwiO1xyXG4gICAgICAgIGlmICh0aGlzLmlzQmxlZWRpbmcoKSkge1xyXG4gICAgICAgICAgICAvLyBCbGVlZCBpbnRvIHRoZSBmaXJzdCBwYXJlbnQgdGhhdCBkb2VzIGhhdmUgcGFkZGluZ1xyXG4gICAgICAgICAgICB2YXIgcGFkZGluZyA9IG5ldyBTaGFyZWQuUGFkZGluZ0RlZmluaXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5nZXRJbW1lZGlhdGVTdXJyb3VuZGluZ1BhZGRpbmcocGFkZGluZyk7XHJcbiAgICAgICAgICAgIHZhciBzdXJyb3VuZGluZ1BhZGRpbmcgPSB0aGlzLmhvc3RDb25maWcucGFkZGluZ0RlZmluaXRpb25Ub1NwYWNpbmdEZWZpbml0aW9uKHBhZGRpbmcpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiLVwiICsgc3Vycm91bmRpbmdQYWRkaW5nLnJpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCItXCIgKyBzdXJyb3VuZGluZ1BhZGRpbmcubGVmdCArIFwicHhcIjtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRGVzaWduTW9kZSgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5tYXJnaW5Ub3AgPSBcIi1cIiArIHN1cnJvdW5kaW5nUGFkZGluZy50b3AgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIi1cIiArIHN1cnJvdW5kaW5nUGFkZGluZy5ib3R0b20gKyBcInB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VwYXJhdG9yRWxlbWVudCAmJiB0aGlzLnNlcGFyYXRvck9yaWVudGF0aW9uID09IEVudW1zLk9yaWVudGF0aW9uLkhvcml6b250YWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VwYXJhdG9yRWxlbWVudC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCItXCIgKyBzdXJyb3VuZGluZ1BhZGRpbmcubGVmdCArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VwYXJhdG9yRWxlbWVudC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiLVwiICsgc3Vycm91bmRpbmdQYWRkaW5nLnJpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiMFwiO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCIwXCI7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLm1hcmdpblRvcCA9IFwiMFwiO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjBcIjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VwYXJhdG9yRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXBhcmF0b3JFbGVtZW50LnN0eWxlLm1hcmdpblJpZ2h0ID0gXCIwXCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlcGFyYXRvckVsZW1lbnQuc3R5bGUubWFyZ2luTGVmdCA9IFwiMFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXIucHJvdG90eXBlLmdldEhhc0JhY2tncm91bmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRFbGVtZW50ID0gdGhpcy5wYXJlbnQ7XHJcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50RWxlbWVudEhhc0JhY2tncm91bmRJbWFnZSA9IGN1cnJlbnRFbGVtZW50IGluc3RhbmNlb2YgQ29udGFpbmVyID8gY3VycmVudEVsZW1lbnQuYmFja2dyb3VuZEltYWdlLmlzVmFsaWQoKSA6IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudEVsZW1lbnQgaW5zdGFuY2VvZiBTdHlsYWJsZUNhcmRFbGVtZW50Q29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXNFeHBsaWNpdFN0eWxlICYmIChjdXJyZW50RWxlbWVudC5nZXRFZmZlY3RpdmVTdHlsZSgpICE9IHRoaXMuZ2V0RWZmZWN0aXZlU3R5bGUoKSB8fCBjdXJyZW50RWxlbWVudEhhc0JhY2tncm91bmRJbWFnZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50LnBhcmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXIucHJvdG90eXBlLmdldERlZmF1bHRQYWRkaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEhhc0JhY2tncm91bmQoKSA/XHJcbiAgICAgICAgICAgIG5ldyBTaGFyZWQuUGFkZGluZ0RlZmluaXRpb24oRW51bXMuU3BhY2luZy5QYWRkaW5nLCBFbnVtcy5TcGFjaW5nLlBhZGRpbmcsIEVudW1zLlNwYWNpbmcuUGFkZGluZywgRW51bXMuU3BhY2luZy5QYWRkaW5nKSA6IF9zdXBlci5wcm90b3R5cGUuZ2V0RGVmYXVsdFBhZGRpbmcuY2FsbCh0aGlzKTtcclxuICAgIH07XHJcbiAgICBTdHlsYWJsZUNhcmRFbGVtZW50Q29udGFpbmVyLnByb3RvdHlwZS5nZXRIYXNFeHBhbmRlZEFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lci5wcm90b3R5cGUuZ2V0QmxlZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JsZWVkO1xyXG4gICAgfTtcclxuICAgIFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXIucHJvdG90eXBlLnNldEJsZWVkID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fYmxlZWQgPSB2YWx1ZTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lci5wcm90b3R5cGUsIFwicmVuZGVyZWRBY3Rpb25Db3VudFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXIucHJvdG90eXBlLCBcImhhc0V4cGxpY2l0U3R5bGVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3R5bGUgIT0gbnVsbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHlsYWJsZUNhcmRFbGVtZW50Q29udGFpbmVyLnByb3RvdHlwZSwgXCJhbGxvd0N1c3RvbVN0eWxlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lci5wcm90b3R5cGUsIFwic3VwcG9ydHNNaW5IZWlnaHRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXIucHJvdG90eXBlLmlzQmxlZWRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmdldEhhc0JhY2tncm91bmQoKSB8fCB0aGlzLmhvc3RDb25maWcuYWx3YXlzQWxsb3dCbGVlZCkgJiYgdGhpcy5nZXRCbGVlZCgpO1xyXG4gICAgfTtcclxuICAgIFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gX3N1cGVyLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtcclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwic3R5bGVcIiwgdGhpcy5zdHlsZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBTdHlsYWJsZUNhcmRFbGVtZW50Q29udGFpbmVyLnByb3RvdHlwZS5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcy5jYWxsKHRoaXMsIGNvbnRleHQpO1xyXG4gICAgICAgIGlmICh0aGlzLl9zdHlsZSkge1xyXG4gICAgICAgICAgICB2YXIgc3R5bGVEZWZpbml0aW9uID0gdGhpcy5ob3N0Q29uZmlnLmNvbnRhaW5lclN0eWxlcy5nZXRTdHlsZUJ5TmFtZSh0aGlzLl9zdHlsZSk7XHJcbiAgICAgICAgICAgIGlmICghc3R5bGVEZWZpbml0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUodGhpcywge1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBFbnVtcy5WYWxpZGF0aW9uRXJyb3IuSW52YWxpZFByb3BlcnR5VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJVbmtub3duIGNvbnRhaW5lciBzdHlsZTogXCIgKyB0aGlzLl9zdHlsZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lci5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbiwgZXJyb3JzKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wYXJzZS5jYWxsKHRoaXMsIGpzb24sIGVycm9ycyk7XHJcbiAgICAgICAgdGhpcy5fc3R5bGUgPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1wic3R5bGVcIl0pO1xyXG4gICAgfTtcclxuICAgIFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVuZGVyZWRFbGVtZW50ID0gX3N1cGVyLnByb3RvdHlwZS5yZW5kZXIuY2FsbCh0aGlzKTtcclxuICAgICAgICBpZiAocmVuZGVyZWRFbGVtZW50ICYmIHRoaXMuZ2V0SGFzQmFja2dyb3VuZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlCYWNrZ3JvdW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZW5kZXJlZEVsZW1lbnQ7XHJcbiAgICB9O1xyXG4gICAgU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lci5wcm90b3R5cGUuZ2V0RWZmZWN0aXZlU3R5bGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVmZmVjdGl2ZVN0eWxlID0gdGhpcy5zdHlsZTtcclxuICAgICAgICByZXR1cm4gZWZmZWN0aXZlU3R5bGUgPyBlZmZlY3RpdmVTdHlsZSA6IF9zdXBlci5wcm90b3R5cGUuZ2V0RWZmZWN0aXZlU3R5bGUuY2FsbCh0aGlzKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lci5wcm90b3R5cGUsIFwic3R5bGVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0N1c3RvbVN0eWxlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc3R5bGUgJiYgdGhpcy5ob3N0Q29uZmlnLmNvbnRhaW5lclN0eWxlcy5nZXRTdHlsZUJ5TmFtZSh0aGlzLl9zdHlsZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc3R5bGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zdHlsZSA9IHZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIFN0eWxhYmxlQ2FyZEVsZW1lbnRDb250YWluZXI7XHJcbn0oQ2FyZEVsZW1lbnRDb250YWluZXIpKTtcclxuZXhwb3J0cy5TdHlsYWJsZUNhcmRFbGVtZW50Q29udGFpbmVyID0gU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lcjtcclxudmFyIEJhY2tncm91bmRJbWFnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhCYWNrZ3JvdW5kSW1hZ2UsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBCYWNrZ3JvdW5kSW1hZ2UoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuZmlsbE1vZGUgPSBCYWNrZ3JvdW5kSW1hZ2UuZGVmYXVsdEZpbGxNb2RlO1xyXG4gICAgICAgIF90aGlzLmhvcml6b250YWxBbGlnbm1lbnQgPSBCYWNrZ3JvdW5kSW1hZ2UuZGVmYXVsdEhvcml6b250YWxBbGlnbm1lbnQ7XHJcbiAgICAgICAgX3RoaXMudmVydGljYWxBbGlnbm1lbnQgPSBCYWNrZ3JvdW5kSW1hZ2UuZGVmYXVsdFZlcnRpY2FsQWxpZ25tZW50O1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEJhY2tncm91bmRJbWFnZS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy51cmwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5maWxsTW9kZSA9IEJhY2tncm91bmRJbWFnZS5kZWZhdWx0RmlsbE1vZGU7XHJcbiAgICAgICAgdGhpcy5ob3Jpem9udGFsQWxpZ25tZW50ID0gQmFja2dyb3VuZEltYWdlLmRlZmF1bHRIb3Jpem9udGFsQWxpZ25tZW50O1xyXG4gICAgICAgIHRoaXMudmVydGljYWxBbGlnbm1lbnQgPSBCYWNrZ3JvdW5kSW1hZ2UuZGVmYXVsdFZlcnRpY2FsQWxpZ25tZW50O1xyXG4gICAgfTtcclxuICAgIEJhY2tncm91bmRJbWFnZS5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbiwgZXJyb3JzKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wYXJzZS5jYWxsKHRoaXMsIGpzb24sIGVycm9ycyk7XHJcbiAgICAgICAgdGhpcy51cmwgPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1widXJsXCJdKTtcclxuICAgICAgICB0aGlzLmZpbGxNb2RlID0gVXRpbHMuZ2V0RW51bVZhbHVlKEVudW1zLkZpbGxNb2RlLCBqc29uW1wiZmlsbE1vZGVcIl0sIHRoaXMuZmlsbE1vZGUpO1xyXG4gICAgICAgIHRoaXMuaG9yaXpvbnRhbEFsaWdubWVudCA9IFV0aWxzLmdldEVudW1WYWx1ZShFbnVtcy5Ib3Jpem9udGFsQWxpZ25tZW50LCBqc29uW1wiaG9yaXpvbnRhbEFsaWdubWVudFwiXSwgdGhpcy5ob3Jpem9udGFsQWxpZ25tZW50KTtcclxuICAgICAgICB0aGlzLnZlcnRpY2FsQWxpZ25tZW50ID0gVXRpbHMuZ2V0RW51bVZhbHVlKEVudW1zLlZlcnRpY2FsQWxpZ25tZW50LCBqc29uW1widmVydGljYWxBbGlnbm1lbnRcIl0sIHRoaXMudmVydGljYWxBbGlnbm1lbnQpO1xyXG4gICAgfTtcclxuICAgIEJhY2tncm91bmRJbWFnZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmZpbGxNb2RlID09IEJhY2tncm91bmRJbWFnZS5kZWZhdWx0RmlsbE1vZGUgJiZcclxuICAgICAgICAgICAgdGhpcy5ob3Jpem9udGFsQWxpZ25tZW50ID09IEJhY2tncm91bmRJbWFnZS5kZWZhdWx0SG9yaXpvbnRhbEFsaWdubWVudCAmJlxyXG4gICAgICAgICAgICB0aGlzLnZlcnRpY2FsQWxpZ25tZW50ID09IEJhY2tncm91bmRJbWFnZS5kZWZhdWx0VmVydGljYWxBbGlnbm1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXJsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XHJcbiAgICAgICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJ1cmxcIiwgdGhpcy51cmwpO1xyXG4gICAgICAgICAgICBVdGlscy5zZXRFbnVtUHJvcGVydHkoRW51bXMuRmlsbE1vZGUsIHJlc3VsdCwgXCJmaWxsTW9kZVwiLCB0aGlzLmZpbGxNb2RlLCBCYWNrZ3JvdW5kSW1hZ2UuZGVmYXVsdEZpbGxNb2RlKTtcclxuICAgICAgICAgICAgVXRpbHMuc2V0RW51bVByb3BlcnR5KEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQsIHJlc3VsdCwgXCJob3Jpem9udGFsQWxpZ25tZW50XCIsIHRoaXMuaG9yaXpvbnRhbEFsaWdubWVudCwgQmFja2dyb3VuZEltYWdlLmRlZmF1bHRIb3Jpem9udGFsQWxpZ25tZW50KTtcclxuICAgICAgICAgICAgVXRpbHMuc2V0RW51bVByb3BlcnR5KEVudW1zLlZlcnRpY2FsQWxpZ25tZW50LCByZXN1bHQsIFwidmVydGljYWxBbGlnbm1lbnRcIiwgdGhpcy52ZXJ0aWNhbEFsaWdubWVudCwgQmFja2dyb3VuZEltYWdlLmRlZmF1bHRWZXJ0aWNhbEFsaWdubWVudCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEJhY2tncm91bmRJbWFnZS5wcm90b3R5cGUuYXBwbHkgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLnVybCkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKCdcIiArIHRoaXMudXJsICsgXCInKVwiO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuZmlsbE1vZGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuRmlsbE1vZGUuUmVwZWF0OlxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFJlcGVhdCA9IFwicmVwZWF0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkZpbGxNb2RlLlJlcGVhdEhvcml6b250YWxseTpcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRSZXBlYXQgPSBcInJlcGVhdC14XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkZpbGxNb2RlLlJlcGVhdFZlcnRpY2FsbHk6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUmVwZWF0ID0gXCJyZXBlYXQteVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5GaWxsTW9kZS5Db3ZlcjpcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUmVwZWF0ID0gXCJuby1yZXBlYXRcIjtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRTaXplID0gXCJjb3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5ob3Jpem9udGFsQWxpZ25tZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQuQ2VudGVyOlxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uWCA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQuUmlnaHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb25YID0gXCJyaWdodFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy52ZXJ0aWNhbEFsaWdubWVudCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBFbnVtcy5WZXJ0aWNhbEFsaWdubWVudC5DZW50ZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb25ZID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuVmVydGljYWxBbGlnbm1lbnQuQm90dG9tOlxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uWSA9IFwiYm90dG9tXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQmFja2dyb3VuZEltYWdlLnByb3RvdHlwZS5pc1ZhbGlkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAhVXRpbHMuaXNOdWxsT3JFbXB0eSh0aGlzLnVybCk7XHJcbiAgICB9O1xyXG4gICAgQmFja2dyb3VuZEltYWdlLmRlZmF1bHRGaWxsTW9kZSA9IEVudW1zLkZpbGxNb2RlLkNvdmVyO1xyXG4gICAgQmFja2dyb3VuZEltYWdlLmRlZmF1bHRIb3Jpem9udGFsQWxpZ25tZW50ID0gRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5MZWZ0O1xyXG4gICAgQmFja2dyb3VuZEltYWdlLmRlZmF1bHRWZXJ0aWNhbEFsaWdubWVudCA9IEVudW1zLlZlcnRpY2FsQWxpZ25tZW50LlRvcDtcclxuICAgIHJldHVybiBCYWNrZ3JvdW5kSW1hZ2U7XHJcbn0oU2VyaWFsaXphYmxlT2JqZWN0KSk7XHJcbmV4cG9ydHMuQmFja2dyb3VuZEltYWdlID0gQmFja2dyb3VuZEltYWdlO1xyXG52YXIgQ29udGFpbmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKENvbnRhaW5lciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIENvbnRhaW5lcigpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5faXRlbXMgPSBbXTtcclxuICAgICAgICBfdGhpcy5fcmVuZGVyZWRJdGVtcyA9IFtdO1xyXG4gICAgICAgIF90aGlzLmJhY2tncm91bmRJbWFnZSA9IG5ldyBCYWNrZ3JvdW5kSW1hZ2UoKTtcclxuICAgICAgICBfdGhpcy52ZXJ0aWNhbENvbnRlbnRBbGlnbm1lbnQgPSBFbnVtcy5WZXJ0aWNhbEFsaWdubWVudC5Ub3A7XHJcbiAgICAgICAgX3RoaXMucnRsID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLmluc2VydEl0ZW1BdCA9IGZ1bmN0aW9uIChpdGVtLCBpbmRleCwgZm9yY2VJbnNlcnQpIHtcclxuICAgICAgICBpZiAoIWl0ZW0ucGFyZW50IHx8IGZvcmNlSW5zZXJ0KSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLmlzU3RhbmRhbG9uZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSB0aGlzLl9pdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pdGVtcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXRlbXMuc3BsaWNlKGluZGV4LCAwLCBpdGVtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0UGFyZW50KHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRWxlbWVudHMgb2YgdHlwZSBcIiArIGl0ZW0uZ2V0SnNvblR5cGVOYW1lKCkgKyBcIiBjYW5ub3QgYmUgdXNlZCBhcyBzdGFuZGFsb25lIGVsZW1lbnRzLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGVsZW1lbnQgYWxyZWFkeSBiZWxvbmdzIHRvIGFub3RoZXIgY29udGFpbmVyLlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5zdXBwb3J0c0V4Y3BsaXRpSGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUuZ2V0SXRlbXNDb2xsZWN0aW9uUHJvcGVydHlOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcIml0ZW1zXCI7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5hcHBseUJhY2tncm91bmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYmFja2dyb3VuZEltYWdlLmlzVmFsaWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmJhY2tncm91bmRJbWFnZS5hcHBseSh0aGlzLnJlbmRlcmVkRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuYXBwbHlCYWNrZ3JvdW5kLmNhbGwodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5pbnRlcm5hbFJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gW107XHJcbiAgICAgICAgLy8gQ2FjaGUgaG9zdENvbmZpZyB0byBhdm9pZCB3YWxraW5nIHRoZSBwYXJlbnQgaGllcmFyY2h5IHNldmVyYWwgdGltZXNcclxuICAgICAgICB2YXIgaG9zdENvbmZpZyA9IHRoaXMuaG9zdENvbmZpZztcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgaWYgKHRoaXMucnRsICE9IG51bGwgJiYgdGhpcy5ydGwpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5kaXIgPSBcInJ0bFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtY29udGFpbmVyXCIpKTtcclxuICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICBlbGVtZW50LnN0eWxlLmZsZXhEaXJlY3Rpb24gPSBcImNvbHVtblwiO1xyXG4gICAgICAgIGlmIChBZGFwdGl2ZUNhcmQudXNlQWR2YW5jZWRDYXJkQm90dG9tVHJ1bmNhdGlvbikge1xyXG4gICAgICAgICAgICAvLyBGb3JjZXMgdGhlIGNvbnRhaW5lciB0byBiZSBhdCBsZWFzdCBhcyB0YWxsIGFzIGl0cyBjb250ZW50LlxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvLyBGaXhlcyBhIHF1aXJrIGluIENocm9tZSB3aGVyZSwgZm9yIG5lc3RlZCBmbGV4IGVsZW1lbnRzLCB0aGVcclxuICAgICAgICAgICAgLy8gaW5uZXIgZWxlbWVudCdzIGhlaWdodCB3b3VsZCBuZXZlciBleGNlZWQgdGhlIG91dGVyIGVsZW1lbnQnc1xyXG4gICAgICAgICAgICAvLyBoZWlnaHQuIFRoaXMgY2F1c2VkIG92ZXJmbG93IHRydW5jYXRpb24gdG8gYnJlYWsgLS0gY29udGFpbmVyc1xyXG4gICAgICAgICAgICAvLyB3b3VsZCBhbHdheXMgYmUgbWVhc3VyZWQgYXMgbm90IG92ZXJmbG93aW5nLCBzaW5jZSB0aGVpciBoZWlnaHRzXHJcbiAgICAgICAgICAgIC8vIHdlcmUgY29uc3RyYWluZWQgYnkgdGhlaXIgcGFyZW50cyBhcyBvcHBvc2VkIHRvIHRydWx5IHJlZmxlY3RpbmdcclxuICAgICAgICAgICAgLy8gdGhlIGhlaWdodCBvZiB0aGVpciBjb250ZW50LlxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvLyBTZWUgdGhlIFwiQnJvd3NlciBSZW5kZXJpbmcgTm90ZXNcIiBzZWN0aW9uIG9mIHRoaXMgYW5zd2VyOlxyXG4gICAgICAgICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zNjI0NzE0MC93aHktZG9lc250LWZsZXgtaXRlbS1zaHJpbmstcGFzdC1jb250ZW50LXNpemVcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5taW5IZWlnaHQgPSAnLXdlYmtpdC1taW4tY29udGVudCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN3aXRjaCAodGhpcy52ZXJ0aWNhbENvbnRlbnRBbGlnbm1lbnQpIHtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5WZXJ0aWNhbEFsaWdubWVudC5DZW50ZXI6XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEVudW1zLlZlcnRpY2FsQWxpZ25tZW50LkJvdHRvbTpcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImZsZXgtZW5kXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImZsZXgtc3RhcnRcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5faXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2l0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVuZGVyZWRFbGVtZW50ID0gdGhpcy5pc0VsZW1lbnRBbGxvd2VkKHRoaXMuX2l0ZW1zW2ldLCB0aGlzLmdldEZvcmJpZGRlbkVsZW1lbnRUeXBlcygpKSA/IHRoaXMuX2l0ZW1zW2ldLnJlbmRlcigpIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmIChyZW5kZXJlZEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRJdGVtcy5sZW5ndGggPiAwICYmIHRoaXMuX2l0ZW1zW2ldLnNlcGFyYXRvckVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXRlbXNbaV0uc2VwYXJhdG9yRWxlbWVudC5zdHlsZS5mbGV4ID0gXCIwIDAgYXV0b1wiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCB0aGlzLl9pdGVtc1tpXS5zZXBhcmF0b3JFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoZWxlbWVudCwgcmVuZGVyZWRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLnB1c2godGhpcy5faXRlbXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rlc2lnbk1vZGUoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBsYWNlaG9sZGVyRWxlbWVudCA9IHRoaXMuY3JlYXRlUGxhY2Vob2xkZXJFbGVtZW50KCk7XHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlckVsZW1lbnQuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQocGxhY2Vob2xkZXJFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLnRydW5jYXRlT3ZlcmZsb3cgPSBmdW5jdGlvbiAobWF4SGVpZ2h0KSB7XHJcbiAgICAgICAgLy8gQWRkIDEgdG8gYWNjb3VudCBmb3Igcm91bmRpbmcgZGlmZmVyZW5jZXMgYmV0d2VlbiBicm93c2Vyc1xyXG4gICAgICAgIHZhciBib3VuZGFyeSA9IHRoaXMucmVuZGVyZWRFbGVtZW50Lm9mZnNldFRvcCArIG1heEhlaWdodCArIDE7XHJcbiAgICAgICAgdmFyIGhhbmRsZUVsZW1lbnQgPSBmdW5jdGlvbiAoY2FyZEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIGVsdCA9IGNhcmRFbGVtZW50LnJlbmRlcmVkRWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKGVsdCkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChVdGlscy5nZXRGaXRTdGF0dXMoZWx0LCBib3VuZGFyeSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkNvbnRhaW5lckZpdFN0YXR1cy5GdWxseUluQ29udGFpbmVyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZUNoYW5nZWQgPSBjYXJkRWxlbWVudFsncmVzZXRPdmVyZmxvdyddKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBlbGVtZW50J3Mgc2l6ZSBjaGFuZ2VkIGFmdGVyIHJlc2V0dGluZyBjb250ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBoYXZlIHRvIGNoZWNrIGlmIGl0IHN0aWxsIGZpdHMgZnVsbHkgaW4gdGhlIGNhcmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpemVDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVFbGVtZW50KGNhcmRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkNvbnRhaW5lckZpdFN0YXR1cy5PdmVyZmxvd2luZzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1heEhlaWdodF8xID0gYm91bmRhcnkgLSBlbHQub2Zmc2V0VG9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkRWxlbWVudFsnaGFuZGxlT3ZlcmZsb3cnXShtYXhIZWlnaHRfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuQ29udGFpbmVyRml0U3RhdHVzLkZ1bGx5T3V0T2ZDb250YWluZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRFbGVtZW50WydoYW5kbGVPdmVyZmxvdyddKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuX2l0ZW1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgaXRlbSA9IF9hW19pXTtcclxuICAgICAgICAgICAgaGFuZGxlRWxlbWVudChpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS51bmRvT3ZlcmZsb3dUcnVuY2F0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLl9pdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGl0ZW1bJ3Jlc2V0T3ZlcmZsb3cnXSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLmdldEhhc0JhY2tncm91bmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFja2dyb3VuZEltYWdlLmlzVmFsaWQoKSB8fCBfc3VwZXIucHJvdG90eXBlLmdldEhhc0JhY2tncm91bmQuY2FsbCh0aGlzKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29udGFpbmVyLnByb3RvdHlwZSwgXCJpc1NlbGVjdGFibGVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBfc3VwZXIucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJiYWNrZ3JvdW5kSW1hZ2VcIiwgdGhpcy5iYWNrZ3JvdW5kSW1hZ2UudG9KU09OKCkpO1xyXG4gICAgICAgIFV0aWxzLnNldEVudW1Qcm9wZXJ0eShFbnVtcy5WZXJ0aWNhbEFsaWdubWVudCwgcmVzdWx0LCBcInZlcnRpY2FsQ29udGVudEFsaWdubWVudFwiLCB0aGlzLnZlcnRpY2FsQ29udGVudEFsaWdubWVudCwgRW51bXMuVmVydGljYWxBbGlnbm1lbnQuVG9wKTtcclxuICAgICAgICBpZiAodGhpcy5faXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuX2l0ZW1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50cy5wdXNoKGVsZW1lbnQudG9KU09OKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgdGhpcy5nZXRJdGVtc0NvbGxlY3Rpb25Qcm9wZXJ0eU5hbWUoKSwgZWxlbWVudHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwiYmxlZWRcIiwgdGhpcy5ibGVlZCwgZmFsc2UpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5nZXRJdGVtQ291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zLmxlbmd0aDtcclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLmdldEl0ZW1BdCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pdGVtc1tpbmRleF07XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5nZXRGaXJzdFZpc2libGVSZW5kZXJlZEl0ZW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRFbGVtZW50ICYmIHRoaXMuX3JlbmRlcmVkSXRlbXMgJiYgdGhpcy5fcmVuZGVyZWRJdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLl9yZW5kZXJlZEl0ZW1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUuZ2V0TGFzdFZpc2libGVSZW5kZXJlZEl0ZW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRFbGVtZW50ICYmIHRoaXMuX3JlbmRlcmVkSXRlbXMgJiYgdGhpcy5fcmVuZGVyZWRJdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSB0aGlzLl9yZW5kZXJlZEl0ZW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRJdGVtc1tpXS5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRJdGVtc1tpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLmdldEpzb25UeXBlTmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gXCJDb250YWluZXJcIjtcclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLmlzRmlyc3RFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgZGVzaWduTW9kZSA9IHRoaXMuaXNEZXNpZ25Nb2RlKCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9pdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faXRlbXNbaV0uaXNWaXNpYmxlIHx8IGRlc2lnbk1vZGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pdGVtc1tpXSA9PSBlbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLmlzTGFzdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBkZXNpZ25Nb2RlID0gdGhpcy5pc0Rlc2lnbk1vZGUoKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5faXRlbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2l0ZW1zW2ldLmlzVmlzaWJsZSB8fCBkZXNpZ25Nb2RlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faXRlbXNbaV0gPT0gZWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5pc1J0bCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5ydGwgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ydGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgcGFyZW50Q29udGFpbmVyID0gdGhpcy5nZXRQYXJlbnRDb250YWluZXIoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcmVudENvbnRhaW5lciA/IHBhcmVudENvbnRhaW5lci5pc1J0bCgpIDogZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUuaXNCbGVlZGluZ0F0VG9wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaXJzdFJlbmRlcmVkSXRlbSA9IHRoaXMuZ2V0Rmlyc3RWaXNpYmxlUmVuZGVyZWRJdGVtKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNCbGVlZGluZygpIHx8IChmaXJzdFJlbmRlcmVkSXRlbSA/IGZpcnN0UmVuZGVyZWRJdGVtLmlzQmxlZWRpbmdBdFRvcCgpIDogZmFsc2UpO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUuaXNCbGVlZGluZ0F0Qm90dG9tID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBsYXN0UmVuZGVyZWRJdGVtID0gdGhpcy5nZXRMYXN0VmlzaWJsZVJlbmRlcmVkSXRlbSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzQmxlZWRpbmcoKSB8fCAobGFzdFJlbmRlcmVkSXRlbSA/IGxhc3RSZW5kZXJlZEl0ZW0uaXNCbGVlZGluZ0F0Qm90dG9tKCkgJiYgbGFzdFJlbmRlcmVkSXRlbS5nZXRFZmZlY3RpdmVTdHlsZSgpID09IHRoaXMuZ2V0RWZmZWN0aXZlU3R5bGUoKSA6IGZhbHNlKTtcclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGpzb24sIGVycm9ycykge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucGFyc2UuY2FsbCh0aGlzLCBqc29uLCBlcnJvcnMpO1xyXG4gICAgICAgIHRoaXMuc2V0U2hvdWxkRmFsbGJhY2soZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zID0gW107XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlLnJlc2V0KCk7XHJcbiAgICAgICAgdmFyIGpzb25CYWNrZ3JvdW5kSW1hZ2UgPSBqc29uW1wiYmFja2dyb3VuZEltYWdlXCJdO1xyXG4gICAgICAgIGlmIChqc29uQmFja2dyb3VuZEltYWdlKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YganNvbkJhY2tncm91bmRJbWFnZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2UudXJsID0ganNvbkJhY2tncm91bmRJbWFnZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlLmZpbGxNb2RlID0gRW51bXMuRmlsbE1vZGUuQ292ZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGpzb25CYWNrZ3JvdW5kSW1hZ2UgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZEltYWdlLnBhcnNlKGpzb25CYWNrZ3JvdW5kSW1hZ2UsIGVycm9ycyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy52ZXJ0aWNhbENvbnRlbnRBbGlnbm1lbnQgPSBVdGlscy5nZXRFbnVtVmFsdWUoRW51bXMuVmVydGljYWxBbGlnbm1lbnQsIGpzb25bXCJ2ZXJ0aWNhbENvbnRlbnRBbGlnbm1lbnRcIl0sIHRoaXMudmVydGljYWxDb250ZW50QWxpZ25tZW50KTtcclxuICAgICAgICBpZiAoanNvblt0aGlzLmdldEl0ZW1zQ29sbGVjdGlvblByb3BlcnR5TmFtZSgpXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IGpzb25bdGhpcy5nZXRJdGVtc0NvbGxlY3Rpb25Qcm9wZXJ0eU5hbWUoKV07XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBjcmVhdGVFbGVtZW50SW5zdGFuY2UodGhpcywgaXRlbXNbaV0sICF0aGlzLmlzRGVzaWduTW9kZSgpLCBlcnJvcnMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluc2VydEl0ZW1BdChlbGVtZW50LCAtMSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ibGVlZCA9IFV0aWxzLmdldEJvb2xWYWx1ZShqc29uW1wiYmxlZWRcIl0sIHRoaXMuYmxlZWQpO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIChjYXJkRWxlbWVudCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pdGVtcy5pbmRleE9mKGNhcmRFbGVtZW50KTtcclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLmFkZEl0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgIHRoaXMuaW5zZXJ0SXRlbUF0KGl0ZW0sIC0xLCBmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5pbnNlcnRJdGVtQmVmb3JlID0gZnVuY3Rpb24gKGl0ZW0sIGluc2VydEJlZm9yZSkge1xyXG4gICAgICAgIHRoaXMuaW5zZXJ0SXRlbUF0KGl0ZW0sIHRoaXMuX2l0ZW1zLmluZGV4T2YoaW5zZXJ0QmVmb3JlKSwgZmFsc2UpO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUuaW5zZXJ0SXRlbUFmdGVyID0gZnVuY3Rpb24gKGl0ZW0sIGluc2VydEFmdGVyKSB7XHJcbiAgICAgICAgdGhpcy5pbnNlcnRJdGVtQXQoaXRlbSwgdGhpcy5faXRlbXMuaW5kZXhPZihpbnNlcnRBZnRlcikgKyAxLCBmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICB2YXIgaXRlbUluZGV4ID0gdGhpcy5faXRlbXMuaW5kZXhPZihpdGVtKTtcclxuICAgICAgICBpZiAoaXRlbUluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgdGhpcy5faXRlbXMuc3BsaWNlKGl0ZW1JbmRleCwgMSk7XHJcbiAgICAgICAgICAgIGl0ZW0uc2V0UGFyZW50KG51bGwpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMgPSBbXTtcclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLmdldFJlc291cmNlSW5mb3JtYXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUuZ2V0UmVzb3VyY2VJbmZvcm1hdGlvbi5jYWxsKHRoaXMpO1xyXG4gICAgICAgIGlmICh0aGlzLmJhY2tncm91bmRJbWFnZS5pc1ZhbGlkKCkpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goeyB1cmw6IHRoaXMuYmFja2dyb3VuZEltYWdlLnVybCwgbWltZVR5cGU6IFwiaW1hZ2VcIiB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLmdldEFjdGlvbkJ5SWQgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gX3N1cGVyLnByb3RvdHlwZS5nZXRBY3Rpb25CeUlkLmNhbGwodGhpcywgaWQpO1xyXG4gICAgICAgIGlmICghcmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdEFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5zZWxlY3RBY3Rpb24uZ2V0QWN0aW9uQnlJZChpZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5faXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9pdGVtc1tpXS5nZXRBY3Rpb25CeUlkKGlkKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb250YWluZXIucHJvdG90eXBlLCBcInBhZGRpbmdcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRQYWRkaW5nKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFBhZGRpbmcodmFsdWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnRhaW5lci5wcm90b3R5cGUsIFwic2VsZWN0QWN0aW9uXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VsZWN0QWN0aW9uKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFNlbGVjdEFjdGlvbih2YWx1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29udGFpbmVyLnByb3RvdHlwZSwgXCJibGVlZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEJsZWVkKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldEJsZWVkKHZhbHVlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBDb250YWluZXI7XHJcbn0oU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lcikpO1xyXG5leHBvcnRzLkNvbnRhaW5lciA9IENvbnRhaW5lcjtcclxudmFyIENvbHVtbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhDb2x1bW4sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBDb2x1bW4od2lkdGgpIHtcclxuICAgICAgICBpZiAod2lkdGggPT09IHZvaWQgMCkgeyB3aWR0aCA9IFwic3RyZXRjaFwiOyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5fY29tcHV0ZWRXZWlnaHQgPSAwO1xyXG4gICAgICAgIF90aGlzLndpZHRoID0gXCJzdHJldGNoXCI7XHJcbiAgICAgICAgX3RoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBDb2x1bW4ucHJvdG90eXBlLmFkanVzdFJlbmRlcmVkRWxlbWVudFNpemUgPSBmdW5jdGlvbiAocmVuZGVyZWRFbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIG1pbkRlc2lnblRpbWVDb2x1bW5IZWlnaHQgPSAyMDtcclxuICAgICAgICBpZiAodGhpcy5pc0Rlc2lnbk1vZGUoKSkge1xyXG4gICAgICAgICAgICByZW5kZXJlZEVsZW1lbnQuc3R5bGUubWluV2lkdGggPSBcIjIwcHhcIjtcclxuICAgICAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLm1pbkhlaWdodCA9ICghdGhpcy5taW5QaXhlbEhlaWdodCA/IG1pbkRlc2lnblRpbWVDb2x1bW5IZWlnaHQgOiBNYXRoLm1heCh0aGlzLm1pblBpeGVsSGVpZ2h0LCBtaW5EZXNpZ25UaW1lQ29sdW1uSGVpZ2h0KSkgKyBcInB4XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZW5kZXJlZEVsZW1lbnQuc3R5bGUubWluV2lkdGggPSBcIjBcIjtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWluUGl4ZWxIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHJlbmRlcmVkRWxlbWVudC5zdHlsZS5taW5IZWlnaHQgPSB0aGlzLm1pblBpeGVsSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLndpZHRoID09PSBcImF1dG9cIikge1xyXG4gICAgICAgICAgICByZW5kZXJlZEVsZW1lbnQuc3R5bGUuZmxleCA9IFwiMCAxIGF1dG9cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy53aWR0aCA9PT0gXCJzdHJldGNoXCIpIHtcclxuICAgICAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLmZsZXggPSBcIjEgMSA1MHB4XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgc2l6ZUFuZFVuaXQgPSB0aGlzLndpZHRoO1xyXG4gICAgICAgICAgICBpZiAoc2l6ZUFuZFVuaXQudW5pdCA9PSBFbnVtcy5TaXplVW5pdC5QaXhlbCkge1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLmZsZXggPSBcIjAgMCBhdXRvXCI7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJlZEVsZW1lbnQuc3R5bGUud2lkdGggPSBzaXplQW5kVW5pdC5waHlzaWNhbFNpemUgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJlZEVsZW1lbnQuc3R5bGUuZmxleCA9IFwiMSAxIFwiICsgKHRoaXMuX2NvbXB1dGVkV2VpZ2h0ID4gMCA/IHRoaXMuX2NvbXB1dGVkV2VpZ2h0IDogc2l6ZUFuZFVuaXQucGh5c2ljYWxTaXplKSArIFwiJVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb2x1bW4ucHJvdG90eXBlLCBcInNlcGFyYXRvck9yaWVudGF0aW9uXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1zLk9yaWVudGF0aW9uLlZlcnRpY2FsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQ29sdW1uLnByb3RvdHlwZS5nZXRKc29uVHlwZU5hbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiQ29sdW1uXCI7XHJcbiAgICB9O1xyXG4gICAgQ29sdW1uLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XHJcbiAgICAgICAgaWYgKHRoaXMud2lkdGggaW5zdGFuY2VvZiBTaGFyZWQuU2l6ZUFuZFVuaXQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMud2lkdGgudW5pdCA9PSBFbnVtcy5TaXplVW5pdC5QaXhlbCkge1xyXG4gICAgICAgICAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcIndpZHRoXCIsIHRoaXMud2lkdGgucGh5c2ljYWxTaXplICsgXCJweFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIFV0aWxzLnNldE51bWJlclByb3BlcnR5KHJlc3VsdCwgXCJ3aWR0aFwiLCB0aGlzLndpZHRoLnBoeXNpY2FsU2l6ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJ3aWR0aFwiLCB0aGlzLndpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBDb2x1bW4ucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGpzb24sIGVycm9ycykge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucGFyc2UuY2FsbCh0aGlzLCBqc29uLCBlcnJvcnMpO1xyXG4gICAgICAgIHZhciBqc29uV2lkdGggPSBqc29uW1wid2lkdGhcIl07XHJcbiAgICAgICAgaWYgKGpzb25XaWR0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGpzb25XaWR0aCA9IGpzb25bXCJzaXplXCJdO1xyXG4gICAgICAgICAgICBpZiAoanNvbldpZHRoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJhaXNlUGFyc2VFcnJvcih7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IEVudW1zLlZhbGlkYXRpb25FcnJvci5EZXByZWNhdGVkLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGhlIFxcXCJDb2x1bW4uc2l6ZVxcXCIgcHJvcGVydHkgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkLiBVc2UgdGhlIFxcXCJDb2x1bW4ud2lkdGhcXFwiIHByb3BlcnR5IGluc3RlYWQuXCJcclxuICAgICAgICAgICAgICAgIH0sIGVycm9ycyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGpzb25XaWR0aCkge1xyXG4gICAgICAgICAgICB2YXIgaW52YWxpZFdpZHRoID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndpZHRoID0gU2hhcmVkLlNpemVBbmRVbml0LnBhcnNlKGpzb25XaWR0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YganNvbldpZHRoID09PSBcInN0cmluZ1wiICYmIChqc29uV2lkdGggPT09IFwiYXV0b1wiIHx8IGpzb25XaWR0aCA9PT0gXCJzdHJldGNoXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53aWR0aCA9IGpzb25XaWR0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRXaWR0aCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGludmFsaWRXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgcmFpc2VQYXJzZUVycm9yKHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogRW51bXMuVmFsaWRhdGlvbkVycm9yLkludmFsaWRQcm9wZXJ0eVZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBjb2x1bW4gd2lkdGg6XCIgKyBqc29uV2lkdGggKyBcIiAtIGRlZmF1bHRpbmcgdG8gXFxcImF1dG9cXFwiXCJcclxuICAgICAgICAgICAgICAgIH0sIGVycm9ycyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbHVtbi5wcm90b3R5cGUsIFwiaGFzVmlzaWJsZVNlcGFyYXRvclwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudCAmJiB0aGlzLnBhcmVudCBpbnN0YW5jZW9mIENvbHVtblNldCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VwYXJhdG9yRWxlbWVudCAmJiAhdGhpcy5wYXJlbnQuaXNMZWZ0TW9zdEVsZW1lbnQodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb2x1bW4ucHJvdG90eXBlLCBcImlzU3RhbmRhbG9uZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBDb2x1bW47XHJcbn0oQ29udGFpbmVyKSk7XHJcbmV4cG9ydHMuQ29sdW1uID0gQ29sdW1uO1xyXG52YXIgQ29sdW1uU2V0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKENvbHVtblNldCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIENvbHVtblNldCgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5fY29sdW1ucyA9IFtdO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIENvbHVtblNldC5wcm90b3R5cGUuY3JlYXRlQ29sdW1uSW5zdGFuY2UgPSBmdW5jdGlvbiAoanNvbiwgZXJyb3JzKSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUNhcmRPYmplY3RJbnN0YW5jZSh0aGlzLCBqc29uLCBbXSwgLy8gRm9yYmlkZGVuIHR5cGVzIG5vdCBzdXBwb3J0ZWQgZm9yIGVsZW1lbnRzIGZvciBub3dcclxuICAgICAgICAhdGhpcy5pc0Rlc2lnbk1vZGUoKSwgZnVuY3Rpb24gKHR5cGVOYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhdHlwZU5hbWUgfHwgdHlwZU5hbWUgPT09IFwiQ29sdW1uXCIgPyBuZXcgQ29sdW1uKCkgOiBudWxsO1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uICh0eXBlTmFtZSwgZXJyb3JUeXBlKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvclR5cGUgPT0gSW5zdGFuY2VDcmVhdGlvbkVycm9yVHlwZS5Vbmtub3duVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogRW51bXMuVmFsaWRhdGlvbkVycm9yLlVua25vd25FbGVtZW50VHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlVua25vd24gZWxlbWVudCB0eXBlOiBcIiArIHR5cGVOYW1lICsgXCIuIEZhbGxiYWNrIHdpbGwgYmUgdXNlZCBpZiBwcmVzZW50LlwiXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogRW51bXMuVmFsaWRhdGlvbkVycm9yLkVsZW1lbnRUeXBlTm90QWxsb3dlZCxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkVsZW1lbnQgdHlwZSBcIiArIHR5cGVOYW1lICsgXCIgaXNuJ3QgYWxsb3dlZCBpbiBhIENvbHVtblNldC5cIlxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIGVycm9ycyk7XHJcbiAgICB9O1xyXG4gICAgQ29sdW1uU2V0LnByb3RvdHlwZS5pbnRlcm5hbFJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZENvbHVtbnMgPSBbXTtcclxuICAgICAgICBpZiAodGhpcy5fY29sdW1ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIENhY2hlIGhvc3RDb25maWcgdG8gYXZvaWQgd2Fsa2luZyB0aGUgcGFyZW50IGhpZXJhcmNoeSBzZXZlcmFsIHRpbWVzXHJcbiAgICAgICAgICAgIHZhciBob3N0Q29uZmlnID0gdGhpcy5ob3N0Q29uZmlnO1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtY29sdW1uU2V0XCIpO1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICAgICAgaWYgKEFkYXB0aXZlQ2FyZC51c2VBZHZhbmNlZENhcmRCb3R0b21UcnVuY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTZWUgY29tbWVudCBpbiBDb250YWluZXIuaW50ZXJuYWxSZW5kZXIoKVxyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5taW5IZWlnaHQgPSAnLXdlYmtpdC1taW4tY29udGVudCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmhvcml6b250YWxBbGlnbm1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgRW51bXMuSG9yaXpvbnRhbEFsaWdubWVudC5DZW50ZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEVudW1zLkhvcml6b250YWxBbGlnbm1lbnQuUmlnaHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiZmxleC1lbmRcIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiZmxleC1zdGFydFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciB0b3RhbFdlaWdodCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLl9jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4ud2lkdGggaW5zdGFuY2VvZiBTaGFyZWQuU2l6ZUFuZFVuaXQgJiYgKGNvbHVtbi53aWR0aC51bml0ID09IEVudW1zLlNpemVVbml0LldlaWdodCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbFdlaWdodCArPSBjb2x1bW4ud2lkdGgucGh5c2ljYWxTaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9iID0gMCwgX2MgPSB0aGlzLl9jb2x1bW5zOyBfYiA8IF9jLmxlbmd0aDsgX2IrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IF9jW19iXTtcclxuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4ud2lkdGggaW5zdGFuY2VvZiBTaGFyZWQuU2l6ZUFuZFVuaXQgJiYgY29sdW1uLndpZHRoLnVuaXQgPT0gRW51bXMuU2l6ZVVuaXQuV2VpZ2h0ICYmIHRvdGFsV2VpZ2h0ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb21wdXRlZFdlaWdodCA9IDEwMCAvIHRvdGFsV2VpZ2h0ICogY29sdW1uLndpZHRoLnBoeXNpY2FsU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBCZXN0IHdheSB0byBlbXVsYXRlIFwiaW50ZXJuYWxcIiBhY2Nlc3MgSSBrbm93IG9mXHJcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uW1wiX2NvbXB1dGVkV2VpZ2h0XCJdID0gY29tcHV0ZWRXZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVuZGVyZWRDb2x1bW4gPSBjb2x1bW4ucmVuZGVyKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVuZGVyZWRDb2x1bW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRDb2x1bW5zLmxlbmd0aCA+IDAgJiYgY29sdW1uLnNlcGFyYXRvckVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uLnNlcGFyYXRvckVsZW1lbnQuc3R5bGUuZmxleCA9IFwiMCAwIGF1dG9cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVXRpbHMuYXBwZW5kQ2hpbGQoZWxlbWVudCwgY29sdW1uLnNlcGFyYXRvckVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCByZW5kZXJlZENvbHVtbik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRDb2x1bW5zLnB1c2goY29sdW1uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRDb2x1bW5zLmxlbmd0aCA+IDAgPyBlbGVtZW50IDogbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDb2x1bW5TZXQucHJvdG90eXBlLnRydW5jYXRlT3ZlcmZsb3cgPSBmdW5jdGlvbiAobWF4SGVpZ2h0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuX2NvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGNvbHVtblsnaGFuZGxlT3ZlcmZsb3cnXShtYXhIZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBDb2x1bW5TZXQucHJvdG90eXBlLnVuZG9PdmVyZmxvd1RydW5jYXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuX2NvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGNvbHVtblsncmVzZXRPdmVyZmxvdyddKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb2x1bW5TZXQucHJvdG90eXBlLCBcImlzU2VsZWN0YWJsZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQ29sdW1uU2V0LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NvbHVtbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgY29sdW1ucyA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5fY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBjb2x1bW5zLnB1c2goY29sdW1uLnRvSlNPTigpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwiY29sdW1uc1wiLCBjb2x1bW5zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcImJsZWVkXCIsIHRoaXMuYmxlZWQsIGZhbHNlKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIENvbHVtblNldC5wcm90b3R5cGUuaXNGaXJzdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fY29sdW1ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fY29sdW1uc1tpXS5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb2x1bW5zW2ldID09IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIENvbHVtblNldC5wcm90b3R5cGUuaXNCbGVlZGluZ0F0VG9wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQmxlZWRpbmcoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX3JlbmRlcmVkQ29sdW1ucyAmJiB0aGlzLl9yZW5kZXJlZENvbHVtbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5fY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLmlzQmxlZWRpbmdBdFRvcCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIENvbHVtblNldC5wcm90b3R5cGUuaXNCbGVlZGluZ0F0Qm90dG9tID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQmxlZWRpbmcoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX3JlbmRlcmVkQ29sdW1ucyAmJiB0aGlzLl9yZW5kZXJlZENvbHVtbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5fY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLmlzQmxlZWRpbmdBdEJvdHRvbSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIENvbHVtblNldC5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbHVtbnMubGVuZ3RoO1xyXG4gICAgfTtcclxuICAgIENvbHVtblNldC5wcm90b3R5cGUuZ2V0SXRlbUNvdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldENvdW50KCk7XHJcbiAgICB9O1xyXG4gICAgQ29sdW1uU2V0LnByb3RvdHlwZS5nZXRGaXJzdFZpc2libGVSZW5kZXJlZEl0ZW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRFbGVtZW50ICYmIHRoaXMuX3JlbmRlcmVkQ29sdW1ucyAmJiB0aGlzLl9yZW5kZXJlZENvbHVtbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRDb2x1bW5zWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENvbHVtblNldC5wcm90b3R5cGUuZ2V0TGFzdFZpc2libGVSZW5kZXJlZEl0ZW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRFbGVtZW50ICYmIHRoaXMuX3JlbmRlcmVkQ29sdW1ucyAmJiB0aGlzLl9yZW5kZXJlZENvbHVtbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRDb2x1bW5zW3RoaXMuX3JlbmRlcmVkQ29sdW1ucy5sZW5ndGggLSAxXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDb2x1bW5TZXQucHJvdG90eXBlLmdldENvbHVtbkF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbHVtbnNbaW5kZXhdO1xyXG4gICAgfTtcclxuICAgIENvbHVtblNldC5wcm90b3R5cGUuZ2V0SXRlbUF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29sdW1uQXQoaW5kZXgpO1xyXG4gICAgfTtcclxuICAgIENvbHVtblNldC5wcm90b3R5cGUuZ2V0SnNvblR5cGVOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcIkNvbHVtblNldFwiO1xyXG4gICAgfTtcclxuICAgIENvbHVtblNldC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbiwgZXJyb3JzKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wYXJzZS5jYWxsKHRoaXMsIGpzb24sIGVycm9ycyk7XHJcbiAgICAgICAgaWYgKGpzb25bXCJjb2x1bW5zXCJdICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdmFyIGpzb25Db2x1bW5zID0ganNvbltcImNvbHVtbnNcIl07XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbHVtbnMgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBqc29uQ29sdW1ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMuY3JlYXRlQ29sdW1uSW5zdGFuY2UoanNvbkNvbHVtbnNbaV0sIGVycm9ycyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29sdW1ucy5wdXNoKGNvbHVtbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ibGVlZCA9IFV0aWxzLmdldEJvb2xWYWx1ZShqc29uW1wiYmxlZWRcIl0sIHRoaXMuYmxlZWQpO1xyXG4gICAgfTtcclxuICAgIENvbHVtblNldC5wcm90b3R5cGUuaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMgPSBmdW5jdGlvbiAoY29udGV4dCkge1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuaW50ZXJuYWxWYWxpZGF0ZVByb3BlcnRpZXMuY2FsbCh0aGlzLCBjb250ZXh0KTtcclxuICAgICAgICB2YXIgd2VpZ2h0ZWRDb2x1bW5zID0gMDtcclxuICAgICAgICB2YXIgc3RyZXRjaGVkQ29sdW1ucyA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuX2NvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29sdW1uLndpZHRoID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgICAgICB3ZWlnaHRlZENvbHVtbnMrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjb2x1bW4ud2lkdGggPT09IFwic3RyZXRjaFwiKSB7XHJcbiAgICAgICAgICAgICAgICBzdHJldGNoZWRDb2x1bW5zKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHdlaWdodGVkQ29sdW1ucyA+IDAgJiYgc3RyZXRjaGVkQ29sdW1ucyA+IDApIHtcclxuICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKHRoaXMsIHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBFbnVtcy5WYWxpZGF0aW9uRXJyb3IuSGludCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXQgaXMgbm90IHJlY29tbWVuZGVkIHRvIHVzZSB3ZWlnaHRlZCBhbmQgc3RyZXRjaGVkIGNvbHVtbnMgaW4gdGhlIHNhbWUgQ29sdW1uU2V0LCBiZWNhdXNlIGluIHN1Y2ggYSBzaXR1YXRpb24gc3RyZXRjaGVkIGNvbHVtbnMgd2lsbCBhbHdheXMgZ2V0IHRoZSBtaW5pbXVtIGFtb3VudCBvZiBzcGFjZS5cIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ29sdW1uU2V0LnByb3RvdHlwZS5hZGRDb2x1bW4gPSBmdW5jdGlvbiAoY29sdW1uKSB7XHJcbiAgICAgICAgaWYgKCFjb2x1bW4ucGFyZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbHVtbnMucHVzaChjb2x1bW4pO1xyXG4gICAgICAgICAgICBjb2x1bW4uc2V0UGFyZW50KHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBjb2x1bW4gYWxyZWFkeSBiZWxvbmdzIHRvIGFub3RoZXIgQ29sdW1uU2V0LlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ29sdW1uU2V0LnByb3RvdHlwZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIENvbHVtbikge1xyXG4gICAgICAgICAgICB2YXIgaXRlbUluZGV4ID0gdGhpcy5fY29sdW1ucy5pbmRleE9mKGl0ZW0pO1xyXG4gICAgICAgICAgICBpZiAoaXRlbUluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbHVtbnMuc3BsaWNlKGl0ZW1JbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICBpdGVtLnNldFBhcmVudChudWxsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTGF5b3V0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgQ29sdW1uU2V0LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gKGNhcmRFbGVtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50IGluc3RhbmNlb2YgQ29sdW1uID8gdGhpcy5fY29sdW1ucy5pbmRleE9mKGNhcmRFbGVtZW50KSA6IC0xO1xyXG4gICAgfTtcclxuICAgIENvbHVtblNldC5wcm90b3R5cGUuaXNMZWZ0TW9zdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb2x1bW5zLmluZGV4T2YoZWxlbWVudCkgPT0gMDtcclxuICAgIH07XHJcbiAgICBDb2x1bW5TZXQucHJvdG90eXBlLmlzUmlnaHRNb3N0RWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbHVtbnMuaW5kZXhPZihlbGVtZW50KSA9PSB0aGlzLl9jb2x1bW5zLmxlbmd0aCAtIDE7XHJcbiAgICB9O1xyXG4gICAgQ29sdW1uU2V0LnByb3RvdHlwZS5pc1RvcEVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb2x1bW5zLmluZGV4T2YoZWxlbWVudCkgPj0gMDtcclxuICAgIH07XHJcbiAgICBDb2x1bW5TZXQucHJvdG90eXBlLmlzQm90dG9tRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbHVtbnMuaW5kZXhPZihlbGVtZW50KSA+PSAwO1xyXG4gICAgfTtcclxuICAgIENvbHVtblNldC5wcm90b3R5cGUuZ2V0QWN0aW9uQnlJZCA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBudWxsO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fY29sdW1ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9jb2x1bW5zW2ldLmdldEFjdGlvbkJ5SWQoaWQpO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb2x1bW5TZXQucHJvdG90eXBlLCBcImJsZWVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxlZWQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QmxlZWQodmFsdWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbHVtblNldC5wcm90b3R5cGUsIFwicGFkZGluZ1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFBhZGRpbmcoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UGFkZGluZyh2YWx1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29sdW1uU2V0LnByb3RvdHlwZSwgXCJzZWxlY3RBY3Rpb25cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTZWxlY3RBY3Rpb24oKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0QWN0aW9uKHZhbHVlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBDb2x1bW5TZXQ7XHJcbn0oU3R5bGFibGVDYXJkRWxlbWVudENvbnRhaW5lcikpO1xyXG5leHBvcnRzLkNvbHVtblNldCA9IENvbHVtblNldDtcclxuZnVuY3Rpb24gcmFpc2VJbWFnZUxvYWRlZEV2ZW50KGltYWdlKSB7XHJcbiAgICB2YXIgY2FyZCA9IGltYWdlLmdldFJvb3RFbGVtZW50KCk7XHJcbiAgICB2YXIgb25JbWFnZUxvYWRlZEhhbmRsZXIgPSAoY2FyZCAmJiBjYXJkLm9uSW1hZ2VMb2FkZWQpID8gY2FyZC5vbkltYWdlTG9hZGVkIDogQWRhcHRpdmVDYXJkLm9uSW1hZ2VMb2FkZWQ7XHJcbiAgICBpZiAob25JbWFnZUxvYWRlZEhhbmRsZXIpIHtcclxuICAgICAgICBvbkltYWdlTG9hZGVkSGFuZGxlcihpbWFnZSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmFpc2VBbmNob3JDbGlja2VkRXZlbnQoZWxlbWVudCwgYW5jaG9yKSB7XHJcbiAgICB2YXIgY2FyZCA9IGVsZW1lbnQuZ2V0Um9vdEVsZW1lbnQoKTtcclxuICAgIHZhciBvbkFuY2hvckNsaWNrZWRIYW5kbGVyID0gKGNhcmQgJiYgY2FyZC5vbkFuY2hvckNsaWNrZWQpID8gY2FyZC5vbkFuY2hvckNsaWNrZWQgOiBBZGFwdGl2ZUNhcmQub25BbmNob3JDbGlja2VkO1xyXG4gICAgcmV0dXJuIG9uQW5jaG9yQ2xpY2tlZEhhbmRsZXIgIT0gbnVsbCA/IG9uQW5jaG9yQ2xpY2tlZEhhbmRsZXIoZWxlbWVudCwgYW5jaG9yKSA6IGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIHJhaXNlRXhlY3V0ZUFjdGlvbkV2ZW50KGFjdGlvbikge1xyXG4gICAgdmFyIGNhcmQgPSBhY3Rpb24ucGFyZW50LmdldFJvb3RFbGVtZW50KCk7XHJcbiAgICB2YXIgb25FeGVjdXRlQWN0aW9uSGFuZGxlciA9IChjYXJkICYmIGNhcmQub25FeGVjdXRlQWN0aW9uKSA/IGNhcmQub25FeGVjdXRlQWN0aW9uIDogQWRhcHRpdmVDYXJkLm9uRXhlY3V0ZUFjdGlvbjtcclxuICAgIGlmIChvbkV4ZWN1dGVBY3Rpb25IYW5kbGVyKSB7XHJcbiAgICAgICAgaWYgKGFjdGlvbi5wcmVwYXJlRm9yRXhlY3V0aW9uKCkpIHtcclxuICAgICAgICAgICAgb25FeGVjdXRlQWN0aW9uSGFuZGxlcihhY3Rpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiByYWlzZUlubGluZUNhcmRFeHBhbmRlZEV2ZW50KGFjdGlvbiwgaXNFeHBhbmRlZCkge1xyXG4gICAgdmFyIGNhcmQgPSBhY3Rpb24ucGFyZW50LmdldFJvb3RFbGVtZW50KCk7XHJcbiAgICB2YXIgb25JbmxpbmVDYXJkRXhwYW5kZWRIYW5kbGVyID0gKGNhcmQgJiYgY2FyZC5vbklubGluZUNhcmRFeHBhbmRlZCkgPyBjYXJkLm9uSW5saW5lQ2FyZEV4cGFuZGVkIDogQWRhcHRpdmVDYXJkLm9uSW5saW5lQ2FyZEV4cGFuZGVkO1xyXG4gICAgaWYgKG9uSW5saW5lQ2FyZEV4cGFuZGVkSGFuZGxlcikge1xyXG4gICAgICAgIG9uSW5saW5lQ2FyZEV4cGFuZGVkSGFuZGxlcihhY3Rpb24sIGlzRXhwYW5kZWQpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJhaXNlSW5wdXRWYWx1ZUNoYW5nZWRFdmVudChpbnB1dCkge1xyXG4gICAgdmFyIGNhcmQgPSBpbnB1dC5nZXRSb290RWxlbWVudCgpO1xyXG4gICAgdmFyIG9uSW5wdXRWYWx1ZUNoYW5nZWRIYW5kbGVyID0gKGNhcmQgJiYgY2FyZC5vbklucHV0VmFsdWVDaGFuZ2VkKSA/IGNhcmQub25JbnB1dFZhbHVlQ2hhbmdlZCA6IEFkYXB0aXZlQ2FyZC5vbklucHV0VmFsdWVDaGFuZ2VkO1xyXG4gICAgaWYgKG9uSW5wdXRWYWx1ZUNoYW5nZWRIYW5kbGVyKSB7XHJcbiAgICAgICAgb25JbnB1dFZhbHVlQ2hhbmdlZEhhbmRsZXIoaW5wdXQpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJhaXNlRWxlbWVudFZpc2liaWxpdHlDaGFuZ2VkRXZlbnQoZWxlbWVudCwgc2hvdWxkVXBkYXRlTGF5b3V0KSB7XHJcbiAgICBpZiAoc2hvdWxkVXBkYXRlTGF5b3V0ID09PSB2b2lkIDApIHsgc2hvdWxkVXBkYXRlTGF5b3V0ID0gdHJ1ZTsgfVxyXG4gICAgdmFyIHJvb3RFbGVtZW50ID0gZWxlbWVudC5nZXRSb290RWxlbWVudCgpO1xyXG4gICAgaWYgKHNob3VsZFVwZGF0ZUxheW91dCkge1xyXG4gICAgICAgIHJvb3RFbGVtZW50LnVwZGF0ZUxheW91dCgpO1xyXG4gICAgfVxyXG4gICAgdmFyIGNhcmQgPSByb290RWxlbWVudDtcclxuICAgIHZhciBvbkVsZW1lbnRWaXNpYmlsaXR5Q2hhbmdlZEhhbmRsZXIgPSAoY2FyZCAmJiBjYXJkLm9uRWxlbWVudFZpc2liaWxpdHlDaGFuZ2VkKSA/IGNhcmQub25FbGVtZW50VmlzaWJpbGl0eUNoYW5nZWQgOiBBZGFwdGl2ZUNhcmQub25FbGVtZW50VmlzaWJpbGl0eUNoYW5nZWQ7XHJcbiAgICBpZiAob25FbGVtZW50VmlzaWJpbGl0eUNoYW5nZWRIYW5kbGVyICE9IG51bGwpIHtcclxuICAgICAgICBvbkVsZW1lbnRWaXNpYmlsaXR5Q2hhbmdlZEhhbmRsZXIoZWxlbWVudCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmFpc2VQYXJzZUVsZW1lbnRFdmVudChlbGVtZW50LCBqc29uLCBlcnJvcnMpIHtcclxuICAgIHZhciBjYXJkID0gZWxlbWVudC5nZXRSb290RWxlbWVudCgpO1xyXG4gICAgdmFyIG9uUGFyc2VFbGVtZW50SGFuZGxlciA9IChjYXJkICYmIGNhcmQub25QYXJzZUVsZW1lbnQpID8gY2FyZC5vblBhcnNlRWxlbWVudCA6IEFkYXB0aXZlQ2FyZC5vblBhcnNlRWxlbWVudDtcclxuICAgIGlmIChvblBhcnNlRWxlbWVudEhhbmRsZXIgIT0gbnVsbCkge1xyXG4gICAgICAgIG9uUGFyc2VFbGVtZW50SGFuZGxlcihlbGVtZW50LCBqc29uLCBlcnJvcnMpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJhaXNlUGFyc2VBY3Rpb25FdmVudChhY3Rpb24sIGpzb24sIGVycm9ycykge1xyXG4gICAgdmFyIGNhcmQgPSBhY3Rpb24ucGFyZW50ID8gYWN0aW9uLnBhcmVudC5nZXRSb290RWxlbWVudCgpIDogbnVsbDtcclxuICAgIHZhciBvblBhcnNlQWN0aW9uSGFuZGxlciA9IChjYXJkICYmIGNhcmQub25QYXJzZUFjdGlvbikgPyBjYXJkLm9uUGFyc2VBY3Rpb24gOiBBZGFwdGl2ZUNhcmQub25QYXJzZUFjdGlvbjtcclxuICAgIGlmIChvblBhcnNlQWN0aW9uSGFuZGxlciAhPSBudWxsKSB7XHJcbiAgICAgICAgb25QYXJzZUFjdGlvbkhhbmRsZXIoYWN0aW9uLCBqc29uLCBlcnJvcnMpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJhaXNlUGFyc2VFcnJvcihlcnJvciwgZXJyb3JzKSB7XHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgICAgZXJyb3JzLnB1c2goZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgaWYgKEFkYXB0aXZlQ2FyZC5vblBhcnNlRXJyb3IgIT0gbnVsbCkge1xyXG4gICAgICAgIEFkYXB0aXZlQ2FyZC5vblBhcnNlRXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59XHJcbnZhciBDb250YWluZXJXaXRoQWN0aW9ucyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhDb250YWluZXJXaXRoQWN0aW9ucywgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIENvbnRhaW5lcldpdGhBY3Rpb25zKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuX2FjdGlvbkNvbGxlY3Rpb24gPSBuZXcgQWN0aW9uQ29sbGVjdGlvbihfdGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgQ29udGFpbmVyV2l0aEFjdGlvbnMucHJvdG90eXBlLmludGVybmFsUmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gX3N1cGVyLnByb3RvdHlwZS5pbnRlcm5hbFJlbmRlci5jYWxsKHRoaXMpO1xyXG4gICAgICAgIHZhciByZW5kZXJlZEFjdGlvbnMgPSB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLnJlbmRlcih0aGlzLmhvc3RDb25maWcuYWN0aW9ucy5hY3Rpb25zT3JpZW50YXRpb24sIGZhbHNlKTtcclxuICAgICAgICBpZiAocmVuZGVyZWRBY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIFV0aWxzLmFwcGVuZENoaWxkKGVsZW1lbnQsIFV0aWxzLnJlbmRlclNlcGFyYXRpb24odGhpcy5ob3N0Q29uZmlnLCB7XHJcbiAgICAgICAgICAgICAgICBzcGFjaW5nOiB0aGlzLmhvc3RDb25maWcuZ2V0RWZmZWN0aXZlU3BhY2luZyh0aGlzLmhvc3RDb25maWcuYWN0aW9ucy5zcGFjaW5nKSxcclxuICAgICAgICAgICAgICAgIGxpbmVUaGlja25lc3M6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBsaW5lQ29sb3I6IG51bGxcclxuICAgICAgICAgICAgfSwgRW51bXMuT3JpZW50YXRpb24uSG9yaXpvbnRhbCkpO1xyXG4gICAgICAgICAgICBVdGlscy5hcHBlbmRDaGlsZChlbGVtZW50LCByZW5kZXJlZEFjdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZW5kZXJJZkVtcHR5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID4gMCA/IGVsZW1lbnQgOiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDb250YWluZXJXaXRoQWN0aW9ucy5wcm90b3R5cGUuZ2V0SGFzRXhwYW5kZWRBY3Rpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRBY3Rpb25Db3VudCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5yZW5kZXJlZEFjdGlvbkNvdW50ID09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uZXhwYW5kZWRBY3Rpb24gIT0gbnVsbCAmJiAhdGhpcy5ob3N0Q29uZmlnLmFjdGlvbnMucHJlRXhwYW5kU2luZ2xlU2hvd0NhcmRBY3Rpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5leHBhbmRlZEFjdGlvbiAhPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29udGFpbmVyV2l0aEFjdGlvbnMucHJvdG90eXBlLCBcInJlbmRlcmVkQWN0aW9uQ291bnRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5yZW5kZXJlZEFjdGlvbkNvdW50O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnRhaW5lcldpdGhBY3Rpb25zLnByb3RvdHlwZSwgXCJyZW5kZXJJZkVtcHR5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQ29udGFpbmVyV2l0aEFjdGlvbnMucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gX3N1cGVyLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtcclxuICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwiYWN0aW9uc1wiLCB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLnRvSlNPTigpKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lcldpdGhBY3Rpb25zLnByb3RvdHlwZS5nZXRBY3Rpb25Db3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5pdGVtcy5sZW5ndGg7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyV2l0aEFjdGlvbnMucHJvdG90eXBlLmdldEFjdGlvbkF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLmdldEFjdGlvbkNvdW50KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uaXRlbXNbaW5kZXhdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5nZXRBY3Rpb25BdC5jYWxsKHRoaXMsIGluZGV4KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyV2l0aEFjdGlvbnMucHJvdG90eXBlLmdldEFjdGlvbkJ5SWQgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5nZXRBY3Rpb25CeUlkKGlkKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0ID8gcmVzdWx0IDogX3N1cGVyLnByb3RvdHlwZS5nZXRBY3Rpb25CeUlkLmNhbGwodGhpcywgaWQpO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lcldpdGhBY3Rpb25zLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChqc29uLCBlcnJvcnMpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnBhcnNlLmNhbGwodGhpcywganNvbiwgZXJyb3JzKTtcclxuICAgICAgICB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLnBhcnNlKGpzb25bXCJhY3Rpb25zXCJdLCBlcnJvcnMpO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lcldpdGhBY3Rpb25zLnByb3RvdHlwZS5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcy5jYWxsKHRoaXMsIGNvbnRleHQpO1xyXG4gICAgICAgIGlmICh0aGlzLl9hY3Rpb25Db2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24udmFsaWRhdGVQcm9wZXJ0aWVzKGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDb250YWluZXJXaXRoQWN0aW9ucy5wcm90b3R5cGUuaXNMYXN0RWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuaXNMYXN0RWxlbWVudC5jYWxsKHRoaXMsIGVsZW1lbnQpICYmIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uaXRlbXMubGVuZ3RoID09IDA7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyV2l0aEFjdGlvbnMucHJvdG90eXBlLmFkZEFjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLmFkZEFjdGlvbihhY3Rpb24pO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lcldpdGhBY3Rpb25zLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmNsZWFyLmNhbGwodGhpcyk7XHJcbiAgICAgICAgdGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5jbGVhcigpO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lcldpdGhBY3Rpb25zLnByb3RvdHlwZS5nZXRBbGxJbnB1dHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZ2V0QWxsSW5wdXRzLmNhbGwodGhpcykuY29uY2F0KHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uZ2V0QWxsSW5wdXRzKCkpO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lcldpdGhBY3Rpb25zLnByb3RvdHlwZS5nZXRSZXNvdXJjZUluZm9ybWF0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmdldFJlc291cmNlSW5mb3JtYXRpb24uY2FsbCh0aGlzKS5jb25jYXQodGhpcy5fYWN0aW9uQ29sbGVjdGlvbi5nZXRSZXNvdXJjZUluZm9ybWF0aW9uKCkpO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lcldpdGhBY3Rpb25zLnByb3RvdHlwZS5pc0JsZWVkaW5nQXRCb3R0b20gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24ucmVuZGVyZWRBY3Rpb25Db3VudCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmlzQmxlZWRpbmdBdEJvdHRvbS5jYWxsKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uaXRlbXMubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb25Db2xsZWN0aW9uLmV4cGFuZGVkQWN0aW9uICE9IG51bGwgJiYgIXRoaXMuaG9zdENvbmZpZy5hY3Rpb25zLnByZUV4cGFuZFNpbmdsZVNob3dDYXJkQWN0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbkNvbGxlY3Rpb24uZXhwYW5kZWRBY3Rpb24gIT0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29udGFpbmVyV2l0aEFjdGlvbnMucHJvdG90eXBlLCBcImlzU3RhbmRhbG9uZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBDb250YWluZXJXaXRoQWN0aW9ucztcclxufShDb250YWluZXIpKTtcclxuZXhwb3J0cy5Db250YWluZXJXaXRoQWN0aW9ucyA9IENvbnRhaW5lcldpdGhBY3Rpb25zO1xyXG52YXIgVHlwZVJlZ2lzdHJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVHlwZVJlZ2lzdHJ5KCkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zID0gW107XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG4gICAgVHlwZVJlZ2lzdHJ5LnByb3RvdHlwZS5maW5kVHlwZVJlZ2lzdHJhdGlvbiA9IGZ1bmN0aW9uICh0eXBlTmFtZSkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5faXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2l0ZW1zW2ldLnR5cGVOYW1lID09PSB0eXBlTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIFR5cGVSZWdpc3RyeS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMgPSBbXTtcclxuICAgIH07XHJcbiAgICBUeXBlUmVnaXN0cnkucHJvdG90eXBlLnJlZ2lzdGVyVHlwZSA9IGZ1bmN0aW9uICh0eXBlTmFtZSwgY3JlYXRlSW5zdGFuY2UpIHtcclxuICAgICAgICB2YXIgcmVnaXN0cmF0aW9uSW5mbyA9IHRoaXMuZmluZFR5cGVSZWdpc3RyYXRpb24odHlwZU5hbWUpO1xyXG4gICAgICAgIGlmIChyZWdpc3RyYXRpb25JbmZvICE9IG51bGwpIHtcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uSW5mby5jcmVhdGVJbnN0YW5jZSA9IGNyZWF0ZUluc3RhbmNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgIHR5cGVOYW1lOiB0eXBlTmFtZSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUluc3RhbmNlOiBjcmVhdGVJbnN0YW5jZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLl9pdGVtcy5wdXNoKHJlZ2lzdHJhdGlvbkluZm8pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUeXBlUmVnaXN0cnkucHJvdG90eXBlLnVucmVnaXN0ZXJUeXBlID0gZnVuY3Rpb24gKHR5cGVOYW1lKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9pdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faXRlbXNbaV0udHlwZU5hbWUgPT09IHR5cGVOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pdGVtcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVHlwZVJlZ2lzdHJ5LnByb3RvdHlwZS5jcmVhdGVJbnN0YW5jZSA9IGZ1bmN0aW9uICh0eXBlTmFtZSkge1xyXG4gICAgICAgIHZhciByZWdpc3RyYXRpb25JbmZvID0gdGhpcy5maW5kVHlwZVJlZ2lzdHJhdGlvbih0eXBlTmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvbkluZm8gPyByZWdpc3RyYXRpb25JbmZvLmNyZWF0ZUluc3RhbmNlKCkgOiBudWxsO1xyXG4gICAgfTtcclxuICAgIFR5cGVSZWdpc3RyeS5wcm90b3R5cGUuZ2V0SXRlbUNvdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pdGVtcy5sZW5ndGg7XHJcbiAgICB9O1xyXG4gICAgVHlwZVJlZ2lzdHJ5LnByb3RvdHlwZS5nZXRJdGVtQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXRlbXNbaW5kZXhdO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUeXBlUmVnaXN0cnk7XHJcbn0oKSk7XHJcbmV4cG9ydHMuVHlwZVJlZ2lzdHJ5ID0gVHlwZVJlZ2lzdHJ5O1xyXG52YXIgRWxlbWVudFR5cGVSZWdpc3RyeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhFbGVtZW50VHlwZVJlZ2lzdHJ5LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRWxlbWVudFR5cGVSZWdpc3RyeSgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBFbGVtZW50VHlwZVJlZ2lzdHJ5LnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclR5cGUoXCJDb250YWluZXJcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IENvbnRhaW5lcigpOyB9KTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyVHlwZShcIlRleHRCbG9ja1wiLCBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgVGV4dEJsb2NrKCk7IH0pO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJUeXBlKFwiUmljaFRleHRCbG9ja1wiLCBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgUmljaFRleHRCbG9jaygpOyB9KTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyVHlwZShcIlRleHRSdW5cIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IFRleHRSdW4oKTsgfSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclR5cGUoXCJJbWFnZVwiLCBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgSW1hZ2UoKTsgfSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclR5cGUoXCJJbWFnZVNldFwiLCBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgSW1hZ2VTZXQoKTsgfSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclR5cGUoXCJNZWRpYVwiLCBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgTWVkaWEoKTsgfSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclR5cGUoXCJGYWN0U2V0XCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBGYWN0U2V0KCk7IH0pO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJUeXBlKFwiQ29sdW1uU2V0XCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBDb2x1bW5TZXQoKTsgfSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclR5cGUoXCJBY3Rpb25TZXRcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IEFjdGlvblNldCgpOyB9KTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyVHlwZShcIklucHV0LlRleHRcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IFRleHRJbnB1dCgpOyB9KTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyVHlwZShcIklucHV0LkRhdGVcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IERhdGVJbnB1dCgpOyB9KTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyVHlwZShcIklucHV0LlRpbWVcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IFRpbWVJbnB1dCgpOyB9KTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyVHlwZShcIklucHV0Lk51bWJlclwiLCBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgTnVtYmVySW5wdXQoKTsgfSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclR5cGUoXCJJbnB1dC5DaG9pY2VTZXRcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IENob2ljZVNldElucHV0KCk7IH0pO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJUeXBlKFwiSW5wdXQuVG9nZ2xlXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBUb2dnbGVJbnB1dCgpOyB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRWxlbWVudFR5cGVSZWdpc3RyeTtcclxufShUeXBlUmVnaXN0cnkpKTtcclxuZXhwb3J0cy5FbGVtZW50VHlwZVJlZ2lzdHJ5ID0gRWxlbWVudFR5cGVSZWdpc3RyeTtcclxudmFyIEFjdGlvblR5cGVSZWdpc3RyeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhBY3Rpb25UeXBlUmVnaXN0cnksIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBBY3Rpb25UeXBlUmVnaXN0cnkoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgQWN0aW9uVHlwZVJlZ2lzdHJ5LnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclR5cGUoT3BlblVybEFjdGlvbi5Kc29uVHlwZU5hbWUsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBPcGVuVXJsQWN0aW9uKCk7IH0pO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJUeXBlKFN1Ym1pdEFjdGlvbi5Kc29uVHlwZU5hbWUsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBTdWJtaXRBY3Rpb24oKTsgfSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclR5cGUoU2hvd0NhcmRBY3Rpb24uSnNvblR5cGVOYW1lLCBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgU2hvd0NhcmRBY3Rpb24oKTsgfSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclR5cGUoVG9nZ2xlVmlzaWJpbGl0eUFjdGlvbi5Kc29uVHlwZU5hbWUsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBUb2dnbGVWaXNpYmlsaXR5QWN0aW9uKCk7IH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBBY3Rpb25UeXBlUmVnaXN0cnk7XHJcbn0oVHlwZVJlZ2lzdHJ5KSk7XHJcbmV4cG9ydHMuQWN0aW9uVHlwZVJlZ2lzdHJ5ID0gQWN0aW9uVHlwZVJlZ2lzdHJ5O1xyXG4vLyBAZHluYW1pY1xyXG52YXIgQWRhcHRpdmVDYXJkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEFkYXB0aXZlQ2FyZCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEFkYXB0aXZlQ2FyZCgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5fY2FyZFR5cGVOYW1lID0gXCJBZGFwdGl2ZUNhcmRcIjtcclxuICAgICAgICBfdGhpcy5fZmFsbGJhY2tDYXJkID0gbnVsbDtcclxuICAgICAgICBfdGhpcy5vbkFuY2hvckNsaWNrZWQgPSBudWxsO1xyXG4gICAgICAgIF90aGlzLm9uRXhlY3V0ZUFjdGlvbiA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMub25FbGVtZW50VmlzaWJpbGl0eUNoYW5nZWQgPSBudWxsO1xyXG4gICAgICAgIF90aGlzLm9uSW1hZ2VMb2FkZWQgPSBudWxsO1xyXG4gICAgICAgIF90aGlzLm9uSW5saW5lQ2FyZEV4cGFuZGVkID0gbnVsbDtcclxuICAgICAgICBfdGhpcy5vbklucHV0VmFsdWVDaGFuZ2VkID0gbnVsbDtcclxuICAgICAgICBfdGhpcy5vblBhcnNlRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMub25QYXJzZUFjdGlvbiA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMudmVyc2lvbiA9IG5ldyBIb3N0Q29uZmlnLlZlcnNpb24oMSwgMCk7XHJcbiAgICAgICAgX3RoaXMuZGVzaWduTW9kZSA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBZGFwdGl2ZUNhcmQsIFwicHJvY2Vzc01hcmtkb3duXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHByb2Nlc3NNYXJrZG93biBldmVudCBoYXMgYmVlbiByZW1vdmVkLiBQbGVhc2UgdXBkYXRlIHlvdXIgY29kZSBhbmQgc2V0IG9uUHJvY2Vzc01hcmtkb3duIGluc3RlYWQuXCIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHByb2Nlc3NNYXJrZG93biBldmVudCBoYXMgYmVlbiByZW1vdmVkLiBQbGVhc2UgdXBkYXRlIHlvdXIgY29kZSBhbmQgc2V0IG9uUHJvY2Vzc01hcmtkb3duIGluc3RlYWQuXCIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQWRhcHRpdmVDYXJkLmFwcGx5TWFya2Rvd24gPSBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgIGRpZFByb2Nlc3M6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoQWRhcHRpdmVDYXJkLm9uUHJvY2Vzc01hcmtkb3duKSB7XHJcbiAgICAgICAgICAgIEFkYXB0aXZlQ2FyZC5vblByb2Nlc3NNYXJrZG93bih0ZXh0LCByZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh3aW5kb3dbXCJtYXJrZG93bml0XCJdKSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBtYXJrZG93bml0XHJcbiAgICAgICAgICAgIHJlc3VsdC5vdXRwdXRIdG1sID0gd2luZG93W1wibWFya2Rvd25pdFwiXSgpLnJlbmRlcih0ZXh0KTtcclxuICAgICAgICAgICAgcmVzdWx0LmRpZFByb2Nlc3MgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiTWFya2Rvd24gcHJvY2Vzc2luZyBpc24ndCBlbmFibGVkLiBQbGVhc2Ugc2VlIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2FkYXB0aXZlY2FyZHMjc3VwcG9ydGluZy1tYXJrZG93blwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBBZGFwdGl2ZUNhcmQucHJvdG90eXBlLmlzVmVyc2lvblN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5ieXBhc3NWZXJzaW9uQ2hlY2spIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgdW5zdXBwb3J0ZWRWZXJzaW9uID0gIXRoaXMudmVyc2lvbiB8fFxyXG4gICAgICAgICAgICAgICAgIXRoaXMudmVyc2lvbi5pc1ZhbGlkIHx8XHJcbiAgICAgICAgICAgICAgICAoQWRhcHRpdmVDYXJkLmN1cnJlbnRWZXJzaW9uLm1ham9yIDwgdGhpcy52ZXJzaW9uLm1ham9yKSB8fFxyXG4gICAgICAgICAgICAgICAgKEFkYXB0aXZlQ2FyZC5jdXJyZW50VmVyc2lvbi5tYWpvciA9PSB0aGlzLnZlcnNpb24ubWFqb3IgJiYgQWRhcHRpdmVDYXJkLmN1cnJlbnRWZXJzaW9uLm1pbm9yIDwgdGhpcy52ZXJzaW9uLm1pbm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuICF1bnN1cHBvcnRlZFZlcnNpb247XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEFkYXB0aXZlQ2FyZC5wcm90b3R5cGUuZ2V0SXRlbXNDb2xsZWN0aW9uUHJvcGVydHlOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcImJvZHlcIjtcclxuICAgIH07XHJcbiAgICBBZGFwdGl2ZUNhcmQucHJvdG90eXBlLmludGVybmFsUmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZW5kZXJlZEVsZW1lbnQgPSBfc3VwZXIucHJvdG90eXBlLmludGVybmFsUmVuZGVyLmNhbGwodGhpcyk7XHJcbiAgICAgICAgaWYgKEFkYXB0aXZlQ2FyZC51c2VBZHZhbmNlZENhcmRCb3R0b21UcnVuY2F0aW9uKSB7XHJcbiAgICAgICAgICAgIC8vIFVubGlrZSBjb250YWluZXJzLCB0aGUgcm9vdCBjYXJkIGVsZW1lbnQgc2hvdWxkIGJlIGFsbG93ZWQgdG9cclxuICAgICAgICAgICAgLy8gYmUgc2hvcnRlciB0aGFuIGl0cyBjb250ZW50IChvdGhlcndpc2UgdGhlIG92ZXJmbG93IHRydW5jYXRpb25cclxuICAgICAgICAgICAgLy8gbG9naWMgd291bGQgbmV2ZXIgZ2V0IHRyaWdnZXJlZClcclxuICAgICAgICAgICAgcmVuZGVyZWRFbGVtZW50LnN0eWxlLm1pbkhlaWdodCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZW5kZXJlZEVsZW1lbnQ7XHJcbiAgICB9O1xyXG4gICAgQWRhcHRpdmVDYXJkLnByb3RvdHlwZS5nZXRIYXNCYWNrZ3JvdW5kID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIEFkYXB0aXZlQ2FyZC5wcm90b3R5cGUuZ2V0RGVmYXVsdFBhZGRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTaGFyZWQuUGFkZGluZ0RlZmluaXRpb24oRW51bXMuU3BhY2luZy5QYWRkaW5nLCBFbnVtcy5TcGFjaW5nLlBhZGRpbmcsIEVudW1zLlNwYWNpbmcuUGFkZGluZywgRW51bXMuU3BhY2luZy5QYWRkaW5nKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWRhcHRpdmVDYXJkLnByb3RvdHlwZSwgXCJyZW5kZXJJZkVtcHR5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWRhcHRpdmVDYXJkLnByb3RvdHlwZSwgXCJieXBhc3NWZXJzaW9uQ2hlY2tcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWRhcHRpdmVDYXJkLnByb3RvdHlwZSwgXCJhbGxvd0N1c3RvbVN0eWxlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaG9zdENvbmZpZy5hZGFwdGl2ZUNhcmQgJiYgdGhpcy5ob3N0Q29uZmlnLmFkYXB0aXZlQ2FyZC5hbGxvd0N1c3RvbVN0eWxlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFkYXB0aXZlQ2FyZC5wcm90b3R5cGUsIFwiaGFzQmFja2dyb3VuZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQWRhcHRpdmVDYXJkLnByb3RvdHlwZS5nZXRKc29uVHlwZU5hbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiQWRhcHRpdmVDYXJkXCI7XHJcbiAgICB9O1xyXG4gICAgQWRhcHRpdmVDYXJkLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IF9zdXBlci5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcIiRzY2hlbWFcIiwgXCJodHRwOi8vYWRhcHRpdmVjYXJkcy5pby9zY2hlbWFzL2FkYXB0aXZlLWNhcmQuanNvblwiKTtcclxuICAgICAgICBpZiAoIXRoaXMuYnlwYXNzVmVyc2lvbkNoZWNrICYmIHRoaXMudmVyc2lvbikge1xyXG4gICAgICAgICAgICBVdGlscy5zZXRQcm9wZXJ0eShyZXN1bHQsIFwidmVyc2lvblwiLCB0aGlzLnZlcnNpb24udG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJmYWxsYmFja1RleHRcIiwgdGhpcy5mYWxsYmFja1RleHQpO1xyXG4gICAgICAgIFV0aWxzLnNldFByb3BlcnR5KHJlc3VsdCwgXCJsYW5nXCIsIHRoaXMubGFuZyk7XHJcbiAgICAgICAgVXRpbHMuc2V0UHJvcGVydHkocmVzdWx0LCBcInNwZWFrXCIsIHRoaXMuc3BlYWspO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgQWRhcHRpdmVDYXJkLnByb3RvdHlwZS5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcyA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5pbnRlcm5hbFZhbGlkYXRlUHJvcGVydGllcy5jYWxsKHRoaXMsIGNvbnRleHQpO1xyXG4gICAgICAgIGlmICh0aGlzLl9jYXJkVHlwZU5hbWUgIT0gXCJBZGFwdGl2ZUNhcmRcIikge1xyXG4gICAgICAgICAgICBjb250ZXh0LmFkZEZhaWx1cmUodGhpcywge1xyXG4gICAgICAgICAgICAgICAgZXJyb3I6IEVudW1zLlZhbGlkYXRpb25FcnJvci5NaXNzaW5nQ2FyZFR5cGUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgb3IgbWlzc2luZyBjYXJkIHR5cGUuIE1ha2Ugc3VyZSB0aGUgY2FyZCdzIHR5cGUgcHJvcGVydHkgaXMgc2V0IHRvIFxcXCJBZGFwdGl2ZUNhcmRcXFwiLlwiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuYnlwYXNzVmVyc2lvbkNoZWNrICYmICF0aGlzLnZlcnNpb24pIHtcclxuICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKHRoaXMsIHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBFbnVtcy5WYWxpZGF0aW9uRXJyb3IuUHJvcGVydHlDYW50QmVOdWxsLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaGUgdmVyc2lvbiBwcm9wZXJ0eSBtdXN0IGJlIHNwZWNpZmllZC5cIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIXRoaXMuaXNWZXJzaW9uU3VwcG9ydGVkKCkpIHtcclxuICAgICAgICAgICAgY29udGV4dC5hZGRGYWlsdXJlKHRoaXMsIHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBFbnVtcy5WYWxpZGF0aW9uRXJyb3IuVW5zdXBwb3J0ZWRDYXJkVmVyc2lvbixcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGhlIHNwZWNpZmllZCBjYXJkIHZlcnNpb24gKFwiICsgdGhpcy52ZXJzaW9uICsgXCIpIGlzIG5vdCBzdXBwb3J0ZWQuIFRoZSBtYXhpbXVtIHN1cHBvcnRlZCBjYXJkIHZlcnNpb24gaXMgXCIgKyBBZGFwdGl2ZUNhcmQuY3VycmVudFZlcnNpb25cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEFkYXB0aXZlQ2FyZC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoanNvbiwgZXJyb3JzKSB7XHJcbiAgICAgICAgdGhpcy5fZmFsbGJhY2tDYXJkID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9jYXJkVHlwZU5hbWUgPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1widHlwZVwiXSk7XHJcbiAgICAgICAgdGhpcy5zcGVhayA9IFV0aWxzLmdldFN0cmluZ1ZhbHVlKGpzb25bXCJzcGVha1wiXSk7XHJcbiAgICAgICAgdmFyIGxhbmdJZCA9IFV0aWxzLmdldFN0cmluZ1ZhbHVlKGpzb25bXCJsYW5nXCJdKTtcclxuICAgICAgICBpZiAobGFuZ0lkICYmIHR5cGVvZiBsYW5nSWQgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGFuZyA9IGxhbmdJZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgcmFpc2VQYXJzZUVycm9yKHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogRW51bXMuVmFsaWRhdGlvbkVycm9yLkludmFsaWRQcm9wZXJ0eVZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgfSwgZXJyb3JzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnZlcnNpb24gPSBIb3N0Q29uZmlnLlZlcnNpb24ucGFyc2UoanNvbltcInZlcnNpb25cIl0sIGVycm9ycyk7XHJcbiAgICAgICAgdGhpcy5mYWxsYmFja1RleHQgPSBVdGlscy5nZXRTdHJpbmdWYWx1ZShqc29uW1wiZmFsbGJhY2tUZXh0XCJdKTtcclxuICAgICAgICB2YXIgZmFsbGJhY2tFbGVtZW50ID0gY3JlYXRlRWxlbWVudEluc3RhbmNlKG51bGwsIGpzb25bXCJmYWxsYmFja1wiXSwgIXRoaXMuaXNEZXNpZ25Nb2RlKCksIGVycm9ycyk7XHJcbiAgICAgICAgaWYgKGZhbGxiYWNrRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLl9mYWxsYmFja0NhcmQgPSBuZXcgQWRhcHRpdmVDYXJkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZhbGxiYWNrQ2FyZC5hZGRJdGVtKGZhbGxiYWNrRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucGFyc2UuY2FsbCh0aGlzLCBqc29uLCBlcnJvcnMpO1xyXG4gICAgfTtcclxuICAgIEFkYXB0aXZlQ2FyZC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIHZhciByZW5kZXJlZENhcmQ7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkRmFsbGJhY2soKSAmJiB0aGlzLl9mYWxsYmFja0NhcmQpIHtcclxuICAgICAgICAgICAgdGhpcy5fZmFsbGJhY2tDYXJkLmhvc3RDb25maWcgPSB0aGlzLmhvc3RDb25maWc7XHJcbiAgICAgICAgICAgIHJlbmRlcmVkQ2FyZCA9IHRoaXMuX2ZhbGxiYWNrQ2FyZC5yZW5kZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlbmRlcmVkQ2FyZCA9IF9zdXBlci5wcm90b3R5cGUucmVuZGVyLmNhbGwodGhpcyk7XHJcbiAgICAgICAgICAgIGlmIChyZW5kZXJlZENhcmQpIHtcclxuICAgICAgICAgICAgICAgIHJlbmRlcmVkQ2FyZC5jbGFzc0xpc3QuYWRkKHRoaXMuaG9zdENvbmZpZy5tYWtlQ3NzQ2xhc3NOYW1lKFwiYWMtYWRhcHRpdmVDYXJkXCIpKTtcclxuICAgICAgICAgICAgICAgIHJlbmRlcmVkQ2FyZC50YWJJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbE9yRW1wdHkodGhpcy5zcGVhaykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlZENhcmQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCB0aGlzLnNwZWFrKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChyZW5kZXJlZENhcmQpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVuZGVyZWRDYXJkO1xyXG4gICAgfTtcclxuICAgIEFkYXB0aXZlQ2FyZC5wcm90b3R5cGUudXBkYXRlTGF5b3V0ID0gZnVuY3Rpb24gKHByb2Nlc3NDaGlsZHJlbikge1xyXG4gICAgICAgIGlmIChwcm9jZXNzQ2hpbGRyZW4gPT09IHZvaWQgMCkgeyBwcm9jZXNzQ2hpbGRyZW4gPSB0cnVlOyB9XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51cGRhdGVMYXlvdXQuY2FsbCh0aGlzLCBwcm9jZXNzQ2hpbGRyZW4pO1xyXG4gICAgICAgIGlmIChBZGFwdGl2ZUNhcmQudXNlQWR2YW5jZWRDYXJkQm90dG9tVHJ1bmNhdGlvbiAmJiB0aGlzLmlzUmVuZGVyZWQoKSkge1xyXG4gICAgICAgICAgICB2YXIgY2FyZCA9IHRoaXMucmVuZGVyZWRFbGVtZW50O1xyXG4gICAgICAgICAgICB2YXIgcGFkZGluZyA9IHRoaXMuaG9zdENvbmZpZy5nZXRFZmZlY3RpdmVTcGFjaW5nKEVudW1zLlNwYWNpbmcuRGVmYXVsdCk7XHJcbiAgICAgICAgICAgIHRoaXNbJ2hhbmRsZU92ZXJmbG93J10oY2FyZC5vZmZzZXRIZWlnaHQgLSBwYWRkaW5nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQWRhcHRpdmVDYXJkLnByb3RvdHlwZS5zaG91bGRGYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5zaG91bGRGYWxsYmFjay5jYWxsKHRoaXMpIHx8ICF0aGlzLmlzVmVyc2lvblN1cHBvcnRlZCgpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBZGFwdGl2ZUNhcmQucHJvdG90eXBlLCBcImhhc1Zpc2libGVTZXBhcmF0b3JcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBBZGFwdGl2ZUNhcmQuY3VycmVudFZlcnNpb24gPSBuZXcgSG9zdENvbmZpZy5WZXJzaW9uKDEsIDIpO1xyXG4gICAgQWRhcHRpdmVDYXJkLnVzZUFkdmFuY2VkVGV4dEJsb2NrVHJ1bmNhdGlvbiA9IHRydWU7XHJcbiAgICBBZGFwdGl2ZUNhcmQudXNlQWR2YW5jZWRDYXJkQm90dG9tVHJ1bmNhdGlvbiA9IGZhbHNlO1xyXG4gICAgQWRhcHRpdmVDYXJkLnVzZU1hcmtkb3duSW5SYWRpb0J1dHRvbkFuZENoZWNrYm94ID0gdHJ1ZTtcclxuICAgIEFkYXB0aXZlQ2FyZC5hbGxvd01hcmtGb3JUZXh0SGlnaGxpZ2h0aW5nID0gZmFsc2U7XHJcbiAgICBBZGFwdGl2ZUNhcmQuYWx3YXlzQmxlZWRTZXBhcmF0b3JzID0gZmFsc2U7XHJcbiAgICBBZGFwdGl2ZUNhcmQuZW5hYmxlRnVsbEpzb25Sb3VuZFRyaXAgPSBmYWxzZTtcclxuICAgIEFkYXB0aXZlQ2FyZC51c2VCdWlsdEluSW5wdXRWYWxpZGF0aW9uID0gdHJ1ZTtcclxuICAgIEFkYXB0aXZlQ2FyZC5kaXNwbGF5SW5wdXRWYWxpZGF0aW9uRXJyb3JzID0gdHJ1ZTtcclxuICAgIEFkYXB0aXZlQ2FyZC5lbGVtZW50VHlwZVJlZ2lzdHJ5ID0gbmV3IEVsZW1lbnRUeXBlUmVnaXN0cnkoKTtcclxuICAgIEFkYXB0aXZlQ2FyZC5hY3Rpb25UeXBlUmVnaXN0cnkgPSBuZXcgQWN0aW9uVHlwZVJlZ2lzdHJ5KCk7XHJcbiAgICBBZGFwdGl2ZUNhcmQub25BbmNob3JDbGlja2VkID0gbnVsbDtcclxuICAgIEFkYXB0aXZlQ2FyZC5vbkV4ZWN1dGVBY3Rpb24gPSBudWxsO1xyXG4gICAgQWRhcHRpdmVDYXJkLm9uRWxlbWVudFZpc2liaWxpdHlDaGFuZ2VkID0gbnVsbDtcclxuICAgIEFkYXB0aXZlQ2FyZC5vbkltYWdlTG9hZGVkID0gbnVsbDtcclxuICAgIEFkYXB0aXZlQ2FyZC5vbklubGluZUNhcmRFeHBhbmRlZCA9IG51bGw7XHJcbiAgICBBZGFwdGl2ZUNhcmQub25JbnB1dFZhbHVlQ2hhbmdlZCA9IG51bGw7XHJcbiAgICBBZGFwdGl2ZUNhcmQub25QYXJzZUVsZW1lbnQgPSBudWxsO1xyXG4gICAgQWRhcHRpdmVDYXJkLm9uUGFyc2VBY3Rpb24gPSBudWxsO1xyXG4gICAgQWRhcHRpdmVDYXJkLm9uUGFyc2VFcnJvciA9IG51bGw7XHJcbiAgICBBZGFwdGl2ZUNhcmQub25Qcm9jZXNzTWFya2Rvd24gPSBudWxsO1xyXG4gICAgcmV0dXJuIEFkYXB0aXZlQ2FyZDtcclxufShDb250YWluZXJXaXRoQWN0aW9ucykpO1xyXG5leHBvcnRzLkFkYXB0aXZlQ2FyZCA9IEFkYXB0aXZlQ2FyZDtcclxudmFyIElubGluZUFkYXB0aXZlQ2FyZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhJbmxpbmVBZGFwdGl2ZUNhcmQsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBJbmxpbmVBZGFwdGl2ZUNhcmQoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuc3VwcHJlc3NTdHlsZSA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIElubGluZUFkYXB0aXZlQ2FyZC5wcm90b3R5cGUuZ2V0RGVmYXVsdFBhZGRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTaGFyZWQuUGFkZGluZ0RlZmluaXRpb24odGhpcy5zdXBwcmVzc1N0eWxlID8gRW51bXMuU3BhY2luZy5Ob25lIDogRW51bXMuU3BhY2luZy5QYWRkaW5nLCBFbnVtcy5TcGFjaW5nLlBhZGRpbmcsIHRoaXMuc3VwcHJlc3NTdHlsZSA/IEVudW1zLlNwYWNpbmcuTm9uZSA6IEVudW1zLlNwYWNpbmcuUGFkZGluZywgRW51bXMuU3BhY2luZy5QYWRkaW5nKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSW5saW5lQWRhcHRpdmVDYXJkLnByb3RvdHlwZSwgXCJieXBhc3NWZXJzaW9uQ2hlY2tcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbmxpbmVBZGFwdGl2ZUNhcmQucHJvdG90eXBlLCBcImRlZmF1bHRTdHlsZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN1cHByZXNzU3R5bGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBFbnVtcy5Db250YWluZXJTdHlsZS5EZWZhdWx0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaG9zdENvbmZpZy5hY3Rpb25zLnNob3dDYXJkLnN0eWxlID8gdGhpcy5ob3N0Q29uZmlnLmFjdGlvbnMuc2hvd0NhcmQuc3R5bGUgOiBFbnVtcy5Db250YWluZXJTdHlsZS5FbXBoYXNpcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgSW5saW5lQWRhcHRpdmVDYXJkLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgdmFyIHJlbmRlcmVkQ2FyZCA9IF9zdXBlci5wcm90b3R5cGUucmVuZGVyLmNhbGwodGhpcywgdGFyZ2V0KTtcclxuICAgICAgICByZW5kZXJlZENhcmQuc2V0QXR0cmlidXRlKFwiYXJpYS1saXZlXCIsIFwicG9saXRlXCIpO1xyXG4gICAgICAgIHJlbmRlcmVkQ2FyZC5yZW1vdmVBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKTtcclxuICAgICAgICByZXR1cm4gcmVuZGVyZWRDYXJkO1xyXG4gICAgfTtcclxuICAgIElubGluZUFkYXB0aXZlQ2FyZC5wcm90b3R5cGUuZ2V0Rm9yYmlkZGVuQWN0aW9uVHlwZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtTaG93Q2FyZEFjdGlvbl07XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIElubGluZUFkYXB0aXZlQ2FyZDtcclxufShBZGFwdGl2ZUNhcmQpKTtcclxudmFyIGRlZmF1bHRIb3N0Q29uZmlnID0gbmV3IEhvc3RDb25maWcuSG9zdENvbmZpZyh7XHJcbiAgICBzdXBwb3J0c0ludGVyYWN0aXZpdHk6IHRydWUsXHJcbiAgICBzcGFjaW5nOiB7XHJcbiAgICAgICAgc21hbGw6IDEwLFxyXG4gICAgICAgIGRlZmF1bHQ6IDIwLFxyXG4gICAgICAgIG1lZGl1bTogMzAsXHJcbiAgICAgICAgbGFyZ2U6IDQwLFxyXG4gICAgICAgIGV4dHJhTGFyZ2U6IDUwLFxyXG4gICAgICAgIHBhZGRpbmc6IDIwXHJcbiAgICB9LFxyXG4gICAgc2VwYXJhdG9yOiB7XHJcbiAgICAgICAgbGluZVRoaWNrbmVzczogMSxcclxuICAgICAgICBsaW5lQ29sb3I6IFwiI0VFRUVFRVwiXHJcbiAgICB9LFxyXG4gICAgZm9udFR5cGVzOiB7XHJcbiAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICBmb250RmFtaWx5OiBcIidTZWdvZSBVSScsIFRhaG9tYSwgR2VuZXZhLCBWZXJkYW5hLCBzYW5zLXNlcmlmXCIsXHJcbiAgICAgICAgICAgIGZvbnRTaXplczoge1xyXG4gICAgICAgICAgICAgICAgc21hbGw6IDEyLFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogMTQsXHJcbiAgICAgICAgICAgICAgICBtZWRpdW06IDE3LFxyXG4gICAgICAgICAgICAgICAgbGFyZ2U6IDIxLFxyXG4gICAgICAgICAgICAgICAgZXh0cmFMYXJnZTogMjZcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZm9udFdlaWdodHM6IHtcclxuICAgICAgICAgICAgICAgIGxpZ2h0ZXI6IDIwMCxcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IDQwMCxcclxuICAgICAgICAgICAgICAgIGJvbGRlcjogNjAwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIG1vbm9zcGFjZToge1xyXG4gICAgICAgICAgICBmb250RmFtaWx5OiBcIidDb3VyaWVyIE5ldycsIENvdXJpZXIsIG1vbm9zcGFjZVwiLFxyXG4gICAgICAgICAgICBmb250U2l6ZXM6IHtcclxuICAgICAgICAgICAgICAgIHNtYWxsOiAxMixcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IDE0LFxyXG4gICAgICAgICAgICAgICAgbWVkaXVtOiAxNyxcclxuICAgICAgICAgICAgICAgIGxhcmdlOiAyMSxcclxuICAgICAgICAgICAgICAgIGV4dHJhTGFyZ2U6IDI2XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZvbnRXZWlnaHRzOiB7XHJcbiAgICAgICAgICAgICAgICBsaWdodGVyOiAyMDAsXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiA0MDAsXHJcbiAgICAgICAgICAgICAgICBib2xkZXI6IDYwMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGltYWdlU2l6ZXM6IHtcclxuICAgICAgICBzbWFsbDogNDAsXHJcbiAgICAgICAgbWVkaXVtOiA4MCxcclxuICAgICAgICBsYXJnZTogMTYwXHJcbiAgICB9LFxyXG4gICAgY29udGFpbmVyU3R5bGVzOiB7XHJcbiAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI0ZGRkZGRlwiLFxyXG4gICAgICAgICAgICBmb3JlZ3JvdW5kQ29sb3JzOiB7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMzMzMzMzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNFRTMzMzMzM1wiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGFyazoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzAwMDAwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjNjYwMDAwMDBcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGxpZ2h0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjRkZGRkZGXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiMzMzAwMDAwMFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYWNjZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMkU4OUZDXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiM4ODJFODlGQ1wiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYXR0ZW50aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjY2MzMzAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERGNjMzMwMFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZ29vZDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzU0YTI1NFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjREQ1NGEyNTRcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHdhcm5pbmc6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNlNjk1MDBcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REZTY5NTAwXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW1waGFzaXM6IHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiMwODAwMDAwMFwiLFxyXG4gICAgICAgICAgICBmb3JlZ3JvdW5kQ29sb3JzOiB7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMzMzMzMzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNFRTMzMzMzM1wiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGFyazoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzAwMDAwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjNjYwMDAwMDBcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGxpZ2h0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjRkZGRkZGXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiMzMzAwMDAwMFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYWNjZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMkU4OUZDXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiM4ODJFODlGQ1wiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYXR0ZW50aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjY2MzMzAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERGNjMzMwMFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZ29vZDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzU0YTI1NFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjREQ1NGEyNTRcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHdhcm5pbmc6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNlNjk1MDBcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REZTY5NTAwXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWNjZW50OiB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjQzdERUY5XCIsXHJcbiAgICAgICAgICAgIGZvcmVncm91bmRDb2xvcnM6IHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMzMzMzMzNcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0VFMzMzMzMzXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkYXJrOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMDAwMDAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiM2NjAwMDAwMFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbGlnaHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNGRkZGRkZcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzMzMDAwMDAwXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhY2NlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMyRTg5RkNcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzg4MkU4OUZDXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhdHRlbnRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNjYzMzMDBcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REY2MzMzAwXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBnb29kOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjNTRhMjU0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERDU0YTI1NFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgd2FybmluZzoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI2U2OTUwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRERlNjk1MDBcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnb29kOiB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjQ0NGRkNDXCIsXHJcbiAgICAgICAgICAgIGZvcmVncm91bmRDb2xvcnM6IHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMzMzMzMzNcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0VFMzMzMzMzXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkYXJrOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMDAwMDAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiM2NjAwMDAwMFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbGlnaHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNGRkZGRkZcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzMzMDAwMDAwXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhY2NlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMyRTg5RkNcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzg4MkU4OUZDXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhdHRlbnRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNjYzMzMDBcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REY2MzMzAwXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBnb29kOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjNTRhMjU0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERDU0YTI1NFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgd2FybmluZzoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI2U2OTUwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRERlNjk1MDBcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhdHRlbnRpb246IHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNGRkM1QjJcIixcclxuICAgICAgICAgICAgZm9yZWdyb3VuZENvbG9yczoge1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzMzMzMzM1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRUUzMzMzMzNcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRhcms6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMwMDAwMDBcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzY2MDAwMDAwXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBsaWdodDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI0ZGRkZGRlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjMzMwMDAwMDBcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFjY2VudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzJFODlGQ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjODgyRTg5RkNcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGF0dGVudGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI2NjMzMwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRERjYzMzMDBcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGdvb2Q6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiM1NGEyNTRcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0RENTRhMjU0XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB3YXJuaW5nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjZTY5NTAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERGU2OTUwMFwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHdhcm5pbmc6IHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNGRkUyQjJcIixcclxuICAgICAgICAgICAgZm9yZWdyb3VuZENvbG9yczoge1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzMzMzMzM1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRUUzMzMzMzNcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRhcms6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMwMDAwMDBcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzY2MDAwMDAwXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBsaWdodDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI0ZGRkZGRlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjMzMwMDAwMDBcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFjY2VudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzJFODlGQ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjODgyRTg5RkNcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGF0dGVudGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI2NjMzMwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRERjYzMzMDBcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGdvb2Q6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiM1NGEyNTRcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0RENTRhMjU0XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB3YXJuaW5nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjZTY5NTAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERGU2OTUwMFwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgYWN0aW9uczoge1xyXG4gICAgICAgIG1heEFjdGlvbnM6IDUsXHJcbiAgICAgICAgc3BhY2luZzogRW51bXMuU3BhY2luZy5EZWZhdWx0LFxyXG4gICAgICAgIGJ1dHRvblNwYWNpbmc6IDEwLFxyXG4gICAgICAgIHNob3dDYXJkOiB7XHJcbiAgICAgICAgICAgIGFjdGlvbk1vZGU6IEVudW1zLlNob3dDYXJkQWN0aW9uTW9kZS5JbmxpbmUsXHJcbiAgICAgICAgICAgIGlubGluZVRvcE1hcmdpbjogMTZcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFjdGlvbnNPcmllbnRhdGlvbjogRW51bXMuT3JpZW50YXRpb24uSG9yaXpvbnRhbCxcclxuICAgICAgICBhY3Rpb25BbGlnbm1lbnQ6IEVudW1zLkFjdGlvbkFsaWdubWVudC5MZWZ0XHJcbiAgICB9LFxyXG4gICAgYWRhcHRpdmVDYXJkOiB7XHJcbiAgICAgICAgYWxsb3dDdXN0b21TdHlsZTogZmFsc2VcclxuICAgIH0sXHJcbiAgICBpbWFnZVNldDoge1xyXG4gICAgICAgIGltYWdlU2l6ZTogRW51bXMuU2l6ZS5NZWRpdW0sXHJcbiAgICAgICAgbWF4SW1hZ2VIZWlnaHQ6IDEwMFxyXG4gICAgfSxcclxuICAgIGZhY3RTZXQ6IHtcclxuICAgICAgICB0aXRsZToge1xyXG4gICAgICAgICAgICBjb2xvcjogRW51bXMuVGV4dENvbG9yLkRlZmF1bHQsXHJcbiAgICAgICAgICAgIHNpemU6IEVudW1zLlRleHRTaXplLkRlZmF1bHQsXHJcbiAgICAgICAgICAgIGlzU3VidGxlOiBmYWxzZSxcclxuICAgICAgICAgICAgd2VpZ2h0OiBFbnVtcy5UZXh0V2VpZ2h0LkJvbGRlcixcclxuICAgICAgICAgICAgd3JhcDogdHJ1ZSxcclxuICAgICAgICAgICAgbWF4V2lkdGg6IDE1MCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHZhbHVlOiB7XHJcbiAgICAgICAgICAgIGNvbG9yOiBFbnVtcy5UZXh0Q29sb3IuRGVmYXVsdCxcclxuICAgICAgICAgICAgc2l6ZTogRW51bXMuVGV4dFNpemUuRGVmYXVsdCxcclxuICAgICAgICAgICAgaXNTdWJ0bGU6IGZhbHNlLFxyXG4gICAgICAgICAgICB3ZWlnaHQ6IEVudW1zLlRleHRXZWlnaHQuRGVmYXVsdCxcclxuICAgICAgICAgICAgd3JhcDogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNwYWNpbmc6IDEwXHJcbiAgICB9XHJcbn0pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYXJkLWVsZW1lbnRzLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIE5vdGUgdGhlIFwid2VpcmRcIiB3YXkgdGhlc2UgcmVhZG9ubHkgZmllbGRzIGFyZSBkZWNsYXJlZCBpcyB0byB3b3JrIGFyb3VuZFxyXG4vLyBhIGJyZWFraW5nIGNoYW5nZSBpbnRyb2R1Y2VkIGluIFRTIDMuMSB3cnQgZC50cyBnZW5lcmF0aW9uLiBETyBOT1QgQ0hBTkdFXHJcbi8vIGFuZCBhZG9wdCB0aGlzIHN5bnRheCBmb3IgYWxsIG90aGVyIHN0YXRpYyByZWFkb25seSBmaWVsZHMuXHJcbnZhciBBY3Rpb25TdHlsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFjdGlvblN0eWxlKCkge1xyXG4gICAgfVxyXG4gICAgQWN0aW9uU3R5bGUuRGVmYXVsdCA9IFwiZGVmYXVsdFwiO1xyXG4gICAgQWN0aW9uU3R5bGUuUG9zaXRpdmUgPSBcInBvc2l0aXZlXCI7XHJcbiAgICBBY3Rpb25TdHlsZS5EZXN0cnVjdGl2ZSA9IFwiZGVzdHJ1Y3RpdmVcIjtcclxuICAgIHJldHVybiBBY3Rpb25TdHlsZTtcclxufSgpKTtcclxuZXhwb3J0cy5BY3Rpb25TdHlsZSA9IEFjdGlvblN0eWxlO1xyXG52YXIgU2l6ZTtcclxuKGZ1bmN0aW9uIChTaXplKSB7XHJcbiAgICBTaXplW1NpemVbXCJBdXRvXCJdID0gMF0gPSBcIkF1dG9cIjtcclxuICAgIFNpemVbU2l6ZVtcIlN0cmV0Y2hcIl0gPSAxXSA9IFwiU3RyZXRjaFwiO1xyXG4gICAgU2l6ZVtTaXplW1wiU21hbGxcIl0gPSAyXSA9IFwiU21hbGxcIjtcclxuICAgIFNpemVbU2l6ZVtcIk1lZGl1bVwiXSA9IDNdID0gXCJNZWRpdW1cIjtcclxuICAgIFNpemVbU2l6ZVtcIkxhcmdlXCJdID0gNF0gPSBcIkxhcmdlXCI7XHJcbn0pKFNpemUgPSBleHBvcnRzLlNpemUgfHwgKGV4cG9ydHMuU2l6ZSA9IHt9KSk7XHJcbnZhciBTaXplVW5pdDtcclxuKGZ1bmN0aW9uIChTaXplVW5pdCkge1xyXG4gICAgU2l6ZVVuaXRbU2l6ZVVuaXRbXCJXZWlnaHRcIl0gPSAwXSA9IFwiV2VpZ2h0XCI7XHJcbiAgICBTaXplVW5pdFtTaXplVW5pdFtcIlBpeGVsXCJdID0gMV0gPSBcIlBpeGVsXCI7XHJcbn0pKFNpemVVbml0ID0gZXhwb3J0cy5TaXplVW5pdCB8fCAoZXhwb3J0cy5TaXplVW5pdCA9IHt9KSk7XHJcbnZhciBUZXh0U2l6ZTtcclxuKGZ1bmN0aW9uIChUZXh0U2l6ZSkge1xyXG4gICAgVGV4dFNpemVbVGV4dFNpemVbXCJTbWFsbFwiXSA9IDBdID0gXCJTbWFsbFwiO1xyXG4gICAgVGV4dFNpemVbVGV4dFNpemVbXCJEZWZhdWx0XCJdID0gMV0gPSBcIkRlZmF1bHRcIjtcclxuICAgIFRleHRTaXplW1RleHRTaXplW1wiTWVkaXVtXCJdID0gMl0gPSBcIk1lZGl1bVwiO1xyXG4gICAgVGV4dFNpemVbVGV4dFNpemVbXCJMYXJnZVwiXSA9IDNdID0gXCJMYXJnZVwiO1xyXG4gICAgVGV4dFNpemVbVGV4dFNpemVbXCJFeHRyYUxhcmdlXCJdID0gNF0gPSBcIkV4dHJhTGFyZ2VcIjtcclxufSkoVGV4dFNpemUgPSBleHBvcnRzLlRleHRTaXplIHx8IChleHBvcnRzLlRleHRTaXplID0ge30pKTtcclxudmFyIFRleHRXZWlnaHQ7XHJcbihmdW5jdGlvbiAoVGV4dFdlaWdodCkge1xyXG4gICAgVGV4dFdlaWdodFtUZXh0V2VpZ2h0W1wiTGlnaHRlclwiXSA9IDBdID0gXCJMaWdodGVyXCI7XHJcbiAgICBUZXh0V2VpZ2h0W1RleHRXZWlnaHRbXCJEZWZhdWx0XCJdID0gMV0gPSBcIkRlZmF1bHRcIjtcclxuICAgIFRleHRXZWlnaHRbVGV4dFdlaWdodFtcIkJvbGRlclwiXSA9IDJdID0gXCJCb2xkZXJcIjtcclxufSkoVGV4dFdlaWdodCA9IGV4cG9ydHMuVGV4dFdlaWdodCB8fCAoZXhwb3J0cy5UZXh0V2VpZ2h0ID0ge30pKTtcclxudmFyIEZvbnRUeXBlO1xyXG4oZnVuY3Rpb24gKEZvbnRUeXBlKSB7XHJcbiAgICBGb250VHlwZVtGb250VHlwZVtcIkRlZmF1bHRcIl0gPSAwXSA9IFwiRGVmYXVsdFwiO1xyXG4gICAgRm9udFR5cGVbRm9udFR5cGVbXCJNb25vc3BhY2VcIl0gPSAxXSA9IFwiTW9ub3NwYWNlXCI7XHJcbn0pKEZvbnRUeXBlID0gZXhwb3J0cy5Gb250VHlwZSB8fCAoZXhwb3J0cy5Gb250VHlwZSA9IHt9KSk7XHJcbnZhciBTcGFjaW5nO1xyXG4oZnVuY3Rpb24gKFNwYWNpbmcpIHtcclxuICAgIFNwYWNpbmdbU3BhY2luZ1tcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xyXG4gICAgU3BhY2luZ1tTcGFjaW5nW1wiU21hbGxcIl0gPSAxXSA9IFwiU21hbGxcIjtcclxuICAgIFNwYWNpbmdbU3BhY2luZ1tcIkRlZmF1bHRcIl0gPSAyXSA9IFwiRGVmYXVsdFwiO1xyXG4gICAgU3BhY2luZ1tTcGFjaW5nW1wiTWVkaXVtXCJdID0gM10gPSBcIk1lZGl1bVwiO1xyXG4gICAgU3BhY2luZ1tTcGFjaW5nW1wiTGFyZ2VcIl0gPSA0XSA9IFwiTGFyZ2VcIjtcclxuICAgIFNwYWNpbmdbU3BhY2luZ1tcIkV4dHJhTGFyZ2VcIl0gPSA1XSA9IFwiRXh0cmFMYXJnZVwiO1xyXG4gICAgU3BhY2luZ1tTcGFjaW5nW1wiUGFkZGluZ1wiXSA9IDZdID0gXCJQYWRkaW5nXCI7XHJcbn0pKFNwYWNpbmcgPSBleHBvcnRzLlNwYWNpbmcgfHwgKGV4cG9ydHMuU3BhY2luZyA9IHt9KSk7XHJcbnZhciBUZXh0Q29sb3I7XHJcbihmdW5jdGlvbiAoVGV4dENvbG9yKSB7XHJcbiAgICBUZXh0Q29sb3JbVGV4dENvbG9yW1wiRGVmYXVsdFwiXSA9IDBdID0gXCJEZWZhdWx0XCI7XHJcbiAgICBUZXh0Q29sb3JbVGV4dENvbG9yW1wiRGFya1wiXSA9IDFdID0gXCJEYXJrXCI7XHJcbiAgICBUZXh0Q29sb3JbVGV4dENvbG9yW1wiTGlnaHRcIl0gPSAyXSA9IFwiTGlnaHRcIjtcclxuICAgIFRleHRDb2xvcltUZXh0Q29sb3JbXCJBY2NlbnRcIl0gPSAzXSA9IFwiQWNjZW50XCI7XHJcbiAgICBUZXh0Q29sb3JbVGV4dENvbG9yW1wiR29vZFwiXSA9IDRdID0gXCJHb29kXCI7XHJcbiAgICBUZXh0Q29sb3JbVGV4dENvbG9yW1wiV2FybmluZ1wiXSA9IDVdID0gXCJXYXJuaW5nXCI7XHJcbiAgICBUZXh0Q29sb3JbVGV4dENvbG9yW1wiQXR0ZW50aW9uXCJdID0gNl0gPSBcIkF0dGVudGlvblwiO1xyXG59KShUZXh0Q29sb3IgPSBleHBvcnRzLlRleHRDb2xvciB8fCAoZXhwb3J0cy5UZXh0Q29sb3IgPSB7fSkpO1xyXG52YXIgSG9yaXpvbnRhbEFsaWdubWVudDtcclxuKGZ1bmN0aW9uIChIb3Jpem9udGFsQWxpZ25tZW50KSB7XHJcbiAgICBIb3Jpem9udGFsQWxpZ25tZW50W0hvcml6b250YWxBbGlnbm1lbnRbXCJMZWZ0XCJdID0gMF0gPSBcIkxlZnRcIjtcclxuICAgIEhvcml6b250YWxBbGlnbm1lbnRbSG9yaXpvbnRhbEFsaWdubWVudFtcIkNlbnRlclwiXSA9IDFdID0gXCJDZW50ZXJcIjtcclxuICAgIEhvcml6b250YWxBbGlnbm1lbnRbSG9yaXpvbnRhbEFsaWdubWVudFtcIlJpZ2h0XCJdID0gMl0gPSBcIlJpZ2h0XCI7XHJcbn0pKEhvcml6b250YWxBbGlnbm1lbnQgPSBleHBvcnRzLkhvcml6b250YWxBbGlnbm1lbnQgfHwgKGV4cG9ydHMuSG9yaXpvbnRhbEFsaWdubWVudCA9IHt9KSk7XHJcbnZhciBWZXJ0aWNhbEFsaWdubWVudDtcclxuKGZ1bmN0aW9uIChWZXJ0aWNhbEFsaWdubWVudCkge1xyXG4gICAgVmVydGljYWxBbGlnbm1lbnRbVmVydGljYWxBbGlnbm1lbnRbXCJUb3BcIl0gPSAwXSA9IFwiVG9wXCI7XHJcbiAgICBWZXJ0aWNhbEFsaWdubWVudFtWZXJ0aWNhbEFsaWdubWVudFtcIkNlbnRlclwiXSA9IDFdID0gXCJDZW50ZXJcIjtcclxuICAgIFZlcnRpY2FsQWxpZ25tZW50W1ZlcnRpY2FsQWxpZ25tZW50W1wiQm90dG9tXCJdID0gMl0gPSBcIkJvdHRvbVwiO1xyXG59KShWZXJ0aWNhbEFsaWdubWVudCA9IGV4cG9ydHMuVmVydGljYWxBbGlnbm1lbnQgfHwgKGV4cG9ydHMuVmVydGljYWxBbGlnbm1lbnQgPSB7fSkpO1xyXG52YXIgQWN0aW9uQWxpZ25tZW50O1xyXG4oZnVuY3Rpb24gKEFjdGlvbkFsaWdubWVudCkge1xyXG4gICAgQWN0aW9uQWxpZ25tZW50W0FjdGlvbkFsaWdubWVudFtcIkxlZnRcIl0gPSAwXSA9IFwiTGVmdFwiO1xyXG4gICAgQWN0aW9uQWxpZ25tZW50W0FjdGlvbkFsaWdubWVudFtcIkNlbnRlclwiXSA9IDFdID0gXCJDZW50ZXJcIjtcclxuICAgIEFjdGlvbkFsaWdubWVudFtBY3Rpb25BbGlnbm1lbnRbXCJSaWdodFwiXSA9IDJdID0gXCJSaWdodFwiO1xyXG4gICAgQWN0aW9uQWxpZ25tZW50W0FjdGlvbkFsaWdubWVudFtcIlN0cmV0Y2hcIl0gPSAzXSA9IFwiU3RyZXRjaFwiO1xyXG59KShBY3Rpb25BbGlnbm1lbnQgPSBleHBvcnRzLkFjdGlvbkFsaWdubWVudCB8fCAoZXhwb3J0cy5BY3Rpb25BbGlnbm1lbnQgPSB7fSkpO1xyXG52YXIgSW1hZ2VTdHlsZTtcclxuKGZ1bmN0aW9uIChJbWFnZVN0eWxlKSB7XHJcbiAgICBJbWFnZVN0eWxlW0ltYWdlU3R5bGVbXCJEZWZhdWx0XCJdID0gMF0gPSBcIkRlZmF1bHRcIjtcclxuICAgIEltYWdlU3R5bGVbSW1hZ2VTdHlsZVtcIlBlcnNvblwiXSA9IDFdID0gXCJQZXJzb25cIjtcclxufSkoSW1hZ2VTdHlsZSA9IGV4cG9ydHMuSW1hZ2VTdHlsZSB8fCAoZXhwb3J0cy5JbWFnZVN0eWxlID0ge30pKTtcclxudmFyIFNob3dDYXJkQWN0aW9uTW9kZTtcclxuKGZ1bmN0aW9uIChTaG93Q2FyZEFjdGlvbk1vZGUpIHtcclxuICAgIFNob3dDYXJkQWN0aW9uTW9kZVtTaG93Q2FyZEFjdGlvbk1vZGVbXCJJbmxpbmVcIl0gPSAwXSA9IFwiSW5saW5lXCI7XHJcbiAgICBTaG93Q2FyZEFjdGlvbk1vZGVbU2hvd0NhcmRBY3Rpb25Nb2RlW1wiUG9wdXBcIl0gPSAxXSA9IFwiUG9wdXBcIjtcclxufSkoU2hvd0NhcmRBY3Rpb25Nb2RlID0gZXhwb3J0cy5TaG93Q2FyZEFjdGlvbk1vZGUgfHwgKGV4cG9ydHMuU2hvd0NhcmRBY3Rpb25Nb2RlID0ge30pKTtcclxudmFyIE9yaWVudGF0aW9uO1xyXG4oZnVuY3Rpb24gKE9yaWVudGF0aW9uKSB7XHJcbiAgICBPcmllbnRhdGlvbltPcmllbnRhdGlvbltcIkhvcml6b250YWxcIl0gPSAwXSA9IFwiSG9yaXpvbnRhbFwiO1xyXG4gICAgT3JpZW50YXRpb25bT3JpZW50YXRpb25bXCJWZXJ0aWNhbFwiXSA9IDFdID0gXCJWZXJ0aWNhbFwiO1xyXG59KShPcmllbnRhdGlvbiA9IGV4cG9ydHMuT3JpZW50YXRpb24gfHwgKGV4cG9ydHMuT3JpZW50YXRpb24gPSB7fSkpO1xyXG52YXIgRmlsbE1vZGU7XHJcbihmdW5jdGlvbiAoRmlsbE1vZGUpIHtcclxuICAgIEZpbGxNb2RlW0ZpbGxNb2RlW1wiQ292ZXJcIl0gPSAwXSA9IFwiQ292ZXJcIjtcclxuICAgIEZpbGxNb2RlW0ZpbGxNb2RlW1wiUmVwZWF0SG9yaXpvbnRhbGx5XCJdID0gMV0gPSBcIlJlcGVhdEhvcml6b250YWxseVwiO1xyXG4gICAgRmlsbE1vZGVbRmlsbE1vZGVbXCJSZXBlYXRWZXJ0aWNhbGx5XCJdID0gMl0gPSBcIlJlcGVhdFZlcnRpY2FsbHlcIjtcclxuICAgIEZpbGxNb2RlW0ZpbGxNb2RlW1wiUmVwZWF0XCJdID0gM10gPSBcIlJlcGVhdFwiO1xyXG59KShGaWxsTW9kZSA9IGV4cG9ydHMuRmlsbE1vZGUgfHwgKGV4cG9ydHMuRmlsbE1vZGUgPSB7fSkpO1xyXG52YXIgQWN0aW9uSWNvblBsYWNlbWVudDtcclxuKGZ1bmN0aW9uIChBY3Rpb25JY29uUGxhY2VtZW50KSB7XHJcbiAgICBBY3Rpb25JY29uUGxhY2VtZW50W0FjdGlvbkljb25QbGFjZW1lbnRbXCJMZWZ0T2ZUaXRsZVwiXSA9IDBdID0gXCJMZWZ0T2ZUaXRsZVwiO1xyXG4gICAgQWN0aW9uSWNvblBsYWNlbWVudFtBY3Rpb25JY29uUGxhY2VtZW50W1wiQWJvdmVUaXRsZVwiXSA9IDFdID0gXCJBYm92ZVRpdGxlXCI7XHJcbn0pKEFjdGlvbkljb25QbGFjZW1lbnQgPSBleHBvcnRzLkFjdGlvbkljb25QbGFjZW1lbnQgfHwgKGV4cG9ydHMuQWN0aW9uSWNvblBsYWNlbWVudCA9IHt9KSk7XHJcbnZhciBJbnB1dFRleHRTdHlsZTtcclxuKGZ1bmN0aW9uIChJbnB1dFRleHRTdHlsZSkge1xyXG4gICAgSW5wdXRUZXh0U3R5bGVbSW5wdXRUZXh0U3R5bGVbXCJUZXh0XCJdID0gMF0gPSBcIlRleHRcIjtcclxuICAgIElucHV0VGV4dFN0eWxlW0lucHV0VGV4dFN0eWxlW1wiVGVsXCJdID0gMV0gPSBcIlRlbFwiO1xyXG4gICAgSW5wdXRUZXh0U3R5bGVbSW5wdXRUZXh0U3R5bGVbXCJVcmxcIl0gPSAyXSA9IFwiVXJsXCI7XHJcbiAgICBJbnB1dFRleHRTdHlsZVtJbnB1dFRleHRTdHlsZVtcIkVtYWlsXCJdID0gM10gPSBcIkVtYWlsXCI7XHJcbn0pKElucHV0VGV4dFN0eWxlID0gZXhwb3J0cy5JbnB1dFRleHRTdHlsZSB8fCAoZXhwb3J0cy5JbnB1dFRleHRTdHlsZSA9IHt9KSk7XHJcbnZhciBJbnB1dFZhbGlkYXRpb25OZWNlc3NpdHk7XHJcbihmdW5jdGlvbiAoSW5wdXRWYWxpZGF0aW9uTmVjZXNzaXR5KSB7XHJcbiAgICBJbnB1dFZhbGlkYXRpb25OZWNlc3NpdHlbSW5wdXRWYWxpZGF0aW9uTmVjZXNzaXR5W1wiT3B0aW9uYWxcIl0gPSAwXSA9IFwiT3B0aW9uYWxcIjtcclxuICAgIElucHV0VmFsaWRhdGlvbk5lY2Vzc2l0eVtJbnB1dFZhbGlkYXRpb25OZWNlc3NpdHlbXCJSZXF1aXJlZFwiXSA9IDFdID0gXCJSZXF1aXJlZFwiO1xyXG4gICAgSW5wdXRWYWxpZGF0aW9uTmVjZXNzaXR5W0lucHV0VmFsaWRhdGlvbk5lY2Vzc2l0eVtcIlJlcXVpcmVkV2l0aFZpc3VhbEN1ZVwiXSA9IDJdID0gXCJSZXF1aXJlZFdpdGhWaXN1YWxDdWVcIjtcclxufSkoSW5wdXRWYWxpZGF0aW9uTmVjZXNzaXR5ID0gZXhwb3J0cy5JbnB1dFZhbGlkYXRpb25OZWNlc3NpdHkgfHwgKGV4cG9ydHMuSW5wdXRWYWxpZGF0aW9uTmVjZXNzaXR5ID0ge30pKTtcclxuLypcclxuICAgIFRoaXMgc2hvdWxkIHJlYWxseSBiZSBhIHN0cmluZyBlbnVtLCBlLmcuXHJcblxyXG4gICAgICAgIGV4cG9ydCBlbnVtIENvbnRhaW5lclN0eWxlIHtcclxuICAgICAgICAgICAgRGVmYXVsdCA9IFwiZGVmYXVsdFwiLFxyXG4gICAgICAgICAgICBFbXBoYXNpcyA9IFwiZW1waGFzaXNcIlxyXG4gICAgICAgIH1cclxuXHJcbiAgICBIb3dldmVyLCBzb21lIGhvc3RzIGRvIG5vdCB1c2UgYSB2ZXJzaW9uIG9mIFR5cGVTY3JpcHRcclxuICAgIHJlY2VudCBlbm91Z2ggdG8gdW5kZXJzdGFuZCBzdHJpbmcgZW51bXMuIFRoaXMgaXNcclxuICAgIGEgY29tcGF0aWJsZSBjb25zdHJ1Y3QgdGhhdCBkb2VzIG5vdCByZXF1aXJlIHVzaW5nXHJcbiAgICBhIG1vcmUgcmVjZW50IHZlcnNpb24gb2YgVHlwZVNjcmlwdC5cclxuXHJcbiAgICBBbHNvIG5vdGUgdGhlIFwid2VpcmRcIiB3YXkgdGhlc2UgcmVhZG9ubHkgZmllbGRzIGFyZSBkZWNsYXJlZCBpcyB0byB3b3JrIGFyb3VuZFxyXG4gICAgYSBicmVha2luZyBjaGFuZ2UgaW50cm9kdWNlZCBpbiBUUyAzLjEgd3J0IGQudHMgZ2VuZXJhdGlvbi4gRE8gTk9UIENIQU5HRVxyXG4gICAgYW5kIGFkb3B0IHRoaXMgc3ludGF4IGZvciBhbGwgb3RoZXIgc3RhdGljIHJlYWRvbmx5IGZpZWxkcy5cclxuKi9cclxudmFyIENvbnRhaW5lclN0eWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ29udGFpbmVyU3R5bGUoKSB7XHJcbiAgICB9XHJcbiAgICBDb250YWluZXJTdHlsZS5EZWZhdWx0ID0gXCJkZWZhdWx0XCI7XHJcbiAgICBDb250YWluZXJTdHlsZS5FbXBoYXNpcyA9IFwiZW1waGFzaXNcIjtcclxuICAgIENvbnRhaW5lclN0eWxlLkFjY2VudCA9IFwiYWNjZW50XCI7XHJcbiAgICBDb250YWluZXJTdHlsZS5Hb29kID0gXCJnb29kXCI7XHJcbiAgICBDb250YWluZXJTdHlsZS5BdHRlbnRpb24gPSBcImF0dGVudGlvblwiO1xyXG4gICAgQ29udGFpbmVyU3R5bGUuV2FybmluZyA9IFwid2FybmluZ1wiO1xyXG4gICAgcmV0dXJuIENvbnRhaW5lclN0eWxlO1xyXG59KCkpO1xyXG5leHBvcnRzLkNvbnRhaW5lclN0eWxlID0gQ29udGFpbmVyU3R5bGU7XHJcbnZhciBWYWxpZGF0aW9uRXJyb3I7XHJcbihmdW5jdGlvbiAoVmFsaWRhdGlvbkVycm9yKSB7XHJcbiAgICBWYWxpZGF0aW9uRXJyb3JbVmFsaWRhdGlvbkVycm9yW1wiSGludFwiXSA9IDBdID0gXCJIaW50XCI7XHJcbiAgICBWYWxpZGF0aW9uRXJyb3JbVmFsaWRhdGlvbkVycm9yW1wiQWN0aW9uVHlwZU5vdEFsbG93ZWRcIl0gPSAxXSA9IFwiQWN0aW9uVHlwZU5vdEFsbG93ZWRcIjtcclxuICAgIFZhbGlkYXRpb25FcnJvcltWYWxpZGF0aW9uRXJyb3JbXCJDb2xsZWN0aW9uQ2FudEJlRW1wdHlcIl0gPSAyXSA9IFwiQ29sbGVjdGlvbkNhbnRCZUVtcHR5XCI7XHJcbiAgICBWYWxpZGF0aW9uRXJyb3JbVmFsaWRhdGlvbkVycm9yW1wiRGVwcmVjYXRlZFwiXSA9IDNdID0gXCJEZXByZWNhdGVkXCI7XHJcbiAgICBWYWxpZGF0aW9uRXJyb3JbVmFsaWRhdGlvbkVycm9yW1wiRWxlbWVudFR5cGVOb3RBbGxvd2VkXCJdID0gNF0gPSBcIkVsZW1lbnRUeXBlTm90QWxsb3dlZFwiO1xyXG4gICAgVmFsaWRhdGlvbkVycm9yW1ZhbGlkYXRpb25FcnJvcltcIkludGVyYWN0aXZpdHlOb3RBbGxvd2VkXCJdID0gNV0gPSBcIkludGVyYWN0aXZpdHlOb3RBbGxvd2VkXCI7XHJcbiAgICBWYWxpZGF0aW9uRXJyb3JbVmFsaWRhdGlvbkVycm9yW1wiSW52YWxpZFByb3BlcnR5VmFsdWVcIl0gPSA2XSA9IFwiSW52YWxpZFByb3BlcnR5VmFsdWVcIjtcclxuICAgIFZhbGlkYXRpb25FcnJvcltWYWxpZGF0aW9uRXJyb3JbXCJNaXNzaW5nQ2FyZFR5cGVcIl0gPSA3XSA9IFwiTWlzc2luZ0NhcmRUeXBlXCI7XHJcbiAgICBWYWxpZGF0aW9uRXJyb3JbVmFsaWRhdGlvbkVycm9yW1wiUHJvcGVydHlDYW50QmVOdWxsXCJdID0gOF0gPSBcIlByb3BlcnR5Q2FudEJlTnVsbFwiO1xyXG4gICAgVmFsaWRhdGlvbkVycm9yW1ZhbGlkYXRpb25FcnJvcltcIlRvb01hbnlBY3Rpb25zXCJdID0gOV0gPSBcIlRvb01hbnlBY3Rpb25zXCI7XHJcbiAgICBWYWxpZGF0aW9uRXJyb3JbVmFsaWRhdGlvbkVycm9yW1wiVW5rbm93bkFjdGlvblR5cGVcIl0gPSAxMF0gPSBcIlVua25vd25BY3Rpb25UeXBlXCI7XHJcbiAgICBWYWxpZGF0aW9uRXJyb3JbVmFsaWRhdGlvbkVycm9yW1wiVW5rbm93bkVsZW1lbnRUeXBlXCJdID0gMTFdID0gXCJVbmtub3duRWxlbWVudFR5cGVcIjtcclxuICAgIFZhbGlkYXRpb25FcnJvcltWYWxpZGF0aW9uRXJyb3JbXCJVbnN1cHBvcnRlZENhcmRWZXJzaW9uXCJdID0gMTJdID0gXCJVbnN1cHBvcnRlZENhcmRWZXJzaW9uXCI7XHJcbiAgICBWYWxpZGF0aW9uRXJyb3JbVmFsaWRhdGlvbkVycm9yW1wiRHVwbGljYXRlSWRcIl0gPSAxM10gPSBcIkR1cGxpY2F0ZUlkXCI7XHJcbn0pKFZhbGlkYXRpb25FcnJvciA9IGV4cG9ydHMuVmFsaWRhdGlvbkVycm9yIHx8IChleHBvcnRzLlZhbGlkYXRpb25FcnJvciA9IHt9KSk7XHJcbnZhciBDb250YWluZXJGaXRTdGF0dXM7XHJcbihmdW5jdGlvbiAoQ29udGFpbmVyRml0U3RhdHVzKSB7XHJcbiAgICBDb250YWluZXJGaXRTdGF0dXNbQ29udGFpbmVyRml0U3RhdHVzW1wiRnVsbHlJbkNvbnRhaW5lclwiXSA9IDBdID0gXCJGdWxseUluQ29udGFpbmVyXCI7XHJcbiAgICBDb250YWluZXJGaXRTdGF0dXNbQ29udGFpbmVyRml0U3RhdHVzW1wiT3ZlcmZsb3dpbmdcIl0gPSAxXSA9IFwiT3ZlcmZsb3dpbmdcIjtcclxuICAgIENvbnRhaW5lckZpdFN0YXR1c1tDb250YWluZXJGaXRTdGF0dXNbXCJGdWxseU91dE9mQ29udGFpbmVyXCJdID0gMl0gPSBcIkZ1bGx5T3V0T2ZDb250YWluZXJcIjtcclxufSkoQ29udGFpbmVyRml0U3RhdHVzID0gZXhwb3J0cy5Db250YWluZXJGaXRTdGF0dXMgfHwgKGV4cG9ydHMuQ29udGFpbmVyRml0U3RhdHVzID0ge30pKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW51bXMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbnZhciBFbnVtcyA9IHJlcXVpcmUoXCIuL2VudW1zXCIpO1xyXG52YXIgVXRpbHMgPSByZXF1aXJlKFwiLi91dGlsc1wiKTtcclxudmFyIFNoYXJlZCA9IHJlcXVpcmUoXCIuL3NoYXJlZFwiKTtcclxudmFyIENvbG9yRGVmaW5pdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENvbG9yRGVmaW5pdGlvbihkZWZhdWx0Q29sb3IsIHN1YnRsZUNvbG9yKSB7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0ID0gXCIjMDAwMDAwXCI7XHJcbiAgICAgICAgdGhpcy5zdWJ0bGUgPSBcIiM2NjY2NjZcIjtcclxuICAgICAgICBpZiAoZGVmYXVsdENvbG9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdCA9IGRlZmF1bHRDb2xvcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN1YnRsZUNvbG9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3VidGxlID0gc3VidGxlQ29sb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgQ29sb3JEZWZpbml0aW9uLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdCA9IG9ialtcImRlZmF1bHRcIl0gfHwgdGhpcy5kZWZhdWx0O1xyXG4gICAgICAgICAgICB0aGlzLnN1YnRsZSA9IG9ialtcInN1YnRsZVwiXSB8fCB0aGlzLnN1YnRsZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbG9yRGVmaW5pdGlvbjtcclxufSgpKTtcclxuZXhwb3J0cy5Db2xvckRlZmluaXRpb24gPSBDb2xvckRlZmluaXRpb247XHJcbnZhciBUZXh0Q29sb3JEZWZpbml0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFRleHRDb2xvckRlZmluaXRpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBUZXh0Q29sb3JEZWZpbml0aW9uKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmhpZ2hsaWdodENvbG9ycyA9IG5ldyBDb2xvckRlZmluaXRpb24oXCIjMjIwMDAwMDBcIiwgXCIjMTEwMDAwMDBcIik7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgVGV4dENvbG9yRGVmaW5pdGlvbi5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wYXJzZS5jYWxsKHRoaXMsIG9iaik7XHJcbiAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICB0aGlzLmhpZ2hsaWdodENvbG9ycy5wYXJzZShvYmpbXCJoaWdobGlnaHRDb2xvcnNcIl0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gVGV4dENvbG9yRGVmaW5pdGlvbjtcclxufShDb2xvckRlZmluaXRpb24pKTtcclxuZXhwb3J0cy5UZXh0Q29sb3JEZWZpbml0aW9uID0gVGV4dENvbG9yRGVmaW5pdGlvbjtcclxudmFyIEFkYXB0aXZlQ2FyZENvbmZpZyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFkYXB0aXZlQ2FyZENvbmZpZyhvYmopIHtcclxuICAgICAgICB0aGlzLmFsbG93Q3VzdG9tU3R5bGUgPSBmYWxzZTtcclxuICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWxsb3dDdXN0b21TdHlsZSA9IG9ialtcImFsbG93Q3VzdG9tU3R5bGVcIl0gfHwgdGhpcy5hbGxvd0N1c3RvbVN0eWxlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBBZGFwdGl2ZUNhcmRDb25maWc7XHJcbn0oKSk7XHJcbmV4cG9ydHMuQWRhcHRpdmVDYXJkQ29uZmlnID0gQWRhcHRpdmVDYXJkQ29uZmlnO1xyXG52YXIgSW1hZ2VTZXRDb25maWcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJbWFnZVNldENvbmZpZyhvYmopIHtcclxuICAgICAgICB0aGlzLmltYWdlU2l6ZSA9IEVudW1zLlNpemUuTWVkaXVtO1xyXG4gICAgICAgIHRoaXMubWF4SW1hZ2VIZWlnaHQgPSAxMDA7XHJcbiAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICB0aGlzLmltYWdlU2l6ZSA9IG9ialtcImltYWdlU2l6ZVwiXSAhPSBudWxsID8gb2JqW1wiaW1hZ2VTaXplXCJdIDogdGhpcy5pbWFnZVNpemU7XHJcbiAgICAgICAgICAgIHRoaXMubWF4SW1hZ2VIZWlnaHQgPSBVdGlscy5nZXROdW1iZXJWYWx1ZShvYmpbXCJtYXhJbWFnZUhlaWdodFwiXSwgMTAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBJbWFnZVNldENvbmZpZy5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGltYWdlU2l6ZTogRW51bXMuU2l6ZVt0aGlzLmltYWdlU2l6ZV0sXHJcbiAgICAgICAgICAgIG1heEltYWdlSGVpZ2h0OiB0aGlzLm1heEltYWdlSGVpZ2h0XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSW1hZ2VTZXRDb25maWc7XHJcbn0oKSk7XHJcbmV4cG9ydHMuSW1hZ2VTZXRDb25maWcgPSBJbWFnZVNldENvbmZpZztcclxudmFyIE1lZGlhQ29uZmlnID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWVkaWFDb25maWcob2JqKSB7XHJcbiAgICAgICAgdGhpcy5hbGxvd0lubGluZVBsYXliYWNrID0gdHJ1ZTtcclxuICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFBvc3RlciA9IG9ialtcImRlZmF1bHRQb3N0ZXJcIl07XHJcbiAgICAgICAgICAgIHRoaXMuYWxsb3dJbmxpbmVQbGF5YmFjayA9IG9ialtcImFsbG93SW5saW5lUGxheWJhY2tcIl0gfHwgdGhpcy5hbGxvd0lubGluZVBsYXliYWNrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIE1lZGlhQ29uZmlnLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZGVmYXVsdFBvc3RlcjogdGhpcy5kZWZhdWx0UG9zdGVyLFxyXG4gICAgICAgICAgICBhbGxvd0lubGluZVBsYXliYWNrOiB0aGlzLmFsbG93SW5saW5lUGxheWJhY2tcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNZWRpYUNvbmZpZztcclxufSgpKTtcclxuZXhwb3J0cy5NZWRpYUNvbmZpZyA9IE1lZGlhQ29uZmlnO1xyXG52YXIgRmFjdFRleHREZWZpbml0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmFjdFRleHREZWZpbml0aW9uKG9iaikge1xyXG4gICAgICAgIHRoaXMuc2l6ZSA9IEVudW1zLlRleHRTaXplLkRlZmF1bHQ7XHJcbiAgICAgICAgdGhpcy5jb2xvciA9IEVudW1zLlRleHRDb2xvci5EZWZhdWx0O1xyXG4gICAgICAgIHRoaXMuaXNTdWJ0bGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLndlaWdodCA9IEVudW1zLlRleHRXZWlnaHQuRGVmYXVsdDtcclxuICAgICAgICB0aGlzLndyYXAgPSB0cnVlO1xyXG4gICAgICAgIGlmIChvYmopIHtcclxuICAgICAgICAgICAgdGhpcy5zaXplID0gVXRpbHMucGFyc2VIb3N0Q29uZmlnRW51bShFbnVtcy5UZXh0U2l6ZSwgb2JqW1wic2l6ZVwiXSwgRW51bXMuVGV4dFNpemUuRGVmYXVsdCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29sb3IgPSBVdGlscy5wYXJzZUhvc3RDb25maWdFbnVtKEVudW1zLlRleHRDb2xvciwgb2JqW1wiY29sb3JcIl0sIEVudW1zLlRleHRDb2xvci5EZWZhdWx0KTtcclxuICAgICAgICAgICAgdGhpcy5pc1N1YnRsZSA9IG9ialtcImlzU3VidGxlXCJdIHx8IHRoaXMuaXNTdWJ0bGU7XHJcbiAgICAgICAgICAgIHRoaXMud2VpZ2h0ID0gVXRpbHMucGFyc2VIb3N0Q29uZmlnRW51bShFbnVtcy5UZXh0V2VpZ2h0LCBvYmpbXCJ3ZWlnaHRcIl0sIHRoaXMuZ2V0RGVmYXVsdFdlaWdodCgpKTtcclxuICAgICAgICAgICAgdGhpcy53cmFwID0gb2JqW1wid3JhcFwiXSAhPSBudWxsID8gb2JqW1wid3JhcFwiXSA6IHRoaXMud3JhcDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICBGYWN0VGV4dERlZmluaXRpb24ucHJvdG90eXBlLmdldERlZmF1bHRXZWlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIEVudW1zLlRleHRXZWlnaHQuRGVmYXVsdDtcclxuICAgIH07XHJcbiAgICBGYWN0VGV4dERlZmluaXRpb24ucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzaXplOiBFbnVtcy5UZXh0U2l6ZVt0aGlzLnNpemVdLFxyXG4gICAgICAgICAgICBjb2xvcjogRW51bXMuVGV4dENvbG9yW3RoaXMuY29sb3JdLFxyXG4gICAgICAgICAgICBpc1N1YnRsZTogdGhpcy5pc1N1YnRsZSxcclxuICAgICAgICAgICAgd2VpZ2h0OiBFbnVtcy5UZXh0V2VpZ2h0W3RoaXMud2VpZ2h0XSxcclxuICAgICAgICAgICAgd3JhcDogdGhpcy53cmFwXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmFjdFRleHREZWZpbml0aW9uO1xyXG59KCkpO1xyXG5leHBvcnRzLkZhY3RUZXh0RGVmaW5pdGlvbiA9IEZhY3RUZXh0RGVmaW5pdGlvbjtcclxudmFyIEZhY3RUaXRsZURlZmluaXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoRmFjdFRpdGxlRGVmaW5pdGlvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEZhY3RUaXRsZURlZmluaXRpb24ob2JqKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb2JqKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLm1heFdpZHRoID0gMTUwO1xyXG4gICAgICAgIF90aGlzLndlaWdodCA9IEVudW1zLlRleHRXZWlnaHQuQm9sZGVyO1xyXG4gICAgICAgIGlmIChvYmopIHtcclxuICAgICAgICAgICAgX3RoaXMubWF4V2lkdGggPSBvYmpbXCJtYXhXaWR0aFwiXSAhPSBudWxsID8gb2JqW1wibWF4V2lkdGhcIl0gOiBfdGhpcy5tYXhXaWR0aDtcclxuICAgICAgICAgICAgX3RoaXMud2VpZ2h0ID0gVXRpbHMucGFyc2VIb3N0Q29uZmlnRW51bShFbnVtcy5UZXh0V2VpZ2h0LCBvYmpbXCJ3ZWlnaHRcIl0sIEVudW1zLlRleHRXZWlnaHQuQm9sZGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgRmFjdFRpdGxlRGVmaW5pdGlvbi5wcm90b3R5cGUuZ2V0RGVmYXVsdFdlaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gRW51bXMuVGV4dFdlaWdodC5Cb2xkZXI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZhY3RUaXRsZURlZmluaXRpb247XHJcbn0oRmFjdFRleHREZWZpbml0aW9uKSk7XHJcbmV4cG9ydHMuRmFjdFRpdGxlRGVmaW5pdGlvbiA9IEZhY3RUaXRsZURlZmluaXRpb247XHJcbnZhciBGYWN0U2V0Q29uZmlnID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmFjdFNldENvbmZpZyhvYmopIHtcclxuICAgICAgICB0aGlzLnRpdGxlID0gbmV3IEZhY3RUaXRsZURlZmluaXRpb24oKTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gbmV3IEZhY3RUZXh0RGVmaW5pdGlvbigpO1xyXG4gICAgICAgIHRoaXMuc3BhY2luZyA9IDEwO1xyXG4gICAgICAgIGlmIChvYmopIHtcclxuICAgICAgICAgICAgdGhpcy50aXRsZSA9IG5ldyBGYWN0VGl0bGVEZWZpbml0aW9uKG9ialtcInRpdGxlXCJdKTtcclxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5ldyBGYWN0VGV4dERlZmluaXRpb24ob2JqW1widmFsdWVcIl0pO1xyXG4gICAgICAgICAgICB0aGlzLnNwYWNpbmcgPSBvYmouc3BhY2luZyAmJiBvYmouc3BhY2luZyAhPSBudWxsID8gb2JqLnNwYWNpbmcgJiYgb2JqLnNwYWNpbmcgOiB0aGlzLnNwYWNpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIEZhY3RTZXRDb25maWc7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRmFjdFNldENvbmZpZyA9IEZhY3RTZXRDb25maWc7XHJcbnZhciBTaG93Q2FyZEFjdGlvbkNvbmZpZyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNob3dDYXJkQWN0aW9uQ29uZmlnKG9iaikge1xyXG4gICAgICAgIHRoaXMuYWN0aW9uTW9kZSA9IEVudW1zLlNob3dDYXJkQWN0aW9uTW9kZS5JbmxpbmU7XHJcbiAgICAgICAgdGhpcy5pbmxpbmVUb3BNYXJnaW4gPSAxNjtcclxuICAgICAgICB0aGlzLnN0eWxlID0gRW51bXMuQ29udGFpbmVyU3R5bGUuRW1waGFzaXM7XHJcbiAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbk1vZGUgPSBVdGlscy5wYXJzZUhvc3RDb25maWdFbnVtKEVudW1zLlNob3dDYXJkQWN0aW9uTW9kZSwgb2JqW1wiYWN0aW9uTW9kZVwiXSwgRW51bXMuU2hvd0NhcmRBY3Rpb25Nb2RlLklubGluZSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5saW5lVG9wTWFyZ2luID0gb2JqW1wiaW5saW5lVG9wTWFyZ2luXCJdICE9IG51bGwgPyBvYmpbXCJpbmxpbmVUb3BNYXJnaW5cIl0gOiB0aGlzLmlubGluZVRvcE1hcmdpbjtcclxuICAgICAgICAgICAgdGhpcy5zdHlsZSA9IG9ialtcInN0eWxlXCJdICYmIHR5cGVvZiBvYmpbXCJzdHlsZVwiXSA9PT0gXCJzdHJpbmdcIiA/IG9ialtcInN0eWxlXCJdIDogRW51bXMuQ29udGFpbmVyU3R5bGUuRW1waGFzaXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgU2hvd0NhcmRBY3Rpb25Db25maWcucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBhY3Rpb25Nb2RlOiBFbnVtcy5TaG93Q2FyZEFjdGlvbk1vZGVbdGhpcy5hY3Rpb25Nb2RlXSxcclxuICAgICAgICAgICAgaW5saW5lVG9wTWFyZ2luOiB0aGlzLmlubGluZVRvcE1hcmdpbixcclxuICAgICAgICAgICAgc3R5bGU6IHRoaXMuc3R5bGVcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTaG93Q2FyZEFjdGlvbkNvbmZpZztcclxufSgpKTtcclxuZXhwb3J0cy5TaG93Q2FyZEFjdGlvbkNvbmZpZyA9IFNob3dDYXJkQWN0aW9uQ29uZmlnO1xyXG52YXIgQWN0aW9uc0NvbmZpZyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFjdGlvbnNDb25maWcob2JqKSB7XHJcbiAgICAgICAgdGhpcy5tYXhBY3Rpb25zID0gNTtcclxuICAgICAgICB0aGlzLnNwYWNpbmcgPSBFbnVtcy5TcGFjaW5nLkRlZmF1bHQ7XHJcbiAgICAgICAgdGhpcy5idXR0b25TcGFjaW5nID0gMjA7XHJcbiAgICAgICAgdGhpcy5zaG93Q2FyZCA9IG5ldyBTaG93Q2FyZEFjdGlvbkNvbmZpZygpO1xyXG4gICAgICAgIHRoaXMucHJlRXhwYW5kU2luZ2xlU2hvd0NhcmRBY3Rpb24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmFjdGlvbnNPcmllbnRhdGlvbiA9IEVudW1zLk9yaWVudGF0aW9uLkhvcml6b250YWw7XHJcbiAgICAgICAgdGhpcy5hY3Rpb25BbGlnbm1lbnQgPSBFbnVtcy5BY3Rpb25BbGlnbm1lbnQuTGVmdDtcclxuICAgICAgICB0aGlzLmljb25QbGFjZW1lbnQgPSBFbnVtcy5BY3Rpb25JY29uUGxhY2VtZW50LkxlZnRPZlRpdGxlO1xyXG4gICAgICAgIHRoaXMuYWxsb3dUaXRsZVRvV3JhcCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaWNvblNpemUgPSAyNDtcclxuICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4QWN0aW9ucyA9IG9ialtcIm1heEFjdGlvbnNcIl0gIT0gbnVsbCA/IG9ialtcIm1heEFjdGlvbnNcIl0gOiB0aGlzLm1heEFjdGlvbnM7XHJcbiAgICAgICAgICAgIHRoaXMuc3BhY2luZyA9IFV0aWxzLnBhcnNlSG9zdENvbmZpZ0VudW0oRW51bXMuU3BhY2luZywgb2JqLnNwYWNpbmcgJiYgb2JqLnNwYWNpbmcsIEVudW1zLlNwYWNpbmcuRGVmYXVsdCk7XHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uU3BhY2luZyA9IG9ialtcImJ1dHRvblNwYWNpbmdcIl0gIT0gbnVsbCA/IG9ialtcImJ1dHRvblNwYWNpbmdcIl0gOiB0aGlzLmJ1dHRvblNwYWNpbmc7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0NhcmQgPSBuZXcgU2hvd0NhcmRBY3Rpb25Db25maWcob2JqW1wic2hvd0NhcmRcIl0pO1xyXG4gICAgICAgICAgICB0aGlzLnByZUV4cGFuZFNpbmdsZVNob3dDYXJkQWN0aW9uID0gVXRpbHMuZ2V0Qm9vbFZhbHVlKG9ialtcInByZUV4cGFuZFNpbmdsZVNob3dDYXJkQWN0aW9uXCJdLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc09yaWVudGF0aW9uID0gVXRpbHMucGFyc2VIb3N0Q29uZmlnRW51bShFbnVtcy5PcmllbnRhdGlvbiwgb2JqW1wiYWN0aW9uc09yaWVudGF0aW9uXCJdLCBFbnVtcy5PcmllbnRhdGlvbi5Ib3Jpem9udGFsKTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25BbGlnbm1lbnQgPSBVdGlscy5wYXJzZUhvc3RDb25maWdFbnVtKEVudW1zLkFjdGlvbkFsaWdubWVudCwgb2JqW1wiYWN0aW9uQWxpZ25tZW50XCJdLCBFbnVtcy5BY3Rpb25BbGlnbm1lbnQuTGVmdCk7XHJcbiAgICAgICAgICAgIHRoaXMuaWNvblBsYWNlbWVudCA9IFV0aWxzLnBhcnNlSG9zdENvbmZpZ0VudW0oRW51bXMuQWN0aW9uSWNvblBsYWNlbWVudCwgb2JqW1wiaWNvblBsYWNlbWVudFwiXSwgRW51bXMuQWN0aW9uSWNvblBsYWNlbWVudC5MZWZ0T2ZUaXRsZSk7XHJcbiAgICAgICAgICAgIHRoaXMuYWxsb3dUaXRsZVRvV3JhcCA9IG9ialtcImFsbG93VGl0bGVUb1dyYXBcIl0gIT0gbnVsbCA/IG9ialtcImFsbG93VGl0bGVUb1dyYXBcIl0gOiB0aGlzLmFsbG93VGl0bGVUb1dyYXA7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZUFuZFVuaXQgPSBTaGFyZWQuU2l6ZUFuZFVuaXQucGFyc2Uob2JqW1wiaWNvblNpemVcIl0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNpemVBbmRVbml0LnVuaXQgPT0gRW51bXMuU2l6ZVVuaXQuUGl4ZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmljb25TaXplID0gc2l6ZUFuZFVuaXQucGh5c2ljYWxTaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTd2FsbG93IHRoaXMsIGtlZXAgZGVmYXVsdCBpY29uIHNpemVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIEFjdGlvbnNDb25maWcucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtYXhBY3Rpb25zOiB0aGlzLm1heEFjdGlvbnMsXHJcbiAgICAgICAgICAgIHNwYWNpbmc6IEVudW1zLlNwYWNpbmdbdGhpcy5zcGFjaW5nXSxcclxuICAgICAgICAgICAgYnV0dG9uU3BhY2luZzogdGhpcy5idXR0b25TcGFjaW5nLFxyXG4gICAgICAgICAgICBzaG93Q2FyZDogdGhpcy5zaG93Q2FyZCxcclxuICAgICAgICAgICAgcHJlRXhwYW5kU2luZ2xlU2hvd0NhcmRBY3Rpb246IHRoaXMucHJlRXhwYW5kU2luZ2xlU2hvd0NhcmRBY3Rpb24sXHJcbiAgICAgICAgICAgIGFjdGlvbnNPcmllbnRhdGlvbjogRW51bXMuT3JpZW50YXRpb25bdGhpcy5hY3Rpb25zT3JpZW50YXRpb25dLFxyXG4gICAgICAgICAgICBhY3Rpb25BbGlnbm1lbnQ6IEVudW1zLkFjdGlvbkFsaWdubWVudFt0aGlzLmFjdGlvbkFsaWdubWVudF1cclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBBY3Rpb25zQ29uZmlnO1xyXG59KCkpO1xyXG5leHBvcnRzLkFjdGlvbnNDb25maWcgPSBBY3Rpb25zQ29uZmlnO1xyXG52YXIgQ29sb3JTZXREZWZpbml0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ29sb3JTZXREZWZpbml0aW9uKG9iaikge1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdCA9IG5ldyBUZXh0Q29sb3JEZWZpbml0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5kYXJrID0gbmV3IFRleHRDb2xvckRlZmluaXRpb24oKTtcclxuICAgICAgICB0aGlzLmxpZ2h0ID0gbmV3IFRleHRDb2xvckRlZmluaXRpb24oKTtcclxuICAgICAgICB0aGlzLmFjY2VudCA9IG5ldyBUZXh0Q29sb3JEZWZpbml0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5nb29kID0gbmV3IFRleHRDb2xvckRlZmluaXRpb24oKTtcclxuICAgICAgICB0aGlzLndhcm5pbmcgPSBuZXcgVGV4dENvbG9yRGVmaW5pdGlvbigpO1xyXG4gICAgICAgIHRoaXMuYXR0ZW50aW9uID0gbmV3IFRleHRDb2xvckRlZmluaXRpb24oKTtcclxuICAgICAgICB0aGlzLnBhcnNlKG9iaik7XHJcbiAgICB9XHJcbiAgICBDb2xvclNldERlZmluaXRpb24ucHJvdG90eXBlLnBhcnNlU2luZ2xlQ29sb3IgPSBmdW5jdGlvbiAob2JqLCBwcm9wZXJ0eU5hbWUpIHtcclxuICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgIHRoaXNbcHJvcGVydHlOYW1lXS5wYXJzZShvYmpbcHJvcGVydHlOYW1lXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENvbG9yU2V0RGVmaW5pdGlvbi5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICB0aGlzLnBhcnNlU2luZ2xlQ29sb3Iob2JqLCBcImRlZmF1bHRcIik7XHJcbiAgICAgICAgICAgIHRoaXMucGFyc2VTaW5nbGVDb2xvcihvYmosIFwiZGFya1wiKTtcclxuICAgICAgICAgICAgdGhpcy5wYXJzZVNpbmdsZUNvbG9yKG9iaiwgXCJsaWdodFwiKTtcclxuICAgICAgICAgICAgdGhpcy5wYXJzZVNpbmdsZUNvbG9yKG9iaiwgXCJhY2NlbnRcIik7XHJcbiAgICAgICAgICAgIHRoaXMucGFyc2VTaW5nbGVDb2xvcihvYmosIFwiZ29vZFwiKTtcclxuICAgICAgICAgICAgdGhpcy5wYXJzZVNpbmdsZUNvbG9yKG9iaiwgXCJ3YXJuaW5nXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnBhcnNlU2luZ2xlQ29sb3Iob2JqLCBcImF0dGVudGlvblwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbG9yU2V0RGVmaW5pdGlvbjtcclxufSgpKTtcclxuZXhwb3J0cy5Db2xvclNldERlZmluaXRpb24gPSBDb2xvclNldERlZmluaXRpb247XHJcbnZhciBDb250YWluZXJTdHlsZURlZmluaXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDb250YWluZXJTdHlsZURlZmluaXRpb24ob2JqKSB7XHJcbiAgICAgICAgdGhpcy5mb3JlZ3JvdW5kQ29sb3JzID0gbmV3IENvbG9yU2V0RGVmaW5pdGlvbih7XHJcbiAgICAgICAgICAgIFwiZGVmYXVsdFwiOiB7IGRlZmF1bHQ6IFwiIzMzMzMzM1wiLCBzdWJ0bGU6IFwiI0VFMzMzMzMzXCIgfSxcclxuICAgICAgICAgICAgXCJkYXJrXCI6IHsgZGVmYXVsdDogXCIjMDAwMDAwXCIsIHN1YnRsZTogXCIjNjYwMDAwMDBcIiB9LFxyXG4gICAgICAgICAgICBcImxpZ2h0XCI6IHsgZGVmYXVsdDogXCIjRkZGRkZGXCIsIHN1YnRsZTogXCIjMzMwMDAwMDBcIiB9LFxyXG4gICAgICAgICAgICBcImFjY2VudFwiOiB7IGRlZmF1bHQ6IFwiIzJFODlGQ1wiLCBzdWJ0bGU6IFwiIzg4MkU4OUZDXCIgfSxcclxuICAgICAgICAgICAgXCJnb29kXCI6IHsgZGVmYXVsdDogXCIjNTRBMjU0XCIsIHN1YnRsZTogXCIjREQ1NEEyNTRcIiB9LFxyXG4gICAgICAgICAgICBcIndhcm5pbmdcIjogeyBkZWZhdWx0OiBcIiNFNjk1MDBcIiwgc3VidGxlOiBcIiNEREU2OTUwMFwiIH0sXHJcbiAgICAgICAgICAgIFwiYXR0ZW50aW9uXCI6IHsgZGVmYXVsdDogXCIjQ0MzMzAwXCIsIHN1YnRsZTogXCIjRERDQzMzMDBcIiB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wYXJzZShvYmopO1xyXG4gICAgfVxyXG4gICAgQ29udGFpbmVyU3R5bGVEZWZpbml0aW9uLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gb2JqW1wiYmFja2dyb3VuZENvbG9yXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmZvcmVncm91bmRDb2xvcnMucGFyc2Uob2JqW1wiZm9yZWdyb3VuZENvbG9yc1wiXSk7XHJcbiAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0QmFja2dyb3VuZENvbG9yID0gb2JqW1wiaGlnaGxpZ2h0QmFja2dyb3VuZENvbG9yXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmhpZ2hsaWdodEZvcmVncm91bmRDb2xvciA9IG9ialtcImhpZ2hsaWdodEZvcmVncm91bmRDb2xvclwiXTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnRhaW5lclN0eWxlRGVmaW5pdGlvbi5wcm90b3R5cGUsIFwiaXNCdWlsdEluXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIENvbnRhaW5lclN0eWxlRGVmaW5pdGlvbjtcclxufSgpKTtcclxuZXhwb3J0cy5Db250YWluZXJTdHlsZURlZmluaXRpb24gPSBDb250YWluZXJTdHlsZURlZmluaXRpb247XHJcbnZhciBCdWlsdEluQ29udGFpbmVyU3R5bGVEZWZpbml0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEJ1aWx0SW5Db250YWluZXJTdHlsZURlZmluaXRpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBCdWlsdEluQ29udGFpbmVyU3R5bGVEZWZpbml0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWlsdEluQ29udGFpbmVyU3R5bGVEZWZpbml0aW9uLnByb3RvdHlwZSwgXCJpc0J1aWx0SW5cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBCdWlsdEluQ29udGFpbmVyU3R5bGVEZWZpbml0aW9uO1xyXG59KENvbnRhaW5lclN0eWxlRGVmaW5pdGlvbikpO1xyXG52YXIgQ29udGFpbmVyU3R5bGVTZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDb250YWluZXJTdHlsZVNldChvYmopIHtcclxuICAgICAgICB0aGlzLl9hbGxTdHlsZXMgPSB7fTtcclxuICAgICAgICB0aGlzLl9hbGxTdHlsZXNbRW51bXMuQ29udGFpbmVyU3R5bGUuRGVmYXVsdF0gPSBuZXcgQnVpbHRJbkNvbnRhaW5lclN0eWxlRGVmaW5pdGlvbigpO1xyXG4gICAgICAgIHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5FbXBoYXNpc10gPSBuZXcgQnVpbHRJbkNvbnRhaW5lclN0eWxlRGVmaW5pdGlvbigpO1xyXG4gICAgICAgIHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5BY2NlbnRdID0gbmV3IEJ1aWx0SW5Db250YWluZXJTdHlsZURlZmluaXRpb24oKTtcclxuICAgICAgICB0aGlzLl9hbGxTdHlsZXNbRW51bXMuQ29udGFpbmVyU3R5bGUuR29vZF0gPSBuZXcgQnVpbHRJbkNvbnRhaW5lclN0eWxlRGVmaW5pdGlvbigpO1xyXG4gICAgICAgIHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5BdHRlbnRpb25dID0gbmV3IEJ1aWx0SW5Db250YWluZXJTdHlsZURlZmluaXRpb24oKTtcclxuICAgICAgICB0aGlzLl9hbGxTdHlsZXNbRW51bXMuQ29udGFpbmVyU3R5bGUuV2FybmluZ10gPSBuZXcgQnVpbHRJbkNvbnRhaW5lclN0eWxlRGVmaW5pdGlvbigpO1xyXG4gICAgICAgIGlmIChvYmopIHtcclxuICAgICAgICAgICAgdGhpcy5fYWxsU3R5bGVzW0VudW1zLkNvbnRhaW5lclN0eWxlLkRlZmF1bHRdLnBhcnNlKG9ialtFbnVtcy5Db250YWluZXJTdHlsZS5EZWZhdWx0XSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5FbXBoYXNpc10ucGFyc2Uob2JqW0VudW1zLkNvbnRhaW5lclN0eWxlLkVtcGhhc2lzXSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5BY2NlbnRdLnBhcnNlKG9ialtFbnVtcy5Db250YWluZXJTdHlsZS5BY2NlbnRdKTtcclxuICAgICAgICAgICAgdGhpcy5fYWxsU3R5bGVzW0VudW1zLkNvbnRhaW5lclN0eWxlLkdvb2RdLnBhcnNlKG9ialtFbnVtcy5Db250YWluZXJTdHlsZS5Hb29kXSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5BdHRlbnRpb25dLnBhcnNlKG9ialtFbnVtcy5Db250YWluZXJTdHlsZS5BdHRlbnRpb25dKTtcclxuICAgICAgICAgICAgdGhpcy5fYWxsU3R5bGVzW0VudW1zLkNvbnRhaW5lclN0eWxlLldhcm5pbmddLnBhcnNlKG9ialtFbnVtcy5Db250YWluZXJTdHlsZS5XYXJuaW5nXSk7XHJcbiAgICAgICAgICAgIHZhciBjdXN0b21TdHlsZUFycmF5ID0gb2JqW1wiY3VzdG9tU3R5bGVzXCJdO1xyXG4gICAgICAgICAgICBpZiAoY3VzdG9tU3R5bGVBcnJheSAmJiBBcnJheS5pc0FycmF5KGN1c3RvbVN0eWxlQXJyYXkpKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGN1c3RvbVN0eWxlQXJyYXlfMSA9IGN1c3RvbVN0eWxlQXJyYXk7IF9pIDwgY3VzdG9tU3R5bGVBcnJheV8xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXN0b21TdHlsZSA9IGN1c3RvbVN0eWxlQXJyYXlfMVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1c3RvbVN0eWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHlsZU5hbWUgPSBjdXN0b21TdHlsZVtcIm5hbWVcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZU5hbWUgJiYgdHlwZW9mIHN0eWxlTmFtZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2FsbFN0eWxlcy5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWxsU3R5bGVzW3N0eWxlTmFtZV0ucGFyc2UoY3VzdG9tU3R5bGVbXCJzdHlsZVwiXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hbGxTdHlsZXNbc3R5bGVOYW1lXSA9IG5ldyBDb250YWluZXJTdHlsZURlZmluaXRpb24oY3VzdG9tU3R5bGVbXCJzdHlsZVwiXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBDb250YWluZXJTdHlsZVNldC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGN1c3RvbVN0eWxlQXJyYXkgPSBbXTtcclxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLl9hbGxTdHlsZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLl9hbGxTdHlsZXNba2V5XS5pc0J1aWx0SW4pIHtcclxuICAgICAgICAgICAgICAgIGN1c3RvbVN0eWxlQXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZToga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBfdGhpcy5fYWxsU3R5bGVzW2tleV1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogdGhpcy5kZWZhdWx0LFxyXG4gICAgICAgICAgICBlbXBoYXNpczogdGhpcy5lbXBoYXNpc1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKGN1c3RvbVN0eWxlQXJyYXkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXN1bHQuY3VzdG9tU3R5bGVzID0gY3VzdG9tU3R5bGVBcnJheTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBDb250YWluZXJTdHlsZVNldC5wcm90b3R5cGUuZ2V0U3R5bGVCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSwgZGVmYXVsdFZhbHVlKSB7XHJcbiAgICAgICAgaWYgKGRlZmF1bHRWYWx1ZSA9PT0gdm9pZCAwKSB7IGRlZmF1bHRWYWx1ZSA9IG51bGw7IH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fYWxsU3R5bGVzLmhhc093blByb3BlcnR5KG5hbWUpID8gdGhpcy5fYWxsU3R5bGVzW25hbWVdIDogZGVmYXVsdFZhbHVlO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb250YWluZXJTdHlsZVNldC5wcm90b3R5cGUsIFwiZGVmYXVsdFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hbGxTdHlsZXNbRW51bXMuQ29udGFpbmVyU3R5bGUuRGVmYXVsdF07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29udGFpbmVyU3R5bGVTZXQucHJvdG90eXBlLCBcImVtcGhhc2lzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FsbFN0eWxlc1tFbnVtcy5Db250YWluZXJTdHlsZS5FbXBoYXNpc107XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gQ29udGFpbmVyU3R5bGVTZXQ7XHJcbn0oKSk7XHJcbmV4cG9ydHMuQ29udGFpbmVyU3R5bGVTZXQgPSBDb250YWluZXJTdHlsZVNldDtcclxudmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBWZXJzaW9uKG1ham9yLCBtaW5vciwgbGFiZWwpIHtcclxuICAgICAgICBpZiAobWFqb3IgPT09IHZvaWQgMCkgeyBtYWpvciA9IDE7IH1cclxuICAgICAgICBpZiAobWlub3IgPT09IHZvaWQgMCkgeyBtaW5vciA9IDE7IH1cclxuICAgICAgICB0aGlzLl9pc1ZhbGlkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9tYWpvciA9IG1ham9yO1xyXG4gICAgICAgIHRoaXMuX21pbm9yID0gbWlub3I7XHJcbiAgICAgICAgdGhpcy5fbGFiZWwgPSBsYWJlbDtcclxuICAgIH1cclxuICAgIFZlcnNpb24ucGFyc2UgPSBmdW5jdGlvbiAodmVyc2lvblN0cmluZywgZXJyb3JzKSB7XHJcbiAgICAgICAgaWYgKCF2ZXJzaW9uU3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFZlcnNpb24oKTtcclxuICAgICAgICByZXN1bHQuX3ZlcnNpb25TdHJpbmcgPSB2ZXJzaW9uU3RyaW5nO1xyXG4gICAgICAgIHZhciByZWdFeCA9IC8oXFxkKykuKFxcZCspL2dpO1xyXG4gICAgICAgIHZhciBtYXRjaGVzID0gcmVnRXguZXhlYyh2ZXJzaW9uU3RyaW5nKTtcclxuICAgICAgICBpZiAobWF0Y2hlcyAhPSBudWxsICYmIG1hdGNoZXMubGVuZ3RoID09IDMpIHtcclxuICAgICAgICAgICAgcmVzdWx0Ll9tYWpvciA9IHBhcnNlSW50KG1hdGNoZXNbMV0pO1xyXG4gICAgICAgICAgICByZXN1bHQuX21pbm9yID0gcGFyc2VJbnQobWF0Y2hlc1syXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHQuX2lzVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFyZXN1bHQuX2lzVmFsaWQgJiYgZXJyb3JzKSB7XHJcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBFbnVtcy5WYWxpZGF0aW9uRXJyb3IuSW52YWxpZFByb3BlcnR5VmFsdWUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgdmVyc2lvbiBzdHJpbmc6IFwiICsgcmVzdWx0Ll92ZXJzaW9uU3RyaW5nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIFZlcnNpb24ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5faXNWYWxpZCA/IHRoaXMuX3ZlcnNpb25TdHJpbmcgOiB0aGlzLl9tYWpvciArIFwiLlwiICsgdGhpcy5fbWlub3I7XHJcbiAgICB9O1xyXG4gICAgVmVyc2lvbi5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyVmVyc2lvbikge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1ZhbGlkIHx8ICFvdGhlclZlcnNpb24uaXNWYWxpZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgY29tcGFyZSBpbnZhbGlkIHZlcnNpb24uXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5tYWpvciA+IG90aGVyVmVyc2lvbi5tYWpvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5tYWpvciA8IG90aGVyVmVyc2lvbi5tYWpvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMubWlub3IgPiBvdGhlclZlcnNpb24ubWlub3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMubWlub3IgPCBvdGhlclZlcnNpb24ubWlub3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmVyc2lvbi5wcm90b3R5cGUsIFwibGFiZWxcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGFiZWwgPyB0aGlzLl9sYWJlbCA6IHRoaXMudG9TdHJpbmcoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWZXJzaW9uLnByb3RvdHlwZSwgXCJtYWpvclwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYWpvcjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWZXJzaW9uLnByb3RvdHlwZSwgXCJtaW5vclwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9taW5vcjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWZXJzaW9uLnByb3RvdHlwZSwgXCJpc1ZhbGlkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzVmFsaWQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gVmVyc2lvbjtcclxufSgpKTtcclxuZXhwb3J0cy5WZXJzaW9uID0gVmVyc2lvbjtcclxudmFyIEhvc3RDYXBhYmlsaXRpZXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBIb3N0Q2FwYWJpbGl0aWVzKCkge1xyXG4gICAgICAgIHRoaXMuY2FwYWJpbGl0aWVzID0gbnVsbDtcclxuICAgIH1cclxuICAgIEhvc3RDYXBhYmlsaXRpZXMucHJvdG90eXBlLnNldENhcGFiaWxpdHkgPSBmdW5jdGlvbiAobmFtZSwgdmVyc2lvbikge1xyXG4gICAgICAgIGlmICghdGhpcy5jYXBhYmlsaXRpZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5jYXBhYmlsaXRpZXMgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jYXBhYmlsaXRpZXNbbmFtZV0gPSB2ZXJzaW9uO1xyXG4gICAgfTtcclxuICAgIEhvc3RDYXBhYmlsaXRpZXMucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGpzb24sIGVycm9ycykge1xyXG4gICAgICAgIGlmIChqc29uKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIG5hbWVfMSBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIganNvblZlcnNpb24gPSBqc29uW25hbWVfMV07XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGpzb25WZXJzaW9uID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25WZXJzaW9uID09IFwiKlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2FwYWJpbGl0eShuYW1lXzEsIFwiKlwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZXJzaW9uID0gVmVyc2lvbi5wYXJzZShqc29uVmVyc2lvbiwgZXJyb3JzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlcnNpb24uaXNWYWxpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDYXBhYmlsaXR5KG5hbWVfMSwgdmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSG9zdENhcGFiaWxpdGllcy5wcm90b3R5cGUuaGFzQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uIChuYW1lLCB2ZXJzaW9uKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FwYWJpbGl0aWVzICYmIHRoaXMuY2FwYWJpbGl0aWVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XHJcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uID09IFwiKlwiIHx8IHRoaXMuY2FwYWJpbGl0aWVzW25hbWVdID09IFwiKlwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdmVyc2lvbi5jb21wYXJlVG8odGhpcy5jYXBhYmlsaXRpZXNbbmFtZV0pIDw9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBIb3N0Q2FwYWJpbGl0aWVzLnByb3RvdHlwZS5hcmVBbGxNZXQgPSBmdW5jdGlvbiAoaG9zdENhcGFiaWxpdGllcykge1xyXG4gICAgICAgIGlmICh0aGlzLmNhcGFiaWxpdGllcykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBjYXBhYmlsaXR5TmFtZSBpbiB0aGlzLmNhcGFiaWxpdGllcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFob3N0Q2FwYWJpbGl0aWVzLmhhc0NhcGFiaWxpdHkoY2FwYWJpbGl0eU5hbWUsIHRoaXMuY2FwYWJpbGl0aWVzW2NhcGFiaWxpdHlOYW1lXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEhvc3RDYXBhYmlsaXRpZXM7XHJcbn0oKSk7XHJcbmV4cG9ydHMuSG9zdENhcGFiaWxpdGllcyA9IEhvc3RDYXBhYmlsaXRpZXM7XHJcbnZhciBGb250VHlwZURlZmluaXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGb250VHlwZURlZmluaXRpb24oZm9udEZhbWlseSkge1xyXG4gICAgICAgIHRoaXMuZm9udEZhbWlseSA9IFwiU2Vnb2UgVUksU2Vnb2UsU2Vnb2UgV1AsSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLHNhbnMtc2VyaWZcIjtcclxuICAgICAgICB0aGlzLmZvbnRTaXplcyA9IHtcclxuICAgICAgICAgICAgc21hbGw6IDEyLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiAxNCxcclxuICAgICAgICAgICAgbWVkaXVtOiAxNyxcclxuICAgICAgICAgICAgbGFyZ2U6IDIxLFxyXG4gICAgICAgICAgICBleHRyYUxhcmdlOiAyNlxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5mb250V2VpZ2h0cyA9IHtcclxuICAgICAgICAgICAgbGlnaHRlcjogMjAwLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiA0MDAsXHJcbiAgICAgICAgICAgIGJvbGRlcjogNjAwXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoZm9udEZhbWlseSkge1xyXG4gICAgICAgICAgICB0aGlzLmZvbnRGYW1pbHkgPSBmb250RmFtaWx5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIEZvbnRUeXBlRGVmaW5pdGlvbi5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgdGhpcy5mb250RmFtaWx5ID0gb2JqW1wiZm9udEZhbWlseVwiXSB8fCB0aGlzLmZvbnRGYW1pbHk7XHJcbiAgICAgICAgdGhpcy5mb250U2l6ZXMgPSB7XHJcbiAgICAgICAgICAgIHNtYWxsOiBvYmouZm9udFNpemVzICYmIG9iai5mb250U2l6ZXNbXCJzbWFsbFwiXSB8fCB0aGlzLmZvbnRTaXplcy5zbWFsbCxcclxuICAgICAgICAgICAgZGVmYXVsdDogb2JqLmZvbnRTaXplcyAmJiBvYmouZm9udFNpemVzW1wiZGVmYXVsdFwiXSB8fCB0aGlzLmZvbnRTaXplcy5kZWZhdWx0LFxyXG4gICAgICAgICAgICBtZWRpdW06IG9iai5mb250U2l6ZXMgJiYgb2JqLmZvbnRTaXplc1tcIm1lZGl1bVwiXSB8fCB0aGlzLmZvbnRTaXplcy5tZWRpdW0sXHJcbiAgICAgICAgICAgIGxhcmdlOiBvYmouZm9udFNpemVzICYmIG9iai5mb250U2l6ZXNbXCJsYXJnZVwiXSB8fCB0aGlzLmZvbnRTaXplcy5sYXJnZSxcclxuICAgICAgICAgICAgZXh0cmFMYXJnZTogb2JqLmZvbnRTaXplcyAmJiBvYmouZm9udFNpemVzW1wiZXh0cmFMYXJnZVwiXSB8fCB0aGlzLmZvbnRTaXplcy5leHRyYUxhcmdlXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmZvbnRXZWlnaHRzID0ge1xyXG4gICAgICAgICAgICBsaWdodGVyOiBvYmouZm9udFdlaWdodHMgJiYgb2JqLmZvbnRXZWlnaHRzW1wibGlnaHRlclwiXSB8fCB0aGlzLmZvbnRXZWlnaHRzLmxpZ2h0ZXIsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG9iai5mb250V2VpZ2h0cyAmJiBvYmouZm9udFdlaWdodHNbXCJkZWZhdWx0XCJdIHx8IHRoaXMuZm9udFdlaWdodHMuZGVmYXVsdCxcclxuICAgICAgICAgICAgYm9sZGVyOiBvYmouZm9udFdlaWdodHMgJiYgb2JqLmZvbnRXZWlnaHRzW1wiYm9sZGVyXCJdIHx8IHRoaXMuZm9udFdlaWdodHMuYm9sZGVyXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBGb250VHlwZURlZmluaXRpb24ubW9ub3NwYWNlID0gbmV3IEZvbnRUeXBlRGVmaW5pdGlvbihcIidDb3VyaWVyIE5ldycsIENvdXJpZXIsIG1vbm9zcGFjZVwiKTtcclxuICAgIHJldHVybiBGb250VHlwZURlZmluaXRpb247XHJcbn0oKSk7XHJcbmV4cG9ydHMuRm9udFR5cGVEZWZpbml0aW9uID0gRm9udFR5cGVEZWZpbml0aW9uO1xyXG52YXIgRm9udFR5cGVTZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGb250VHlwZVNldChvYmopIHtcclxuICAgICAgICB0aGlzLmRlZmF1bHQgPSBuZXcgRm9udFR5cGVEZWZpbml0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5tb25vc3BhY2UgPSBuZXcgRm9udFR5cGVEZWZpbml0aW9uKFwiJ0NvdXJpZXIgTmV3JywgQ291cmllciwgbW9ub3NwYWNlXCIpO1xyXG4gICAgICAgIGlmIChvYmopIHtcclxuICAgICAgICAgICAgdGhpcy5kZWZhdWx0LnBhcnNlKG9ialtcImRlZmF1bHRcIl0pO1xyXG4gICAgICAgICAgICB0aGlzLm1vbm9zcGFjZS5wYXJzZShvYmpbXCJtb25vc3BhY2VcIl0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIEZvbnRUeXBlU2V0LnByb3RvdHlwZS5nZXRTdHlsZURlZmluaXRpb24gPSBmdW5jdGlvbiAoc3R5bGUpIHtcclxuICAgICAgICBzd2l0Y2ggKHN0eWxlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgRW51bXMuRm9udFR5cGUuTW9ub3NwYWNlOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9ub3NwYWNlO1xyXG4gICAgICAgICAgICBjYXNlIEVudW1zLkZvbnRUeXBlLkRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gRm9udFR5cGVTZXQ7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRm9udFR5cGVTZXQgPSBGb250VHlwZVNldDtcclxudmFyIEhvc3RDb25maWcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBIb3N0Q29uZmlnKG9iaikge1xyXG4gICAgICAgIHRoaXMuaG9zdENhcGFiaWxpdGllcyA9IG5ldyBIb3N0Q2FwYWJpbGl0aWVzKCk7XHJcbiAgICAgICAgdGhpcy5jaG9pY2VTZXRJbnB1dFZhbHVlU2VwYXJhdG9yID0gXCIsXCI7XHJcbiAgICAgICAgdGhpcy5zdXBwb3J0c0ludGVyYWN0aXZpdHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZm9udFR5cGVzID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNwYWNpbmcgPSB7XHJcbiAgICAgICAgICAgIHNtYWxsOiAzLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiA4LFxyXG4gICAgICAgICAgICBtZWRpdW06IDIwLFxyXG4gICAgICAgICAgICBsYXJnZTogMzAsXHJcbiAgICAgICAgICAgIGV4dHJhTGFyZ2U6IDQwLFxyXG4gICAgICAgICAgICBwYWRkaW5nOiAxNVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZXBhcmF0b3IgPSB7XHJcbiAgICAgICAgICAgIGxpbmVUaGlja25lc3M6IDEsXHJcbiAgICAgICAgICAgIGxpbmVDb2xvcjogXCIjRUVFRUVFXCJcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaW1hZ2VTaXplcyA9IHtcclxuICAgICAgICAgICAgc21hbGw6IDQwLFxyXG4gICAgICAgICAgICBtZWRpdW06IDgwLFxyXG4gICAgICAgICAgICBsYXJnZTogMTYwXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lclN0eWxlcyA9IG5ldyBDb250YWluZXJTdHlsZVNldCgpO1xyXG4gICAgICAgIHRoaXMuYWN0aW9ucyA9IG5ldyBBY3Rpb25zQ29uZmlnKCk7XHJcbiAgICAgICAgdGhpcy5hZGFwdGl2ZUNhcmQgPSBuZXcgQWRhcHRpdmVDYXJkQ29uZmlnKCk7XHJcbiAgICAgICAgdGhpcy5pbWFnZVNldCA9IG5ldyBJbWFnZVNldENvbmZpZygpO1xyXG4gICAgICAgIHRoaXMubWVkaWEgPSBuZXcgTWVkaWFDb25maWcoKTtcclxuICAgICAgICB0aGlzLmZhY3RTZXQgPSBuZXcgRmFjdFNldENvbmZpZygpO1xyXG4gICAgICAgIHRoaXMuY3NzQ2xhc3NOYW1lUHJlZml4ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFsd2F5c0FsbG93QmxlZWQgPSBmYWxzZTtcclxuICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqID09PSBcInN0cmluZ1wiIHx8IG9iaiBpbnN0YW5jZW9mIFN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgb2JqID0gSlNPTi5wYXJzZShvYmopO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY2hvaWNlU2V0SW5wdXRWYWx1ZVNlcGFyYXRvciA9IChvYmogJiYgdHlwZW9mIG9ialtcImNob2ljZVNldElucHV0VmFsdWVTZXBhcmF0b3JcIl0gPT09IFwic3RyaW5nXCIpID8gb2JqW1wiY2hvaWNlU2V0SW5wdXRWYWx1ZVNlcGFyYXRvclwiXSA6IHRoaXMuY2hvaWNlU2V0SW5wdXRWYWx1ZVNlcGFyYXRvcjtcclxuICAgICAgICAgICAgdGhpcy5zdXBwb3J0c0ludGVyYWN0aXZpdHkgPSAob2JqICYmIHR5cGVvZiBvYmpbXCJzdXBwb3J0c0ludGVyYWN0aXZpdHlcIl0gPT09IFwiYm9vbGVhblwiKSA/IG9ialtcInN1cHBvcnRzSW50ZXJhY3Rpdml0eVwiXSA6IHRoaXMuc3VwcG9ydHNJbnRlcmFjdGl2aXR5O1xyXG4gICAgICAgICAgICB0aGlzLl9sZWdhY3lGb250VHlwZSA9IG5ldyBGb250VHlwZURlZmluaXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5fbGVnYWN5Rm9udFR5cGUucGFyc2Uob2JqKTtcclxuICAgICAgICAgICAgaWYgKG9iai5mb250VHlwZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZm9udFR5cGVzID0gbmV3IEZvbnRUeXBlU2V0KG9iai5mb250VHlwZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvYmoubGluZUhlaWdodHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZUhlaWdodHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc21hbGw6IG9iai5saW5lSGVpZ2h0c1tcInNtYWxsXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IG9iai5saW5lSGVpZ2h0c1tcImRlZmF1bHRcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgbWVkaXVtOiBvYmoubGluZUhlaWdodHNbXCJtZWRpdW1cIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgbGFyZ2U6IG9iai5saW5lSGVpZ2h0c1tcImxhcmdlXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhTGFyZ2U6IG9iai5saW5lSGVpZ2h0c1tcImV4dHJhTGFyZ2VcIl1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICB0aGlzLmltYWdlU2l6ZXMgPSB7XHJcbiAgICAgICAgICAgICAgICBzbWFsbDogb2JqLmltYWdlU2l6ZXMgJiYgb2JqLmltYWdlU2l6ZXNbXCJzbWFsbFwiXSB8fCB0aGlzLmltYWdlU2l6ZXMuc21hbGwsXHJcbiAgICAgICAgICAgICAgICBtZWRpdW06IG9iai5pbWFnZVNpemVzICYmIG9iai5pbWFnZVNpemVzW1wibWVkaXVtXCJdIHx8IHRoaXMuaW1hZ2VTaXplcy5tZWRpdW0sXHJcbiAgICAgICAgICAgICAgICBsYXJnZTogb2JqLmltYWdlU2l6ZXMgJiYgb2JqLmltYWdlU2l6ZXNbXCJsYXJnZVwiXSB8fCB0aGlzLmltYWdlU2l6ZXMubGFyZ2UsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyU3R5bGVzID0gbmV3IENvbnRhaW5lclN0eWxlU2V0KG9ialtcImNvbnRhaW5lclN0eWxlc1wiXSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3BhY2luZyA9IHtcclxuICAgICAgICAgICAgICAgIHNtYWxsOiBvYmouc3BhY2luZyAmJiBvYmouc3BhY2luZ1tcInNtYWxsXCJdIHx8IHRoaXMuc3BhY2luZy5zbWFsbCxcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IG9iai5zcGFjaW5nICYmIG9iai5zcGFjaW5nW1wiZGVmYXVsdFwiXSB8fCB0aGlzLnNwYWNpbmcuZGVmYXVsdCxcclxuICAgICAgICAgICAgICAgIG1lZGl1bTogb2JqLnNwYWNpbmcgJiYgb2JqLnNwYWNpbmdbXCJtZWRpdW1cIl0gfHwgdGhpcy5zcGFjaW5nLm1lZGl1bSxcclxuICAgICAgICAgICAgICAgIGxhcmdlOiBvYmouc3BhY2luZyAmJiBvYmouc3BhY2luZ1tcImxhcmdlXCJdIHx8IHRoaXMuc3BhY2luZy5sYXJnZSxcclxuICAgICAgICAgICAgICAgIGV4dHJhTGFyZ2U6IG9iai5zcGFjaW5nICYmIG9iai5zcGFjaW5nW1wiZXh0cmFMYXJnZVwiXSB8fCB0aGlzLnNwYWNpbmcuZXh0cmFMYXJnZSxcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IG9iai5zcGFjaW5nICYmIG9iai5zcGFjaW5nW1wicGFkZGluZ1wiXSB8fCB0aGlzLnNwYWNpbmcucGFkZGluZ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNlcGFyYXRvciA9IHtcclxuICAgICAgICAgICAgICAgIGxpbmVUaGlja25lc3M6IG9iai5zZXBhcmF0b3IgJiYgb2JqLnNlcGFyYXRvcltcImxpbmVUaGlja25lc3NcIl0gfHwgdGhpcy5zZXBhcmF0b3IubGluZVRoaWNrbmVzcyxcclxuICAgICAgICAgICAgICAgIGxpbmVDb2xvcjogb2JqLnNlcGFyYXRvciAmJiBvYmouc2VwYXJhdG9yW1wibGluZUNvbG9yXCJdIHx8IHRoaXMuc2VwYXJhdG9yLmxpbmVDb2xvclxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnMgPSBuZXcgQWN0aW9uc0NvbmZpZyhvYmouYWN0aW9ucyB8fCB0aGlzLmFjdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLmFkYXB0aXZlQ2FyZCA9IG5ldyBBZGFwdGl2ZUNhcmRDb25maWcob2JqLmFkYXB0aXZlQ2FyZCB8fCB0aGlzLmFkYXB0aXZlQ2FyZCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VTZXQgPSBuZXcgSW1hZ2VTZXRDb25maWcob2JqW1wiaW1hZ2VTZXRcIl0pO1xyXG4gICAgICAgICAgICB0aGlzLmZhY3RTZXQgPSBuZXcgRmFjdFNldENvbmZpZyhvYmpbXCJmYWN0U2V0XCJdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBIb3N0Q29uZmlnLnByb3RvdHlwZS5nZXRGb250VHlwZURlZmluaXRpb24gPSBmdW5jdGlvbiAoc3R5bGUpIHtcclxuICAgICAgICBpZiAodGhpcy5mb250VHlwZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9udFR5cGVzLmdldFN0eWxlRGVmaW5pdGlvbihzdHlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gc3R5bGUgPT0gRW51bXMuRm9udFR5cGUuTW9ub3NwYWNlID8gRm9udFR5cGVEZWZpbml0aW9uLm1vbm9zcGFjZSA6IHRoaXMuX2xlZ2FjeUZvbnRUeXBlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBIb3N0Q29uZmlnLnByb3RvdHlwZS5nZXRFZmZlY3RpdmVTcGFjaW5nID0gZnVuY3Rpb24gKHNwYWNpbmcpIHtcclxuICAgICAgICBzd2l0Y2ggKHNwYWNpbmcpIHtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5TcGFjaW5nLlNtYWxsOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3BhY2luZy5zbWFsbDtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5TcGFjaW5nLkRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcGFjaW5nLmRlZmF1bHQ7XHJcbiAgICAgICAgICAgIGNhc2UgRW51bXMuU3BhY2luZy5NZWRpdW06XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcGFjaW5nLm1lZGl1bTtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5TcGFjaW5nLkxhcmdlOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3BhY2luZy5sYXJnZTtcclxuICAgICAgICAgICAgY2FzZSBFbnVtcy5TcGFjaW5nLkV4dHJhTGFyZ2U6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcGFjaW5nLmV4dHJhTGFyZ2U7XHJcbiAgICAgICAgICAgIGNhc2UgRW51bXMuU3BhY2luZy5QYWRkaW5nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3BhY2luZy5wYWRkaW5nO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEhvc3RDb25maWcucHJvdG90eXBlLnBhZGRpbmdEZWZpbml0aW9uVG9TcGFjaW5nRGVmaW5pdGlvbiA9IGZ1bmN0aW9uIChwYWRkaW5nRGVmaW5pdGlvbikge1xyXG4gICAgICAgIHJldHVybiBuZXcgU2hhcmVkLlNwYWNpbmdEZWZpbml0aW9uKHRoaXMuZ2V0RWZmZWN0aXZlU3BhY2luZyhwYWRkaW5nRGVmaW5pdGlvbi50b3ApLCB0aGlzLmdldEVmZmVjdGl2ZVNwYWNpbmcocGFkZGluZ0RlZmluaXRpb24ucmlnaHQpLCB0aGlzLmdldEVmZmVjdGl2ZVNwYWNpbmcocGFkZGluZ0RlZmluaXRpb24uYm90dG9tKSwgdGhpcy5nZXRFZmZlY3RpdmVTcGFjaW5nKHBhZGRpbmdEZWZpbml0aW9uLmxlZnQpKTtcclxuICAgIH07XHJcbiAgICBIb3N0Q29uZmlnLnByb3RvdHlwZS5tYWtlQ3NzQ2xhc3NOYW1lcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY2xhc3NOYW1lcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZXNbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9hID0gMCwgY2xhc3NOYW1lc18xID0gY2xhc3NOYW1lczsgX2EgPCBjbGFzc05hbWVzXzEubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjbGFzc05hbWUgPSBjbGFzc05hbWVzXzFbX2FdO1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaCgodGhpcy5jc3NDbGFzc05hbWVQcmVmaXggPyB0aGlzLmNzc0NsYXNzTmFtZVByZWZpeCArIFwiLVwiIDogXCJcIikgKyBjbGFzc05hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIEhvc3RDb25maWcucHJvdG90eXBlLm1ha2VDc3NDbGFzc05hbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNsYXNzTmFtZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBjbGFzc05hbWVzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLm1ha2VDc3NDbGFzc05hbWVzLmFwcGx5KHRoaXMsIGNsYXNzTmFtZXMpLmpvaW4oXCIgXCIpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQgPyByZXN1bHQgOiBcIlwiO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShIb3N0Q29uZmlnLnByb3RvdHlwZSwgXCJmb250RmFtaWx5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xlZ2FjeUZvbnRUeXBlLmZvbnRGYW1pbHk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9sZWdhY3lGb250VHlwZS5mb250RmFtaWx5ID0gdmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSG9zdENvbmZpZy5wcm90b3R5cGUsIFwiZm9udFNpemVzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xlZ2FjeUZvbnRUeXBlLmZvbnRTaXplcztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShIb3N0Q29uZmlnLnByb3RvdHlwZSwgXCJmb250V2VpZ2h0c1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sZWdhY3lGb250VHlwZS5mb250V2VpZ2h0cztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBIb3N0Q29uZmlnO1xyXG59KCkpO1xyXG5leHBvcnRzLkhvc3RDb25maWcgPSBIb3N0Q29uZmlnO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1ob3N0LWNvbmZpZy5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG52YXIgRW51bXMgPSByZXF1aXJlKFwiLi9lbnVtc1wiKTtcclxuZXhwb3J0cy5Db250ZW50VHlwZXMgPSB7XHJcbiAgICBhcHBsaWNhdGlvbkpzb246IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgYXBwbGljYXRpb25YV3d3Rm9ybVVybGVuY29kZWQ6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJcclxufTtcclxudmFyIFN0cmluZ1dpdGhTdWJzdGl0dXRpb25zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU3RyaW5nV2l0aFN1YnN0aXR1dGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5faXNQcm9jZXNzZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9vcmlnaW5hbCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fcHJvY2Vzc2VkID0gbnVsbDtcclxuICAgIH1cclxuICAgIFN0cmluZ1dpdGhTdWJzdGl0dXRpb25zLnByb3RvdHlwZS5nZXRSZWZlcmVuY2VkSW5wdXRzID0gZnVuY3Rpb24gKGlucHV0cywgcmVmZXJlbmNlZElucHV0cykge1xyXG4gICAgICAgIGlmICghcmVmZXJlbmNlZElucHV0cykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgcmVmZXJlbmNlZElucHV0cyBwYXJhbWV0ZXIgY2Fubm90IGJlIG51bGwuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGlucHV0c18xID0gaW5wdXRzOyBfaSA8IGlucHV0c18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBpbnB1dHNfMVtfaV07XHJcbiAgICAgICAgICAgIHZhciBtYXRjaGVzID0gbmV3IFJlZ0V4cChcIlxcXFx7ezJ9KFwiICsgaW5wdXQuaWQgKyBcIikudmFsdWVcXFxcfXsyfVwiLCBcImdpXCIpLmV4ZWModGhpcy5fb3JpZ2luYWwpO1xyXG4gICAgICAgICAgICBpZiAobWF0Y2hlcyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VkSW5wdXRzW2lucHV0LmlkXSA9IGlucHV0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFN0cmluZ1dpdGhTdWJzdGl0dXRpb25zLnByb3RvdHlwZS5zdWJzdGl0dXRlSW5wdXRWYWx1ZXMgPSBmdW5jdGlvbiAoaW5wdXRzLCBjb250ZW50VHlwZSkge1xyXG4gICAgICAgIHRoaXMuX3Byb2Nlc3NlZCA9IHRoaXMuX29yaWdpbmFsO1xyXG4gICAgICAgIHZhciByZWdFeCA9IC9cXHt7Mn0oW2EtejAtOV8kQF0rKS52YWx1ZVxcfXsyfS9naTtcclxuICAgICAgICB2YXIgbWF0Y2hlcztcclxuICAgICAgICB3aGlsZSAoKG1hdGNoZXMgPSByZWdFeC5leGVjKHRoaXMuX29yaWdpbmFsKSkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2hlZElucHV0ID0gbnVsbDtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKGlucHV0cyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleS50b0xvd2VyQ2FzZSgpID09IG1hdGNoZXNbMV0udG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZWRJbnB1dCA9IGlucHV0c1trZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtYXRjaGVkSW5wdXQpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZUZvclJlcGxhY2UgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZWRJbnB1dC52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlRm9yUmVwbGFjZSA9IG1hdGNoZWRJbnB1dC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjb250ZW50VHlwZSA9PT0gZXhwb3J0cy5Db250ZW50VHlwZXMuYXBwbGljYXRpb25Kc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVGb3JSZXBsYWNlID0gSlNPTi5zdHJpbmdpZnkodmFsdWVGb3JSZXBsYWNlKTtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZUZvclJlcGxhY2UgPSB2YWx1ZUZvclJlcGxhY2Uuc2xpY2UoMSwgLTEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29udGVudFR5cGUgPT09IGV4cG9ydHMuQ29udGVudFR5cGVzLmFwcGxpY2F0aW9uWFd3d0Zvcm1VcmxlbmNvZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVGb3JSZXBsYWNlID0gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlRm9yUmVwbGFjZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzZWQgPSB0aGlzLl9wcm9jZXNzZWQucmVwbGFjZShtYXRjaGVzWzBdLCB2YWx1ZUZvclJlcGxhY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIDtcclxuICAgICAgICB0aGlzLl9pc1Byb2Nlc3NlZCA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgU3RyaW5nV2l0aFN1YnN0aXR1dGlvbnMucHJvdG90eXBlLmdldE9yaWdpbmFsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcmlnaW5hbDtcclxuICAgIH07XHJcbiAgICBTdHJpbmdXaXRoU3Vic3RpdHV0aW9ucy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5faXNQcm9jZXNzZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29yaWdpbmFsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2Nlc3NlZDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU3RyaW5nV2l0aFN1YnN0aXR1dGlvbnMucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX29yaWdpbmFsID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5faXNQcm9jZXNzZWQgPSBmYWxzZTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU3RyaW5nV2l0aFN1YnN0aXR1dGlvbnM7XHJcbn0oKSk7XHJcbmV4cG9ydHMuU3RyaW5nV2l0aFN1YnN0aXR1dGlvbnMgPSBTdHJpbmdXaXRoU3Vic3RpdHV0aW9ucztcclxudmFyIFNwYWNpbmdEZWZpbml0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU3BhY2luZ0RlZmluaXRpb24odG9wLCByaWdodCwgYm90dG9tLCBsZWZ0KSB7XHJcbiAgICAgICAgaWYgKHRvcCA9PT0gdm9pZCAwKSB7IHRvcCA9IDA7IH1cclxuICAgICAgICBpZiAocmlnaHQgPT09IHZvaWQgMCkgeyByaWdodCA9IDA7IH1cclxuICAgICAgICBpZiAoYm90dG9tID09PSB2b2lkIDApIHsgYm90dG9tID0gMDsgfVxyXG4gICAgICAgIGlmIChsZWZ0ID09PSB2b2lkIDApIHsgbGVmdCA9IDA7IH1cclxuICAgICAgICB0aGlzLmxlZnQgPSAwO1xyXG4gICAgICAgIHRoaXMudG9wID0gMDtcclxuICAgICAgICB0aGlzLnJpZ2h0ID0gMDtcclxuICAgICAgICB0aGlzLmJvdHRvbSA9IDA7XHJcbiAgICAgICAgdGhpcy50b3AgPSB0b3A7XHJcbiAgICAgICAgdGhpcy5yaWdodCA9IHJpZ2h0O1xyXG4gICAgICAgIHRoaXMuYm90dG9tID0gYm90dG9tO1xyXG4gICAgICAgIHRoaXMubGVmdCA9IGxlZnQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gU3BhY2luZ0RlZmluaXRpb247XHJcbn0oKSk7XHJcbmV4cG9ydHMuU3BhY2luZ0RlZmluaXRpb24gPSBTcGFjaW5nRGVmaW5pdGlvbjtcclxudmFyIFBhZGRpbmdEZWZpbml0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUGFkZGluZ0RlZmluaXRpb24odG9wLCByaWdodCwgYm90dG9tLCBsZWZ0KSB7XHJcbiAgICAgICAgaWYgKHRvcCA9PT0gdm9pZCAwKSB7IHRvcCA9IEVudW1zLlNwYWNpbmcuTm9uZTsgfVxyXG4gICAgICAgIGlmIChyaWdodCA9PT0gdm9pZCAwKSB7IHJpZ2h0ID0gRW51bXMuU3BhY2luZy5Ob25lOyB9XHJcbiAgICAgICAgaWYgKGJvdHRvbSA9PT0gdm9pZCAwKSB7IGJvdHRvbSA9IEVudW1zLlNwYWNpbmcuTm9uZTsgfVxyXG4gICAgICAgIGlmIChsZWZ0ID09PSB2b2lkIDApIHsgbGVmdCA9IEVudW1zLlNwYWNpbmcuTm9uZTsgfVxyXG4gICAgICAgIHRoaXMudG9wID0gRW51bXMuU3BhY2luZy5Ob25lO1xyXG4gICAgICAgIHRoaXMucmlnaHQgPSBFbnVtcy5TcGFjaW5nLk5vbmU7XHJcbiAgICAgICAgdGhpcy5ib3R0b20gPSBFbnVtcy5TcGFjaW5nLk5vbmU7XHJcbiAgICAgICAgdGhpcy5sZWZ0ID0gRW51bXMuU3BhY2luZy5Ob25lO1xyXG4gICAgICAgIHRoaXMudG9wID0gdG9wO1xyXG4gICAgICAgIHRoaXMucmlnaHQgPSByaWdodDtcclxuICAgICAgICB0aGlzLmJvdHRvbSA9IGJvdHRvbTtcclxuICAgICAgICB0aGlzLmxlZnQgPSBsZWZ0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFBhZGRpbmdEZWZpbml0aW9uO1xyXG59KCkpO1xyXG5leHBvcnRzLlBhZGRpbmdEZWZpbml0aW9uID0gUGFkZGluZ0RlZmluaXRpb247XHJcbnZhciBTaXplQW5kVW5pdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNpemVBbmRVbml0KHBoeXNpY2FsU2l6ZSwgdW5pdCkge1xyXG4gICAgICAgIHRoaXMucGh5c2ljYWxTaXplID0gcGh5c2ljYWxTaXplO1xyXG4gICAgICAgIHRoaXMudW5pdCA9IHVuaXQ7XHJcbiAgICB9XHJcbiAgICBTaXplQW5kVW5pdC5wYXJzZSA9IGZ1bmN0aW9uIChpbnB1dCwgcmVxdWlyZVVuaXRTcGVjaWZpZXIpIHtcclxuICAgICAgICBpZiAocmVxdWlyZVVuaXRTcGVjaWZpZXIgPT09IHZvaWQgMCkgeyByZXF1aXJlVW5pdFNwZWNpZmllciA9IGZhbHNlOyB9XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTaXplQW5kVW5pdCgwLCBFbnVtcy5TaXplVW5pdC5XZWlnaHQpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnBoeXNpY2FsU2l6ZSA9IGlucHV0O1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgdmFyIHJlZ0V4cCA9IC9eKFswLTldKykocHh8XFwqKT8kL2c7XHJcbiAgICAgICAgICAgIHZhciBtYXRjaGVzID0gcmVnRXhwLmV4ZWMoaW5wdXQpO1xyXG4gICAgICAgICAgICB2YXIgZXhwZWN0ZWRNYXRjaENvdW50ID0gcmVxdWlyZVVuaXRTcGVjaWZpZXIgPyAzIDogMjtcclxuICAgICAgICAgICAgaWYgKG1hdGNoZXMgJiYgbWF0Y2hlcy5sZW5ndGggPj0gZXhwZWN0ZWRNYXRjaENvdW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQucGh5c2ljYWxTaXplID0gcGFyc2VJbnQobWF0Y2hlc1sxXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPT0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzWzJdID09IFwicHhcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudW5pdCA9IEVudW1zLlNpemVVbml0LlBpeGVsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzaXplOiBcIiArIGlucHV0KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU2l6ZUFuZFVuaXQ7XHJcbn0oKSk7XHJcbmV4cG9ydHMuU2l6ZUFuZFVuaXQgPSBTaXplQW5kVW5pdDtcclxuLyoqXHJcbiAqIEZhc3QgVVVJRCBnZW5lcmF0b3IsIFJGQzQxMjIgdmVyc2lvbiA0IGNvbXBsaWFudC5cclxuICogQGF1dGhvciBKZWZmIFdhcmQgKGpjd2FyZC5jb20pLlxyXG4gKiBAbGljZW5zZSBNSVQgbGljZW5zZVxyXG4gKiBAbGluayBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNTAzNC9ob3ctdG8tY3JlYXRlLWEtZ3VpZC11dWlkLWluLWphdmFzY3JpcHQvMjE5NjMxMzYjMjE5NjMxMzZcclxuICoqL1xyXG52YXIgVVVJRCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFVVSUQoKSB7XHJcbiAgICB9XHJcbiAgICBVVUlELmdlbmVyYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkMCA9IE1hdGgucmFuZG9tKCkgKiAweGZmZmZmZmZmIHwgMDtcclxuICAgICAgICB2YXIgZDEgPSBNYXRoLnJhbmRvbSgpICogMHhmZmZmZmZmZiB8IDA7XHJcbiAgICAgICAgdmFyIGQyID0gTWF0aC5yYW5kb20oKSAqIDB4ZmZmZmZmZmYgfCAwO1xyXG4gICAgICAgIHZhciBkMyA9IE1hdGgucmFuZG9tKCkgKiAweGZmZmZmZmZmIHwgMDtcclxuICAgICAgICByZXR1cm4gVVVJRC5sdXRbZDAgJiAweGZmXSArIFVVSUQubHV0W2QwID4+IDggJiAweGZmXSArIFVVSUQubHV0W2QwID4+IDE2ICYgMHhmZl0gKyBVVUlELmx1dFtkMCA+PiAyNCAmIDB4ZmZdICsgJy0nICtcclxuICAgICAgICAgICAgVVVJRC5sdXRbZDEgJiAweGZmXSArIFVVSUQubHV0W2QxID4+IDggJiAweGZmXSArICctJyArIFVVSUQubHV0W2QxID4+IDE2ICYgMHgwZiB8IDB4NDBdICsgVVVJRC5sdXRbZDEgPj4gMjQgJiAweGZmXSArICctJyArXHJcbiAgICAgICAgICAgIFVVSUQubHV0W2QyICYgMHgzZiB8IDB4ODBdICsgVVVJRC5sdXRbZDIgPj4gOCAmIDB4ZmZdICsgJy0nICsgVVVJRC5sdXRbZDIgPj4gMTYgJiAweGZmXSArIFVVSUQubHV0W2QyID4+IDI0ICYgMHhmZl0gK1xyXG4gICAgICAgICAgICBVVUlELmx1dFtkMyAmIDB4ZmZdICsgVVVJRC5sdXRbZDMgPj4gOCAmIDB4ZmZdICsgVVVJRC5sdXRbZDMgPj4gMTYgJiAweGZmXSArIFVVSUQubHV0W2QzID4+IDI0ICYgMHhmZl07XHJcbiAgICB9O1xyXG4gICAgVVVJRC5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcclxuICAgICAgICAgICAgVVVJRC5sdXRbaV0gPSAoaSA8IDE2ID8gJzAnIDogJycpICsgaS50b1N0cmluZygxNik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFVVSUQubHV0ID0gW107XHJcbiAgICByZXR1cm4gVVVJRDtcclxufSgpKTtcclxuZXhwb3J0cy5VVUlEID0gVVVJRDtcclxuVVVJRC5pbml0aWFsaXplKCk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoYXJlZC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxudmFyIEFic3RyYWN0VGV4dEZvcm1hdHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFic3RyYWN0VGV4dEZvcm1hdHRlcihyZWd1bGFyRXhwcmVzc2lvbikge1xyXG4gICAgICAgIHRoaXMuX3JlZ3VsYXJFeHByZXNzaW9uID0gcmVndWxhckV4cHJlc3Npb247XHJcbiAgICB9XHJcbiAgICBBYnN0cmFjdFRleHRGb3JtYXR0ZXIucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uIChsYW5nLCBpbnB1dCkge1xyXG4gICAgICAgIHZhciBtYXRjaGVzO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBpbnB1dDtcclxuICAgICAgICB3aGlsZSAoKG1hdGNoZXMgPSB0aGlzLl9yZWd1bGFyRXhwcmVzc2lvbi5leGVjKGlucHV0KSkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZShtYXRjaGVzWzBdLCB0aGlzLmludGVybmFsRm9ybWF0KGxhbmcsIG1hdGNoZXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEFic3RyYWN0VGV4dEZvcm1hdHRlcjtcclxufSgpKTtcclxudmFyIERhdGVGb3JtYXR0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoRGF0ZUZvcm1hdHRlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIERhdGVGb3JtYXR0ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgRGF0ZUZvcm1hdHRlci5wcm90b3R5cGUuaW50ZXJuYWxGb3JtYXQgPSBmdW5jdGlvbiAobGFuZywgbWF0Y2hlcykge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoRGF0ZS5wYXJzZShtYXRjaGVzWzFdKSk7XHJcbiAgICAgICAgdmFyIGZvcm1hdCA9IG1hdGNoZXNbMl0gIT0gdW5kZWZpbmVkID8gbWF0Y2hlc1syXS50b0xvd2VyQ2FzZSgpIDogXCJjb21wYWN0XCI7XHJcbiAgICAgICAgaWYgKGZvcm1hdCAhPSBcImNvbXBhY3RcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcobGFuZywgeyBkYXk6IFwibnVtZXJpY1wiLCB3ZWVrZGF5OiBmb3JtYXQsIG1vbnRoOiBmb3JtYXQsIHllYXI6IFwibnVtZXJpY1wiIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBEYXRlRm9ybWF0dGVyO1xyXG59KEFic3RyYWN0VGV4dEZvcm1hdHRlcikpO1xyXG52YXIgVGltZUZvcm1hdHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhUaW1lRm9ybWF0dGVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVGltZUZvcm1hdHRlcigpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBUaW1lRm9ybWF0dGVyLnByb3RvdHlwZS5pbnRlcm5hbEZvcm1hdCA9IGZ1bmN0aW9uIChsYW5nLCBtYXRjaGVzKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShEYXRlLnBhcnNlKG1hdGNoZXNbMV0pKTtcclxuICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcobGFuZywgeyBob3VyOiAnbnVtZXJpYycsIG1pbnV0ZTogJzItZGlnaXQnIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUaW1lRm9ybWF0dGVyO1xyXG59KEFic3RyYWN0VGV4dEZvcm1hdHRlcikpO1xyXG5mdW5jdGlvbiBmb3JtYXRUZXh0KGxhbmcsIHRleHQpIHtcclxuICAgIHZhciBmb3JtYXR0ZXJzID0gW1xyXG4gICAgICAgIG5ldyBEYXRlRm9ybWF0dGVyKC9cXHt7Mn1EQVRFXFwoKFxcZHs0fS1cXGR7Mn0tXFxkezJ9VFxcZHsyfTpcXGR7Mn06XFxkezJ9KD86WnwoPzooPzotfFxcKylcXGR7Mn06XFxkezJ9KSkpKD86LCA/KENPTVBBQ1R8TE9OR3xTSE9SVCkpP1xcKVxcfXsyfS9nKSxcclxuICAgICAgICBuZXcgVGltZUZvcm1hdHRlcigvXFx7ezJ9VElNRVxcKChcXGR7NH0tXFxkezJ9LVxcZHsyfVRcXGR7Mn06XFxkezJ9OlxcZHsyfSg/Olp8KD86KD86LXxcXCspXFxkezJ9OlxcZHsyfSkpKVxcKVxcfXsyfS9nKVxyXG4gICAgXTtcclxuICAgIHZhciByZXN1bHQgPSB0ZXh0O1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmb3JtYXR0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgcmVzdWx0ID0gZm9ybWF0dGVyc1tpXS5mb3JtYXQobGFuZywgcmVzdWx0KTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuZXhwb3J0cy5mb3JtYXRUZXh0ID0gZm9ybWF0VGV4dDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGV4dC1mb3JtYXR0ZXJzLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbnZhciBFbnVtcyA9IHJlcXVpcmUoXCIuL2VudW1zXCIpO1xyXG52YXIgU2hhcmVkID0gcmVxdWlyZShcIi4vc2hhcmVkXCIpO1xyXG5mdW5jdGlvbiBnZW5lcmF0ZVVuaXF1ZUlkKCkge1xyXG4gICAgcmV0dXJuIFwiX19hYy1cIiArIFNoYXJlZC5VVUlELmdlbmVyYXRlKCk7XHJcbn1cclxuZXhwb3J0cy5nZW5lcmF0ZVVuaXF1ZUlkID0gZ2VuZXJhdGVVbmlxdWVJZDtcclxuZnVuY3Rpb24gaXNOdWxsT3JFbXB0eSh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IFwiXCI7XHJcbn1cclxuZXhwb3J0cy5pc051bGxPckVtcHR5ID0gaXNOdWxsT3JFbXB0eTtcclxuZnVuY3Rpb24gYXBwZW5kQ2hpbGQobm9kZSwgY2hpbGQpIHtcclxuICAgIGlmIChjaGlsZCAhPSBudWxsICYmIGNoaWxkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoY2hpbGQpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuYXBwZW5kQ2hpbGQgPSBhcHBlbmRDaGlsZDtcclxuZnVuY3Rpb24gZ2V0U3RyaW5nVmFsdWUob2JqLCBkZWZhdWx0VmFsdWUpIHtcclxuICAgIGlmIChkZWZhdWx0VmFsdWUgPT09IHZvaWQgMCkgeyBkZWZhdWx0VmFsdWUgPSB1bmRlZmluZWQ7IH1cclxuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcInN0cmluZ1wiID8gb2JqLnRvU3RyaW5nKCkgOiBkZWZhdWx0VmFsdWU7XHJcbn1cclxuZXhwb3J0cy5nZXRTdHJpbmdWYWx1ZSA9IGdldFN0cmluZ1ZhbHVlO1xyXG5mdW5jdGlvbiBnZXROdW1iZXJWYWx1ZShvYmosIGRlZmF1bHRWYWx1ZSkge1xyXG4gICAgaWYgKGRlZmF1bHRWYWx1ZSA9PT0gdm9pZCAwKSB7IGRlZmF1bHRWYWx1ZSA9IHVuZGVmaW5lZDsgfVxyXG4gICAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwibnVtYmVyXCIgPyBvYmogOiBkZWZhdWx0VmFsdWU7XHJcbn1cclxuZXhwb3J0cy5nZXROdW1iZXJWYWx1ZSA9IGdldE51bWJlclZhbHVlO1xyXG5mdW5jdGlvbiBnZXRCb29sVmFsdWUodmFsdWUsIGRlZmF1bHRWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICBzd2l0Y2ggKHZhbHVlLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgY2FzZSBcInRydWVcIjpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBjYXNlIFwiZmFsc2VcIjpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcclxufVxyXG5leHBvcnRzLmdldEJvb2xWYWx1ZSA9IGdldEJvb2xWYWx1ZTtcclxuZnVuY3Rpb24gZ2V0RW51bVZhbHVlKHRhcmdldEVudW0sIG5hbWUsIGRlZmF1bHRWYWx1ZSkge1xyXG4gICAgaWYgKGlzTnVsbE9yRW1wdHkobmFtZSkpIHtcclxuICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xyXG4gICAgfVxyXG4gICAgZm9yICh2YXIga2V5IGluIHRhcmdldEVudW0pIHtcclxuICAgICAgICB2YXIgaXNWYWx1ZVByb3BlcnR5ID0gcGFyc2VJbnQoa2V5LCAxMCkgPj0gMDtcclxuICAgICAgICBpZiAoaXNWYWx1ZVByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRhcmdldEVudW1ba2V5XTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludChrZXksIDEwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XHJcbn1cclxuZXhwb3J0cy5nZXRFbnVtVmFsdWUgPSBnZXRFbnVtVmFsdWU7XHJcbmZ1bmN0aW9uIHNldFByb3BlcnR5KHRhcmdldCwgcHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlLCBkZWZhdWx0VmFsdWUpIHtcclxuICAgIGlmIChkZWZhdWx0VmFsdWUgPT09IHZvaWQgMCkgeyBkZWZhdWx0VmFsdWUgPSB1bmRlZmluZWQ7IH1cclxuICAgIGlmIChwcm9wZXJ0eVZhbHVlID09PSBudWxsIHx8IHByb3BlcnR5VmFsdWUgPT09IHVuZGVmaW5lZCB8fCBwcm9wZXJ0eVZhbHVlID09PSBkZWZhdWx0VmFsdWUpIHtcclxuICAgICAgICBkZWxldGUgdGFyZ2V0W3Byb3BlcnR5TmFtZV07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0YXJnZXRbcHJvcGVydHlOYW1lXSA9IHByb3BlcnR5VmFsdWU7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5zZXRQcm9wZXJ0eSA9IHNldFByb3BlcnR5O1xyXG5mdW5jdGlvbiBzZXROdW1iZXJQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSwgZGVmYXVsdFZhbHVlKSB7XHJcbiAgICBpZiAoZGVmYXVsdFZhbHVlID09PSB2b2lkIDApIHsgZGVmYXVsdFZhbHVlID0gdW5kZWZpbmVkOyB9XHJcbiAgICBpZiAocHJvcGVydHlWYWx1ZSA9PT0gbnVsbCB8fCBwcm9wZXJ0eVZhbHVlID09PSB1bmRlZmluZWQgfHwgcHJvcGVydHlWYWx1ZSA9PT0gZGVmYXVsdFZhbHVlIHx8IGlzTmFOKHByb3BlcnR5VmFsdWUpKSB7XHJcbiAgICAgICAgZGVsZXRlIHRhcmdldFtwcm9wZXJ0eU5hbWVdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGFyZ2V0W3Byb3BlcnR5TmFtZV0gPSBwcm9wZXJ0eVZhbHVlO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuc2V0TnVtYmVyUHJvcGVydHkgPSBzZXROdW1iZXJQcm9wZXJ0eTtcclxuZnVuY3Rpb24gc2V0RW51bVByb3BlcnR5KGVudW1UeXBlLCB0YXJnZXQsIHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSwgZGVmYXVsdFZhbHVlKSB7XHJcbiAgICBpZiAoZGVmYXVsdFZhbHVlID09PSB2b2lkIDApIHsgZGVmYXVsdFZhbHVlID0gdW5kZWZpbmVkOyB9XHJcbiAgICB2YXIgdGFyZ2V0VmFsdWUgPSB0YXJnZXRbcHJvcGVydHlOYW1lXTtcclxuICAgIHZhciBjYW5EZWxldGVUYXJnZXQgPSB0YXJnZXRWYWx1ZSA9PSB1bmRlZmluZWQgPyB0cnVlIDogZW51bVR5cGVbdGFyZ2V0VmFsdWVdICE9PSB1bmRlZmluZWQ7XHJcbiAgICBpZiAocHJvcGVydHlWYWx1ZSA9PSBkZWZhdWx0VmFsdWUpIHtcclxuICAgICAgICBpZiAoY2FuRGVsZXRlVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXRbcHJvcGVydHlOYW1lXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBpZiAocHJvcGVydHlWYWx1ZSA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKGNhbkRlbGV0ZVRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRhcmdldFtwcm9wZXJ0eU5hbWVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0YXJnZXRbcHJvcGVydHlOYW1lXSA9IGVudW1UeXBlW3Byb3BlcnR5VmFsdWVdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5leHBvcnRzLnNldEVudW1Qcm9wZXJ0eSA9IHNldEVudW1Qcm9wZXJ0eTtcclxuZnVuY3Rpb24gc2V0QXJyYXlQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSkge1xyXG4gICAgdmFyIGl0ZW1zID0gW107XHJcbiAgICBpZiAocHJvcGVydHlWYWx1ZSkge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcHJvcGVydHlWYWx1ZV8xID0gcHJvcGVydHlWYWx1ZTsgX2kgPCBwcm9wZXJ0eVZhbHVlXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gcHJvcGVydHlWYWx1ZV8xW19pXTtcclxuICAgICAgICAgICAgaXRlbXMucHVzaChpdGVtLnRvSlNPTigpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaXRlbXMubGVuZ3RoID09IDApIHtcclxuICAgICAgICBpZiAodGFyZ2V0Lmhhc093blByb3BlcnR5KHByb3BlcnR5TmFtZSkgJiYgQXJyYXkuaXNBcnJheSh0YXJnZXRbcHJvcGVydHlOYW1lXSkpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRhcmdldFtwcm9wZXJ0eU5hbWVdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHNldFByb3BlcnR5KHRhcmdldCwgcHJvcGVydHlOYW1lLCBpdGVtcyk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5zZXRBcnJheVByb3BlcnR5ID0gc2V0QXJyYXlQcm9wZXJ0eTtcclxuZnVuY3Rpb24gcGFyc2VIb3N0Q29uZmlnRW51bSh0YXJnZXRFbnVtLCB2YWx1ZSwgZGVmYXVsdFZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldEVudW1WYWx1ZSh0YXJnZXRFbnVtLCB2YWx1ZSwgZGVmYXVsdFZhbHVlKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5wYXJzZUhvc3RDb25maWdFbnVtID0gcGFyc2VIb3N0Q29uZmlnRW51bTtcclxuZnVuY3Rpb24gcmVuZGVyU2VwYXJhdGlvbihob3N0Q29uZmlnLCBzZXBhcmF0aW9uRGVmaW5pdGlvbiwgb3JpZW50YXRpb24pIHtcclxuICAgIGlmIChzZXBhcmF0aW9uRGVmaW5pdGlvbi5zcGFjaW5nID4gMCB8fCBzZXBhcmF0aW9uRGVmaW5pdGlvbi5saW5lVGhpY2tuZXNzID4gMCkge1xyXG4gICAgICAgIHZhciBzZXBhcmF0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHNlcGFyYXRvci5jbGFzc05hbWUgPSBob3N0Q29uZmlnLm1ha2VDc3NDbGFzc05hbWUoXCJhYy1cIiArIChvcmllbnRhdGlvbiA9PSBFbnVtcy5PcmllbnRhdGlvbi5Ib3Jpem9udGFsID8gXCJob3Jpem9udGFsXCIgOiBcInZlcnRpY2FsXCIpICsgXCItc2VwYXJhdG9yXCIpO1xyXG4gICAgICAgIGlmIChvcmllbnRhdGlvbiA9PSBFbnVtcy5PcmllbnRhdGlvbi5Ib3Jpem9udGFsKSB7XHJcbiAgICAgICAgICAgIGlmIChzZXBhcmF0aW9uRGVmaW5pdGlvbi5saW5lVGhpY2tuZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3Iuc3R5bGUucGFkZGluZ1RvcCA9IChzZXBhcmF0aW9uRGVmaW5pdGlvbi5zcGFjaW5nIC8gMikgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3Iuc3R5bGUubWFyZ2luQm90dG9tID0gKHNlcGFyYXRpb25EZWZpbml0aW9uLnNwYWNpbmcgLyAyKSArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgIHNlcGFyYXRvci5zdHlsZS5ib3JkZXJCb3R0b20gPSBzZXBhcmF0aW9uRGVmaW5pdGlvbi5saW5lVGhpY2tuZXNzICsgXCJweCBzb2xpZCBcIiArIHN0cmluZ1RvQ3NzQ29sb3Ioc2VwYXJhdGlvbkRlZmluaXRpb24ubGluZUNvbG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlcGFyYXRvci5zdHlsZS5oZWlnaHQgPSBzZXBhcmF0aW9uRGVmaW5pdGlvbi5zcGFjaW5nICsgXCJweFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoc2VwYXJhdGlvbkRlZmluaXRpb24ubGluZVRoaWNrbmVzcykge1xyXG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yLnN0eWxlLnBhZGRpbmdMZWZ0ID0gKHNlcGFyYXRpb25EZWZpbml0aW9uLnNwYWNpbmcgLyAyKSArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgIHNlcGFyYXRvci5zdHlsZS5tYXJnaW5SaWdodCA9IChzZXBhcmF0aW9uRGVmaW5pdGlvbi5zcGFjaW5nIC8gMikgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3Iuc3R5bGUuYm9yZGVyUmlnaHQgPSBzZXBhcmF0aW9uRGVmaW5pdGlvbi5saW5lVGhpY2tuZXNzICsgXCJweCBzb2xpZCBcIiArIHN0cmluZ1RvQ3NzQ29sb3Ioc2VwYXJhdGlvbkRlZmluaXRpb24ubGluZUNvbG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlcGFyYXRvci5zdHlsZS53aWR0aCA9IHNlcGFyYXRpb25EZWZpbml0aW9uLnNwYWNpbmcgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc2VwYXJhdG9yLnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICByZXR1cm4gc2VwYXJhdG9yO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5yZW5kZXJTZXBhcmF0aW9uID0gcmVuZGVyU2VwYXJhdGlvbjtcclxuZnVuY3Rpb24gc3RyaW5nVG9Dc3NDb2xvcihjb2xvcikge1xyXG4gICAgdmFyIHJlZ0V4ID0gLyMoWzAtOUEtRl17Mn0pKFswLTlBLUZdezJ9KShbMC05QS1GXXsyfSkoWzAtOUEtRl17Mn0pPy9naTtcclxuICAgIHZhciBtYXRjaGVzID0gcmVnRXguZXhlYyhjb2xvcik7XHJcbiAgICBpZiAobWF0Y2hlcyAmJiBtYXRjaGVzWzRdKSB7XHJcbiAgICAgICAgdmFyIGEgPSBwYXJzZUludChtYXRjaGVzWzFdLCAxNikgLyAyNTU7XHJcbiAgICAgICAgdmFyIHIgPSBwYXJzZUludChtYXRjaGVzWzJdLCAxNik7XHJcbiAgICAgICAgdmFyIGcgPSBwYXJzZUludChtYXRjaGVzWzNdLCAxNik7XHJcbiAgICAgICAgdmFyIGIgPSBwYXJzZUludChtYXRjaGVzWzRdLCAxNik7XHJcbiAgICAgICAgcmV0dXJuIFwicmdiYShcIiArIHIgKyBcIixcIiArIGcgKyBcIixcIiArIGIgKyBcIixcIiArIGEgKyBcIilcIjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBjb2xvcjtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLnN0cmluZ1RvQ3NzQ29sb3IgPSBzdHJpbmdUb0Nzc0NvbG9yO1xyXG5mdW5jdGlvbiB0cnVuY2F0ZShlbGVtZW50LCBtYXhIZWlnaHQsIGxpbmVIZWlnaHQpIHtcclxuICAgIHZhciBmaXRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIEFsbG93IGEgb25lIHBpeGVsIG92ZXJmbG93IHRvIGFjY291bnQgZm9yIHJvdW5kaW5nIGRpZmZlcmVuY2VzXHJcbiAgICAgICAgLy8gYmV0d2VlbiBicm93c2Vyc1xyXG4gICAgICAgIHJldHVybiBtYXhIZWlnaHQgLSBlbGVtZW50LnNjcm9sbEhlaWdodCA+PSAtMS4wO1xyXG4gICAgfTtcclxuICAgIGlmIChmaXRzKCkpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgdmFyIGZ1bGxUZXh0ID0gZWxlbWVudC5pbm5lckhUTUw7XHJcbiAgICB2YXIgdHJ1bmNhdGVBdCA9IGZ1bmN0aW9uIChpZHgpIHtcclxuICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IGZ1bGxUZXh0LnN1YnN0cmluZygwLCBpZHgpICsgJy4uLic7XHJcbiAgICB9O1xyXG4gICAgdmFyIGJyZWFrYWJsZUluZGljZXMgPSBmaW5kQnJlYWthYmxlSW5kaWNlcyhmdWxsVGV4dCk7XHJcbiAgICB2YXIgbG8gPSAwO1xyXG4gICAgdmFyIGhpID0gYnJlYWthYmxlSW5kaWNlcy5sZW5ndGg7XHJcbiAgICB2YXIgYmVzdEJyZWFrSWR4ID0gMDtcclxuICAgIC8vIERvIGEgYmluYXJ5IHNlYXJjaCBmb3IgdGhlIGxvbmdlc3Qgc3RyaW5nIHRoYXQgZml0c1xyXG4gICAgd2hpbGUgKGxvIDwgaGkpIHtcclxuICAgICAgICB2YXIgbWlkID0gTWF0aC5mbG9vcigobG8gKyBoaSkgLyAyKTtcclxuICAgICAgICB0cnVuY2F0ZUF0KGJyZWFrYWJsZUluZGljZXNbbWlkXSk7XHJcbiAgICAgICAgaWYgKGZpdHMoKSkge1xyXG4gICAgICAgICAgICBiZXN0QnJlYWtJZHggPSBicmVha2FibGVJbmRpY2VzW21pZF07XHJcbiAgICAgICAgICAgIGxvID0gbWlkICsgMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGhpID0gbWlkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHRydW5jYXRlQXQoYmVzdEJyZWFrSWR4KTtcclxuICAgIC8vIElmIHdlIGhhdmUgZXh0cmEgcm9vbSwgdHJ5IHRvIGV4cGFuZCB0aGUgc3RyaW5nIGxldHRlciBieSBsZXR0ZXJcclxuICAgIC8vIChjb3ZlcnMgdGhlIGNhc2Ugd2hlcmUgd2UgaGF2ZSB0byBicmVhayBpbiB0aGUgbWlkZGxlIG9mIGEgbG9uZyB3b3JkKVxyXG4gICAgaWYgKGxpbmVIZWlnaHQgJiYgbWF4SGVpZ2h0IC0gZWxlbWVudC5zY3JvbGxIZWlnaHQgPj0gbGluZUhlaWdodCAtIDEuMCkge1xyXG4gICAgICAgIHZhciBpZHggPSBmaW5kTmV4dENoYXJhY3RlcihmdWxsVGV4dCwgYmVzdEJyZWFrSWR4KTtcclxuICAgICAgICB3aGlsZSAoaWR4IDwgZnVsbFRleHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRydW5jYXRlQXQoaWR4KTtcclxuICAgICAgICAgICAgaWYgKGZpdHMoKSkge1xyXG4gICAgICAgICAgICAgICAgYmVzdEJyZWFrSWR4ID0gaWR4O1xyXG4gICAgICAgICAgICAgICAgaWR4ID0gZmluZE5leHRDaGFyYWN0ZXIoZnVsbFRleHQsIGlkeCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0cnVuY2F0ZUF0KGJlc3RCcmVha0lkeCk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy50cnVuY2F0ZSA9IHRydW5jYXRlO1xyXG5mdW5jdGlvbiBmaW5kQnJlYWthYmxlSW5kaWNlcyhodG1sKSB7XHJcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xyXG4gICAgdmFyIGlkeCA9IGZpbmROZXh0Q2hhcmFjdGVyKGh0bWwsIC0xKTtcclxuICAgIHdoaWxlIChpZHggPCBodG1sLmxlbmd0aCkge1xyXG4gICAgICAgIGlmIChodG1sW2lkeF0gPT0gJyAnKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChpZHgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZHggPSBmaW5kTmV4dENoYXJhY3RlcihodG1sLCBpZHgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdHM7XHJcbn1cclxuZnVuY3Rpb24gZmluZE5leHRDaGFyYWN0ZXIoaHRtbCwgY3VycklkeCkge1xyXG4gICAgY3VycklkeCArPSAxO1xyXG4gICAgLy8gSWYgd2UgZm91bmQgdGhlIHN0YXJ0IG9mIGFuIEhUTUwgdGFnLCBrZWVwIGFkdmFuY2luZyB1bnRpbCB3ZSBnZXRcclxuICAgIC8vIHBhc3QgaXQsIHNvIHdlIGRvbid0IGVuZCB1cCB0cnVuY2F0aW5nIGluIHRoZSBtaWRkbGUgb2YgdGhlIHRhZ1xyXG4gICAgd2hpbGUgKGN1cnJJZHggPCBodG1sLmxlbmd0aCAmJiBodG1sW2N1cnJJZHhdID09ICc8Jykge1xyXG4gICAgICAgIHdoaWxlIChjdXJySWR4IDwgaHRtbC5sZW5ndGggJiYgaHRtbFtjdXJySWR4KytdICE9ICc+JylcclxuICAgICAgICAgICAgO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGN1cnJJZHg7XHJcbn1cclxuZnVuY3Rpb24gZ2V0Rml0U3RhdHVzKGVsZW1lbnQsIGNvbnRhaW5lckVuZCkge1xyXG4gICAgdmFyIHN0YXJ0ID0gZWxlbWVudC5vZmZzZXRUb3A7XHJcbiAgICB2YXIgZW5kID0gc3RhcnQgKyBlbGVtZW50LmNsaWVudEhlaWdodDtcclxuICAgIGlmIChlbmQgPD0gY29udGFpbmVyRW5kKSB7XHJcbiAgICAgICAgcmV0dXJuIEVudW1zLkNvbnRhaW5lckZpdFN0YXR1cy5GdWxseUluQ29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoc3RhcnQgPCBjb250YWluZXJFbmQpIHtcclxuICAgICAgICByZXR1cm4gRW51bXMuQ29udGFpbmVyRml0U3RhdHVzLk92ZXJmbG93aW5nO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIEVudW1zLkNvbnRhaW5lckZpdFN0YXR1cy5GdWxseU91dE9mQ29udGFpbmVyO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZ2V0Rml0U3RhdHVzID0gZ2V0Rml0U3RhdHVzO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiLCIvKiFcbiAqIGNsaXBib2FyZC5qcyB2Mi4wLjFcbiAqIGh0dHBzOi8vemVub3JvY2hhLmdpdGh1Yi5pby9jbGlwYm9hcmQuanNcbiAqIFxuICogTGljZW5zZWQgTUlUIMKpIFplbm8gUm9jaGFcbiAqL1xuKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiQ2xpcGJvYXJkSlNcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiQ2xpcGJvYXJkSlNcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187KGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICBpZiAodHJ1ZSkge1xuICAgICAgICAhKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbbW9kdWxlLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpXSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID0gKGZhY3RvcnkpLFxuXHRcdFx0XHRfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9ICh0eXBlb2YgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID09PSAnZnVuY3Rpb24nID9cblx0XHRcdFx0KF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXy5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSkgOiBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18pLFxuXHRcdFx0XHRfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBmYWN0b3J5KG1vZHVsZSwgcmVxdWlyZSgnc2VsZWN0JykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBtb2QgPSB7XG4gICAgICAgICAgICBleHBvcnRzOiB7fVxuICAgICAgICB9O1xuICAgICAgICBmYWN0b3J5KG1vZCwgZ2xvYmFsLnNlbGVjdCk7XG4gICAgICAgIGdsb2JhbC5jbGlwYm9hcmRBY3Rpb24gPSBtb2QuZXhwb3J0cztcbiAgICB9XG59KSh0aGlzLCBmdW5jdGlvbiAobW9kdWxlLCBfc2VsZWN0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIF9zZWxlY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VsZWN0KTtcblxuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBvYmpcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9iajtcbiAgICB9IDogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICAgICAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gICAgICAgICAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICAgICAgICAgICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gICAgICAgICAgICByZXR1cm4gQ29uc3RydWN0b3I7XG4gICAgICAgIH07XG4gICAgfSgpO1xuXG4gICAgdmFyIENsaXBib2FyZEFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBDbGlwYm9hcmRBY3Rpb24ob3B0aW9ucykge1xuICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENsaXBib2FyZEFjdGlvbik7XG5cbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmluaXRTZWxlY3Rpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIGJhc2UgcHJvcGVydGllcyBwYXNzZWQgZnJvbSBjb25zdHJ1Y3Rvci5cbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgICAgICovXG5cblxuICAgICAgICBfY3JlYXRlQ2xhc3MoQ2xpcGJvYXJkQWN0aW9uLCBbe1xuICAgICAgICAgICAga2V5OiAncmVzb2x2ZU9wdGlvbnMnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlc29sdmVPcHRpb25zKCkge1xuICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uID0gb3B0aW9ucy5hY3Rpb247XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lcjtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXR0ZXIgPSBvcHRpb25zLmVtaXR0ZXI7XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXQgPSBvcHRpb25zLnRhcmdldDtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHQgPSBvcHRpb25zLnRleHQ7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyID0gb3B0aW9ucy50cmlnZ2VyO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRleHQgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnaW5pdFNlbGVjdGlvbicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdFNlbGVjdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RmFrZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RUYXJnZXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ3NlbGVjdEZha2UnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdEZha2UoKSB7XG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICAgICAgICAgIHZhciBpc1JUTCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RpcicpID09ICdydGwnO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGYWtlKCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmZha2VIYW5kbGVyQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW1vdmVGYWtlKCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmZha2VIYW5kbGVyID0gdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmZha2VIYW5kbGVyQ2FsbGJhY2spIHx8IHRydWU7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmZha2VFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IHpvb21pbmcgb24gaU9TXG4gICAgICAgICAgICAgICAgdGhpcy5mYWtlRWxlbS5zdHlsZS5mb250U2l6ZSA9ICcxMnB0JztcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBib3ggbW9kZWxcbiAgICAgICAgICAgICAgICB0aGlzLmZha2VFbGVtLnN0eWxlLmJvcmRlciA9ICcwJztcbiAgICAgICAgICAgICAgICB0aGlzLmZha2VFbGVtLnN0eWxlLnBhZGRpbmcgPSAnMCc7XG4gICAgICAgICAgICAgICAgdGhpcy5mYWtlRWxlbS5zdHlsZS5tYXJnaW4gPSAnMCc7XG4gICAgICAgICAgICAgICAgLy8gTW92ZSBlbGVtZW50IG91dCBvZiBzY3JlZW4gaG9yaXpvbnRhbGx5XG4gICAgICAgICAgICAgICAgdGhpcy5mYWtlRWxlbS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICAgICAgdGhpcy5mYWtlRWxlbS5zdHlsZVtpc1JUTCA/ICdyaWdodCcgOiAnbGVmdCddID0gJy05OTk5cHgnO1xuICAgICAgICAgICAgICAgIC8vIE1vdmUgZWxlbWVudCB0byB0aGUgc2FtZSBwb3NpdGlvbiB2ZXJ0aWNhbGx5XG4gICAgICAgICAgICAgICAgdmFyIHlQb3NpdGlvbiA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICAgIHRoaXMuZmFrZUVsZW0uc3R5bGUudG9wID0geVBvc2l0aW9uICsgJ3B4JztcblxuICAgICAgICAgICAgICAgIHRoaXMuZmFrZUVsZW0uc2V0QXR0cmlidXRlKCdyZWFkb25seScsICcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZha2VFbGVtLnZhbHVlID0gdGhpcy50ZXh0O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5mYWtlRWxlbSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVGV4dCA9ICgwLCBfc2VsZWN0Mi5kZWZhdWx0KSh0aGlzLmZha2VFbGVtKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvcHlUZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ3JlbW92ZUZha2UnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUZha2UoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmFrZUhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmZha2VIYW5kbGVyQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZha2VIYW5kbGVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mYWtlSGFuZGxlckNhbGxiYWNrID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mYWtlRWxlbSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLmZha2VFbGVtKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mYWtlRWxlbSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdzZWxlY3RUYXJnZXQnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdFRhcmdldCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVGV4dCA9ICgwLCBfc2VsZWN0Mi5kZWZhdWx0KSh0aGlzLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3B5VGV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdjb3B5VGV4dCcsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29weVRleHQoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1Y2NlZWRlZCA9IHZvaWQgMDtcblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2NlZWRlZCA9IGRvY3VtZW50LmV4ZWNDb21tYW5kKHRoaXMuYWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VlZGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVSZXN1bHQoc3VjY2VlZGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnaGFuZGxlUmVzdWx0JyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVSZXN1bHQoc3VjY2VlZGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0dGVyLmVtaXQoc3VjY2VlZGVkID8gJ3N1Y2Nlc3MnIDogJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IHRoaXMuYWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnNlbGVjdGVkVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogdGhpcy50cmlnZ2VyLFxuICAgICAgICAgICAgICAgICAgICBjbGVhclNlbGVjdGlvbjogdGhpcy5jbGVhclNlbGVjdGlvbi5iaW5kKHRoaXMpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ2NsZWFyU2VsZWN0aW9uJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhclNlbGVjdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50cmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlci5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnZGVzdHJveScsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZha2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnYWN0aW9uJyxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KCkge1xuICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICdjb3B5JztcblxuICAgICAgICAgICAgICAgIHRoaXMuX2FjdGlvbiA9IGFjdGlvbjtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9hY3Rpb24gIT09ICdjb3B5JyAmJiB0aGlzLl9hY3Rpb24gIT09ICdjdXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBcImFjdGlvblwiIHZhbHVlLCB1c2UgZWl0aGVyIFwiY29weVwiIG9yIFwiY3V0XCInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAndGFyZ2V0JyxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHRhcmdldCkge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ICYmICh0eXBlb2YgdGFyZ2V0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih0YXJnZXQpKSA9PT0gJ29iamVjdCcgJiYgdGFyZ2V0Lm5vZGVUeXBlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3Rpb24gPT09ICdjb3B5JyAmJiB0YXJnZXQuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFwidGFyZ2V0XCIgYXR0cmlidXRlLiBQbGVhc2UgdXNlIFwicmVhZG9ubHlcIiBpbnN0ZWFkIG9mIFwiZGlzYWJsZWRcIiBhdHRyaWJ1dGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aW9uID09PSAnY3V0JyAmJiAodGFyZ2V0Lmhhc0F0dHJpYnV0ZSgncmVhZG9ubHknKSB8fCB0YXJnZXQuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBcInRhcmdldFwiIGF0dHJpYnV0ZS4gWW91IGNhblxcJ3QgY3V0IHRleHQgZnJvbSBlbGVtZW50cyB3aXRoIFwicmVhZG9ubHlcIiBvciBcImRpc2FibGVkXCIgYXR0cmlidXRlcycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgXCJ0YXJnZXRcIiB2YWx1ZSwgdXNlIGEgdmFsaWQgRWxlbWVudCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl90YXJnZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1dKTtcblxuICAgICAgICByZXR1cm4gQ2xpcGJvYXJkQWN0aW9uO1xuICAgIH0oKTtcblxuICAgIG1vZHVsZS5leHBvcnRzID0gQ2xpcGJvYXJkQWN0aW9uO1xufSk7XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgaXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xudmFyIGRlbGVnYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblxuLyoqXG4gKiBWYWxpZGF0ZXMgYWxsIHBhcmFtcyBhbmQgY2FsbHMgdGhlIHJpZ2h0XG4gKiBsaXN0ZW5lciBmdW5jdGlvbiBiYXNlZCBvbiBpdHMgdGFyZ2V0IHR5cGUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8SFRNTEVsZW1lbnR8SFRNTENvbGxlY3Rpb258Tm9kZUxpc3R9IHRhcmdldFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGxpc3Rlbih0YXJnZXQsIHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCF0YXJnZXQgJiYgIXR5cGUgJiYgIWNhbGxiYWNrKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZXF1aXJlZCBhcmd1bWVudHMnKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzLnN0cmluZyh0eXBlKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdTZWNvbmQgYXJndW1lbnQgbXVzdCBiZSBhIFN0cmluZycpO1xuICAgIH1cblxuICAgIGlmICghaXMuZm4oY2FsbGJhY2spKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoaXJkIGFyZ3VtZW50IG11c3QgYmUgYSBGdW5jdGlvbicpO1xuICAgIH1cblxuICAgIGlmIChpcy5ub2RlKHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuIGxpc3Rlbk5vZGUodGFyZ2V0LCB0eXBlLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzLm5vZGVMaXN0KHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuIGxpc3Rlbk5vZGVMaXN0KHRhcmdldCwgdHlwZSwgY2FsbGJhY2spO1xuICAgIH1cbiAgICBlbHNlIGlmIChpcy5zdHJpbmcodGFyZ2V0KSkge1xuICAgICAgICByZXR1cm4gbGlzdGVuU2VsZWN0b3IodGFyZ2V0LCB0eXBlLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgU3RyaW5nLCBIVE1MRWxlbWVudCwgSFRNTENvbGxlY3Rpb24sIG9yIE5vZGVMaXN0Jyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFkZHMgYW4gZXZlbnQgbGlzdGVuZXIgdG8gYSBIVE1MIGVsZW1lbnRcbiAqIGFuZCByZXR1cm5zIGEgcmVtb3ZlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGVcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBsaXN0ZW5Ob2RlKG5vZGUsIHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGNhbGxiYWNrKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBBZGQgYW4gZXZlbnQgbGlzdGVuZXIgdG8gYSBsaXN0IG9mIEhUTUwgZWxlbWVudHNcbiAqIGFuZCByZXR1cm5zIGEgcmVtb3ZlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7Tm9kZUxpc3R8SFRNTENvbGxlY3Rpb259IG5vZGVMaXN0XG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gbGlzdGVuTm9kZUxpc3Qobm9kZUxpc3QsIHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChub2RlTGlzdCwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgY2FsbGJhY2spO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG5vZGVMaXN0LCBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEFkZCBhbiBldmVudCBsaXN0ZW5lciB0byBhIHNlbGVjdG9yXG4gKiBhbmQgcmV0dXJucyBhIHJlbW92ZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3JcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBsaXN0ZW5TZWxlY3RvcihzZWxlY3RvciwgdHlwZSwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gZGVsZWdhdGUoZG9jdW1lbnQuYm9keSwgc2VsZWN0b3IsIHR5cGUsIGNhbGxiYWNrKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBsaXN0ZW47XG5cblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbmZ1bmN0aW9uIEUgKCkge1xuICAvLyBLZWVwIHRoaXMgZW1wdHkgc28gaXQncyBlYXNpZXIgdG8gaW5oZXJpdCBmcm9tXG4gIC8vICh2aWEgaHR0cHM6Ly9naXRodWIuY29tL2xpcHNtYWNrIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3Njb3R0Y29yZ2FuL3RpbnktZW1pdHRlci9pc3N1ZXMvMylcbn1cblxuRS5wcm90b3R5cGUgPSB7XG4gIG9uOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2ssIGN0eCkge1xuICAgIHZhciBlID0gdGhpcy5lIHx8ICh0aGlzLmUgPSB7fSk7XG5cbiAgICAoZVtuYW1lXSB8fCAoZVtuYW1lXSA9IFtdKSkucHVzaCh7XG4gICAgICBmbjogY2FsbGJhY2ssXG4gICAgICBjdHg6IGN0eFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cbiAgb25jZTogZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrLCBjdHgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZnVuY3Rpb24gbGlzdGVuZXIgKCkge1xuICAgICAgc2VsZi5vZmYobmFtZSwgbGlzdGVuZXIpO1xuICAgICAgY2FsbGJhY2suYXBwbHkoY3R4LCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICBsaXN0ZW5lci5fID0gY2FsbGJhY2tcbiAgICByZXR1cm4gdGhpcy5vbihuYW1lLCBsaXN0ZW5lciwgY3R4KTtcbiAgfSxcblxuICBlbWl0OiBmdW5jdGlvbiAobmFtZSkge1xuICAgIHZhciBkYXRhID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIHZhciBldnRBcnIgPSAoKHRoaXMuZSB8fCAodGhpcy5lID0ge30pKVtuYW1lXSB8fCBbXSkuc2xpY2UoKTtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGxlbiA9IGV2dEFyci5sZW5ndGg7XG5cbiAgICBmb3IgKGk7IGkgPCBsZW47IGkrKykge1xuICAgICAgZXZ0QXJyW2ldLmZuLmFwcGx5KGV2dEFycltpXS5jdHgsIGRhdGEpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG4gIG9mZjogZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGUgPSB0aGlzLmUgfHwgKHRoaXMuZSA9IHt9KTtcbiAgICB2YXIgZXZ0cyA9IGVbbmFtZV07XG4gICAgdmFyIGxpdmVFdmVudHMgPSBbXTtcblxuICAgIGlmIChldnRzICYmIGNhbGxiYWNrKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZXZ0cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAoZXZ0c1tpXS5mbiAhPT0gY2FsbGJhY2sgJiYgZXZ0c1tpXS5mbi5fICE9PSBjYWxsYmFjaylcbiAgICAgICAgICBsaXZlRXZlbnRzLnB1c2goZXZ0c1tpXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGV2ZW50IGZyb20gcXVldWUgdG8gcHJldmVudCBtZW1vcnkgbGVha1xuICAgIC8vIFN1Z2dlc3RlZCBieSBodHRwczovL2dpdGh1Yi5jb20vbGF6ZFxuICAgIC8vIFJlZjogaHR0cHM6Ly9naXRodWIuY29tL3Njb3R0Y29yZ2FuL3RpbnktZW1pdHRlci9jb21taXQvYzZlYmZhYTliYzk3M2IzM2QxMTBhODRhMzA3NzQyYjdjZjk0Yzk1MyNjb21taXRjb21tZW50LTUwMjQ5MTBcblxuICAgIChsaXZlRXZlbnRzLmxlbmd0aClcbiAgICAgID8gZVtuYW1lXSA9IGxpdmVFdmVudHNcbiAgICAgIDogZGVsZXRlIGVbbmFtZV07XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFO1xuXG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIGlmICh0cnVlKSB7XG4gICAgICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFttb2R1bGUsIF9fd2VicGFja19yZXF1aXJlX18oMCksIF9fd2VicGFja19yZXF1aXJlX18oMiksIF9fd2VicGFja19yZXF1aXJlX18oMSldLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPSAoZmFjdG9yeSksXG5cdFx0XHRcdF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gKHR5cGVvZiBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPT09ICdmdW5jdGlvbicgP1xuXHRcdFx0XHQoX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLmFwcGx5KGV4cG9ydHMsIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pKSA6IF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyksXG5cdFx0XHRcdF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGZhY3RvcnkobW9kdWxlLCByZXF1aXJlKCcuL2NsaXBib2FyZC1hY3Rpb24nKSwgcmVxdWlyZSgndGlueS1lbWl0dGVyJyksIHJlcXVpcmUoJ2dvb2QtbGlzdGVuZXInKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG1vZCA9IHtcbiAgICAgICAgICAgIGV4cG9ydHM6IHt9XG4gICAgICAgIH07XG4gICAgICAgIGZhY3RvcnkobW9kLCBnbG9iYWwuY2xpcGJvYXJkQWN0aW9uLCBnbG9iYWwudGlueUVtaXR0ZXIsIGdsb2JhbC5nb29kTGlzdGVuZXIpO1xuICAgICAgICBnbG9iYWwuY2xpcGJvYXJkID0gbW9kLmV4cG9ydHM7XG4gICAgfVxufSkodGhpcywgZnVuY3Rpb24gKG1vZHVsZSwgX2NsaXBib2FyZEFjdGlvbiwgX3RpbnlFbWl0dGVyLCBfZ29vZExpc3RlbmVyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIF9jbGlwYm9hcmRBY3Rpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xpcGJvYXJkQWN0aW9uKTtcblxuICAgIHZhciBfdGlueUVtaXR0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGlueUVtaXR0ZXIpO1xuXG4gICAgdmFyIF9nb29kTGlzdGVuZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ29vZExpc3RlbmVyKTtcblxuICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBvYmpcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9iajtcbiAgICB9IDogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICAgICAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gICAgICAgICAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICAgICAgICAgICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gICAgICAgICAgICByZXR1cm4gQ29uc3RydWN0b3I7XG4gICAgICAgIH07XG4gICAgfSgpO1xuXG4gICAgZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuICAgICAgICBpZiAoIXNlbGYpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuICAgICAgICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgICAgICAgICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG4gICAgfVxuXG4gICAgdmFyIENsaXBib2FyZCA9IGZ1bmN0aW9uIChfRW1pdHRlcikge1xuICAgICAgICBfaW5oZXJpdHMoQ2xpcGJvYXJkLCBfRW1pdHRlcik7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfEhUTUxFbGVtZW50fEhUTUxDb2xsZWN0aW9ufE5vZGVMaXN0fSB0cmlnZ2VyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBDbGlwYm9hcmQodHJpZ2dlciwgb3B0aW9ucykge1xuICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENsaXBib2FyZCk7XG5cbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDbGlwYm9hcmQuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDbGlwYm9hcmQpKS5jYWxsKHRoaXMpKTtcblxuICAgICAgICAgICAgX3RoaXMucmVzb2x2ZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgICAgICBfdGhpcy5saXN0ZW5DbGljayh0cmlnZ2VyKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIGlmIGF0dHJpYnV0ZXMgd291bGQgYmUgcmVzb2x2ZWQgdXNpbmcgaW50ZXJuYWwgc2V0dGVyIGZ1bmN0aW9uc1xuICAgICAgICAgKiBvciBjdXN0b20gZnVuY3Rpb25zIHRoYXQgd2VyZSBwYXNzZWQgaW4gdGhlIGNvbnN0cnVjdG9yLlxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAgICAgKi9cblxuXG4gICAgICAgIF9jcmVhdGVDbGFzcyhDbGlwYm9hcmQsIFt7XG4gICAgICAgICAgICBrZXk6ICdyZXNvbHZlT3B0aW9ucycsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZU9wdGlvbnMoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb24gPSB0eXBlb2Ygb3B0aW9ucy5hY3Rpb24gPT09ICdmdW5jdGlvbicgPyBvcHRpb25zLmFjdGlvbiA6IHRoaXMuZGVmYXVsdEFjdGlvbjtcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldCA9IHR5cGVvZiBvcHRpb25zLnRhcmdldCA9PT0gJ2Z1bmN0aW9uJyA/IG9wdGlvbnMudGFyZ2V0IDogdGhpcy5kZWZhdWx0VGFyZ2V0O1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dCA9IHR5cGVvZiBvcHRpb25zLnRleHQgPT09ICdmdW5jdGlvbicgPyBvcHRpb25zLnRleHQgOiB0aGlzLmRlZmF1bHRUZXh0O1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gX3R5cGVvZihvcHRpb25zLmNvbnRhaW5lcikgPT09ICdvYmplY3QnID8gb3B0aW9ucy5jb250YWluZXIgOiBkb2N1bWVudC5ib2R5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdsaXN0ZW5DbGljaycsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbGlzdGVuQ2xpY2sodHJpZ2dlcikge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5saXN0ZW5lciA9ICgwLCBfZ29vZExpc3RlbmVyMi5kZWZhdWx0KSh0cmlnZ2VyLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLm9uQ2xpY2soZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ29uQ2xpY2snLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgIHZhciB0cmlnZ2VyID0gZS5kZWxlZ2F0ZVRhcmdldCB8fCBlLmN1cnJlbnRUYXJnZXQ7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGlwYm9hcmRBY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGlwYm9hcmRBY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuY2xpcGJvYXJkQWN0aW9uID0gbmV3IF9jbGlwYm9hcmRBY3Rpb24yLmRlZmF1bHQoe1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IHRoaXMuYWN0aW9uKHRyaWdnZXIpLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMudGFyZ2V0KHRyaWdnZXIpLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnRleHQodHJpZ2dlciksXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5jb250YWluZXIsXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6IHRyaWdnZXIsXG4gICAgICAgICAgICAgICAgICAgIGVtaXR0ZXI6IHRoaXNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnZGVmYXVsdEFjdGlvbicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVmYXVsdEFjdGlvbih0cmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEF0dHJpYnV0ZVZhbHVlKCdhY3Rpb24nLCB0cmlnZ2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnZGVmYXVsdFRhcmdldCcsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVmYXVsdFRhcmdldCh0cmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gZ2V0QXR0cmlidXRlVmFsdWUoJ3RhcmdldCcsIHRyaWdnZXIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ2RlZmF1bHRUZXh0JyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZWZhdWx0VGV4dCh0cmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEF0dHJpYnV0ZVZhbHVlKCd0ZXh0JywgdHJpZ2dlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ2Rlc3Ryb3knLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5saXN0ZW5lci5kZXN0cm95KCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGlwYm9hcmRBY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGlwYm9hcmRBY3Rpb24uZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaXBib2FyZEFjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XSwgW3tcbiAgICAgICAgICAgIGtleTogJ2lzU3VwcG9ydGVkJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc1N1cHBvcnRlZCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbJ2NvcHknLCAnY3V0J107XG5cbiAgICAgICAgICAgICAgICB2YXIgYWN0aW9ucyA9IHR5cGVvZiBhY3Rpb24gPT09ICdzdHJpbmcnID8gW2FjdGlvbl0gOiBhY3Rpb247XG4gICAgICAgICAgICAgICAgdmFyIHN1cHBvcnQgPSAhIWRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZDtcblxuICAgICAgICAgICAgICAgIGFjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1cHBvcnQgPSBzdXBwb3J0ICYmICEhZG9jdW1lbnQucXVlcnlDb21tYW5kU3VwcG9ydGVkKGFjdGlvbik7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwcG9ydDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfV0pO1xuXG4gICAgICAgIHJldHVybiBDbGlwYm9hcmQ7XG4gICAgfShfdGlueUVtaXR0ZXIyLmRlZmF1bHQpO1xuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRvIHJldHJpZXZlIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3VmZml4XG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0QXR0cmlidXRlVmFsdWUoc3VmZml4LCBlbGVtZW50KSB7XG4gICAgICAgIHZhciBhdHRyaWJ1dGUgPSAnZGF0YS1jbGlwYm9hcmQtJyArIHN1ZmZpeDtcblxuICAgICAgICBpZiAoIWVsZW1lbnQuaGFzQXR0cmlidXRlKGF0dHJpYnV0ZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgIH1cblxuICAgIG1vZHVsZS5leHBvcnRzID0gQ2xpcGJvYXJkO1xufSk7XG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG52YXIgRE9DVU1FTlRfTk9ERV9UWVBFID0gOTtcblxuLyoqXG4gKiBBIHBvbHlmaWxsIGZvciBFbGVtZW50Lm1hdGNoZXMoKVxuICovXG5pZiAodHlwZW9mIEVsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmICFFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzKSB7XG4gICAgdmFyIHByb3RvID0gRWxlbWVudC5wcm90b3R5cGU7XG5cbiAgICBwcm90by5tYXRjaGVzID0gcHJvdG8ubWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICAgICAgICAgICAgICAgIHByb3RvLm1vek1hdGNoZXNTZWxlY3RvciB8fFxuICAgICAgICAgICAgICAgICAgICBwcm90by5tc01hdGNoZXNTZWxlY3RvciB8fFxuICAgICAgICAgICAgICAgICAgICBwcm90by5vTWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICAgICAgICAgICAgICAgIHByb3RvLndlYmtpdE1hdGNoZXNTZWxlY3Rvcjtcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgY2xvc2VzdCBwYXJlbnQgdGhhdCBtYXRjaGVzIGEgc2VsZWN0b3IuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3JcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBjbG9zZXN0IChlbGVtZW50LCBzZWxlY3Rvcikge1xuICAgIHdoaWxlIChlbGVtZW50ICYmIGVsZW1lbnQubm9kZVR5cGUgIT09IERPQ1VNRU5UX05PREVfVFlQRSkge1xuICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQubWF0Y2hlcyA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgZWxlbWVudC5tYXRjaGVzKHNlbGVjdG9yKSkge1xuICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNsb3Nlc3Q7XG5cblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBjbG9zZXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxuLyoqXG4gKiBEZWxlZ2F0ZXMgZXZlbnQgdG8gYSBzZWxlY3Rvci5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3RvclxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHVzZUNhcHR1cmVcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gX2RlbGVnYXRlKGVsZW1lbnQsIHNlbGVjdG9yLCB0eXBlLCBjYWxsYmFjaywgdXNlQ2FwdHVyZSkge1xuICAgIHZhciBsaXN0ZW5lckZuID0gbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lckZuLCB1c2VDYXB0dXJlKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyRm4sIHVzZUNhcHR1cmUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIERlbGVnYXRlcyBldmVudCB0byBhIHNlbGVjdG9yLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxTdHJpbmd8QXJyYXl9IFtlbGVtZW50c11cbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3RvclxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHVzZUNhcHR1cmVcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gZGVsZWdhdGUoZWxlbWVudHMsIHNlbGVjdG9yLCB0eXBlLCBjYWxsYmFjaywgdXNlQ2FwdHVyZSkge1xuICAgIC8vIEhhbmRsZSB0aGUgcmVndWxhciBFbGVtZW50IHVzYWdlXG4gICAgaWYgKHR5cGVvZiBlbGVtZW50cy5hZGRFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBfZGVsZWdhdGUuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgRWxlbWVudC1sZXNzIHVzYWdlLCBpdCBkZWZhdWx0cyB0byBnbG9iYWwgZGVsZWdhdGlvblxuICAgIGlmICh0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBVc2UgYGRvY3VtZW50YCBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyLCB0aGVuIGFwcGx5IGFyZ3VtZW50c1xuICAgICAgICAvLyBUaGlzIGlzIGEgc2hvcnQgd2F5IHRvIC51bnNoaWZ0IGBhcmd1bWVudHNgIHdpdGhvdXQgcnVubmluZyBpbnRvIGRlb3B0aW1pemF0aW9uc1xuICAgICAgICByZXR1cm4gX2RlbGVnYXRlLmJpbmQobnVsbCwgZG9jdW1lbnQpLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIFNlbGVjdG9yLWJhc2VkIHVzYWdlXG4gICAgaWYgKHR5cGVvZiBlbGVtZW50cyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsZW1lbnRzKTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgQXJyYXktbGlrZSBiYXNlZCB1c2FnZVxuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoZWxlbWVudHMsIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBfZGVsZWdhdGUoZWxlbWVudCwgc2VsZWN0b3IsIHR5cGUsIGNhbGxiYWNrLCB1c2VDYXB0dXJlKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBGaW5kcyBjbG9zZXN0IG1hdGNoIGFuZCBpbnZva2VzIGNhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBsaXN0ZW5lcihlbGVtZW50LCBzZWxlY3RvciwgdHlwZSwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICBlLmRlbGVnYXRlVGFyZ2V0ID0gY2xvc2VzdChlLnRhcmdldCwgc2VsZWN0b3IpO1xuXG4gICAgICAgIGlmIChlLmRlbGVnYXRlVGFyZ2V0KSB7XG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKGVsZW1lbnQsIGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRlbGVnYXRlO1xuXG5cbi8qKiovIH0pLFxuLyogNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vKipcbiAqIENoZWNrIGlmIGFyZ3VtZW50IGlzIGEgSFRNTCBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZXhwb3J0cy5ub2RlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAmJiB2YWx1ZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XG4gICAgICAgICYmIHZhbHVlLm5vZGVUeXBlID09PSAxO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhcmd1bWVudCBpcyBhIGxpc3Qgb2YgSFRNTCBlbGVtZW50cy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsdWVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmV4cG9ydHMubm9kZUxpc3QgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciB0eXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtcblxuICAgIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICYmICh0eXBlID09PSAnW29iamVjdCBOb2RlTGlzdF0nIHx8IHR5cGUgPT09ICdbb2JqZWN0IEhUTUxDb2xsZWN0aW9uXScpXG4gICAgICAgICYmICgnbGVuZ3RoJyBpbiB2YWx1ZSlcbiAgICAgICAgJiYgKHZhbHVlLmxlbmd0aCA9PT0gMCB8fCBleHBvcnRzLm5vZGUodmFsdWVbMF0pKTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYXJndW1lbnQgaXMgYSBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbHVlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5leHBvcnRzLnN0cmluZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZydcbiAgICAgICAgfHwgdmFsdWUgaW5zdGFuY2VvZiBTdHJpbmc7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGFyZ3VtZW50IGlzIGEgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbHVlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5leHBvcnRzLmZuID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB2YXIgdHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG5cbiAgICByZXR1cm4gdHlwZSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbn07XG5cblxuLyoqKi8gfSksXG4vKiA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbmZ1bmN0aW9uIHNlbGVjdChlbGVtZW50KSB7XG4gICAgdmFyIHNlbGVjdGVkVGV4dDtcblxuICAgIGlmIChlbGVtZW50Lm5vZGVOYW1lID09PSAnU0VMRUNUJykge1xuICAgICAgICBlbGVtZW50LmZvY3VzKCk7XG5cbiAgICAgICAgc2VsZWN0ZWRUZXh0ID0gZWxlbWVudC52YWx1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZWxlbWVudC5ub2RlTmFtZSA9PT0gJ0lOUFVUJyB8fCBlbGVtZW50Lm5vZGVOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICAgIHZhciBpc1JlYWRPbmx5ID0gZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ3JlYWRvbmx5Jyk7XG5cbiAgICAgICAgaWYgKCFpc1JlYWRPbmx5KSB7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgncmVhZG9ubHknLCAnJyk7XG4gICAgICAgIH1cblxuICAgICAgICBlbGVtZW50LnNlbGVjdCgpO1xuICAgICAgICBlbGVtZW50LnNldFNlbGVjdGlvblJhbmdlKDAsIGVsZW1lbnQudmFsdWUubGVuZ3RoKTtcblxuICAgICAgICBpZiAoIWlzUmVhZE9ubHkpIHtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdyZWFkb25seScpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZWN0ZWRUZXh0ID0gZWxlbWVudC52YWx1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJykpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIHZhciByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG5cbiAgICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKGVsZW1lbnQpO1xuICAgICAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSk7XG5cbiAgICAgICAgc2VsZWN0ZWRUZXh0ID0gc2VsZWN0aW9uLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGVjdGVkVGV4dDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZWxlY3Q7XG5cblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xufSk7IiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuZXhwb3J0IGNvbnN0IGFkYXB0aXZlQ2FyZFNjaGVtYSA9XHJcbntcclxuICBcIiRzY2hlbWFcIjogXCJodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA2L3NjaGVtYSNcIixcclxuICBcImlkXCI6IFwiaHR0cDovL2FkYXB0aXZlY2FyZHMuaW8vc2NoZW1hcy9hZGFwdGl2ZS1jYXJkLmpzb25cIixcclxuICBcInR5cGVcIjogXCJvYmplY3RcIixcclxuICBcInRpdGxlXCI6IFwiTWljcm9zb2Z0IEFkYXB0aXZlIENhcmQgU2NoZW1hXCIsXHJcbiAgXCJhZGRpdGlvbmFsUHJvcGVydGllc1wiOiB0cnVlLFxyXG4gIFwiYWxsT2ZcIjogW1xyXG4gICAge1xyXG4gICAgICBcIiRyZWZcIjogXCIjL2RlZmluaXRpb25zL0FkYXB0aXZlQ2FyZFwiXHJcbiAgICB9XHJcbiAgXSxcclxuICBcInByb3BlcnRpZXNcIjoge1xyXG4gICAgXCJ2ZXJzaW9uXCI6IHtcclxuICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJ2ZXJzaW9uIG9mIHNjaGVtYSB0aGF0IHRoaXMgY2FyZCB3YXMgYXV0aG9yZWQgXCJcclxuICAgIH0sXHJcbiAgICBcIm1pblZlcnNpb25cIjoge1xyXG4gICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcImlmIGEgY2xpZW50IGRvZXNuJ3Qgc3VwcG9ydCB0aGUgbWluVmVyc2lvbiB0aGUgY2FyZCBzaG91bGQgYmUgcmVqZWN0ZWQgYW5kIHJldHVybiB0aGUgZmFsbGJhY2tUZXh0LiAgSWYgaXQgZG9lcywgdGhlbiB0aGUgZWxlbWVudHMgdGhhdCBhcmUgbm90IHN1cHBvcnRlZCBhcmUgc2FmZSB0byBpZ25vcmVcIlxyXG4gICAgfSxcclxuICAgIFwiZmFsbGJhY2tUZXh0XCI6IHtcclxuICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJpZiBhIGNsaWVudCBpcyBub3QgYWJsZSB0byBzaG93IHRoZSBjYXJkLCBzaG93IGZhbGxiYWNrVGV4dCB0byB0aGUgdXNlci4gVGhpcyBjYW4gYmUgaW4gbWFya2Rvd24gZm9ybWF0LiBcIlxyXG4gICAgfSxcclxuICAgIFwic3BlYWtcIjoge1xyXG4gICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlNwZWNpZmllcyB3aGF0IHNob3VsZCBiZSBzcG9rZW4gZm9yIHRoaXMgZW50aXJlIEl0ZW0uIFRoaXMgaXMgc2ltcGxlIHRleHQgb3IgU1NNTCBmcmFnbWVudFwiXHJcbiAgICB9XHJcbiAgfSxcclxuICBcInJlcXVpcmVkXCI6IFtcclxuICAgIFwidmVyc2lvblwiXHJcbiAgXSxcclxuICBcImRlZmluaXRpb25zXCI6IHtcclxuICAgIFwiQWN0aW9uXCI6IHtcclxuICAgICAgXCJhbnlPZlwiOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9BY3Rpb24uU3VibWl0XCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvQWN0aW9uLlNob3dDYXJkXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvQWN0aW9uLk9wZW5VcmxcIlxyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgfSxcclxuICAgIFwiQWN0aW9uLk9wZW5VcmxcIjoge1xyXG4gICAgICBcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCI6IHRydWUsXHJcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJXaGVuIEFjdGlvbi5PcGVuVXJsIGlzIGludm9rZWQgaXQgd2lsbCBzaG93IHRoZSBnaXZlbiB1cmwsIGVpdGhlciBieSBsYXVuY2hpbmcgaXQgdG8gYW4gZXh0ZXJuYWwgd2ViIGJyb3dzZXIgb3Igc2hvd2luZyBpbi1zaXR1IHdpdGggZW1iZWRkZWQgd2ViIGJyb3dzZXIuXCIsXHJcbiAgICAgIFwicHJvcGVydGllc1wiOiB7XHJcbiAgICAgICAgXCJ0aXRsZVwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJMYWJlbCBmb3IgYnV0dG9uIG9yIGxpbmsgdGhhdCByZXByZXNlbnRzIHRoaXMgYWN0aW9uXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwidHlwZVwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJNdXN0IGJlIEFjdGlvbi5PcGVuVXJsXCIsXHJcbiAgICAgICAgICBcImVudW1cIjogW1xyXG4gICAgICAgICAgICBcIkFjdGlvbi5PcGVuVXJsXCJcclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIFwidXJsXCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlRoZSBVUkwgdG8gb3BlblwiXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBcInJlcXVpcmVkXCI6IFtcclxuICAgICAgICBcInR5cGVcIixcclxuICAgICAgICBcInVybFwiXHJcbiAgICAgIF0sXHJcbiAgICAgIFwidHlwZVwiOiBcIm9iamVjdFwiXHJcbiAgICB9LFxyXG4gICAgXCJBY3Rpb24uU2hvd0NhcmRcIjoge1xyXG4gICAgICBcInR5cGVcIjogXCJvYmplY3RcIixcclxuICAgICAgXCJhZGRpdGlvbmFsUHJvcGVydGllc1wiOiB0cnVlLFxyXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiQWN0aW9uLlNob3dDYXJkIGRlZmluZXMgYW4gaW5saW5lIEFkYXB0aXZlQ2FyZCB3aGljaCBpcyBzaG93biB0byB0aGUgdXNlciB3aGVuIGl0IGlzIGNsaWNrZWQuXCIsXHJcbiAgICAgIFwicHJvcGVydGllc1wiOiB7XHJcbiAgICAgICAgXCJ0eXBlXCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIk11c3QgYmUgQWN0aW9uLlNob3dDYXJkXCIsXHJcbiAgICAgICAgICBcImVudW1cIjogW1xyXG4gICAgICAgICAgICBcIkFjdGlvbi5TaG93Q2FyZFwiXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInRpdGxlXCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkxhYmVsIGZvciBidXR0b24gb3IgbGluayB0aGF0IHJlcHJlc2VudHMgdGhpcyBhY3Rpb25cIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJjYXJkXCI6IHtcclxuICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvQWRhcHRpdmVDYXJkXCJcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIFwicmVxdWlyZWRcIjogW1xyXG4gICAgICAgIFwidHlwZVwiLFxyXG4gICAgICAgIFwiY2FyZFwiXHJcbiAgICAgIF1cclxuICAgIH0sXHJcbiAgICBcIkFjdGlvbi5TdWJtaXRcIjoge1xyXG4gICAgICBcInR5cGVcIjogXCJvYmplY3RcIixcclxuICAgICAgXCJhZGRpdGlvbmFsUHJvcGVydGllc1wiOiB0cnVlLFxyXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiU3VibWl0IGFjdGlvbiBnYXRoZXJzIHVwIGlucHV0IGZpZWxkcywgbWVyZ2VzIHdpdGggb3B0aW9uYWwgZGF0YSBmaWVsZCBhbmQgZ2VuZXJhdGVzIGV2ZW50IHRvIGNsaWVudCBhc2tpbmcgZm9yIGRhdGEgdG8gYmUgc3VibWl0dGVkLiBJdCBpcyB1cCB0byB0aGUgY2xpZW50IHRvIGRldGVybWluZSBob3cgdGhhdCBkYXRhIGlzIHByb2Nlc3NlZC4gRm9yIGV4YW1wbGU6IFdpdGggQm90RnJhbWV3b3JrIGJvdHMgdGhlIGNsaWVudCB3b3VsZCBzZW5kIGFuIGFjdGl2aXR5IHRocm91Z2ggdGhlIG1lc3NhZ2luZyBtZWRpdW0gdG8gdGhlIGJvdC5cIixcclxuICAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcclxuICAgICAgICBcInR5cGVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiTXVzdCBiZSBBY3Rpb24uU3VibWl0XCIsXHJcbiAgICAgICAgICBcImVudW1cIjogW1xyXG4gICAgICAgICAgICBcIkFjdGlvbi5TdWJtaXRcIlxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJ0aXRsZVwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJMYWJlbCBmb3IgYnV0dG9uIG9yIGxpbmsgdGhhdCByZXByZXNlbnRzIHRoaXMgYWN0aW9uXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwiZGF0YVwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogWyBcInN0cmluZ1wiLCBcIm9iamVjdFwiIF0sXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiaW5pdGlhbCBkYXRhIHRoYXQgaW5wdXQgZmllbGRzIHdpbGwgYmUgY29tYmluZWQgd2l0aC4gVGhpcyBpcyBlc3NlbnRpYWxseSAnaGlkZGVuJyBwcm9wZXJ0aWVzXCJcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIFwicmVxdWlyZWRcIjogW1xyXG4gICAgICAgIFwidHlwZVwiXHJcbiAgICAgIF1cclxuICAgIH0sXHJcbiAgICBcIkFjdGlvbnNcIjoge1xyXG4gICAgICBcImFkZGl0aW9uYWxJdGVtc1wiOiB0cnVlLFxyXG4gICAgICBcIml0ZW1zXCI6IHtcclxuICAgICAgICBcIiRyZWZcIjogXCIjL2RlZmluaXRpb25zL0FjdGlvblwiXHJcbiAgICAgIH0sXHJcbiAgICAgIFwidHlwZVwiOiBcImFycmF5XCJcclxuICAgIH0sXHJcbiAgICBcIkFkYXB0aXZlQ2FyZFwiOiB7XHJcbiAgICAgIFwiYWRkaXRpb25hbFByb3BlcnRpZXNcIjogdHJ1ZSxcclxuICAgICAgXCJ0eXBlXCI6IFwib2JqZWN0XCIsXHJcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJDYXJkIHNjaGVtYSBmb3IgYW4gYWRhcHRpdmUgY2FyZFwiLFxyXG4gICAgICBcInByb3BlcnRpZXNcIjoge1xyXG4gICAgICAgIFwidHlwZVwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJNdXN0IGJlIEFkYXB0aXZlQ2FyZFwiLFxyXG4gICAgICAgICAgXCJlbnVtXCI6IFtcclxuICAgICAgICAgICAgXCJBZGFwdGl2ZUNhcmRcIlxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJhY3Rpb25zXCI6IHtcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgQWN0aW9ucyB0byBzaG93IGluIHRoZSBjYXJkJ3MgYWN0aW9uIGJhclwiLFxyXG4gICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9BY3Rpb25zXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwiYm9keVwiOiB7XHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIENhcmQgRWxlbWVudHMgdG8gc2hvdyBpbiB0aGUgcHJpbWFyeSBjYXJkIHJlZ2lvblwiLFxyXG4gICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9DYXJkRWxlbWVudHNcIlxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgXCJyZXF1aXJlZFwiOiBbXHJcbiAgICAgICAgXCJ0eXBlXCIsXHJcbiAgICAgICAgXCJ2ZXJzaW9uXCJcclxuICAgICAgXVxyXG4gICAgfSxcclxuICAgIFwiQ2FyZEVsZW1lbnRcIjoge1xyXG4gICAgICBcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCI6IHRydWUsXHJcbiAgICAgIFwicHJvcGVydGllc1wiOiB7XHJcbiAgICAgICAgXCJ0eXBlXCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcImlkXCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkEgdW5pcXVlIElkIGFzc29jaWF0ZWQgd2l0aCB0aGUgZWxlbWVudFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInNwYWNpbmdcIjoge1xyXG4gICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9TcGFjaW5nU3R5bGVcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJzZXBhcmF0b3JcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwiYm9vbGVhblwiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlRoZSBTZXBhcmF0b3Igb2JqZWN0IHR5cGUgZGVzY3JpYmVzIHRoZSBsb29rIGFuZCBmZWVsIG9mIGEgc2VwYXJhdGlvbiBsaW5lIGJldHdlZW4gdHdvIGVsZW1lbnRzLlwiLFxyXG4gICAgICAgICAgXCJkZWZhdWx0XCI6IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBcInJlcXVpcmVkXCI6IFtcclxuICAgICAgICBcInR5cGVcIlxyXG4gICAgICBdXHJcbiAgICB9LFxyXG4gICAgXCJDYXJkRWxlbWVudHNcIjoge1xyXG4gICAgICBcInR5cGVcIjogXCJhcnJheVwiLFxyXG4gICAgICBcImFkZGl0aW9uYWxJdGVtc1wiOiB0cnVlLFxyXG4gICAgICBcIml0ZW1zXCI6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBcImFueU9mXCI6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvVGV4dEJsb2NrXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvSW1hZ2VcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9Db250YWluZXJcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9Db2x1bW5TZXRcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9GYWN0U2V0XCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvSW1hZ2VTZXRcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9JbnB1dC5UZXh0XCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvSW5wdXQuTnVtYmVyXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvSW5wdXQuRGF0ZVwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBcIiRyZWZcIjogXCIjL2RlZmluaXRpb25zL0lucHV0LlRpbWVcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9JbnB1dC5Ub2dnbGVcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9JbnB1dC5DaG9pY2VTZXRcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfVxyXG4gICAgICBdXHJcbiAgICB9LFxyXG4gICAgXCJJbnB1dC5DaG9pY2VcIjoge1xyXG4gICAgICBcInR5cGVcIjogXCJvYmplY3RcIixcclxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkRlc2NyaWJlcyBhIENob2ljZSBpbnB1dC4gVGhlIHZhbHVlIHNob3VsZCBiZSBhIHNpbXBsZSBzdHJpbmcgd2l0aG91dCBhIFxcXCIsXFxcIlwiLFxyXG4gICAgICBcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCI6IHRydWUsXHJcbiAgICAgIFwicHJvcGVydGllc1wiOiB7XHJcbiAgICAgICAgXCJ0eXBlXCI6e1xyXG4gICAgICAgICAgXCJ0eXBlXCI6XCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZW51bVwiOiBbXHJcbiAgICAgICAgICAgIFwiSW5wdXQuQ2hvaWNlXCJcclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIFwidGl0bGVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIHRleHQgZm9yIGEgY2hvaWNlXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwidmFsdWVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIHJhdyB2YWx1ZSBmb3IgdGhlIGNob2ljZS4gTk9URTogZG8gbm90IHVzZSBhIFxcXCIsXFxcIiBpbiB0aGUgdmFsdWUsIHNpbmNlIE11bHRpU2VsZWN0IENob2ljZVNldCByZXR1cm5zIGEgY29tbWEtZGVsaW1pdGVkIHN0cmluZyBvZiBjaG9pY2UgdmFsdWVzXCJcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIFwicmVxdWlyZWRcIjogW1xyXG4gICAgICAgIFwidGl0bGVcIixcclxuICAgICAgICBcInZhbHVlXCJcclxuICAgICAgXVxyXG4gICAgfSxcclxuICAgIFwiQ2hvaWNlSW5wdXRTdHlsZVwiOiB7XHJcbiAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiU3R5bGUgaGludCBmb3IgSW5wdXQuQ2hvaWNlU2V0XCIsXHJcbiAgICAgIFwiZW51bVwiOiBbXHJcbiAgICAgICAgXCJjb21wYWN0XCIsXHJcbiAgICAgICAgXCJleHBhbmRlZFwiXHJcbiAgICAgIF1cclxuICAgIH0sXHJcbiAgICBcIkNvbHVtblwiOiB7XHJcbiAgICAgIFwiYWRkaXRpb25hbFByb3BlcnRpZXNcIjogdHJ1ZSxcclxuICAgICAgXCJ0eXBlXCI6IFwib2JqZWN0XCIsXHJcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJEZWZpbmVzIGEgY29udGFpbmVyIHRoYXQgaXMgcGFydCBvZiBhIENvbHVtblNldFwiLFxyXG4gICAgICBcImFsbE9mXCI6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBcIiRyZWZcIjogXCIjL2RlZmluaXRpb25zL0NhcmRFbGVtZW50XCJcclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIFwicHJvcGVydGllc1wiOiB7XHJcbiAgICAgICAgXCJpdGVtc1wiOiB7XHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIENhcmQgRWxlbWVudHMgdG8gaW5jbHVkZSBpbiB0aGUgQ29sdW1uXCIsXHJcbiAgICAgICAgICBcIiRyZWZcIjogXCIjL2RlZmluaXRpb25zL0NhcmRFbGVtZW50c1wiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInNlbGVjdEFjdGlvblwiOiB7XHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiQW4gQWN0aW9uIHRoYXQgd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIENvbHVtbiBpcyB0YXBwZWQgb3Igc2VsZWN0ZWRcIixcclxuICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvQWN0aW9uXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwid2lkdGhcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFtcclxuICAgICAgICAgICAgXCJzdHJpbmdcIixcclxuICAgICAgICAgICAgXCJudW1iZXJcIlxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcXFwiYXV0b1xcXCIsIFxcXCJzdHJldGNoXFxcIiwgb3IgYSBudW1iZXIgcmVwcmVzZW50aW5nIHJlbGF0aXZlIHdpZHRoIG9mIHRoZSBjb2x1bW4gaW4gdGhlIGNvbHVtbiBncm91cFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInR5cGVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiTXVzdCBiZSBDb2x1bW5cIixcclxuICAgICAgICAgIFwiZW51bVwiOiBbXHJcbiAgICAgICAgICAgIFwiQ29sdW1uXCJcclxuICAgICAgICAgIF1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIFwicmVxdWlyZWRcIjogW1xyXG4gICAgICAgIFwiaXRlbXNcIlxyXG4gICAgICBdXHJcbiAgICB9LFxyXG4gICAgXCJDb2x1bW5TZXRcIjoge1xyXG4gICAgICBcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCI6IHRydWUsXHJcbiAgICAgIFwidHlwZVwiOiBcIm9iamVjdFwiLFxyXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiQ29sdW1uU2V0IGRpdmlkZXMgYSByZWdpb24gaW50byBDb2x1bW4ncyBhbGxvd2luZyBlbGVtZW50cyB0byBzaXQgc2lkZS1ieS1zaWRlXCIsXHJcbiAgICAgIFwiYWxsT2ZcIjogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvQ2FyZEVsZW1lbnRcIlxyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcclxuICAgICAgICBcImNvbHVtbnNcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwiYXJyYXlcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgYXJyYXkgb2YgQ29sdW1ucyB0byBkaXZpZGUgdGhlIHJlZ2lvbiBpbnRvXCIsXHJcbiAgICAgICAgICBcIml0ZW1zXCI6IHtcclxuICAgICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9Db2x1bW5cIlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJzZWxlY3RBY3Rpb25cIjoge1xyXG4gICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9BY3Rpb25cIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgQWN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgd2hlbiB0aGUgQ29sdW1uU2V0IGlzIGNsaWNrZWQvdGFwcGVkXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwidHlwZVwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJNdXN0IGJlIENvbHVtblNldFwiLFxyXG4gICAgICAgICAgXCJlbnVtXCI6IFtcclxuICAgICAgICAgICAgXCJDb2x1bW5TZXRcIlxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIFwiQ29udGFpbmVyXCI6IHtcclxuICAgICAgXCJhZGRpdGlvbmFsUHJvcGVydGllc1wiOiB0cnVlLFxyXG4gICAgICBcInR5cGVcIjogXCJvYmplY3RcIixcclxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkNvbnRhaW5lcnMgZ3JvdXAgaXRlbXMgdG9nZXRoZXJcIixcclxuICAgICAgXCJhbGxPZlwiOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9DYXJkRWxlbWVudFwiXHJcbiAgICAgICAgfVxyXG4gICAgICBdLFxyXG4gICAgICBcInByb3BlcnRpZXNcIjoge1xyXG4gICAgICAgIFwiaXRlbXNcIjoge1xyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlRoZSBDYXJkIEVsZW1lbnRzIHRvIHJlbmRlciBpbnNpZGUgdGhlIENvbnRhaW5lclwiLFxyXG4gICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9DYXJkRWxlbWVudHNcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJzZWxlY3RBY3Rpb25cIjoge1xyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkFuIEFjdGlvbiB0aGF0IHdpbGwgYmUgaW52b2tlZCB3aGVuIHRoZSBJbWFnZSBpcyB0YXBwZWQgb3Igc2VsZWN0ZWRcIixcclxuICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvQWN0aW9uXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwic3R5bGVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiU3R5bGUgaGludCBmb3IgQ29udGFpbmVyXCIsXHJcbiAgICAgICAgICBcImVudW1cIjogW1xyXG4gICAgICAgICAgICBcImRlZmF1bHRcIixcclxuICAgICAgICAgICAgXCJlbXBoYXNpc1wiXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInR5cGVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiTXVzdCBiZSBDb250YWluZXJcIixcclxuICAgICAgICAgIFwiZW51bVwiOiBbXHJcbiAgICAgICAgICAgIFwiQ29udGFpbmVyXCJcclxuICAgICAgICAgIF1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIFwicmVxdWlyZWRcIjogW1xyXG4gICAgICAgIFwiaXRlbXNcIlxyXG4gICAgICBdXHJcbiAgICB9LFxyXG4gICAgXCJGYWN0XCI6IHtcclxuICAgICAgXCJhZGRpdGlvbmFsUHJvcGVydGllc1wiOiB0cnVlLFxyXG4gICAgICBcInR5cGVcIjogXCJvYmplY3RcIixcclxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkRlc2NyaWJlcyBhIEZhY3QgaW4gYSBGYWN0U2V0IGFzIGEga2V5L3ZhbHVlIHBhaXJcIixcclxuICAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcclxuICAgICAgICBcInR5cGVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImVudW1cIjogW1xyXG4gICAgICAgICAgICBcIkZhY3RcIlxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJ0aXRsZVwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgdGl0bGUgb2YgdGhlIGZhY3RcIlxyXG5cclxuICAgICAgICB9LFxyXG4gICAgICAgIFwidmFsdWVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIHZhbHVlIG9mIHRoZSBmYWN0XCJcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIFwicmVxdWlyZWRcIjogW1xyXG4gICAgICAgIFwidGl0bGVcIixcclxuICAgICAgICBcInZhbHVlXCJcclxuICAgICAgXVxyXG4gICAgfSxcclxuICAgIFwiRmFjdFNldFwiOiB7XHJcbiAgICAgIFwiYWRkaXRpb25hbFByb3BlcnRpZXNcIjogdHJ1ZSxcclxuICAgICAgXCJ0eXBlXCI6IFwib2JqZWN0XCIsXHJcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgRmFjdFNldCBJdGVtIG1ha2VzIGl0IHNpbXBsZSB0byBkaXNwbGF5IGEgc2VyaWVzIG9mIGZhY3RzIChlLmcuIG5hbWUvdmFsdWUgcGFpcnMpIGluIGEgdGFidWxhciBmb3JtLlwiLFxyXG4gICAgICBcImFsbE9mXCI6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBcIiRyZWZcIjogXCIjL2RlZmluaXRpb25zL0NhcmRFbGVtZW50XCJcclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIFwicHJvcGVydGllc1wiOiB7XHJcbiAgICAgICAgXCJmYWN0c1wiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJhcnJheVwiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlRoZSBhcnJheSBvZiBGYWN0c1wiLFxyXG4gICAgICAgICAgXCJpdGVtc1wiOiB7XHJcbiAgICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvRmFjdFwiXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInR5cGVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiTXVzdCBiZSBGYWN0U2V0XCIsXHJcbiAgICAgICAgICBcImVudW1cIjogW1xyXG4gICAgICAgICAgICBcIkZhY3RTZXRcIlxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgXCJyZXF1aXJlZFwiOiBbXHJcbiAgICAgICAgXCJmYWN0c1wiXHJcbiAgICAgIF1cclxuICAgIH0sXHJcbiAgICBcIkhvcml6b250YWxBbGlnbm1lbnRcIjoge1xyXG4gICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkNvbnRyb2xzIGhvdyBJdGVtcyBhcmUgaG9yaXpvbnRhbGx5IHBvc2l0aW9uZWQgd2l0aGluIHRoZWlyIGNvbnRhaW5lci5cIixcclxuICAgICAgXCJlbnVtXCI6IFtcclxuICAgICAgICBcImxlZnRcIixcclxuICAgICAgICBcImNlbnRlclwiLFxyXG4gICAgICAgIFwicmlnaHRcIlxyXG4gICAgICBdXHJcbiAgICB9LFxyXG4gICAgXCJJbWFnZVwiOiB7XHJcbiAgICAgIFwiYWRkaXRpb25hbFByb3BlcnRpZXNcIjogdHJ1ZSxcclxuICAgICAgXCJ0eXBlXCI6IFwib2JqZWN0XCIsXHJcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgSW1hZ2UgSXRlbSBhbGxvd3MgZm9yIHRoZSBpbmNsdXNpb24gb2YgaW1hZ2VzIGluIGFuIEFkYXB0aXZlIENhcmQuXCIsXHJcbiAgICAgIFwiYWxsT2ZcIjogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvQ2FyZEVsZW1lbnRcIlxyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcclxuICAgICAgICBcImFsdFRleHRcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiQWx0ZXJuYXRlIHRleHQgZm9yIHRoZSBpbWFnZSBmb3IgYWNjZXNzaWJpbGl0eVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcImhvcml6b250YWxBbGlnbm1lbnRcIjoge1xyXG4gICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9Ib3Jpem9udGFsQWxpZ25tZW50XCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwic2VsZWN0QWN0aW9uXCI6IHtcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJBbiBBY3Rpb24gdGhhdCB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgSW1hZ2UgaXMgdGFwcGVkIG9yIHNlbGVjdGVkXCIsXHJcbiAgICAgICAgICBcIiRyZWZcIjogXCIjL2RlZmluaXRpb25zL0FjdGlvblwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInNpemVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwib2JqZWN0XCIsXHJcbiAgICAgICAgICBcIiRyZWZcIjogXCIjL2RlZmluaXRpb25zL0ltYWdlU2l6ZVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInN0eWxlXCI6IHtcclxuICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvSW1hZ2VTdHlsZVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInR5cGVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiTXVzdCBiZSBJbWFnZVwiLFxyXG4gICAgICAgICAgXCJlbnVtXCI6IFtcclxuICAgICAgICAgICAgXCJJbWFnZVwiXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInVybFwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgVVJMIHRvIHRoZSBpbWFnZS5cIlxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgXCJyZXF1aXJlZFwiOiBbXHJcbiAgICAgICAgXCJ1cmxcIlxyXG4gICAgICBdXHJcbiAgICB9LFxyXG4gICAgXCJJbWFnZVNldFwiOiB7XHJcbiAgICAgIFwiYWRkaXRpb25hbFByb3BlcnRpZXNcIjogdHJ1ZSxcclxuICAgICAgXCJ0eXBlXCI6IFwib2JqZWN0XCIsXHJcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgSW1hZ2VTZXQgYWxsb3dzIGZvciB0aGUgaW5jbHVzaW9uIG9mIGEgY29sbGVjdGlvbiBpbWFnZXMgbGlrZSBhIHBob3RvZ2FsbGVyeS5cIixcclxuICAgICAgXCJhbGxPZlwiOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9DYXJkRWxlbWVudFwiXHJcbiAgICAgICAgfVxyXG4gICAgICBdLFxyXG4gICAgICBcInByb3BlcnRpZXNcIjoge1xyXG4gICAgICAgIFwiaW1hZ2VzXCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcImFycmF5XCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIGFycmF5IG9mIEltYWdlIGVsZW1lbnRzIHRvIHNob3dcIixcclxuICAgICAgICAgIFwiaXRlbXNcIjoge1xyXG4gICAgICAgICAgICBcIiRyZWZcIjogXCIjL2RlZmluaXRpb25zL0ltYWdlXCJcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIFwiaW1hZ2VTaXplXCI6IHtcclxuICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvSW1hZ2VTaXplXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwidHlwZVwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJNdXN0IGJlIEltYWdlU2V0XCIsXHJcbiAgICAgICAgICBcImVudW1cIjogW1xyXG4gICAgICAgICAgICBcIkltYWdlU2V0XCJcclxuICAgICAgICAgIF1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIFwicmVxdWlyZWRcIjogW1xyXG4gICAgICAgIFwiaW1hZ2VzXCJcclxuICAgICAgXVxyXG4gICAgfSxcclxuICAgIFwiSW1hZ2VTaXplXCI6IHtcclxuICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJDb250cm9scyB0aGUgYXBwcm94aW1hdGUgc2l6ZSBvZiB0aGUgaW1hZ2UuIFRoZSBwaHlzaWNhbCBkaW1lbnNpb25zIHdpbGwgdmFyeSBwZXIgaG9zdC4gU3BlY2lmeSBcXFwiYXV0b1xcXCIgZm9yIHRydWUgaW1hZ2UgZGltZW5zaW9uIG9yIFxcXCJzdHJldGNoXFxcIiB0byBmb3JjZSBpdCB0byBmaWxsIHRoZSBjb250YWluZXJcIixcclxuICAgICAgXCJkZWZhdWx0XCI6IFwiYXV0b1wiLFxyXG4gICAgICBcImVudW1cIjogW1xyXG4gICAgICAgIFwiYXV0b1wiLFxyXG4gICAgICAgIFwic3RyZXRjaFwiLFxyXG4gICAgICAgIFwic21hbGxcIixcclxuICAgICAgICBcIm1lZGl1bVwiLFxyXG4gICAgICAgIFwibGFyZ2VcIlxyXG4gICAgICBdXHJcbiAgICB9LFxyXG4gICAgXCJJbWFnZVN0eWxlXCI6IHtcclxuICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJDb250cm9scyB0aGUgd2F5IEltYWdlcyBhcmUgZGlzcGxheWVkXCIsXHJcbiAgICAgIFwiZW51bVwiOiBbXHJcbiAgICAgICAgXCJkZWZhdWx0XCIsXHJcbiAgICAgICAgXCJwZXJzb25cIlxyXG4gICAgICBdXHJcbiAgICB9LFxyXG4gICAgXCJJbnB1dC5DaG9pY2VTZXRcIjoge1xyXG4gICAgICBcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCI6IHRydWUsXHJcbiAgICAgIFwidHlwZVwiOiBcIm9iamVjdFwiLFxyXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiU2hvd3MgYW4gYXJyYXkgb2YgQ2hvaWNlIG9iamVjdHNcIixcclxuICAgICAgXCJhbGxPZlwiOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9DYXJkRWxlbWVudFwiXHJcbiAgICAgICAgfVxyXG4gICAgICBdLFxyXG4gICAgICBcInByb3BlcnRpZXNcIjoge1xyXG4gICAgICAgIFwiY2hvaWNlc1wiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJhcnJheVwiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcInRoZSBjaG9pY2Ugb3B0aW9uc1wiLFxyXG4gICAgICAgICAgXCJpdGVtc1wiOiB7XHJcbiAgICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvSW5wdXQuQ2hvaWNlXCJcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIFwiaWRcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiSWQgZm9yIHRoZSB2YWx1ZSAod2lsbCBiZSB1c2VkIHRvIGlkZW50aWZ5IGNvbGxlY3RlZCBpbnB1dCB3aGVuIFNVQk1JVCBpcyBjbGlja2VkKVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcImlzTXVsdGlTZWxlY3RcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwiYm9vbGVhblwiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcImFsbG93IG11bHRpcGxlIGNob2ljZXMgdG8gYmUgc2VsZWN0ZWRcIixcclxuICAgICAgICAgIFwiZGVmYXVsdFwiOiBmYWxzZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJzdHlsZVwiOiB7XHJcbiAgICAgICAgICBcIiRyZWZcIjogXCIjL2RlZmluaXRpb25zL0Nob2ljZUlucHV0U3R5bGVcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJ0eXBlXCI6IHtcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJNdXN0IGJlIElucHV0LkNob2ljZUlucHV0XCIsXHJcbiAgICAgICAgICBcImVudW1cIjogW1xyXG4gICAgICAgICAgICBcIklucHV0LkNob2ljZVNldFwiXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwidmFsdWVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIGluaXRpYWwgY2hvaWNlIChvciBzZXQgb2YgY2hvaWNlcykgdGhhdCBzaG91bGQgYmUgc2VsZWN0ZWQuIEZvciBtdWx0aS1zZWxlY3QsIHNwZWNpZmN5IGEgY29tbWEtc2VwYXJhdGVkIHN0cmluZyBvZiB2YWx1ZXNcIlxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgXCJyZXF1aXJlZFwiOiBbXHJcbiAgICAgICAgXCJpZFwiLFxyXG4gICAgICAgIFwiY2hvaWNlc1wiXHJcbiAgICAgIF1cclxuICAgIH0sXHJcbiAgICBcIklucHV0LkRhdGVcIjoge1xyXG4gICAgICBcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCI6IHRydWUsXHJcbiAgICAgIFwidHlwZVwiOiBcIm9iamVjdFwiLFxyXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiSW5wdXQuRGF0ZSBjb2xsZWN0cyBEYXRlIGZyb20gdGhlIHVzZXIsXCIsXHJcbiAgICAgIFwiYWxsT2ZcIjogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvQ2FyZEVsZW1lbnRcIlxyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcclxuICAgICAgICBcImlkXCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIklkIGZvciB0aGUgdmFsdWUgKHdpbGwgYmUgdXNlZCB0byBpZGVudGlmeSBjb2xsZWN0ZWQgaW5wdXQgd2hlbiBTVUJNSVQgaXMgY2xpY2tlZClcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJtYXhcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiaGludCBvZiBtYXhpbXVtIHZhbHVlIGV4cHJlc3NlZCBpbiBJU08tODYwMSBmb3JtYXQgKG1heSBiZSBpZ25vcmVkIGJ5IHNvbWUgY2xpZW50cylcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJtaW5cIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiaGludCBvZiBtaW5pbXVtIHZhbHVlIGV4cHJlc3NlZCBpbiBJU08tODYwMSBmb3JtYXQgKG1heSBiZSBpZ25vcmVkIGJ5IHNvbWUgY2xpZW50cylcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJwbGFjZWhvbGRlclwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaXRsZSBEZXNjcmlwdGlvbiBvZiB0aGUgaW5wdXQgZGVzaXJlZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInR5cGVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIHR5cGUgbXVzdCBiZSBJbnB1dC5EYXRlXCIsXHJcbiAgICAgICAgICBcImVudW1cIjogW1xyXG4gICAgICAgICAgICBcIklucHV0LkRhdGVcIlxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJ2YWx1ZVwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgaW5pdGlhbCB2YWx1ZSBmb3IgYSBmaWVsZCBleHByZXNzZWQgaW4gSVNPLTg2MDEgZm9ybWF0XCJcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIFwicmVxdWlyZWRcIjogW1xyXG4gICAgICAgIFwiaWRcIlxyXG4gICAgICBdXHJcbiAgICB9LFxyXG4gICAgXCJJbnB1dC5OdW1iZXJcIjoge1xyXG4gICAgICBcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCI6IHRydWUsXHJcbiAgICAgIFwidHlwZVwiOiBcIm9iamVjdFwiLFxyXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiSW5wdXQuTnVtYmVyIGNvbGxlY3RzIG51bWJlciBmcm9tIHRoZSB1c2VyLFwiLFxyXG4gICAgICBcImFsbE9mXCI6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBcIiRyZWZcIjogXCIjL2RlZmluaXRpb25zL0NhcmRFbGVtZW50XCJcclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIFwicHJvcGVydGllc1wiOiB7XHJcbiAgICAgICAgXCJpZFwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJJZCBmb3IgdGhlIHZhbHVlICh3aWxsIGJlIHVzZWQgdG8gaWRlbnRpZnkgY29sbGVjdGVkIGlucHV0IHdoZW4gU1VCTUlUIGlzIGNsaWNrZWQpXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwibWF4XCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcIm51bWJlclwiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcImhpbnQgb2YgbWF4aW11bSB2YWx1ZSAobWF5IGJlIGlnbm9yZWQgYnkgc29tZSBjbGllbnRzKVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcIm1pblwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJudW1iZXJcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJoaW50IG9mIG1pbmltdW0gdmFsdWUgKG1heSBiZSBpZ25vcmVkIGJ5IHNvbWUgY2xpZW50cylcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJwbGFjZWhvbGRlclwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaXRsZSBEZXNjcmlwdGlvbiBvZiB0aGUgaW5wdXQgZGVzaXJlZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInR5cGVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIHR5cGUgbXVzdCBiZSBJbnB1dC5OdW1iZXJcIixcclxuICAgICAgICAgIFwiZW51bVwiOiBbXHJcbiAgICAgICAgICAgIFwiSW5wdXQuTnVtYmVyXCJcclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIFwidmFsdWVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwibnVtYmVyXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIGluaXRpYWwgdmFsdWUgZm9yIGEgZmllbGRcIlxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgXCJyZXF1aXJlZFwiOiBbXHJcbiAgICAgICAgXCJpZFwiXHJcbiAgICAgIF1cclxuICAgIH0sXHJcbiAgICBcIklucHV0LlRleHRcIjoge1xyXG4gICAgICBcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCI6IHRydWUsXHJcbiAgICAgIFwidHlwZVwiOiBcIm9iamVjdFwiLFxyXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiSW5wdXQuVGV4dCBjb2xsZWN0cyB0ZXh0IGZyb20gdGhlIHVzZXIsXCIsXHJcbiAgICAgIFwiYWxsT2ZcIjogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvQ2FyZEVsZW1lbnRcIlxyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcclxuICAgICAgICBcImlkXCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIklkIGZvciB0aGUgdmFsdWUgKHdpbGwgYmUgdXNlZCB0byBpZGVudGlmeSBjb2xsZWN0ZWQgaW5wdXQgd2hlbiBTVUJNSVQgaXMgY2xpY2tlZClcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJpc011bHRpbGluZVwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJib29sZWFuXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiRG8geW91IHdhbnQgdG8gYWxsb3cgbXVsdGlwbGUgbGluZXMgb2YgaW5wdXRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJtYXhMZW5ndGhcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwibnVtYmVyXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiaGludCBvZiBtYXhpbXVtIGxlbmd0aCBjaGFyYWN0ZXJzIHRvIGNvbGxlY3QgKG1heSBiZSBpZ25vcmVkIGJ5IHNvbWUgY2xpZW50cylcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJwbGFjZWhvbGRlclwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaXRsZSBEZXNjcmlwdGlvbiBvZiB0aGUgaW5wdXQgZGVzaXJlZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInN0eWxlXCI6IHtcclxuICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvVGV4dElucHV0U3R5bGVcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJ0eXBlXCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIklucHV0LlRleHRcIixcclxuICAgICAgICAgIFwiZW51bVwiOiBbXHJcbiAgICAgICAgICAgIFwiSW5wdXQuVGV4dFwiXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInZhbHVlXCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlRoZSBpbml0aWFsIHZhbHVlIGZvciBhIGZpZWxkXCJcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIFwicmVxdWlyZWRcIjogW1xyXG4gICAgICAgIFwiaWRcIlxyXG4gICAgICBdXHJcbiAgICB9LFxyXG4gICAgXCJJbnB1dC5UaW1lXCI6IHtcclxuICAgICAgXCJhZGRpdGlvbmFsUHJvcGVydGllc1wiOiB0cnVlLFxyXG4gICAgICBcInR5cGVcIjogXCJvYmplY3RcIixcclxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIklucHV0LlRpbWUgY29sbGVjdHMgVGltZSBmcm9tIHRoZSB1c2VyLFwiLFxyXG4gICAgICBcImFsbE9mXCI6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBcIiRyZWZcIjogXCIjL2RlZmluaXRpb25zL0NhcmRFbGVtZW50XCJcclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIFwicHJvcGVydGllc1wiOiB7XHJcbiAgICAgICAgXCJpZFwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJJZCBmb3IgdGhlIHZhbHVlICh3aWxsIGJlIHVzZWQgdG8gaWRlbnRpZnkgY29sbGVjdGVkIGlucHV0IHdoZW4gU1VCTUlUIGlzIGNsaWNrZWQpXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwibWF4XCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcImhpbnQgb2YgbWF4aW11bSB2YWx1ZSAobWF5IGJlIGlnbm9yZWQgYnkgc29tZSBjbGllbnRzKVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcIm1pblwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJoaW50IG9mIG1pbmltdW0gdmFsdWUgKG1heSBiZSBpZ25vcmVkIGJ5IHNvbWUgY2xpZW50cylcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJwbGFjZWhvbGRlclwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaXRsZSBEZXNjcmlwdGlvbiBvZiB0aGUgaW5wdXQgZGVzaXJlZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInR5cGVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIHR5cGUgbXVzdCBiZSBJbnB1dC5UaW1lXCIsXHJcbiAgICAgICAgICBcImVudW1cIjogW1xyXG4gICAgICAgICAgICBcIklucHV0LlRpbWVcIlxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJ2YWx1ZVwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgaW5pdGlhbCB2YWx1ZSBmb3IgYSBmaWVsZCBleHByZXNzZWQgaW4gSVNPLTg2MDEgZm9ybWF0XCJcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIFwicmVxdWlyZWRcIjogW1xyXG4gICAgICAgIFwiaWRcIlxyXG4gICAgICBdXHJcbiAgICB9LFxyXG4gICAgXCJJbnB1dC5Ub2dnbGVcIjoge1xyXG4gICAgICBcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCI6IHRydWUsXHJcbiAgICAgIFwidHlwZVwiOiBcIm9iamVjdFwiLFxyXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiSW5wdXQuVG9nZ2xlIGNvbGxlY3RzIGEgdHJ1ZS9mYWxzZSByZXNwb25zZSBmcm9tIHRoZSB1c2VyXCIsXHJcbiAgICAgIFwiYWxsT2ZcIjogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvQ2FyZEVsZW1lbnRcIlxyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcclxuICAgICAgICBcImlkXCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIklkIGZvciB0aGUgdmFsdWUgKHdpbGwgYmUgdXNlZCB0byBpZGVudGlmeSBjb2xsZWN0ZWQgaW5wdXQgd2hlbiBTVUJNSVQgaXMgY2xpY2tlZClcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJ0aXRsZVwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaXRsZSBmb3IgdGhlIHRvZ2dsZVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInR5cGVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiSW5wdXQuVG9nZ2xlXCIsXHJcbiAgICAgICAgICBcImVudW1cIjogW1xyXG4gICAgICAgICAgICBcIklucHV0LlRvZ2dsZVwiXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInZhbHVlXCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlRoZSBjdXJyZW50IHNlbGVjdGVkIHZhbHVlIChkZWZhdWx0OmZhbHNlKVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInZhbHVlT2ZmXCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlRoZSB2YWx1ZSB3aGVuIHRvZ2dsZSBpcyBvZmYgKGRlZmF1bHQ6ZmFsc2UpXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwidmFsdWVPblwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgdmFsdWUgd2hlbiB0b2dnbGUgaXMgb24gKGRlZmF1bHQ6dHJ1ZSlcIlxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgXCJyZXF1aXJlZFwiOiBbXHJcbiAgICAgICAgXCJpZFwiLFxyXG4gICAgICAgIFwidGl0bGVcIlxyXG4gICAgICBdXHJcbiAgICB9LFxyXG4gICAgXCJUZXh0QmxvY2tcIjoge1xyXG4gICAgICBcImFkZGl0aW9uYWxQcm9wZXJ0aWVzXCI6IHRydWUsXHJcbiAgICAgIFwidHlwZVwiOiBcIm9iamVjdFwiLFxyXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIFRleHRCbG9jayBJdGVtIGFsbG93cyBmb3IgdGhlIGluY2x1c2lvbiBvZiB0ZXh0LCB3aXRoIHZhcmlvdXMgZm9udCBzaXplcywgd2VpZ2h0IGFuZCBjb2xvciwgaW4gQWRhcHRpdmUgQ2FyZHMuXCIsXHJcbiAgICAgIFwiYWxsT2ZcIjogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIFwiJHJlZlwiOiBcIiMvZGVmaW5pdGlvbnMvQ2FyZEVsZW1lbnRcIlxyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcclxuICAgICAgICBcImNvbG9yXCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkNvbnRyb2xzIHRoZSBjb2xvciBvZiBUZXh0QmxvY2sgSXRlbXMuXCIsXHJcbiAgICAgICAgICBcImVudW1cIjogW1xyXG4gICAgICAgICAgICBcImRlZmF1bHRcIixcclxuICAgICAgICAgICAgXCJkYXJrXCIsXHJcbiAgICAgICAgICAgIFwibGlnaHRcIixcclxuICAgICAgICAgICAgXCJhY2NlbnRcIixcclxuICAgICAgICAgICAgXCJnb29kXCIsXHJcbiAgICAgICAgICAgIFwid2FybmluZ1wiLFxyXG4gICAgICAgICAgICBcImF0dGVudGlvblwiXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcImhvcml6b250YWxBbGlnbm1lbnRcIjoge1xyXG4gICAgICAgICAgXCIkcmVmXCI6IFwiIy9kZWZpbml0aW9ucy9Ib3Jpem9udGFsQWxpZ25tZW50XCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwiaXNTdWJ0bGVcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwiYm9vbGVhblwiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkluZGljYXRlcyB3aGV0aGVyIHRoZSBjb2xvciBvZiB0aGUgdGV4dCBzaG91bGQgYmUgc2xpZ2h0bHkgdG9uZWQgZG93biB0byBhcHBlYXIgbGVzcyBwcm9taW5lbnRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJtYXhMaW5lc1wiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJudW1iZXJcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJXaGVuIFdyYXAgaXMgdHJ1ZSwgeW91IGNhbiBzcGVjaWZ5IHRoZSBtYXhpbXVtIG51bWJlciBvZiBsaW5lcyB0byBhbGxvdyB0aGUgdGV4dEJsb2NrIHRvIHVzZS5cIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJzaXplXCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcImNvbnRyb2xzIHNpemUgb2YgdGhlIHRleHQuXCIsXHJcbiAgICAgICAgICBcImVudW1cIjogW1xyXG4gICAgICAgICAgICBcInNtYWxsXCIsXHJcbiAgICAgICAgICAgIFwiZGVmYXVsdFwiLFxyXG4gICAgICAgICAgICBcIm1lZGl1bVwiLFxyXG4gICAgICAgICAgICBcImxhcmdlXCIsXHJcbiAgICAgICAgICAgIFwiZXh0cmFMYXJnZVwiXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInRleHRcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIGFjdHVhbCB0ZXh0IHRvIGRpc3BsYXlcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJ0eXBlXCI6IHtcclxuICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIk11c3QgYmUgVGV4dEJsb2NrXCIsXHJcbiAgICAgICAgICBcImVudW1cIjogW1xyXG4gICAgICAgICAgICBcIlRleHRCbG9ja1wiXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcIndlaWdodFwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJDb250cm9scyB0aGUgd2VpZ2h0IG9mIFRleHRCbG9jayBJdGVtc1wiLFxyXG4gICAgICAgICAgXCJlbnVtXCI6IFtcclxuICAgICAgICAgICAgXCJsaWdodGVyXCIsXHJcbiAgICAgICAgICAgIFwiZGVmYXVsdFwiLFxyXG4gICAgICAgICAgICBcImJvbGRlclwiXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcIndyYXBcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwiYm9vbGVhblwiLFxyXG4gICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlRydWUgaWYgYmUgaXMgYWxsb3dlZCB0byB3cmFwXCJcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIFwicmVxdWlyZWRcIjogW1xyXG4gICAgICAgIFwidGV4dFwiXHJcbiAgICAgIF1cclxuICAgIH0sXHJcbiAgICBcIlNlcGFyYXRvclN0eWxlXCI6IHtcclxuICAgICAgXCJ0eXBlXCI6IFwib2JqZWN0XCIsXHJcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJJbmRpY2F0ZXMgd2hldGhlciB0aGVyZSBzaG91bGQgYmUgYSB2aXNpYmxlIHNlcGFyYXRvciAoZS5nLiBhIGxpbmUpIGJldHdlZW4gdGhlIGVsZW1lbnQgYW5kIHRoZSBvbmUgYmVmb3JlIGl0LiBJZiB0aGlzIHByb3BlcnR5IGlzIG5vdCBzcGVjaWZpZWQsIG5vIHNlcGFyYXRvciBpcyBkaXNwbGF5ZWQuIElmIGl0IGlzLCBhIHNlcGFyYXRvciBsaW5lIGlzIGRpc3BsYXllZC4gQSBzZXBhcmF0b3Igd2lsbCBvbmx5IGFwcGVhciBpZiB0aGVyZSB3YXMgYSBwcmVjZWRpbmcgZWxlbWVudC5cIixcclxuICAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcclxuICAgICAgICBcInRoaWNrbmVzc1wiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJTcGVjaWZpZXMgdGhlIHRoaWNrbmVzcyBvZiB0aGUgc2VwYXJhdGlvbiBsaW5lLlwiLFxyXG4gICAgICAgICAgXCJlbnVtXCI6IFtcclxuICAgICAgICAgICAgXCJkZWZhdWx0XCIsXHJcbiAgICAgICAgICAgIFwidGhpY2tcIlxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJjb2xvclwiOiB7XHJcbiAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcclxuICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJTcGVjaWZpZXMgdGhlIGNvbG9yIG9mIHRoZSBzZXBhcmF0aW9uIGxpbmUuXCIsXHJcbiAgICAgICAgICBcImVudW1cIjogW1xyXG4gICAgICAgICAgICBcImRlZmF1bHRcIixcclxuICAgICAgICAgICAgXCJhY2NlbnRcIlxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIFwiU3BhY2luZ1N0eWxlXCI6IHtcclxuICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXHJcbiAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJDb250cm9scyB0aGUgYW1vdW50IG9mIHNwYWNpbmcgYmV0d2VlbiB0aGlzIGVsZW1lbnQgYW5kIHRoZSBwcmV2aW91cyBlbGVtZW50LlwiLFxyXG4gICAgICBcImVudW1cIjogW1xyXG4gICAgICAgIFwibm9uZVwiLFxyXG4gICAgICAgIFwic21hbGxcIixcclxuICAgICAgICBcImRlZmF1bHRcIixcclxuICAgICAgICBcIm1lZGl1bVwiLFxyXG4gICAgICAgIFwibGFyZ2VcIixcclxuICAgICAgICBcImV4dHJhTGFyZ2VcIixcclxuICAgICAgICBcInBhZGRpbmdcIlxyXG4gICAgICBdXHJcbiAgICB9LFxyXG4gICAgXCJUZXh0SW5wdXRTdHlsZVwiOiB7XHJcbiAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiU3R5bGUgaGludCBmb3IgSW5wdXQuVGV4dC5cIixcclxuICAgICAgXCJlbnVtXCI6IFtcclxuICAgICAgICBcInRleHRcIixcclxuICAgICAgICBcInRlbFwiLFxyXG4gICAgICAgIFwidXJsXCIsXHJcbiAgICAgICAgXCJlbWFpbFwiXHJcbiAgICAgIF1cclxuICAgIH1cclxuICB9XHJcbn07XHJcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmV4cG9ydCAqIGZyb20gXCIuL3N0cmluZ3NcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vc2hhcmVkXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL2NvbnRhaW5lcnMvaG9zdC1jb250YWluZXJcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vY29udGFpbmVycy9kZWZhdWx0L2RlZmF1bHQtY29udGFpbmVyXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL2NhcmQtZGVzaWduZXItc3VyZmFjZVwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9jYXJkLWRlc2lnbmVyXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL2NvbnN0YW50c1wiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9kcmFnZ2FibGUtZWxlbWVudFwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9kZXNpZ25lci1wZWVyc1wiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9wZWVyLWNvbW1hbmRcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vbWlzY2VsbGFuZW91c1wiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9zZXR0aW5ncy1tYW5hZ2VyXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL3NpZGUtcGFuZWxcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vdG9vbC1ib3hcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vdG9vbGJhclwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi90b29sLXBhbGV0dGVcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vc3BsaXR0ZXJcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vYmFzZS10cmVlLWl0ZW1cIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vZGVzaWduZXItcGVlci10cmVlaXRlbVwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9kYXRhXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL2NhdGFsb2d1ZVwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9jb250YWluZXJzL2hvc3QtY29udGFpbmVyXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL2NvbnRhaW5lcnMvZGVmYXVsdC9kZWZhdWx0LWNvbnRhaW5lclwiOyIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmltcG9ydCAqIGFzIGNvbnRhaW5lcnMgZnJvbSBcIi4vY29udGFpbmVyc1wiO1xyXG5cclxuZXhwb3J0ICogZnJvbSBcIi4vYWRhcHRpdmVjYXJkcy1kZXNpZ25lci1zdGFuZGFsb25lXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL2NvbnRhaW5lcnMvaW5kZXhcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBkZWZhdWx0TWljcm9zb2Z0SG9zdHM6IGNvbnRhaW5lcnMuSG9zdENvbnRhaW5lcltdID0gW1xyXG5cdG5ldyBjb250YWluZXJzLldlYkNoYXRDb250YWluZXIoXCJCb3QgRnJhbWV3b3JrIFdlYkNoYXRcIiwgXCJjb250YWluZXJzL3dlYmNoYXQtY29udGFpbmVyLmNzc1wiKSxcclxuXHRuZXcgY29udGFpbmVycy5PdXRsb29rQ29udGFpbmVyKFwiT3V0bG9vayBBY3Rpb25hYmxlIE1lc3NhZ2VzXCIsIFwiY29udGFpbmVycy9vdXRsb29rLWNvbnRhaW5lci5jc3NcIiksXHJcblx0bmV3IGNvbnRhaW5lcnMuRGFya1RlYW1zQ29udGFpbmVyKFwiTWljcm9zb2Z0IFRlYW1zIC0gRGFya1wiLCBcImNvbnRhaW5lcnMvdGVhbXMtY29udGFpbmVyLWRhcmsuY3NzXCIpLFxyXG5cdG5ldyBjb250YWluZXJzLkxpZ2h0VGVhbXNDb250YWluZXIoXCJNaWNyb3NvZnQgVGVhbXMgLSBMaWdodFwiLCBcImNvbnRhaW5lcnMvdGVhbXMtY29udGFpbmVyLWxpZ2h0LmNzc1wiKSxcclxuXHRuZXcgY29udGFpbmVycy5EYXJrQ29ydGFuYUNvbnRhaW5lcihcIkNvcnRhbmEgU2tpbGxzIC0gRGFya1wiLCBcImNvbnRhaW5lcnMvY29ydGFuYS1jb250YWluZXItZGFyay5jc3NcIiksXHJcblx0bmV3IGNvbnRhaW5lcnMuTGlnaHRDb3J0YW5hQ29udGFpbmVyKFwiQ29ydGFuYSBTa2lsbHMgLSBMaWdodFwiLCBcImNvbnRhaW5lcnMvY29ydGFuYS1jb250YWluZXItbGlnaHQuY3NzXCIpLFxyXG5cdG5ldyBjb250YWluZXJzLlRpbWVsaW5lQ29udGFpbmVyKFwiV2luZG93cyBUaW1lbGluZVwiLCBcImNvbnRhaW5lcnMvdGltZWxpbmUtY29udGFpbmVyLmNzc1wiKSxcclxuXHRuZXcgY29udGFpbmVycy5Cb3RGcmFtZXdvcmtDb250YWluZXIoXCJCb3QgRnJhbWV3b3JrIE90aGVyIENoYW5uZWxzIChJbWFnZSByZW5kZXIpXCIsIFwiY29udGFpbmVycy9iZi1pbWFnZS1jb250YWluZXIuY3NzXCIpLFxyXG5cdG5ldyBjb250YWluZXJzLkNvcnRhbmFDbGFzc2ljQ29udGFpbmVyKFwiQ29ydGFuYSBTa2lsbHMgKENsYXNzaWMpXCIsIFwiY29udGFpbmVycy9jb3J0YW5hLWNsYXNzaWMtY29udGFpbmVyLmNzc1wiKSxcclxuXHRuZXcgY29udGFpbmVycy5Ub2FzdENvbnRhaW5lcihcIldpbmRvd3MgTm90aWZpY2F0aW9ucyAoUHJldmlldylcIiwgXCJjb250YWluZXJzL3RvYXN0LWNvbnRhaW5lci5jc3NcIiksXHJcbl0iLCJpbXBvcnQgeyBEcmFnZ2FibGVFbGVtZW50IH0gZnJvbSBcIi4vZHJhZ2dhYmxlLWVsZW1lbnRcIjtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlVHJlZUl0ZW0gZXh0ZW5kcyBEcmFnZ2FibGVFbGVtZW50IHtcclxuICAgIHByaXZhdGUgc3RhdGljIGNvbGxhcHNlZEljb25DbGFzcyA9IFwiYWNkLWljb24tY2hldnJvblJpZ2h0XCI7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBleHBhbmRlZEljb25DbGFzcyA9IFwiYWNkLWljb24tY2hldnJvbkRvd25cIjtcclxuXHJcbiAgICBwcml2YXRlIF9pc0V4cGFuZGVkOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHByaXZhdGUgX2lzU2VsZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgX3RyZWVJdGVtRWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIF9leHBhbmRDb2xsYXBzZUVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBfY2hpbGRDb250YWluZXJFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0TGFiZWxUZXh0KCk6IHN0cmluZztcclxuXHJcbiAgICBwcm90ZWN0ZWQgY2xpY2soZTogTW91c2VFdmVudCkge1xyXG4gICAgICAgIHN1cGVyLmNsaWNrKGUpO1xyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGVkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldEljb25DbGFzcygpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRBZGRpdGlvbmFsVGV4dCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRBZGRpdGlvbmFsVGV4dENsYXNzKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiYWNkLXRyZWUtaXRlbS1hZGRpdGlvbmFsVGV4dFwiO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRJbmRlbnRhdGlvbkxldmVsSW5jcmVtZW50KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIDg7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldERyYWdTb3VyY2VFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdHJlZUl0ZW1FbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzZWxlY3RlZCgpIHtcclxuICAgICAgICAvLyBEbyBub3RoaW5nIGluIGJhc2UgaW1wbGVtZW50YXRpb25cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW5kZXIoKTogSFRNTEVsZW1lbnQge1xyXG4gICAgICAgIGxldCByb290RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG4gICAgICAgIHRoaXMuX3RyZWVJdGVtRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5fdHJlZUl0ZW1FbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJhY2QtdHJlZS1pdGVtXCIpO1xyXG4gICAgICAgIHRoaXMuX3RyZWVJdGVtRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgdGhpcy5fdHJlZUl0ZW1FbGVtZW50LnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xyXG4gICAgICAgIHRoaXMuX3RyZWVJdGVtRWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdCA9IHRoaXMuZ2V0SW5kZW50YXRpb25MZXZlbEluY3JlbWVudCgpICogKDEgKyB0aGlzLmxldmVsKSArIFwicHhcIjtcclxuXHJcbiAgICAgICAgdGhpcy5fZXhwYW5kQ29sbGFwc2VFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLl9leHBhbmRDb2xsYXBzZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImFjZC10cmVlLWl0ZW0tZXhwYW5kQ29sbGFwc2VCdXR0b25cIik7XHJcbiAgICAgICAgdGhpcy5fZXhwYW5kQ29sbGFwc2VFbGVtZW50LnN0eWxlLmZsZXggPSBcIjAgMCBhdXRvXCI7XHJcbiAgICAgICAgdGhpcy5fZXhwYW5kQ29sbGFwc2VFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSB0aGlzLmdldENoaWxkQ291bnQoKSA+IDAgPyBcInZpc2libGVcIiA6IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgdGhpcy5fZXhwYW5kQ29sbGFwc2VFbGVtZW50Lm9uY2xpY2sgPSAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9pc0V4cGFuZGVkID0gIXRoaXMuX2lzRXhwYW5kZWQ7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xyXG5cclxuICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl90cmVlSXRlbUVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fZXhwYW5kQ29sbGFwc2VFbGVtZW50KTtcclxuXHJcbiAgICAgICAgbGV0IHRleHRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0ZXh0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYWNkLXRyZWUtaXRlbS10ZXh0XCIpO1xyXG4gICAgICAgIHRleHRFbGVtZW50LnN0eWxlLmZsZXggPSBcIjEgMSBhdXRvXCI7XHJcbiAgICAgICAgdGV4dEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50LnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50LnN0eWxlLndoaXRlU3BhY2UgPSBcIm5vd3JhcFwiO1xyXG4gICAgICAgIHRleHRFbGVtZW50LnN0eWxlLnRleHRPdmVyZmxvdyA9IFwiZWxsaXBzaXNcIjtcclxuICAgICAgICB0ZXh0RWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdldEljb25DbGFzcygpKSB7XHJcbiAgICAgICAgICAgIGxldCBpY29uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJhY2QtaWNvblwiLCBcImFjZC10cmVlVmlldy1pY29uXCIsIHRoaXMuZ2V0SWNvbkNsYXNzKCkpO1xyXG5cclxuICAgICAgICAgICAgdGV4dEVsZW1lbnQuYXBwZW5kQ2hpbGQoaWNvbkVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGxhYmVsU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIGxhYmVsU3Bhbi5jbGFzc0xpc3QuYWRkKFwiYWNkLXRyZWUtaXRlbS10eXBlTmFtZVwiKTtcclxuICAgICAgICBsYWJlbFNwYW4uaW5uZXJUZXh0ID0gdGhpcy5nZXRMYWJlbFRleHQoKTtcclxuXHJcbiAgICAgICAgdGV4dEVsZW1lbnQuYXBwZW5kQ2hpbGQobGFiZWxTcGFuKTtcclxuXHJcbiAgICAgICAgbGV0IHRleHQgPSB0aGlzLmdldEFkZGl0aW9uYWxUZXh0KCk7XHJcblxyXG4gICAgICAgIGlmICh0ZXh0ICYmIHRleHQgIT0gXCJcIikge1xyXG4gICAgICAgICAgICBsZXQgYWRkaXRpb25hbFRleHRTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgIGFkZGl0aW9uYWxUZXh0U3Bhbi5jbGFzc0xpc3QuYWRkKHRoaXMuZ2V0QWRkaXRpb25hbFRleHRDbGFzcygpKTtcclxuICAgICAgICAgICAgYWRkaXRpb25hbFRleHRTcGFuLmlubmVyVGV4dCA9IFwiIFtcIiArIHRleHQgKyBcIl1cIjtcclxuXHJcbiAgICAgICAgICAgIHRleHRFbGVtZW50LmFwcGVuZENoaWxkKGFkZGl0aW9uYWxUZXh0U3Bhbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl90cmVlSXRlbUVsZW1lbnQuYXBwZW5kQ2hpbGQodGV4dEVsZW1lbnQpO1xyXG5cclxuICAgICAgICByb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl90cmVlSXRlbUVsZW1lbnQpO1xyXG5cclxuICAgICAgICB0aGlzLl9jaGlsZENvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZ2V0Q2hpbGRDb3VudCgpOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHJlbmRlcmVkQ2hpbGRJdGVtID0gdGhpcy5nZXRDaGlsZEF0KGkpLnJlbmRlcigpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fY2hpbGRDb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKHJlbmRlcmVkQ2hpbGRJdGVtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2NoaWxkQ29udGFpbmVyRWxlbWVudCk7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlTGF5b3V0KCk7XHJcblxyXG4gICAgICAgIHJldHVybiByb290RWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX2xldmVsOiBudW1iZXIgPSAwO1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGFic3RyYWN0IGdldENoaWxkQ291bnQoKTogbnVtYmVyO1xyXG4gICAgYWJzdHJhY3QgZ2V0Q2hpbGRBdChpbmRleDogbnVtYmVyKTogQmFzZVRyZWVJdGVtO1xyXG5cclxuICAgIHVwZGF0ZUxheW91dCgpIHtcclxuICAgICAgICBpZiAodGhpcy5faXNFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jaGlsZENvbnRhaW5lckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImFjZC1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZENvbGxhcHNlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKEJhc2VUcmVlSXRlbS5jb2xsYXBzZWRJY29uQ2xhc3MpO1xyXG4gICAgICAgICAgICB0aGlzLl9leHBhbmRDb2xsYXBzZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChCYXNlVHJlZUl0ZW0uZXhwYW5kZWRJY29uQ2xhc3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fY2hpbGRDb250YWluZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJhY2QtaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICB0aGlzLl9leHBhbmRDb2xsYXBzZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChCYXNlVHJlZUl0ZW0uY29sbGFwc2VkSWNvbkNsYXNzKTtcclxuICAgICAgICAgICAgdGhpcy5fZXhwYW5kQ29sbGFwc2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQmFzZVRyZWVJdGVtLmV4cGFuZGVkSWNvbkNsYXNzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwYW5kKCkge1xyXG4gICAgICAgIHRoaXMuX2lzRXhwYW5kZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRHJhZ2dhYmxlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbGV2ZWwoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbGV2ZWw7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzU2VsZWN0ZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzU2VsZWN0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGlzU2VsZWN0ZWQodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9pc1NlbGVjdGVkID0gdmFsdWU7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RyZWVJdGVtRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl90cmVlSXRlbUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmltcG9ydCAqIGFzIEFkYXB0aXZlIGZyb20gXCJhZGFwdGl2ZWNhcmRzXCI7XHJcbmltcG9ydCAqIGFzIENvbnRyb2xzIGZyb20gXCJhZGFwdGl2ZWNhcmRzLWNvbnRyb2xzXCI7XHJcbmltcG9ydCB7IERyYWdnYWJsZUVsZW1lbnQgfSBmcm9tIFwiLi9kcmFnZ2FibGUtZWxlbWVudFwiO1xyXG5pbXBvcnQgeyBJUG9pbnQgfSBmcm9tIFwiLi9taXNjZWxsYW5lb3VzXCI7XHJcbmltcG9ydCAqIGFzIERlc2lnbmVyUGVlcnMgZnJvbSBcIi4vZGVzaWduZXItcGVlcnNcIjtcclxuaW1wb3J0ICogYXMgQUNEYXRhIGZyb20gXCJhZGFwdGl2ZWNhcmRzLXRlbXBsYXRpbmdcIjtcclxuaW1wb3J0ICogYXMgU2hhcmVkIGZyb20gXCIuL3NoYXJlZFwiO1xyXG5cclxuZXhwb3J0IHR5cGUgQ2FyZEVsZW1lbnRUeXBlID0geyBuZXcoKTogQWRhcHRpdmUuQ2FyZEVsZW1lbnQgfTtcclxuZXhwb3J0IHR5cGUgQWN0aW9uVHlwZSA9IHsgbmV3KCk6IEFkYXB0aXZlLkFjdGlvbiB9O1xyXG5leHBvcnQgdHlwZSBDYXJkRWxlbWVudFBlZXJUeXBlID0ge1xyXG4gICAgbmV3KFxyXG4gICAgICAgIHBhcmVudDogRGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXIsXHJcbiAgICAgICAgZGVzaWduZXJTdXJmYWNlOiBDYXJkRGVzaWduZXJTdXJmYWNlLFxyXG4gICAgICAgIHJlZ2lzdHJhdGlvbjogRGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXJSZWdpc3RyYXRpb25CYXNlLFxyXG4gICAgICAgIGNhcmRFbGVtZW50OiBBZGFwdGl2ZS5DYXJkRWxlbWVudFxyXG4gICAgKTogRGVzaWduZXJQZWVycy5DYXJkRWxlbWVudFBlZXJcclxufTtcclxuZXhwb3J0IHR5cGUgQWN0aW9uUGVlclR5cGUgPSB7XHJcbiAgICBuZXcoXHJcbiAgICAgICAgcGFyZW50OiBEZXNpZ25lclBlZXJzLkRlc2lnbmVyUGVlcixcclxuICAgICAgICBkZXNpZ25lclN1cmZhY2U6IENhcmREZXNpZ25lclN1cmZhY2UsXHJcbiAgICAgICAgcmVnaXN0cmF0aW9uOiBEZXNpZ25lclBlZXJzLkRlc2lnbmVyUGVlclJlZ2lzdHJhdGlvbkJhc2UsXHJcbiAgICAgICAgYWN0aW9uOiBBZGFwdGl2ZS5BY3Rpb25cclxuICAgICk6IERlc2lnbmVyUGVlcnMuQWN0aW9uUGVlclxyXG59O1xyXG5cclxuY2xhc3MgRGVzaWduZXJQZWVyQ2F0ZWdvcnkge1xyXG4gICAgc3RhdGljIFVua25vd24gPSBcIlVua25vd25cIjtcclxuICAgIHN0YXRpYyBDb250YWluZXJzID0gXCJDb250YWluZXJzXCI7XHJcbiAgICBzdGF0aWMgRWxlbWVudHMgPSBcIkVsZW1lbnRzXCI7XHJcbiAgICBzdGF0aWMgSW5wdXRzID0gXCJJbnB1dHNcIjtcclxuICAgIHN0YXRpYyBBY3Rpb25zID0gXCJBY3Rpb25zXCI7XHJcbn1cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBEZXNpZ25lclBlZXJSZWdpc3RyeTxUU291cmNlLCBUUGVlcj4ge1xyXG4gICAgcHJvdGVjdGVkIF9pdGVtczogQXJyYXk8RGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXJSZWdpc3RyYXRpb248VFNvdXJjZSwgVFBlZXI+PiA9IFtdO1xyXG5cclxuICAgIHJlYWRvbmx5IGRlZmF1bHRSZWdpc3RyYXRpb24gPSBuZXcgRGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXJSZWdpc3RyYXRpb25CYXNlKERlc2lnbmVyUGVlckNhdGVnb3J5LlVua25vd24sIFwiYWNkLWljb24tdW5rbm93blBlZXJcIik7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFic3RyYWN0IHJlc2V0KCk7XHJcblxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kVHlwZVJlZ2lzdHJhdGlvbihzb3VyY2VUeXBlOiBUU291cmNlKTogRGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXJSZWdpc3RyYXRpb248VFNvdXJjZSwgVFBlZXI+IHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2l0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9pdGVtc1tpXS5zb3VyY2VUeXBlID09PSBzb3VyY2VUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faXRlbXNbaV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVyUGVlcihzb3VyY2VUeXBlOiBUU291cmNlLCBwZWVyVHlwZTogVFBlZXIsIGNhdGVnb3J5OiBzdHJpbmcsIGljb25DbGFzczogc3RyaW5nID0gbnVsbCkge1xyXG4gICAgICAgIHZhciByZWdpc3RyYXRpb25JbmZvID0gdGhpcy5maW5kVHlwZVJlZ2lzdHJhdGlvbihzb3VyY2VUeXBlKTtcclxuXHJcbiAgICAgICAgaWYgKHJlZ2lzdHJhdGlvbkluZm8gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25JbmZvLnBlZXJUeXBlID0gcGVlclR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25JbmZvID0gbmV3IERlc2lnbmVyUGVlcnMuRGVzaWduZXJQZWVyUmVnaXN0cmF0aW9uPFRTb3VyY2UsIFRQZWVyPiAoXHJcbiAgICAgICAgICAgICAgICBzb3VyY2VUeXBlLFxyXG4gICAgICAgICAgICAgICAgcGVlclR5cGUsXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgIGljb25DbGFzcyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9pdGVtcy5wdXNoKHJlZ2lzdHJhdGlvbkluZm8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1bnJlZ2lzdGVyUGVlcihzb3VyY2VUeXBlOiBUU291cmNlKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9pdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faXRlbXNbaV0uc291cmNlVHlwZSA9PT0gc291cmNlVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faXRlbXMuc3BsaWNlKGksIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENhcmRFbGVtZW50UGVlclJlZ2lzdHJ5IGV4dGVuZHMgRGVzaWduZXJQZWVyUmVnaXN0cnk8Q2FyZEVsZW1lbnRUeXBlLCBDYXJkRWxlbWVudFBlZXJUeXBlPiB7XHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLmNsZWFyKCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJQZWVyKEFkYXB0aXZlLkFkYXB0aXZlQ2FyZCwgRGVzaWduZXJQZWVycy5BZGFwdGl2ZUNhcmRQZWVyLCBEZXNpZ25lclBlZXJDYXRlZ29yeS5Db250YWluZXJzLCBcImFjZC1pY29uLWFkYXB0aXZlQ2FyZFwiKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyUGVlcihBZGFwdGl2ZS5Db250YWluZXIsIERlc2lnbmVyUGVlcnMuQ29udGFpbmVyUGVlciwgRGVzaWduZXJQZWVyQ2F0ZWdvcnkuQ29udGFpbmVycywgXCJhY2QtaWNvbi1jb250YWluZXJcIik7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclBlZXIoQWRhcHRpdmUuQ29sdW1uU2V0LCBEZXNpZ25lclBlZXJzLkNvbHVtblNldFBlZXIsIERlc2lnbmVyUGVlckNhdGVnb3J5LkNvbnRhaW5lcnMsIFwiYWNkLWljb24tY29sdW1uU2V0XCIpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJQZWVyKEFkYXB0aXZlLkNvbHVtbiwgRGVzaWduZXJQZWVycy5Db2x1bW5QZWVyLCBEZXNpZ25lclBlZXJDYXRlZ29yeS5Db250YWluZXJzLCBcImFjZC1pY29uLWNvbHVtblwiKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyUGVlcihBZGFwdGl2ZS5JbWFnZVNldCwgRGVzaWduZXJQZWVycy5JbWFnZVNldFBlZXIsIERlc2lnbmVyUGVlckNhdGVnb3J5LkNvbnRhaW5lcnMsIFwiYWNkLWljb24taW1hZ2VTZXRcIik7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclBlZXIoQWRhcHRpdmUuRmFjdFNldCwgRGVzaWduZXJQZWVycy5GYWN0U2V0UGVlciwgRGVzaWduZXJQZWVyQ2F0ZWdvcnkuQ29udGFpbmVycywgXCJhY2QtaWNvbi1mYWN0U2V0XCIpO1xyXG5cclxuICAgICAgICB0aGlzLnJlZ2lzdGVyUGVlcihBZGFwdGl2ZS5UZXh0QmxvY2ssIERlc2lnbmVyUGVlcnMuVGV4dEJsb2NrUGVlciwgRGVzaWduZXJQZWVyQ2F0ZWdvcnkuRWxlbWVudHMsIFwiYWNkLWljb24tdGV4dEJsb2NrXCIpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJQZWVyKEFkYXB0aXZlLlJpY2hUZXh0QmxvY2ssIERlc2lnbmVyUGVlcnMuUmljaFRleHRCbG9ja1BlZXIsIERlc2lnbmVyUGVlckNhdGVnb3J5LkVsZW1lbnRzLCBcImFjZC1pY29uLXJpY2hUZXh0QmxvY2tcIik7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclBlZXIoQWRhcHRpdmUuSW1hZ2UsIERlc2lnbmVyUGVlcnMuSW1hZ2VQZWVyLCBEZXNpZ25lclBlZXJDYXRlZ29yeS5FbGVtZW50cywgXCJhY2QtaWNvbi1pbWFnZVwiKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyUGVlcihBZGFwdGl2ZS5NZWRpYSwgRGVzaWduZXJQZWVycy5NZWRpYVBlZXIsIERlc2lnbmVyUGVlckNhdGVnb3J5LkVsZW1lbnRzLCBcImFjZC1pY29uLW1lZGlhXCIpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJQZWVyKEFkYXB0aXZlLkFjdGlvblNldCwgRGVzaWduZXJQZWVycy5BY3Rpb25TZXRQZWVyLCBEZXNpZ25lclBlZXJDYXRlZ29yeS5FbGVtZW50cywgXCJhY2QtaWNvbi1hY3Rpb25TZXRcIik7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJQZWVyKEFkYXB0aXZlLlRleHRJbnB1dCwgRGVzaWduZXJQZWVycy5UZXh0SW5wdXRQZWVyLCBEZXNpZ25lclBlZXJDYXRlZ29yeS5JbnB1dHMsIFwiYWNkLWljb24taW5wdXRUZXh0XCIpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJQZWVyKEFkYXB0aXZlLkRhdGVJbnB1dCwgRGVzaWduZXJQZWVycy5EYXRlSW5wdXRQZWVyLCBEZXNpZ25lclBlZXJDYXRlZ29yeS5JbnB1dHMsIFwiYWNkLWljb24taW5wdXREYXRlXCIpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJQZWVyKEFkYXB0aXZlLlRpbWVJbnB1dCwgRGVzaWduZXJQZWVycy5UaW1lSW5wdXRQZWVyLCBEZXNpZ25lclBlZXJDYXRlZ29yeS5JbnB1dHMsIFwiYWNkLWljb24taW5wdXRUaW1lXCIpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJQZWVyKEFkYXB0aXZlLlRvZ2dsZUlucHV0LCBEZXNpZ25lclBlZXJzLlRvZ2dsZUlucHV0UGVlciwgRGVzaWduZXJQZWVyQ2F0ZWdvcnkuSW5wdXRzLCBcImFjZC1pY29uLWlucHV0VG9nZ2xlXCIpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJQZWVyKEFkYXB0aXZlLk51bWJlcklucHV0LCBEZXNpZ25lclBlZXJzLk51bWJlcklucHV0UGVlciwgRGVzaWduZXJQZWVyQ2F0ZWdvcnkuSW5wdXRzLCBcImFjZC1pY29uLWlucHV0TnVtYmVyXCIpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJQZWVyKEFkYXB0aXZlLkNob2ljZVNldElucHV0LCBEZXNpZ25lclBlZXJzLkNob2ljZVNldElucHV0UGVlciwgRGVzaWduZXJQZWVyQ2F0ZWdvcnkuSW5wdXRzLCBcImFjZC1pY29uLWlucHV0Q2hvaWNlU2V0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVBlZXJJbnN0YW5jZShkZXNpZ25lclN1cmZhY2U6IENhcmREZXNpZ25lclN1cmZhY2UsIHBhcmVudDogRGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXIsIGNhcmRFbGVtZW50OiBBZGFwdGl2ZS5DYXJkRWxlbWVudCk6IERlc2lnbmVyUGVlcnMuQ2FyZEVsZW1lbnRQZWVyIHtcclxuICAgICAgICB2YXIgcmVnaXN0cmF0aW9uSW5mbyA9IHRoaXMuZmluZFR5cGVSZWdpc3RyYXRpb24oKDxhbnk+Y2FyZEVsZW1lbnQpLmNvbnN0cnVjdG9yKTtcclxuXHJcbiAgICAgICAgdmFyIHBlZXIgPSByZWdpc3RyYXRpb25JbmZvID8gbmV3IHJlZ2lzdHJhdGlvbkluZm8ucGVlclR5cGUocGFyZW50LCBkZXNpZ25lclN1cmZhY2UsIHJlZ2lzdHJhdGlvbkluZm8sIGNhcmRFbGVtZW50KSA6IG5ldyBEZXNpZ25lclBlZXJzLkNhcmRFbGVtZW50UGVlcihwYXJlbnQsIGRlc2lnbmVyU3VyZmFjZSwgdGhpcy5kZWZhdWx0UmVnaXN0cmF0aW9uLCBjYXJkRWxlbWVudCk7XHJcblxyXG4gICAgICAgIHJldHVybiBwZWVyO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQWN0aW9uUGVlclJlZ2lzdHJ5IGV4dGVuZHMgRGVzaWduZXJQZWVyUmVnaXN0cnk8QWN0aW9uVHlwZSwgQWN0aW9uUGVlclR5cGU+IHtcclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclBlZXIoQWRhcHRpdmUuSHR0cEFjdGlvbiwgRGVzaWduZXJQZWVycy5IdHRwQWN0aW9uUGVlciwgRGVzaWduZXJQZWVyQ2F0ZWdvcnkuQWN0aW9ucywgXCJhY2QtaWNvbi1hY3Rpb25IdHRwXCIpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJQZWVyKEFkYXB0aXZlLlN1Ym1pdEFjdGlvbiwgRGVzaWduZXJQZWVycy5TdWJtaXRBY3Rpb25QZWVyLCBEZXNpZ25lclBlZXJDYXRlZ29yeS5BY3Rpb25zLCBcImFjZC1pY29uLWFjdGlvblN1Ym1pdFwiKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyUGVlcihBZGFwdGl2ZS5PcGVuVXJsQWN0aW9uLCBEZXNpZ25lclBlZXJzLk9wZW5VcmxBY3Rpb25QZWVyLCBEZXNpZ25lclBlZXJDYXRlZ29yeS5BY3Rpb25zLCBcImFjZC1pY29uLWFjdGlvbk9wZW5VcmxcIik7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclBlZXIoQWRhcHRpdmUuU2hvd0NhcmRBY3Rpb24sIERlc2lnbmVyUGVlcnMuU2hvd0NhcmRBY3Rpb25QZWVyLCBEZXNpZ25lclBlZXJDYXRlZ29yeS5BY3Rpb25zLCBcImFjZC1pY29uLWFjdGlvblNob3dDYXJkXCIpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJQZWVyKEFkYXB0aXZlLlRvZ2dsZVZpc2liaWxpdHlBY3Rpb24sIERlc2lnbmVyUGVlcnMuVG9nZ2xlVmlzaWJpbGl0eUFjdGlvblBlZXIsIERlc2lnbmVyUGVlckNhdGVnb3J5LkFjdGlvbnMsIFwiYWNkLWljb24tYWN0aW9uVG9nZ2xlVmlzaWJpbGl0eVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVQZWVySW5zdGFuY2UoZGVzaWduZXJTdXJmYWNlOiBDYXJkRGVzaWduZXJTdXJmYWNlLCBwYXJlbnQ6IERlc2lnbmVyUGVlcnMuRGVzaWduZXJQZWVyLCBhY3Rpb246IEFkYXB0aXZlLkFjdGlvbik6IERlc2lnbmVyUGVlcnMuQWN0aW9uUGVlciB7XHJcbiAgICAgICAgdmFyIHJlZ2lzdHJhdGlvbkluZm8gPSB0aGlzLmZpbmRUeXBlUmVnaXN0cmF0aW9uKCg8YW55PmFjdGlvbikuY29uc3RydWN0b3IpO1xyXG5cclxuICAgICAgICB2YXIgcGVlciA9IHJlZ2lzdHJhdGlvbkluZm8gPyBuZXcgcmVnaXN0cmF0aW9uSW5mby5wZWVyVHlwZShwYXJlbnQsIGRlc2lnbmVyU3VyZmFjZSwgcmVnaXN0cmF0aW9uSW5mbywgYWN0aW9uKSA6IG5ldyBEZXNpZ25lclBlZXJzLkFjdGlvblBlZXIocGFyZW50LCBkZXNpZ25lclN1cmZhY2UsIHRoaXMuZGVmYXVsdFJlZ2lzdHJhdGlvbiwgYWN0aW9uKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBlZXI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIERyYWdIYW5kbGUgZXh0ZW5kcyBEcmFnZ2FibGVFbGVtZW50IHtcclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImFjZC1wZWVyQnV0dG9uXCIsIFwiYWNkLWljb24tZHJhZ1wiKTtcclxuICAgICAgICBlbGVtZW50LnRpdGxlID0gXCJEcmFnIHRvIG1vdmUgdGhpcyBlbGVtZW50XCI7XHJcbiAgICAgICAgZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICBlbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUuekluZGV4ID0gXCI1MDBcIjtcclxuXHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDYXJkRGVzaWduZXJTdXJmYWNlIHtcclxuICAgIHN0YXRpYyByZWFkb25seSBjYXJkRWxlbWVudFBlZXJSZWdpc3RyeTogQ2FyZEVsZW1lbnRQZWVyUmVnaXN0cnkgPSBuZXcgQ2FyZEVsZW1lbnRQZWVyUmVnaXN0cnkoKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBhY3Rpb25QZWVyUmVnaXN0cnk6IEFjdGlvblBlZXJSZWdpc3RyeSA9IG5ldyBBY3Rpb25QZWVyUmVnaXN0cnkoKTtcclxuXHJcbiAgICBwcml2YXRlIF91cGRhdGVDb3VudDogbnVtYmVyID0gMDtcclxuXHJcbiAgICBwcml2YXRlIF9jYXJkOiBBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQ7XHJcbiAgICBwcml2YXRlIF9hbGxQZWVyczogQXJyYXk8RGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXI+ID0gW107XHJcbiAgICBwcml2YXRlIF9yb290UGVlcjogRGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXI7XHJcbiAgICBwcml2YXRlIF9jYXJkSG9zdDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIF9kZXNpZ25lclN1cmZhY2U6IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBfc2VsZWN0ZWRQZWVyOiBEZXNpZ25lclBlZXJzLkRlc2lnbmVyUGVlcjtcclxuICAgIHByaXZhdGUgX2RyYWdnZWRQZWVyOiBEZXNpZ25lclBlZXJzLkRlc2lnbmVyUGVlcjtcclxuICAgIHByaXZhdGUgX2Ryb3BUYXJnZXQ6IERlc2lnbmVyUGVlcnMuRGVzaWduZXJQZWVyO1xyXG4gICAgcHJpdmF0ZSBfZHJhZ0hhbmRsZTogRHJhZ0hhbmRsZTtcclxuICAgIHByaXZhdGUgX3JlbW92ZUNvbW1hbmRFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgX3BlZXJDb21tYW5kc0hvc3RFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgX2xhc3RQYXJzZUVycm9yczogQXJyYXk8QWRhcHRpdmUuSVZhbGlkYXRpb25FcnJvcj4gPSBbXTtcclxuICAgIHByaXZhdGUgX2lzUHJldmlld01vZGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgX3NhbXBsZURhdGE6IGFueTtcclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVBlZXJDb21tYW5kc0xheW91dCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fc2VsZWN0ZWRQZWVyKSB7XHJcbiAgICAgICAgICAgIGxldCBwZWVyUmVjdCA9IHRoaXMuX3NlbGVjdGVkUGVlci5nZXRCb3VuZGluZ1JlY3QoKTtcclxuICAgICAgICAgICAgbGV0IGRyYWdIYW5kbGVSZWN0ID0gdGhpcy5fZHJhZ0hhbmRsZS5yZW5kZXJlZEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIGxldCByZW1vdmVCdXR0b25SZWN0ID0gdGhpcy5fcmVtb3ZlQ29tbWFuZEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIGxldCBjb21tYW5kc0hvc3RSZWN0ID0gdGhpcy5fcGVlckNvbW1hbmRzSG9zdEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9kcmFnSGFuZGxlLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5sZWZ0ID0gKHBlZXJSZWN0LmxlZnQgLSBkcmFnSGFuZGxlUmVjdC53aWR0aCkgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHRoaXMuX2RyYWdIYW5kbGUucmVuZGVyZWRFbGVtZW50LnN0eWxlLnRvcCA9IChwZWVyUmVjdC50b3AgLSBkcmFnSGFuZGxlUmVjdC5oZWlnaHQpICsgXCJweFwiO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlQ29tbWFuZEVsZW1lbnQuc3R5bGUubGVmdCA9IHBlZXJSZWN0LnJpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVDb21tYW5kRWxlbWVudC5zdHlsZS50b3AgPSAocGVlclJlY3QudG9wIC0gcmVtb3ZlQnV0dG9uUmVjdC5oZWlnaHQpICsgXCJweFwiO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fcGVlckNvbW1hbmRzSG9zdEVsZW1lbnQuc3R5bGUubGVmdCA9IChwZWVyUmVjdC5yaWdodCAtIGNvbW1hbmRzSG9zdFJlY3Qud2lkdGgpICsgXCJweFwiO1xyXG4gICAgICAgICAgICB0aGlzLl9wZWVyQ29tbWFuZHNIb3N0RWxlbWVudC5zdHlsZS50b3AgPSAocGVlclJlY3QuYm90dG9tICsgMikgKyBcInB4XCI7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9kcmFnSGFuZGxlLnJlbmRlcmVkRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gdGhpcy5fc2VsZWN0ZWRQZWVyLmlzRHJhZ2dhYmxlKCkgPyBcInZpc2libGVcIiA6IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbW92ZUNvbW1hbmRFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSB0aGlzLl9zZWxlY3RlZFBlZXIuY2FuQmVSZW1vdmVkKCkgPyBcInZpc2libGVcIiA6IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgIHRoaXMuX3BlZXJDb21tYW5kc0hvc3RFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSB0aGlzLl9wZWVyQ29tbWFuZHNIb3N0RWxlbWVudC5jaGlsZEVsZW1lbnRDb3VudCA+IDAgPyBcInZpc2libGVcIiA6IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9kcmFnSGFuZGxlLnJlbmRlcmVkRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlQ29tbWFuZEVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgIHRoaXMuX3BlZXJDb21tYW5kc0hvc3RFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFNlbGVjdGVkUGVlcih2YWx1ZTogRGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5fc2VsZWN0ZWRQZWVyICE9IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zZWxlY3RlZFBlZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkUGVlci5pc1NlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkUGVlciA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fcGVlckNvbW1hbmRzSG9zdEVsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zZWxlY3RlZFBlZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkUGVlci5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgY29tbWFuZHMgPSB0aGlzLl9zZWxlY3RlZFBlZXIuZ2V0Q29tbWFuZHMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjb21tYW5kIG9mIGNvbW1hbmRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGVlckNvbW1hbmRzSG9zdEVsZW1lbnQuYXBwZW5kQ2hpbGQoY29tbWFuZC5yZW5kZXIoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVzaWduZXJTdXJmYWNlLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGVlckNvbW1hbmRzTGF5b3V0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5vblNlbGVjdGVkUGVlckNoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TZWxlY3RlZFBlZXJDaGFuZ2VkKHRoaXMuX3NlbGVjdGVkUGVlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwZWVyQ2hhbmdlZChwZWVyOiBEZXNpZ25lclBlZXJzLkRlc2lnbmVyUGVlciwgdXBkYXRlUHJvcGVydHlTaGVldDogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2xhc3RQYXJzZUVycm9ycyA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLnJlbmRlckNhcmQoKVxyXG4gICAgICAgIHRoaXMudXBkYXRlTGF5b3V0KCk7XHJcblxyXG4gICAgICAgIGlmICh1cGRhdGVQcm9wZXJ0eVNoZWV0ICYmIHRoaXMub25TZWxlY3RlZFBlZXJDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25TZWxlY3RlZFBlZXJDaGFuZ2VkKHRoaXMuX3NlbGVjdGVkUGVlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGVlclJlbW92ZWQocGVlcjogRGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXIpIHtcclxuICAgICAgICB0aGlzLl9hbGxQZWVycy5zcGxpY2UodGhpcy5fYWxsUGVlcnMuaW5kZXhPZihwZWVyKSwgMSk7XHJcblxyXG4gICAgICAgIGlmIChwZWVyID09IHRoaXMuX3NlbGVjdGVkUGVlcikge1xyXG4gICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkUGVlcihudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl91cGRhdGVDb3VudCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FyZCgpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlckNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZEhvc3QuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY2FyZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vbkNhcmRWYWxpZGF0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25DYXJkVmFsaWRhdGVkKHRoaXMuX2xhc3RQYXJzZUVycm9ycywgdGhpcy5jYXJkLnZhbGlkYXRlUHJvcGVydGllcygpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGNhcmRUb1JlbmRlcjogQWRhcHRpdmUuQWRhcHRpdmVDYXJkO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcmV2aWV3TW9kZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKFNoYXJlZC5HbG9iYWxTZXR0aW5ncy5lbmFibGVEYXRhQmluZGluZ1N1cHBvcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY2FyZFBheWxvYWQgPSB0aGlzLmNhcmQudG9KU09OKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wbGF0ZSA9IG5ldyBBQ0RhdGEuVGVtcGxhdGUoY2FyZFBheWxvYWQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnRleHQgPSBuZXcgQUNEYXRhLkV2YWx1YXRpb25Db250ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuJHJvb3QgPSB0aGlzLnNhbXBsZURhdGE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXhwYW5kZWRDYXJkUGF5bG9hZCA9IHRlbXBsYXRlLmV4cGFuZChjb250ZXh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRUb1JlbmRlciA9IG5ldyBBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZFRvUmVuZGVyLmhvc3RDb25maWcgPSB0aGlzLmNhcmQuaG9zdENvbmZpZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZFRvUmVuZGVyLnBhcnNlKGV4cGFuZGVkQ2FyZFBheWxvYWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRlbXBsYXRlIGV4cGFuc2lvbiBlcnJvcjogXCIgKyBlLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWNhcmRUb1JlbmRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcmRUb1JlbmRlciA9IHRoaXMuY2FyZDtcclxuICAgICAgICAgICAgICAgICAgICBjYXJkVG9SZW5kZXIuZGVzaWduTW9kZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2FyZFRvUmVuZGVyID0gdGhpcy5jYXJkO1xyXG4gICAgICAgICAgICAgICAgY2FyZFRvUmVuZGVyLmRlc2lnbk1vZGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgcmVuZGVyZWRDYXJkID0gY2FyZFRvUmVuZGVyLnJlbmRlcigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZml4ZWRIZWlnaHRDYXJkKSB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJlZENhcmQuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2NhcmRIb3N0LmFwcGVuZENoaWxkKHJlbmRlcmVkQ2FyZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkUGVlcihwZWVyOiBEZXNpZ25lclBlZXJzLkRlc2lnbmVyUGVlcikge1xyXG4gICAgICAgIGlmICh0aGlzLl9hbGxQZWVycy5pbmRleE9mKHBlZXIpIDwgMCkge1xyXG4gICAgICAgICAgICB0aGlzLl9hbGxQZWVycy5wdXNoKHBlZXIpO1xyXG5cclxuICAgICAgICAgICAgcGVlci5yZW5kZXIoKTtcclxuXHJcbiAgICAgICAgICAgIHBlZXIub25TZWxlY3RlZENoYW5nZWQgPSAocGVlcjogRGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChwZWVyLmlzU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkUGVlcihwZWVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zZWxlY3RlZFBlZXIgPT0gcGVlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkUGVlcihudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHBlZXIub25DaGFuZ2VkID0gKHNlbmRlcjogRGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXIsIHVwZGF0ZVByb3BlcnR5U2hlZXQ6IGJvb2xlYW4pID0+IHsgdGhpcy5wZWVyQ2hhbmdlZChzZW5kZXIsIHVwZGF0ZVByb3BlcnR5U2hlZXQpOyB9O1xyXG4gICAgICAgICAgICBwZWVyLm9uUGVlclJlbW92ZWQgPSAoc2VuZGVyOiBEZXNpZ25lclBlZXJzLkRlc2lnbmVyUGVlcikgPT4geyB0aGlzLnBlZXJSZW1vdmVkKHNlbmRlcik7IH07XHJcbiAgICAgICAgICAgIHBlZXIub25QZWVyQWRkZWQgPSAoc2VuZGVyOiBEZXNpZ25lclBlZXJzLkRlc2lnbmVyUGVlciwgbmV3UGVlcjogRGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkUGVlcihuZXdQZWVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTGF5b3V0KCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHBlZXIub25TdGFydERyYWcgPSAoc2VuZGVyOiBEZXNpZ25lclBlZXJzLkRlc2lnbmVyUGVlcikgPT4geyB0aGlzLnN0YXJ0RHJhZyhzZW5kZXIpOyB9XHJcbiAgICAgICAgICAgIHBlZXIub25FbmREcmFnID0gKHNlbmRlcjogRGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXIpID0+IHsgdGhpcy5lbmREcmFnKCk7IH1cclxuXHJcbiAgICAgICAgICAgIHBlZXIuYWRkRWxlbWVudHNUb0Rlc2lnbmVyU3VyZmFjZSh0aGlzLl9kZXNpZ25lclN1cmZhY2UpO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwZWVyLmdldENoaWxkQ291bnQoKTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFBlZXIocGVlci5nZXRDaGlsZEF0KGkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGludGVybmFsRmluZERyb3BUYXJnZXQocG9pbnRlclBvc2l0aW9uOiBJUG9pbnQsIGN1cnJlbnRQZWVyOiBEZXNpZ25lclBlZXJzLkRlc2lnbmVyUGVlciwgZm9yUGVlcjogRGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXIpOiBEZXNpZ25lclBlZXJzLkRlc2lnbmVyUGVlciB7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRQZWVyID09IGZvclBlZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcmVzdWx0OiBEZXNpZ25lclBlZXJzLkRlc2lnbmVyUGVlciA9IG51bGw7XHJcbiAgICAgICAgdmFyIGxvb2tEZWVwZXIgPSBjdXJyZW50UGVlciBpbnN0YW5jZW9mIERlc2lnbmVyUGVlcnMuQWN0aW9uUGVlcjtcclxuXHJcbiAgICAgICAgaWYgKCFsb29rRGVlcGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBib3VuZGluZ1JlY3QgPSBjdXJyZW50UGVlci5nZXRCb3VuZGluZ1JlY3QoKTtcclxuXHJcbiAgICAgICAgICAgIGxvb2tEZWVwZXIgPSBib3VuZGluZ1JlY3QuaXNJbnNpZGUocG9pbnRlclBvc2l0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChsb29rRGVlcGVyKSB7XHJcbiAgICAgICAgICAgIGxldCBjYW5Ecm9wID0gY3VycmVudFBlZXIuY2FuRHJvcChmb3JQZWVyKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjYW5Ecm9wKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBjdXJyZW50UGVlcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXJyZW50UGVlci5nZXRDaGlsZENvdW50KCk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZXBlclJlc3VsdCA9IHRoaXMuaW50ZXJuYWxGaW5kRHJvcFRhcmdldChwb2ludGVyUG9zaXRpb24sIGN1cnJlbnRQZWVyLmdldENoaWxkQXQoaSksIGZvclBlZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkZWVwZXJSZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkZWVwZXJSZXN1bHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZmluZENhcmRFbGVtZW50UGVlcihjYXJkRWxlbWVudDogQWRhcHRpdmUuQ2FyZEVsZW1lbnQpOiBEZXNpZ25lclBlZXJzLkNhcmRFbGVtZW50UGVlciB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9hbGxQZWVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcGVlciA9IHRoaXMuX2FsbFBlZXJzW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBlZXIgaW5zdGFuY2VvZiBEZXNpZ25lclBlZXJzLkNhcmRFbGVtZW50UGVlciAmJiBwZWVyLmNhcmRFbGVtZW50ID09IGNhcmRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGVlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmaW5kQWN0aW9uUGVlcihhY3Rpb246IEFkYXB0aXZlLkFjdGlvbik6IERlc2lnbmVyUGVlcnMuQWN0aW9uUGVlciB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9hbGxQZWVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcGVlciA9IHRoaXMuX2FsbFBlZXJzW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBlZXIgaW5zdGFuY2VvZiBEZXNpZ25lclBlZXJzLkFjdGlvblBlZXIgJiYgcGVlci5hY3Rpb24gPT0gYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGVlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbmxpbmVDYXJkRXhwYW5kZWQoYWN0aW9uOiBBZGFwdGl2ZS5TaG93Q2FyZEFjdGlvbiwgaXNFeHBhbmRlZDogYm9vbGVhbikge1xyXG4gICAgICAgIGxldCBwZWVyID0gdGhpcy5maW5kQ2FyZEVsZW1lbnRQZWVyKGFjdGlvbi5jYXJkKTtcclxuXHJcbiAgICAgICAgaWYgKGlzRXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgaWYgKCFwZWVyKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVnaXN0cmF0aW9uID0gQ2FyZERlc2lnbmVyU3VyZmFjZS5jYXJkRWxlbWVudFBlZXJSZWdpc3RyeS5maW5kVHlwZVJlZ2lzdHJhdGlvbihBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHBlZXIgPSBuZXcgcmVnaXN0cmF0aW9uLnBlZXJUeXBlKHBlZXIsIHRoaXMsIHJlZ2lzdHJhdGlvbiwgYWN0aW9uLmNhcmQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBwYXJlbnRQZWVyID0gdGhpcy5maW5kQWN0aW9uUGVlcihhY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRQZWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50UGVlci5pbnNlcnRDaGlsZChwZWVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Jvb3RQZWVyLmluc2VydENoaWxkKHBlZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGVlci5hZGRFbGVtZW50c1RvRGVzaWduZXJTdXJmYWNlKHRoaXMuX2Rlc2lnbmVyU3VyZmFjZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChwZWVyKSB7XHJcbiAgICAgICAgICAgICAgICBwZWVyLnJlbW92ZUVsZW1lbnRzRnJvbURlc2lnbmVyU3VyZmFjZSh0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldCBkcmFnZ2VkUGVlcigpOiBEZXNpZ25lclBlZXJzLkRlc2lnbmVyUGVlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RyYWdnZWRQZWVyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0IGRyYWdnZWRQZWVyKHZhbHVlOiBEZXNpZ25lclBlZXJzLkRlc2lnbmVyUGVlcikge1xyXG4gICAgICAgIGlmICh0aGlzLl9kcmFnZ2VkUGVlciAhPSB2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZHJhZ2dlZFBlZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RyYWdnZWRQZWVyLmRyYWdnaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2RyYWdnZWRQZWVyID0gdmFsdWU7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fZHJhZ2dlZFBlZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RyYWdnZWRQZWVyLmRyYWdnaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZWFkb25seSBwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHZhciByb290RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgcm9vdEVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XHJcbiAgICAgICAgcm9vdEVsZW1lbnQuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICByb290RWxlbWVudC5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuXHJcbiAgICAgICAgdGhpcy5fY2FyZEhvc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRIb3N0LnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG5cclxuICAgICAgICByb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9jYXJkSG9zdCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2Rlc2lnbmVyU3VyZmFjZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5fZGVzaWduZXJTdXJmYWNlLmNsYXNzTGlzdC5hZGQoXCJhY2QtZGVzaWduZXJzdXJmYWNlXCIpO1xyXG4gICAgICAgIHRoaXMuX2Rlc2lnbmVyU3VyZmFjZS50YWJJbmRleCA9IDA7XHJcbiAgICAgICAgdGhpcy5fZGVzaWduZXJTdXJmYWNlLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgICAgIHRoaXMuX2Rlc2lnbmVyU3VyZmFjZS5zdHlsZS5sZWZ0ID0gXCIwXCI7XHJcbiAgICAgICAgdGhpcy5fZGVzaWduZXJTdXJmYWNlLnN0eWxlLnRvcCA9IFwiMFwiO1xyXG4gICAgICAgIHRoaXMuX2Rlc2lnbmVyU3VyZmFjZS5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgICAgIHRoaXMuX2Rlc2lnbmVyU3VyZmFjZS5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcclxuXHJcbiAgICAgICAgdGhpcy5fZGVzaWduZXJTdXJmYWNlLm9ua2V5dXAgPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fc2VsZWN0ZWRQZWVyKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgQ29udHJvbHMuS0VZX0VTQ0FQRTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZFBlZXIodGhpcy5fc2VsZWN0ZWRQZWVyLnBhcmVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIENvbnRyb2xzLktFWV9ERUxFVEU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU2VsZWN0ZWQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gIWUuY2FuY2VsQnViYmxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZGVzaWduZXJTdXJmYWNlLm9ucG9pbnRlcm1vdmUgPSAoZTogUG9pbnRlckV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBjbGllbnRSZWN0ID0gdGhpcy5fZGVzaWduZXJTdXJmYWNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy50cnlEcm9wKHsgeDogZS54IC0gY2xpZW50UmVjdC5sZWZ0LCB5OiBlLnkgLSBjbGllbnRSZWN0LnRvcCB9LCB0aGlzLmRyYWdnZWRQZWVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2Rlc2lnbmVyU3VyZmFjZS5vbnBvaW50ZXJ1cCA9IChlOiBQb2ludGVyRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZHJhZ2dlZFBlZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kRHJhZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9kZXNpZ25lclN1cmZhY2UpO1xyXG5cclxuICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQocm9vdEVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2FyZFZhbGlkYXRlZDogKHBhcnNlRXJyb3JzOiBBcnJheTxBZGFwdGl2ZS5JVmFsaWRhdGlvbkVycm9yPiwgdmFsaWRhdGlvblJlc3VsdHM6IEFkYXB0aXZlLlZhbGlkYXRpb25SZXN1bHRzKSA9PiB2b2lkO1xyXG4gICAgb25TZWxlY3RlZFBlZXJDaGFuZ2VkOiAocGVlcjogRGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXIpID0+IHZvaWQ7XHJcbiAgICBvbkxheW91dFVwZGF0ZWQ6IChpc0Z1bGxSZWZyZXNoOiBib29sZWFuKSA9PiB2b2lkO1xyXG5cclxuICAgIGZpeGVkSGVpZ2h0Q2FyZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIGdldERlc2lnbmVyU3VyZmFjZU9mZnNldCgpOiBJUG9pbnQge1xyXG4gICAgICAgIGxldCBjbGllbnRSZWN0ID0gdGhpcy5fZGVzaWduZXJTdXJmYWNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgICAgICByZXR1cm4geyB4OiBjbGllbnRSZWN0LmxlZnQsIHk6IGNsaWVudFJlY3QudG9wIH07XHJcbiAgICB9XHJcblxyXG4gICAgZmluZERyb3BUYXJnZXQocG9pbnRlclBvc2l0aW9uOiBJUG9pbnQsIHBlZXI6IERlc2lnbmVyUGVlcnMuRGVzaWduZXJQZWVyKTogRGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsRmluZERyb3BUYXJnZXQocG9pbnRlclBvc2l0aW9uLCB0aGlzLl9yb290UGVlciwgcGVlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZmluZFBlZXIoY2FyZE9iamVjdDogQWRhcHRpdmUuQ2FyZE9iamVjdCkge1xyXG4gICAgICAgIGZvciAobGV0IHBlZXIgb2YgdGhpcy5fYWxsUGVlcnMpIHtcclxuICAgICAgICAgICAgaWYgKHBlZXIuZ2V0Q2FyZE9iamVjdCgpID09PSBjYXJkT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGVlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBiZWdpblVwZGF0ZSgpIHtcclxuICAgICAgICB0aGlzLl91cGRhdGVDb3VudCsrO1xyXG4gICAgfVxyXG5cclxuICAgIGVuZFVwZGF0ZShyZW5kZXJDYXJkOiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3VwZGF0ZUNvdW50ID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVDb3VudC0tO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3VwZGF0ZUNvdW50ID09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZW5kZXJDYXJkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDYXJkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVzaWduZXJTdXJmYWNlLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5fYWxsUGVlcnMgPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZFBlZXIobnVsbCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyQ2FyZCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jYXJkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Jvb3RQZWVyID0gQ2FyZERlc2lnbmVyU3VyZmFjZS5jYXJkRWxlbWVudFBlZXJSZWdpc3RyeS5jcmVhdGVQZWVySW5zdGFuY2UodGhpcywgbnVsbCwgdGhpcy5jYXJkKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWRkUGVlcih0aGlzLl9yb290UGVlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9yZW1vdmVDb21tYW5kRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5fcmVtb3ZlQ29tbWFuZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImFjZC1wZWVyQnV0dG9uXCIsIFwiYWNkLWljb24tcmVtb3ZlXCIpO1xyXG4gICAgICAgIHRoaXMuX3JlbW92ZUNvbW1hbmRFbGVtZW50LnRpdGxlID0gXCJSZW1vdmVcIjtcclxuICAgICAgICB0aGlzLl9yZW1vdmVDb21tYW5kRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICB0aGlzLl9yZW1vdmVDb21tYW5kRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgICB0aGlzLl9yZW1vdmVDb21tYW5kRWxlbWVudC5zdHlsZS56SW5kZXggPSBcIjUwMFwiO1xyXG4gICAgICAgIHRoaXMuX3JlbW92ZUNvbW1hbmRFbGVtZW50Lm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNlbGVjdGVkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9kcmFnSGFuZGxlID0gbmV3IERyYWdIYW5kbGUoKTtcclxuICAgICAgICB0aGlzLl9kcmFnSGFuZGxlLm9uU3RhcnREcmFnID0gKHNlbmRlcikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9kcmFnSGFuZGxlLmVuZERyYWcoKTtcclxuICAgICAgICAgICAgdGhpcy5zdGFydERyYWcodGhpcy5fc2VsZWN0ZWRQZWVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZHJhZ0hhbmRsZS5yZW5kZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fcGVlckNvbW1hbmRzSG9zdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuX3BlZXJDb21tYW5kc0hvc3RFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xyXG4gICAgICAgIHRoaXMuX3BlZXJDb21tYW5kc0hvc3RFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgICAgIHRoaXMuX3BlZXJDb21tYW5kc0hvc3RFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICB0aGlzLl9wZWVyQ29tbWFuZHNIb3N0RWxlbWVudC5zdHlsZS56SW5kZXggPSBcIjUwMFwiO1xyXG5cclxuICAgICAgICB0aGlzLl9kZXNpZ25lclN1cmZhY2UuYXBwZW5kQ2hpbGQodGhpcy5fZHJhZ0hhbmRsZS5yZW5kZXJlZEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX2Rlc2lnbmVyU3VyZmFjZS5hcHBlbmRDaGlsZCh0aGlzLl9yZW1vdmVDb21tYW5kRWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fZGVzaWduZXJTdXJmYWNlLmFwcGVuZENoaWxkKHRoaXMuX3BlZXJDb21tYW5kc0hvc3RFbGVtZW50KTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRDYXJkUGF5bG9hZEFzT2JqZWN0KHBheWxvYWQ6IG9iamVjdCkge1xyXG4gICAgICAgIHRoaXMuX2xhc3RQYXJzZUVycm9ycyA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLmNhcmQucGFyc2UocGF5bG9hZCwgdGhpcy5fbGFzdFBhcnNlRXJyb3JzKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRDYXJkUGF5bG9hZEFzU3RyaW5nKHBheWxvYWQ6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuc2V0Q2FyZFBheWxvYWRBc09iamVjdChKU09OLnBhcnNlKHBheWxvYWQpKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVMYXlvdXQoaXNGdWxsUmVmcmVzaDogYm9vbGVhbiA9IHRydWUpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2FsbFBlZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FsbFBlZXJzW2ldLnVwZGF0ZUxheW91dCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVQZWVyQ29tbWFuZHNMYXlvdXQoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMub25MYXlvdXRVcGRhdGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25MYXlvdXRVcGRhdGVkKGlzRnVsbFJlZnJlc2gpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVTZWxlY3RlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFBlZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWdpblVwZGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLnNlbGVjdGVkUGVlci5wYXJlbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRQZWVyLnJlbW92ZShmYWxzZSwgdHJ1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkUGVlcihwYXJlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmRVcGRhdGUodHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnREcmFnKHBlZXI6IERlc2lnbmVyUGVlcnMuRGVzaWduZXJQZWVyKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRyYWdnZWRQZWVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rlc2lnbmVyU3VyZmFjZS5jbGFzc0xpc3QuYWRkKFwiZHJhZ2dpbmdcIik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRyYWdnZWRQZWVyID0gcGVlcjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRQZWVyKHRoaXMuZHJhZ2dlZFBlZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBlbmREcmFnKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRyYWdnZWRQZWVyKSB7XHJcbiAgICAgICAgICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBkcmFnZ2VkIHBlZXIncyBlbGVtZW50cyBhcmUgYXQgdGhlIHRvcCBpbiBaIG9yZGVyXHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ2dlZFBlZXIucmVtb3ZlRWxlbWVudHNGcm9tRGVzaWduZXJTdXJmYWNlKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLmRyYWdnZWRQZWVyLmFkZEVsZW1lbnRzVG9EZXNpZ25lclN1cmZhY2UodGhpcy5fZGVzaWduZXJTdXJmYWNlLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2Ryb3BUYXJnZXQucmVuZGVyZWRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJkcmFnb3ZlclwiKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ2dlZFBlZXIgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fZGVzaWduZXJTdXJmYWNlLmNsYXNzTGlzdC5yZW1vdmUoXCJkcmFnZ2luZ1wiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5RHJvcChwb2ludGVyUG9zaXRpb246IElQb2ludCwgcGVlcjogRGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXIpOiBib29sZWFuIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChwZWVyKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9kcm9wVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kcm9wVGFyZ2V0LnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZHJhZ292ZXJcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBuZXdEcm9wVGFyZ2V0ID0gdGhpcy5maW5kRHJvcFRhcmdldChwb2ludGVyUG9zaXRpb24sIHBlZXIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5ld0Ryb3BUYXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Ryb3BUYXJnZXQgPSBuZXdEcm9wVGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZHJvcFRhcmdldC5yZW5kZXJlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImRyYWdvdmVyXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX2Ryb3BUYXJnZXQudHJ5RHJvcChwZWVyLCBwb2ludGVyUG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGlzUG9pbnRlck92ZXIoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgY2xpZW50UmVjdCA9IHRoaXMuX2Rlc2lnbmVyU3VyZmFjZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuICh4ID49IGNsaWVudFJlY3QubGVmdCkgJiYgKHggPD0gY2xpZW50UmVjdC5yaWdodCkgJiYgKHkgPj0gY2xpZW50UmVjdC50b3ApICYmICh5IDw9IGNsaWVudFJlY3QuYm90dG9tKTtcclxuICAgIH1cclxuXHJcbiAgICBwYWdlVG9DbGllbnRDb29yZGluYXRlcyh4OiBudW1iZXIsIHk6IG51bWJlcik6IElQb2ludCB7XHJcbiAgICAgICAgbGV0IGNsaWVudFJlY3QgPSB0aGlzLl9kZXNpZ25lclN1cmZhY2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHg6IHggLSBjbGllbnRSZWN0LmxlZnQsXHJcbiAgICAgICAgICAgIHk6IHkgLSBjbGllbnRSZWN0LnRvcFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgcm9vdFBlZXIoKTogRGVzaWduZXJQZWVycy5EZXNpZ25lclBlZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yb290UGVlcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2VsZWN0ZWRQZWVyKCk6IERlc2lnbmVyUGVlcnMuRGVzaWduZXJQZWVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWRQZWVyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjYXJkKCk6IEFkYXB0aXZlLkFkYXB0aXZlQ2FyZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGNhcmQodmFsdWU6IEFkYXB0aXZlLkFkYXB0aXZlQ2FyZCkge1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPSB0aGlzLl9jYXJkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9jYXJkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jYXJkLm9uSW5saW5lQ2FyZEV4cGFuZGVkID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fY2FyZCA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NhcmQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NhcmQub25JbmxpbmVDYXJkRXhwYW5kZWQgPSAoYWN0aW9uOiBBZGFwdGl2ZS5TaG93Q2FyZEFjdGlvbiwgaXNFeHBhbmRlZDogYm9vbGVhbikgPT4geyB0aGlzLmlubGluZUNhcmRFeHBhbmRlZChhY3Rpb24sIGlzRXhwYW5kZWQpOyB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNQcmV2aWV3TW9kZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNQcmV2aWV3TW9kZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgaXNQcmV2aWV3TW9kZSh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc1ByZXZpZXdNb2RlICE9IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzUHJldmlld01vZGUgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc1ByZXZpZXdNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kZXNpZ25lclN1cmZhY2UuY2xhc3NMaXN0LmFkZChcImFjZC1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kcmFnSGFuZGxlLnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYWNkLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbW92ZUNvbW1hbmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJhY2QtaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGVlckNvbW1hbmRzSG9zdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImFjZC1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kZXNpZ25lclN1cmZhY2UuY2xhc3NMaXN0LnJlbW92ZShcImFjZC1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kcmFnSGFuZGxlLnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiYWNkLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbW92ZUNvbW1hbmRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJhY2QtaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGVlckNvbW1hbmRzSG9zdEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImFjZC1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FyZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2FtcGxlRGF0YSgpOiBhbnkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zYW1wbGVEYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBzYW1wbGVEYXRhKHZhbHVlOiBhbnkpIHtcclxuICAgICAgICB0aGlzLl9zYW1wbGVEYXRhID0gdmFsdWU7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzUHJldmlld01vZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJDYXJkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmltcG9ydCAqIGFzIENsaXBib2FyZCBmcm9tIFwiY2xpcGJvYXJkXCI7XHJcbmltcG9ydCAqIGFzIEFkYXB0aXZlIGZyb20gXCJhZGFwdGl2ZWNhcmRzXCI7XHJcbmltcG9ydCAqIGFzIG1vbmFjbyBmcm9tIFwibW9uYWNvLWVkaXRvclwiO1xyXG5pbXBvcnQgKiBhcyBDb25zdGFudHMgZnJvbSBcIi4vY29uc3RhbnRzXCI7XHJcbmltcG9ydCAqIGFzIERlc2lnbmVyIGZyb20gXCIuL2NhcmQtZGVzaWduZXItc3VyZmFjZVwiO1xyXG5pbXBvcnQgKiBhcyBEZXNpZ25lclBlZXJzIGZyb20gXCIuL2Rlc2lnbmVyLXBlZXJzXCI7XHJcbmltcG9ydCB7IFNhbXBsZVBpY2tlckRpYWxvZyB9IGZyb20gXCIuL3NhbXBsZS1waWNrZXItZGlhbG9nXCI7XHJcbmltcG9ydCB7IEhvc3RDb250YWluZXIgfSBmcm9tIFwiLi9jb250YWluZXJzL2hvc3QtY29udGFpbmVyXCI7XHJcbmltcG9ydCB7IGFkYXB0aXZlQ2FyZFNjaGVtYSB9IGZyb20gXCIuL2FkYXB0aXZlLWNhcmQtc2NoZW1hXCI7XHJcbmltcG9ydCB7IEZ1bGxTY3JlZW5IYW5kbGVyIH0gZnJvbSBcIi4vZnVsbHNjcmVlbi1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IFRvb2xiYXIsIFRvb2xiYXJCdXR0b24sIFRvb2xiYXJDaG9pY2VQaWNrZXIsIFRvb2xiYXJFbGVtZW50QWxpZ25tZW50IH0gZnJvbSBcIi4vdG9vbGJhclwiO1xyXG5pbXBvcnQgeyBJUG9pbnQsIFV0aWxzLCBkZWZhdWx0SG9zdENvbmZpZyB9IGZyb20gXCIuL21pc2NlbGxhbmVvdXNcIjtcclxuaW1wb3J0IHsgQmFzZVBhbGV0dGVJdGVtLCBFbGVtZW50UGFsZXR0ZUl0ZW0sIERhdGFQYWxldHRlSXRlbSwgQ3VzdG9tUGFsZXR0ZUl0ZW0gfSBmcm9tIFwiLi90b29sLXBhbGV0dGVcIjtcclxuaW1wb3J0IHsgRGVmYXVsdENvbnRhaW5lciB9IGZyb20gXCIuL2NvbnRhaW5lcnMvZGVmYXVsdC9kZWZhdWx0LWNvbnRhaW5lclwiO1xyXG5pbXBvcnQgeyBTaWRlUGFuZWwsIFNpZGVQYW5lbEFsaWdubWVudCB9IGZyb20gXCIuL3NpZGUtcGFuZWxcIjtcclxuaW1wb3J0IHsgVG9vbGJveCwgSVRvb2xib3hDb21tYW5kIH0gZnJvbSBcIi4vdG9vbC1ib3hcIjtcclxuaW1wb3J0IHsgRmllbGREZWZpbml0aW9uIH0gZnJvbSBcIi4vZGF0YVwiO1xyXG5pbXBvcnQgeyBEYXRhVHJlZUl0ZW0gfSBmcm9tIFwiLi9kYXRhLXRyZWVpdGVtXCI7XHJcbmltcG9ydCB7IEJhc2VUcmVlSXRlbSB9IGZyb20gXCIuL2Jhc2UtdHJlZS1pdGVtXCI7XHJcbmltcG9ydCB7IFN0cmluZ3MgfSBmcm9tIFwiLi9zdHJpbmdzXCI7XHJcbmltcG9ydCAqIGFzIFNoYXJlZCBmcm9tIFwiLi9zaGFyZWRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDYXJkRGVzaWduZXIge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaW50ZXJuYWxQcm9jZXNzTWFya2Rvd24odGV4dDogc3RyaW5nLCByZXN1bHQ6IEFkYXB0aXZlLklNYXJrZG93blByb2Nlc3NpbmdSZXN1bHQpIHtcclxuICAgICAgICBpZiAoQ2FyZERlc2lnbmVyLm9uUHJvY2Vzc01hcmtkb3duKSB7XHJcbiAgICAgICAgICAgIENhcmREZXNpZ25lci5vblByb2Nlc3NNYXJrZG93bih0ZXh0LCByZXN1bHQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBtYXJrZG93bml0XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3dbXCJtYXJrZG93bml0XCJdKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQub3V0cHV0SHRtbCA9IHdpbmRvd1tcIm1hcmtkb3duaXRcIl0oKS5yZW5kZXIodGV4dCk7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQuZGlkUHJvY2VzcyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHRcdH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgb25Qcm9jZXNzTWFya2Rvd246ICh0ZXh0OiBzdHJpbmcsIHJlc3VsdDogQWRhcHRpdmUuSU1hcmtkb3duUHJvY2Vzc2luZ1Jlc3VsdCkgPT4gdm9pZCA9IG51bGw7XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgTUFYX1VORE9fU1RBQ0tfU0laRSA9IDUwO1xyXG5cclxuICAgIHByaXZhdGUgX2lzQXR0YWNoZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgX2NhcmRFZGl0b3I6IG1vbmFjby5lZGl0b3IuSVN0YW5kYWxvbmVDb2RlRWRpdG9yO1xyXG4gICAgcHJpdmF0ZSBfc2FtcGxlRGF0YUVkaXRvcjogbW9uYWNvLmVkaXRvci5JU3RhbmRhbG9uZUNvZGVFZGl0b3I7XHJcbiAgICBwcml2YXRlIF9ob3N0Q29udGFpbmVyczogQXJyYXk8SG9zdENvbnRhaW5lcj47XHJcbiAgICBwcml2YXRlIF9pc01vbmFjb0VkaXRvckxvYWRlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfZGVzaWduZXJTdXJmYWNlOiBEZXNpZ25lci5DYXJkRGVzaWduZXJTdXJmYWNlO1xyXG4gICAgcHJpdmF0ZSBfZGVzaWduZXJIb3N0RWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIF9kcmFnZ2VkUGFsZXR0ZUl0ZW06IEJhc2VQYWxldHRlSXRlbTtcclxuICAgIHByaXZhdGUgX2RyYWdnZWRFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgX2N1cnJlbnRNb3VzZVBvc2l0aW9uOiBJUG9pbnQ7XHJcbiAgICBwcml2YXRlIF9jYXJkOiBBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQ7XHJcbiAgICBwcml2YXRlIF9hY3RpdmVIb3N0Q29udGFpbmVyOiBIb3N0Q29udGFpbmVyO1xyXG4gICAgcHJpdmF0ZSBfdW5kb1N0YWNrOiBBcnJheTxvYmplY3Q+ID0gW107XHJcbiAgICBwcml2YXRlIF91bmRvU3RhY2tJbmRleDogbnVtYmVyID0gLTE7XHJcbiAgICBwcml2YXRlIF90b29sUGFsZXR0ZVRvb2xib3g6IFRvb2xib3g7XHJcbiAgICBwcml2YXRlIF9wcm9wZXJ0eVNoZWV0VG9vbGJveDogVG9vbGJveDtcclxuICAgIHByaXZhdGUgX3RyZWVWaWV3VG9vbGJveDogVG9vbGJveDtcclxuICAgIHByaXZhdGUgX2pzb25FZGl0b3JzUGFuZWw6IFNpZGVQYW5lbDtcclxuICAgIHByaXZhdGUgX2NhcmRFZGl0b3JUb29sYm94OiBUb29sYm94O1xyXG4gICAgcHJpdmF0ZSBfc2FtcGxlRGF0YUVkaXRvclRvb2xib3g6IFRvb2xib3g7XHJcbiAgICBwcml2YXRlIF9kYXRhVG9vbGJveDogVG9vbGJveDtcclxuICAgIHByaXZhdGUgX2Fzc2V0UGF0aDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfZGF0YVN0cnVjdHVyZTogRmllbGREZWZpbml0aW9uO1xyXG4gICAgcHJpdmF0ZSBfc2FtcGxlRGF0YTogYW55O1xyXG4gICAgcHJpdmF0ZSBfY3VzdG9tUGVsZXR0ZUl0ZW1zOiBDdXN0b21QYWxldHRlSXRlbVtdO1xyXG5cclxuICAgIHByaXZhdGUgdG9nZ2xlUHJldmlldygpIHtcclxuICAgICAgICB0aGlzLl9kZXNpZ25lclN1cmZhY2UuaXNQcmV2aWV3TW9kZSA9ICF0aGlzLl9kZXNpZ25lclN1cmZhY2UuaXNQcmV2aWV3TW9kZTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2Rlc2lnbmVyU3VyZmFjZS5pc1ByZXZpZXdNb2RlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZVByZXZpZXdCdXR0b24udG9vbFRpcCA9IFwiUmV0dXJuIHRvIERlc2lnbiBtb2RlXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl90b2dnbGVQcmV2aWV3QnV0dG9uLnRvb2xUaXAgPSBcIlN3aXRjaCB0byBQcmV2aWV3IG1vZGVcIjtcclxuICAgICAgICAgICAgdGhpcy5fZGVzaWduZXJTdXJmYWNlLnVwZGF0ZUxheW91dCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5idWlsZFRyZWVWaWV3KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBidWlsZFRyZWVWaWV3KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl90cmVlVmlld1Rvb2xib3guY29udGVudCkge1xyXG4gICAgICAgICAgICB0aGlzLl90cmVlVmlld1Rvb2xib3guY29udGVudC5pbm5lckhUTUwgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZGVzaWduZXJTdXJmYWNlLmlzUHJldmlld01vZGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJlZVZpZXdUb29sYm94LmNvbnRlbnQuaW5uZXJIVE1MID1cclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBzdHlsZT1cInBhZGRpbmc6IDhweDsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2PlRoZSBDYXJkIFN0cnVjdHVyZSBpc25cXCd0IGF2YWlsYWJsZSBpbiBQcmV2aWV3IG1vZGUuPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90cmVlVmlld1Rvb2xib3guY29udGVudC5hcHBlbmRDaGlsZCh0aGlzLmRlc2lnbmVyU3VyZmFjZS5yb290UGVlci50cmVlSXRlbS5yZW5kZXIoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXR1cERhdGFUcmVlSXRlbUV2ZW50cyh0cmVlSXRlbTogRGF0YVRyZWVJdGVtKSB7XHJcbiAgICAgICAgdHJlZUl0ZW0ub25TdGFydERyYWcgPSAoc2VuZGVyOiBCYXNlVHJlZUl0ZW0pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZHJhZ2dlZFBhbGV0dGVJdGVtID0gbmV3IERhdGFQYWxldHRlSXRlbSh0cmVlSXRlbS5maWVsZCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9kcmFnZ2VkRWxlbWVudCA9IHRoaXMuX2RyYWdnZWRQYWxldHRlSXRlbS5yZW5kZXJEcmFnVmlzdWFsKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RyYWdnZWRFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgICAgICAgICB0aGlzLl9kcmFnZ2VkRWxlbWVudC5zdHlsZS5sZWZ0ID0gdGhpcy5fY3VycmVudE1vdXNlUG9zaXRpb24ueCArIFwicHhcIjtcclxuICAgICAgICAgICAgdGhpcy5fZHJhZ2dlZEVsZW1lbnQuc3R5bGUudG9wID0gdGhpcy5fY3VycmVudE1vdXNlUG9zaXRpb24ueSArIFwicHhcIjtcclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5fZHJhZ2dlZEVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgdHJlZUl0ZW0uZW5kRHJhZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmVlSXRlbS5nZXRDaGlsZENvdW50KCk7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNldHVwRGF0YVRyZWVJdGVtRXZlbnRzKHRyZWVJdGVtLmdldENoaWxkQXQoaSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJ1aWxkRGF0YUV4cGxvcmVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kYXRhVG9vbGJveCAmJiB0aGlzLl9kYXRhVG9vbGJveC5jb250ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RhdGFUb29sYm94LmNvbnRlbnQuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9kYXRhU3RydWN0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdHJlZUl0ZW0gPSBuZXcgRGF0YVRyZWVJdGVtKHRoaXMuX2RhdGFTdHJ1Y3R1cmUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2RhdGFUb29sYm94LmNvbnRlbnQuYXBwZW5kQ2hpbGQodHJlZUl0ZW0ucmVuZGVyKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBEYXRhVHJlZUl0ZW1FdmVudHModHJlZUl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYnVpbGRQcm9wZXJ0eVNoZWV0KHBlZXI6IERlc2lnbmVyUGVlcnMuRGVzaWduZXJQZWVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3Byb3BlcnR5U2hlZXRUb29sYm94LmNvbnRlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5fcHJvcGVydHlTaGVldFRvb2xib3guY29udGVudC5pbm5lckhUTUwgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNhcmQ6IEFkYXB0aXZlLkFkYXB0aXZlQ2FyZDtcclxuXHJcbiAgICAgICAgICAgIGlmIChwZWVyKSB7XHJcbiAgICAgICAgICAgICAgICBjYXJkID0gcGVlci5idWlsZFByb3BlcnR5U2hlZXRDYXJkKHRoaXMuY3VycmVudFRhcmdldFZlcnNpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2FyZCA9IG5ldyBBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQoKTtcclxuICAgICAgICAgICAgICAgIGNhcmQucGFyc2UoXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkFkYXB0aXZlQ2FyZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiBcIjEuMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJUZXh0QmxvY2tcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFwiKipOb3RoaW5nIGlzIHNlbGVjdGVkKipcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlRleHRCbG9ja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXA6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJTZWxlY3QgYW4gZWxlbWVudCBpbiB0aGUgY2FyZCB0byBtb2RpZnkgaXRzIHByb3BlcnRpZXMuXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjYXJkLnBhZGRpbmcgPSBuZXcgQWRhcHRpdmUuUGFkZGluZ0RlZmluaXRpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgQWRhcHRpdmUuU3BhY2luZy5TbWFsbCxcclxuICAgICAgICAgICAgICAgICAgICBBZGFwdGl2ZS5TcGFjaW5nLlNtYWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIEFkYXB0aXZlLlNwYWNpbmcuU21hbGwsXHJcbiAgICAgICAgICAgICAgICAgICAgQWRhcHRpdmUuU3BhY2luZy5TbWFsbFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBjYXJkLmhvc3RDb25maWcgPSB0aGlzLl9wcm9wZXJ0eVNoZWV0SG9zdENvbmZpZztcclxuICAgICAgICAgICAgY2FyZC5ob3N0Q29uZmlnID0gZGVmYXVsdEhvc3RDb25maWc7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wcm9wZXJ0eVNoZWV0VG9vbGJveC5jb250ZW50LmFwcGVuZENoaWxkKGNhcmQucmVuZGVyKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkZFBhbGV0dGVJdGVtKHBhbGV0dGVJdGVtOiBCYXNlUGFsZXR0ZUl0ZW0sIGhvc3RFbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHBhbGV0dGVJdGVtLnJlbmRlcigpO1xyXG4gICAgICAgIHBhbGV0dGVJdGVtLm9uU3RhcnREcmFnID0gKHNlbmRlcjogQmFzZVBhbGV0dGVJdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RyYWdnZWRQYWxldHRlSXRlbSA9IHNlbmRlcjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2RyYWdnZWRFbGVtZW50ID0gc2VuZGVyLnJlbmRlckRyYWdWaXN1YWwoKTtcclxuICAgICAgICAgICAgdGhpcy5fZHJhZ2dlZEVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XHJcbiAgICAgICAgICAgIHRoaXMuX2RyYWdnZWRFbGVtZW50LnN0eWxlLmxlZnQgPSB0aGlzLl9jdXJyZW50TW91c2VQb3NpdGlvbi54ICsgXCJweFwiO1xyXG4gICAgICAgICAgICB0aGlzLl9kcmFnZ2VkRWxlbWVudC5zdHlsZS50b3AgPSB0aGlzLl9jdXJyZW50TW91c2VQb3NpdGlvbi55ICsgXCJweFwiO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9kcmFnZ2VkRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBob3N0RWxlbWVudC5hcHBlbmRDaGlsZChwYWxldHRlSXRlbS5yZW5kZXJlZEVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYnVpbGRQYWxldHRlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5faXNBdHRhY2hlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl90b29sUGFsZXR0ZVRvb2xib3guY29udGVudC5pbm5lckhUTUwgPSBcIlwiO1xyXG5cclxuICAgICAgICBsZXQgY2F0ZWdvcml6ZWRUeXBlczogT2JqZWN0ID0ge307XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQWRhcHRpdmUuQWRhcHRpdmVDYXJkLmVsZW1lbnRUeXBlUmVnaXN0cnkuZ2V0SXRlbUNvdW50KCk7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgZHVtbXlDYXJkRWxlbWVudCA9IEFkYXB0aXZlLkFkYXB0aXZlQ2FyZC5lbGVtZW50VHlwZVJlZ2lzdHJ5LmdldEl0ZW1BdChpKS5jcmVhdGVJbnN0YW5jZSgpO1xyXG4gICAgICAgICAgICBsZXQgcGVlclJlZ2lzdHJhdGlvbiA9IERlc2lnbmVyLkNhcmREZXNpZ25lclN1cmZhY2UuY2FyZEVsZW1lbnRQZWVyUmVnaXN0cnkuZmluZFR5cGVSZWdpc3RyYXRpb24oKDxhbnk+ZHVtbXlDYXJkRWxlbWVudCkuY29uc3RydWN0b3IpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBlZXJSZWdpc3RyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGlmICghY2F0ZWdvcml6ZWRUeXBlcy5oYXNPd25Qcm9wZXJ0eShwZWVyUmVnaXN0cmF0aW9uLmNhdGVnb3J5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpemVkVHlwZXNbcGVlclJlZ2lzdHJhdGlvbi5jYXRlZ29yeV0gPSBbXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgcGFsZXR0ZUl0ZW0gPSBuZXcgRWxlbWVudFBhbGV0dGVJdGVtKFxyXG4gICAgICAgICAgICAgICAgICAgIEFkYXB0aXZlLkFkYXB0aXZlQ2FyZC5lbGVtZW50VHlwZVJlZ2lzdHJ5LmdldEl0ZW1BdChpKSxcclxuICAgICAgICAgICAgICAgICAgICBwZWVyUmVnaXN0cmF0aW9uXHJcbiAgICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcml6ZWRUeXBlc1twZWVyUmVnaXN0cmF0aW9uLmNhdGVnb3J5XS5wdXNoKHBhbGV0dGVJdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tUGFsZXR0ZUl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5jdXN0b21QYWxldHRlSXRlbXMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghY2F0ZWdvcml6ZWRUeXBlcy5oYXNPd25Qcm9wZXJ0eShpdGVtLmNhdGVnb3J5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpemVkVHlwZXNbaXRlbS5jYXRlZ29yeV0gPSBbXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaXplZFR5cGVzW2l0ZW0uY2F0ZWdvcnldLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGNhdGVnb3J5IGluIGNhdGVnb3JpemVkVHlwZXMpIHtcclxuICAgICAgICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgbm9kZS5pbm5lclRleHQgPSBjYXRlZ29yeTtcclxuICAgICAgICAgICAgbm9kZS5jbGFzc05hbWUgPSBcImFjZC1wYWxldHRlLWNhdGVnb3J5XCI7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl90b29sUGFsZXR0ZVRvb2xib3guY29udGVudC5hcHBlbmRDaGlsZChub2RlKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2F0ZWdvcml6ZWRUeXBlc1tjYXRlZ29yeV0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkUGFsZXR0ZUl0ZW0oY2F0ZWdvcml6ZWRUeXBlc1tjYXRlZ29yeV1baV0sIHRoaXMuX3Rvb2xQYWxldHRlVG9vbGJveC5jb250ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGVuZERyYWcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RyYWdnZWRQYWxldHRlSXRlbSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kcmFnZ2VkUGFsZXR0ZUl0ZW0uZW5kRHJhZygpO1xyXG4gICAgICAgICAgICB0aGlzLl9kcmFnZ2VkRWxlbWVudC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2RyYWdnZWRQYWxldHRlSXRlbSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX2RyYWdnZWRFbGVtZW50ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJFcnJvclBhbmVFbGVtZW50KG1lc3NhZ2U6IHN0cmluZywgY2FyZE9iamVjdD86IEFkYXB0aXZlLkNhcmRPYmplY3QpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IGVycm9yRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTmFtZSA9IFwiYWNkLWVycm9yLXBhbmUtbWVzc2FnZVwiO1xyXG5cclxuICAgICAgICBpZiAoY2FyZE9iamVjdCkge1xyXG4gICAgICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGFibGVcIik7XHJcbiAgICAgICAgICAgIGVycm9yRWxlbWVudC50aXRsZSA9IFwiQ2xpY2sgdG8gc2VsZWN0IHRoaXMgZWxlbWVudFwiO1xyXG4gICAgICAgICAgICBlcnJvckVsZW1lbnQub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGVlciA9IHRoaXMuZGVzaWduZXJTdXJmYWNlLmZpbmRQZWVyKGNhcmRPYmplY3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwZWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGVlci5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBwZWVyLnNjcm9sbEludG9WaWV3KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVycm9yRWxlbWVudC5pbm5lclRleHQgPSBtZXNzYWdlO1xyXG5cclxuICAgICAgICByZXR1cm4gZXJyb3JFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVjcmVhdGVEZXNpZ25lclN1cmZhY2UoKSB7XHJcbiAgICAgICAgbGV0IHN0eWxlU2hlZXRMaW5rRWxlbWVudCA9IDxIVE1MTGlua0VsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGFwdGl2ZUNhcmRTdHlsZXNoZWV0XCIpO1xyXG5cclxuICAgICAgICBpZiAoc3R5bGVTaGVldExpbmtFbGVtZW50ID09IG51bGwpIHtcclxuICAgICAgICAgICAgc3R5bGVTaGVldExpbmtFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcbiAgICAgICAgICAgIHN0eWxlU2hlZXRMaW5rRWxlbWVudC5pZCA9IFwiYWRhcHRpdmVDYXJkU3R5bGVzaGVldFwiO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKHN0eWxlU2hlZXRMaW5rRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdHlsZVNoZWV0TGlua0VsZW1lbnQucmVsID0gXCJzdHlsZXNoZWV0XCI7XHJcblx0XHRzdHlsZVNoZWV0TGlua0VsZW1lbnQudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuXHJcblx0XHRpZihVdGlscy5pc0Fic29sdXRlVXJsKHRoaXMuYWN0aXZlSG9zdENvbnRhaW5lci5zdHlsZVNoZWV0KSlcclxuICAgICAgICB7XHJcblx0XHRcdHN0eWxlU2hlZXRMaW5rRWxlbWVudC5ocmVmID0gdGhpcy5hY3RpdmVIb3N0Q29udGFpbmVyLnN0eWxlU2hlZXQ7XHJcblx0XHR9XHJcblx0XHRlbHNlXHJcblx0XHR7XHJcblx0XHRcdHN0eWxlU2hlZXRMaW5rRWxlbWVudC5ocmVmID0gVXRpbHMuam9pblBhdGhzKHRoaXMuX2Fzc2V0UGF0aCwgdGhpcy5hY3RpdmVIb3N0Q29udGFpbmVyLnN0eWxlU2hlZXQpO1xyXG5cdFx0fVxyXG5cclxuICAgICAgICBsZXQgX2NhcmRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXJkQXJlYVwiKTtcclxuXHJcbiAgICAgICAgaWYgKF9jYXJkQXJlYSkge1xyXG4gICAgICAgICAgICBfY2FyZEFyZWEuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5hY3RpdmVIb3N0Q29udGFpbmVyLmdldEJhY2tncm91bmRDb2xvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5hY3RpdmVIb3N0Q29udGFpbmVyLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fZGVzaWduZXJIb3N0RWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlSG9zdENvbnRhaW5lci5yZW5kZXJUbyh0aGlzLl9kZXNpZ25lckhvc3RFbGVtZW50KTtcclxuXHJcbiAgICAgICAgbGV0IHdhc0luUHJldmlld01vZGUgPSB0aGlzLl9kZXNpZ25lclN1cmZhY2UgPyB0aGlzLl9kZXNpZ25lclN1cmZhY2UuaXNQcmV2aWV3TW9kZSA6IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLl9kZXNpZ25lclN1cmZhY2UgPSBuZXcgRGVzaWduZXIuQ2FyZERlc2lnbmVyU3VyZmFjZSh0aGlzLmFjdGl2ZUhvc3RDb250YWluZXIuY2FyZEhvc3QpO1xyXG4gICAgICAgIHRoaXMuX2Rlc2lnbmVyU3VyZmFjZS5maXhlZEhlaWdodENhcmQgPSB0aGlzLmFjdGl2ZUhvc3RDb250YWluZXIuaXNGaXhlZEhlaWdodDtcclxuICAgICAgICB0aGlzLl9kZXNpZ25lclN1cmZhY2Uub25TZWxlY3RlZFBlZXJDaGFuZ2VkID0gKHBlZXI6IERlc2lnbmVyUGVlcnMuRGVzaWduZXJQZWVyKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGRQcm9wZXJ0eVNoZWV0KHBlZXIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5fZGVzaWduZXJTdXJmYWNlLm9uTGF5b3V0VXBkYXRlZCA9IChpc0Z1bGxSZWZyZXNoOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpc0Z1bGxSZWZyZXNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlVXBkYXRlSnNvbkZyb21DYXJkKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGRUcmVlVmlldygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5fZGVzaWduZXJTdXJmYWNlLm9uQ2FyZFZhbGlkYXRlZCA9IChwYXJzZUVycm9yczogQXJyYXk8QWRhcHRpdmUuSVZhbGlkYXRpb25FcnJvcj4sIHZhbGlkYXRpb25SZXN1bHRzOiBBZGFwdGl2ZS5WYWxpZGF0aW9uUmVzdWx0cykgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZXJyb3JQYW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlcnJvclBhbmVcIik7XHJcbiAgICAgICAgICAgIGVycm9yUGFuZS5pbm5lckhUTUwgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBhcnNlRXJyb3JzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGxldCBlcnJvck1lc3NhZ2VzOiBBcnJheTxzdHJpbmc+ID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZXJyb3Igb2YgcGFyc2VFcnJvcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JNZXNzYWdlcy5pbmRleE9mKGVycm9yLm1lc3NhZ2UpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2VzLnB1c2goZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IG1lc3NhZ2Ugb2YgZXJyb3JNZXNzYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yUGFuZS5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlckVycm9yUGFuZUVsZW1lbnQoXCJbRXJyb3JdIFwiICsgbWVzc2FnZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsaWRhdGlvblJlc3VsdHMuZmFpbHVyZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZmFpbHVyZSBvZiB2YWxpZGF0aW9uUmVzdWx0cy5mYWlsdXJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGVycm9yIG9mIGZhaWx1cmUuZXJyb3JzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yUGFuZS5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlckVycm9yUGFuZUVsZW1lbnQoXCJbXCIgKyBmYWlsdXJlLmNhcmRPYmplY3QuZ2V0SnNvblR5cGVOYW1lKCkgKyBcIl0gXCIgKyBlcnJvci5tZXNzYWdlLCBmYWlsdXJlLmNhcmRPYmplY3QpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChlcnJvclBhbmUuY2hpbGRFbGVtZW50Q291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBlcnJvclBhbmUuY2xhc3NMaXN0LnJlbW92ZShcImFjZC1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlcnJvclBhbmUuY2xhc3NMaXN0LmFkZChcImFjZC1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmJ1aWxkUGFsZXR0ZSgpO1xyXG4gICAgICAgIHRoaXMuYnVpbGRQcm9wZXJ0eVNoZWV0KG51bGwpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fY2FyZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jYXJkLmhvc3RDb25maWcgPSB0aGlzLmFjdGl2ZUhvc3RDb250YWluZXIuZ2V0SG9zdENvbmZpZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZGVzaWduZXJTdXJmYWNlLmNhcmQgPSB0aGlzLl9jYXJkO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZVNhbXBsZURhdGEoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fZGVzaWduZXJTdXJmYWNlLmlzUHJldmlld01vZGUgPSB3YXNJblByZXZpZXdNb2RlO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUZ1bGxMYXlvdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFjdGl2ZUhvc3RDb250YWluZXJDaGFuZ2VkKCkge1xyXG4gICAgICAgIHRoaXMucmVjcmVhdGVEZXNpZ25lclN1cmZhY2UoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMub25BY3RpdmVIb3N0Q29udGFpbmVyQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQWN0aXZlSG9zdENvbnRhaW5lckNoYW5nZWQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlVG9vbGJveExheW91dCh0b29sYm94OiBUb29sYm94LCBob3N0UGFuZWxSZWN0OiBDbGllbnRSZWN0IHwgRE9NUmVjdCkge1xyXG4gICAgICAgIGlmICh0b29sYm94KSB7XHJcbiAgICAgICAgICAgIGxldCBqc29uRWRpdG9ySGVhZGVyUmVjdCA9IHRvb2xib3guZ2V0SGVhZGVyQm91bmRpbmdSZWN0KCk7XHJcblxyXG4gICAgICAgICAgICB0b29sYm94LmNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gKGhvc3RQYW5lbFJlY3QuaGVpZ2h0IC0ganNvbkVkaXRvckhlYWRlclJlY3QuaGVpZ2h0KSArIFwicHhcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZUpzb25FZGl0b3JzTGF5b3V0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc01vbmFjb0VkaXRvckxvYWRlZCkge1xyXG4gICAgICAgICAgICBsZXQganNvbkVkaXRvcnNQYW5lUmVjdCA9IHRoaXMuX2pzb25FZGl0b3JzUGFuZWwuY29udGVudEhvc3QuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRvb2xib3hMYXlvdXQodGhpcy5fY2FyZEVkaXRvclRvb2xib3gsIGpzb25FZGl0b3JzUGFuZVJlY3QpO1xyXG4gICAgICAgICAgICB0aGlzLl9jYXJkRWRpdG9yLmxheW91dCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3NhbXBsZURhdGFFZGl0b3JUb29sYm94KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRvb2xib3hMYXlvdXQodGhpcy5fc2FtcGxlRGF0YUVkaXRvclRvb2xib3gsIGpzb25FZGl0b3JzUGFuZVJlY3QpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2FtcGxlRGF0YUVkaXRvci5sYXlvdXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUZ1bGxMYXlvdXQoKSB7XHJcbiAgICAgICAgdGhpcy5zY2hlZHVsZUxheW91dFVwZGF0ZSgpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlSnNvbkVkaXRvcnNMYXlvdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGpzb25VcGRhdGVUaW1lcjogYW55O1xyXG4gICAgcHJpdmF0ZSBjYXJkVXBkYXRlVGltZXI6IGFueTtcclxuICAgIHByaXZhdGUgdXBkYXRlTGF5b3V0VGltZXI6IGFueTtcclxuXHJcbiAgICBwcml2YXRlIHByZXZlbnRDYXJkVXBkYXRlOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBjYXJkUGF5bG9hZENoYW5nZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub25DYXJkUGF5bG9hZENoYW5nZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkNhcmRQYXlsb2FkQ2hhbmdlZCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfY2FyZEVkaXRvclVwZGF0ZUNvdW50ZXIgPSAwO1xyXG5cclxuICAgIHByaXZhdGUgYmVnaW5DYXJkRWRpdG9yVXBkYXRlKCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmRFZGl0b3JVcGRhdGVDb3VudGVyKys7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlbmRDYXJkRWRpdG9yVXBkYXRlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9jYXJkRWRpdG9yVXBkYXRlQ291bnRlciA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FyZEVkaXRvclVwZGF0ZUNvdW50ZXItLTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRDYXJkUGF5bG9hZChwYXlsb2FkOiBvYmplY3QsIGFkZFRvVW5kb1N0YWNrOiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzTW9uYWNvRWRpdG9yTG9hZGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVnaW5DYXJkRWRpdG9yVXBkYXRlKCk7XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FyZEVkaXRvci5zZXRWYWx1ZShKU09OLnN0cmluZ2lmeShwYXlsb2FkLCBudWxsLCA0KSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNhcmRGcm9tSnNvbihhZGRUb1VuZG9TdGFjayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuZENhcmRFZGl0b3JVcGRhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jYXJkUGF5bG9hZENoYW5nZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFNhbXBsZURhdGFQYXlsb2FkKHBheWxvYWQ6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc01vbmFjb0VkaXRvckxvYWRlZCAmJiB0aGlzLl9zYW1wbGVEYXRhRWRpdG9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NhbXBsZURhdGFFZGl0b3Iuc2V0VmFsdWUoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCwgbnVsbCwgNCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUpzb25Gcm9tQ2FyZChhZGRUb1VuZG9TdGFjazogYm9vbGVhbiA9IHRydWUpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZlbnRDYXJkVXBkYXRlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5wcmV2ZW50SnNvblVwZGF0ZSAmJiB0aGlzLl9pc01vbmFjb0VkaXRvckxvYWRlZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNhcmRQYXlsb2FkID0gdGhpcy5jYXJkLnRvSlNPTigpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2FyZFBheWxvYWQoY2FyZFBheWxvYWQsIGFkZFRvVW5kb1N0YWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2ZW50Q2FyZFVwZGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNjaGVkdWxlVXBkYXRlSnNvbkZyb21DYXJkKCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmpzb25VcGRhdGVUaW1lcik7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5wcmV2ZW50SnNvblVwZGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmpzb25VcGRhdGVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLnVwZGF0ZUpzb25Gcm9tQ2FyZCgpOyB9LCAxMDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHByZXZlbnRKc29uVXBkYXRlOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRDdXJyZW50Q2FyZEVkaXRvclBheWxvYWQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNNb25hY29FZGl0b3JMb2FkZWQgPyB0aGlzLl9jYXJkRWRpdG9yLmdldFZhbHVlKCkgOiBDb25zdGFudHMuZGVmYXVsdFBheWxvYWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRDdXJyZW50U2FtcGxlRGF0YUVkaXRvclBheWxvYWQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNNb25hY29FZGl0b3JMb2FkZWQgJiYgdGhpcy5fc2FtcGxlRGF0YUVkaXRvciA/IHRoaXMuX3NhbXBsZURhdGFFZGl0b3IuZ2V0VmFsdWUoKSA6IFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVDYXJkRnJvbUpzb24oYWRkVG9VbmRvU3RhY2s6IGJvb2xlYW4pIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZlbnRKc29uVXBkYXRlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50RWRpdG9yUGF5bG9hZCA9IHRoaXMuZ2V0Q3VycmVudENhcmRFZGl0b3JQYXlsb2FkKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoYWRkVG9VbmRvU3RhY2spIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZCA9IEpTT04ucGFyc2UoY3VycmVudEVkaXRvclBheWxvYWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVG9VbmRvU3RhY2socGFyc2VkKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLnByZXZlbnRDYXJkVXBkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlc2lnbmVyU3VyZmFjZS5zZXRDYXJkUGF5bG9hZEFzU3RyaW5nKGN1cnJlbnRFZGl0b3JQYXlsb2FkKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhcmRQYXlsb2FkQ2hhbmdlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2ZW50SnNvblVwZGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNjaGVkdWxlVXBkYXRlQ2FyZEZyb21Kc29uKCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNhcmRVcGRhdGVUaW1lcik7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5wcmV2ZW50Q2FyZFVwZGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNhcmRVcGRhdGVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLnVwZGF0ZUNhcmRGcm9tSnNvbih0cnVlKTsgfSwgMzAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzY2hlZHVsZUxheW91dFVwZGF0ZSgpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy51cGRhdGVMYXlvdXRUaW1lcik7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlTGF5b3V0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5kZXNpZ25lclN1cmZhY2UudXBkYXRlTGF5b3V0KGZhbHNlKTsgfSwgNTApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2Z1bGxTY3JlZW5IYW5kbGVyID0gbmV3IEZ1bGxTY3JlZW5IYW5kbGVyKCk7XHJcbiAgICBwcml2YXRlIF9mdWxsU2NyZWVuQnV0dG9uOiBUb29sYmFyQnV0dG9uO1xyXG4gICAgcHJpdmF0ZSBfaG9zdENvbnRhaW5lckNob2ljZVBpY2tlcjogVG9vbGJhckNob2ljZVBpY2tlcjtcclxuICAgIHByaXZhdGUgX3ZlcnNpb25DaG9pY2VQaWNrZXI6IFRvb2xiYXJDaG9pY2VQaWNrZXI7XHJcbiAgICBwcml2YXRlIF91bmRvQnV0dG9uOiBUb29sYmFyQnV0dG9uO1xyXG4gICAgcHJpdmF0ZSBfcmVkb0J1dHRvbjogVG9vbGJhckJ1dHRvbjtcclxuICAgIHByaXZhdGUgX25ld0NhcmRCdXR0b246IFRvb2xiYXJCdXR0b247XHJcbiAgICBwcml2YXRlIF9jb3B5SlNPTkJ1dHRvbjogVG9vbGJhckJ1dHRvbjtcclxuICAgIHByaXZhdGUgX3RvZ2dsZVByZXZpZXdCdXR0b246IFRvb2xiYXJCdXR0b247XHJcblxyXG4gICAgcHJpdmF0ZSBwcmVwYXJlVG9vbGJhcigpIHtcclxuICAgICAgICBpZiAoU2hhcmVkLkdsb2JhbFNldHRpbmdzLnNob3dWZXJzaW9uUGlja2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZlcnNpb25DaG9pY2VQaWNrZXIgPSBuZXcgVG9vbGJhckNob2ljZVBpY2tlcihDYXJkRGVzaWduZXIuVG9vbGJhckNvbW1hbmRzLlZlcnNpb25QaWNrZXIpO1xyXG4gICAgICAgICAgICB0aGlzLl92ZXJzaW9uQ2hvaWNlUGlja2VyLmxhYmVsID0gXCJUYXJnZXQgdmVyc2lvbjpcIlxyXG4gICAgICAgICAgICB0aGlzLl92ZXJzaW9uQ2hvaWNlUGlja2VyLndpZHRoID0gODA7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZlcnNpb25DaG9pY2VQaWNrZXIuYWxpZ25tZW50ID0gVG9vbGJhckVsZW1lbnRBbGlnbm1lbnQuUmlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZlcnNpb25DaG9pY2VQaWNrZXIuc2VwYXJhdG9yID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgU2hhcmVkLlN1cHBvcnRlZFRhcmdldFZlcnNpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl92ZXJzaW9uQ2hvaWNlUGlja2VyLmNob2ljZXMucHVzaChcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFNoYXJlZC5TdXBwb3J0ZWRUYXJnZXRWZXJzaW9uc1tpXS5sYWJlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGkudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRvb2xiYXIuYWRkRWxlbWVudCh0aGlzLl92ZXJzaW9uQ2hvaWNlUGlja2VyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2Z1bGxTY3JlZW5CdXR0b24gPSBuZXcgVG9vbGJhckJ1dHRvbihcclxuICAgICAgICAgICAgQ2FyZERlc2lnbmVyLlRvb2xiYXJDb21tYW5kcy5GdWxsU2NyZWVuLFxyXG4gICAgICAgICAgICBcIkVudGVyIEZ1bGwgU2NyZWVuXCIsXHJcbiAgICAgICAgICAgIFwiYWNkLWljb24tZnVsbFNjcmVlblwiLFxyXG4gICAgICAgICAgICAoc2VuZGVyKSA9PiB7IHRoaXMuX2Z1bGxTY3JlZW5IYW5kbGVyLnRvZ2dsZUZ1bGxTY3JlZW4oKTsgfSk7XHJcbiAgICAgICAgdGhpcy5fZnVsbFNjcmVlbkJ1dHRvbi5kaXNwbGF5Q2FwdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2Z1bGxTY3JlZW5CdXR0b24udG9vbFRpcCA9IFwiRW50ZXIgZnVsbCBzY3JlZW5cIjtcclxuICAgICAgICB0aGlzLl9mdWxsU2NyZWVuQnV0dG9uLmFsaWdubWVudCA9IFRvb2xiYXJFbGVtZW50QWxpZ25tZW50LlJpZ2h0O1xyXG4gICAgICAgIC8vIEhpZGUgZnVsbCBzY3JlZW4gYnV0dG9uIGJ5IGRlZmF1bHQuIFRoaXMgYnV0dG9uIGlzIHVzZWxlc3NcclxuICAgICAgICAvLyBhbmQgc2hvdWxkIHJlYWxseSBiZSBwbGFpbiBhbmQgc2ltcGxlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvblxyXG4gICAgICAgIHRoaXMuX2Z1bGxTY3JlZW5CdXR0b24uaXNWaXNpYmxlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMudG9vbGJhci5hZGRFbGVtZW50KHRoaXMuX2Z1bGxTY3JlZW5CdXR0b24pO1xyXG5cclxuICAgICAgICBsZXQgb3BlblNhbXBsZUJ1dHRvbiA9IG5ldyBUb29sYmFyQnV0dG9uKFxyXG4gICAgICAgICAgICBDYXJkRGVzaWduZXIuVG9vbGJhckNvbW1hbmRzLk9wZW5QYXlsb2FkLFxyXG4gICAgICAgICAgICBcIk9wZW4gU2FtcGxlXCIsXHJcbiAgICAgICAgICAgIFwiYWNkLWljb24tb3BlblwiLFxyXG4gICAgICAgICAgICAoc2VuZGVyOiBUb29sYmFyQnV0dG9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGlhbG9nID0gbmV3IFNhbXBsZVBpY2tlckRpYWxvZygpO1xyXG4gICAgICAgICAgICAgICAgZGlhbG9nLnRpdGxlID0gXCJQaWNrIGEgc2FtcGxlXCI7XHJcbiAgICAgICAgICAgICAgICBkaWFsb2cud2lkdGggPSBcIjMwJVwiO1xyXG4gICAgICAgICAgICAgICAgZGlhbG9nLmhlaWdodCA9IFwiNjAlXCI7XHJcbiAgICAgICAgICAgICAgICBkaWFsb2cuY2F0YWxvZ3VlVXJsID0gdGhpcy5zYW1wbGVDYXRhbG9ndWVVcmw7XHJcbiAgICAgICAgICAgICAgICBkaWFsb2cub25DbG9zZSA9IChkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpYWxvZy5zZWxlY3RlZFNhbXBsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2cuc2VsZWN0ZWRTYW1wbGUub25Eb3dubG9hZGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2FyZFBheWxvYWQgPSBKU09OLnBhcnNlKGRpYWxvZy5zZWxlY3RlZFNhbXBsZS5jYXJkUGF5bG9hZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2FyZFBheWxvYWQoY2FyZFBheWxvYWQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJUaGUgc2FtcGxlIGNvdWxkIG5vdCBiZSBsb2FkZWQuXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBZGFwdGl2ZS5pc051bGxPckVtcHR5KGRpYWxvZy5zZWxlY3RlZFNhbXBsZS5zYW1wbGVEYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzYW1wbGVEYXRhUGF5bG9hZCA9IEpTT04ucGFyc2UoZGlhbG9nLnNlbGVjdGVkU2FtcGxlLnNhbXBsZURhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTYW1wbGVEYXRhUGF5bG9hZChzYW1wbGVEYXRhUGF5bG9hZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVN0cnVjdHVyZSA9IEZpZWxkRGVmaW5pdGlvbi5jcmVhdGUoc2FtcGxlRGF0YVBheWxvYWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIlRoZSBzYW1wbGUgY291bGQgbm90IGJlIGxvYWRlZC5cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZy5zZWxlY3RlZFNhbXBsZS5kb3dubG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBkaWFsb2cub3BlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICB0aGlzLnRvb2xiYXIuYWRkRWxlbWVudChvcGVuU2FtcGxlQnV0dG9uKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2hvc3RDb250YWluZXJzICYmIHRoaXMuX2hvc3RDb250YWluZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5faG9zdENvbnRhaW5lckNob2ljZVBpY2tlciA9IG5ldyBUb29sYmFyQ2hvaWNlUGlja2VyKENhcmREZXNpZ25lci5Ub29sYmFyQ29tbWFuZHMuSG9zdEFwcFBpY2tlcik7XHJcbiAgICAgICAgICAgIHRoaXMuX2hvc3RDb250YWluZXJDaG9pY2VQaWNrZXIuc2VwYXJhdG9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5faG9zdENvbnRhaW5lckNob2ljZVBpY2tlci5sYWJlbCA9IFwiU2VsZWN0IGhvc3QgYXBwOlwiXHJcbiAgICAgICAgICAgIHRoaXMuX2hvc3RDb250YWluZXJDaG9pY2VQaWNrZXIud2lkdGggPSAzNTA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2hvc3RDb250YWluZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9ob3N0Q29udGFpbmVyQ2hvaWNlUGlja2VyLmNob2ljZXMucHVzaChcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuX2hvc3RDb250YWluZXJzW2ldLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5faG9zdENvbnRhaW5lckNob2ljZVBpY2tlci5vbkNoYW5nZWQgPSAoc2VuZGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUhvc3RDb250YWluZXIgPSB0aGlzLl9ob3N0Q29udGFpbmVyc1tOdW1iZXIucGFyc2VJbnQodGhpcy5faG9zdENvbnRhaW5lckNob2ljZVBpY2tlci52YWx1ZSldO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlSG9zdENvbnRhaW5lckNoYW5nZWQoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhci5hZGRFbGVtZW50KHRoaXMuX2hvc3RDb250YWluZXJDaG9pY2VQaWNrZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fdW5kb0J1dHRvbiA9IG5ldyBUb29sYmFyQnV0dG9uKFxyXG4gICAgICAgICAgICBDYXJkRGVzaWduZXIuVG9vbGJhckNvbW1hbmRzLlVuZG8sXHJcbiAgICAgICAgICAgIFwiVW5kb1wiLFxyXG4gICAgICAgICAgICBcImFjZC1pY29uLXVuZG9cIixcclxuICAgICAgICAgICAgKHNlbmRlcjogVG9vbGJhckJ1dHRvbikgPT4geyB0aGlzLnVuZG8oKTsgfSk7XHJcbiAgICAgICAgdGhpcy5fdW5kb0J1dHRvbi5zZXBhcmF0b3IgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX3VuZG9CdXR0b24udG9vbFRpcCA9IFwiVW5kbyB5b3VyIGxhc3QgY2hhbmdlXCI7XHJcbiAgICAgICAgdGhpcy5fdW5kb0J1dHRvbi5pc0VuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl91bmRvQnV0dG9uLmRpc3BsYXlDYXB0aW9uID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMudG9vbGJhci5hZGRFbGVtZW50KHRoaXMuX3VuZG9CdXR0b24pO1xyXG5cclxuICAgICAgICB0aGlzLl9yZWRvQnV0dG9uID0gbmV3IFRvb2xiYXJCdXR0b24oXHJcbiAgICAgICAgICAgIENhcmREZXNpZ25lci5Ub29sYmFyQ29tbWFuZHMuUmVkbyxcclxuICAgICAgICAgICAgXCJSZWRvXCIsXHJcbiAgICAgICAgICAgIFwiYWNkLWljb24tcmVkb1wiLFxyXG4gICAgICAgICAgICAoc2VuZGVyOiBUb29sYmFyQnV0dG9uKSA9PiB7IHRoaXMucmVkbygpOyB9KTtcclxuICAgICAgICB0aGlzLl9yZWRvQnV0dG9uLnRvb2xUaXAgPSBcIlJlZG8geW91ciBsYXN0IGNoYW5nZXNcIjtcclxuICAgICAgICB0aGlzLl9yZWRvQnV0dG9uLmlzRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3JlZG9CdXR0b24uZGlzcGxheUNhcHRpb24gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy50b29sYmFyLmFkZEVsZW1lbnQodGhpcy5fcmVkb0J1dHRvbik7XHJcblxyXG4gICAgICAgIHRoaXMuX25ld0NhcmRCdXR0b24gPSBuZXcgVG9vbGJhckJ1dHRvbihcclxuICAgICAgICAgICAgQ2FyZERlc2lnbmVyLlRvb2xiYXJDb21tYW5kcy5OZXdDYXJkLFxyXG4gICAgICAgICAgICBcIk5ldyBjYXJkXCIsXHJcbiAgICAgICAgICAgIFwiYWNkLWljb24tbmV3Q2FyZFwiLFxyXG4gICAgICAgICAgICAoc2VuZGVyOiBUb29sYmFyQnV0dG9uKSA9PiB7IHRoaXMubmV3Q2FyZCgpOyB9KTtcclxuICAgICAgICB0aGlzLl9uZXdDYXJkQnV0dG9uLnNlcGFyYXRvciA9IHRydWU7XHJcblxyXG4gICAgICAgIHRoaXMudG9vbGJhci5hZGRFbGVtZW50KHRoaXMuX25ld0NhcmRCdXR0b24pO1xyXG5cclxuICAgICAgICB0aGlzLl9jb3B5SlNPTkJ1dHRvbiA9IG5ldyBUb29sYmFyQnV0dG9uKFxyXG4gICAgICAgICAgICBDYXJkRGVzaWduZXIuVG9vbGJhckNvbW1hbmRzLkNvcHlKU09OLFxyXG4gICAgICAgICAgICBcIkNvcHkgY2FyZCBKU09OXCIsXHJcbiAgICAgICAgICAgIFwiYWNkLWljb24tY29weVwiKTtcclxuICAgICAgICB0aGlzLnRvb2xiYXIuYWRkRWxlbWVudCh0aGlzLl9jb3B5SlNPTkJ1dHRvbik7XHJcblxyXG4gICAgICAgIHRoaXMuX3RvZ2dsZVByZXZpZXdCdXR0b24gPSBuZXcgVG9vbGJhckJ1dHRvbihcclxuICAgICAgICAgICAgQ2FyZERlc2lnbmVyLlRvb2xiYXJDb21tYW5kcy5Ub2dnbGVQcmV2aWV3LFxyXG4gICAgICAgICAgICBcIlByZXZpZXcgbW9kZVwiLFxyXG4gICAgICAgICAgICBcImFjZC1pY29uLXByZXZpZXdcIixcclxuICAgICAgICAgICAgKHNlbmRlcjogVG9vbGJhckJ1dHRvbikgPT4geyB0aGlzLnRvZ2dsZVByZXZpZXcoKTsgfSk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlUHJldmlld0J1dHRvbi5zZXBhcmF0b3IgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZVByZXZpZXdCdXR0b24uYWxsb3dUb2dnbGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZVByZXZpZXdCdXR0b24uaXNWaXNpYmxlID0gU2hhcmVkLkdsb2JhbFNldHRpbmdzLmVuYWJsZURhdGFCaW5kaW5nU3VwcG9ydDtcclxuXHJcbiAgICAgICAgdGhpcy50b29sYmFyLmFkZEVsZW1lbnQodGhpcy5fdG9nZ2xlUHJldmlld0J1dHRvbik7XHJcblxyXG4gICAgICAgIHRoaXMuX2Z1bGxTY3JlZW5IYW5kbGVyID0gbmV3IEZ1bGxTY3JlZW5IYW5kbGVyKCk7XHJcbiAgICAgICAgdGhpcy5fZnVsbFNjcmVlbkhhbmRsZXIub25GdWxsU2NyZWVuQ2hhbmdlZCA9IChpc0Z1bGxTY3JlZW46IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZnVsbFNjcmVlbkJ1dHRvbi50b29sVGlwID0gaXNGdWxsU2NyZWVuID8gXCJFeGl0IGZ1bGwgc2NyZWVuXCIgOiBcIkVudGVyIGZ1bGwgc2NyZWVuXCI7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZ1bGxMYXlvdXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblJlc2l6ZSgpIHtcclxuICAgICAgICB0aGlzLl9jYXJkRWRpdG9yLmxheW91dCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fc2FtcGxlRGF0YUVkaXRvcikge1xyXG4gICAgICAgICAgICB0aGlzLl9zYW1wbGVEYXRhRWRpdG9yLmxheW91dCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVNhbXBsZURhdGEoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5fc2FtcGxlRGF0YSA9IEpTT04ucGFyc2UodGhpcy5nZXRDdXJyZW50U2FtcGxlRGF0YUVkaXRvclBheWxvYWQoKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzaWduZXJTdXJmYWNlLnNhbXBsZURhdGEgPSB0aGlzLl9zYW1wbGVEYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCB7XHJcbiAgICAgICAgICAgIC8vIFN3YWxsb3cgZXhwcmVzc2lvbiwgdGhlIHBheWxvYWQgaXNuJ3QgYSB2YWxpZCBKU09OIGRvY3VtZW50XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBtb25hY29Nb2R1bGVMb2FkZWQobW9uYWNvOiBhbnkgPSBudWxsKSB7XHJcblx0XHRpZiAoIW1vbmFjbykge1xyXG4gICAgICAgICAgICBtb25hY28gPSB3aW5kb3dbXCJtb25hY29cIl07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbW9uYWNvQ29uZmlndXJhdGlvbiA9IHtcclxuICAgICAgICAgICAgc2NoZW1hczogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHVyaTogXCJodHRwOi8vYWRhcHRpdmVjYXJkcy5pby9zY2hlbWFzL2FkYXB0aXZlLWNhcmQuanNvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYTogYWRhcHRpdmVDYXJkU2NoZW1hLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVNYXRjaDogW1wiKlwiXSxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgdmFsaWRhdGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBhbGxvd0NvbW1lbnRzOiB0cnVlXHJcbiAgICAgICAgfVxyXG5cclxuXHRcdC8vIFRPRE86IHNldCB0aGlzIGluIG91ciBlZGl0b3IgaW5zdGVhZCBvZiBkZWZhdWx0c1xyXG4gICAgICAgIG1vbmFjby5sYW5ndWFnZXMuanNvbi5qc29uRGVmYXVsdHMuc2V0RGlhZ25vc3RpY3NPcHRpb25zKG1vbmFjb0NvbmZpZ3VyYXRpb24pO1xyXG5cclxuICAgICAgICAvLyBTZXR1cCBjYXJkIEpTT04gZWRpdG9yXHJcbiAgICAgICAgdGhpcy5fY2FyZEVkaXRvclRvb2xib3guY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5fY2FyZEVkaXRvclRvb2xib3guY29udGVudC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcblxyXG4gICAgICAgIHRoaXMuX2NhcmRFZGl0b3IgPSBtb25hY28uZWRpdG9yLmNyZWF0ZShcclxuICAgICAgICAgICAgdGhpcy5fY2FyZEVkaXRvclRvb2xib3guY29udGVudCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9sZGluZzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAxMy41LFxyXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2U6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgIG1pbmltYXA6IHtcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5fY2FyZEVkaXRvci5vbkRpZENoYW5nZU1vZGVsQ29udGVudCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9jYXJkRWRpdG9yVXBkYXRlQ291bnRlciA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlVXBkYXRlQ2FyZEZyb21Kc29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3NhbXBsZURhdGFFZGl0b3JUb29sYm94KSB7XHJcbiAgICAgICAgICAgIC8vIFNldHVwIHNhbXBsZSBkYXRhIEpTT04gZWRpdG9yXHJcbiAgICAgICAgICAgIHRoaXMuX3NhbXBsZURhdGFFZGl0b3JUb29sYm94LmNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICB0aGlzLl9zYW1wbGVEYXRhRWRpdG9yVG9vbGJveC5jb250ZW50LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3NhbXBsZURhdGFFZGl0b3IgPSBtb25hY28uZWRpdG9yLmNyZWF0ZShcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NhbXBsZURhdGFFZGl0b3JUb29sYm94LmNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9sZGluZzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogMTMuNSxcclxuICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbmltYXA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zYW1wbGVEYXRhRWRpdG9yLm9uRGlkQ2hhbmdlTW9kZWxDb250ZW50KFxyXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2FtcGxlRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4geyB0aGlzLm9uUmVzaXplKCk7IH0pO1xyXG5cclxuICAgICAgICB0aGlzLl9pc01vbmFjb0VkaXRvckxvYWRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlSnNvbkVkaXRvcnNMYXlvdXQoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUpzb25Gcm9tQ2FyZChmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVUb29sYmFyKCkge1xyXG4gICAgICAgIHRoaXMuX3VuZG9CdXR0b24uaXNFbmFibGVkID0gdGhpcy5jYW5VbmRvO1xyXG4gICAgICAgIHRoaXMuX3JlZG9CdXR0b24uaXNFbmFibGVkID0gdGhpcy5jYW5SZWRvO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkVG9VbmRvU3RhY2socGF5bG9hZDogb2JqZWN0KSB7XHJcbiAgICAgICAgbGV0IGRvQWRkOiBib29sZWFuID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3VuZG9TdGFjay5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGRvQWRkID0gdGhpcy5fdW5kb1N0YWNrW3RoaXMuX3VuZG9TdGFjay5sZW5ndGggLSAxXSAhPSBwYXlsb2FkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRvQWRkKSB7XHJcbiAgICAgICAgICAgIGxldCB1bmRvUGF5bG9hZHNUb0Rpc2NhcmQgPSB0aGlzLl91bmRvU3RhY2subGVuZ3RoIC0gKHRoaXMuX3VuZG9TdGFja0luZGV4ICsgMSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodW5kb1BheWxvYWRzVG9EaXNjYXJkID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdW5kb1N0YWNrLnNwbGljZSh0aGlzLl91bmRvU3RhY2tJbmRleCArIDEsIHVuZG9QYXlsb2Fkc1RvRGlzY2FyZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3VuZG9TdGFjay5wdXNoKHBheWxvYWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3VuZG9TdGFjay5sZW5ndGggPiBDYXJkRGVzaWduZXIuTUFYX1VORE9fU1RBQ0tfU0laRSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdW5kb1N0YWNrLnNwbGljZSgwLCAxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fdW5kb1N0YWNrSW5kZXggPSB0aGlzLl91bmRvU3RhY2subGVuZ3RoIC0gMTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVG9vbGJhcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZVBvaW50ZXJVcChlOiBQb2ludGVyRXZlbnQpIHtcclxuICAgICAgICB0aGlzLmVuZERyYWcoKTtcclxuICAgICAgICB0aGlzLmRlc2lnbmVyU3VyZmFjZS5lbmREcmFnKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVQb2ludGVyTW92ZShlOiBQb2ludGVyRXZlbnQpIHtcclxuICAgICAgICB0aGlzLl9jdXJyZW50TW91c2VQb3NpdGlvbiA9IHsgeDogZS54LCB5OiBlLnkgfTtcclxuXHJcbiAgICAgICAgbGV0IGlzUG9pbnRlck92ZXJEZXNpZ25lciA9IHRoaXMuZGVzaWduZXJTdXJmYWNlLmlzUG9pbnRlck92ZXIodGhpcy5fY3VycmVudE1vdXNlUG9zaXRpb24ueCwgdGhpcy5fY3VycmVudE1vdXNlUG9zaXRpb24ueSk7XHJcbiAgICAgICAgbGV0IHBlZXJEcm9wcGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9kcmFnZ2VkUGFsZXR0ZUl0ZW0gJiYgaXNQb2ludGVyT3ZlckRlc2lnbmVyKSB7XHJcbiAgICAgICAgICAgIGxldCBwZWVyID0gdGhpcy5fZHJhZ2dlZFBhbGV0dGVJdGVtLmNyZWF0ZVBlZXIodGhpcy5kZXNpZ25lclN1cmZhY2UpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNsaWVudENvb3JkaW5hdGVzID0gdGhpcy5kZXNpZ25lclN1cmZhY2UucGFnZVRvQ2xpZW50Q29vcmRpbmF0ZXModGhpcy5fY3VycmVudE1vdXNlUG9zaXRpb24ueCwgdGhpcy5fY3VycmVudE1vdXNlUG9zaXRpb24ueSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5kZXNpZ25lclN1cmZhY2UudHJ5RHJvcChjbGllbnRDb29yZGluYXRlcywgcGVlcikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kRHJhZygpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZGVzaWduZXJTdXJmYWNlLnN0YXJ0RHJhZyhwZWVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBwZWVyRHJvcHBlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghcGVlckRyb3BwZWQgJiYgdGhpcy5fZHJhZ2dlZEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5fZHJhZ2dlZEVsZW1lbnQuc3R5bGUubGVmdCA9IHRoaXMuX2N1cnJlbnRNb3VzZVBvc2l0aW9uLnggLSAxMCArIFwicHhcIjtcclxuICAgICAgICAgICAgdGhpcy5fZHJhZ2dlZEVsZW1lbnQuc3R5bGUudG9wID0gdGhpcy5fY3VycmVudE1vdXNlUG9zaXRpb24ueSAtIDEwICsgXCJweFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZWFkb25seSB0b29sYmFyOiBUb29sYmFyID0gbmV3IFRvb2xiYXIoKTtcclxuXHJcbiAgICBzYW1wbGVDYXRhbG9ndWVVcmw6IHN0cmluZyA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihob3N0Q29udGFpbmVyczogQXJyYXk8SG9zdENvbnRhaW5lcj4gPSBudWxsKSB7XHJcbiAgICAgICAgQWRhcHRpdmUuQWRhcHRpdmVDYXJkLmVuYWJsZUZ1bGxKc29uUm91bmRUcmlwID0gdHJ1ZTtcclxuICAgICAgICBBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQub25Qcm9jZXNzTWFya2Rvd24gPSAodGV4dDogc3RyaW5nLCByZXN1bHQ6IEFkYXB0aXZlLklNYXJrZG93blByb2Nlc3NpbmdSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgQ2FyZERlc2lnbmVyLmludGVybmFsUHJvY2Vzc01hcmtkb3duKHRleHQsIHJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9ob3N0Q29udGFpbmVycyA9IGhvc3RDb250YWluZXJzID8gaG9zdENvbnRhaW5lcnMgOiBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5wcmVwYXJlVG9vbGJhcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGF0dGFjaFRvKHJvb3Q6IEhUTUxFbGVtZW50KSAge1xyXG4gICAgICAgIGxldCBzdHlsZVNoZWV0TGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcclxuICAgICAgICBzdHlsZVNoZWV0TGlua0VsZW1lbnQuaWQgPSBcIl9fYWMtZGVzaWduZXJcIjtcclxuICAgICAgICBzdHlsZVNoZWV0TGlua0VsZW1lbnQucmVsID0gXCJzdHlsZXNoZWV0XCI7XHJcblx0XHRzdHlsZVNoZWV0TGlua0VsZW1lbnQudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuICAgICAgICBzdHlsZVNoZWV0TGlua0VsZW1lbnQuaHJlZiA9IFV0aWxzLmpvaW5QYXRocyh0aGlzLl9hc3NldFBhdGgsIFwiYWRhcHRpdmVjYXJkcy1kZXNpZ25lci5jc3NcIik7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChzdHlsZVNoZWV0TGlua0VsZW1lbnQpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5faG9zdENvbnRhaW5lcnMgJiYgdGhpcy5faG9zdENvbnRhaW5lcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl9hY3RpdmVIb3N0Q29udGFpbmVyID0gdGhpcy5faG9zdENvbnRhaW5lcnNbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9hY3RpdmVIb3N0Q29udGFpbmVyID0gbmV3IERlZmF1bHRDb250YWluZXIoXCJEZWZhdWx0XCIsIFwiYWRhcHRpdmVjYXJkcy1kZWZhdWx0aG9zdC5jc3NcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByb290LnN0eWxlLmZsZXggPSBcIjEgMSBhdXRvXCI7XHJcbiAgICAgICAgcm9vdC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgcm9vdC5zdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJjb2x1bW5cIjtcclxuICAgICAgICByb290LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuXHJcbiAgICAgICAgcm9vdC5pbm5lckhUTUwgPVxyXG4gICAgICAgICAgICAnPGRpdiBpZD1cInRvb2xiYXJIb3N0XCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29udGVudFwiIHN0eWxlPVwiZGlzcGxheTogZmxleDsgZmxleDogMSAxIGF1dG87IG92ZXJmbG93LXk6IGhpZGRlbjtcIj4nICtcclxuICAgICAgICAgICAgICAgICc8ZGl2IGlkPVwibGVmdENvbGxhcHNlZFBhbmVUYWJIb3N0XCIgY2xhc3M9XCJhY2QtdmVydGljYWxDb2xsYXBzZWRUYWJDb250YWluZXIgYWNkLWRvY2tlZExlZnRcIiBzdHlsZT1cImJvcmRlci1yaWdodDogMXB4IHNvbGlkICNEMkQyRDI7XCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAnPGRpdiBpZD1cInRvb2xQYWxldHRlUGFuZWxcIiBjbGFzcz1cImFjZC10b29sUGFsZXR0ZS1wYW5lXCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAnPGRpdiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGZsZXg6IDEgMSAxMDAlOyBvdmVyZmxvdzogaGlkZGVuO1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsgZmxleDogMSAxIDEwMCU7IG92ZXJmbG93OiBoaWRkZW47XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGlkPVwiY2FyZEFyZWFcIiBjbGFzcz1cImFjZC1kZXNpZ25lci1jYXJkQXJlYVwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgc3R5bGU9XCJmbGV4OiAxIDEgMTAwJTsgb3ZlcmZsb3c6IGF1dG87XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgaWQ9XCJkZXNpZ25lckhvc3RcIiBzdHlsZT1cIm1hcmdpbjogMjBweCA0MHB4IDIwcHggMjBweDtcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGlkPVwiZXJyb3JQYW5lXCIgY2xhc3M9XCJhY2QtZXJyb3ItcGFuZSBhY2QtaGlkZGVuXCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgaWQ9XCJ0cmVlVmlld1BhbmVsXCIgY2xhc3M9XCJhY2QtdHJlZVZpZXctcGFuZVwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGlkPVwicHJvcGVydHlTaGVldFBhbmVsXCIgY2xhc3M9XCJhY2QtcHJvcGVydHlTaGVldC1wYW5lXCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGlkPVwianNvbkVkaXRvclBhbmVsXCIgY2xhc3M9XCJhY2QtanNvbi1lZGl0b3ItcGFuZVwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGlkPVwiYm90dG9tQ29sbGFwc2VkUGFuZVRhYkhvc3RcIiBjbGFzcz1cImFjZC1ob3Jpem9udGFsQ29sbGFwc2VkVGFiQ29udGFpbmVyXCIgc3R5bGU9XCJib3JkZXItdG9wOiAxcHggc29saWQgI0QyRDJEMjtcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICc8ZGl2IGlkPVwicmlnaHRDb2xsYXBzZWRQYW5lVGFiSG9zdFwiIGNsYXNzPVwiYWNkLXZlcnRpY2FsQ29sbGFwc2VkVGFiQ29udGFpbmVyIGFjZC1kb2NrZWRSaWdodFwiIHN0eWxlPVwiYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjRDJEMkQyO1wiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAnPC9kaXY+JztcclxuXHJcbiAgICAgICAgdGhpcy50b29sYmFyLmF0dGFjaFRvKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9vbGJhckhvc3RcIikpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fdmVyc2lvbkNob2ljZVBpY2tlcikge1xyXG4gICAgICAgICAgICB0aGlzLl92ZXJzaW9uQ2hvaWNlUGlja2VyLnNlbGVjdGVkSW5kZXggPSBTaGFyZWQuU3VwcG9ydGVkVGFyZ2V0VmVyc2lvbnMuaW5kZXhPZihTaGFyZWQuVmVyc2lvbnMudjFfMik7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZlcnNpb25DaG9pY2VQaWNrZXIub25DaGFuZ2VkID0gKHNlbmRlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5idWlsZFByb3BlcnR5U2hlZXQodGhpcy5fZGVzaWduZXJTdXJmYWNlLnNlbGVjdGVkUGVlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9jb3B5SlNPTkJ1dHRvbi5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgbmV3IENsaXBib2FyZChcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvcHlKU09OQnV0dG9uLnJlbmRlcmVkRWxlbWVudCxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAodHJpZ2dlcikgPT4geyByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5jYXJkLnRvSlNPTigpLCBudWxsLCA0KTsgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBUb29sIHBhbGV0dGUgcGFuZWxcclxuICAgICAgICBsZXQgdG9vbFBhbGV0dGVIb3N0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0b29sUGFsZXR0ZUhvc3QuY2xhc3NOYW1lID0gXCJhY2QtZG9ja2VkUGFuZVwiO1xyXG5cclxuICAgICAgICB0aGlzLl90b29sUGFsZXR0ZVRvb2xib3ggPSBuZXcgVG9vbGJveChcInRvb2xQYWxldHRlXCIsIFN0cmluZ3MudG9vbGJveGVzLnRvb2xQYWxldHRlLnRpdGxlKTtcclxuICAgICAgICB0aGlzLl90b29sUGFsZXR0ZVRvb2xib3guY29udGVudCA9IHRvb2xQYWxldHRlSG9zdDtcclxuXHJcbiAgICAgICAgbGV0IHRvb2xQYWxldHRlUGFuZWwgPSBuZXcgU2lkZVBhbmVsKFxyXG4gICAgICAgICAgICBcInRvb2xQYWxldHRlUGFuZWxcIixcclxuICAgICAgICAgICAgU2lkZVBhbmVsQWxpZ25tZW50LkxlZnQsXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGVmdENvbGxhcHNlZFBhbmVUYWJIb3N0XCIpKTtcclxuICAgICAgICB0b29sUGFsZXR0ZVBhbmVsLmFkZFRvb2xib3godGhpcy5fdG9vbFBhbGV0dGVUb29sYm94KTtcclxuICAgICAgICB0b29sUGFsZXR0ZVBhbmVsLmlzUmVzaXphYmxlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRvb2xQYWxldHRlUGFuZWwuYXR0YWNoVG8oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b29sUGFsZXR0ZVBhbmVsXCIpKTtcclxuXHJcbiAgICAgICAgLy8gSlNPTiBlZGl0b3JzIHBhbmVsXHJcbiAgICAgICAgdGhpcy5fY2FyZEVkaXRvclRvb2xib3ggPSBuZXcgVG9vbGJveChcImNhcmRFZGl0b3JcIiwgU3RyaW5ncy50b29sYm94ZXMuY2FyZEVkaXRvci50aXRsZSk7XHJcbiAgICAgICAgdGhpcy5fY2FyZEVkaXRvclRvb2xib3guY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5fY2FyZEVkaXRvclRvb2xib3guY29udGVudC5zdHlsZS5wYWRkaW5nID0gXCI4cHhcIjtcclxuICAgICAgICB0aGlzLl9jYXJkRWRpdG9yVG9vbGJveC5jb250ZW50LmlubmVyVGV4dCA9IFN0cmluZ3MubG9hZGluZ0VkaXRvcjtcclxuXHJcbiAgICAgICAgdGhpcy5fanNvbkVkaXRvcnNQYW5lbCA9IG5ldyBTaWRlUGFuZWwoXHJcbiAgICAgICAgICAgIFwianNvbkVkaXRvclBhbmVsXCIsXHJcbiAgICAgICAgICAgIFNpZGVQYW5lbEFsaWdubWVudC5Cb3R0b20sXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYm90dG9tQ29sbGFwc2VkUGFuZVRhYkhvc3RcIikpO1xyXG4gICAgICAgIHRoaXMuX2pzb25FZGl0b3JzUGFuZWwub25SZXNpemVkID0gKHNlbmRlcjogU2lkZVBhbmVsKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSnNvbkVkaXRvcnNMYXlvdXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fanNvbkVkaXRvcnNQYW5lbC5vblRvb2xib3hSZXNpemVkID0gKHNlbmRlcjogU2lkZVBhbmVsKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSnNvbkVkaXRvcnNMYXlvdXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fanNvbkVkaXRvcnNQYW5lbC5vblRvb2xib3hFeHBhbmRlZE9yQ29sbGFwc2VkID0gKHNlbmRlcjogU2lkZVBhbmVsKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSnNvbkVkaXRvcnNMYXlvdXQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2pzb25FZGl0b3JzUGFuZWwuYWRkVG9vbGJveCh0aGlzLl9jYXJkRWRpdG9yVG9vbGJveCk7XHJcblxyXG4gICAgICAgIGlmIChTaGFyZWQuR2xvYmFsU2V0dGluZ3MuZW5hYmxlRGF0YUJpbmRpbmdTdXBwb3J0ICYmIFNoYXJlZC5HbG9iYWxTZXR0aW5ncy5zaG93U2FtcGxlRGF0YUVkaXRvclRvb2xib3gpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2FtcGxlRGF0YUVkaXRvclRvb2xib3ggPSBuZXcgVG9vbGJveChcInNhbXBsZURhdGFFZGl0b3JcIiwgU3RyaW5ncy50b29sYm94ZXMuc2FtcGxlRGF0YUVkaXRvci50aXRsZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NhbXBsZURhdGFFZGl0b3JUb29sYm94LmNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICB0aGlzLl9zYW1wbGVEYXRhRWRpdG9yVG9vbGJveC5jb250ZW50LnN0eWxlLnBhZGRpbmcgPSBcIjhweFwiO1xyXG4gICAgICAgICAgICB0aGlzLl9zYW1wbGVEYXRhRWRpdG9yVG9vbGJveC5jb250ZW50LmlubmVyVGV4dCA9IFN0cmluZ3MubG9hZGluZ0VkaXRvcjtcclxuICAgICAgICAgICAgdGhpcy5fc2FtcGxlRGF0YUVkaXRvclRvb2xib3guY29tbWFuZHMgPSBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiQ29weSB0aGUgc3RydWN0dXJlIG9mIHRoaXMgZGF0YSBpbnRvIHRoZSBEYXRhIFN0cnVjdHVyZSB0b29sYm94XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsYXNzOiBcImFjZC1pY29uLWRhdGFTdHJ1Y3R1cmVcIixcclxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlOiAoc2VuZGVyOiBJVG9vbGJveENvbW1hbmQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhU3RydWN0dXJlID0gRmllbGREZWZpbml0aW9uLmNyZWF0ZShKU09OLnBhcnNlKHRoaXMuZ2V0Q3VycmVudFNhbXBsZURhdGFFZGl0b3JQYXlsb2FkKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9qc29uRWRpdG9yc1BhbmVsLmFkZFRvb2xib3godGhpcy5fc2FtcGxlRGF0YUVkaXRvclRvb2xib3gpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fanNvbkVkaXRvcnNQYW5lbC5hdHRhY2hUbyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImpzb25FZGl0b3JQYW5lbFwiKSk7XHJcblxyXG4gICAgICAgIC8vIFByb3BlcnR5IHNoZWV0IHBhbmVsXHJcbiAgICAgICAgbGV0IHByb3BlcnR5U2hlZXRIb3N0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBwcm9wZXJ0eVNoZWV0SG9zdC5jbGFzc05hbWUgPSBcImFjZC1wcm9wZXJ0eVNoZWV0LWhvc3RcIjtcclxuXHJcbiAgICAgICAgdGhpcy5fcHJvcGVydHlTaGVldFRvb2xib3ggPSBuZXcgVG9vbGJveChcInByb3BlcnR5U2hlZXRcIiwgU3RyaW5ncy50b29sYm94ZXMucHJvcGVydHlTaGVldC50aXRsZSk7XHJcbiAgICAgICAgdGhpcy5fcHJvcGVydHlTaGVldFRvb2xib3guY29udGVudCA9IHByb3BlcnR5U2hlZXRIb3N0O1xyXG5cclxuICAgICAgICBsZXQgcHJvcGVydHlTaGVldFBhbmVsID0gbmV3IFNpZGVQYW5lbChcclxuICAgICAgICAgICAgXCJwcm9wZXJ0eVNoZWV0UGFuZWxcIixcclxuICAgICAgICAgICAgU2lkZVBhbmVsQWxpZ25tZW50LlJpZ2h0LFxyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJpZ2h0Q29sbGFwc2VkUGFuZVRhYkhvc3RcIikpO1xyXG4gICAgICAgIHByb3BlcnR5U2hlZXRQYW5lbC5hZGRUb29sYm94KHRoaXMuX3Byb3BlcnR5U2hlZXRUb29sYm94KTtcclxuICAgICAgICBwcm9wZXJ0eVNoZWV0UGFuZWwub25SZXNpemVkID0gKHNlbmRlcjogU2lkZVBhbmVsKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVMYXlvdXRVcGRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3BlcnR5U2hlZXRQYW5lbC5hdHRhY2hUbyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb3BlcnR5U2hlZXRQYW5lbFwiKSk7XHJcblxyXG4gICAgICAgIC8vIFRyZWUgdmlldyBwYW5lbFxyXG4gICAgICAgIGxldCB0cmVlVmlld0hvc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRyZWVWaWV3SG9zdC5jbGFzc05hbWUgPSBcImFjZC10cmVlVmlldy1ob3N0XCI7XHJcblxyXG4gICAgICAgIHRoaXMuX3RyZWVWaWV3VG9vbGJveCA9IG5ldyBUb29sYm94KFwidHJlZVZpZXdcIiwgU3RyaW5ncy50b29sYm94ZXMuY2FyZFN0cnVjdHVyZS50aXRsZSk7XHJcbiAgICAgICAgdGhpcy5fdHJlZVZpZXdUb29sYm94LmNvbnRlbnQgPSB0cmVlVmlld0hvc3Q7XHJcblxyXG4gICAgICAgIGxldCB0cmVlVmlld1BhbmVsID0gbmV3IFNpZGVQYW5lbChcclxuICAgICAgICAgICAgXCJ0cmVlVmlld1BhbmVsXCIsXHJcbiAgICAgICAgICAgIFNpZGVQYW5lbEFsaWdubWVudC5SaWdodCxcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyaWdodENvbGxhcHNlZFBhbmVUYWJIb3N0XCIpKTtcclxuICAgICAgICB0cmVlVmlld1BhbmVsLmFkZFRvb2xib3godGhpcy5fdHJlZVZpZXdUb29sYm94KTtcclxuICAgICAgICB0cmVlVmlld1BhbmVsLm9uUmVzaXplZCA9IChzZW5kZXI6IFNpZGVQYW5lbCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlTGF5b3V0VXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoU2hhcmVkLkdsb2JhbFNldHRpbmdzLmVuYWJsZURhdGFCaW5kaW5nU3VwcG9ydCAmJiBTaGFyZWQuR2xvYmFsU2V0dGluZ3Muc2hvd0RhdGFTdHJ1Y3R1cmVUb29sYm94KSB7XHJcbiAgICAgICAgICAgIGxldCBkYXRhRXhwbG9yZXJIb3N0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgZGF0YUV4cGxvcmVySG9zdC5jbGFzc05hbWUgPSBcImFjZC10cmVlVmlldy1ob3N0XCI7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9kYXRhVG9vbGJveCA9IG5ldyBUb29sYm94KFwiZGF0YVwiLCBTdHJpbmdzLnRvb2xib3hlcy5kYXRhU3RydWN0dXJlLnRpdGxlKTtcclxuICAgICAgICAgICAgdGhpcy5fZGF0YVRvb2xib3guY29udGVudCA9IGRhdGFFeHBsb3Jlckhvc3Q7XHJcblxyXG4gICAgICAgICAgICB0cmVlVmlld1BhbmVsLmFkZFRvb2xib3godGhpcy5fZGF0YVRvb2xib3gpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJlZVZpZXdQYW5lbC5hdHRhY2hUbyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRyZWVWaWV3UGFuZWxcIikpO1xyXG5cclxuICAgICAgICB0aGlzLl9kZXNpZ25lckhvc3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNpZ25lckhvc3RcIik7XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgKGU6IFBvaW50ZXJFdmVudCkgPT4geyB0aGlzLmhhbmRsZVBvaW50ZXJNb3ZlKGUpOyB9KTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoKSA9PiB7IHRoaXMuc2NoZWR1bGVMYXlvdXRVcGRhdGUoKTsgfSk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgKGU6IFBvaW50ZXJFdmVudCkgPT4geyB0aGlzLmhhbmRsZVBvaW50ZXJVcChlKTsgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICB0aGlzLnJlY3JlYXRlRGVzaWduZXJTdXJmYWNlKCk7XHJcblxyXG4gICAgICAgIGxldCBjYXJkID0gbmV3IEFkYXB0aXZlLkFkYXB0aXZlQ2FyZCgpO1xyXG4gICAgICAgIGNhcmQub25JbWFnZUxvYWRlZCA9IChpbWFnZTogQWRhcHRpdmUuSW1hZ2UpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZUxheW91dFVwZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jYXJkID0gY2FyZDtcclxuICAgIH1cclxuXHJcbiAgICB1bmRvKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNhblVuZG8pIHtcclxuICAgICAgICAgICAgdGhpcy5fdW5kb1N0YWNrSW5kZXgtLTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjYXJkID0gdGhpcy5fdW5kb1N0YWNrW3RoaXMuX3VuZG9TdGFja0luZGV4XTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0Q2FyZFBheWxvYWQoY2FyZCwgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy51cGRhdGVUb29sYmFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlZG8oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3VuZG9TdGFja0luZGV4IDwgdGhpcy5fdW5kb1N0YWNrLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgdGhpcy5fdW5kb1N0YWNrSW5kZXgrKztcclxuXHJcbiAgICAgICAgICAgIGxldCBjYXJkID0gdGhpcy5fdW5kb1N0YWNrW3RoaXMuX3VuZG9TdGFja0luZGV4XTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0Q2FyZFBheWxvYWQoY2FyZCwgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy51cGRhdGVUb29sYmFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5ld0NhcmQoKSB7XHJcbiAgICAgICAgbGV0IGNhcmQgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiQWRhcHRpdmVDYXJkXCIsXHJcbiAgICAgICAgICAgIHZlcnNpb246IFwiMS4wXCIsXHJcbiAgICAgICAgICAgIGJvZHk6IFtcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXRDYXJkUGF5bG9hZChjYXJkLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRDYXJkKHBheWxvYWQ6IG9iamVjdCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJldmVudEpzb25VcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLnByZXZlbnRDYXJkVXBkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlc2lnbmVyU3VyZmFjZS5zZXRDYXJkUGF5bG9hZEFzT2JqZWN0KHBheWxvYWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZlbnRKc29uVXBkYXRlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUpzb25Gcm9tQ2FyZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENhcmQoKTogb2JqZWN0IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZXNpZ25lclN1cmZhY2UuY2FyZC50b0pTT04oKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNhcmRQYXlsb2FkQ2hhbmdlZDogKGRlc2lnbmVyOiBDYXJkRGVzaWduZXIpID0+IHZvaWQ7XHJcbiAgICBvbkFjdGl2ZUhvc3RDb250YWluZXJDaGFuZ2VkOiAoZGVzaWduZXI6IENhcmREZXNpZ25lcikgPT4gdm9pZDtcclxuXHJcbiAgICBnZXQgY3VycmVudFRhcmdldFZlcnNpb24oKTogU2hhcmVkLlRhcmdldFZlcnNpb24ge1xyXG4gICAgICAgIGlmICh0aGlzLl92ZXJzaW9uQ2hvaWNlUGlja2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTaGFyZWQuU3VwcG9ydGVkVGFyZ2V0VmVyc2lvbnNbcGFyc2VJbnQodGhpcy5fdmVyc2lvbkNob2ljZVBpY2tlci52YWx1ZSldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNoYXJlZC5WZXJzaW9ucy5sYXRlc3Q7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBkYXRhU3RydWN0dXJlKCk6IEZpZWxkRGVmaW5pdGlvbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGFTdHJ1Y3R1cmU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGRhdGFTdHJ1Y3R1cmUodmFsdWU6IEZpZWxkRGVmaW5pdGlvbikge1xyXG4gICAgICAgIHRoaXMuX2RhdGFTdHJ1Y3R1cmUgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5idWlsZERhdGFFeHBsb3JlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzYW1wbGVEYXRhKCk6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NhbXBsZURhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHNhbXBsZURhdGEodmFsdWU6IGFueSkge1xyXG4gICAgICAgIHRoaXMuX3NhbXBsZURhdGEgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTYW1wbGVEYXRhUGF5bG9hZCh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFjdGl2ZUhvc3RDb250YWluZXIoKTogSG9zdENvbnRhaW5lciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGl2ZUhvc3RDb250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGFjdGl2ZUhvc3RDb250YWluZXIodmFsdWU6IEhvc3RDb250YWluZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5fYWN0aXZlSG9zdENvbnRhaW5lciAhPT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fYWN0aXZlSG9zdENvbnRhaW5lciA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVIb3N0Q29udGFpbmVyQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgY2FuVW5kbygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdW5kb1N0YWNrSW5kZXggPj0gMTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY2FuUmVkbygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdW5kb1N0YWNrSW5kZXggPCB0aGlzLl91bmRvU3RhY2subGVuZ3RoIC0gMTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY2FyZCgpOiBBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBjYXJkKHZhbHVlOiBBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQpIHtcclxuICAgICAgICBpZiAodGhpcy5fY2FyZCAhPSB2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fY2FyZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FyZC5kZXNpZ25Nb2RlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2NhcmQgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9jYXJkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jYXJkLmRlc2lnbk1vZGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FyZC5ob3N0Q29uZmlnID0gdGhpcy5hY3RpdmVIb3N0Q29udGFpbmVyLmdldEhvc3RDb25maWcoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5yZWNyZWF0ZURlc2lnbmVyU3VyZmFjZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNhcmRGcm9tSnNvbih0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGRlc2lnbmVyU3VyZmFjZSgpOiBEZXNpZ25lci5DYXJkRGVzaWduZXJTdXJmYWNlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVzaWduZXJTdXJmYWNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB0cmVlVmlld1Rvb2xib3goKTogVG9vbGJveCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyZWVWaWV3VG9vbGJveDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcHJvcGVydHlTaGVldFRvb2xib3goKTogVG9vbGJveCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb3BlcnR5U2hlZXRUb29sYm94O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBqc29uRWRpdG9yVG9vbGJveCgpOiBUb29sYm94IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2FyZEVkaXRvclRvb2xib3g7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHRvb2xQYWxldHRlVG9vbGJveCgpOiBUb29sYm94IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdG9vbFBhbGV0dGVUb29sYm94O1xyXG5cdH1cclxuXHJcbiAgICBnZXQgZGF0YVRvb2xib3goKTogVG9vbGJveCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGFUb29sYm94O1xyXG5cdH1cclxuXHJcblx0Z2V0IGFzc2V0UGF0aCgpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHRoaXMuX2Fzc2V0UGF0aDtcclxuXHR9XHJcblxyXG5cdHNldCBhc3NldFBhdGgodmFsdWU6IHN0cmluZykge1xyXG5cdFx0dGhpcy5fYXNzZXRQYXRoID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGN1c3RvbVBhbGV0dGVJdGVtcygpOiBDdXN0b21QYWxldHRlSXRlbVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VzdG9tUGVsZXR0ZUl0ZW1zO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBjdXN0b21QYWxldHRlSXRlbXModmFsdWU6IEN1c3RvbVBhbGV0dGVJdGVtW10pIHtcclxuICAgICAgICB0aGlzLl9jdXN0b21QZWxldHRlSXRlbXMgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5idWlsZFBhbGV0dGUoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IG1vZHVsZSBDYXJkRGVzaWduZXIge1xyXG4gICAgZXhwb3J0IGNsYXNzIFRvb2xiYXJDb21tYW5kcyB7XHJcbiAgICAgICAgc3RhdGljIEZ1bGxTY3JlZW4gPSBcIl9fZnVsbFNjcmVlbkJ1dHRvblwiO1xyXG4gICAgICAgIHN0YXRpYyBPcGVuUGF5bG9hZCA9IFwiX19vcGVuUGF5bG9hZFwiO1xyXG4gICAgICAgIHN0YXRpYyBIb3N0QXBwUGlja2VyID0gXCJfX2hvc3RBcHBQaWNrZXJcIjtcclxuICAgICAgICBzdGF0aWMgVmVyc2lvblBpY2tlciA9IFwiX192ZXJzaW9uUGlja2VyXCI7XHJcbiAgICAgICAgc3RhdGljIFVuZG8gPSBcIl9fdW5kb0J1dHRvblwiO1xyXG4gICAgICAgIHN0YXRpYyBSZWRvID0gXCJfX3JlZG9CdXR0b25cIjtcclxuICAgICAgICBzdGF0aWMgTmV3Q2FyZCA9IFwiX19uZXdDYXJkQnV0dG9uXCI7XHJcbiAgICAgICAgc3RhdGljIENvcHlKU09OID0gXCJfX2NvcHlKc29uQnV0dG9uXCI7XHJcbiAgICAgICAgc3RhdGljIFRvZ2dsZVByZXZpZXcgPSBcIl9fdG9nZ2xlUHJldmlld0J1dHRvblwiO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIEFkYXB0aXZlIGZyb20gXCJhZGFwdGl2ZWNhcmRzXCI7XHJcbmltcG9ydCB7IERvd25sb2FkZXIgfSBmcm9tIFwiLi9kb3dubG9hZGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2F0YWxvZ3VlRW50cnkge1xyXG4gICAgcHJpdmF0ZSBfY2FyZFBheWxvYWQ6IHN0cmluZztcclxuICAgIHByaXZhdGUgX2NhcmRQYXlsb2FkRG93bmxvYWRlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfc2FtcGxlRGF0YTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfc2FtcGxlRGF0YURvd25sb2FkZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIGRvd25sb2FkQ29tcGxldGVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9jYXJkUGF5bG9hZERvd25sb2FkZWQgJiYgdGhpcy5fc2FtcGxlRGF0YURvd25sb2FkZWQgJiYgdGhpcy5vbkRvd25sb2FkZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkRvd25sb2FkZWQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNhbXBsZURhdGFVcmw/OiBzdHJpbmc7XHJcblxyXG4gICAgb25Eb3dubG9hZGVkOiAoc2VuZGVyOiBDYXRhbG9ndWVFbnRyeSkgPT4gdm9pZCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgZGlzcGxheU5hbWU6IHN0cmluZywgcmVhZG9ubHkgY2FyZFBheWxvYWRVcmw6IHN0cmluZywgc2FtcGxlRGF0YVVybD86IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuc2FtcGxlRGF0YVVybCA9IHNhbXBsZURhdGFVcmw7XHJcbiAgICB9XHJcblxyXG4gICAgZG93bmxvYWQoKSB7XHJcbiAgICAgICAgbGV0IHBheWxvYWREb3dubG9hZGVyID0gbmV3IERvd25sb2FkZXIodGhpcy5jYXJkUGF5bG9hZFVybCk7XHJcbiAgICAgICAgcGF5bG9hZERvd25sb2FkZXIub25TdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9jYXJkUGF5bG9hZCA9IHBheWxvYWREb3dubG9hZGVyLmRhdGE7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhcmRQYXlsb2FkRG93bmxvYWRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRvd25sb2FkQ29tcGxldGVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBheWxvYWREb3dubG9hZGVyLm9uRXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhcmRQYXlsb2FkRG93bmxvYWRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRvd25sb2FkQ29tcGxldGVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBheWxvYWREb3dubG9hZGVyLmRvd25sb2FkKCk7XHJcblxyXG4gICAgICAgIGlmICghQWRhcHRpdmUuaXNOdWxsT3JFbXB0eSh0aGlzLnNhbXBsZURhdGFVcmwpKSB7XHJcbiAgICAgICAgICAgIGxldCBzYW1wbGVEYXRhRG93bmxvYWRlciA9IG5ldyBEb3dubG9hZGVyKHRoaXMuc2FtcGxlRGF0YVVybCk7XHJcbiAgICAgICAgICAgIHNhbXBsZURhdGFEb3dubG9hZGVyLm9uU3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NhbXBsZURhdGEgPSBzYW1wbGVEYXRhRG93bmxvYWRlci5kYXRhO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2FtcGxlRGF0YURvd25sb2FkZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZG93bmxvYWRDb21wbGV0ZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzYW1wbGVEYXRhRG93bmxvYWRlci5vbkVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2FtcGxlRGF0YURvd25sb2FkZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZG93bmxvYWRDb21wbGV0ZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzYW1wbGVEYXRhRG93bmxvYWRlci5kb3dubG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc2FtcGxlRGF0YURvd25sb2FkZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kb3dubG9hZENvbXBsZXRlZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgY2FyZFBheWxvYWQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2FyZFBheWxvYWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNhbXBsZURhdGEoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2FtcGxlRGF0YTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ2F0YWxvZ3VlKGlucHV0OiBhbnkpOiBDYXRhbG9ndWVFbnRyeVtdIHtcclxuICAgIGxldCBlbnRyaWVzOiBhbnlbXSA9IG51bGw7XHJcblxyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XHJcbiAgICAgICAgZW50cmllcyA9IGlucHV0O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoaW5wdXRbXCJlbnRyaWVzXCJdKSA/IGlucHV0W1wiZW50cmllZFwiXSA6IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHJlc3VsdDogQ2F0YWxvZ3VlRW50cnlbXSA9IFtdO1xyXG5cclxuICAgIGlmIChlbnRyaWVzICE9IG51bGwpIHtcclxuICAgICAgICBmb3IgKGxldCBlbnRyeSBvZiBlbnRyaWVzKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgIGxldCBkaXNwbGF5TmFtZSA9IEFkYXB0aXZlLmdldFN0cmluZ1ZhbHVlKGVudHJ5W1wiZGlzcGxheU5hbWVcIl0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNhcmRQYXlsb2FkVXJsID0gQWRhcHRpdmUuZ2V0U3RyaW5nVmFsdWUoZW50cnlbXCJjYXJkUGF5bG9hZFVybFwiXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFBZGFwdGl2ZS5pc051bGxPckVtcHR5KGRpc3BsYXlOYW1lKSAmJiAhQWRhcHRpdmUuaXNOdWxsT3JFbXB0eShjYXJkUGF5bG9hZFVybCkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBDYXRhbG9ndWVFbnRyeShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZFBheWxvYWRVcmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGFwdGl2ZS5nZXRTdHJpbmdWYWx1ZShlbnRyeVtcImRhdGFTYW1wbGVVcmxcIl0pKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5leHBvcnQgY29uc3Qgb3RoZXJUZXN0UGF5bG9hZDogc3RyaW5nID0gYHtcclxuXHRcIiRzY2hlbWFcIjogXCJodHRwOi8vYWRhcHRpdmVjYXJkcy5pby9zY2hlbWFzL2FkYXB0aXZlLWNhcmQuanNvblwiLFxyXG5cdFwidHlwZVwiOiBcIkFkYXB0aXZlQ2FyZFwiLFxyXG5cdFwidmVyc2lvblwiOiBcIjEuMFwiLFxyXG5cdFwiYm9keVwiOiBbXHJcblx0XHR7XHJcblx0XHRcdFwidHlwZVwiOiBcIkFjdGlvblNldFwiLFxyXG5cdFx0XHRcImFjdGlvbnNcIjogW1xyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdFwidHlwZVwiOiBcIkFjdGlvbi5TaG93Q2FyZFwiLFxyXG5cdFx0XHRcdFx0XCJ0aXRsZVwiOiBcIlNldCBkdWUgZGF0ZVwiLFxyXG5cdFx0XHRcdFx0XCJjYXJkXCI6IHtcclxuXHRcdFx0XHRcdFx0XCJ0eXBlXCI6IFwiQWRhcHRpdmVDYXJkXCIsXHJcblx0XHRcdFx0XHRcdFwiYm9keVwiOiBbXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XCJ0eXBlXCI6IFwiSW5wdXQuRGF0ZVwiLFxyXG5cdFx0XHRcdFx0XHRcdFx0XCJpZFwiOiBcImR1ZURhdGVcIixcclxuXHRcdFx0XHRcdFx0XHRcdFwidGl0bGVcIjogXCJTZWxlY3QgZHVlIGRhdGVcIlxyXG5cdFx0XHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XCJ0eXBlXCI6IFwiSW5wdXQuVGV4dFwiLFxyXG5cdFx0XHRcdFx0XHRcdFx0XCJpZFwiOiBcImNvbW1lbnRcIixcclxuXHRcdFx0XHRcdFx0XHRcdFwiaXNNdWx0aWxpbmVcIjogdHJ1ZSxcclxuXHRcdFx0XHRcdFx0XHRcdFwicGxhY2Vob2xkZXJcIjogXCJBZGQgYSBjb21tZW50XCJcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdF0sXHJcblx0XHRcdFx0XHRcdFwiYWN0aW9uc1wiOiBbXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0XCJ0eXBlXCI6IFwiQWN0aW9uLk9wZW5VcmxcIixcclxuXHRcdFx0XHRcdFx0XHRcdFwidGl0bGVcIjogXCJPS1wiLFxyXG5cdFx0XHRcdFx0XHRcdFx0XCJ1cmxcIjogXCJodHRwczovL2FkYXB0aXZlY2FyZHMuaW9cIlxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XCJ0eXBlXCI6IFwiQWN0aW9uLk9wZW5VcmxcIixcclxuXHRcdFx0XHRcdFwidGl0bGVcIjogXCJWaWV3XCIsXHJcblx0XHRcdFx0XHRcInVybFwiOiBcImh0dHBzOi8vYWRhcHRpdmVjYXJkcy5pb1wiXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRdXHJcblx0XHR9XHJcblx0XVxyXG59YDtcclxuXHJcbmV4cG9ydCBjb25zdCBkZWZhdWx0UGF5bG9hZDogc3RyaW5nID0gYHtcclxuICAgIFwidHlwZVwiOiBcIkFkYXB0aXZlQ2FyZFwiLFxyXG4gICAgXCJib2R5XCI6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFwidHlwZVwiOiBcIlRleHRCbG9ja1wiLFxyXG4gICAgICAgICAgICBcInNpemVcIjogXCJNZWRpdW1cIixcclxuICAgICAgICAgICAgXCJ3ZWlnaHRcIjogXCJCb2xkZXJcIixcclxuICAgICAgICAgICAgXCJ0ZXh0XCI6IFwiUHVibGlzaCBBZGFwdGl2ZSBDYXJkIHNjaGVtYVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFwidHlwZVwiOiBcIkNvbHVtblNldFwiLFxyXG4gICAgICAgICAgICBcImNvbHVtbnNcIjogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcIkNvbHVtblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiaXRlbXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJJbWFnZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzdHlsZVwiOiBcIlBlcnNvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1cmxcIjogXCJodHRwczovL3Bicy50d2ltZy5jb20vcHJvZmlsZV9pbWFnZXMvMzY0Nzk0MzIxNS9kN2YxMjgzMGIzYzE3YTVhOWU0YWZjYzM3MGUzYTM3ZV80MDB4NDAwLmpwZWdcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2l6ZVwiOiBcIlNtYWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ3aWR0aFwiOiBcImF1dG9cIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJDb2x1bW5cIixcclxuICAgICAgICAgICAgICAgICAgICBcIml0ZW1zXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiVGV4dEJsb2NrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndlaWdodFwiOiBcIkJvbGRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0ZXh0XCI6IFwiTWF0dCBIaWRpbmdlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3cmFwXCI6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiVGV4dEJsb2NrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNwYWNpbmdcIjogXCJOb25lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRleHRcIjogXCJDcmVhdGVkIHt7REFURSgyMDE3LTAyLTE0VDA2OjA4OjM5WixTSE9SVCl9fVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpc1N1YnRsZVwiOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3cmFwXCI6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ3aWR0aFwiOiBcInN0cmV0Y2hcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFwidHlwZVwiOiBcIlRleHRCbG9ja1wiLFxyXG4gICAgICAgICAgICBcInRleHRcIjogXCJOb3cgdGhhdCB3ZSBoYXZlIGRlZmluZWQgdGhlIG1haW4gcnVsZXMgYW5kIGZlYXR1cmVzIG9mIHRoZSBmb3JtYXQsIHdlIG5lZWQgdG8gcHJvZHVjZSBhIHNjaGVtYSBhbmQgcHVibGlzaCBpdCB0byBHaXRIdWIuIFRoZSBzY2hlbWEgd2lsbCBiZSB0aGUgc3RhcnRpbmcgcG9pbnQgb2Ygb3VyIHJlZmVyZW5jZSBkb2N1bWVudGF0aW9uLlwiLFxyXG4gICAgICAgICAgICBcIndyYXBcIjogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcInR5cGVcIjogXCJGYWN0U2V0XCIsXHJcbiAgICAgICAgICAgIFwiZmFjdHNcIjogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwidGl0bGVcIjogXCJCb2FyZDpcIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlXCI6IFwiQWRhcHRpdmUgQ2FyZFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwidGl0bGVcIjogXCJMaXN0OlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVcIjogXCJCYWNrbG9nXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0aXRsZVwiOiBcIkFzc2lnbmVkIHRvOlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVcIjogXCJNYXR0IEhpZGluZ2VyXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0aXRsZVwiOiBcIkR1ZSBkYXRlOlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVcIjogXCJOb3Qgc2V0XCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH1cclxuICAgIF0sXHJcbiAgICBcImFjdGlvbnNcIjogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwiQWN0aW9uLlNob3dDYXJkXCIsXHJcbiAgICAgICAgICAgIFwidGl0bGVcIjogXCJTZXQgZHVlIGRhdGVcIixcclxuICAgICAgICAgICAgXCJjYXJkXCI6IHtcclxuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcIkFkYXB0aXZlQ2FyZFwiLFxyXG4gICAgICAgICAgICAgICAgXCJib2R5XCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcIklucHV0LkRhdGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImR1ZURhdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJJbnB1dC5UZXh0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJjb21tZW50XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicGxhY2Vob2xkZXJcIjogXCJBZGQgYSBjb21tZW50XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaXNNdWx0aWxpbmVcIjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICBcImFjdGlvbnNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiQWN0aW9uLk9wZW5VcmxcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0aXRsZVwiOiBcIk9LXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidXJsXCI6IFwiaHR0cDovL2FkYXB0aXZlY2FyZHMuaW9cIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICBcIiRzY2hlbWFcIjogXCJodHRwOi8vYWRhcHRpdmVjYXJkcy5pby9zY2hlbWFzL2FkYXB0aXZlLWNhcmQuanNvblwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwiQWN0aW9uLk9wZW5VcmxcIixcclxuICAgICAgICAgICAgXCJ0aXRsZVwiOiBcIlZpZXdcIixcclxuICAgICAgICAgICAgXCJ1cmxcIjogXCJodHRwOi8vYWRhcHRpdmVjYXJkcy5pb1wiXHJcbiAgICAgICAgfVxyXG4gICAgXSxcclxuICAgIFwiJHNjaGVtYVwiOiBcImh0dHA6Ly9hZGFwdGl2ZWNhcmRzLmlvL3NjaGVtYXMvYWRhcHRpdmUtY2FyZC5qc29uXCIsXHJcbiAgICBcInZlcnNpb25cIjogXCIxLjBcIlxyXG59YDtcclxuXHJcbmV4cG9ydCBjb25zdCBkZWZhdWx0VGVtcGxhdGVQYXlsb2FkOiBzdHJpbmcgPSBge1xyXG4gICAgXCJ0eXBlXCI6IFwiQWRhcHRpdmVDYXJkXCIsXHJcbiAgICBcImJvZHlcIjogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwiQ29udGFpbmVyXCIsXHJcbiAgICAgICAgICAgIFwiaXRlbXNcIjogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcIlRleHRCbG9ja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidGV4dFwiOiBcIlRoaXMgZXhhbXBsZSB1c2VzIFtBZGFwdGl2ZSBDYXJkIFRlbXBsYXRpbmddKGh0dHBzOi8vZG9jcy5taWNyb3NvZnQuY29tL2VuLXVzL2FkYXB0aXZlLWNhcmRzL3RlbXBsYXRpbmcvKSAqKFByZXZpZXcpKlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwic2l6ZVwiOiBcIk1lZGl1bVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwid3JhcFwiOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcIlRleHRCbG9ja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidGV4dFwiOiBcIkNsaWNrIHRoZSAqKlByZXZpZXcgbW9kZSoqIHRvb2xiYXIgYnV0dG9uIHRvIHNlZSB0aGUgY2FyZCBib3VuZCB0byB0aGUgKipTYW1wbGUgRGF0YSoqIGluIHRoZSBsb3dlci1yaWdodC4gU2FtcGxlIERhdGEgaGVscHMgZGVzaWduIHlvdXIgY2FyZCBieSBzaW11bGF0aW5nIHRoZSByZWFsIGRhdGEuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ3cmFwXCI6IHRydWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiVGV4dEJsb2NrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0ZXh0XCI6IFwiV2hlbiB5b3UncmUgcmVhZHkgdG8gcG9wdWxhdGUgaXQgd2l0aCByZWFsIGRhdGEsIHVzZSB0aGUgQWRhcHRpdmUgQ2FyZCBbdGVtcGxhdGluZyBTREtzXShodHRwczovL2RvY3MubWljcm9zb2Z0LmNvbS9lbi11cy9hZGFwdGl2ZS1jYXJkcy90ZW1wbGF0aW5nL3NkaykuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ3cmFwXCI6IHRydWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgXCJzdHlsZVwiOiBcImdvb2RcIixcclxuICAgICAgICAgICAgXCJibGVlZFwiOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFwidHlwZVwiOiBcIlRleHRCbG9ja1wiLFxyXG4gICAgICAgICAgICBcInNpemVcIjogXCJNZWRpdW1cIixcclxuICAgICAgICAgICAgXCJ3ZWlnaHRcIjogXCJCb2xkZXJcIixcclxuICAgICAgICAgICAgXCJ0ZXh0XCI6IFwie3RpdGxlfVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFwidHlwZVwiOiBcIkNvbHVtblNldFwiLFxyXG4gICAgICAgICAgICBcImNvbHVtbnNcIjogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcIkNvbHVtblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiaXRlbXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJJbWFnZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzdHlsZVwiOiBcIlBlcnNvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1cmxcIjogXCJ7Y3JlYXRvci5wcm9maWxlSW1hZ2V9XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNpemVcIjogXCJTbWFsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgIFwid2lkdGhcIjogXCJhdXRvXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiQ29sdW1uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJpdGVtc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcIlRleHRCbG9ja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3ZWlnaHRcIjogXCJCb2xkZXJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidGV4dFwiOiBcIntjcmVhdG9yLm5hbWV9XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndyYXBcIjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJUZXh0QmxvY2tcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3BhY2luZ1wiOiBcIk5vbmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidGV4dFwiOiBcIkNyZWF0ZWQge3tEQVRFKHtjcmVhdGVkVXRjfSxTSE9SVCl9fVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpc1N1YnRsZVwiOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3cmFwXCI6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ3aWR0aFwiOiBcInN0cmV0Y2hcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFwidHlwZVwiOiBcIlRleHRCbG9ja1wiLFxyXG4gICAgICAgICAgICBcInRleHRcIjogXCJ7ZGVzY3JpcHRpb259XCIsXHJcbiAgICAgICAgICAgIFwid3JhcFwiOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFwidHlwZVwiOiBcIkZhY3RTZXRcIixcclxuICAgICAgICAgICAgXCJmYWN0c1wiOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCIkZGF0YVwiOiBcIntwcm9wZXJ0aWVzfVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidGl0bGVcIjogXCJ7a2V5fTpcIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlXCI6IFwie3ZhbHVlfVwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9XHJcbiAgICBdLFxyXG4gICAgXCJhY3Rpb25zXCI6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFwidHlwZVwiOiBcIkFjdGlvbi5TaG93Q2FyZFwiLFxyXG4gICAgICAgICAgICBcInRpdGxlXCI6IFwiU2V0IGR1ZSBkYXRlXCIsXHJcbiAgICAgICAgICAgIFwiY2FyZFwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJBZGFwdGl2ZUNhcmRcIixcclxuICAgICAgICAgICAgICAgIFwiYm9keVwiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJJbnB1dC5EYXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJkdWVEYXRlXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiSW5wdXQuVGV4dFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiY29tbWVudFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInBsYWNlaG9sZGVyXCI6IFwiQWRkIGEgY29tbWVudFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlzTXVsdGlsaW5lXCI6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgXCJhY3Rpb25zXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcIkFjdGlvbi5TdWJtaXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0aXRsZVwiOiBcIk9LXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgXCIkc2NoZW1hXCI6IFwiaHR0cDovL2FkYXB0aXZlY2FyZHMuaW8vc2NoZW1hcy9hZGFwdGl2ZS1jYXJkLmpzb25cIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFwidHlwZVwiOiBcIkFjdGlvbi5PcGVuVXJsXCIsXHJcbiAgICAgICAgICAgIFwidGl0bGVcIjogXCJWaWV3XCIsXHJcbiAgICAgICAgICAgIFwidXJsXCI6IFwie3ZpZXdVcmx9XCJcclxuICAgICAgICB9XHJcbiAgICBdLFxyXG4gICAgXCIkc2NoZW1hXCI6IFwiaHR0cDovL2FkYXB0aXZlY2FyZHMuaW8vc2NoZW1hcy9hZGFwdGl2ZS1jYXJkLmpzb25cIixcclxuICAgIFwidmVyc2lvblwiOiBcIjEuMFwiXHJcbn1gO1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlZmF1bHREYXRhUGF5bG9hZDogc3RyaW5nID0gYHtcclxuICAgIFwidGl0bGVcIjogXCJQdWJsaXNoIEFkYXB0aXZlIENhcmQgU2NoZW1hXCIsXHJcbiAgICBcImRlc2NyaXB0aW9uXCI6IFwiTm93IHRoYXQgd2UgaGF2ZSBkZWZpbmVkIHRoZSBtYWluIHJ1bGVzIGFuZCBmZWF0dXJlcyBvZiB0aGUgZm9ybWF0LCB3ZSBuZWVkIHRvIHByb2R1Y2UgYSBzY2hlbWEgYW5kIHB1Ymxpc2ggaXQgdG8gR2l0SHViLiBUaGUgc2NoZW1hIHdpbGwgYmUgdGhlIHN0YXJ0aW5nIHBvaW50IG9mIG91ciByZWZlcmVuY2UgZG9jdW1lbnRhdGlvbi5cIixcclxuICAgIFwiY3JlYXRvclwiOiB7XHJcbiAgICAgICAgXCJuYW1lXCI6IFwiTWF0dCBIaWRpbmdlclwiLFxyXG4gICAgICAgIFwicHJvZmlsZUltYWdlXCI6IFwiaHR0cHM6Ly9wYnMudHdpbWcuY29tL3Byb2ZpbGVfaW1hZ2VzLzM2NDc5NDMyMTUvZDdmMTI4MzBiM2MxN2E1YTllNGFmY2MzNzBlM2EzN2VfNDAweDQwMC5qcGVnXCJcclxuICAgIH0sXHJcbiAgICBcImNyZWF0ZWRVdGNcIjogXCIyMDE3LTAyLTE0VDA2OjA4OjM5WlwiLFxyXG4gICAgXCJ2aWV3VXJsXCI6IFwiaHR0cHM6Ly9hZGFwdGl2ZWNhcmRzLmlvXCIsXHJcbiAgICBcInByb3BlcnRpZXNcIjogW1xyXG4gICAgICAgIHsgXCJrZXlcIjogXCJCb2FyZFwiLCBcInZhbHVlXCI6IFwiQWRhcHRpdmUgQ2FyZHNcIiB9LFxyXG4gICAgICAgIHsgXCJrZXlcIjogXCJMaXN0XCIsIFwidmFsdWVcIjogXCJCYWNrbG9nXCIgfSxcclxuICAgICAgICB7IFwia2V5XCI6IFwiQXNzaWduZWQgdG9cIiwgXCJ2YWx1ZVwiOiBcIk1hdHQgSGlkaW5nZXJcIiB9LFxyXG4gICAgICAgIHsgXCJrZXlcIjogXCJEdWUgZGF0ZVwiLCBcInZhbHVlXCI6IFwiTm90IHNldFwiIH1cclxuICAgIF1cclxufWAiLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgKiBhcyBBZGFwdGl2ZSBmcm9tIFwiYWRhcHRpdmVjYXJkc1wiO1xyXG5pbXBvcnQgeyBIb3N0Q29udGFpbmVyIH0gZnJvbSBcIi4uL2hvc3QtY29udGFpbmVyXCI7XHJcbmltcG9ydCAqIGFzIGhvc3RDb25maWcgZnJvbSBcIi4uLy4uL2hvc3RDb25maWdzL3JlbmRlci10by1pbWFnZS5qc29uXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQm90RnJhbWV3b3JrQ29udGFpbmVyIGV4dGVuZHMgSG9zdENvbnRhaW5lciB7XHJcblx0cHVibGljIHJlbmRlclRvKGhvc3RFbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG5cdFx0dGhpcy5jYXJkSG9zdC5jbGFzc0xpc3QuYWRkKFwiYmYtaW1hZ2VzLWNhcmRcIik7XHJcblxyXG5cdFx0bGV0IGZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdGZyYW1lLmNsYXNzTmFtZSA9IFwiYmYtaW1hZ2VzLWZyYW1lXCI7XHJcblx0XHRmcmFtZS5hcHBlbmRDaGlsZCh0aGlzLmNhcmRIb3N0KTtcclxuXHJcblx0XHRob3N0RWxlbWVudC5hcHBlbmRDaGlsZChmcmFtZSk7XHJcblx0fVxyXG5cclxuICAgIHB1YmxpYyBnZXRIb3N0Q29uZmlnKCk6IEFkYXB0aXZlLkhvc3RDb25maWcge1xyXG4gICAgICAgIHJldHVybiBuZXcgQWRhcHRpdmUuSG9zdENvbmZpZyhob3N0Q29uZmlnKTtcclxuICAgIH1cclxufVxyXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgKiBhcyBBZGFwdGl2ZSBmcm9tIFwiYWRhcHRpdmVjYXJkc1wiO1xyXG5pbXBvcnQgeyBIb3N0Q29udGFpbmVyIH0gZnJvbSBcIi4uL2hvc3QtY29udGFpbmVyXCI7XHJcbmltcG9ydCAqIGFzIGhvc3RDb25maWcgZnJvbSBcIi4uLy4uL2hvc3RDb25maWdzL2NvcnRhbmEtc2tpbGxzLWNsYXNzaWMuanNvblwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvcnRhbmFDbGFzc2ljQ29udGFpbmVyIGV4dGVuZHMgSG9zdENvbnRhaW5lciB7XHJcbiAgICBwdWJsaWMgcmVuZGVyVG8oaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5jYXJkSG9zdC5jbGFzc0xpc3QuYWRkKFwiY29ydGFuYS1jYXJkXCIpO1xyXG5cclxuICAgICAgICBsZXQgbGVmdFNpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGxlZnRTaWRlLmNsYXNzTGlzdC5hZGQoXCJjb3J0YW5hLWxlZnRzaWRlXCIpO1xyXG5cclxuICAgICAgICBsZXQgdG9wTGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdG9wTGVmdC5jbGFzc0xpc3QuYWRkKFwiY29ydGFuYS10b3BsZWZ0XCIpO1xyXG5cclxuICAgICAgICBsZXQgbWlkZGxlTGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbWlkZGxlTGVmdC5jbGFzc0xpc3QuYWRkKFwiY29ydGFuYS1taWRkbGVsZWZ0XCIpO1xyXG5cclxuICAgICAgICBsZXQgYm90dG9tTGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgYm90dG9tTGVmdC5jbGFzc0xpc3QuYWRkKFwiY29ydGFuYS1ib3R0b21sZWZ0XCIpO1xyXG5cclxuICAgICAgICBsZWZ0U2lkZS5hcHBlbmRDaGlsZCh0b3BMZWZ0KTtcclxuICAgICAgICBsZWZ0U2lkZS5hcHBlbmRDaGlsZChtaWRkbGVMZWZ0KTtcclxuICAgICAgICBsZWZ0U2lkZS5hcHBlbmRDaGlsZChib3R0b21MZWZ0KTtcclxuXHJcbiAgICAgICAgbGV0IHJpZ2h0U2lkZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgcmlnaHRTaWRlLmNsYXNzTGlzdC5hZGQoXCJjb3J0YW5hLXJpZ2h0c2lkZVwiKTtcclxuXHJcbiAgICAgICAgbGV0IGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJjb3J0YW5hLWhlYWRlclwiKTtcclxuXHJcbiAgICAgICAgbGV0IHNlYXJjaEJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgc2VhcmNoQm94LmNsYXNzTGlzdC5hZGQoXCJjb3J0YW5hLXNlYXJjaGJveFwiKTtcclxuXHJcbiAgICAgICAgbGV0IG1hZ25pZnlpbmdHbGFzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbWFnbmlmeWluZ0dsYXNzLmNsYXNzTGlzdC5hZGQoXCJjb3J0YW5hLXNlYXJjaGJveC1tYWduaWZ5aW5nZ2xhc3NcIik7XHJcblxyXG4gICAgICAgIGxldCBzZWFyY2hCb3hNaWRkbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHNlYXJjaEJveE1pZGRsZS5jbGFzc0xpc3QuYWRkKFwiY29ydGFuYS1zZWFyY2hib3gtbWlkZGxlXCIpO1xyXG5cclxuICAgICAgICBsZXQgbWljcm9waG9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbWljcm9waG9uZS5jbGFzc0xpc3QuYWRkKFwiY29ydGFuYS1zZWFyY2hib3gtbWljcm9waG9uZVwiKTtcclxuXHJcbiAgICAgICAgc2VhcmNoQm94LmFwcGVuZENoaWxkKG1hZ25pZnlpbmdHbGFzcyk7XHJcbiAgICAgICAgc2VhcmNoQm94LmFwcGVuZENoaWxkKHNlYXJjaEJveE1pZGRsZSk7XHJcbiAgICAgICAgc2VhcmNoQm94LmFwcGVuZENoaWxkKG1pY3JvcGhvbmUpO1xyXG5cclxuICAgICAgICByaWdodFNpZGUuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcclxuICAgICAgICByaWdodFNpZGUuYXBwZW5kQ2hpbGQodGhpcy5jYXJkSG9zdCk7XHJcbiAgICAgICAgcmlnaHRTaWRlLmFwcGVuZENoaWxkKHNlYXJjaEJveCk7XHJcblxyXG4gICAgICAgIGxldCBmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZnJhbWUuY2xhc3NMaXN0LmFkZChcImNvcnRhbmEtZnJhbWVcIik7XHJcblxyXG4gICAgICAgIGZyYW1lLmFwcGVuZENoaWxkKGxlZnRTaWRlKTtcclxuICAgICAgICBmcmFtZS5hcHBlbmRDaGlsZChyaWdodFNpZGUpO1xyXG5cclxuICAgICAgICBob3N0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiY29ydGFuYS1vdXRlci1mcmFtZVwiKTtcclxuICAgICAgICBob3N0RWxlbWVudC5hcHBlbmRDaGlsZChmcmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEhvc3RDb25maWcoKTogQWRhcHRpdmUuSG9zdENvbmZpZyB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBZGFwdGl2ZS5Ib3N0Q29uZmlnKGhvc3RDb25maWcpO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmltcG9ydCAqIGFzIEFkYXB0aXZlIGZyb20gXCJhZGFwdGl2ZWNhcmRzXCI7XHJcbmltcG9ydCB7IEhvc3RDb250YWluZXIgfSBmcm9tIFwiLi4vaG9zdC1jb250YWluZXJcIjtcclxuaW1wb3J0ICogYXMgaG9zdENvbmZpZ0xpZ2h0IGZyb20gXCIuLi8uLi9ob3N0Q29uZmlncy9jb3J0YW5hLXNraWxscy1saWdodC5qc29uXCI7XHJcbmltcG9ydCAqIGFzIGhvc3RDb25maWdEYXJrIGZyb20gXCIuLi8uLi9ob3N0Q29uZmlncy9jb3J0YW5hLXNraWxscy1kYXJrLmpzb25cIjtcclxuXHJcbmFic3RyYWN0IGNsYXNzIEJhc2VDb3J0YW5hQ29udGFpbmVyIGV4dGVuZHMgSG9zdENvbnRhaW5lciB7XHJcbiAgICBwdWJsaWMgcmVuZGVyVG8oaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIGZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgZnJhbWUuYXBwZW5kQ2hpbGQodGhpcy5jYXJkSG9zdCk7XHJcblxyXG4gICAgICAgIGhvc3RFbGVtZW50LmFwcGVuZENoaWxkKGZyYW1lKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExpZ2h0Q29ydGFuYUNvbnRhaW5lciBleHRlbmRzIEJhc2VDb3J0YW5hQ29udGFpbmVyIHtcclxuICAgIHB1YmxpYyBnZXRIb3N0Q29uZmlnKCk6IEFkYXB0aXZlLkhvc3RDb25maWcge1xyXG4gICAgICAgIHJldHVybiBuZXcgQWRhcHRpdmUuSG9zdENvbmZpZyhob3N0Q29uZmlnTGlnaHQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRGFya0NvcnRhbmFDb250YWluZXIgZXh0ZW5kcyBCYXNlQ29ydGFuYUNvbnRhaW5lciB7XHJcbiAgICBwdWJsaWMgZ2V0QmFja2dyb3VuZENvbG9yKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiIzIwMUUxRlwiO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRIb3N0Q29uZmlnKCk6IEFkYXB0aXZlLkhvc3RDb25maWcge1xyXG4gICAgICAgIHJldHVybiBuZXcgQWRhcHRpdmUuSG9zdENvbmZpZyhob3N0Q29uZmlnRGFyayk7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuaW1wb3J0IHsgSG9zdENvbnRhaW5lciB9IGZyb20gXCIuLi9ob3N0LWNvbnRhaW5lclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIERlZmF1bHRDb250YWluZXIgZXh0ZW5kcyBIb3N0Q29udGFpbmVyIHtcclxuICAgIHB1YmxpYyByZW5kZXJUbyhob3N0RWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBob3N0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiY2FyZC1mcmFtZVwiKTtcclxuICAgICAgICBob3N0RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNhcmRIb3N0KTtcclxuICAgIH1cclxufVxyXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgKiBhcyBBZGFwdGl2ZSBmcm9tIFwiYWRhcHRpdmVjYXJkc1wiO1xyXG5pbXBvcnQgKiBhcyBob3N0Q29uZmlnIGZyb20gXCIuLi9ob3N0Q29uZmlncy9zYW1wbGUuanNvblwiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEhvc3RDb250YWluZXIge1xyXG4gICAgcHJpdmF0ZSBfY2FyZEhvc3Q6IEhUTUxFbGVtZW50O1xyXG5cclxuICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcclxuICAgIHJlYWRvbmx5IHN0eWxlU2hlZXQ6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHN0eWxlU2hlZXQ6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5zdHlsZVNoZWV0ID0gc3R5bGVTaGVldDtcclxuXHJcbiAgICAgICAgdGhpcy5fY2FyZEhvc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRIb3N0LmNsYXNzTmFtZSA9IFwiY2FyZEhvc3RcIjtcclxuICAgIH1cclxuXHJcbiAgICBhYnN0cmFjdCByZW5kZXJUbyhob3N0RWxlbWVudDogSFRNTEVsZW1lbnQpO1xyXG5cclxuICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIEFkYXB0aXZlLkFkYXB0aXZlQ2FyZC5lbGVtZW50VHlwZVJlZ2lzdHJ5LnJlc2V0KCk7XHJcbiAgICAgICAgQWRhcHRpdmUuQWRhcHRpdmVDYXJkLmFjdGlvblR5cGVSZWdpc3RyeS5yZXNldCgpO1xyXG5cclxuICAgICAgICBBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQudXNlTWFya2Rvd25JblJhZGlvQnV0dG9uQW5kQ2hlY2tib3ggPSB0cnVlO1xyXG4gICAgICAgIEFkYXB0aXZlLkFkYXB0aXZlQ2FyZC51c2VBZHZhbmNlZENhcmRCb3R0b21UcnVuY2F0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgQWRhcHRpdmUuQWRhcHRpdmVDYXJkLnVzZUFkdmFuY2VkVGV4dEJsb2NrVHJ1bmNhdGlvbiA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEJhY2tncm91bmRDb2xvcigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcIiNGNkY2RjZcIjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcGFyc2VFbGVtZW50KGVsZW1lbnQ6IEFkYXB0aXZlLkNhcmRFbGVtZW50LCBqc29uOiBhbnkpIHtcclxuICAgICAgICAvLyBEbyBub3RoaW5nIGluIGJhc2UgaW1wbGVtZW50YXRpb25cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYW5jaG9yQ2xpY2tlZChlbGVtZW50OiBBZGFwdGl2ZS5DYXJkRWxlbWVudCwgYW5jaG9yOiBIVE1MQW5jaG9yRWxlbWVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vIE5vdCBoYW5kbGVkIGJ5IHRoZSBob3N0IGNvbnRhaW5lciBieSBkZWZhdWx0XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRIb3N0Q29uZmlnKCk6IEFkYXB0aXZlLkhvc3RDb25maWcge1xyXG4gICAgICAgIHJldHVybiBuZXcgQWRhcHRpdmUuSG9zdENvbmZpZyhob3N0Q29uZmlnKTtcclxuICAgIH1cclxuXHJcbiAgICBzdXBwb3J0c0FjdGlvbkJhcjogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIGdldCBjYXJkSG9zdCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRIb3N0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc0ZpeGVkSGVpZ2h0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5leHBvcnQgKiBmcm9tIFwiLi9ob3N0LWNvbnRhaW5lclwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9kZWZhdWx0L2RlZmF1bHQtY29udGFpbmVyXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL2JmLWltYWdlL2JmLWltYWdlLWNvbnRhaW5lclwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9jb3J0YW5hLWNsYXNzaWMvY29ydGFuYS1jbGFzc2ljLWNvbnRhaW5lclwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9jb3J0YW5hL2NvcnRhbmEtY29udGFpbmVyXCJcclxuZXhwb3J0ICogZnJvbSBcIi4vbm90aWZpY2F0aW9ucy90b2FzdC1jb250YWluZXJcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vb3V0bG9vay9vdXRsb29rLWNvbnRhaW5lclwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9za3lwZS9za3lwZS1jb250YWluZXJcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vdGVhbXMvdGVhbXMtY29udGFpbmVyXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL3RpbWVsaW5lL3RpbWVsaW5lLWNvbnRhaW5lclwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi93ZWJjaGF0L3dlYmNoYXQtY29udGFpbmVyXCI7XHJcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmltcG9ydCAqIGFzIEFkYXB0aXZlIGZyb20gXCJhZGFwdGl2ZWNhcmRzXCI7XHJcbmltcG9ydCB7IEhvc3RDb250YWluZXIgfSBmcm9tIFwiLi4vaG9zdC1jb250YWluZXJcIjtcclxuaW1wb3J0ICogYXMgaG9zdENvbmZpZyBmcm9tIFwiLi4vLi4vaG9zdENvbmZpZ3Mvd2luZG93cy1ub3RpZmljYXRpb24uanNvblwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRvYXN0Q29udGFpbmVyIGV4dGVuZHMgSG9zdENvbnRhaW5lciB7XHJcbiAgICBwdWJsaWMgcmVuZGVyVG8oaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5jYXJkSG9zdC5jbGFzc0xpc3QuYWRkKFwidG9hc3QtY2FyZFwiKTtcclxuXHJcbiAgICAgICAgbGV0IGZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBmcmFtZS5jbGFzc05hbWUgPSBcInRvYXN0LWZyYW1lXCI7XHJcbiAgICAgICAgZnJhbWUuYXBwZW5kQ2hpbGQodGhpcy5jYXJkSG9zdCk7XHJcblxyXG4gICAgICAgIGhvc3RFbGVtZW50LmFwcGVuZENoaWxkKGZyYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SG9zdENvbmZpZygpOiBBZGFwdGl2ZS5Ib3N0Q29uZmlnIHtcclxuICAgICAgICByZXR1cm4gbmV3IEFkYXB0aXZlLkhvc3RDb25maWcoaG9zdENvbmZpZyk7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuaW1wb3J0ICogYXMgQWRhcHRpdmUgZnJvbSBcImFkYXB0aXZlY2FyZHNcIjtcclxuaW1wb3J0IHsgSG9zdENvbnRhaW5lciB9IGZyb20gXCIuLi9ob3N0LWNvbnRhaW5lclwiO1xyXG5pbXBvcnQgKiBhcyBob3N0Q29uZmlnIGZyb20gXCIuLi8uLi9ob3N0Q29uZmlncy9vdXRsb29rLWRlc2t0b3AuanNvblwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE91dGxvb2tDb250YWluZXIgZXh0ZW5kcyBIb3N0Q29udGFpbmVyIHtcclxuICAgIHB1YmxpYyByZW5kZXJUbyhob3N0RWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBob3N0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwib3V0bG9vay1mcmFtZVwiKTtcclxuICAgICAgICBob3N0RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNhcmRIb3N0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgIEFkYXB0aXZlLkFkYXB0aXZlQ2FyZC5hY3Rpb25UeXBlUmVnaXN0cnkudW5yZWdpc3RlclR5cGUoXCJBY3Rpb24uU3VibWl0XCIpO1xyXG4gICAgICAgIEFkYXB0aXZlLkFkYXB0aXZlQ2FyZC5hY3Rpb25UeXBlUmVnaXN0cnkucmVnaXN0ZXJUeXBlKFwiQWN0aW9uLkh0dHBcIiwgKCkgPT4geyByZXR1cm4gbmV3IEFkYXB0aXZlLkh0dHBBY3Rpb24oKTsgfSk7XHJcblxyXG4gICAgICAgIEFkYXB0aXZlLkFkYXB0aXZlQ2FyZC51c2VNYXJrZG93bkluUmFkaW9CdXR0b25BbmRDaGVja2JveCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VQYWRkaW5nKGpzb246IGFueSk6IEFkYXB0aXZlLlBhZGRpbmdEZWZpbml0aW9uIHtcclxuICAgICAgICBpZiAoanNvbikge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGpzb24gPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1bmlmb3JtUGFkZGluZyA9IEFkYXB0aXZlLmdldEVudW1WYWx1ZShBZGFwdGl2ZS5TcGFjaW5nLCBqc29uLCBBZGFwdGl2ZS5TcGFjaW5nLk5vbmUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQWRhcHRpdmUuUGFkZGluZ0RlZmluaXRpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybVBhZGRpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybVBhZGRpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybVBhZGRpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybVBhZGRpbmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBqc29uID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFkYXB0aXZlLlBhZGRpbmdEZWZpbml0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgIEFkYXB0aXZlLmdldEVudW1WYWx1ZShBZGFwdGl2ZS5TcGFjaW5nLCBqc29uW1widG9wXCJdLCBBZGFwdGl2ZS5TcGFjaW5nLk5vbmUpLFxyXG4gICAgICAgICAgICAgICAgICAgIEFkYXB0aXZlLmdldEVudW1WYWx1ZShBZGFwdGl2ZS5TcGFjaW5nLCBqc29uW1wicmlnaHRcIl0sIEFkYXB0aXZlLlNwYWNpbmcuTm9uZSksXHJcbiAgICAgICAgICAgICAgICAgICAgQWRhcHRpdmUuZ2V0RW51bVZhbHVlKEFkYXB0aXZlLlNwYWNpbmcsIGpzb25bXCJib3R0b21cIl0sIEFkYXB0aXZlLlNwYWNpbmcuTm9uZSksXHJcbiAgICAgICAgICAgICAgICAgICAgQWRhcHRpdmUuZ2V0RW51bVZhbHVlKEFkYXB0aXZlLlNwYWNpbmcsIGpzb25bXCJsZWZ0XCJdLCBBZGFwdGl2ZS5TcGFjaW5nLk5vbmUpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBhcnNlRWxlbWVudChlbGVtZW50OiBBZGFwdGl2ZS5DYXJkRWxlbWVudCwganNvbjogYW55KSB7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQpIHtcclxuICAgICAgICAgICAgdmFyIGNhcmQgPSA8QWRhcHRpdmUuQWRhcHRpdmVDYXJkPmVsZW1lbnQ7XHJcbiAgICAgICAgICAgIHZhciBhY3Rpb25BcnJheTogQXJyYXk8QWRhcHRpdmUuQWN0aW9uPiA9IFtdO1xyXG5cclxuICAgICAgICAgICAgY2FyZFtcInJlc291cmNlc1wiXSA9IHsgYWN0aW9uczogYWN0aW9uQXJyYXkgfTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YganNvbltcInJlc291cmNlc1wiXSA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFjdGlvblJlc291cmNlcyA9IGpzb25bXCJyZXNvdXJjZXNcIl1bXCJhY3Rpb25zXCJdIGFzIEFycmF5PGFueT47XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhY3Rpb25SZXNvdXJjZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aW9uID0gQWRhcHRpdmUuQWRhcHRpdmVDYXJkLmFjdGlvblR5cGVSZWdpc3RyeS5jcmVhdGVJbnN0YW5jZShhY3Rpb25SZXNvdXJjZXNbaV1bXCJ0eXBlXCJdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb24ucGFyc2UoYWN0aW9uUmVzb3VyY2VzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uLnNldFBhcmVudChjYXJkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkFycmF5LnB1c2goYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgQWRhcHRpdmUuSW1hZ2UpIHtcclxuICAgICAgICAgICAgKDxBZGFwdGl2ZS5JbWFnZT5lbGVtZW50KS5iYWNrZ3JvdW5kQ29sb3IgPSBqc29uW1wiYmFja2dyb3VuZENvbG9yXCJdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBBZGFwdGl2ZS5Db250YWluZXIpIHtcclxuICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSB0aGlzLnBhcnNlUGFkZGluZyhqc29uW1wicGFkZGluZ1wiXSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocGFkZGluZykge1xyXG4gICAgICAgICAgICAgICAgKDxBZGFwdGl2ZS5Db250YWluZXI+ZWxlbWVudCkucGFkZGluZyA9IHBhZGRpbmc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgQWRhcHRpdmUuQ29sdW1uU2V0KSB7XHJcbiAgICAgICAgICAgIHZhciBwYWRkaW5nID0gdGhpcy5wYXJzZVBhZGRpbmcoanNvbltcInBhZGRpbmdcIl0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBhZGRpbmcpIHtcclxuICAgICAgICAgICAgICAgICg8QWRhcHRpdmUuQ29sdW1uU2V0PmVsZW1lbnQpLnBhZGRpbmcgPSBwYWRkaW5nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhbmNob3JDbGlja2VkKGVsZW1lbnQ6IEFkYXB0aXZlLkNhcmRFbGVtZW50LCBhbmNob3I6IEhUTUxBbmNob3JFbGVtZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgdmFyIHJlZ0V4ID0gL15hY3Rpb246KFthLXowLTldKykkL2lnO1xyXG4gICAgICAgIHZhciByb290Q2FyZCA9IGVsZW1lbnQuZ2V0Um9vdEVsZW1lbnQoKSBhcyBBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQ7XHJcbiAgICAgICAgdmFyIG1hdGNoZXMgPSByZWdFeC5leGVjKGFuY2hvci5ocmVmKTtcclxuXHJcbiAgICAgICAgaWYgKG1hdGNoZXMpIHtcclxuICAgICAgICAgICAgdmFyIGFjdGlvbklkID0gbWF0Y2hlc1sxXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyb290Q2FyZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFjdGlvbkFycmF5ID0gcm9vdENhcmRbXCJyZXNvdXJjZXNcIl1bXCJhY3Rpb25zXCJdIGFzIEFycmF5PEFkYXB0aXZlLkFjdGlvbj47XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhY3Rpb25BcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3Rpb25BcnJheVtpXS5pZCA9PSBhY3Rpb25JZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25BcnJheVtpXS5leGVjdXRlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SG9zdENvbmZpZygpOiBBZGFwdGl2ZS5Ib3N0Q29uZmlnIHtcclxuICAgICAgICByZXR1cm4gbmV3IEFkYXB0aXZlLkhvc3RDb25maWcoaG9zdENvbmZpZyk7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuaW1wb3J0ICogYXMgQWRhcHRpdmUgZnJvbSBcImFkYXB0aXZlY2FyZHNcIjtcclxuaW1wb3J0IHsgSG9zdENvbnRhaW5lciB9IGZyb20gXCIuLi9ob3N0LWNvbnRhaW5lclwiO1xyXG5pbXBvcnQgKiBhcyBob3N0Q29uZmlnIGZyb20gXCIuLi8uLi9ob3N0Q29uZmlncy9za3lwZS5qc29uXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2t5cGVDb250YWluZXIgZXh0ZW5kcyBIb3N0Q29udGFpbmVyIHtcclxuICAgIHB1YmxpYyByZW5kZXJUbyhob3N0RWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLmNhcmRIb3N0LmNsYXNzTGlzdC5hZGQoXCJza3lwZS1jYXJkXCIpO1xyXG5cclxuICAgICAgICB2YXIgZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGZyYW1lLmNsYXNzTmFtZSA9IFwic2t5cGUtZnJhbWVcIjtcclxuXHJcbiAgICAgICAgLy8gRHJhdyB0aGUgaGV4YWdvbiBib3QgbG9nb1xyXG4gICAgICAgIHZhciBoZXhhZ29uT3V0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGhleGFnb25PdXRlci5jbGFzc05hbWUgPSBcInNreXBlLWhleGFnb24tb3V0ZXJcIjtcclxuXHJcbiAgICAgICAgdmFyIGhleGFnb25Jbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgaGV4YWdvbklubmVyLmNsYXNzTmFtZSA9IFwic2t5cGUtaGV4YWdvbi1pbm5lclwiO1xyXG5cclxuICAgICAgICB2YXIgYm90TG9nbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgYm90TG9nby5jbGFzc05hbWUgPSBcInNreXBlLWJvdC1sb2dvXCI7XHJcblxyXG4gICAgICAgIGhleGFnb25PdXRlci5hcHBlbmRDaGlsZChoZXhhZ29uSW5uZXIpO1xyXG4gICAgICAgIGhleGFnb25Jbm5lci5hcHBlbmRDaGlsZChib3RMb2dvKTtcclxuXHJcbiAgICAgICAgZnJhbWUuYXBwZW5kQ2hpbGQoaGV4YWdvbk91dGVyKTtcclxuICAgICAgICBmcmFtZS5hcHBlbmRDaGlsZCh0aGlzLmNhcmRIb3N0KTtcclxuXHJcbiAgICAgICAgaG9zdEVsZW1lbnQuYXBwZW5kQ2hpbGQoZnJhbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRIb3N0Q29uZmlnKCk6IEFkYXB0aXZlLkhvc3RDb25maWcge1xyXG4gICAgICAgIHJldHVybiBuZXcgQWRhcHRpdmUuSG9zdENvbmZpZyhob3N0Q29uZmlnKTtcclxuICAgIH1cclxufVxyXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgKiBhcyBBZGFwdGl2ZSBmcm9tIFwiYWRhcHRpdmVjYXJkc1wiO1xyXG5pbXBvcnQgeyBIb3N0Q29udGFpbmVyIH0gZnJvbSBcIi4uL2hvc3QtY29udGFpbmVyXCI7XHJcbmltcG9ydCAqIGFzIGhvc3RDb25maWdMaWdodCBmcm9tIFwiLi4vLi4vaG9zdENvbmZpZ3MvbWljcm9zb2Z0LXRlYW1zLWxpZ2h0Lmpzb25cIjtcclxuaW1wb3J0ICogYXMgaG9zdENvbmZpZ0RhcmsgZnJvbSBcIi4uLy4uL2hvc3RDb25maWdzL21pY3Jvc29mdC10ZWFtcy1kYXJrLmpzb25cIjtcclxuXHJcbmFic3RyYWN0IGNsYXNzIEJhc2VUZWFtc0NvbnRhaW5lciBleHRlbmRzIEhvc3RDb250YWluZXIge1xyXG4gICAgcHVibGljIHJlbmRlclRvKGhvc3RFbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHZhciBvdXRlckZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBvdXRlckZyYW1lLmNsYXNzTmFtZSA9IFwidGVhbXMtZnJhbWVcIjtcclxuXHJcbiAgICAgICAgLy8gRHJhdyB0aGUgaGV4YWdvbiBib3QgbG9nb1xyXG4gICAgICAgIHZhciBoZXhhZ29uT3V0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGhleGFnb25PdXRlci5jbGFzc05hbWUgPSBcInRlYW1zLWhleGFnb24tb3V0ZXJcIjtcclxuXHJcbiAgICAgICAgdmFyIGhleGFnb25Jbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgaGV4YWdvbklubmVyLmNsYXNzTmFtZSA9IFwidGVhbXMtaGV4YWdvbi1pbm5lclwiO1xyXG5cclxuICAgICAgICB2YXIgYm90TG9nbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgYm90TG9nby5jbGFzc05hbWUgPSBcInRlYW1zLWJvdC1sb2dvXCI7XHJcblxyXG4gICAgICAgIGhleGFnb25PdXRlci5hcHBlbmRDaGlsZChoZXhhZ29uSW5uZXIpO1xyXG4gICAgICAgIGhleGFnb25Jbm5lci5hcHBlbmRDaGlsZChib3RMb2dvKTtcclxuXHJcbiAgICAgICAgb3V0ZXJGcmFtZS5hcHBlbmRDaGlsZChoZXhhZ29uT3V0ZXIpO1xyXG5cclxuICAgICAgICBsZXQgaW5uZXJGcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgaW5uZXJGcmFtZS5jbGFzc05hbWUgPSBcInRlYW1zLWlubmVyLWZyYW1lXCI7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyZEhvc3QuY2xhc3NMaXN0LmFkZChcInRlYW1zLWNhcmRcIik7XHJcblxyXG4gICAgICAgIGxldCBib3ROYW1lQW5kVGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgYm90TmFtZUFuZFRpbWUuY2xhc3NOYW1lID0gXCJ0ZWFtcy1ib3ROYW1lQW5kVGltZVwiO1xyXG4gICAgICAgIGJvdE5hbWVBbmRUaW1lLmlubmVyVGV4dCA9IFwiVGVzdCBCb3QgICAgMjozNiBQTVwiO1xyXG5cclxuICAgICAgICBpbm5lckZyYW1lLmFwcGVuZENoaWxkKGJvdE5hbWVBbmRUaW1lKTtcclxuICAgICAgICBpbm5lckZyYW1lLmFwcGVuZENoaWxkKHRoaXMuY2FyZEhvc3QpO1xyXG5cclxuICAgICAgICBvdXRlckZyYW1lLmFwcGVuZENoaWxkKGlubmVyRnJhbWUpO1xyXG5cclxuICAgICAgICBob3N0RWxlbWVudC5hcHBlbmRDaGlsZChvdXRlckZyYW1lKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExpZ2h0VGVhbXNDb250YWluZXIgZXh0ZW5kcyBCYXNlVGVhbXNDb250YWluZXIge1xyXG4gICAgcHVibGljIGdldEhvc3RDb25maWcoKTogQWRhcHRpdmUuSG9zdENvbmZpZyB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBZGFwdGl2ZS5Ib3N0Q29uZmlnKGhvc3RDb25maWdMaWdodCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBEYXJrVGVhbXNDb250YWluZXIgZXh0ZW5kcyBCYXNlVGVhbXNDb250YWluZXIge1xyXG4gICAgcHVibGljIGdldEJhY2tncm91bmRDb2xvcigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcIiMyMDFFMUZcIjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SG9zdENvbmZpZygpOiBBZGFwdGl2ZS5Ib3N0Q29uZmlnIHtcclxuICAgICAgICByZXR1cm4gbmV3IEFkYXB0aXZlLkhvc3RDb25maWcoaG9zdENvbmZpZ0RhcmspO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmltcG9ydCAqIGFzIEFkYXB0aXZlIGZyb20gXCJhZGFwdGl2ZWNhcmRzXCI7XHJcbmltcG9ydCB7IEhvc3RDb250YWluZXIgfSBmcm9tIFwiLi4vaG9zdC1jb250YWluZXJcIjtcclxuaW1wb3J0ICogYXMgaG9zdENvbmZpZyBmcm9tIFwiLi4vLi4vaG9zdENvbmZpZ3Mvd2luZG93cy10aW1lbGluZS5qc29uXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVGltZWxpbmVDb250YWluZXIgZXh0ZW5kcyBIb3N0Q29udGFpbmVyIHtcclxuICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIEFkYXB0aXZlLkFkYXB0aXZlQ2FyZC5lbGVtZW50VHlwZVJlZ2lzdHJ5LnJlc2V0KCk7XHJcbiAgICAgICAgQWRhcHRpdmUuQWRhcHRpdmVDYXJkLmFjdGlvblR5cGVSZWdpc3RyeS5yZXNldCgpO1xyXG5cclxuICAgICAgICBBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQudXNlTWFya2Rvd25JblJhZGlvQnV0dG9uQW5kQ2hlY2tib3ggPSB0cnVlO1xyXG4gICAgICAgIEFkYXB0aXZlLkFkYXB0aXZlQ2FyZC51c2VBZHZhbmNlZENhcmRCb3R0b21UcnVuY2F0aW9uID0gdHJ1ZTtcclxuICAgICAgICBBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQudXNlQWR2YW5jZWRUZXh0QmxvY2tUcnVuY2F0aW9uID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVuZGVyVG8oaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgbGV0IHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzaWduZXJIb3N0XCIpO1xyXG4gICAgICAgIGxldCBmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZnJhbWUuY2xhc3NOYW1lID0gXCJ0aW1lbGluZS1mcmFtZVwiO1xyXG4gICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChmcmFtZSk7XHJcblxyXG4gICAgICAgIGxldCBjYXJkQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBjYXJkQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwidGltZWxpbmUtY2FyZFwiO1xyXG4gICAgICAgIGZyYW1lLmFwcGVuZENoaWxkKGNhcmRDb250YWluZXIpO1xyXG5cclxuICAgICAgICB0aGlzLmNhcmRIb3N0LnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG4gICAgICAgIHRoaXMuY2FyZEhvc3Quc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuICAgICAgICB0aGlzLmNhcmRIb3N0LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuXHJcbiAgICAgICAgY2FyZENvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNhcmRIb3N0KTtcclxuICAgICAgICBob3N0RWxlbWVudC5hcHBlbmRDaGlsZChmcmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEhvc3RDb25maWcoKTogQWRhcHRpdmUuSG9zdENvbmZpZyB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBZGFwdGl2ZS5Ib3N0Q29uZmlnKGhvc3RDb25maWcpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc0ZpeGVkSGVpZ2h0KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmltcG9ydCAqIGFzIEFkYXB0aXZlIGZyb20gXCJhZGFwdGl2ZWNhcmRzXCI7XHJcbmltcG9ydCB7IEhvc3RDb250YWluZXIgfSBmcm9tIFwiLi4vaG9zdC1jb250YWluZXJcIjtcclxuaW1wb3J0ICogYXMgaG9zdENvbmZpZyBmcm9tIFwiLi4vLi4vaG9zdENvbmZpZ3Mvd2ViY2hhdC5qc29uXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgV2ViQ2hhdENvbnRhaW5lciBleHRlbmRzIEhvc3RDb250YWluZXIge1xyXG4gICAgcHVibGljIHJlbmRlclRvKGhvc3RFbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuY2FyZEhvc3QuY2xhc3NMaXN0LmFkZChcIndlYkNoYXRPdXRlckNvbnRhaW5lclwiKTtcclxuXHJcbiAgICAgICAgbGV0IGZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBmcmFtZS5jbGFzc05hbWUgPSBcIndlYkNoYXRJbm5lckNvbnRhaW5lclwiO1xyXG4gICAgICAgIGZyYW1lLmFwcGVuZENoaWxkKHRoaXMuY2FyZEhvc3QpO1xyXG5cclxuICAgICAgICBob3N0RWxlbWVudC5hcHBlbmRDaGlsZChmcmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEhvc3RDb25maWcoKTogQWRhcHRpdmUuSG9zdENvbmZpZyB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBZGFwdGl2ZS5Ib3N0Q29uZmlnKGhvc3RDb25maWcpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEJhc2VUcmVlSXRlbSB9IGZyb20gXCIuL2Jhc2UtdHJlZS1pdGVtXCI7XHJcbmltcG9ydCAqIGFzIERhdGEgZnJvbSBcIi4vZGF0YVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIERhdGFUcmVlSXRlbSBleHRlbmRzIEJhc2VUcmVlSXRlbSB7XHJcbiAgICBwcml2YXRlIF9jaGlsZHJlbjogQXJyYXk8RGF0YVRyZWVJdGVtPiA9IG51bGw7XHJcblxyXG4gICAgcHJpdmF0ZSBidWlsZENoaWxkTGlzdCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2NoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoaWxkcmVuID0gW107XHJcblxyXG4gICAgICAgICAgICBsZXQgcHJvcGVydGllcyA9IHRoaXMuZmllbGQuY2hpbGRyZW47XHJcblxyXG4gICAgICAgICAgICBpZiAocHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgb2Yga2V5cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NoaWxkcmVuLnB1c2gobmV3IERhdGFUcmVlSXRlbShwcm9wZXJ0aWVzW2tleV0pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0TGFiZWxUZXh0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQubmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0QWRkaXRpb25hbFRleHQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maWVsZC50eXBlTmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0QWRkaXRpb25hbFRleHRDbGFzcygpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcImFjZC1kYXRhLXRyZWUtaXRlbS1hZGRpdGlvbmFsVGV4dFwiO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRvbmx5IGZpZWxkOiBEYXRhLkZpZWxkRGVmaW5pdGlvbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihmaWVsZDogRGF0YS5GaWVsZERlZmluaXRpb24pIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7XHJcblxyXG4gICAgICAgIHRoaXMuX2xldmVsID0gMDtcclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbnRGaWVsZCA9IGZpZWxkO1xyXG5cclxuICAgICAgICB3aGlsZSAoY3VycmVudEZpZWxkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xldmVsKys7XHJcblxyXG4gICAgICAgICAgICBjdXJyZW50RmllbGQgPSBjdXJyZW50RmllbGQucGFyZW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc0RyYWdnYWJsZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDaGlsZENvdW50KCk6IG51bWJlciB7XHJcbiAgICAgICAgdGhpcy5idWlsZENoaWxkTGlzdCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENoaWxkQXQoaW5kZXg6IG51bWJlcik6IERhdGFUcmVlSXRlbSB7XHJcbiAgICAgICAgdGhpcy5idWlsZENoaWxkTGlzdCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbltpbmRleF07XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZW51bSBWYWx1ZUtpbmQgeyBTdHJpbmcsIEJvb2xlYW4sIE51bWJlciB9XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgRGF0YVR5cGUge1xyXG4gICAgc3RhdGljIGNyZWF0ZShwYXJlbnQ6IEZpZWxkRGVmaW5pdGlvbiwgdmFsdWU6IGFueSk6IERhdGFUeXBlIHtcclxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmFsdWVEYXRhKHBhcmVudCwgVmFsdWVLaW5kLlN0cmluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZURhdGEocGFyZW50LCBWYWx1ZUtpbmQuQm9vbGVhbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZhbHVlRGF0YShwYXJlbnQsIFZhbHVlS2luZC5OdW1iZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXlEYXRhLmNyZWF0ZShwYXJlbnQsIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3REYXRhLmNyZWF0ZShwYXJlbnQsIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgZGF0YSB0eXBlOiBcIiArIHR5cGVvZiB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IG93bmVyOiBGaWVsZERlZmluaXRpb24pIHt9XHJcblxyXG4gICAgZ2V0Q2hpbGRGaWVsZHMoKTogRmllbGREZWZpbml0aW9uW10ge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHF1YWxpZnlGaWVsZE5hbWUoZmllbGROYW1lOiBzdHJpbmcsIGZpZWxkSXNMZWFmOiBib29sZWFuKSB7XHJcbiAgICAgICAgcmV0dXJuIGZpZWxkTmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBhYnN0cmFjdCBnZXQgdHlwZU5hbWUoKTogc3RyaW5nO1xyXG5cclxuICAgIGdldCBpc0NvbGxlY3Rpb24oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVmFsdWVEYXRhIGV4dGVuZHMgRGF0YVR5cGUge1xyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgb3duZXI6IEZpZWxkRGVmaW5pdGlvbiwgcmVhZG9ubHkgdmFsdWVLaW5kOiBWYWx1ZUtpbmQpIHtcclxuICAgICAgICBzdXBlcihvd25lcik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFZhbHVlS2luZFt0aGlzLnZhbHVlS2luZF07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBcnJheURhdGEgZXh0ZW5kcyBEYXRhVHlwZSB7XHJcbiAgICBzdGF0aWMgY3JlYXRlKHBhcmVudDogRmllbGREZWZpbml0aW9uLCBpbnB1dDogT2JqZWN0KTogQXJyYXlEYXRhIHtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIklucHV0IGlzIG5vdCBhbiBhcnJheS5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmVzdWx0ID0gbmV3IEFycmF5RGF0YShwYXJlbnQpO1xyXG5cclxuICAgICAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXN1bHQuZGF0YVR5cGUgPSBEYXRhVHlwZS5jcmVhdGUocGFyZW50LCBpbnB1dFswXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGRhdGFUeXBlOiBEYXRhVHlwZSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBvd25lcjogRmllbGREZWZpbml0aW9uKSB7XHJcbiAgICAgICAgc3VwZXIob3duZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENoaWxkRmllbGRzKCk6IEZpZWxkRGVmaW5pdGlvbltdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhVHlwZS5nZXRDaGlsZEZpZWxkcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHF1YWxpZnlGaWVsZE5hbWUoZmllbGROYW1lOiBzdHJpbmcsIGZpZWxkSXNMZWFmOiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKCFmaWVsZElzTGVhZikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmllbGROYW1lICsgXCJbMF1cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5xdWFsaWZ5RmllbGROYW1lKGZpZWxkTmFtZSwgZmllbGRJc0xlYWYpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNDb2xsZWN0aW9uKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB0eXBlTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcIkFycmF5XCI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBPYmplY3REYXRhIGV4dGVuZHMgRGF0YVR5cGUge1xyXG4gICAgc3RhdGljIGNyZWF0ZShwYXJlbnQ6IEZpZWxkRGVmaW5pdGlvbiwgaW5wdXQ6IE9iamVjdCk6IE9iamVjdERhdGEge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgT2JqZWN0RGF0YShwYXJlbnQpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBrZXkgb2YgT2JqZWN0LmtleXMoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgIGxldCBmaWVsZCA9IG5ldyBGaWVsZERlZmluaXRpb24ocGFyZW50KTtcclxuICAgICAgICAgICAgZmllbGQuZGF0YVR5cGUgPSAgRGF0YVR5cGUuY3JlYXRlKGZpZWxkLCBpbnB1dFtrZXldKTtcclxuICAgICAgICAgICAgZmllbGQubmFtZSA9IGtleTtcclxuXHJcbiAgICAgICAgICAgIHJlc3VsdC5maWVsZHMucHVzaChmaWVsZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRvbmx5IGZpZWxkczogRmllbGREZWZpbml0aW9uW10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBvd25lcjogRmllbGREZWZpbml0aW9uKSB7XHJcbiAgICAgICAgc3VwZXIob3duZXIpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBnZXRDaGlsZEZpZWxkcygpOiBGaWVsZERlZmluaXRpb25bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB0eXBlTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcIk9iamVjdFwiO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRmllbGREZWZpbml0aW9uIHtcclxuICAgIHN0YXRpYyBjcmVhdGUoaW5wdXQ6IGFueSk6IEZpZWxkRGVmaW5pdGlvbiB7XHJcbiAgICAgICAgbGV0IGZpZWxkID0gbmV3IEZpZWxkRGVmaW5pdGlvbihudWxsKTtcclxuICAgICAgICBmaWVsZC5uYW1lID0gXCIkcm9vdFwiO1xyXG4gICAgICAgIGZpZWxkLmRhdGFUeXBlID0gRGF0YVR5cGUuY3JlYXRlKGZpZWxkLCBpbnB1dCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmaWVsZDtcclxuICAgIH1cclxuXHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBkaXNwbGF5TmFtZTogc3RyaW5nO1xyXG4gICAgZGF0YVR5cGU6IERhdGFUeXBlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IHBhcmVudDogRmllbGREZWZpbml0aW9uKSB7fVxyXG5cclxuICAgIGdldFBhdGgoYXNMZWFmOiBib29sZWFuID0gdHJ1ZSk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHJlc3VsdDogc3RyaW5nID0gdGhpcy5xdWFsaWZpZWROYW1lKGFzTGVhZik7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRGaWVsZCA9IHRoaXMucGFyZW50O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHdoaWxlIChjdXJyZW50RmllbGQpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gY3VycmVudEZpZWxkLnF1YWxpZmllZE5hbWUoZmFsc2UpICsgXCIuXCIgKyByZXN1bHQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjdXJyZW50RmllbGQgPSBjdXJyZW50RmllbGQucGFyZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHF1YWxpZmllZE5hbWUoYXNMZWFmOiBib29sZWFuKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhVHlwZS5xdWFsaWZ5RmllbGROYW1lKHRoaXMubmFtZSwgYXNMZWFmKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY2hpbGRyZW4oKTogRmllbGREZWZpbml0aW9uW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFUeXBlLmdldENoaWxkRmllbGRzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzQ29sbGVjdGlvbigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhVHlwZS5pc0NvbGxlY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVR5cGUudHlwZU5hbWU7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBCYXNlVHJlZUl0ZW0gfSBmcm9tIFwiLi9iYXNlLXRyZWUtaXRlbVwiO1xyXG5pbXBvcnQgeyBEZXNpZ25lclBlZXIgfSBmcm9tIFwiLi9kZXNpZ25lci1wZWVyc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIERlc2lnbmVyUGVlclRyZWVJdGVtIGV4dGVuZHMgQmFzZVRyZWVJdGVtIHtcclxuICAgIHByaXZhdGUgY29tcHV0ZUxldmVsKCkge1xyXG4gICAgICAgIHRoaXMuX2xldmVsID0gMDtcclxuXHJcbiAgICAgICAgbGV0IHBlZXIgPSB0aGlzLm93bmVyO1xyXG5cclxuICAgICAgICB3aGlsZSAocGVlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9sZXZlbCsrO1xyXG5cclxuICAgICAgICAgICAgcGVlciA9IHBlZXIucGFyZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmdldENoaWxkQ291bnQoKTsgaSsrKSB7XHJcbiAgICAgICAgICAgICh0aGlzLmdldENoaWxkQXQoaSkgYXMgRGVzaWduZXJQZWVyVHJlZUl0ZW0pLmNvbXB1dGVMZXZlbCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0SWNvbkNsYXNzKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3duZXIucmVnaXN0cmF0aW9uLmljb25DbGFzcztcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0TGFiZWxUZXh0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3duZXIuZ2V0Q2FyZE9iamVjdCgpLmdldEpzb25UeXBlTmFtZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRBZGRpdGlvbmFsVGV4dCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm93bmVyLmdldFRyZWVJdGVtVGV4dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzZWxlY3RlZCgpIHtcclxuICAgICAgICB0aGlzLm93bmVyLmlzU2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRvbmx5IG93bmVyOiBEZXNpZ25lclBlZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob3duZXI6IERlc2lnbmVyUGVlcikge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMub3duZXIgPSBvd25lcjtcclxuICAgICAgICB0aGlzLm93bmVyLm9uUGFyZW50Q2hhbmdlZCA9IChzZW5kZXI6IERlc2lnbmVyUGVlcikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVMZXZlbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb21wdXRlTGV2ZWwoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDaGlsZENvdW50KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3duZXIuZ2V0Q2hpbGRDb3VudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENoaWxkQXQoaW5kZXg6IG51bWJlcik6IEJhc2VUcmVlSXRlbSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3duZXIuZ2V0Q2hpbGRBdChpbmRleCkudHJlZUl0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlTGF5b3V0KCkge1xyXG4gICAgICAgIHN1cGVyLnVwZGF0ZUxheW91dCgpO1xyXG5cclxuICAgICAgICB0aGlzLmlzU2VsZWN0ZWQgPSB0aGlzLm93bmVyLmlzU2VsZWN0ZWQ7XHJcbiAgICB9XHJcbn0iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgKiBhcyBBZGFwdGl2ZSAgZnJvbSBcImFkYXB0aXZlY2FyZHNcIjtcclxuaW1wb3J0ICogYXMgQ29udHJvbHMgIGZyb20gXCJhZGFwdGl2ZWNhcmRzLWNvbnRyb2xzXCI7XHJcbmltcG9ydCB7IERyYWdnYWJsZUVsZW1lbnQgfSBmcm9tIFwiLi9kcmFnZ2FibGUtZWxlbWVudFwiO1xyXG5pbXBvcnQgeyBQZWVyQ29tbWFuZCB9IGZyb20gXCIuL3BlZXItY29tbWFuZFwiO1xyXG5pbXBvcnQgeyBDYXJkRGVzaWduZXJTdXJmYWNlIH0gZnJvbSBcIi4vY2FyZC1kZXNpZ25lci1zdXJmYWNlXCI7XHJcbmltcG9ydCB7IERlc2lnbmVyUGVlclRyZWVJdGVtIH0gZnJvbSBcIi4vZGVzaWduZXItcGVlci10cmVlaXRlbVwiO1xyXG5pbXBvcnQgeyBSZWN0LCBJUG9pbnQgfSBmcm9tIFwiLi9taXNjZWxsYW5lb3VzXCI7XHJcbmltcG9ydCB7IFRhcmdldFZlcnNpb24sIFZlcnNpb25zLCBpc1ZlcnNpb25MZXNzT3JFcXVhbCwgR2xvYmFsU2V0dGluZ3MgfSBmcm9tIFwiLi9zaGFyZWRcIjtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBEZXNpZ25lclBlZXJJbnBsYWNlRWRpdG9yIHtcclxuICAgIG9uQ2xvc2U6IChhcHBseUNoYW5nZXM6IGJvb2xlYW4pID0+IHZvaWQ7XHJcblxyXG4gICAgYWJzdHJhY3QgaW5pdGlhbGl6ZSgpO1xyXG4gICAgYWJzdHJhY3QgYXBwbHlDaGFuZ2VzKCk7XHJcbiAgICBhYnN0cmFjdCByZW5kZXIoKTogSFRNTEVsZW1lbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDYXJkRWxlbWVudFBlZXJJbnBsYWNlRWRpdG9yPFRDYXJkRWxlbWVudCBleHRlbmRzIEFkYXB0aXZlLkNhcmRFbGVtZW50PiBleHRlbmRzIERlc2lnbmVyUGVlcklucGxhY2VFZGl0b3Ige1xyXG4gICAgcmVhZG9ubHkgY2FyZEVsZW1lbnQ6IFRDYXJkRWxlbWVudDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihjYXJkRWxlbWVudDogVENhcmRFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5jYXJkRWxlbWVudCA9IGNhcmRFbGVtZW50O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRGVzaWduZXJQZWVyUmVnaXN0cmF0aW9uQmFzZSB7XHJcbiAgICByZWFkb25seSBjYXRlZ29yeTogc3RyaW5nO1xyXG4gICAgcmVhZG9ubHkgaWNvbkNsYXNzOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY2F0ZWdvcnk6IHN0cmluZywgaWNvbkNsYXNzOiBzdHJpbmcgPSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xyXG4gICAgICAgIHRoaXMuaWNvbkNsYXNzID0gaWNvbkNsYXNzO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRGVzaWduZXJQZWVyUmVnaXN0cmF0aW9uPFRTb3VyY2UsIFRQZWVyPiBleHRlbmRzIERlc2lnbmVyUGVlclJlZ2lzdHJhdGlvbkJhc2V7XHJcbiAgICByZWFkb25seSBzb3VyY2VUeXBlOiBUU291cmNlO1xyXG5cclxuICAgIHBlZXJUeXBlOiBUUGVlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2VUeXBlOiBUU291cmNlLCBwZWVyVHlwZTogVFBlZXIsIGNhdGVnb3J5OiBzdHJpbmcsIGljb25DbGFzczogc3RyaW5nID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKGNhdGVnb3J5LCBpY29uQ2xhc3MpO1xyXG5cclxuICAgICAgICB0aGlzLnNvdXJjZVR5cGUgPSBzb3VyY2VUeXBlO1xyXG4gICAgICAgIHRoaXMucGVlclR5cGUgPSBwZWVyVHlwZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFByb3BlcnR5U2hlZXRDYXRlZ29yeSB7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgRGVmYXVsdENhdGVnb3J5ID0gXCJfX2RlZmF1bHRDYXRlZ29yeVwiO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IExheW91dENhdGVnb3J5ID0gXCJMYXlvdXRcIjtcclxuICAgIHN0YXRpYyByZWFkb25seSBTdHlsZUNhdGVnb3J5ID0gXCJTdHlsZVwiO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IFNlbGVjdGlvbkFjdGlvbiA9IFwiU2VsZWN0aW9uIGFjdGlvblwiO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IElubGluZUFjdGlvbiA9IFwiSW5saW5lIGFjdGlvblwiO1xyXG5cclxuICAgIHByaXZhdGUgX2VudHJpZXM6IFByb3BlcnR5U2hlZXRFbnRyeVtdID0gW107XHJcblxyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgbmFtZTogc3RyaW5nKSB7IH1cclxuXHJcbiAgICByZW5kZXIoY29udGFpbmVyOiBBZGFwdGl2ZS5Db250YWluZXIsIGNvbnRleHQ6IFByb3BlcnR5U2hlZXRDb250ZXh0LCBkaXNwbGF5Q2F0ZWdvcnlOYW1lOiBib29sZWFuKSB7XHJcbiAgICAgICAgbGV0IGVudHJpZXNUb1JlbmRlcjogUHJvcGVydHlTaGVldEVudHJ5W10gPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgZW50cnkgb2YgdGhpcy5fZW50cmllcykge1xyXG4gICAgICAgICAgICBpZiAoaXNWZXJzaW9uTGVzc09yRXF1YWwoZW50cnkudGFyZ2V0VmVyc2lvbiwgY29udGV4dC50YXJnZXRWZXJzaW9uKSkge1xyXG4gICAgICAgICAgICAgICAgZW50cmllc1RvUmVuZGVyLnB1c2goZW50cnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZW50cmllc1RvUmVuZGVyLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgaWYgKGRpc3BsYXlDYXRlZ29yeU5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGxldCBoZWFkZXIgPSBuZXcgQWRhcHRpdmUuVGV4dEJsb2NrKCk7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXIuc2VwYXJhdG9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGhlYWRlci50ZXh0ID0gXCIqKlwiICsgKHRoaXMubmFtZSA9PT0gUHJvcGVydHlTaGVldENhdGVnb3J5LkRlZmF1bHRDYXRlZ29yeSA/IGNvbnRleHQucGVlci5nZXRDYXJkT2JqZWN0KCkuZ2V0SnNvblR5cGVOYW1lKCkgOiB0aGlzLm5hbWUpICsgXCIqKlwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hZGRJdGVtKGhlYWRlcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGVudHJ5IG9mIGVudHJpZXNUb1JlbmRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzVmVyc2lvbkxlc3NPckVxdWFsKGVudHJ5LnRhcmdldFZlcnNpb24sIGNvbnRleHQudGFyZ2V0VmVyc2lvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkSXRlbShlbnRyeS5yZW5kZXIoY29udGV4dCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFkZCguLi5lbnRyaWVzOiBQcm9wZXJ0eVNoZWV0RW50cnlbXSkge1xyXG4gICAgICAgIHRoaXMuX2VudHJpZXMgPSB0aGlzLl9lbnRyaWVzLmNvbmNhdChlbnRyaWVzKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmUoLi4uZW50cmllczogUHJvcGVydHlTaGVldEVudHJ5W10pIHtcclxuICAgICAgICBmb3IgKGxldCBlbnRyeSBvZiBlbnRyaWVzKSB7XHJcbiAgICAgICAgICAgIGxldCBpbmRleDogbnVtYmVyO1xyXG5cclxuICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5fZW50cmllcy5pbmRleE9mKGVudHJ5KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VudHJpZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSB3aGlsZSAoaW5kZXggPj0gMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEVudHJ5QXQoaW5kZXg6IG51bWJlcik6IFByb3BlcnR5U2hlZXRFbnRyeSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VudHJpZXNbaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBsZW5ndGgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZW50cmllcy5sZW5ndGg7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9wZXJ0eVNoZWV0IHtcclxuICAgIHByaXZhdGUgX2NhdGVnb3JpZXM6IHsgW2tleTogc3RyaW5nXTogUHJvcGVydHlTaGVldENhdGVnb3J5IH0gPSB7fTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBkaXNwbGF5Q2F0ZWdvcnlOYW1lczogYm9vbGVhbiA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLl9jYXRlZ29yaWVzW1Byb3BlcnR5U2hlZXRDYXRlZ29yeS5EZWZhdWx0Q2F0ZWdvcnldID0gbmV3IFByb3BlcnR5U2hlZXRDYXRlZ29yeShQcm9wZXJ0eVNoZWV0Q2F0ZWdvcnkuRGVmYXVsdENhdGVnb3J5KTtcclxuICAgICAgICB0aGlzLl9jYXRlZ29yaWVzW1Byb3BlcnR5U2hlZXRDYXRlZ29yeS5MYXlvdXRDYXRlZ29yeV0gPSBuZXcgUHJvcGVydHlTaGVldENhdGVnb3J5KFByb3BlcnR5U2hlZXRDYXRlZ29yeS5MYXlvdXRDYXRlZ29yeSk7XHJcbiAgICAgICAgdGhpcy5fY2F0ZWdvcmllc1tQcm9wZXJ0eVNoZWV0Q2F0ZWdvcnkuU3R5bGVDYXRlZ29yeV0gPSBuZXcgUHJvcGVydHlTaGVldENhdGVnb3J5KFByb3BlcnR5U2hlZXRDYXRlZ29yeS5TdHlsZUNhdGVnb3J5KTtcclxuICAgIH1cclxuXHJcbiAgICBhZGQoY2F0ZWdvcnlOYW1lOiBzdHJpbmcsIC4uLmVudHJpZXM6IFByb3BlcnR5U2hlZXRFbnRyeVtdKSB7XHJcbiAgICAgICAgbGV0IGNhdGVnb3J5ID0gdGhpcy5fY2F0ZWdvcmllc1tjYXRlZ29yeU5hbWVdO1xyXG5cclxuICAgICAgICBpZiAoIWNhdGVnb3J5KSB7XHJcbiAgICAgICAgICAgIGNhdGVnb3J5ID0gbmV3IFByb3BlcnR5U2hlZXRDYXRlZ29yeShjYXRlZ29yeU5hbWUpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fY2F0ZWdvcmllc1tjYXRlZ29yeU5hbWVdID0gY2F0ZWdvcnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjYXRlZ29yeS5hZGQoLi4uZW50cmllcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlKC4uLmVudHJpZXM6IFByb3BlcnR5U2hlZXRFbnRyeVtdKSB7XHJcbiAgICAgICAgZm9yIChsZXQgY2F0ZWdvcnlOYW1lIG9mIE9iamVjdC5rZXlzKHRoaXMuX2NhdGVnb3JpZXMpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhdGVnb3JpZXNbY2F0ZWdvcnlOYW1lXS5yZW1vdmUoLi4uZW50cmllcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcihjb250YWluZXI6IEFkYXB0aXZlLkNvbnRhaW5lciwgY29udGV4dDogUHJvcGVydHlTaGVldENvbnRleHQpIHtcclxuICAgICAgICBmb3IgKGxldCBjYXRlZ29yeU5hbWUgb2YgT2JqZWN0LmtleXModGhpcy5fY2F0ZWdvcmllcykpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2F0ZWdvcmllc1tjYXRlZ29yeU5hbWVdLnJlbmRlcihjb250YWluZXIsIGNvbnRleHQsIHRoaXMuZGlzcGxheUNhdGVnb3J5TmFtZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIERlc2lnbmVyUGVlciBleHRlbmRzIERyYWdnYWJsZUVsZW1lbnQge1xyXG4gICAgcHJpdmF0ZSBfcGFyZW50OiBEZXNpZ25lclBlZXI7XHJcbiAgICBwcml2YXRlIF9jaGlsZHJlbjogQXJyYXk8RGVzaWduZXJQZWVyPiA9IFtdO1xyXG4gICAgcHJpdmF0ZSBfaXNTZWxlY3RlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfaW5wbGFjZUVkaXRvck92ZXJsYXk6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBfaW5wbGFjZUVkaXRvcjogRGVzaWduZXJQZWVySW5wbGFjZUVkaXRvciA9IG51bGw7XHJcblxyXG4gICAgcHJpdmF0ZSBjbG9zZUlucGxhY2VFZGl0b3IoYXBwbHlDaGFuZ2VzOiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lucGxhY2VFZGl0b3IpIHtcclxuICAgICAgICAgICAgaWYgKGFwcGx5Q2hhbmdlcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW5wbGFjZUVkaXRvci5hcHBseUNoYW5nZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2lucGxhY2VFZGl0b3IgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5faW5wbGFjZUVkaXRvck92ZXJsYXkucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdHJ5T3BlbklucGxhY2VFZGl0b3IoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgdGhpcy5faW5wbGFjZUVkaXRvciA9IHRoaXMuY3JlYXRlSW5wbGFjZUVkaXRvcigpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5faW5wbGFjZUVkaXRvcikge1xyXG4gICAgICAgICAgICB0aGlzLl9pbnBsYWNlRWRpdG9yLm9uQ2xvc2UgPSAoYXBwbHlDaGFuZ2VzOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlSW5wbGFjZUVkaXRvcihhcHBseUNoYW5nZXMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9pbnBsYWNlRWRpdG9yT3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIHRoaXMuX2lucGxhY2VFZGl0b3JPdmVybGF5LnRhYkluZGV4ID0gMDtcclxuICAgICAgICAgICAgdGhpcy5faW5wbGFjZUVkaXRvck92ZXJsYXkuc3R5bGUuekluZGV4ID0gXCI2MDBcIjtcclxuICAgICAgICAgICAgdGhpcy5faW5wbGFjZUVkaXRvck92ZXJsYXkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ0cmFuc3BhcmVudFwiO1xyXG4gICAgICAgICAgICB0aGlzLl9pbnBsYWNlRWRpdG9yT3ZlcmxheS5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuICAgICAgICAgICAgdGhpcy5faW5wbGFjZUVkaXRvck92ZXJsYXkuc3R5bGUubGVmdCA9IFwiMFwiO1xyXG4gICAgICAgICAgICB0aGlzLl9pbnBsYWNlRWRpdG9yT3ZlcmxheS5zdHlsZS50b3AgPSBcIjBcIjtcclxuICAgICAgICAgICAgdGhpcy5faW5wbGFjZUVkaXRvck92ZXJsYXkuc3R5bGUud2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHRoaXMuX2lucGxhY2VFZGl0b3JPdmVybGF5LnN0eWxlLmhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHRoaXMuX2lucGxhY2VFZGl0b3JPdmVybGF5Lm9uZm9jdXMgPSAoZSkgPT4geyB0aGlzLmNsb3NlSW5wbGFjZUVkaXRvcih0cnVlKTsgfTtcclxuXHJcbiAgICAgICAgICAgIGxldCBib3VuZGluZ1JlY3QgPSB0aGlzLmdldENhcmRPYmplY3RCb3VuZGluZ1JlY3QoKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBpbnBsYWNlRWRpdG9ySG9zdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGlucGxhY2VFZGl0b3JIb3N0LmNsYXNzTmFtZSA9IFwiYWNkLWlucGxhY2UtZWRpdG9yLWhvc3RcIjtcclxuICAgICAgICAgICAgaW5wbGFjZUVkaXRvckhvc3Quc3R5bGUubGVmdCA9IE1hdGguZmxvb3IoYm91bmRpbmdSZWN0LmxlZnQgKyBwYWdlWE9mZnNldCkgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIGlucGxhY2VFZGl0b3JIb3N0LnN0eWxlLnRvcCA9IE1hdGguZmxvb3IoYm91bmRpbmdSZWN0LnRvcCArIHBhZ2VZT2Zmc2V0KSArIFwicHhcIjtcclxuICAgICAgICAgICAgaW5wbGFjZUVkaXRvckhvc3Quc3R5bGUud2lkdGggPSBNYXRoLmNlaWwoYm91bmRpbmdSZWN0LndpZHRoKSArIFwicHhcIjtcclxuICAgICAgICAgICAgaW5wbGFjZUVkaXRvckhvc3Quc3R5bGUuaGVpZ2h0ID0gTWF0aC5jZWlsKGJvdW5kaW5nUmVjdC5oZWlnaHQpICsgXCJweFwiO1xyXG5cclxuICAgICAgICAgICAgbGV0IHJlbmRlcmVkSW5wbGFjZUVkaXRvciA9IHRoaXMuX2lucGxhY2VFZGl0b3IucmVuZGVyKCk7XHJcbiAgICAgICAgICAgIHJlbmRlcmVkSW5wbGFjZUVkaXRvci5jbGFzc0xpc3QuYWRkKFwiYWNkLWlucGxhY2UtZWRpdG9yXCIpO1xyXG4gICAgICAgICAgICByZW5kZXJlZElucGxhY2VFZGl0b3IudGFiSW5kZXggPSAwO1xyXG4gICAgICAgICAgICByZW5kZXJlZElucGxhY2VFZGl0b3Iub25ibHVyID0gKGUpID0+IHsgdGhpcy5jbG9zZUlucGxhY2VFZGl0b3IodHJ1ZSk7IH07XHJcblxyXG4gICAgICAgICAgICBpbnBsYWNlRWRpdG9ySG9zdC5hcHBlbmRDaGlsZChyZW5kZXJlZElucGxhY2VFZGl0b3IpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5faW5wbGFjZUVkaXRvck92ZXJsYXkuYXBwZW5kQ2hpbGQoaW5wbGFjZUVkaXRvckhvc3QpO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9pbnBsYWNlRWRpdG9yT3ZlcmxheSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9pbnBsYWNlRWRpdG9yLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBjbGljayhlOiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgc3VwZXIuY2xpY2soZSk7XHJcblxyXG4gICAgICAgIHRoaXMuaXNTZWxlY3RlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGRvdWJsZUNsaWNrKGU6IE1vdXNlRXZlbnQpIHtcclxuICAgICAgICBzdXBlci5kb3VibGVDbGljayhlKTtcclxuXHJcbiAgICAgICAgdGhpcy50cnlPcGVuSW5wbGFjZUVkaXRvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpc0NvbnRhaW5lcigpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldFRvb2xUaXAoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxBZGRDb21tYW5kcyhjb21tYW5kczogQXJyYXk8UGVlckNvbW1hbmQ+KSB7XHJcbiAgICAgICAgLy8gRG8gbm90aGluZyBpbiBiYXNlIGltcGxlbWVudGF0aW9uXHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsUmVuZGVyKCk6IEhUTUxFbGVtZW50IHtcclxuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYWNkLXBlZXJcIik7XHJcblxyXG4gICAgICAgIGxldCB0b29sVGlwID0gdGhpcy5nZXRUb29sVGlwKCk7XHJcblxyXG4gICAgICAgIGlmICh0b29sVGlwKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQudGl0bGUgPSB0b29sVGlwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNDb250YWluZXIoKSkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjb250YWluZXJcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG5cclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxVcGRhdGVDc3NTdHlsZXMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kcmFnZ2luZykge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZHJhZ2dpbmdcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZHJhZ2dpbmdcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBwZWVyQWRkZWQobmV3UGVlcjogRGVzaWduZXJQZWVyKSB7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VkKGZhbHNlKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMub25QZWVyQWRkZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vblBlZXJBZGRlZCh0aGlzLCBuZXdQZWVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHBlZXJSZW1vdmVkKHBlZXI6IERlc2lnbmVyUGVlcikge1xyXG4gICAgICAgIGlmICh0aGlzLm9uUGVlclJlbW92ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vblBlZXJSZW1vdmVkKHBlZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxVcGRhdGVMYXlvdXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGxldCBjbGllbnRSZWN0ID0gdGhpcy5nZXRCb3VuZGluZ1JlY3QoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLndpZHRoID0gY2xpZW50UmVjdC53aWR0aCArIFwicHhcIjtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gY2xpZW50UmVjdC5oZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLmxlZnQgPSBjbGllbnRSZWN0LmxlZnQgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLnRvcCA9IGNsaWVudFJlY3QudG9wICsgXCJweFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgY3JlYXRlSW5wbGFjZUVkaXRvcigpOiBEZXNpZ25lclBlZXJJbnBsYWNlRWRpdG9yIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxHZXRUcmVlSXRlbVRleHQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgaW50ZXJuYWxSZW1vdmUoKTogYm9vbGVhbjtcclxuXHJcbiAgICByZWFkb25seSByZWdpc3RyYXRpb246IERlc2lnbmVyUGVlclJlZ2lzdHJhdGlvbkJhc2U7XHJcbiAgICByZWFkb25seSBkZXNpZ25lclN1cmZhY2U6IENhcmREZXNpZ25lclN1cmZhY2U7XHJcbiAgICByZWFkb25seSB0cmVlSXRlbTogRGVzaWduZXJQZWVyVHJlZUl0ZW07XHJcblxyXG4gICAgb25QYXJlbnRDaGFuZ2VkOiAoc2VuZGVyOiBEZXNpZ25lclBlZXIpID0+IHZvaWQ7XHJcbiAgICBvblNlbGVjdGVkQ2hhbmdlZDogKHNlbmRlcjogRGVzaWduZXJQZWVyKSA9PiB2b2lkO1xyXG4gICAgb25DaGFuZ2VkOiAoc2VuZGVyOiBEZXNpZ25lclBlZXIsIHVwZGF0ZVByb3BlcnR5U2hlZXQ6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgICBvblBlZXJSZW1vdmVkOiAoc2VuZGVyOiBEZXNpZ25lclBlZXIpID0+IHZvaWQ7XHJcbiAgICBvblBlZXJBZGRlZDogKHNlbmRlcjogRGVzaWduZXJQZWVyLCBuZXdQZWVyOiBEZXNpZ25lclBlZXIpID0+IHZvaWQ7XHJcblxyXG4gICAgYWJzdHJhY3QgZ2V0Q2FyZE9iamVjdCgpOiBBZGFwdGl2ZS5DYXJkT2JqZWN0O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBhcmVudDogRGVzaWduZXJQZWVyLCBkZXNpZ25lclN1cmZhY2U6IENhcmREZXNpZ25lclN1cmZhY2UsIHJlZ2lzdHJhdGlvbjogRGVzaWduZXJQZWVyUmVnaXN0cmF0aW9uQmFzZSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcclxuXHJcbiAgICAgICAgaWYgKCFyZWdpc3RyYXRpb24pIHtcclxuICAgICAgICAgICAgYWxlcnQoKDxhbnk+dGhpcykuY29uc3RydWN0b3IubmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJlZ2lzdHJhdGlvbiA9IHJlZ2lzdHJhdGlvbjtcclxuICAgICAgICB0aGlzLmRlc2lnbmVyU3VyZmFjZSA9IGRlc2lnbmVyU3VyZmFjZTtcclxuICAgICAgICB0aGlzLnRyZWVJdGVtID0gbmV3IERlc2lnbmVyUGVlclRyZWVJdGVtKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGFic3RyYWN0IGdldEJvdW5kaW5nUmVjdCgpOiBSZWN0O1xyXG4gICAgYWJzdHJhY3QgZ2V0Q2FyZE9iamVjdEJvdW5kaW5nUmVjdCgpOiBSZWN0O1xyXG5cclxuICAgIGNoYW5nZWQodXBkYXRlUHJvcGVydHlTaGVldDogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICh0aGlzLm9uQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlZCh0aGlzLCB1cGRhdGVQcm9wZXJ0eVNoZWV0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VHJlZUl0ZW1UZXh0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxHZXRUcmVlSXRlbVRleHQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwb3B1bGF0ZVByb3BlcnR5U2hlZXQocHJvcGVydHlTaGVldDogUHJvcGVydHlTaGVldCwgZGVmYXVsdENhdGVnb3J5OiBzdHJpbmcgPSBQcm9wZXJ0eVNoZWV0Q2F0ZWdvcnkuRGVmYXVsdENhdGVnb3J5KSB7XHJcbiAgICAgICAgLy8gRG8gbm90aGluZyBpbiBiYXNlIGltcGxlbWVudGF0aW9uXHJcbiAgICB9XHJcblxyXG4gICAgY2FuRHJvcChwZWVyOiBEZXNpZ25lclBlZXIpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuQmVSZW1vdmVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeURyb3AocGVlcjogRGVzaWduZXJQZWVyLCBpbnNlcnRpb25Qb2ludDogSVBvaW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGluc2VydENoaWxkKHBlZXI6IERlc2lnbmVyUGVlciwgaW5kZXg6IG51bWJlciA9IC0xKSB7XHJcbiAgICAgICAgaWYgKGluZGV4ID09IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoaWxkcmVuLnB1c2gocGVlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDAsIHBlZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcGVlci5wYXJlbnQgPSB0aGlzO1xyXG5cclxuICAgICAgICB0aGlzLnBlZXJBZGRlZChwZWVyKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVDaGlsZChwZWVyOiBEZXNpZ25lclBlZXIpIHtcclxuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9jaGlsZHJlbi5pbmRleE9mKHBlZXIpO1xyXG5cclxuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICBwZWVyLnBhcmVudCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoaWxkcmVuLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldENoaWxkQ291bnQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENoaWxkQXQoaW5kZXg6IG51bWJlcik6IERlc2lnbmVyUGVlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoaWxkcmVuW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb21tYW5kcyhwcm9tb3RlUGFyZW50Q29tbWFuZHM6IGJvb2xlYW4gPSBmYWxzZSk6IEFycmF5PFBlZXJDb21tYW5kPiB7XHJcbiAgICAgICAgbGV0IHJlc3VsdDogQXJyYXk8UGVlckNvbW1hbmQ+ID0gW107XHJcblxyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxBZGRDb21tYW5kcyhyZXN1bHQpO1xyXG5cclxuICAgICAgICBpZiAocHJvbW90ZVBhcmVudENvbW1hbmRzICYmIHRoaXMucGFyZW50KSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJlbnRDb21tYW5kcyA9IHRoaXMucGFyZW50LmdldENvbW1hbmRzKCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBjb21tYW5kIG9mIHBhcmVudENvbW1hbmRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tbWFuZC5pc1Byb21vdGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChjb21tYW5kKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmUob25seUZyb21DYXJkOiBib29sZWFuLCByZW1vdmVDaGlsZHJlbjogYm9vbGVhbik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChyZW1vdmVDaGlsZHJlbikge1xyXG4gICAgICAgICAgICB3aGlsZSAodGhpcy5fY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW5bMF0ucmVtb3ZlKG9ubHlGcm9tQ2FyZCwgcmVtb3ZlQ2hpbGRyZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5pbnRlcm5hbFJlbW92ZSgpO1xyXG5cclxuICAgICAgICBpZiAocmVzdWx0ICYmICFvbmx5RnJvbUNhcmQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVDaGlsZCh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVFbGVtZW50c0Zyb21EZXNpZ25lclN1cmZhY2UoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucGVlclJlbW92ZWQodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEVsZW1lbnRzVG9EZXNpZ25lclN1cmZhY2UoZGVzaWduZXJTdXJmYWNlOiBIVE1MRWxlbWVudCwgcHJvY2Vzc0NoaWxkcmVuOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgICAgICBkZXNpZ25lclN1cmZhY2UuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJlZEVsZW1lbnQpO1xyXG5cclxuICAgICAgICBpZiAocHJvY2Vzc0NoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5nZXRDaGlsZENvdW50KCk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDaGlsZEF0KGkpLmFkZEVsZW1lbnRzVG9EZXNpZ25lclN1cmZhY2UoZGVzaWduZXJTdXJmYWNlLCBwcm9jZXNzQ2hpbGRyZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUVsZW1lbnRzRnJvbURlc2lnbmVyU3VyZmFjZShwcm9jZXNzQ2hpbGRyZW46IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnJlbW92ZSgpO1xyXG5cclxuICAgICAgICBpZiAocHJvY2Vzc0NoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5nZXRDaGlsZENvdW50KCk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDaGlsZEF0KGkpLnJlbW92ZUVsZW1lbnRzRnJvbURlc2lnbmVyU3VyZmFjZShwcm9jZXNzQ2hpbGRyZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGJ1aWxkUHJvcGVydHlTaGVldENhcmQodGFyZ2V0VmVyc2lvbjogVGFyZ2V0VmVyc2lvbik6IEFkYXB0aXZlLkFkYXB0aXZlQ2FyZCB7XHJcbiAgICAgICAgbGV0IGNhcmQgPSBuZXcgQWRhcHRpdmUuQWRhcHRpdmVDYXJkKCk7XHJcbiAgICAgICAgY2FyZC5wYWRkaW5nID0gbmV3IEFkYXB0aXZlLlBhZGRpbmdEZWZpbml0aW9uKFxyXG4gICAgICAgICAgICBBZGFwdGl2ZS5TcGFjaW5nLlNtYWxsLFxyXG4gICAgICAgICAgICBBZGFwdGl2ZS5TcGFjaW5nLlNtYWxsLFxyXG4gICAgICAgICAgICBBZGFwdGl2ZS5TcGFjaW5nLlNtYWxsLFxyXG4gICAgICAgICAgICBBZGFwdGl2ZS5TcGFjaW5nLlNtYWxsKTtcclxuXHJcbiAgICAgICAgbGV0IHByb3BlcnR5U2hlZXQgPSBuZXcgUHJvcGVydHlTaGVldCgpO1xyXG5cclxuICAgICAgICB0aGlzLnBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0KTtcclxuXHJcbiAgICAgICAgcHJvcGVydHlTaGVldC5yZW5kZXIoY2FyZCwgbmV3IFByb3BlcnR5U2hlZXRDb250ZXh0KHRhcmdldFZlcnNpb24sIHRoaXMpKTtcclxuXHJcbiAgICAgICAgbGV0IGFjdGlvblNldCA9IG5ldyBBZGFwdGl2ZS5BY3Rpb25TZXQoKTtcclxuICAgICAgICBsZXQgY29tbWFuZHMgPSB0aGlzLmdldENvbW1hbmRzKHRydWUpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBjb21tYW5kIG9mIGNvbW1hbmRzKSB7XHJcbiAgICAgICAgICAgIGxldCBhY3Rpb24gPSBuZXcgQWRhcHRpdmUuU3VibWl0QWN0aW9uKCk7XHJcbiAgICAgICAgICAgIGFjdGlvbi50aXRsZSA9IGNvbW1hbmQubmFtZTtcclxuICAgICAgICAgICAgYWN0aW9uLm9uRXhlY3V0ZSA9IChzZW5kZXI6IEFkYXB0aXZlLkFjdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29tbWFuZC5leGVjdXRlKGNvbW1hbmQsIGFjdGlvbi5yZW5kZXJlZEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25TZXQuYWRkQWN0aW9uKGFjdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhY3Rpb25TZXQuc2VwYXJhdG9yID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgY2FyZC5hZGRJdGVtKGFjdGlvblNldCk7XHJcblxyXG4gICAgICAgIHJldHVybiBjYXJkO1xyXG4gICAgfVxyXG5cclxuICAgIHNjcm9sbEludG9WaWV3KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zY3JvbGxJbnRvVmlldygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudHJlZUl0ZW0gJiYgdGhpcy50cmVlSXRlbS5yZW5kZXJlZEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy50cmVlSXRlbS5yZW5kZXJlZEVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBhcmVudCgpOiBEZXNpZ25lclBlZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHBhcmVudCh2YWx1ZTogRGVzaWduZXJQZWVyKSB7XHJcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gdmFsdWU7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm9uUGFyZW50Q2hhbmdlZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFyZW50Q2hhbmdlZCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzU2VsZWN0ZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzU2VsZWN0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGlzU2VsZWN0ZWQodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAodmFsdWUgIT0gdGhpcy5faXNTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9pc1NlbGVjdGVkID0gdmFsdWU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xyXG4gICAgICAgICAgICB0aGlzLnRyZWVJdGVtLnVwZGF0ZUxheW91dCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub25TZWxlY3RlZENoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TZWxlY3RlZENoYW5nZWQodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9wZXJ0eVNoZWV0Q29udGV4dCB7XHJcbiAgICBwcml2YXRlIF90YXJnZXQ6IG9iamVjdCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSB0YXJnZXRWZXJzaW9uOiBUYXJnZXRWZXJzaW9uLCByZWFkb25seSBwZWVyOiBDYXJkT2JqZWN0UGVlciwgdGFyZ2V0OiBvYmplY3QgPSB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLl90YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHRhcmdldCgpOiBvYmplY3Qge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90YXJnZXQgIT0gdW5kZWZpbmVkID8gdGhpcy5fdGFyZ2V0IDogdGhpcy5wZWVyLmdldENhcmRPYmplY3QoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFByb3BlcnR5U2hlZXRFbnRyeSB7XHJcbiAgICBhYnN0cmFjdCByZW5kZXIoY29udGV4dDogUHJvcGVydHlTaGVldENvbnRleHQpOiBBZGFwdGl2ZS5DYXJkRWxlbWVudDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSB0YXJnZXRWZXJzaW9uOiBUYXJnZXRWZXJzaW9uKSB7IH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFN1YlByb3BlcnR5U2hlZXRFbnRyeSB7XHJcbiAgICByZW5kZXIoY29udGV4dDogUHJvcGVydHlTaGVldENvbnRleHQpOiBBZGFwdGl2ZS5DYXJkRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IGNvbnRhaW5lciA9IG5ldyBBZGFwdGl2ZS5Db250YWluZXIoKTtcclxuICAgICAgICBjb250YWluZXIuc3BhY2luZyA9IEFkYXB0aXZlLlNwYWNpbmcuU21hbGw7XHJcblxyXG4gICAgICAgIHRoaXMucHJvcGVydHlTaGVldC5yZW5kZXIoY29udGFpbmVyLCBuZXcgUHJvcGVydHlTaGVldENvbnRleHQoY29udGV4dC50YXJnZXRWZXJzaW9uLCBjb250ZXh0LnBlZXIsIHRoaXMudGFyZ2V0KSk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgdGFyZ2V0VmVyc2lvbjogVGFyZ2V0VmVyc2lvbiwgcmVhZG9ubHkgdGFyZ2V0OiBvYmplY3QsIHJlYWRvbmx5IHByb3BlcnR5U2hlZXQ6IFByb3BlcnR5U2hlZXQpIHsgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ3VzdG9tUHJvcGVydHlTaGVldEVudHJ5IGV4dGVuZHMgUHJvcGVydHlTaGVldEVudHJ5IHtcclxuICAgIHJlbmRlcihjb250ZXh0OiBQcm9wZXJ0eVNoZWV0Q29udGV4dCk6IEFkYXB0aXZlLkNhcmRFbGVtZW50IHtcclxuICAgICAgICBpZiAodGhpcy5vblJlbmRlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vblJlbmRlcihjb250ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgdGFyZ2V0VmVyc2lvbjogVGFyZ2V0VmVyc2lvbiwgcmVhZG9ubHkgb25SZW5kZXI6IChjb250ZXh0OiBQcm9wZXJ0eVNoZWV0Q29udGV4dCkgPT4gQWRhcHRpdmUuQ2FyZEVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlcih0YXJnZXRWZXJzaW9uKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNpbmdsZUlucHV0UHJvcGVydHlFZGl0b3IgZXh0ZW5kcyBQcm9wZXJ0eVNoZWV0RW50cnkge1xyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGNyZWF0ZUlucHV0KGNvbnRleHQ6IFByb3BlcnR5U2hlZXRDb250ZXh0KTogQWRhcHRpdmUuSW5wdXQ7XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldFByb3BlcnR5VmFsdWUoY29udGV4dDogUHJvcGVydHlTaGVldENvbnRleHQpOiBhbnkge1xyXG4gICAgICAgIHJldHVybiBjb250ZXh0LnRhcmdldFt0aGlzLnByb3BlcnR5TmFtZV07XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHNldFByb3BlcnR5VmFsdWUoY29udGV4dDogUHJvcGVydHlTaGVldENvbnRleHQsIHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICBjb250ZXh0LnRhcmdldFt0aGlzLnByb3BlcnR5TmFtZV0gPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoY29udGV4dDogUHJvcGVydHlTaGVldENvbnRleHQpOiBBZGFwdGl2ZS5DYXJkRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IGxlZnRDb2x1bW4gPSBuZXcgQWRhcHRpdmUuQ29sdW1uKCk7XHJcbiAgICAgICAgbGVmdENvbHVtbi53aWR0aCA9IG5ldyBBZGFwdGl2ZS5TaXplQW5kVW5pdCgxMDAsIEFkYXB0aXZlLlNpemVVbml0LlBpeGVsKTtcclxuICAgICAgICBsZWZ0Q29sdW1uLnZlcnRpY2FsQ29udGVudEFsaWdubWVudCA9IEFkYXB0aXZlLlZlcnRpY2FsQWxpZ25tZW50LkNlbnRlcjtcclxuXHJcbiAgICAgICAgbGV0IHJpZ2h0Q29sdW1uID0gbmV3IEFkYXB0aXZlLkNvbHVtbigpO1xyXG4gICAgICAgIHJpZ2h0Q29sdW1uLndpZHRoID0gXCJzdHJldGNoXCI7XHJcbiAgICAgICAgcmlnaHRDb2x1bW4udmVydGljYWxDb250ZW50QWxpZ25tZW50ID0gQWRhcHRpdmUuVmVydGljYWxBbGlnbm1lbnQuQ2VudGVyO1xyXG5cclxuICAgICAgICBsZXQgY29sdW1uU2V0ID0gbmV3IEFkYXB0aXZlLkNvbHVtblNldCgpO1xyXG5cclxuICAgICAgICBjb2x1bW5TZXQuc3BhY2luZyA9IEFkYXB0aXZlLlNwYWNpbmcuU21hbGw7XHJcblxyXG4gICAgICAgIGNvbHVtblNldC5hZGRDb2x1bW4obGVmdENvbHVtbik7XHJcbiAgICAgICAgY29sdW1uU2V0LmFkZENvbHVtbihyaWdodENvbHVtbik7XHJcblxyXG4gICAgICAgIGxldCBsYWJlbCA9IG5ldyBBZGFwdGl2ZS5UZXh0QmxvY2soKTtcclxuICAgICAgICBsYWJlbC5ob3Jpem9udGFsQWxpZ25tZW50ID0gQWRhcHRpdmUuSG9yaXpvbnRhbEFsaWdubWVudC5SaWdodDtcclxuICAgICAgICBsYWJlbC53cmFwID0gdHJ1ZTtcclxuICAgICAgICBsYWJlbC50ZXh0ID0gdGhpcy5sYWJlbDtcclxuXHJcbiAgICAgICAgbGV0IGlucHV0ID0gdGhpcy5jcmVhdGVJbnB1dChjb250ZXh0KTtcclxuICAgICAgICBpbnB1dC5kZWZhdWx0VmFsdWUgPSB0aGlzLmdldFByb3BlcnR5VmFsdWUoY29udGV4dCk7XHJcbiAgICAgICAgaW5wdXQub25WYWx1ZUNoYW5nZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydHlWYWx1ZShjb250ZXh0LCBpbnB1dC52YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICBjb250ZXh0LnBlZXIuY2hhbmdlZCh0aGlzLmNhdXNlc1Byb3BlcnR5U2hlZXRSZWZyZXNoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxlZnRDb2x1bW4uYWRkSXRlbShsYWJlbCk7XHJcbiAgICAgICAgcmlnaHRDb2x1bW4uYWRkSXRlbShpbnB1dCk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb2x1bW5TZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcmVhZG9ubHkgdGFyZ2V0VmVyc2lvbjogVGFyZ2V0VmVyc2lvbixcclxuICAgICAgICByZWFkb25seSBwcm9wZXJ0eU5hbWU6IHN0cmluZyxcclxuICAgICAgICByZWFkb25seSBsYWJlbDogc3RyaW5nLFxyXG4gICAgICAgIHJlYWRvbmx5IGNhdXNlc1Byb3BlcnR5U2hlZXRSZWZyZXNoOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgICAgICBzdXBlcih0YXJnZXRWZXJzaW9uKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFN0cmluZ1Byb3BlcnR5RWRpdG9yIGV4dGVuZHMgU2luZ2xlSW5wdXRQcm9wZXJ0eUVkaXRvciB7XHJcbiAgICBwcm90ZWN0ZWQgY3JlYXRlSW5wdXQoY29udGV4dDogUHJvcGVydHlTaGVldENvbnRleHQpOiBBZGFwdGl2ZS5JbnB1dCB7XHJcbiAgICAgICAgbGV0IGlucHV0ID0gbmV3IEFkYXB0aXZlLlRleHRJbnB1dCgpO1xyXG4gICAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gXCIobm90IHNldClcIjtcclxuICAgICAgICBpbnB1dC5pc011bHRpbGluZSA9IHRoaXMuaXNNdWx0aWxpbmU7XHJcblxyXG4gICAgICAgIHJldHVybiBpbnB1dDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICByZWFkb25seSB0YXJnZXRWZXJzaW9uOiBUYXJnZXRWZXJzaW9uLFxyXG4gICAgICAgIHJlYWRvbmx5IHByb3BlcnR5TmFtZTogc3RyaW5nLFxyXG4gICAgICAgIHJlYWRvbmx5IGxhYmVsOiBzdHJpbmcsXHJcbiAgICAgICAgcmVhZG9ubHkgaXNNdWx0aWxpbmU6IGJvb2xlYW4gPSBmYWxzZSxcclxuICAgICAgICByZWFkb25seSBjYXVzZXNQcm9wZXJ0eVNoZWV0UmVmcmVzaDogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICAgICAgc3VwZXIodGFyZ2V0VmVyc2lvbiwgcHJvcGVydHlOYW1lLCBsYWJlbCwgY2F1c2VzUHJvcGVydHlTaGVldFJlZnJlc2gpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTnVtYmVyUHJvcGVydHlFZGl0b3IgZXh0ZW5kcyBTaW5nbGVJbnB1dFByb3BlcnR5RWRpdG9yIHtcclxuICAgIHByb3RlY3RlZCBzZXRQcm9wZXJ0eVZhbHVlKGNvbnRleHQ6IFByb3BlcnR5U2hlZXRDb250ZXh0LCB2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29udGV4dC50YXJnZXRbdGhpcy5wcm9wZXJ0eU5hbWVdID0gcGFyc2VGbG9hdCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIHtcclxuICAgICAgICAgICAgY29udGV4dC50YXJnZXRbdGhpcy5wcm9wZXJ0eU5hbWVdID0gdGhpcy5kZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBjcmVhdGVJbnB1dChjb250ZXh0OiBQcm9wZXJ0eVNoZWV0Q29udGV4dCk6IEFkYXB0aXZlLklucHV0IHtcclxuICAgICAgICBsZXQgaW5wdXQgPSBuZXcgQWRhcHRpdmUuTnVtYmVySW5wdXQoKTtcclxuICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IFwiKG5vdCBzZXQpXCI7XHJcblxyXG4gICAgICAgIHJldHVybiBpbnB1dDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICByZWFkb25seSB0YXJnZXRWZXJzaW9uOiBUYXJnZXRWZXJzaW9uLFxyXG4gICAgICAgIHJlYWRvbmx5IHByb3BlcnR5TmFtZTogc3RyaW5nLFxyXG4gICAgICAgIHJlYWRvbmx5IGxhYmVsOiBzdHJpbmcsXHJcbiAgICAgICAgcmVhZG9ubHkgZGVmYXVsdFZhbHVlOiBudW1iZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXHJcbiAgICAgICAgcmVhZG9ubHkgY2F1c2VzUHJvcGVydHlTaGVldFJlZnJlc2g6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICAgIHN1cGVyKHRhcmdldFZlcnNpb24sIHByb3BlcnR5TmFtZSwgbGFiZWwsIGNhdXNlc1Byb3BlcnR5U2hlZXRSZWZyZXNoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE9iamVjdFByb3BlcnR5RWRpdG9yIGV4dGVuZHMgU3RyaW5nUHJvcGVydHlFZGl0b3Ige1xyXG4gICAgcHJvdGVjdGVkIGdldFByb3BlcnR5VmFsdWUoY29udGV4dDogUHJvcGVydHlTaGVldENvbnRleHQpOiBhbnkge1xyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShjb250ZXh0LnRhcmdldFt0aGlzLnByb3BlcnR5TmFtZV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzZXRQcm9wZXJ0eVZhbHVlKGNvbnRleHQ6IFByb3BlcnR5U2hlZXRDb250ZXh0LCB2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29udGV4dC50YXJnZXRbdGhpcy5wcm9wZXJ0eU5hbWVdID0gSlNPTi5wYXJzZSh2YWx1ZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDdXN0b21DYXJkT2JqZWN0UHJvcGVydHlFZGl0b3IgZXh0ZW5kcyBTdHJpbmdQcm9wZXJ0eUVkaXRvciB7XHJcbiAgICBwcm90ZWN0ZWQgZ2V0UHJvcGVydHlWYWx1ZShjb250ZXh0OiBQcm9wZXJ0eVNoZWV0Q29udGV4dCk6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQucGVlci5nZXRDYXJkT2JqZWN0KCkuZ2V0Q3VzdG9tUHJvcGVydHkodGhpcy5wcm9wZXJ0eU5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzZXRQcm9wZXJ0eVZhbHVlKGNvbnRleHQ6IFByb3BlcnR5U2hlZXRDb250ZXh0LCB2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29udGV4dC5wZWVyLmdldENhcmRPYmplY3QoKS5zZXRDdXN0b21Qcm9wZXJ0eSh0aGlzLnByb3BlcnR5TmFtZSwgdmFsdWUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQm9vbGVhblByb3BlcnR5RWRpdG9yIGV4dGVuZHMgU2luZ2xlSW5wdXRQcm9wZXJ0eUVkaXRvciB7XHJcbiAgICBwcm90ZWN0ZWQgZ2V0UHJvcGVydHlWYWx1ZShjb250ZXh0OiBQcm9wZXJ0eVNoZWV0Q29udGV4dCk6IGFueSB7XHJcbiAgICAgICAgbGV0IHYgPSBjb250ZXh0LnRhcmdldFt0aGlzLnByb3BlcnR5TmFtZV07XHJcblxyXG4gICAgICAgIHJldHVybiB0eXBlb2YgdiA9PT0gXCJib29sZWFuXCIgPyB2LnRvU3RyaW5nKCkgOiBcImZhbHNlXCI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHNldFByb3BlcnR5VmFsdWUoY29udGV4dDogUHJvcGVydHlTaGVldENvbnRleHQsIHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICBjb250ZXh0LnRhcmdldFt0aGlzLnByb3BlcnR5TmFtZV0gPSB2YWx1ZSA9PSBcInRydWVcIjtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgY3JlYXRlSW5wdXQoY29udGV4dDogUHJvcGVydHlTaGVldENvbnRleHQpOiBBZGFwdGl2ZS5JbnB1dCB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBZGFwdGl2ZS5Ub2dnbGVJbnB1dCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElWZXJzaW9uZWRDaG9pY2Uge1xyXG4gICAgdGFyZ2V0VmVyc2lvbjogVGFyZ2V0VmVyc2lvbjtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHZhbHVlOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDaG9pY2VQcm9wZXJ0eUVkaXRvciBleHRlbmRzIFNpbmdsZUlucHV0UHJvcGVydHlFZGl0b3Ige1xyXG4gICAgcHJvdGVjdGVkIGNyZWF0ZUlucHV0KGNvbnRleHQ6IFByb3BlcnR5U2hlZXRDb250ZXh0KTogQWRhcHRpdmUuSW5wdXQge1xyXG4gICAgICAgIGxldCBpbnB1dCA9IG5ldyBBZGFwdGl2ZS5DaG9pY2VTZXRJbnB1dCgpO1xyXG4gICAgICAgIGlucHV0LmlzQ29tcGFjdCA9IHRydWU7XHJcbiAgICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSBcIihub3Qgc2V0KVwiO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBjaG9pY2Ugb2YgdGhpcy5jaG9pY2VzKSB7XHJcbiAgICAgICAgICAgIGlmIChpc1ZlcnNpb25MZXNzT3JFcXVhbChjaG9pY2UudGFyZ2V0VmVyc2lvbiwgY29udGV4dC50YXJnZXRWZXJzaW9uKSkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQuY2hvaWNlcy5wdXNoKG5ldyBBZGFwdGl2ZS5DaG9pY2UoY2hvaWNlLm5hbWUsIGNob2ljZS52YWx1ZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaW5wdXQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcmVhZG9ubHkgdGFyZ2V0VmVyc2lvbjogVGFyZ2V0VmVyc2lvbixcclxuICAgICAgICByZWFkb25seSBwcm9wZXJ0eU5hbWU6IHN0cmluZyxcclxuICAgICAgICByZWFkb25seSBsYWJlbDogc3RyaW5nLFxyXG4gICAgICAgIHJlYWRvbmx5IGNob2ljZXM6IElWZXJzaW9uZWRDaG9pY2VbXSxcclxuICAgICAgICByZWFkb25seSBjYXVzZXNQcm9wZXJ0eVNoZWV0UmVmcmVzaDogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICAgICAgc3VwZXIodGFyZ2V0VmVyc2lvbiwgcHJvcGVydHlOYW1lLCBsYWJlbCwgY2F1c2VzUHJvcGVydHlTaGVldFJlZnJlc2gpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29udGFpbmVyU3R5bGVQcm9wZXJ0eUVkaXRvciBleHRlbmRzIENob2ljZVByb3BlcnR5RWRpdG9yIHtcclxuICAgIHByb3RlY3RlZCBnZXRQcm9wZXJ0eVZhbHVlKGNvbnRleHQ6IFByb3BlcnR5U2hlZXRDb250ZXh0KTogYW55IHtcclxuICAgICAgICBsZXQgY3VycmVudFN0eWxlID0gY29udGV4dC50YXJnZXRbdGhpcy5wcm9wZXJ0eU5hbWVdO1xyXG5cclxuICAgICAgICByZXR1cm4gY3VycmVudFN0eWxlID8gY3VycmVudFN0eWxlLnRvU3RyaW5nKCkgOiBcIm5vdF9zZXRcIjtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc2V0UHJvcGVydHlWYWx1ZShjb250ZXh0OiBQcm9wZXJ0eVNoZWV0Q29udGV4dCwgdmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PSBcIm5vdF9zZXRcIikge1xyXG4gICAgICAgICAgICBjb250ZXh0LnRhcmdldFt0aGlzLnByb3BlcnR5TmFtZV0gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29udGV4dC50YXJnZXRbdGhpcy5wcm9wZXJ0eU5hbWVdID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IHRhcmdldFZlcnNpb246IFRhcmdldFZlcnNpb24scmVhZG9ubHkgcHJvcGVydHlOYW1lOiBzdHJpbmcsIHJlYWRvbmx5IGxhYmVsOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcihcclxuICAgICAgICAgICAgdGFyZ2V0VmVyc2lvbixcclxuICAgICAgICAgICAgcHJvcGVydHlOYW1lLFxyXG4gICAgICAgICAgICBsYWJlbCxcclxuICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgeyB0YXJnZXRWZXJzaW9uOiBWZXJzaW9ucy52MV8wLCBuYW1lOiBcIihub3Qgc2V0KVwiLCB2YWx1ZTogXCJub3Rfc2V0XCIgfSxcclxuICAgICAgICAgICAgICAgIHsgdGFyZ2V0VmVyc2lvbjogVmVyc2lvbnMudjFfMCwgbmFtZTogXCJEZWZhdWx0XCIsIHZhbHVlOiBcImRlZmF1bHRcIiB9LFxyXG4gICAgICAgICAgICAgICAgeyB0YXJnZXRWZXJzaW9uOiBWZXJzaW9ucy52MV8wLCBuYW1lOiBcIkVtcGhhc2lzXCIsIHZhbHVlOiBcImVtcGhhc2lzXCIgfSxcclxuICAgICAgICAgICAgICAgIHsgdGFyZ2V0VmVyc2lvbjogVmVyc2lvbnMudjFfMiwgbmFtZTogXCJBY2NlbnRcIiwgdmFsdWU6IFwiYWNjZW50XCIgfSxcclxuICAgICAgICAgICAgICAgIHsgdGFyZ2V0VmVyc2lvbjogVmVyc2lvbnMudjFfMiwgbmFtZTogXCJHb29kXCIsIHZhbHVlOiBcImdvb2RcIiB9LFxyXG4gICAgICAgICAgICAgICAgeyB0YXJnZXRWZXJzaW9uOiBWZXJzaW9ucy52MV8yLCBuYW1lOiBcIkF0dGVudGlvblwiLCB2YWx1ZTogXCJhdHRlbnRpb25cIiB9LFxyXG4gICAgICAgICAgICAgICAgeyB0YXJnZXRWZXJzaW9uOiBWZXJzaW9ucy52MV8yLCBuYW1lOiBcIldhcm5pbmdcIiwgdmFsdWU6IFwid2FybmluZ1wiIH1cclxuICAgICAgICAgICAgXSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb2x1bW5XaWR0aFByb3BlcnR5RWRpdG9yIGV4dGVuZHMgQ2hvaWNlUHJvcGVydHlFZGl0b3Ige1xyXG4gICAgcHJvdGVjdGVkIGdldFByb3BlcnR5VmFsdWUoY29udGV4dDogUHJvcGVydHlTaGVldENvbnRleHQpOiBhbnkge1xyXG4gICAgICAgIGlmIChjb250ZXh0LnRhcmdldFt0aGlzLnByb3BlcnR5TmFtZV0gaW5zdGFuY2VvZiBBZGFwdGl2ZS5TaXplQW5kVW5pdCkge1xyXG4gICAgICAgICAgICBpZiAoY29udGV4dC50YXJnZXRbdGhpcy5wcm9wZXJ0eU5hbWVdLnVuaXQgPT0gQWRhcHRpdmUuU2l6ZVVuaXQuUGl4ZWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcInBpeGVsc1wiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwid2VpZ2h0ZWRcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQudGFyZ2V0W3RoaXMucHJvcGVydHlOYW1lXS50b1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc2V0UHJvcGVydHlWYWx1ZShjb250ZXh0OiBQcm9wZXJ0eVNoZWV0Q29udGV4dCwgdmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIHN3aXRjaCAodmFsdWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImF1dG9cIjpcclxuICAgICAgICAgICAgICAgIGNvbnRleHQudGFyZ2V0W3RoaXMucHJvcGVydHlOYW1lXSA9IFwiYXV0b1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJwaXhlbHNcIjpcclxuICAgICAgICAgICAgICAgIGNvbnRleHQudGFyZ2V0W3RoaXMucHJvcGVydHlOYW1lXSA9IG5ldyBBZGFwdGl2ZS5TaXplQW5kVW5pdCg1MCwgQWRhcHRpdmUuU2l6ZVVuaXQuUGl4ZWwpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ3ZWlnaHRlZFwiOlxyXG4gICAgICAgICAgICAgICAgY29udGV4dC50YXJnZXRbdGhpcy5wcm9wZXJ0eU5hbWVdID0gbmV3IEFkYXB0aXZlLlNpemVBbmRVbml0KDUwLCBBZGFwdGl2ZS5TaXplVW5pdC5XZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzdHJldGNoXCI6XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LnRhcmdldFt0aGlzLnByb3BlcnR5TmFtZV0gPSBcInN0cmV0Y2hcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEhlaWdodFByb3BlcnR5RWRpdG9yIGV4dGVuZHMgQ2hvaWNlUHJvcGVydHlFZGl0b3Ige1xyXG4gICAgcHJvdGVjdGVkIHNldFByb3BlcnR5VmFsdWUoY29udGV4dDogUHJvcGVydHlTaGVldENvbnRleHQsIHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgcHJvY2Vzc2VkVmFsdWU6IHN0cmluZztcclxuXHJcbiAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiYXV0b1wiOlxyXG4gICAgICAgICAgICBjYXNlIFwic3RyZXRjaFwiOlxyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkVmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkVmFsdWUgPSBcImF1dG9cIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29udGV4dC50YXJnZXRbdGhpcy5wcm9wZXJ0eU5hbWVdID0gcHJvY2Vzc2VkVmFsdWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTaXplQW5kVW5pdFByb3BlcnR5RWRpdG9yIGV4dGVuZHMgTnVtYmVyUHJvcGVydHlFZGl0b3Ige1xyXG4gICAgcHJvdGVjdGVkIGdldFByb3BlcnR5VmFsdWUoY29udGV4dDogUHJvcGVydHlTaGVldENvbnRleHQpOiBhbnkge1xyXG4gICAgICAgIHJldHVybiAoPEFkYXB0aXZlLlNpemVBbmRVbml0PmNvbnRleHQudGFyZ2V0W3RoaXMucHJvcGVydHlOYW1lXSkucGh5c2ljYWxTaXplLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHNldFByb3BlcnR5VmFsdWUoY29udGV4dDogUHJvcGVydHlTaGVldENvbnRleHQsIHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICBjb250ZXh0LnRhcmdldFt0aGlzLnByb3BlcnR5TmFtZV0gPSBuZXcgQWRhcHRpdmUuU2l6ZUFuZFVuaXQocGFyc2VGbG9hdCh2YWx1ZSksIHRoaXMuc2l6ZVVuaXQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHJlYWRvbmx5IHRhcmdldFZlcnNpb246IFRhcmdldFZlcnNpb24sXHJcbiAgICAgICAgcmVhZG9ubHkgcHJvcGVydHlOYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgcmVhZG9ubHkgbGFiZWw6IHN0cmluZyxcclxuICAgICAgICByZWFkb25seSBzaXplVW5pdDogQWRhcHRpdmUuU2l6ZVVuaXQsXHJcbiAgICAgICAgcmVhZG9ubHkgZGVmYXVsdFZhbHVlOiBudW1iZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXHJcbiAgICAgICAgcmVhZG9ubHkgY2F1c2VzUHJvcGVydHlTaGVldFJlZnJlc2g6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICAgIHN1cGVyKHRhcmdldFZlcnNpb24sIHByb3BlcnR5TmFtZSwgbGFiZWwsIGRlZmF1bHRWYWx1ZSwgY2F1c2VzUHJvcGVydHlTaGVldFJlZnJlc2gpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQWN0aW9uUHJvcGVydHlFZGl0b3IgZXh0ZW5kcyBTaW5nbGVJbnB1dFByb3BlcnR5RWRpdG9yIHtcclxuICAgIHByb3RlY3RlZCBnZXRQcm9wZXJ0eVZhbHVlKGNvbnRleHQ6IFByb3BlcnR5U2hlZXRDb250ZXh0KTogYW55IHtcclxuICAgICAgICBsZXQgYWN0aW9uID0gPEFkYXB0aXZlLkFjdGlvbj5jb250ZXh0LnRhcmdldFt0aGlzLnByb3BlcnR5TmFtZV07XHJcblxyXG4gICAgICAgIHJldHVybiBhY3Rpb24gPyBhY3Rpb24uZ2V0SnNvblR5cGVOYW1lKCkgOiBcIm5vbmVcIjtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc2V0UHJvcGVydHlWYWx1ZShjb250ZXh0OiBQcm9wZXJ0eVNoZWV0Q29udGV4dCwgdmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnRleHQudGFyZ2V0W3RoaXMucHJvcGVydHlOYW1lXSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XHJcblxyXG4gICAgICAgIGlmICh2YWx1ZSA9PSBcIm5vbmVcIikge1xyXG4gICAgICAgICAgICBjb250ZXh0LnRhcmdldFt0aGlzLnByb3BlcnR5TmFtZV0gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29udGV4dC50YXJnZXRbdGhpcy5wcm9wZXJ0eU5hbWVdID0gQWRhcHRpdmUuQWRhcHRpdmVDYXJkLmFjdGlvblR5cGVSZWdpc3RyeS5jcmVhdGVJbnN0YW5jZSh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBjcmVhdGVJbnB1dChjb250ZXh0OiBQcm9wZXJ0eVNoZWV0Q29udGV4dCk6IEFkYXB0aXZlLklucHV0IHtcclxuICAgICAgICBsZXQgaW5wdXQgPSBuZXcgQWRhcHRpdmUuQ2hvaWNlU2V0SW5wdXQoKTtcclxuICAgICAgICBpbnB1dC5pc0NvbXBhY3QgPSB0cnVlO1xyXG4gICAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gXCIobm90IHNldClcIjtcclxuICAgICAgICBpbnB1dC5jaG9pY2VzLnB1c2gobmV3IEFkYXB0aXZlLkNob2ljZShcIihub3Qgc2V0KVwiLCBcIm5vbmVcIikpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IEFkYXB0aXZlLkFkYXB0aXZlQ2FyZC5hY3Rpb25UeXBlUmVnaXN0cnkuZ2V0SXRlbUNvdW50KCk7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgYWN0aW9uVHlwZSA9IEFkYXB0aXZlLkFkYXB0aXZlQ2FyZC5hY3Rpb25UeXBlUmVnaXN0cnkuZ2V0SXRlbUF0KGkpLnR5cGVOYW1lO1xyXG4gICAgICAgICAgICBsZXQgZG9BZGRBY3Rpb25UeXBlID0gdGhpcy5mb3JiaWRkZW5BY3Rpb25UeXBlcyA/IHRoaXMuZm9yYmlkZGVuQWN0aW9uVHlwZXMuaW5kZXhPZihhY3Rpb25UeXBlKSA8IDAgOiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRvQWRkQWN0aW9uVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNob2ljZSA9IG5ldyBBZGFwdGl2ZS5DaG9pY2UoYWN0aW9uVHlwZSwgYWN0aW9uVHlwZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaW5wdXQuY2hvaWNlcy5wdXNoKGNob2ljZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpbnB1dDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICByZWFkb25seSB0YXJnZXRWZXJzaW9uOiBUYXJnZXRWZXJzaW9uLFxyXG4gICAgICAgIHJlYWRvbmx5IHByb3BlcnR5TmFtZTogc3RyaW5nLFxyXG4gICAgICAgIHJlYWRvbmx5IGxhYmVsOiBzdHJpbmcsXHJcbiAgICAgICAgcmVhZG9ubHkgZm9yYmlkZGVuQWN0aW9uVHlwZXM6IHN0cmluZ1tdID0gW10sXHJcbiAgICAgICAgcmVhZG9ubHkgY2F1c2VzUHJvcGVydHlTaGVldFJlZnJlc2g6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICAgIHN1cGVyKHRhcmdldFZlcnNpb24sIHByb3BlcnR5TmFtZSwgbGFiZWwsIGNhdXNlc1Byb3BlcnR5U2hlZXRSZWZyZXNoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbXBvdW5kUHJvcGVydHlFZGl0b3IgZXh0ZW5kcyBQcm9wZXJ0eVNoZWV0RW50cnkge1xyXG4gICAgcmVuZGVyKGNvbnRleHQ6IFByb3BlcnR5U2hlZXRDb250ZXh0KTogQWRhcHRpdmUuQ2FyZEVsZW1lbnQge1xyXG4gICAgICAgIGxldCBjb250YWluZXIgPSBuZXcgQWRhcHRpdmUuQ29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGVudHJ5IG9mIHRoaXMuZW50cmllcykge1xyXG4gICAgICAgICAgICBpZiAoaXNWZXJzaW9uTGVzc09yRXF1YWwoZW50cnkudGFyZ2V0VmVyc2lvbiwgY29udGV4dC50YXJnZXRWZXJzaW9uKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFkZEl0ZW0oZW50cnkucmVuZGVyKG5ldyBQcm9wZXJ0eVNoZWV0Q29udGV4dChjb250ZXh0LnRhcmdldFZlcnNpb24sIGNvbnRleHQucGVlciwgY29udGV4dC50YXJnZXRbdGhpcy5wcm9wZXJ0eU5hbWVdKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHJlYWRvbmx5IHRhcmdldFZlcnNpb246IFRhcmdldFZlcnNpb24sXHJcbiAgICAgICAgcmVhZG9ubHkgcHJvcGVydHlOYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgcmVhZG9ubHkgZW50cmllczogUHJvcGVydHlTaGVldEVudHJ5W10gPSBbXSkge1xyXG4gICAgICAgIHN1cGVyKHRhcmdldFZlcnNpb24pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRW51bVByb3BlcnR5RWRpdG9yIGV4dGVuZHMgU2luZ2xlSW5wdXRQcm9wZXJ0eUVkaXRvciB7XHJcbiAgICBwcm90ZWN0ZWQgc2V0UHJvcGVydHlWYWx1ZShjb250ZXh0OiBQcm9wZXJ0eVNoZWV0Q29udGV4dCwgdmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnRleHQudGFyZ2V0W3RoaXMucHJvcGVydHlOYW1lXSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGNyZWF0ZUlucHV0KGNvbnRleHQ6IFByb3BlcnR5U2hlZXRDb250ZXh0KTogQWRhcHRpdmUuSW5wdXQge1xyXG4gICAgICAgIGxldCBpbnB1dCA9IG5ldyBBZGFwdGl2ZS5DaG9pY2VTZXRJbnB1dCgpO1xyXG4gICAgICAgIGlucHV0LmlzQ29tcGFjdCA9IHRydWU7XHJcbiAgICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSBcIihub3Qgc2V0KVwiO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5lbnVtVHlwZSkge1xyXG4gICAgICAgICAgICBsZXQgdiA9IHBhcnNlSW50KGtleSwgMTApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFpc05hTih2KSkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQuY2hvaWNlcy5wdXNoKG5ldyBBZGFwdGl2ZS5DaG9pY2UodGhpcy5lbnVtVHlwZVtrZXldLCBrZXkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGlucHV0O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHJlYWRvbmx5IHRhcmdldFZlcnNpb246IFRhcmdldFZlcnNpb24sXHJcbiAgICAgICAgcmVhZG9ubHkgcHJvcGVydHlOYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgcmVhZG9ubHkgbGFiZWw6IHN0cmluZyxcclxuICAgICAgICByZWFkb25seSBlbnVtVHlwZTogeyBbczogbnVtYmVyXTogc3RyaW5nIH0sXHJcbiAgICAgICAgcmVhZG9ubHkgY2F1c2VzUHJvcGVydHlTaGVldFJlZnJlc2g6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICAgIHN1cGVyKHRhcmdldFZlcnNpb24sIHByb3BlcnR5TmFtZSwgbGFiZWwsIGNhdXNlc1Byb3BlcnR5U2hlZXRSZWZyZXNoKTtcclxuICAgIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIElOYW1lVmFsdWVQYWlyIHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHZhbHVlOiBzdHJpbmc7XHJcbn1cclxuXHJcbmNsYXNzIE5hbWVWYWx1ZVBhaXJQcm9wZXJ0eUVkaXRvciBleHRlbmRzIFByb3BlcnR5U2hlZXRFbnRyeSB7XHJcbiAgICBwcml2YXRlIGNvbGxlY3Rpb25DaGFuZ2VkKGNvbnRleHQ6IFByb3BlcnR5U2hlZXRDb250ZXh0LCBuYW1lVmFsdWVQYWlyczogSU5hbWVWYWx1ZVBhaXJbXSwgcmVmcmVzaFByb3BlcnR5U2hlZXQ6IGJvb2xlYW4pIHtcclxuICAgICAgICBjb250ZXh0LnRhcmdldFt0aGlzLmNvbGxlY3Rpb25Qcm9wZXJ0eU5hbWVdID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IG5hbWVWYWx1ZVBhaXIgb2YgbmFtZVZhbHVlUGFpcnMpIHtcclxuICAgICAgICAgICAgbGV0IGl0ZW0gPSB0aGlzLmNyZWF0ZUNvbGxlY3Rpb25JdGVtKG5hbWVWYWx1ZVBhaXIubmFtZSwgbmFtZVZhbHVlUGFpci52YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICBjb250ZXh0LnRhcmdldFt0aGlzLmNvbGxlY3Rpb25Qcm9wZXJ0eU5hbWVdLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb250ZXh0LnBlZXIuY2hhbmdlZChyZWZyZXNoUHJvcGVydHlTaGVldCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKGNvbnRleHQ6IFByb3BlcnR5U2hlZXRDb250ZXh0KTogQWRhcHRpdmUuQ2FyZEVsZW1lbnQge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBuZXcgQWRhcHRpdmUuQ29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIGxldCBjb2xsZWN0aW9uID0gY29udGV4dC50YXJnZXRbdGhpcy5jb2xsZWN0aW9uUHJvcGVydHlOYW1lXTtcclxuXHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGNvbGxlY3Rpb24pKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBcIiArIHRoaXMuY29sbGVjdGlvblByb3BlcnR5TmFtZSArIFwiIHByb3BlcnR5IG9uIFwiICsgY29udGV4dC5wZWVyLmdldENhcmRPYmplY3QoKS5nZXRKc29uVHlwZU5hbWUoKSArIFwiIGVpdGhlciBkb2Vzbid0IGV4aXN0IG9yIGlzbid0IGFuIGFycmF5LlwiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG5hbWVWYWx1ZVBhaXJzOiBJTmFtZVZhbHVlUGFpcltdID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IHBhaXIgb2YgY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICBuYW1lVmFsdWVQYWlycy5wdXNoKFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHBhaXJbdGhpcy5uYW1lUHJvcGVydHlOYW1lXSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcGFpclt0aGlzLnZhbHVlUHJvcGVydHlOYW1lXVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobmFtZVZhbHVlUGFpcnMubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgbGV0IG1lc3NhZ2VUZXh0QmxvY2sgPSBuZXcgQWRhcHRpdmUuVGV4dEJsb2NrKCk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VUZXh0QmxvY2suc3BhY2luZyA9IEFkYXB0aXZlLlNwYWNpbmcuU21hbGw7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VUZXh0QmxvY2sudGV4dCA9IHRoaXMubWVzc2FnZUlmRW1wdHk7XHJcblxyXG4gICAgICAgICAgICByZXN1bHQuYWRkSXRlbShtZXNzYWdlVGV4dEJsb2NrKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZVZhbHVlUGFpcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0SW5wdXQgPSBuZXcgQWRhcHRpdmUuVGV4dElucHV0KCk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0SW5wdXQucGxhY2Vob2xkZXIgPSB0aGlzLm5hbWVQcm9wZXJ0eUxhYmVsO1xyXG4gICAgICAgICAgICAgICAgdGV4dElucHV0LmRlZmF1bHRWYWx1ZSA9IG5hbWVWYWx1ZVBhaXJzW2ldLm5hbWU7XHJcbiAgICAgICAgICAgICAgICB0ZXh0SW5wdXQub25WYWx1ZUNoYW5nZWQgPSAoc2VuZGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZVZhbHVlUGFpcnNbaV0ubmFtZSA9IHNlbmRlci52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uQ2hhbmdlZChjb250ZXh0LCBuYW1lVmFsdWVQYWlycywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgbmFtZUNvbHVtbiA9IG5ldyBBZGFwdGl2ZS5Db2x1bW4oXCJzdHJldGNoXCIpO1xyXG4gICAgICAgICAgICAgICAgbmFtZUNvbHVtbi5hZGRJdGVtKHRleHRJbnB1dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGV4dElucHV0ID0gbmV3IEFkYXB0aXZlLlRleHRJbnB1dCgpO1xyXG4gICAgICAgICAgICAgICAgdGV4dElucHV0LnBsYWNlaG9sZGVyID0gdGhpcy52YWx1ZVByb3BlcnR5TGFiZWw7XHJcbiAgICAgICAgICAgICAgICB0ZXh0SW5wdXQuZGVmYXVsdFZhbHVlID0gbmFtZVZhbHVlUGFpcnNbaV0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0ZXh0SW5wdXQub25WYWx1ZUNoYW5nZWQgPSAoc2VuZGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZVZhbHVlUGFpcnNbaV0udmFsdWUgPSBzZW5kZXIudmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbkNoYW5nZWQoY29udGV4dCwgbmFtZVZhbHVlUGFpcnMsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlQ29sdW1uID0gbmV3IEFkYXB0aXZlLkNvbHVtbihcInN0cmV0Y2hcIik7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZUNvbHVtbi5zcGFjaW5nID0gQWRhcHRpdmUuU3BhY2luZy5TbWFsbDtcclxuICAgICAgICAgICAgICAgIHZhbHVlQ29sdW1uLmFkZEl0ZW0odGV4dElucHV0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgcmVtb3ZlQWN0aW9uID0gbmV3IEFkYXB0aXZlLlN1Ym1pdEFjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlQWN0aW9uLnRpdGxlID0gXCJYXCI7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVBY3Rpb24ub25FeGVjdXRlID0gKHNlbmRlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWVWYWx1ZVBhaXJzLnNwbGljZShpLCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uQ2hhbmdlZChjb250ZXh0LCBuYW1lVmFsdWVQYWlycywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGFjdGlvblNldCA9IG5ldyBBZGFwdGl2ZS5BY3Rpb25TZXQoKTtcclxuICAgICAgICAgICAgICAgIGFjdGlvblNldC5hZGRBY3Rpb24ocmVtb3ZlQWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgcmVtb3ZlQ29sdW1uID0gbmV3IEFkYXB0aXZlLkNvbHVtbihcImF1dG9cIik7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVDb2x1bW4uc3BhY2luZyA9IEFkYXB0aXZlLlNwYWNpbmcuU21hbGw7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVDb2x1bW4uYWRkSXRlbShhY3Rpb25TZXQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBjb2x1bW5TZXQgPSBuZXcgQWRhcHRpdmUuQ29sdW1uU2V0KCk7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW5TZXQuc3BhY2luZyA9IEFkYXB0aXZlLlNwYWNpbmcuU21hbGw7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW5TZXQuYWRkQ29sdW1uKG5hbWVDb2x1bW4pO1xyXG4gICAgICAgICAgICAgICAgY29sdW1uU2V0LmFkZENvbHVtbih2YWx1ZUNvbHVtbik7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW5TZXQuYWRkQ29sdW1uKHJlbW92ZUNvbHVtbik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LmFkZEl0ZW0oY29sdW1uU2V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGFkZEFjdGlvbiA9IG5ldyBBZGFwdGl2ZS5TdWJtaXRBY3Rpb24oKTtcclxuICAgICAgICBhZGRBY3Rpb24udGl0bGUgPSB0aGlzLmFkZEJ1dHRvblRpdGxlO1xyXG4gICAgICAgIGFkZEFjdGlvbi5vbkV4ZWN1dGUgPSAoc2VuZGVyKSA9PiB7XHJcbiAgICAgICAgICAgIG5hbWVWYWx1ZVBhaXJzLnB1c2goeyBuYW1lOiBcIlwiLCB2YWx1ZTogXCJcIiB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbkNoYW5nZWQoY29udGV4dCwgbmFtZVZhbHVlUGFpcnMsIHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGFjdGlvblNldCA9IG5ldyBBZGFwdGl2ZS5BY3Rpb25TZXQoKTtcclxuICAgICAgICBhY3Rpb25TZXQuc3BhY2luZyA9IEFkYXB0aXZlLlNwYWNpbmcuU21hbGw7XHJcbiAgICAgICAgYWN0aW9uU2V0LmFkZEFjdGlvbihhZGRBY3Rpb24pO1xyXG5cclxuICAgICAgICByZXN1bHQuYWRkSXRlbShhY3Rpb25TZXQpO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHJlYWRvbmx5IHRhcmdldFZlcnNpb246IFRhcmdldFZlcnNpb24sXHJcbiAgICAgICAgcmVhZG9ubHkgY29sbGVjdGlvblByb3BlcnR5TmFtZTogc3RyaW5nLFxyXG4gICAgICAgIHJlYWRvbmx5IG5hbWVQcm9wZXJ0eU5hbWU6IHN0cmluZyxcclxuICAgICAgICByZWFkb25seSB2YWx1ZVByb3BlcnR5TmFtZTogc3RyaW5nLFxyXG4gICAgICAgIHJlYWRvbmx5IGNyZWF0ZUNvbGxlY3Rpb25JdGVtOiAobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSA9PiBhbnksXHJcbiAgICAgICAgcmVhZG9ubHkgbmFtZVByb3BlcnR5TGFiZWw6IHN0cmluZyA9IFwiTmFtZVwiLFxyXG4gICAgICAgIHJlYWRvbmx5IHZhbHVlUHJvcGVydHlMYWJlbDogc3RyaW5nID0gXCJWYWx1ZVwiLFxyXG4gICAgICAgIHJlYWRvbmx5IGFkZEJ1dHRvblRpdGxlOiBzdHJpbmcgPSBcIkFkZFwiLFxyXG4gICAgICAgIHJlYWRvbmx5IG1lc3NhZ2VJZkVtcHR5OiBzdHJpbmcgPSBcIlRoaXMgY29sbGVjdGlvbiBpcyBlbXB0eVwiKSB7XHJcbiAgICAgICAgc3VwZXIodGFyZ2V0VmVyc2lvbik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDYXJkT2JqZWN0UGVlciBleHRlbmRzIERlc2lnbmVyUGVlciB7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgaWRQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcImlkXCIsIFwiSWRcIik7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBY3Rpb25QZWVyIGV4dGVuZHMgQ2FyZE9iamVjdFBlZXIge1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHRpdGxlUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMCwgXCJ0aXRsZVwiLCBcIlRpdGxlXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHN0eWxlUHJvcGVydHkgPSBuZXcgQ2hvaWNlUHJvcGVydHlFZGl0b3IoXHJcbiAgICAgICAgVmVyc2lvbnMudjFfMixcclxuICAgICAgICBcInN0eWxlXCIsXHJcbiAgICAgICAgXCJTdHlsZVwiLFxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgeyB0YXJnZXRWZXJzaW9uOiBWZXJzaW9ucy52MV8yLCBuYW1lOiBcIkRlZmF1bHRcIiwgdmFsdWU6IEFkYXB0aXZlLkFjdGlvblN0eWxlLkRlZmF1bHQgfSxcclxuICAgICAgICAgICAgeyB0YXJnZXRWZXJzaW9uOiBWZXJzaW9ucy52MV8yLCBuYW1lOiBcIlBvc2l0aXZlXCIsIHZhbHVlOiBBZGFwdGl2ZS5BY3Rpb25TdHlsZS5Qb3NpdGl2ZSB9LFxyXG4gICAgICAgICAgICB7IHRhcmdldFZlcnNpb246IFZlcnNpb25zLnYxXzIsIG5hbWU6IFwiRGVzdHJ1Y3RpdmVcIiwgdmFsdWU6IEFkYXB0aXZlLkFjdGlvblN0eWxlLkRlc3RydWN0aXZlIH1cclxuICAgICAgICBdKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBpY29uVXJsUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMSwgXCJpY29uVXJsXCIsIFwiSWNvbiBVUkxcIik7XHJcblxyXG4gICAgcHJvdGVjdGVkIF9hY3Rpb246IEFkYXB0aXZlLkFjdGlvbjtcclxuXHJcbiAgICBwcm90ZWN0ZWQgZG91YmxlQ2xpY2soZTogTW91c2VFdmVudCkge1xyXG4gICAgICAgIHN1cGVyLmRvdWJsZUNsaWNrKGUpO1xyXG5cclxuICAgICAgICB0aGlzLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQuY2xpY2soKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW1vdmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aW9uLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHBhcmVudDogRGVzaWduZXJQZWVyLFxyXG4gICAgICAgIGRlc2lnbmVyU3VyZmFjZTogQ2FyZERlc2lnbmVyU3VyZmFjZSxcclxuICAgICAgICByZWdpc3RyYXRpb246IERlc2lnbmVyUGVlclJlZ2lzdHJhdGlvbkJhc2UsXHJcbiAgICAgICAgYWN0aW9uOiBBZGFwdGl2ZS5BY3Rpb24pIHtcclxuICAgICAgICBzdXBlcihwYXJlbnQsIGRlc2lnbmVyU3VyZmFjZSwgcmVnaXN0cmF0aW9uKTtcclxuXHJcbiAgICAgICAgdGhpcy5fYWN0aW9uID0gYWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbEdldFRyZWVJdGVtVGV4dCgpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICh0aGlzLmFjdGlvbi50aXRsZSAmJiB0aGlzLmFjdGlvbi50aXRsZSAhPSBcIlwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjdGlvbi50aXRsZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5pbnRlcm5hbEdldFRyZWVJdGVtVGV4dCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRDYXJkT2JqZWN0KCk6IEFkYXB0aXZlLkNhcmRPYmplY3Qge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBpc0RyYWdnYWJsZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Qm91bmRpbmdSZWN0KCk6IFJlY3Qge1xyXG4gICAgICAgIGxldCBkZXNpZ25TdXJmYWNlT2Zmc2V0ID0gdGhpcy5kZXNpZ25lclN1cmZhY2UuZ2V0RGVzaWduZXJTdXJmYWNlT2Zmc2V0KCk7XHJcbiAgICAgICAgbGV0IGFjdGlvbkJvdW5kaW5nUmVjdCA9IHRoaXMuYWN0aW9uLnJlbmRlcmVkRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWN0KFxyXG4gICAgICAgICAgICBhY3Rpb25Cb3VuZGluZ1JlY3QudG9wIC0gZGVzaWduU3VyZmFjZU9mZnNldC55LFxyXG4gICAgICAgICAgICBhY3Rpb25Cb3VuZGluZ1JlY3QucmlnaHQgLSBkZXNpZ25TdXJmYWNlT2Zmc2V0LngsXHJcbiAgICAgICAgICAgIGFjdGlvbkJvdW5kaW5nUmVjdC5ib3R0b20gLSBkZXNpZ25TdXJmYWNlT2Zmc2V0LnksXHJcbiAgICAgICAgICAgIGFjdGlvbkJvdW5kaW5nUmVjdC5sZWZ0IC0gZGVzaWduU3VyZmFjZU9mZnNldC54XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDYXJkT2JqZWN0Qm91bmRpbmdSZWN0KCk6IFJlY3Qge1xyXG4gICAgICAgIGxldCBhY3Rpb25Cb3VuZGluZ1JlY3QgPSB0aGlzLmFjdGlvbi5yZW5kZXJlZEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgUmVjdChcclxuICAgICAgICAgICAgYWN0aW9uQm91bmRpbmdSZWN0LnRvcCxcclxuICAgICAgICAgICAgYWN0aW9uQm91bmRpbmdSZWN0LnJpZ2h0LFxyXG4gICAgICAgICAgICBhY3Rpb25Cb3VuZGluZ1JlY3QuYm90dG9tLFxyXG4gICAgICAgICAgICBhY3Rpb25Cb3VuZGluZ1JlY3QubGVmdFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHByb3BlcnR5U2hlZXQ6IFByb3BlcnR5U2hlZXQsIGRlZmF1bHRDYXRlZ29yeTogc3RyaW5nID0gUHJvcGVydHlTaGVldENhdGVnb3J5LkRlZmF1bHRDYXRlZ29yeSkge1xyXG4gICAgICAgIHN1cGVyLnBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0LCBkZWZhdWx0Q2F0ZWdvcnkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgZGVmYXVsdENhdGVnb3J5LFxyXG4gICAgICAgICAgICBBY3Rpb25QZWVyLmlkUHJvcGVydHksXHJcbiAgICAgICAgICAgIEFjdGlvblBlZXIudGl0bGVQcm9wZXJ0eSxcclxuICAgICAgICAgICAgQWN0aW9uUGVlci5zdHlsZVByb3BlcnR5LFxyXG4gICAgICAgICAgICBBY3Rpb25QZWVyLmljb25VcmxQcm9wZXJ0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFjdGlvbigpOiBBZGFwdGl2ZS5BY3Rpb24ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb247XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBUeXBlZEFjdGlvblBlZXI8VEFjdGlvbiBleHRlbmRzIEFkYXB0aXZlLkFjdGlvbj4gZXh0ZW5kcyBBY3Rpb25QZWVyIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHBhcmVudDogRGVzaWduZXJQZWVyLFxyXG4gICAgICAgIGRlc2lnbmVyU3VyZmFjZTogQ2FyZERlc2lnbmVyU3VyZmFjZSxcclxuICAgICAgICByZWdpc3RyYXRpb246IERlc2lnbmVyUGVlclJlZ2lzdHJhdGlvbkJhc2UsXHJcbiAgICAgICAgYWN0aW9uOiBUQWN0aW9uKSB7XHJcbiAgICAgICAgc3VwZXIocGFyZW50LCBkZXNpZ25lclN1cmZhY2UsIHJlZ2lzdHJhdGlvbiwgYWN0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYWN0aW9uKCk6IFRBY3Rpb24ge1xyXG4gICAgICAgIHJldHVybiA8VEFjdGlvbj50aGlzLl9hY3Rpb247XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBIdHRwQWN0aW9uUGVlciBleHRlbmRzIFR5cGVkQWN0aW9uUGVlcjxBZGFwdGl2ZS5IdHRwQWN0aW9uPiB7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgaWdub3JlSW5wdXRWYWxpZGF0aW9uUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5RWRpdG9yKFZlcnNpb25zLnZOZXh0LCBcImlnbm9yZUlucHV0VmFsaWRhdGlvblwiLCBcIklnbm9yZSBpbnB1dCB2YWxpZGF0aW9uXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IG1ldGhvZFByb3BlcnR5ID0gbmV3IENob2ljZVByb3BlcnR5RWRpdG9yKFxyXG4gICAgICAgIFZlcnNpb25zLnYxXzAsXHJcbiAgICAgICAgXCJtZXRob2RcIixcclxuICAgICAgICBcIk1ldGhvZFwiLFxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgeyB0YXJnZXRWZXJzaW9uOiBWZXJzaW9ucy52MV8wLCBuYW1lOiBcIkdFVFwiLCB2YWx1ZTogXCJHRVRcIiB9LFxyXG4gICAgICAgICAgICB7IHRhcmdldFZlcnNpb246IFZlcnNpb25zLnYxXzAsIG5hbWU6IFwiUE9TVFwiLCB2YWx1ZTogXCJQT1NUXCIgfVxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgdHJ1ZSk7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgdXJsUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMCwgXCJ1cmxcIiwgXCJVcmxcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgYm9keVByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzAsIFwiYm9keVwiLCBcIkJvZHlcIiwgdHJ1ZSk7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgaGVhZGVyc1Byb3BlcnR5ID0gbmV3IE5hbWVWYWx1ZVBhaXJQcm9wZXJ0eUVkaXRvcihcclxuICAgICAgICBWZXJzaW9ucy52MV8wLFxyXG4gICAgICAgIFwiaGVhZGVyc1wiLFxyXG4gICAgICAgIFwibmFtZVwiLFxyXG4gICAgICAgIFwidmFsdWVcIixcclxuICAgICAgICAobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSA9PiB7IHJldHVybiBuZXcgQWRhcHRpdmUuSHR0cEhlYWRlcihuYW1lLCB2YWx1ZSk7IH0sXHJcbiAgICAgICAgXCJOYW1lXCIsXHJcbiAgICAgICAgXCJWYWx1ZVwiLFxyXG4gICAgICAgIFwiQWRkIGEgbmV3IGhlYWRlclwiLFxyXG4gICAgICAgIFwiVGhpcyBhY3Rpb24gaGFzIG5vIGhlYWRlci5cIik7XHJcblxyXG4gICAgcG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHByb3BlcnR5U2hlZXQ6IFByb3BlcnR5U2hlZXQsIGRlZmF1bHRDYXRlZ29yeTogc3RyaW5nID0gUHJvcGVydHlTaGVldENhdGVnb3J5LkRlZmF1bHRDYXRlZ29yeSkge1xyXG4gICAgICAgIHN1cGVyLnBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0LCBkZWZhdWx0Q2F0ZWdvcnkpO1xyXG5cclxuICAgICAgICBpZiAoQWRhcHRpdmUuQWRhcHRpdmVDYXJkLnVzZUJ1aWx0SW5JbnB1dFZhbGlkYXRpb24pIHtcclxuICAgICAgICAgICAgcHJvcGVydHlTaGVldC5hZGQoXHJcbiAgICAgICAgICAgICAgICBQcm9wZXJ0eVNoZWV0Q2F0ZWdvcnkuRGVmYXVsdENhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgSHR0cEFjdGlvblBlZXIuaWdub3JlSW5wdXRWYWxpZGF0aW9uUHJvcGVydHkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvcGVydHlTaGVldC5hZGQoXHJcbiAgICAgICAgICAgIGRlZmF1bHRDYXRlZ29yeSxcclxuICAgICAgICAgICAgSHR0cEFjdGlvblBlZXIubWV0aG9kUHJvcGVydHksXHJcbiAgICAgICAgICAgIEh0dHBBY3Rpb25QZWVyLnVybFByb3BlcnR5KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aW9uLm1ldGhvZCA9PSBcIlBPU1RcIikge1xyXG4gICAgICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgICAgIGRlZmF1bHRDYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgIEh0dHBBY3Rpb25QZWVyLmJvZHlQcm9wZXJ0eSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgXCJIVFRQIGhlYWRlcnNcIixcclxuICAgICAgICAgICAgSHR0cEFjdGlvblBlZXIuaGVhZGVyc1Byb3BlcnR5KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFN1Ym1pdEFjdGlvblBlZXIgZXh0ZW5kcyBUeXBlZEFjdGlvblBlZXI8QWRhcHRpdmUuU3VibWl0QWN0aW9uPiB7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgaWdub3JlSW5wdXRWYWxpZGF0aW9uUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5RWRpdG9yKFZlcnNpb25zLnZOZXh0LCBcImlnbm9yZUlucHV0VmFsaWRhdGlvblwiLCBcIklnbm9yZSBpbnB1dCB2YWxpZGF0aW9uXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IGRhdGFQcm9wZXJ0eSA9IG5ldyBPYmplY3RQcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcImRhdGFcIiwgXCJEYXRhXCIpO1xyXG5cclxuICAgIHBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0OiBQcm9wZXJ0eVNoZWV0LCBkZWZhdWx0Q2F0ZWdvcnk6IHN0cmluZyA9IFByb3BlcnR5U2hlZXRDYXRlZ29yeS5EZWZhdWx0Q2F0ZWdvcnkpIHtcclxuICAgICAgICBzdXBlci5wb3B1bGF0ZVByb3BlcnR5U2hlZXQocHJvcGVydHlTaGVldCwgZGVmYXVsdENhdGVnb3J5KTtcclxuXHJcbiAgICAgICAgcHJvcGVydHlTaGVldC5hZGQoXHJcbiAgICAgICAgICAgIGRlZmF1bHRDYXRlZ29yeSxcclxuICAgICAgICAgICAgU3VibWl0QWN0aW9uUGVlci5pZ25vcmVJbnB1dFZhbGlkYXRpb25Qcm9wZXJ0eSxcclxuICAgICAgICAgICAgU3VibWl0QWN0aW9uUGVlci5kYXRhUHJvcGVydHkpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgT3BlblVybEFjdGlvblBlZXIgZXh0ZW5kcyBUeXBlZEFjdGlvblBlZXI8QWRhcHRpdmUuT3BlblVybEFjdGlvbj4ge1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHVybFByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzAsIFwidXJsXCIsIFwiVXJsXCIpO1xyXG5cclxuICAgIHBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0OiBQcm9wZXJ0eVNoZWV0LCBkZWZhdWx0Q2F0ZWdvcnk6IHN0cmluZyA9IFByb3BlcnR5U2hlZXRDYXRlZ29yeS5EZWZhdWx0Q2F0ZWdvcnkpIHtcclxuICAgICAgICBzdXBlci5wb3B1bGF0ZVByb3BlcnR5U2hlZXQocHJvcGVydHlTaGVldCwgZGVmYXVsdENhdGVnb3J5KTtcclxuXHJcbiAgICAgICAgcHJvcGVydHlTaGVldC5hZGQoXHJcbiAgICAgICAgICAgIGRlZmF1bHRDYXRlZ29yeSxcclxuICAgICAgICAgICAgT3BlblVybEFjdGlvblBlZXIudXJsUHJvcGVydHkpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2hvd0NhcmRBY3Rpb25QZWVyIGV4dGVuZHMgVHlwZWRBY3Rpb25QZWVyPEFkYXB0aXZlLlNob3dDYXJkQWN0aW9uPiB7XHJcbiAgICBwcm90ZWN0ZWQgZ2V0VG9vbFRpcCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcIkRvdWJsZSBjbGljayB0byBvcGVuL2Nsb3NlXCI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUb2dnbGVWaXNpYmlsaXR5QWN0aW9uUGVlciBleHRlbmRzIFR5cGVkQWN0aW9uUGVlcjxBZGFwdGl2ZS5Ub2dnbGVWaXNpYmlsaXR5QWN0aW9uPiB7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDYXJkRWxlbWVudFBlZXIgZXh0ZW5kcyBDYXJkT2JqZWN0UGVlciB7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgZGF0YUNvbnRleHRQcm9wZXJ0eSA9IG5ldyBDdXN0b21DYXJkT2JqZWN0UHJvcGVydHlFZGl0b3IoXCIqXCIsIFwiJGRhdGFcIiwgXCJEYXRhIGNvbnRleHRcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgd2hlblByb3BlcnR5ID0gbmV3IEN1c3RvbUNhcmRPYmplY3RQcm9wZXJ0eUVkaXRvcihcIipcIiwgXCIkd2hlblwiLCBcIk9ubHkgc2hvdyB3aGVuXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IGlkUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMCwgXCJpZFwiLCBcIklkXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IGlzVmlzaWJsZVByb3BlcnR5ID0gbmV3IEJvb2xlYW5Qcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8yLCBcImlzVmlzaWJsZVwiLCBcIkluaXRpYWxseSB2aXNpYmxlXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHNwYWNpbmdQcm9wZXJ0eSA9IG5ldyBFbnVtUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMCwgXCJzcGFjaW5nXCIsIFwiU3BhY2luZ1wiLCBBZGFwdGl2ZS5TcGFjaW5nKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBzZXBhcmF0b3JQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMCwgXCJzZXBhcmF0b3JcIiwgXCJTZXBhcmF0b3JcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgaG9yaXpvbnRhbEFsaWdubWVudFByb3BlcnR5ID0gbmV3IEVudW1Qcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcImhvcml6b250YWxBbGlnbm1lbnRcIiwgXCJIb3Jpem9udGFsIGFsaWdubWVudFwiLCBBZGFwdGl2ZS5Ib3Jpem9udGFsQWxpZ25tZW50KTtcclxuICAgIHN0YXRpYyByZWFkb25seSBoZWlnaHRQcm9wZXJ0eSA9IG5ldyBIZWlnaHRQcm9wZXJ0eUVkaXRvcihcclxuICAgICAgICBWZXJzaW9ucy52MV8xLFxyXG4gICAgICAgIFwiaGVpZ2h0XCIsXHJcbiAgICAgICAgXCJIZWlnaHRcIixcclxuICAgICAgICBbXHJcbiAgICAgICAgICAgIHsgdGFyZ2V0VmVyc2lvbjogVmVyc2lvbnMudjFfMSwgbmFtZTogXCJBdXRvbWF0aWNcIiwgdmFsdWU6IFwiYXV0b1wiIH0sXHJcbiAgICAgICAgICAgIHsgdGFyZ2V0VmVyc2lvbjogVmVyc2lvbnMudjFfMSwgbmFtZTogXCJTdHJldGNoXCIsIHZhbHVlOiBcInN0cmV0Y2hcIiB9XHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgcHJvdGVjdGVkIF9jYXJkRWxlbWVudDogQWRhcHRpdmUuQ2FyZEVsZW1lbnQ7XHJcblxyXG4gICAgcHJvdGVjdGVkIGluc2VydEVsZW1lbnRBZnRlcihuZXdFbGVtZW50OiBBZGFwdGl2ZS5DYXJkRWxlbWVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNhcmRFbGVtZW50LnBhcmVudCBpbnN0YW5jZW9mIEFkYXB0aXZlLkNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICB0aGlzLmNhcmRFbGVtZW50LnBhcmVudC5pbnNlcnRJdGVtQWZ0ZXIobmV3RWxlbWVudCwgdGhpcy5jYXJkRWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbmV3UGVlciA9IENhcmREZXNpZ25lclN1cmZhY2UuY2FyZEVsZW1lbnRQZWVyUmVnaXN0cnkuY3JlYXRlUGVlckluc3RhbmNlKHRoaXMuZGVzaWduZXJTdXJmYWNlLCB0aGlzLCBuZXdFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucGVlckFkZGVkKG5ld1BlZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW1vdmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsVXBkYXRlQ3NzU3R5bGVzKCkge1xyXG4gICAgICAgIHN1cGVyLmludGVybmFsVXBkYXRlQ3NzU3R5bGVzKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNhcmRFbGVtZW50LmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaW52aXNpYmxlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImludmlzaWJsZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcGFyZW50OiBEZXNpZ25lclBlZXIsXHJcbiAgICAgICAgZGVzaWduZXJTdXJmYWNlOiBDYXJkRGVzaWduZXJTdXJmYWNlLFxyXG4gICAgICAgIHJlZ2lzdHJhdGlvbjogRGVzaWduZXJQZWVyUmVnaXN0cmF0aW9uQmFzZSxcclxuICAgICAgICBjYXJkRWxlbWVudDogQWRhcHRpdmUuQ2FyZEVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlcihwYXJlbnQsIGRlc2lnbmVyU3VyZmFjZSwgcmVnaXN0cmF0aW9uKTtcclxuXHJcbiAgICAgICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBjYXJkRWxlbWVudDtcclxuXHJcbiAgICAgICAgaWYgKGNhcmRFbGVtZW50IGluc3RhbmNlb2YgQWRhcHRpdmUuQ2FyZEVsZW1lbnRDb250YWluZXIpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYXJkRWxlbWVudC5nZXRJdGVtQ291bnQoKTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluc2VydENoaWxkKENhcmREZXNpZ25lclN1cmZhY2UuY2FyZEVsZW1lbnRQZWVyUmVnaXN0cnkuY3JlYXRlUGVlckluc3RhbmNlKHRoaXMuZGVzaWduZXJTdXJmYWNlLCB0aGlzLCBjYXJkRWxlbWVudC5nZXRJdGVtQXQoaSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNhcmRFbGVtZW50LmdldEFjdGlvbkNvdW50KCk7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmluc2VydENoaWxkKENhcmREZXNpZ25lclN1cmZhY2UuYWN0aW9uUGVlclJlZ2lzdHJ5LmNyZWF0ZVBlZXJJbnN0YW5jZSh0aGlzLmRlc2lnbmVyU3VyZmFjZSwgdGhpcywgY2FyZEVsZW1lbnQuZ2V0QWN0aW9uQXQoaSkpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VHJlZUl0ZW1UZXh0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHRleHQgPSBzdXBlci5nZXRUcmVlSXRlbVRleHQoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY2FyZEVsZW1lbnQuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IFwiSGlkZGVuXCI7XHJcblxyXG4gICAgICAgICAgICBpZiAodGV4dCkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IFwiIC0gXCIgKyB0ZXh0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRDYXJkT2JqZWN0KCk6IEFkYXB0aXZlLkNhcmRPYmplY3Qge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhcmRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVDYXJkRWxlbWVudCgpIHtcclxuICAgICAgICAvLyBEbyBub3RoaW5nIGluIGJhc2UgaW1wbGVtZW50YXRpb25cclxuICAgIH1cclxuXHJcbiAgICBjYW5Ecm9wKHBlZXI6IERlc2lnbmVyUGVlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhcmRFbGVtZW50IGluc3RhbmNlb2YgQWRhcHRpdmUuQ29udGFpbmVyICYmIHBlZXIgaW5zdGFuY2VvZiBDYXJkRWxlbWVudFBlZXI7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5RHJvcChwZWVyOiBEZXNpZ25lclBlZXIsIGluc2VydGlvblBvaW50OiBJUG9pbnQpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5jYXJkRWxlbWVudCBpbnN0YW5jZW9mIEFkYXB0aXZlLkNvbnRhaW5lciAmJiBwZWVyIGluc3RhbmNlb2YgQ2FyZEVsZW1lbnRQZWVyKSB7XHJcbiAgICAgICAgICAgIGxldCB0YXJnZXRDaGlsZDogRGVzaWduZXJQZWVyID0gbnVsbDtcclxuICAgICAgICAgICAgbGV0IGluc2VydEFmdGVyOiBib29sZWFuO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmdldENoaWxkQ291bnQoKTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVjdCA9IHRoaXMuZ2V0Q2hpbGRBdChpKS5nZXRCb3VuZGluZ1JlY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVjdC5pc0luc2lkZShpbnNlcnRpb25Qb2ludCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRDaGlsZCA9IHRoaXMuZ2V0Q2hpbGRBdChpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0QWZ0ZXIgPSAoaW5zZXJ0aW9uUG9pbnQueSAtIHJlY3QudG9wKSA+PSAocmVjdC5oZWlnaHQgLyAyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRDaGlsZCAhPSBwZWVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGVlci5jYXJkRWxlbWVudC5wYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXBlZXIucmVtb3ZlKHRydWUsIGZhbHNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBwZWVyLnBhcmVudC5yZW1vdmVDaGlsZChwZWVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldENoaWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlY3QgPSB0aGlzLmdldEJvdW5kaW5nUmVjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbnNlcnRBZnRlciA9IChpbnNlcnRpb25Qb2ludC55IC0gcmVjdC50b3ApID49IChyZWN0LmhlaWdodCAvIDIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jYXJkRWxlbWVudC5nZXRJdGVtQ291bnQoKSA+IDAgJiYgaW5zZXJ0QWZ0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJkRWxlbWVudC5pbnNlcnRJdGVtQWZ0ZXIocGVlci5jYXJkRWxlbWVudCwgdGhpcy5jYXJkRWxlbWVudC5nZXRJdGVtQXQodGhpcy5jYXJkRWxlbWVudC5nZXRJdGVtQ291bnQoKSAtIDEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FyZEVsZW1lbnQuaW5zZXJ0SXRlbUFmdGVyKHBlZXIuY2FyZEVsZW1lbnQsIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnNlcnRBZnRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmRFbGVtZW50Lmluc2VydEl0ZW1BZnRlcihwZWVyLmNhcmRFbGVtZW50LCAoPENhcmRFbGVtZW50UGVlcj50YXJnZXRDaGlsZCkuY2FyZEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJkRWxlbWVudC5pbnNlcnRJdGVtQmVmb3JlKHBlZXIuY2FyZEVsZW1lbnQsICg8Q2FyZEVsZW1lbnRQZWVyPnRhcmdldENoaWxkKS5jYXJkRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0Q2hpbGQocGVlciwgcGVlci5jYXJkRWxlbWVudC5pbmRleCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZWQoZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Qm91bmRpbmdSZWN0KCk6IFJlY3Qge1xyXG4gICAgICAgIGxldCBkZXNpZ25TdXJmYWNlT2Zmc2V0ID0gdGhpcy5kZXNpZ25lclN1cmZhY2UuZ2V0RGVzaWduZXJTdXJmYWNlT2Zmc2V0KCk7XHJcbiAgICAgICAgbGV0IGNhcmRFbGVtZW50Qm91bmRpbmdSZWN0ID0gdGhpcy5jYXJkRWxlbWVudC5yZW5kZXJlZEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNhcmRFbGVtZW50Lmhhc1Zpc2libGVTZXBhcmF0b3IpIHtcclxuICAgICAgICAgICAgbGV0IHNlcGFyYXRvckJvdW5kaW5nUmVjdCA9IHRoaXMuY2FyZEVsZW1lbnQuc2VwYXJhdG9yRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVjdChcclxuICAgICAgICAgICAgICAgIE1hdGgubWluKHNlcGFyYXRvckJvdW5kaW5nUmVjdC50b3AsIGNhcmRFbGVtZW50Qm91bmRpbmdSZWN0LnRvcCkgLSBkZXNpZ25TdXJmYWNlT2Zmc2V0LnksXHJcbiAgICAgICAgICAgICAgICBNYXRoLm1heChzZXBhcmF0b3JCb3VuZGluZ1JlY3QucmlnaHQsIGNhcmRFbGVtZW50Qm91bmRpbmdSZWN0LnJpZ2h0KSAtIGRlc2lnblN1cmZhY2VPZmZzZXQueCxcclxuICAgICAgICAgICAgICAgIE1hdGgubWF4KHNlcGFyYXRvckJvdW5kaW5nUmVjdC5ib3R0b20sIGNhcmRFbGVtZW50Qm91bmRpbmdSZWN0LmJvdHRvbSkgLSBkZXNpZ25TdXJmYWNlT2Zmc2V0LnksXHJcbiAgICAgICAgICAgICAgICBNYXRoLm1pbihzZXBhcmF0b3JCb3VuZGluZ1JlY3QubGVmdCwgY2FyZEVsZW1lbnRCb3VuZGluZ1JlY3QubGVmdCkgLSBkZXNpZ25TdXJmYWNlT2Zmc2V0LngsXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVjdChcclxuICAgICAgICAgICAgICAgIGNhcmRFbGVtZW50Qm91bmRpbmdSZWN0LnRvcCAtIGRlc2lnblN1cmZhY2VPZmZzZXQueSxcclxuICAgICAgICAgICAgICAgIGNhcmRFbGVtZW50Qm91bmRpbmdSZWN0LnJpZ2h0IC0gZGVzaWduU3VyZmFjZU9mZnNldC54LFxyXG4gICAgICAgICAgICAgICAgY2FyZEVsZW1lbnRCb3VuZGluZ1JlY3QuYm90dG9tIC0gZGVzaWduU3VyZmFjZU9mZnNldC55LFxyXG4gICAgICAgICAgICAgICAgY2FyZEVsZW1lbnRCb3VuZGluZ1JlY3QubGVmdCAtIGRlc2lnblN1cmZhY2VPZmZzZXQueFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRDYXJkT2JqZWN0Qm91bmRpbmdSZWN0KCk6IFJlY3Qge1xyXG4gICAgICAgIGxldCBjYXJkRWxlbWVudEJvdW5kaW5nUmVjdCA9IHRoaXMuY2FyZEVsZW1lbnQucmVuZGVyZWRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFJlY3QoXHJcbiAgICAgICAgICAgIGNhcmRFbGVtZW50Qm91bmRpbmdSZWN0LnRvcCxcclxuICAgICAgICAgICAgY2FyZEVsZW1lbnRCb3VuZGluZ1JlY3QucmlnaHQsXHJcbiAgICAgICAgICAgIGNhcmRFbGVtZW50Qm91bmRpbmdSZWN0LmJvdHRvbSxcclxuICAgICAgICAgICAgY2FyZEVsZW1lbnRCb3VuZGluZ1JlY3QubGVmdFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHByb3BlcnR5U2hlZXQ6IFByb3BlcnR5U2hlZXQsIGRlZmF1bHRDYXRlZ29yeTogc3RyaW5nID0gUHJvcGVydHlTaGVldENhdGVnb3J5LkRlZmF1bHRDYXRlZ29yeSkge1xyXG4gICAgICAgIHN1cGVyLnBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0LCBkZWZhdWx0Q2F0ZWdvcnkpO1xyXG5cclxuICAgICAgICBpZiAoR2xvYmFsU2V0dGluZ3MuZW5hYmxlRGF0YUJpbmRpbmdTdXBwb3J0KSB7XHJcbiAgICAgICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdENhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgQ2FyZEVsZW1lbnRQZWVyLmRhdGFDb250ZXh0UHJvcGVydHksXHJcbiAgICAgICAgICAgICAgICBDYXJkRWxlbWVudFBlZXIud2hlblByb3BlcnR5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICBkZWZhdWx0Q2F0ZWdvcnksXHJcbiAgICAgICAgICAgIENhcmRFbGVtZW50UGVlci5pZFByb3BlcnR5LFxyXG4gICAgICAgICAgICBDYXJkRWxlbWVudFBlZXIuaXNWaXNpYmxlUHJvcGVydHkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgUHJvcGVydHlTaGVldENhdGVnb3J5LkxheW91dENhdGVnb3J5LFxyXG4gICAgICAgICAgICBDYXJkRWxlbWVudFBlZXIuc3BhY2luZ1Byb3BlcnR5LFxyXG4gICAgICAgICAgICBDYXJkRWxlbWVudFBlZXIuc2VwYXJhdG9yUHJvcGVydHksXHJcbiAgICAgICAgICAgIENhcmRFbGVtZW50UGVlci5ob3Jpem9udGFsQWxpZ25tZW50UHJvcGVydHksXHJcbiAgICAgICAgICAgIENhcmRFbGVtZW50UGVlci5oZWlnaHRQcm9wZXJ0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNhcmRFbGVtZW50KCk6IEFkYXB0aXZlLkNhcmRFbGVtZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBUeXBlZENhcmRFbGVtZW50UGVlcjxUQ2FyZEVsZW1lbnQgZXh0ZW5kcyBBZGFwdGl2ZS5DYXJkRWxlbWVudD4gZXh0ZW5kcyBDYXJkRWxlbWVudFBlZXIge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcGFyZW50OiBEZXNpZ25lclBlZXIsXHJcbiAgICAgICAgZGVzaWduZXJTdXJmYWNlOiBDYXJkRGVzaWduZXJTdXJmYWNlLFxyXG4gICAgICAgIHJlZ2lzdHJhdGlvbjogRGVzaWduZXJQZWVyUmVnaXN0cmF0aW9uQmFzZSxcclxuICAgICAgICBjYXJkRWxlbWVudDogVENhcmRFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIocGFyZW50LCBkZXNpZ25lclN1cmZhY2UsIHJlZ2lzdHJhdGlvbiwgY2FyZEVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjYXJkRWxlbWVudCgpOiBUQ2FyZEVsZW1lbnQge1xyXG4gICAgICAgIHJldHVybiA8VENhcmRFbGVtZW50PnRoaXMuX2NhcmRFbGVtZW50O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQWRhcHRpdmVDYXJkUGVlciBleHRlbmRzIFR5cGVkQ2FyZEVsZW1lbnRQZWVyPEFkYXB0aXZlLkFkYXB0aXZlQ2FyZD4ge1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IGxhbmdQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8xLCBcImxhbmdcIiwgXCJMYW5ndWFnZVwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBmYWxsYmFja1RleHRQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcImZhbGxiYWNrVGV4dFwiLCBcIkZhbGxiYWNrIHRleHRcIiwgdHJ1ZSk7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgc3BlYWtQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcInNwZWFrXCIsIFwiU3BlYWtcIik7XHJcblxyXG4gICAgcHJvdGVjdGVkIGFkZEFjdGlvbihhY3Rpb246IEFkYXB0aXZlLkFjdGlvbikge1xyXG4gICAgICAgIHRoaXMuY2FyZEVsZW1lbnQuYWRkQWN0aW9uKGFjdGlvbik7XHJcblxyXG4gICAgICAgIHRoaXMuaW5zZXJ0Q2hpbGQoQ2FyZERlc2lnbmVyU3VyZmFjZS5hY3Rpb25QZWVyUmVnaXN0cnkuY3JlYXRlUGVlckluc3RhbmNlKHRoaXMuZGVzaWduZXJTdXJmYWNlLCB0aGlzLCBhY3Rpb24pKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW1vdmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsQWRkQ29tbWFuZHMoY29tbWFuZHM6IEFycmF5PFBlZXJDb21tYW5kPikge1xyXG4gICAgICAgIHN1cGVyLmludGVybmFsQWRkQ29tbWFuZHMoY29tbWFuZHMpO1xyXG5cclxuICAgICAgICBjb21tYW5kcy5wdXNoKFxyXG4gICAgICAgICAgICBuZXcgUGVlckNvbW1hbmQoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJBZGQgYW4gYWN0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsYXNzOiBcImFjZC1pY29uLWJvbHRcIixcclxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlOiAoY29tbWFuZDogUGVlckNvbW1hbmQsIGNsaWNrZWRFbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcG9wdXBNZW51ID0gbmV3IENvbnRyb2xzLlBvcHVwTWVudSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQuYWN0aW9uVHlwZVJlZ2lzdHJ5LmdldEl0ZW1Db3VudCgpOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZW51SXRlbSA9IG5ldyBDb250cm9scy5Ecm9wRG93bkl0ZW0oaS50b1N0cmluZygpLCBBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQuYWN0aW9uVHlwZVJlZ2lzdHJ5LmdldEl0ZW1BdChpKS50eXBlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51SXRlbS5vbkNsaWNrID0gKGNsaWNrZWRJdGVtOiBDb250cm9scy5Ecm9wRG93bkl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnaXN0cnlJdGVtID0gQWRhcHRpdmUuQWRhcHRpdmVDYXJkLmFjdGlvblR5cGVSZWdpc3RyeS5nZXRJdGVtQXQoTnVtYmVyLnBhcnNlSW50KGNsaWNrZWRJdGVtLmtleSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhY3Rpb24gPSByZWdpc3RyeUl0ZW0uY3JlYXRlSW5zdGFuY2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb24udGl0bGUgPSByZWdpc3RyeUl0ZW0udHlwZU5hbWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQWN0aW9uKGFjdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwTWVudS5jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwTWVudS5pdGVtcy5hZGQobWVudUl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cE1lbnUucG9wdXAoY2xpY2tlZEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0RyYWdnYWJsZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuQmVSZW1vdmVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwb3B1bGF0ZVByb3BlcnR5U2hlZXQocHJvcGVydHlTaGVldDogUHJvcGVydHlTaGVldCwgZGVmYXVsdENhdGVnb3J5OiBzdHJpbmcgPSBQcm9wZXJ0eVNoZWV0Q2F0ZWdvcnkuRGVmYXVsdENhdGVnb3J5KSB7XHJcbiAgICAgICAgc3VwZXIucG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHByb3BlcnR5U2hlZXQsIGRlZmF1bHRDYXRlZ29yeSk7XHJcblxyXG4gICAgICAgIHByb3BlcnR5U2hlZXQucmVtb3ZlKFxyXG4gICAgICAgICAgICBDYXJkT2JqZWN0UGVlci5pZFByb3BlcnR5LFxyXG4gICAgICAgICAgICBDYXJkRWxlbWVudFBlZXIuaXNWaXNpYmxlUHJvcGVydHksXHJcbiAgICAgICAgICAgIENhcmRFbGVtZW50UGVlci5ob3Jpem9udGFsQWxpZ25tZW50UHJvcGVydHksXHJcbiAgICAgICAgICAgIENhcmRFbGVtZW50UGVlci5zZXBhcmF0b3JQcm9wZXJ0eSxcclxuICAgICAgICAgICAgQ2FyZEVsZW1lbnRQZWVyLmhlaWdodFByb3BlcnR5LFxyXG4gICAgICAgICAgICBDYXJkRWxlbWVudFBlZXIuc3BhY2luZ1Byb3BlcnR5KTtcclxuXHJcbiAgICAgICAgcHJvcGVydHlTaGVldC5hZGQoXHJcbiAgICAgICAgICAgIGRlZmF1bHRDYXRlZ29yeSxcclxuICAgICAgICAgICAgQWRhcHRpdmVDYXJkUGVlci5sYW5nUHJvcGVydHksXHJcbiAgICAgICAgICAgIEFkYXB0aXZlQ2FyZFBlZXIuZmFsbGJhY2tUZXh0UHJvcGVydHksXHJcbiAgICAgICAgICAgIEFkYXB0aXZlQ2FyZFBlZXIuc3BlYWtQcm9wZXJ0eSk7XHJcblxyXG4gICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICBQcm9wZXJ0eVNoZWV0Q2F0ZWdvcnkuTGF5b3V0Q2F0ZWdvcnksXHJcbiAgICAgICAgICAgIENvbnRhaW5lclBlZXIubWluSGVpZ2h0UHJvcGVydHksXHJcbiAgICAgICAgICAgIENvbnRhaW5lclBlZXIudmVydGljYWxDb250ZW50QWxpZ25tZW50UHJvcGVydHkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgXCJCYWNrZ3JvdW5kIGltYWdlXCIsXHJcbiAgICAgICAgICAgIENvbnRhaW5lclBlZXIuYmFja2dyb3VuZEltYWdlUHJvcGVydHkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgUHJvcGVydHlTaGVldENhdGVnb3J5LlNlbGVjdGlvbkFjdGlvbixcclxuICAgICAgICAgICAgQ29udGFpbmVyUGVlci5zZWxlY3RBY3Rpb25Qcm9wZXJ0eSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNhcmRFbGVtZW50LnNlbGVjdEFjdGlvbikge1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0QWN0aW9uUGVlciA9IENhcmREZXNpZ25lclN1cmZhY2UuYWN0aW9uUGVlclJlZ2lzdHJ5LmNyZWF0ZVBlZXJJbnN0YW5jZSh0aGlzLmRlc2lnbmVyU3VyZmFjZSwgbnVsbCwgdGhpcy5jYXJkRWxlbWVudC5zZWxlY3RBY3Rpb24pO1xyXG4gICAgICAgICAgICBzZWxlY3RBY3Rpb25QZWVyLm9uQ2hhbmdlZCA9IChzZW5kZXI6IERlc2lnbmVyUGVlciwgdXBkYXRlUHJvcGVydHlTaGVldDogYm9vbGVhbikgPT4geyB0aGlzLmNoYW5nZWQodXBkYXRlUHJvcGVydHlTaGVldCk7IH07XHJcblxyXG4gICAgICAgICAgICBsZXQgc3ViUHJvcGVydHlTaGVldCA9IG5ldyBQcm9wZXJ0eVNoZWV0KGZhbHNlKTtcclxuICAgICAgICAgICAgc2VsZWN0QWN0aW9uUGVlci5wb3B1bGF0ZVByb3BlcnR5U2hlZXQoc3ViUHJvcGVydHlTaGVldCwgUHJvcGVydHlTaGVldENhdGVnb3J5LlNlbGVjdGlvbkFjdGlvbik7XHJcblxyXG4gICAgICAgICAgICBzdWJQcm9wZXJ0eVNoZWV0LnJlbW92ZShcclxuICAgICAgICAgICAgICAgIEFjdGlvblBlZXIuaWNvblVybFByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgQWN0aW9uUGVlci5zdHlsZVByb3BlcnR5KTtcclxuXHJcbiAgICAgICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICAgICAgUHJvcGVydHlTaGVldENhdGVnb3J5LlNlbGVjdGlvbkFjdGlvbixcclxuICAgICAgICAgICAgICAgIG5ldyBTdWJQcm9wZXJ0eVNoZWV0RW50cnkoVmVyc2lvbnMudjFfMiwgdGhpcy5jYXJkRWxlbWVudC5zZWxlY3RBY3Rpb24sIHN1YlByb3BlcnR5U2hlZXQpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb2x1bW5QZWVyIGV4dGVuZHMgVHlwZWRDYXJkRWxlbWVudFBlZXI8QWRhcHRpdmUuQ29sdW1uPiB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBwaXhlbFdpZHRoUHJvcGVydHkgPSBuZXcgU2l6ZUFuZFVuaXRQcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8xLCBcIndpZHRoXCIsIFwiV2lkdGggaW4gcGl4ZWxzXCIsIEFkYXB0aXZlLlNpemVVbml0LlBpeGVsKTtcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IHdlaWdodFByb3BlcnR5ID0gbmV3IFNpemVBbmRVbml0UHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMCwgXCJ3aWR0aFwiLCBcIldlaWdodFwiLCBBZGFwdGl2ZS5TaXplVW5pdC5XZWlnaHQpO1xyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSB3aWR0aFByb3BlcnR5ID0gbmV3IENvbHVtbldpZHRoUHJvcGVydHlFZGl0b3IoXHJcbiAgICAgICAgVmVyc2lvbnMudjFfMCxcclxuICAgICAgICBcIndpZHRoXCIsXHJcbiAgICAgICAgXCJXaWR0aFwiLFxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgeyB0YXJnZXRWZXJzaW9uOiBWZXJzaW9ucy52MV8wLCBuYW1lOiBcIkF1dG9tYXRpY1wiLCB2YWx1ZTogXCJhdXRvXCIgfSxcclxuICAgICAgICAgICAgeyB0YXJnZXRWZXJzaW9uOiBWZXJzaW9ucy52MV8wLCBuYW1lOiBcIlN0cmV0Y2hcIiwgdmFsdWU6IFwic3RyZXRjaFwiIH0sXHJcbiAgICAgICAgICAgIHsgdGFyZ2V0VmVyc2lvbjogVmVyc2lvbnMudjFfMCwgbmFtZTogXCJXZWlnaHRlZFwiLCB2YWx1ZTogXCJ3ZWlnaHRlZFwiIH0sXHJcbiAgICAgICAgICAgIHsgdGFyZ2V0VmVyc2lvbjogVmVyc2lvbnMudjFfMSwgbmFtZTogXCJQaXhlbHNcIiwgdmFsdWU6IFwicGl4ZWxzXCIgfVxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgdHJ1ZSk7XHJcblxyXG4gICAgcHJvdGVjdGVkIGlzQ29udGFpbmVyKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbEdldFRyZWVJdGVtVGV4dCgpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICh0aGlzLmNhcmRFbGVtZW50LndpZHRoIGluc3RhbmNlb2YgQWRhcHRpdmUuU2l6ZUFuZFVuaXQpIHtcclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmNhcmRFbGVtZW50LndpZHRoLnVuaXQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgQWRhcHRpdmUuU2l6ZVVuaXQuV2VpZ2h0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIldlaWdodDogXCIgKyB0aGlzLmNhcmRFbGVtZW50LndpZHRoLnBoeXNpY2FsU2l6ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FyZEVsZW1lbnQud2lkdGgucGh5c2ljYWxTaXplICsgXCIgcGl4ZWxzXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5jYXJkRWxlbWVudC53aWR0aCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInN0cmV0Y2hcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJTdHJldGNoXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiYXV0b1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIkF1dG9tYXRpY1wiO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc0RyYWdnYWJsZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHByb3BlcnR5U2hlZXQ6IFByb3BlcnR5U2hlZXQsIGRlZmF1bHRDYXRlZ29yeTogc3RyaW5nID0gUHJvcGVydHlTaGVldENhdGVnb3J5LkRlZmF1bHRDYXRlZ29yeSkge1xyXG4gICAgICAgIHN1cGVyLnBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0LCBkZWZhdWx0Q2F0ZWdvcnkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgZGVmYXVsdENhdGVnb3J5LFxyXG4gICAgICAgICAgICBDb2x1bW5QZWVyLndpZHRoUHJvcGVydHkpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jYXJkRWxlbWVudC53aWR0aCBpbnN0YW5jZW9mIEFkYXB0aXZlLlNpemVBbmRVbml0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNhcmRFbGVtZW50LndpZHRoLnVuaXQgPT0gQWRhcHRpdmUuU2l6ZVVuaXQuUGl4ZWwpIHtcclxuICAgICAgICAgICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICAgICAgICAgIFByb3BlcnR5U2hlZXRDYXRlZ29yeS5EZWZhdWx0Q2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICAgICAgQ29sdW1uUGVlci5waXhlbFdpZHRoUHJvcGVydHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcHJvcGVydHlTaGVldC5hZGQoXHJcbiAgICAgICAgICAgICAgICAgICAgUHJvcGVydHlTaGVldENhdGVnb3J5LkRlZmF1bHRDYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICAgICBDb2x1bW5QZWVyLndlaWdodFByb3BlcnR5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvcGVydHlTaGVldC5hZGQoXHJcbiAgICAgICAgICAgIFByb3BlcnR5U2hlZXRDYXRlZ29yeS5MYXlvdXRDYXRlZ29yeSxcclxuICAgICAgICAgICAgQ29udGFpbmVyUGVlci5taW5IZWlnaHRQcm9wZXJ0eSxcclxuICAgICAgICAgICAgQ29udGFpbmVyUGVlci52ZXJ0aWNhbENvbnRlbnRBbGlnbm1lbnRQcm9wZXJ0eSk7XHJcblxyXG4gICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICBQcm9wZXJ0eVNoZWV0Q2F0ZWdvcnkuU3R5bGVDYXRlZ29yeSxcclxuICAgICAgICAgICAgQ29udGFpbmVyUGVlci5zdHlsZVByb3BlcnR5LFxyXG4gICAgICAgICAgICBDb250YWluZXJQZWVyLmJsZWVkUHJvcGVydHkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgXCJCYWNrZ3JvdW5kIGltYWdlXCIsXHJcbiAgICAgICAgICAgIENvbnRhaW5lclBlZXIuYmFja2dyb3VuZEltYWdlUHJvcGVydHkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgUHJvcGVydHlTaGVldENhdGVnb3J5LlNlbGVjdGlvbkFjdGlvbixcclxuICAgICAgICAgICAgQ29udGFpbmVyUGVlci5zZWxlY3RBY3Rpb25Qcm9wZXJ0eSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNhcmRFbGVtZW50LnNlbGVjdEFjdGlvbikge1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0QWN0aW9uUGVlciA9IENhcmREZXNpZ25lclN1cmZhY2UuYWN0aW9uUGVlclJlZ2lzdHJ5LmNyZWF0ZVBlZXJJbnN0YW5jZSh0aGlzLmRlc2lnbmVyU3VyZmFjZSwgbnVsbCwgdGhpcy5jYXJkRWxlbWVudC5zZWxlY3RBY3Rpb24pO1xyXG4gICAgICAgICAgICBzZWxlY3RBY3Rpb25QZWVyLm9uQ2hhbmdlZCA9IChzZW5kZXI6IERlc2lnbmVyUGVlciwgdXBkYXRlUHJvcGVydHlTaGVldDogYm9vbGVhbikgPT4geyB0aGlzLmNoYW5nZWQodXBkYXRlUHJvcGVydHlTaGVldCk7IH07XHJcblxyXG4gICAgICAgICAgICBsZXQgc3ViUHJvcGVydHlTaGVldCA9IG5ldyBQcm9wZXJ0eVNoZWV0KGZhbHNlKTtcclxuICAgICAgICAgICAgc2VsZWN0QWN0aW9uUGVlci5wb3B1bGF0ZVByb3BlcnR5U2hlZXQoc3ViUHJvcGVydHlTaGVldCwgUHJvcGVydHlTaGVldENhdGVnb3J5LlNlbGVjdGlvbkFjdGlvbik7XHJcblxyXG4gICAgICAgICAgICBzdWJQcm9wZXJ0eVNoZWV0LnJlbW92ZShcclxuICAgICAgICAgICAgICAgIEFjdGlvblBlZXIuaWNvblVybFByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgQWN0aW9uUGVlci5zdHlsZVByb3BlcnR5KTtcclxuXHJcbiAgICAgICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICAgICAgUHJvcGVydHlTaGVldENhdGVnb3J5LlNlbGVjdGlvbkFjdGlvbixcclxuICAgICAgICAgICAgICAgIG5ldyBTdWJQcm9wZXJ0eVNoZWV0RW50cnkoVmVyc2lvbnMudjFfMiwgdGhpcy5jYXJkRWxlbWVudC5zZWxlY3RBY3Rpb24sIHN1YlByb3BlcnR5U2hlZXQpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb2x1bW5TZXRQZWVyIGV4dGVuZHMgVHlwZWRDYXJkRWxlbWVudFBlZXI8QWRhcHRpdmUuQ29sdW1uU2V0PiB7XHJcbiAgICBwcm90ZWN0ZWQgaXNDb250YWluZXIoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsQWRkQ29tbWFuZHMoY29tbWFuZHM6IEFycmF5PFBlZXJDb21tYW5kPikge1xyXG4gICAgICAgIHN1cGVyLmludGVybmFsQWRkQ29tbWFuZHMoY29tbWFuZHMpO1xyXG5cclxuICAgICAgICBjb21tYW5kcy5wdXNoKFxyXG4gICAgICAgICAgICBuZXcgUGVlckNvbW1hbmQoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJBZGQgYSBjb2x1bW5cIixcclxuICAgICAgICAgICAgICAgICAgICBpY29uQ2xhc3M6IFwiYWNkLWljb24tYWRkQ29sdW1uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNQcm9tb3RhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGU6IChjb21tYW5kOiBQZWVyQ29tbWFuZCwgY2xpY2tlZEVsZW1lbnQ6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBuZXcgQWRhcHRpdmUuQ29sdW1uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbi53aWR0aCA9IFwic3RyZXRjaFwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJkRWxlbWVudC5hZGRDb2x1bW4oY29sdW1uKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0Q2hpbGQoQ2FyZERlc2lnbmVyU3VyZmFjZS5jYXJkRWxlbWVudFBlZXJSZWdpc3RyeS5jcmVhdGVQZWVySW5zdGFuY2UodGhpcy5kZXNpZ25lclN1cmZhY2UsIHRoaXMsIGNvbHVtbikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxHZXRUcmVlSXRlbVRleHQoKTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgY29sdW1uQ291bnQgPSB0aGlzLmNhcmRFbGVtZW50LmdldENvdW50KCk7XHJcblxyXG4gICAgICAgIHN3aXRjaCAoY29sdW1uQ291bnQpIHtcclxuICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiTm8gY29sdW1uXCI7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIjEgY29sdW1uXCI7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sdW1uQ291bnQgKyBcIiBjb2x1bW5zXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0OiBQcm9wZXJ0eVNoZWV0LCBkZWZhdWx0Q2F0ZWdvcnk6IHN0cmluZyA9IFByb3BlcnR5U2hlZXRDYXRlZ29yeS5EZWZhdWx0Q2F0ZWdvcnkpIHtcclxuICAgICAgICBzdXBlci5wb3B1bGF0ZVByb3BlcnR5U2hlZXQocHJvcGVydHlTaGVldCwgZGVmYXVsdENhdGVnb3J5KTtcclxuXHJcbiAgICAgICAgcHJvcGVydHlTaGVldC5hZGQoXHJcbiAgICAgICAgICAgIGRlZmF1bHRDYXRlZ29yeSxcclxuICAgICAgICAgICAgQ29udGFpbmVyUGVlci5taW5IZWlnaHRQcm9wZXJ0eSxcclxuICAgICAgICAgICAgQ29udGFpbmVyUGVlci5zdHlsZVByb3BlcnR5LFxyXG4gICAgICAgICAgICBDb250YWluZXJQZWVyLmJsZWVkUHJvcGVydHkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgUHJvcGVydHlTaGVldENhdGVnb3J5LlNlbGVjdGlvbkFjdGlvbixcclxuICAgICAgICAgICAgQ29udGFpbmVyUGVlci5zZWxlY3RBY3Rpb25Qcm9wZXJ0eSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNhcmRFbGVtZW50LnNlbGVjdEFjdGlvbikge1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0QWN0aW9uUGVlciA9IENhcmREZXNpZ25lclN1cmZhY2UuYWN0aW9uUGVlclJlZ2lzdHJ5LmNyZWF0ZVBlZXJJbnN0YW5jZSh0aGlzLmRlc2lnbmVyU3VyZmFjZSwgbnVsbCwgdGhpcy5jYXJkRWxlbWVudC5zZWxlY3RBY3Rpb24pO1xyXG4gICAgICAgICAgICBzZWxlY3RBY3Rpb25QZWVyLm9uQ2hhbmdlZCA9IChzZW5kZXI6IERlc2lnbmVyUGVlciwgdXBkYXRlUHJvcGVydHlTaGVldDogYm9vbGVhbikgPT4geyB0aGlzLmNoYW5nZWQodXBkYXRlUHJvcGVydHlTaGVldCk7IH07XHJcblxyXG4gICAgICAgICAgICBsZXQgc3ViUHJvcGVydHlTaGVldCA9IG5ldyBQcm9wZXJ0eVNoZWV0KGZhbHNlKTtcclxuICAgICAgICAgICAgc2VsZWN0QWN0aW9uUGVlci5wb3B1bGF0ZVByb3BlcnR5U2hlZXQoc3ViUHJvcGVydHlTaGVldCwgUHJvcGVydHlTaGVldENhdGVnb3J5LlNlbGVjdGlvbkFjdGlvbik7XHJcblxyXG4gICAgICAgICAgICBzdWJQcm9wZXJ0eVNoZWV0LnJlbW92ZShcclxuICAgICAgICAgICAgICAgIEFjdGlvblBlZXIuaWNvblVybFByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgQWN0aW9uUGVlci5zdHlsZVByb3BlcnR5KTtcclxuXHJcbiAgICAgICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICAgICAgUHJvcGVydHlTaGVldENhdGVnb3J5LlNlbGVjdGlvbkFjdGlvbixcclxuICAgICAgICAgICAgICAgIG5ldyBTdWJQcm9wZXJ0eVNoZWV0RW50cnkoVmVyc2lvbnMudjFfMiwgdGhpcy5jYXJkRWxlbWVudC5zZWxlY3RBY3Rpb24sIHN1YlByb3BlcnR5U2hlZXQpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2FuRHJvcChwZWVyOiBEZXNpZ25lclBlZXIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRhaW5lclBlZXIgZXh0ZW5kcyBUeXBlZENhcmRFbGVtZW50UGVlcjxBZGFwdGl2ZS5Db250YWluZXI+IHtcclxuICAgIHN0YXRpYyByZWFkb25seSBzZWxlY3RBY3Rpb25Qcm9wZXJ0eSA9IG5ldyBBY3Rpb25Qcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcInNlbGVjdEFjdGlvblwiLCBcIkFjdGlvbiB0eXBlXCIsIFsgQWRhcHRpdmUuU2hvd0NhcmRBY3Rpb24uSnNvblR5cGVOYW1lIF0sIHRydWUpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IG1pbkhlaWdodFByb3BlcnR5ID0gbmV3IE51bWJlclByb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzIsIFwibWluUGl4ZWxIZWlnaHRcIiwgXCJNaW5pbXVtIGhlaWdodCBpbiBwaXhlbHNcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgdmVydGljYWxDb250ZW50QWxpZ25tZW50UHJvcGVydHkgPSBuZXcgRW51bVByb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzEsIFwidmVydGljYWxDb250ZW50QWxpZ25tZW50XCIsIFwiVmVydGljYWwgY29udGVudCBhbGlnbm1lbnRcIiwgQWRhcHRpdmUuVmVydGljYWxBbGlnbm1lbnQpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHN0eWxlUHJvcGVydHkgPSBuZXcgQ29udGFpbmVyU3R5bGVQcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcInN0eWxlXCIsIFwiU3R5bGVcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgYmxlZWRQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMiwgXCJibGVlZFwiLCBcIkJsZWVkXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IGJhY2tncm91bmRJbWFnZVByb3BlcnR5ID0gbmV3IENvbXBvdW5kUHJvcGVydHlFZGl0b3IoXHJcbiAgICAgICAgVmVyc2lvbnMudjFfMCxcclxuICAgICAgICBcImJhY2tncm91bmRJbWFnZVwiLFxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgbmV3IFN0cmluZ1Byb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzAsIFwidXJsXCIsIFwiVVJMXCIpLFxyXG4gICAgICAgICAgICBuZXcgRW51bVByb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzIsIFwiZmlsbE1vZGVcIiwgXCJGaWxsIG1vZGVcIiwgQWRhcHRpdmUuRmlsbE1vZGUpLFxyXG4gICAgICAgICAgICBuZXcgRW51bVByb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzIsIFwiaG9yaXpvbnRhbEFsaWdubWVudFwiLCBcIkhvcml6b250YWwgYWxpZ25tZW50XCIsIEFkYXB0aXZlLkhvcml6b250YWxBbGlnbm1lbnQpLFxyXG4gICAgICAgICAgICBuZXcgRW51bVByb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzIsIFwidmVydGljYWxBbGlnbm1lbnRcIiwgXCJWZXJ0aWNhbCBhbGlnbm1lbnRcIiwgQWRhcHRpdmUuVmVydGljYWxBbGlnbm1lbnQpXHJcbiAgICAgICAgXVxyXG4gICAgKTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgaXNDb250YWluZXIoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHByb3BlcnR5U2hlZXQ6IFByb3BlcnR5U2hlZXQsIGRlZmF1bHRDYXRlZ29yeTogc3RyaW5nID0gUHJvcGVydHlTaGVldENhdGVnb3J5LkRlZmF1bHRDYXRlZ29yeSkge1xyXG4gICAgICAgIHN1cGVyLnBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0LCBkZWZhdWx0Q2F0ZWdvcnkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgUHJvcGVydHlTaGVldENhdGVnb3J5LkxheW91dENhdGVnb3J5LFxyXG4gICAgICAgICAgICBDb250YWluZXJQZWVyLm1pbkhlaWdodFByb3BlcnR5LFxyXG4gICAgICAgICAgICBDb250YWluZXJQZWVyLnZlcnRpY2FsQ29udGVudEFsaWdubWVudFByb3BlcnR5KTtcclxuXHJcbiAgICAgICAgcHJvcGVydHlTaGVldC5hZGQoXHJcbiAgICAgICAgICAgIFByb3BlcnR5U2hlZXRDYXRlZ29yeS5TdHlsZUNhdGVnb3J5LFxyXG4gICAgICAgICAgICBDb250YWluZXJQZWVyLnN0eWxlUHJvcGVydHksXHJcbiAgICAgICAgICAgIENvbnRhaW5lclBlZXIuYmxlZWRQcm9wZXJ0eSk7XHJcblxyXG4gICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICBcIkJhY2tncm91bmQgaW1hZ2VcIixcclxuICAgICAgICAgICAgQ29udGFpbmVyUGVlci5iYWNrZ3JvdW5kSW1hZ2VQcm9wZXJ0eSk7XHJcblxyXG4gICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICBQcm9wZXJ0eVNoZWV0Q2F0ZWdvcnkuU2VsZWN0aW9uQWN0aW9uLFxyXG4gICAgICAgICAgICBDb250YWluZXJQZWVyLnNlbGVjdEFjdGlvblByb3BlcnR5KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY2FyZEVsZW1lbnQuc2VsZWN0QWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGxldCBzZWxlY3RBY3Rpb25QZWVyID0gQ2FyZERlc2lnbmVyU3VyZmFjZS5hY3Rpb25QZWVyUmVnaXN0cnkuY3JlYXRlUGVlckluc3RhbmNlKHRoaXMuZGVzaWduZXJTdXJmYWNlLCBudWxsLCB0aGlzLmNhcmRFbGVtZW50LnNlbGVjdEFjdGlvbik7XHJcbiAgICAgICAgICAgIHNlbGVjdEFjdGlvblBlZXIub25DaGFuZ2VkID0gKHNlbmRlcjogRGVzaWduZXJQZWVyLCB1cGRhdGVQcm9wZXJ0eVNoZWV0OiBib29sZWFuKSA9PiB7IHRoaXMuY2hhbmdlZCh1cGRhdGVQcm9wZXJ0eVNoZWV0KTsgfTtcclxuXHJcbiAgICAgICAgICAgIGxldCBzdWJQcm9wZXJ0eVNoZWV0ID0gbmV3IFByb3BlcnR5U2hlZXQoZmFsc2UpO1xyXG4gICAgICAgICAgICBzZWxlY3RBY3Rpb25QZWVyLnBvcHVsYXRlUHJvcGVydHlTaGVldChzdWJQcm9wZXJ0eVNoZWV0LCBQcm9wZXJ0eVNoZWV0Q2F0ZWdvcnkuU2VsZWN0aW9uQWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIHN1YlByb3BlcnR5U2hlZXQucmVtb3ZlKFxyXG4gICAgICAgICAgICAgICAgQWN0aW9uUGVlci5pY29uVXJsUHJvcGVydHksXHJcbiAgICAgICAgICAgICAgICBBY3Rpb25QZWVyLnN0eWxlUHJvcGVydHkpO1xyXG5cclxuICAgICAgICAgICAgcHJvcGVydHlTaGVldC5hZGQoXHJcbiAgICAgICAgICAgICAgICBQcm9wZXJ0eVNoZWV0Q2F0ZWdvcnkuU2VsZWN0aW9uQWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgbmV3IFN1YlByb3BlcnR5U2hlZXRFbnRyeShWZXJzaW9ucy52MV8yLCB0aGlzLmNhcmRFbGVtZW50LnNlbGVjdEFjdGlvbiwgc3ViUHJvcGVydHlTaGVldCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFjdGlvblNldFBlZXIgZXh0ZW5kcyBUeXBlZENhcmRFbGVtZW50UGVlcjxBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQ+IHtcclxuICAgIHByb3RlY3RlZCBhZGRBY3Rpb24oYWN0aW9uOiBBZGFwdGl2ZS5BY3Rpb24pIHtcclxuICAgICAgICB0aGlzLmNhcmRFbGVtZW50LmFkZEFjdGlvbihhY3Rpb24pO1xyXG5cclxuICAgICAgICB0aGlzLmluc2VydENoaWxkKENhcmREZXNpZ25lclN1cmZhY2UuYWN0aW9uUGVlclJlZ2lzdHJ5LmNyZWF0ZVBlZXJJbnN0YW5jZSh0aGlzLmRlc2lnbmVyU3VyZmFjZSwgdGhpcywgYWN0aW9uKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsQWRkQ29tbWFuZHMoY29tbWFuZHM6IEFycmF5PFBlZXJDb21tYW5kPikge1xyXG4gICAgICAgIHN1cGVyLmludGVybmFsQWRkQ29tbWFuZHMoY29tbWFuZHMpO1xyXG5cclxuICAgICAgICBjb21tYW5kcy5wdXNoKFxyXG4gICAgICAgICAgICBuZXcgUGVlckNvbW1hbmQoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJBZGQgYW4gYWN0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsYXNzOiBcImFjZC1pY29uLWJvbHRcIixcclxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlOiAoY29tbWFuZDogUGVlckNvbW1hbmQsIGNsaWNrZWRFbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcG9wdXBNZW51ID0gbmV3IENvbnRyb2xzLlBvcHVwTWVudSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQuYWN0aW9uVHlwZVJlZ2lzdHJ5LmdldEl0ZW1Db3VudCgpOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZW51SXRlbSA9IG5ldyBDb250cm9scy5Ecm9wRG93bkl0ZW0oaS50b1N0cmluZygpLCBBZGFwdGl2ZS5BZGFwdGl2ZUNhcmQuYWN0aW9uVHlwZVJlZ2lzdHJ5LmdldEl0ZW1BdChpKS50eXBlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51SXRlbS5vbkNsaWNrID0gKGNsaWNrZWRJdGVtOiBDb250cm9scy5Ecm9wRG93bkl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnaXN0cnlJdGVtID0gQWRhcHRpdmUuQWRhcHRpdmVDYXJkLmFjdGlvblR5cGVSZWdpc3RyeS5nZXRJdGVtQXQoTnVtYmVyLnBhcnNlSW50KGNsaWNrZWRJdGVtLmtleSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhY3Rpb24gPSByZWdpc3RyeUl0ZW0uY3JlYXRlSW5zdGFuY2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb24udGl0bGUgPSByZWdpc3RyeUl0ZW0udHlwZU5hbWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQWN0aW9uKGFjdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwTWVudS5jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwTWVudS5pdGVtcy5hZGQobWVudUl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cE1lbnUucG9wdXAoY2xpY2tlZEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEltYWdlU2V0UGVlciBleHRlbmRzIFR5cGVkQ2FyZEVsZW1lbnRQZWVyPEFkYXB0aXZlLkltYWdlU2V0PiB7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgSW1hZ2VTaXplUHJvcGVydHkgPSBuZXcgRW51bVByb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzAsIFwiaW1hZ2VTaXplXCIsIFwiSW1hZ2Ugc2l6ZVwiLCBBZGFwdGl2ZS5TaXplKTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxBZGRDb21tYW5kcyhjb21tYW5kczogQXJyYXk8UGVlckNvbW1hbmQ+KSB7XHJcbiAgICAgICAgc3VwZXIuaW50ZXJuYWxBZGRDb21tYW5kcyhjb21tYW5kcyk7XHJcblxyXG4gICAgICAgIGNvbW1hbmRzLnB1c2goXHJcbiAgICAgICAgICAgIG5ldyBQZWVyQ29tbWFuZChcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkFkZCBhbiBpbWFnZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb25DbGFzczogXCJhY2QtaWNvbi1pbWFnZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzUHJvbW90YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlOiAoY29tbWFuZDogUGVlckNvbW1hbmQsIGNsaWNrZWRFbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3SW1hZ2UgPSBuZXcgQWRhcHRpdmUuSW1hZ2UoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FyZEVsZW1lbnQuYWRkSW1hZ2UobmV3SW1hZ2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRDaGlsZChDYXJkRGVzaWduZXJTdXJmYWNlLmNhcmRFbGVtZW50UGVlclJlZ2lzdHJ5LmNyZWF0ZVBlZXJJbnN0YW5jZSh0aGlzLmRlc2lnbmVyU3VyZmFjZSwgdGhpcywgbmV3SW1hZ2UpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHByb3BlcnR5U2hlZXQ6IFByb3BlcnR5U2hlZXQsIGRlZmF1bHRDYXRlZ29yeTogc3RyaW5nID0gUHJvcGVydHlTaGVldENhdGVnb3J5LkRlZmF1bHRDYXRlZ29yeSkge1xyXG4gICAgICAgIHN1cGVyLnBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0LCBkZWZhdWx0Q2F0ZWdvcnkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgZGVmYXVsdENhdGVnb3J5LFxyXG4gICAgICAgICAgICBJbWFnZVNldFBlZXIuSW1hZ2VTaXplUHJvcGVydHkpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSW1hZ2VQZWVyIGV4dGVuZHMgVHlwZWRDYXJkRWxlbWVudFBlZXI8QWRhcHRpdmUuSW1hZ2U+IHtcclxuICAgIHN0YXRpYyByZWFkb25seSB1cmxQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcInVybFwiLCBcIlVybFwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBhbHRUZXh0UHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMCwgXCJhbHRUZXh0XCIsIFwiQWx0ZXJuYXRlIHRleHRcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgc2l6ZVByb3BlcnR5ID0gbmV3IEVudW1Qcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcInNpemVcIiwgXCJTaXplXCIsIEFkYXB0aXZlLlNpemUpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHBpeGVsV2lkdGhQcm9wZXJ0eSA9IG5ldyBOdW1iZXJQcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8xLCBcInBpeGVsV2lkdGhcIiwgXCJXaWR0aCBpbiBwaXhlbHNcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgcGl4ZWxIZWlnaHRQcm9wZXJ0eSA9IG5ldyBOdW1iZXJQcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8xLCBcInBpeGVsSGVpZ2h0XCIsIFwiSGVpZ2h0IGluIHBpeGVsc1wiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBzdHlsZVByb3BlcnR5ID0gbmV3IEVudW1Qcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcInN0eWxlXCIsIFwiU3R5bGVcIiwgQWRhcHRpdmUuSW1hZ2VTdHlsZSk7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgYmFja2dyb3VuZENvbG9yUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMSwgXCJiYWNrZ3JvdW5kQ29sb3JcIiwgXCJCYWNrZ3JvdW5kIGNvbG9yXCIpO1xyXG5cclxuICAgIHByaXZhdGUgZ2V0IGlzUGFyZW50SW1hZ2VTZXQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50IGluc3RhbmNlb2YgSW1hZ2VTZXRQZWVyO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRHJhZ2dhYmxlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5pc1BhcmVudEltYWdlU2V0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldEJvdW5kaW5nUmVjdCgpOiBSZWN0IHtcclxuICAgICAgICBpZiAodGhpcy5pc1BhcmVudEltYWdlU2V0KSB7XHJcbiAgICAgICAgICAgIGxldCBkZXNpZ25TdXJmYWNlT2Zmc2V0ID0gdGhpcy5kZXNpZ25lclN1cmZhY2UuZ2V0RGVzaWduZXJTdXJmYWNlT2Zmc2V0KCk7XHJcbiAgICAgICAgICAgIGxldCBhY3Rpb25Cb3VuZGluZ1JlY3QgPSB0aGlzLmNhcmRFbGVtZW50LnJlbmRlcmVkRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVjdChcclxuICAgICAgICAgICAgICAgIGFjdGlvbkJvdW5kaW5nUmVjdC50b3AgLSBkZXNpZ25TdXJmYWNlT2Zmc2V0LnksXHJcbiAgICAgICAgICAgICAgICBhY3Rpb25Cb3VuZGluZ1JlY3QucmlnaHQgLSBkZXNpZ25TdXJmYWNlT2Zmc2V0LngsXHJcbiAgICAgICAgICAgICAgICBhY3Rpb25Cb3VuZGluZ1JlY3QuYm90dG9tIC0gZGVzaWduU3VyZmFjZU9mZnNldC55LFxyXG4gICAgICAgICAgICAgICAgYWN0aW9uQm91bmRpbmdSZWN0LmxlZnQgLSBkZXNpZ25TdXJmYWNlT2Zmc2V0LnhcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5nZXRCb3VuZGluZ1JlY3QoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHByb3BlcnR5U2hlZXQ6IFByb3BlcnR5U2hlZXQsIGRlZmF1bHRDYXRlZ29yeTogc3RyaW5nID0gUHJvcGVydHlTaGVldENhdGVnb3J5LkRlZmF1bHRDYXRlZ29yeSkge1xyXG4gICAgICAgIHN1cGVyLnBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0LCBkZWZhdWx0Q2F0ZWdvcnkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgZGVmYXVsdENhdGVnb3J5LFxyXG4gICAgICAgICAgICBJbWFnZVBlZXIudXJsUHJvcGVydHksXHJcbiAgICAgICAgICAgIEltYWdlUGVlci5hbHRUZXh0UHJvcGVydHkpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaXNQYXJlbnRJbWFnZVNldCkge1xyXG4gICAgICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgICAgIFByb3BlcnR5U2hlZXRDYXRlZ29yeS5MYXlvdXRDYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgIEltYWdlUGVlci5zaXplUHJvcGVydHksXHJcbiAgICAgICAgICAgICAgICBJbWFnZVBlZXIucGl4ZWxXaWR0aFByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgSW1hZ2VQZWVyLnBpeGVsSGVpZ2h0UHJvcGVydHkpO1xyXG5cclxuICAgICAgICAgICAgcHJvcGVydHlTaGVldC5hZGQoXHJcbiAgICAgICAgICAgICAgICBQcm9wZXJ0eVNoZWV0Q2F0ZWdvcnkuU3R5bGVDYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgIEltYWdlUGVlci5zdHlsZVByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgSW1hZ2VQZWVyLmJhY2tncm91bmRDb2xvclByb3BlcnR5KTtcclxuXHJcbiAgICAgICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICAgICAgUHJvcGVydHlTaGVldENhdGVnb3J5LlNlbGVjdGlvbkFjdGlvbixcclxuICAgICAgICAgICAgICAgIENvbnRhaW5lclBlZXIuc2VsZWN0QWN0aW9uUHJvcGVydHkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuY2FyZEVsZW1lbnQuc2VsZWN0QWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0QWN0aW9uUGVlciA9IENhcmREZXNpZ25lclN1cmZhY2UuYWN0aW9uUGVlclJlZ2lzdHJ5LmNyZWF0ZVBlZXJJbnN0YW5jZSh0aGlzLmRlc2lnbmVyU3VyZmFjZSwgbnVsbCwgdGhpcy5jYXJkRWxlbWVudC5zZWxlY3RBY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0QWN0aW9uUGVlci5vbkNoYW5nZWQgPSAoc2VuZGVyOiBEZXNpZ25lclBlZXIsIHVwZGF0ZVByb3BlcnR5U2hlZXQ6IGJvb2xlYW4pID0+IHsgdGhpcy5jaGFuZ2VkKHVwZGF0ZVByb3BlcnR5U2hlZXQpOyB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBzdWJQcm9wZXJ0eVNoZWV0ID0gbmV3IFByb3BlcnR5U2hlZXQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0QWN0aW9uUGVlci5wb3B1bGF0ZVByb3BlcnR5U2hlZXQoc3ViUHJvcGVydHlTaGVldCwgUHJvcGVydHlTaGVldENhdGVnb3J5LlNlbGVjdGlvbkFjdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgc3ViUHJvcGVydHlTaGVldC5yZW1vdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgQWN0aW9uUGVlci5pY29uVXJsUHJvcGVydHksXHJcbiAgICAgICAgICAgICAgICAgICAgQWN0aW9uUGVlci5zdHlsZVByb3BlcnR5KTtcclxuXHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgICAgICAgICBQcm9wZXJ0eVNoZWV0Q2F0ZWdvcnkuU2VsZWN0aW9uQWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTdWJQcm9wZXJ0eVNoZWV0RW50cnkoVmVyc2lvbnMudjFfMiwgdGhpcy5jYXJkRWxlbWVudC5zZWxlY3RBY3Rpb24sIHN1YlByb3BlcnR5U2hlZXQpKTsgICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTWVkaWFQZWVyIGV4dGVuZHMgVHlwZWRDYXJkRWxlbWVudFBlZXI8QWRhcHRpdmUuTWVkaWE+IHtcclxuICAgIHN0YXRpYyByZWFkb25seSBhbHRUZXh0UHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMSwgXCJhbHRUZXh0XCIsIFwiQWx0ZXJuYXRlIHRleHRcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgcG9zdGVyVXJsUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMSwgXCJwb3N0ZXJVcmxcIiwgXCJQb3N0ZXIgVVJMXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHNvdXJjZXNQcm9wZXJ0eSA9IG5ldyBOYW1lVmFsdWVQYWlyUHJvcGVydHlFZGl0b3IoXHJcbiAgICAgICAgVmVyc2lvbnMudjFfMSxcclxuICAgICAgICBcInNvdXJjZXNcIixcclxuICAgICAgICBcInVybFwiLFxyXG4gICAgICAgIFwibWltZVR5cGVcIixcclxuICAgICAgICAobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSA9PiB7IHJldHVybiBuZXcgQWRhcHRpdmUuTWVkaWFTb3VyY2UobmFtZSwgdmFsdWUpOyB9LFxyXG4gICAgICAgIFwiVVJMXCIsXHJcbiAgICAgICAgXCJNSU1FIHR5cGVcIixcclxuICAgICAgICBcIkFkZCBhIG5ldyBzb3VyY2VcIixcclxuICAgICAgICBcIk5vIHNvdXJjZSBoYXMgYmVlbiBkZWZpbmVkLlwiKTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxHZXRUcmVlSXRlbVRleHQoKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAodGhpcy5jYXJkRWxlbWVudC5zZWxlY3RlZE1lZGlhVHlwZSA9PSBcImF1ZGlvXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiYXVkaW9cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5jYXJkRWxlbWVudC5zZWxlY3RlZE1lZGlhVHlwZSA9PSBcInZpZGVvXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwidmlkZW9cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5pbnRlcm5hbEdldFRyZWVJdGVtVGV4dCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwb3B1bGF0ZVByb3BlcnR5U2hlZXQocHJvcGVydHlTaGVldDogUHJvcGVydHlTaGVldCwgZGVmYXVsdENhdGVnb3J5OiBzdHJpbmcgPSBQcm9wZXJ0eVNoZWV0Q2F0ZWdvcnkuRGVmYXVsdENhdGVnb3J5KSB7XHJcbiAgICAgICAgc3VwZXIucG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHByb3BlcnR5U2hlZXQsIGRlZmF1bHRDYXRlZ29yeSk7XHJcblxyXG4gICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICBkZWZhdWx0Q2F0ZWdvcnksXHJcbiAgICAgICAgICAgIE1lZGlhUGVlci5hbHRUZXh0UHJvcGVydHksXHJcbiAgICAgICAgICAgIE1lZGlhUGVlci5wb3N0ZXJVcmxQcm9wZXJ0eSk7XHJcblxyXG4gICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICBcIlNvdXJjZXNcIixcclxuICAgICAgICAgICAgTWVkaWFQZWVyLnNvdXJjZXNQcm9wZXJ0eSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBGYWN0U2V0UGVlciBleHRlbmRzIFR5cGVkQ2FyZEVsZW1lbnRQZWVyPEFkYXB0aXZlLkZhY3RTZXQ+IHtcclxuICAgIHN0YXRpYyByZWFkb25seSBmYWN0c1Byb3BlcnR5ID0gbmV3IE5hbWVWYWx1ZVBhaXJQcm9wZXJ0eUVkaXRvcihcclxuICAgICAgICBWZXJzaW9ucy52MV8wLFxyXG4gICAgICAgIFwiZmFjdHNcIixcclxuICAgICAgICBcIm5hbWVcIixcclxuICAgICAgICBcInZhbHVlXCIsXHJcbiAgICAgICAgKG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZykgPT4geyByZXR1cm4gbmV3IEFkYXB0aXZlLkZhY3QobmFtZSwgdmFsdWUpOyB9LFxyXG4gICAgICAgIFwiTmFtZVwiLFxyXG4gICAgICAgIFwiVmFsdWVcIixcclxuICAgICAgICBcIkFkZCBhIG5ldyBmYWN0XCIsXHJcbiAgICAgICAgXCJUaGlzIEZhY3RTZXQgaXMgZW1wdHkuXCIpO1xyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbEdldFRyZWVJdGVtVGV4dCgpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICh0aGlzLmNhcmRFbGVtZW50LmZhY3RzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIk5vIGZhY3RcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBhbGxOYW1lcyA9IHRoaXMuY2FyZEVsZW1lbnQuZmFjdHMubWFwKFxyXG4gICAgICAgICAgICAodmFsdWUsIGluZGV4LCBhcnJheSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLm5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApXHJcblxyXG4gICAgICAgIHJldHVybiBhbGxOYW1lcy5qb2luKFwiLCBcIik7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUNhcmRFbGVtZW50KCkge1xyXG4gICAgICAgIHN1cGVyLmluaXRpYWxpemVDYXJkRWxlbWVudCgpO1xyXG5cclxuICAgICAgICB0aGlzLmNhcmRFbGVtZW50LmZhY3RzLnB1c2goXHJcbiAgICAgICAgICAgIG5ldyBBZGFwdGl2ZS5GYWN0KFwiRmFjdCAxXCIsIFwiVmFsdWUgMVwiKSxcclxuICAgICAgICAgICAgbmV3IEFkYXB0aXZlLkZhY3QoXCJGYWN0IDJcIiwgXCJWYWx1ZSAyXCIpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwb3B1bGF0ZVByb3BlcnR5U2hlZXQocHJvcGVydHlTaGVldDogUHJvcGVydHlTaGVldCwgZGVmYXVsdENhdGVnb3J5OiBzdHJpbmcgPSBQcm9wZXJ0eVNoZWV0Q2F0ZWdvcnkuRGVmYXVsdENhdGVnb3J5KSB7XHJcbiAgICAgICAgc3VwZXIucG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHByb3BlcnR5U2hlZXQsIGRlZmF1bHRDYXRlZ29yeSk7XHJcblxyXG4gICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICBcIkZhY3RzXCIsXHJcbiAgICAgICAgICAgIEZhY3RTZXRQZWVyLmZhY3RzUHJvcGVydHkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LnJlbW92ZShDYXJkRWxlbWVudFBlZXIuaG9yaXpvbnRhbEFsaWdubWVudFByb3BlcnR5KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIElucHV0UGVlcjxUSW5wdXQgZXh0ZW5kcyBBZGFwdGl2ZS5JbnB1dD4gZXh0ZW5kcyBUeXBlZENhcmRFbGVtZW50UGVlcjxUSW5wdXQ+IHtcclxuICAgIHN0YXRpYyByZWFkb25seSBkZWZhdWx0VmFsdWVQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcImRlZmF1bHRWYWx1ZVwiLCBcIkRlZmF1bHQgdmFsdWVcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgdmFsaWRhdGlvblByb3BlcnR5ID0gbmV3IENvbXBvdW5kUHJvcGVydHlFZGl0b3IoXHJcbiAgICAgICAgVmVyc2lvbnMudk5leHQsXHJcbiAgICAgICAgXCJ2YWxpZGF0aW9uXCIsXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgICBuZXcgRW51bVByb3BlcnR5RWRpdG9yKFZlcnNpb25zLnZOZXh0LCBcIm5lY2Vzc2l0eVwiLCBcIk5lY2Vzc2l0eVwiLCBBZGFwdGl2ZS5JbnB1dFZhbGlkYXRpb25OZWNlc3NpdHkpLFxyXG4gICAgICAgICAgICBuZXcgU3RyaW5nUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudk5leHQsIFwiZXJyb3JNZXNzYWdlXCIsIFwiRXJyb3IgbWVzc2FnZVwiKVxyXG4gICAgICAgIF1cclxuICAgICk7XHJcblxyXG4gICAgcG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHByb3BlcnR5U2hlZXQ6IFByb3BlcnR5U2hlZXQsIGRlZmF1bHRDYXRlZ29yeTogc3RyaW5nID0gUHJvcGVydHlTaGVldENhdGVnb3J5LkRlZmF1bHRDYXRlZ29yeSkge1xyXG4gICAgICAgIHN1cGVyLnBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0LCBkZWZhdWx0Q2F0ZWdvcnkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgXCJWYWxpZGF0aW9uXCIsXHJcbiAgICAgICAgICAgIElucHV0UGVlci52YWxpZGF0aW9uUHJvcGVydHkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LnJlbW92ZShcclxuICAgICAgICAgICAgQ2FyZEVsZW1lbnRQZWVyLmhvcml6b250YWxBbGlnbm1lbnRQcm9wZXJ0eSxcclxuICAgICAgICAgICAgQ2FyZEVsZW1lbnRQZWVyLmhlaWdodFByb3BlcnR5KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRleHRJbnB1dFBlZXIgZXh0ZW5kcyBJbnB1dFBlZXI8QWRhcHRpdmUuVGV4dElucHV0PiB7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgcGxhY2Vob2xkZXJQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcInBsYWNlaG9sZGVyXCIsIFwiUGxhY2Vob2xkZXJcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgaXNNdWx0aWxpbmVQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMCwgXCJpc011bHRpbGluZVwiLCBcIk11bHRpLWxpbmVcIiwgdHJ1ZSk7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgc3R5bGVQcm9wZXJ0eSA9IG5ldyBFbnVtUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMCwgXCJzdHlsZVwiLCBcIlN0eWxlXCIsIEFkYXB0aXZlLklucHV0VGV4dFN0eWxlKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBtYXhMZW5ndGhQcm9wZXJ0eSA9IG5ldyBOdW1iZXJQcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcIm1heExlbmd0aFwiLCBcIk1heGltdW0gbGVuZ3RoXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IGlubGluZUFjdGlvblByb3BlcnR5ID0gbmV3IEFjdGlvblByb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzIsIFwiaW5saW5lQWN0aW9uXCIsIFwiQWN0aW9uIHR5cGVcIiwgWyBBZGFwdGl2ZS5TaG93Q2FyZEFjdGlvbi5Kc29uVHlwZU5hbWUgXSwgdHJ1ZSk7XHJcblxyXG4gICAgcG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHByb3BlcnR5U2hlZXQ6IFByb3BlcnR5U2hlZXQsIGRlZmF1bHRDYXRlZ29yeTogc3RyaW5nID0gUHJvcGVydHlTaGVldENhdGVnb3J5LkRlZmF1bHRDYXRlZ29yeSkge1xyXG4gICAgICAgIHN1cGVyLnBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0LCBkZWZhdWx0Q2F0ZWdvcnkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgZGVmYXVsdENhdGVnb3J5LFxyXG4gICAgICAgICAgICBUZXh0SW5wdXRQZWVyLnBsYWNlaG9sZGVyUHJvcGVydHksXHJcbiAgICAgICAgICAgIFRleHRJbnB1dFBlZXIuaXNNdWx0aWxpbmVQcm9wZXJ0eSk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5jYXJkRWxlbWVudC5pc011bHRpbGluZSkge1xyXG4gICAgICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgICAgIFByb3BlcnR5U2hlZXRDYXRlZ29yeS5EZWZhdWx0Q2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICBUZXh0SW5wdXRQZWVyLnN0eWxlUHJvcGVydHkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvcGVydHlTaGVldC5hZGQoXHJcbiAgICAgICAgICAgIFByb3BlcnR5U2hlZXRDYXRlZ29yeS5JbmxpbmVBY3Rpb24sXHJcbiAgICAgICAgICAgIFRleHRJbnB1dFBlZXIuaW5saW5lQWN0aW9uUHJvcGVydHkpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jYXJkRWxlbWVudC5pbmxpbmVBY3Rpb24pIHtcclxuICAgICAgICAgICAgbGV0IGlubGluZUFjdGlvblBlZXIgPSBDYXJkRGVzaWduZXJTdXJmYWNlLmFjdGlvblBlZXJSZWdpc3RyeS5jcmVhdGVQZWVySW5zdGFuY2UodGhpcy5kZXNpZ25lclN1cmZhY2UsIG51bGwsIHRoaXMuY2FyZEVsZW1lbnQuaW5saW5lQWN0aW9uKTtcclxuICAgICAgICAgICAgaW5saW5lQWN0aW9uUGVlci5vbkNoYW5nZWQgPSAoc2VuZGVyOiBEZXNpZ25lclBlZXIsIHVwZGF0ZVByb3BlcnR5U2hlZXQ6IGJvb2xlYW4pID0+IHsgdGhpcy5jaGFuZ2VkKHVwZGF0ZVByb3BlcnR5U2hlZXQpOyB9O1xyXG5cclxuICAgICAgICAgICAgbGV0IHN1YlByb3BlcnR5U2hlZXQgPSBuZXcgUHJvcGVydHlTaGVldChmYWxzZSk7XHJcbiAgICAgICAgICAgIGlubGluZUFjdGlvblBlZXIucG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHN1YlByb3BlcnR5U2hlZXQsIFByb3BlcnR5U2hlZXRDYXRlZ29yeS5JbmxpbmVBY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgc3ViUHJvcGVydHlTaGVldC5yZW1vdmUoQWN0aW9uUGVlci5zdHlsZVByb3BlcnR5KTtcclxuXHJcbiAgICAgICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICAgICAgUHJvcGVydHlTaGVldENhdGVnb3J5LklubGluZUFjdGlvbixcclxuICAgICAgICAgICAgICAgIG5ldyBTdWJQcm9wZXJ0eVNoZWV0RW50cnkoVmVyc2lvbnMudjFfMiwgdGhpcy5jYXJkRWxlbWVudC5pbmxpbmVBY3Rpb24sIHN1YlByb3BlcnR5U2hlZXQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICBkZWZhdWx0Q2F0ZWdvcnksXHJcbiAgICAgICAgICAgIFRleHRJbnB1dFBlZXIubWF4TGVuZ3RoUHJvcGVydHksXHJcbiAgICAgICAgICAgIFRleHRJbnB1dFBlZXIuZGVmYXVsdFZhbHVlUHJvcGVydHkpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVDYXJkRWxlbWVudCgpIHtcclxuICAgICAgICBzdXBlci5pbml0aWFsaXplQ2FyZEVsZW1lbnQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5jYXJkRWxlbWVudC5wbGFjZWhvbGRlciA9IFwiUGxhY2Vob2xkZXIgdGV4dFwiO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTnVtYmVySW5wdXRQZWVyIGV4dGVuZHMgSW5wdXRQZWVyPEFkYXB0aXZlLk51bWJlcklucHV0PiB7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgcGxhY2Vob2xkZXJQcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcInBsYWNlaG9sZGVyXCIsIFwiUGxhY2Vob2xkZXJcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgbWluUHJvcGVydHkgPSBuZXcgTnVtYmVyUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMCwgXCJtaW5cIiwgXCJNaW5pbXVtIHZhbHVlXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IG1heFByb3BlcnR5ID0gbmV3IE51bWJlclByb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzAsIFwibWF4XCIsIFwiTWF4aW11bSB2YWx1ZVwiKTtcclxuXHJcbiAgICBwb3B1bGF0ZVByb3BlcnR5U2hlZXQocHJvcGVydHlTaGVldDogUHJvcGVydHlTaGVldCwgZGVmYXVsdENhdGVnb3J5OiBzdHJpbmcgPSBQcm9wZXJ0eVNoZWV0Q2F0ZWdvcnkuRGVmYXVsdENhdGVnb3J5KSB7XHJcbiAgICAgICAgc3VwZXIucG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHByb3BlcnR5U2hlZXQsIGRlZmF1bHRDYXRlZ29yeSk7XHJcblxyXG4gICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICBkZWZhdWx0Q2F0ZWdvcnksXHJcbiAgICAgICAgICAgIE51bWJlcklucHV0UGVlci5wbGFjZWhvbGRlclByb3BlcnR5LFxyXG4gICAgICAgICAgICBOdW1iZXJJbnB1dFBlZXIuZGVmYXVsdFZhbHVlUHJvcGVydHksXHJcbiAgICAgICAgICAgIE51bWJlcklucHV0UGVlci5taW5Qcm9wZXJ0eSxcclxuICAgICAgICAgICAgTnVtYmVySW5wdXRQZWVyLm1heFByb3BlcnR5KTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplQ2FyZEVsZW1lbnQoKSB7XHJcbiAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZUNhcmRFbGVtZW50KCk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyZEVsZW1lbnQucGxhY2Vob2xkZXIgPSBcIlBsYWNlaG9sZGVyIHRleHRcIjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERhdGVJbnB1dFBlZXIgZXh0ZW5kcyBJbnB1dFBlZXI8QWRhcHRpdmUuRGF0ZUlucHV0PiB7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgbWluUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMCwgXCJtaW5cIiwgXCJNaW5pbXVtIHZhbHVlXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IG1heFByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzAsIFwibWF4XCIsIFwiTWF4aW11bSB2YWx1ZVwiKTtcclxuXHJcbiAgICBwb3B1bGF0ZVByb3BlcnR5U2hlZXQocHJvcGVydHlTaGVldDogUHJvcGVydHlTaGVldCwgZGVmYXVsdENhdGVnb3J5OiBzdHJpbmcgPSBQcm9wZXJ0eVNoZWV0Q2F0ZWdvcnkuRGVmYXVsdENhdGVnb3J5KSB7XHJcbiAgICAgICAgc3VwZXIucG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHByb3BlcnR5U2hlZXQsIGRlZmF1bHRDYXRlZ29yeSk7XHJcblxyXG4gICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICBkZWZhdWx0Q2F0ZWdvcnksXHJcbiAgICAgICAgICAgIERhdGVJbnB1dFBlZXIuZGVmYXVsdFZhbHVlUHJvcGVydHksXHJcbiAgICAgICAgICAgIERhdGVJbnB1dFBlZXIubWluUHJvcGVydHksXHJcbiAgICAgICAgICAgIERhdGVJbnB1dFBlZXIubWF4UHJvcGVydHkpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGltZUlucHV0UGVlciBleHRlbmRzIElucHV0UGVlcjxBZGFwdGl2ZS5UaW1lSW5wdXQ+IHtcclxuICAgIHN0YXRpYyByZWFkb25seSBtaW5Qcm9wZXJ0eSA9IG5ldyBTdHJpbmdQcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcIm1pblwiLCBcIk1pbmltdW0gdmFsdWVcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgbWF4UHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMCwgXCJtYXhcIiwgXCJNYXhpbXVtIHZhbHVlXCIpO1xyXG5cclxuICAgIHBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0OiBQcm9wZXJ0eVNoZWV0LCBkZWZhdWx0Q2F0ZWdvcnk6IHN0cmluZyA9IFByb3BlcnR5U2hlZXRDYXRlZ29yeS5EZWZhdWx0Q2F0ZWdvcnkpIHtcclxuICAgICAgICBzdXBlci5wb3B1bGF0ZVByb3BlcnR5U2hlZXQocHJvcGVydHlTaGVldCwgZGVmYXVsdENhdGVnb3J5KTtcclxuXHJcbiAgICAgICAgcHJvcGVydHlTaGVldC5hZGQoXHJcbiAgICAgICAgICAgIGRlZmF1bHRDYXRlZ29yeSxcclxuICAgICAgICAgICAgVGltZUlucHV0UGVlci5kZWZhdWx0VmFsdWVQcm9wZXJ0eSxcclxuICAgICAgICAgICAgVGltZUlucHV0UGVlci5taW5Qcm9wZXJ0eSxcclxuICAgICAgICAgICAgVGltZUlucHV0UGVlci5tYXhQcm9wZXJ0eSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUb2dnbGVJbnB1dFBlZXIgZXh0ZW5kcyBJbnB1dFBlZXI8QWRhcHRpdmUuVG9nZ2xlSW5wdXQ+IHtcclxuICAgIHN0YXRpYyByZWFkb25seSB0aXRsZVByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzAsIFwidGl0bGVcIiwgXCJUaXRsZVwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSB2YWx1ZU9uUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMCwgXCJ2YWx1ZU9uXCIsIFwiVmFsdWUgd2hlbiBvblwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSB2YWx1ZU9mZlByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzAsIFwidmFsdWVPZmZcIiwgXCJWYWx1ZSB3aGVuIG9mZlwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSB3cmFwUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzIsIFwid3JhcFwiLCBcIldyYXBcIik7XHJcblxyXG4gICAgcG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHByb3BlcnR5U2hlZXQ6IFByb3BlcnR5U2hlZXQsIGRlZmF1bHRDYXRlZ29yeTogc3RyaW5nID0gUHJvcGVydHlTaGVldENhdGVnb3J5LkRlZmF1bHRDYXRlZ29yeSkge1xyXG4gICAgICAgIHN1cGVyLnBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0LCBkZWZhdWx0Q2F0ZWdvcnkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgZGVmYXVsdENhdGVnb3J5LFxyXG4gICAgICAgICAgICBUb2dnbGVJbnB1dFBlZXIudGl0bGVQcm9wZXJ0eSxcclxuICAgICAgICAgICAgVG9nZ2xlSW5wdXRQZWVyLnZhbHVlT25Qcm9wZXJ0eSxcclxuICAgICAgICAgICAgVG9nZ2xlSW5wdXRQZWVyLnZhbHVlT2ZmUHJvcGVydHksXHJcbiAgICAgICAgICAgIFRvZ2dsZUlucHV0UGVlci5kZWZhdWx0VmFsdWVQcm9wZXJ0eSk7XHJcblxyXG4gICAgICAgIHByb3BlcnR5U2hlZXQuYWRkKFxyXG4gICAgICAgICAgICBQcm9wZXJ0eVNoZWV0Q2F0ZWdvcnkuTGF5b3V0Q2F0ZWdvcnksXHJcbiAgICAgICAgICAgIFRvZ2dsZUlucHV0UGVlci53cmFwUHJvcGVydHkpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVDYXJkRWxlbWVudCgpIHtcclxuICAgICAgICB0aGlzLmNhcmRFbGVtZW50LnRpdGxlID0gXCJOZXcgSW5wdXQuVG9nZ2xlXCI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDaG9pY2VTZXRJbnB1dFBlZXIgZXh0ZW5kcyBJbnB1dFBlZXI8QWRhcHRpdmUuQ2hvaWNlU2V0SW5wdXQ+IHtcclxuICAgIHN0YXRpYyByZWFkb25seSBwbGFjZWhvbGRlclByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzAsIFwicGxhY2Vob2xkZXJcIiwgXCJQbGFjZWhvbGRlclwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBpc011bHRpc2VsZWN0UHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzAsIFwiaXNNdWx0aVNlbGVjdFwiLCBcIkFsbG93IG11bHRpIHNlbGVjdGlvblwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBpc0NvbXBhY3RQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMCwgXCJpc0NvbXBhY3RcIiwgXCJDb21wYWN0IHN0eWxlXCIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHdyYXBQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMiwgXCJ3cmFwXCIsIFwiV3JhcFwiKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBjaG9pY2VzUHJvcGVydHkgPSBuZXcgTmFtZVZhbHVlUGFpclByb3BlcnR5RWRpdG9yKFxyXG4gICAgICAgIFZlcnNpb25zLnYxXzAsXHJcbiAgICAgICAgXCJjaG9pY2VzXCIsXHJcbiAgICAgICAgXCJ0aXRsZVwiLFxyXG4gICAgICAgIFwidmFsdWVcIixcclxuICAgICAgICAobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSA9PiB7IHJldHVybiBuZXcgQWRhcHRpdmUuQ2hvaWNlKG5hbWUsIHZhbHVlKTsgfSxcclxuICAgICAgICBcIlRpdGxlXCIsXHJcbiAgICAgICAgXCJWYWx1ZVwiLFxyXG4gICAgICAgIFwiQWRkIGEgbmV3IGNob2ljZVwiLFxyXG4gICAgICAgIFwiVGhpcyBDaG9pY2VTZXQgaXMgZW1wdHlcIik7XHJcblxyXG4gICAgcG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHByb3BlcnR5U2hlZXQ6IFByb3BlcnR5U2hlZXQsIGRlZmF1bHRDYXRlZ29yeTogc3RyaW5nID0gUHJvcGVydHlTaGVldENhdGVnb3J5LkRlZmF1bHRDYXRlZ29yeSkge1xyXG4gICAgICAgIHN1cGVyLnBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0LCBkZWZhdWx0Q2F0ZWdvcnkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgZGVmYXVsdENhdGVnb3J5LFxyXG4gICAgICAgICAgICBDaG9pY2VTZXRJbnB1dFBlZXIucGxhY2Vob2xkZXJQcm9wZXJ0eSxcclxuICAgICAgICAgICAgQ2hvaWNlU2V0SW5wdXRQZWVyLmlzTXVsdGlzZWxlY3RQcm9wZXJ0eSxcclxuICAgICAgICAgICAgQ2hvaWNlU2V0SW5wdXRQZWVyLmlzQ29tcGFjdFByb3BlcnR5LFxyXG4gICAgICAgICAgICBDaG9pY2VTZXRJbnB1dFBlZXIuZGVmYXVsdFZhbHVlUHJvcGVydHkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgUHJvcGVydHlTaGVldENhdGVnb3J5LkxheW91dENhdGVnb3J5LFxyXG4gICAgICAgICAgICBUb2dnbGVJbnB1dFBlZXIud3JhcFByb3BlcnR5KTtcclxuXHJcbiAgICAgICAgcHJvcGVydHlTaGVldC5hZGQoXHJcbiAgICAgICAgICAgIFwiQ2hvaWNlc1wiLFxyXG4gICAgICAgICAgICBDaG9pY2VTZXRJbnB1dFBlZXIuY2hvaWNlc1Byb3BlcnR5KTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplQ2FyZEVsZW1lbnQoKSB7XHJcbiAgICAgICAgdGhpcy5jYXJkRWxlbWVudC5wbGFjZWhvbGRlciA9IFwiUGxhY2Vob2xkZXIgdGV4dFwiO1xyXG5cclxuICAgICAgICB0aGlzLmNhcmRFbGVtZW50LmNob2ljZXMucHVzaChcclxuICAgICAgICAgICAgbmV3IEFkYXB0aXZlLkNob2ljZShcIkNob2ljZSAxXCIsIFwiQ2hvaWNlIDFcIiksXHJcbiAgICAgICAgICAgIG5ldyBBZGFwdGl2ZS5DaG9pY2UoXCJDaG9pY2UgMlwiLCBcIkNob2ljZSAyXCIpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgVGV4dEJsb2NrUGVlcklucGxhY2VFZGl0b3IgZXh0ZW5kcyBDYXJkRWxlbWVudFBlZXJJbnBsYWNlRWRpdG9yPEFkYXB0aXZlLlRleHRCbG9jaz4ge1xyXG4gICAgcHJpdmF0ZSBfcmVuZGVyZWRFbGVtZW50OiBIVE1MVGV4dEFyZWFFbGVtZW50O1xyXG5cclxuICAgIHByaXZhdGUgY2xvc2UoYXBwbHlDaGFuZ2VzOiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub25DbG9zZSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2xvc2UoYXBwbHlDaGFuZ2VzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEVsZW1lbnQuc2VsZWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwbHlDaGFuZ2VzKCkge1xyXG4gICAgICAgIHRoaXMuY2FyZEVsZW1lbnQudGV4dCA9IHRoaXMuX3JlbmRlcmVkRWxlbWVudC52YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudC5jbGFzc05hbWUgPSBcImFjZC10ZXh0QmxvY2staW5wbGFjZS1lZGl0b3JcIjtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEVsZW1lbnQudmFsdWUgPSB0aGlzLmNhcmRFbGVtZW50LnRleHQ7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRFbGVtZW50Lm9ua2V5ZG93biA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENvbnRyb2xzLktFWV9FU0NBUEU6XHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENvbnRyb2xzLktFWV9FTlRFUjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuICFlLmNhbmNlbEJ1YmJsZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmNhcmRFbGVtZW50LmFwcGx5U3R5bGVzVG8odGhpcy5fcmVuZGVyZWRFbGVtZW50KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVkRWxlbWVudDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRleHRCbG9ja1BlZXIgZXh0ZW5kcyBUeXBlZENhcmRFbGVtZW50UGVlcjxBZGFwdGl2ZS5UZXh0QmxvY2s+IHtcclxuICAgIHN0YXRpYyByZWFkb25seSB0ZXh0UHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMCwgXCJ0ZXh0XCIsIFwiVGV4dFwiLCB0cnVlKTtcclxuICAgIHN0YXRpYyByZWFkb25seSB3cmFwUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzAsIFwid3JhcFwiLCBcIldyYXBcIik7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgbWF4TGluZXNQcm9wZXJ0eSA9IG5ldyBOdW1iZXJQcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcIm1heExpbmVzXCIsIFwiTWF4aW11bSBsaW5lc1wiLCAwKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBmb250VHlwZVByb3BlcnR5ID0gbmV3IEVudW1Qcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8yLCBcImZvbnRUeXBlXCIsIFwiRm9udCB0eXBlXCIsIEFkYXB0aXZlLkZvbnRUeXBlKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBzaXplUHJvcGVydHkgPSBuZXcgRW51bVByb3BlcnR5RWRpdG9yKFZlcnNpb25zLnYxXzAsIFwic2l6ZVwiLCBcIlNpemVcIiwgQWRhcHRpdmUuVGV4dFNpemUpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHdlaWdodFByb3BlcnR5ID0gbmV3IEVudW1Qcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcIndlaWdodFwiLCBcIldlaWdodFwiLCBBZGFwdGl2ZS5UZXh0V2VpZ2h0KTtcclxuICAgIHN0YXRpYyByZWFkb25seSBjb2xvclByb3BlcnR5ID0gbmV3IEVudW1Qcm9wZXJ0eUVkaXRvcihWZXJzaW9ucy52MV8wLCBcImNvbG9yXCIsIFwiQ29sb3JcIiwgQWRhcHRpdmUuVGV4dENvbG9yKTtcclxuICAgIHN0YXRpYyByZWFkb25seSBzdWJ0bGVQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHlFZGl0b3IoVmVyc2lvbnMudjFfMCwgXCJzdWJ0bGVcIiwgXCJTdWJ0bGVcIik7XHJcblxyXG4gICAgcHJvdGVjdGVkIGNyZWF0ZUlucGxhY2VFZGl0b3IoKTogRGVzaWduZXJQZWVySW5wbGFjZUVkaXRvciB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUZXh0QmxvY2tQZWVySW5wbGFjZUVkaXRvcih0aGlzLmNhcmRFbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxHZXRUcmVlSXRlbVRleHQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYXJkRWxlbWVudC50ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0OiBQcm9wZXJ0eVNoZWV0LCBkZWZhdWx0Q2F0ZWdvcnk6IHN0cmluZyA9IFByb3BlcnR5U2hlZXRDYXRlZ29yeS5EZWZhdWx0Q2F0ZWdvcnkpIHtcclxuICAgICAgICBzdXBlci5wb3B1bGF0ZVByb3BlcnR5U2hlZXQocHJvcGVydHlTaGVldCwgZGVmYXVsdENhdGVnb3J5KTtcclxuXHJcbiAgICAgICAgcHJvcGVydHlTaGVldC5hZGQoXHJcbiAgICAgICAgICAgIGRlZmF1bHRDYXRlZ29yeSxcclxuICAgICAgICAgICAgVGV4dEJsb2NrUGVlci50ZXh0UHJvcGVydHkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgUHJvcGVydHlTaGVldENhdGVnb3J5LkxheW91dENhdGVnb3J5LFxyXG4gICAgICAgICAgICBUZXh0QmxvY2tQZWVyLndyYXBQcm9wZXJ0eSxcclxuICAgICAgICAgICAgVGV4dEJsb2NrUGVlci5tYXhMaW5lc1Byb3BlcnR5KTtcclxuXHJcbiAgICAgICAgcHJvcGVydHlTaGVldC5hZGQoXHJcbiAgICAgICAgICAgIFByb3BlcnR5U2hlZXRDYXRlZ29yeS5TdHlsZUNhdGVnb3J5LFxyXG4gICAgICAgICAgICBUZXh0QmxvY2tQZWVyLmZvbnRUeXBlUHJvcGVydHksXHJcbiAgICAgICAgICAgIFRleHRCbG9ja1BlZXIuc2l6ZVByb3BlcnR5LFxyXG4gICAgICAgICAgICBUZXh0QmxvY2tQZWVyLndlaWdodFByb3BlcnR5LFxyXG4gICAgICAgICAgICBUZXh0QmxvY2tQZWVyLmNvbG9yUHJvcGVydHksXHJcbiAgICAgICAgICAgIFRleHRCbG9ja1BlZXIuc3VidGxlUHJvcGVydHkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRvb2xUaXAoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gXCJEb3VibGUgY2xpY2sgdG8gZWRpdFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVDYXJkRWxlbWVudCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuY2FyZEVsZW1lbnQudGV4dCB8fCB0aGlzLmNhcmRFbGVtZW50LnRleHQgPT0gXCJcIikge1xyXG4gICAgICAgICAgICB0aGlzLmNhcmRFbGVtZW50LnRleHQgPSBcIk5ldyBUZXh0QmxvY2tcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSaWNoVGV4dEJsb2NrUGVlciBleHRlbmRzIFR5cGVkQ2FyZEVsZW1lbnRQZWVyPEFkYXB0aXZlLlJpY2hUZXh0QmxvY2s+IHtcclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbEdldFRyZWVJdGVtVGV4dCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhcmRFbGVtZW50LmFzU3RyaW5nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcG9wdWxhdGVQcm9wZXJ0eVNoZWV0KHByb3BlcnR5U2hlZXQ6IFByb3BlcnR5U2hlZXQsIGRlZmF1bHRDYXRlZ29yeTogc3RyaW5nID0gUHJvcGVydHlTaGVldENhdGVnb3J5LkRlZmF1bHRDYXRlZ29yeSkge1xyXG4gICAgICAgIHN1cGVyLnBvcHVsYXRlUHJvcGVydHlTaGVldChwcm9wZXJ0eVNoZWV0LCBkZWZhdWx0Q2F0ZWdvcnkpO1xyXG5cclxuICAgICAgICBwcm9wZXJ0eVNoZWV0LmFkZChcclxuICAgICAgICAgICAgZGVmYXVsdENhdGVnb3J5LFxyXG4gICAgICAgICAgICBuZXcgQ3VzdG9tUHJvcGVydHlTaGVldEVudHJ5KFxyXG4gICAgICAgICAgICAgICAgXCIqXCIsXHJcbiAgICAgICAgICAgICAgICAoY29udGV4dDogUHJvcGVydHlTaGVldENvbnRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5mb1RleHRCbG9jayA9IG5ldyBBZGFwdGl2ZS5UZXh0QmxvY2soKTtcclxuICAgICAgICAgICAgICAgICAgICBpbmZvVGV4dEJsb2NrLnRleHQgPSBcIlVzZSB0aGUgKipDYXJkIFBheWxvYWQgRWRpdG9yKiogdG8gZWRpdCB0aGUgdGV4dCBvZiB0aGlzIFJpY2hUZXh0QmxvY2sgZWxlbWVudC5cIjtcclxuICAgICAgICAgICAgICAgICAgICBpbmZvVGV4dEJsb2NrLndyYXAgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGluZm9UZXh0QmxvY2suc3BhY2luZyA9IEFkYXB0aXZlLlNwYWNpbmcuTGFyZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5mb1RleHRCbG9jay5zZXBhcmF0b3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGluZm9UZXh0QmxvY2suaG9yaXpvbnRhbEFsaWdubWVudCA9IEFkYXB0aXZlLkhvcml6b250YWxBbGlnbm1lbnQuQ2VudGVyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5mb1RleHRCbG9jaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUNhcmRFbGVtZW50KCkge1xyXG4gICAgICAgIGxldCB0ZXh0UnVuID0gbmV3IEFkYXB0aXZlLlRleHRSdW4oKTtcclxuICAgICAgICB0ZXh0UnVuLnRleHQgPSBcIk5ldyBSaWNoVGV4dEJsb2NrXCI7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyZEVsZW1lbnQuYWRkSW5saW5lKHRleHRSdW4pO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBEaWFsb2cge1xyXG4gICAgcHJpdmF0ZSBfb3ZlcmxheUVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBfaXNPcGVuOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IHJlbmRlckNvbnRlbnQoKTogSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgb25DbG9zZTogKHNlbmRlcjogRGlhbG9nKSA9PiB2b2lkID0gbnVsbDtcclxuXHJcbiAgICB0aXRsZTogc3RyaW5nO1xyXG4gICAgd2lkdGg6IHN0cmluZztcclxuICAgIGhlaWdodDogc3RyaW5nO1xyXG5cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pc09wZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5fb3ZlcmxheUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICB0aGlzLl9vdmVybGF5RWxlbWVudC5jbGFzc05hbWUgPSBcImFjZC1kaWFsb2ctb3ZlcmxheVwiO1xyXG5cclxuICAgICAgICAgICAgbGV0IGRpYWxvZ0ZyYW1lRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGRpYWxvZ0ZyYW1lRWxlbWVudC5jbGFzc05hbWUgPSBcImFjZC1kaWFsb2ctZnJhbWVcIjtcclxuICAgICAgICAgICAgZGlhbG9nRnJhbWVFbGVtZW50LnN0eWxlLndpZHRoID0gdGhpcy53aWR0aDtcclxuICAgICAgICAgICAgZGlhbG9nRnJhbWVFbGVtZW50LnN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgbGV0IGNvbnRlbnQgPSB0aGlzLnJlbmRlckNvbnRlbnQoKTtcclxuICAgICAgICAgICAgY29udGVudC5zdHlsZS5mbGV4ID0gXCIxIDEgYXV0b1wiO1xyXG5cclxuICAgICAgICAgICAgZGlhbG9nRnJhbWVFbGVtZW50LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fb3ZlcmxheUVsZW1lbnQuYXBwZW5kQ2hpbGQoZGlhbG9nRnJhbWVFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5fb3ZlcmxheUVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5faXNPcGVuID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzT3Blbikge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuX292ZXJsYXlFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub25DbG9zZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkNsb3NlKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIERvd25sb2FkZXIge1xyXG4gICAgcHJpdmF0ZSBfZGF0YTogc3RyaW5nO1xyXG5cclxuICAgIHByaXZhdGUgZXJyb3IoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub25FcnJvcikge1xyXG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3VjY2VzcygpIHtcclxuICAgICAgICBpZiAodGhpcy5vblN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgdGhpcy5vblN1Y2Nlc3ModGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uRXJyb3I6IChzZW5kZXI6IERvd25sb2FkZXIpID0+IHZvaWQgPSBudWxsO1xyXG4gICAgb25TdWNjZXNzOiAoc2VuZGVyOiBEb3dubG9hZGVyKSA9PiB2b2lkID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSB1cmw6IHN0cmluZykge31cclxuXHJcbiAgICBkb3dubG9hZCgpIHtcclxuICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5lcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXF1ZXN0Lm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZGF0YSA9IHJlcXVlc3QucmVzcG9uc2VUZXh0O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zdWNjZXNzKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmVxdWVzdC5vcGVuKFwiR0VUXCIsIHRoaXMudXJsLCB0cnVlKTtcclxuICAgICAgICAgICAgcmVxdWVzdC5zZW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGRhdGEoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YTtcclxuICAgIH1cclxufSIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmltcG9ydCB7IElQb2ludCB9IGZyb20gXCIuL21pc2NlbGxhbmVvdXNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBEUkFHX1RIUkVTSE9MRCA9IDEwO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIERyYWdnYWJsZUVsZW1lbnQge1xyXG4gICAgcHJpdmF0ZSBfcmVuZGVyZWRFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgX2lzUG9pbnRlck92ZXI6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIF9pc1BvaW50ZXJEb3duOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBfbGFzdENsaWNrZWRQb2ludDogSVBvaW50O1xyXG4gICAgcHJpdmF0ZSBfZHJhZ2dpbmc6IGJvb2xlYW47XHJcblxyXG4gICAgcHJpdmF0ZSByZWxlYXNlUG9pbnRlckNhcHR1cmUocG9pbnRlcklkOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmdldERyYWdTb3VyY2VFbGVtZW50KCkucmVsZWFzZVBvaW50ZXJDYXB0dXJlKHBvaW50ZXJJZCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2lzUG9pbnRlckRvd24gPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IGlzUG9pbnRlck92ZXIoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzUG9pbnRlck92ZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHNldCBpc1BvaW50ZXJPdmVyKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlICE9IHRoaXMuX2lzUG9pbnRlck92ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5faXNQb2ludGVyT3ZlciA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXJ0RHJhZygpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0RyYWdnYWJsZSgpICYmICF0aGlzLmRyYWdnaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub25TdGFydERyYWcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TdGFydERyYWcodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHBvaW50ZXJEb3duKGU6IFBvaW50ZXJFdmVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy5faXNQb2ludGVyRG93bikge1xyXG4gICAgICAgICAgICB0aGlzLl9pc1BvaW50ZXJEb3duID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5fbGFzdENsaWNrZWRQb2ludCA9IHsgeDogZS5vZmZzZXRYLCB5OiBlLm9mZnNldFkgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RHJhZ1NvdXJjZUVsZW1lbnQoKS5zZXRQb2ludGVyQ2FwdHVyZShlLnBvaW50ZXJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBwb2ludGVyVXAoZTogUG9pbnRlckV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzUG9pbnRlckRvd24pIHtcclxuICAgICAgICAgICAgdGhpcy5yZWxlYXNlUG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5lbmREcmFnKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBwb2ludGVyTW92ZShlOiBQb2ludGVyRXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5faXNQb2ludGVyRG93bikge1xyXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoZS5vZmZzZXRYIC0gdGhpcy5fbGFzdENsaWNrZWRQb2ludC54KSA+PSBEUkFHX1RIUkVTSE9MRCB8fCBNYXRoLmFicyhlLm9mZnNldFkgLSB0aGlzLl9sYXN0Q2xpY2tlZFBvaW50LnkpID49IERSQUdfVEhSRVNIT0xEKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbGVhc2VQb2ludGVyQ2FwdHVyZShlLnBvaW50ZXJJZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydERyYWcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgY2xpY2soZTogTW91c2VFdmVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9uQ2xpY2spIHtcclxuICAgICAgICAgICAgdGhpcy5vbkRvdWJsZUNsaWNrKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZG91YmxlQ2xpY2soZTogTW91c2VFdmVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9uRG91YmxlQ2xpY2spIHtcclxuICAgICAgICAgICAgdGhpcy5vbkRvdWJsZUNsaWNrKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxVcGRhdGVDc3NTdHlsZXMoKSB7XHJcbiAgICAgICAgLy8gRG8gbm90aGluZyBpbiBiYXNlIGltcGxlbWVudGF0aW9uXHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGludGVybmFsVXBkYXRlTGF5b3V0KCkge1xyXG4gICAgICAgIC8vIERvIG5vdGhpbmcgaW4gYmFzZSBpbXBsZW1lbnRhdGlvblxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXREcmFnU291cmNlRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVkRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgaW50ZXJuYWxSZW5kZXIoKTogSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgb25TdGFydERyYWc6IChzZW5kZXI6IERyYWdnYWJsZUVsZW1lbnQpID0+IHZvaWQ7XHJcbiAgICBvbkVuZERyYWc6IChzZW5kZXI6IERyYWdnYWJsZUVsZW1lbnQpID0+IHZvaWQ7XHJcbiAgICBvbkNsaWNrOiAoc2VuZGVyOiBEcmFnZ2FibGVFbGVtZW50KSA9PiB2b2lkO1xyXG4gICAgb25Eb3VibGVDbGljazogKHNlbmRlcjogRHJhZ2dhYmxlRWxlbWVudCkgPT4gdm9pZDtcclxuXHJcbiAgICBpc0RyYWdnYWJsZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBlbmREcmFnKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRyYWdnaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9uRW5kRHJhZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkVuZERyYWcodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlTGF5b3V0KCkge1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxVcGRhdGVDc3NTdHlsZXMoKTtcclxuICAgICAgICB0aGlzLmludGVybmFsVXBkYXRlTGF5b3V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCk6IEhUTUxFbGVtZW50IHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEVsZW1lbnQgPSB0aGlzLmludGVybmFsUmVuZGVyKCk7XHJcblxyXG4gICAgICAgIGxldCBkcmFnU291cmNlRWxlbWVudCA9IHRoaXMuZ2V0RHJhZ1NvdXJjZUVsZW1lbnQoKTtcclxuICAgICAgICBkcmFnU291cmNlRWxlbWVudC5vbmNsaWNrID0gKGU6IE1vdXNlRXZlbnQpID0+IHsgdGhpcy5jbGljayhlKTsgfTtcclxuICAgICAgICBkcmFnU291cmNlRWxlbWVudC5vbmRibGNsaWNrID0gKGU6IE1vdXNlRXZlbnQpID0+IHsgdGhpcy5kb3VibGVDbGljayhlKTsgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNEcmFnZ2FibGUoKSkge1xyXG4gICAgICAgICAgICBkcmFnU291cmNlRWxlbWVudC5vbm1vdXNlZG93biA9IChlOiBNb3VzZUV2ZW50KSA9PiB7IGUucHJldmVudERlZmF1bHQoKTsgfTtcclxuICAgICAgICAgICAgZHJhZ1NvdXJjZUVsZW1lbnQub25wb2ludGVyZW50ZXIgPSAoKSA9PiB7IHRoaXMuaXNQb2ludGVyT3ZlciA9IHRydWU7IH07XHJcbiAgICAgICAgICAgIGRyYWdTb3VyY2VFbGVtZW50Lm9ucG9pbnRlcmxlYXZlID0gKCkgPT4geyB0aGlzLmlzUG9pbnRlck92ZXIgPSBmYWxzZTsgfTtcclxuICAgICAgICAgICAgZHJhZ1NvdXJjZUVsZW1lbnQub25wb2ludGVyZG93biA9IChlOiBQb2ludGVyRXZlbnQpID0+IHsgdGhpcy5wb2ludGVyRG93bihlKTsgfTtcclxuICAgICAgICAgICAgZHJhZ1NvdXJjZUVsZW1lbnQub25wb2ludGVydXAgPSAoZTogUG9pbnRlckV2ZW50KSA9PiB7IHRoaXMucG9pbnRlclVwKGUpOyB9O1xyXG4gICAgICAgICAgICBkcmFnU291cmNlRWxlbWVudC5vbnBvaW50ZXJtb3ZlID0gKGU6IFBvaW50ZXJFdmVudCkgPT4geyB0aGlzLnBvaW50ZXJNb3ZlKGUpOyB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVkRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcmVuZGVyZWRFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBkcmFnZ2luZygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZHJhZ2dpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGRyYWdnaW5nKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fZHJhZ2dpbmcgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbFVwZGF0ZUNzc1N0eWxlcygpO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmV4cG9ydCBjbGFzcyBGdWxsU2NyZWVuSGFuZGxlciB7XHJcbiAgICBwcml2YXRlIGZ1bGxTY3JlcmVuQ2hhbmdlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5vbkZ1bGxTY3JlZW5DaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25GdWxsU2NyZWVuQ2hhbmdlZCh0aGlzLmlzRnVsbFNjcmVlbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uRnVsbFNjcmVlbkNoYW5nZWQ6IChpc0Z1bGxTY3JlZW46IGJvb2xlYW4pID0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgbGV0IHVudHlwZWRCb2R5ID0gPGFueT5kb2N1bWVudC5ib2R5O1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIHVudHlwZWRCb2R5Lm9uZnVsbHNjcmVlbmNoYW5nZSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICB1bnR5cGVkQm9keS5vbmZ1bGxzY3JlZW5jaGFuZ2UgPSAoKSA9PiB0aGlzLmZ1bGxTY3JlcmVuQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdW50eXBlZEJvZHkub253ZWJraXRmdWxsc2NyZWVuY2hhbmdlICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIHVudHlwZWRCb2R5Lm9ud2Via2l0ZnVsbHNjcmVlbmNoYW5nZSA9ICgpID0+IHRoaXMuZnVsbFNjcmVyZW5DaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB1bnR5cGVkQm9keS5vbndlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgdW50eXBlZEJvZHkub25tb3pmdWxsc2NyZWVuY2hhbmdlID0gKCkgPT4gdGhpcy5mdWxsU2NyZXJlbkNoYW5nZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHVudHlwZWRCb2R5Lm9ud2Via2l0ZnVsbHNjcmVlbmNoYW5nZSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICB1bnR5cGVkQm9keS5NU0Z1bGxzY3JlZW5DaGFuZ2UgPSAoKSA9PiB0aGlzLmZ1bGxTY3JlcmVuQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBlbnRlckZ1bGxTY3JlZW4oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzRnVsbFNjcmVlbikge1xyXG4gICAgICAgICAgICBsZXQgdW50eXBlZEJvZHkgPSA8YW55PmRvY3VtZW50LmJvZHk7XHJcblxyXG4gICAgICAgICAgICBpZiAodW50eXBlZEJvZHkucmVxdWVzdEZ1bGxzY3JlZW4pIHtcclxuICAgICAgICAgICAgICAgIHVudHlwZWRCb2R5LnJlcXVlc3RGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodW50eXBlZEJvZHkud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4pIHtcclxuICAgICAgICAgICAgICAgIHVudHlwZWRCb2R5LndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodW50eXBlZEJvZHkubW96UmVxdWVzdEZ1bGxTY3JlZW4pIHtcclxuICAgICAgICAgICAgICAgIHVudHlwZWRCb2R5Lm1velJlcXVlc3RGdWxsU2NyZWVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodW50eXBlZEJvZHkubXNSZXF1ZXN0RnVsbHNjcmVlbikge1xyXG4gICAgICAgICAgICAgICAgdW50eXBlZEJvZHkubXNSZXF1ZXN0RnVsbHNjcmVlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJZb3VyIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IGZ1bGxzY3JlZW4uXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4aXRGdWxsU2NyZWVuKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRnVsbFNjcmVlbikge1xyXG4gICAgICAgICAgICBsZXQgdW50eXBlZERvY3VtZW50ID0gPGFueT5kb2N1bWVudDtcclxuXHJcbiAgICAgICAgICAgIGlmICh1bnR5cGVkRG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4pIHtcclxuICAgICAgICAgICAgICAgIHVudHlwZWREb2N1bWVudC5leGl0RnVsbHNjcmVlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHVudHlwZWREb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbikge1xyXG4gICAgICAgICAgICAgICAgdW50eXBlZERvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodW50eXBlZERvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4pIHtcclxuICAgICAgICAgICAgICAgIHVudHlwZWREb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodW50eXBlZERvY3VtZW50Lm1zRXhpdEZ1bGxzY3JlZW4pIHtcclxuICAgICAgICAgICAgICAgIHVudHlwZWREb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlRnVsbFNjcmVlbigpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0Z1bGxTY3JlZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5leGl0RnVsbFNjcmVlbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5lbnRlckZ1bGxTY3JlZW4oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzRnVsbFNjcmVlbigpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgdW50eXBlZERvY3VtZW50ID0gPGFueT5kb2N1bWVudDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHVudHlwZWREb2N1bWVudC5mdWxsc2NyZWVuIHx8IHVudHlwZWREb2N1bWVudC53ZWJraXRJc0Z1bGxTY3JlZW4gfHwgdW50eXBlZERvY3VtZW50Lm1vekZ1bGxTY3JlZW47XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuaW1wb3J0ICogYXMgQWRhcHRpdmUgZnJvbSBcImFkYXB0aXZlY2FyZHNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVBvaW50IHtcclxuXHR4OiBudW1iZXI7XHJcblx0eTogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUmVjdCB7XHJcblx0dG9wOiBudW1iZXI7XHJcblx0cmlnaHQ6IG51bWJlcjtcclxuXHRib3R0b206IG51bWJlcjtcclxuXHRsZWZ0OiBudW1iZXI7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHRvcDogbnVtYmVyID0gMCwgcmlnaHQ6IG51bWJlciA9IDAsIGJvdHRvbTogbnVtYmVyID0gMCwgbGVmdDogbnVtYmVyID0gMCkge1xyXG5cdFx0dGhpcy50b3AgPSB0b3A7XHJcblx0XHR0aGlzLnJpZ2h0ID0gcmlnaHQ7XHJcblx0XHR0aGlzLmJvdHRvbSA9IGJvdHRvbTtcclxuXHRcdHRoaXMubGVmdCA9IGxlZnQ7XHJcblx0fVxyXG5cclxuXHR1bmlvbihvdGhlclJlY3Q6IFJlY3QpIHtcclxuXHRcdHRoaXMudG9wID0gTWF0aC5taW4odGhpcy50b3AsIG90aGVyUmVjdC50b3ApO1xyXG5cdFx0dGhpcy5sZWZ0ID0gTWF0aC5taW4odGhpcy5sZWZ0LCBvdGhlclJlY3QubGVmdCk7XHJcblx0XHR0aGlzLmJvdHRvbSA9IE1hdGgubWF4KHRoaXMuYm90dG9tLCBvdGhlclJlY3QuYm90dG9tKTtcclxuXHRcdHRoaXMucmlnaHQgPSBNYXRoLm1heCh0aGlzLnJpZ2h0LCBvdGhlclJlY3QucmlnaHQpO1xyXG5cdH1cclxuXHJcblx0aXNJbnNpZGUocG9pbnQ6IElQb2ludCk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHBvaW50LnggPj0gdGhpcy5sZWZ0ICYmIHBvaW50LnggPD0gdGhpcy5yaWdodCAmJiBwb2ludC55ID49IHRoaXMudG9wICYmIHBvaW50LnkgPD0gdGhpcy5ib3R0b207XHJcblx0fVxyXG5cclxuXHRnZXQgd2lkdGgoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiB0aGlzLnJpZ2h0IC0gdGhpcy5sZWZ0O1xyXG5cdH1cclxuXHJcblx0Z2V0IGhlaWdodCgpOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIHRoaXMuYm90dG9tIC0gdGhpcy50b3A7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVXRpbHMge1xyXG5cdHB1YmxpYyBzdGF0aWMgaXNBYnNvbHV0ZVVybCh1cmxTdHJpbmc6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHVybFN0cmluZy5pbmRleE9mKCdodHRwOi8vJykgPT09IDBcclxuXHRcdHx8IHVybFN0cmluZy5pbmRleE9mKCdodHRwczovLycpID09PSAwO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBqb2luUGF0aHMoLi4uYXJnczogc3RyaW5nW10pIHtcclxuXHRcdHJldHVybiBhcmdzLm1hcChcclxuXHRcdFx0KHBhcnQsIGkpID0+IHtcclxuXHRcdFx0XHRpZiAoIXBhcnQpIHtcclxuXHRcdFx0XHRcdHBhcnQgPSBcIlwiO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKGkgPT09IDApIHtcclxuXHRcdFx0XHRcdHJldHVybiBwYXJ0LnRyaW0oKS5yZXBsYWNlKC9bXFwvXSokL2csICcnKVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gcGFydC50cmltKCkucmVwbGFjZSgvKF5bXFwvXSp8W1xcL10qJCkvZywgJycpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KS5maWx0ZXIoeCA9PiB4Lmxlbmd0aCkuam9pbignLycpXHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgdmFyIGRlZmF1bHRIb3N0Q29uZmlnID0gbmV3IEFkYXB0aXZlLkhvc3RDb25maWcoXHJcbiAgICB7XHJcbiAgICAgICAgcHJlRXhwYW5kU2luZ2xlU2hvd0NhcmRBY3Rpb246IHRydWUsXHJcbiAgICAgICAgc3VwcG9ydHNJbnRlcmFjdGl2aXR5OiB0cnVlLFxyXG4gICAgICAgIHNwYWNpbmc6IHtcclxuICAgICAgICAgICAgc21hbGw6IDEwLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiAyMCxcclxuICAgICAgICAgICAgbWVkaXVtOiAzMCxcclxuICAgICAgICAgICAgbGFyZ2U6IDQwLFxyXG4gICAgICAgICAgICBleHRyYUxhcmdlOiA1MCxcclxuICAgICAgICAgICAgcGFkZGluZzogMjBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlcGFyYXRvcjoge1xyXG4gICAgICAgICAgICBsaW5lVGhpY2tuZXNzOiAxLFxyXG4gICAgICAgICAgICBsaW5lQ29sb3I6IFwiI0VFRUVFRVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0ZXh0QWxpZ246IHtcclxuICAgICAgICAgICAgcmlnaHQ6IFwicmlnaHRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW1hZ2VTaXplczoge1xyXG4gICAgICAgICAgICBzbWFsbDogNDAsXHJcbiAgICAgICAgICAgIG1lZGl1bTogODAsXHJcbiAgICAgICAgICAgIGxhcmdlOiAxNjBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZvbnRTdHlsZXM6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgZm9udEZhbWlseTogXCInU2Vnb2UgVUknLCBUYWhvbWEsIEdlbmV2YSwgVmVyZGFuYSwgc2Fucy1zZXJpZlwiLFxyXG4gICAgICAgICAgICAgICAgZm9udFNpemVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc21hbGw6IDEyLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IDE0LFxyXG4gICAgICAgICAgICAgICAgICAgIG1lZGl1bTogMTcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFyZ2U6IDIxLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhTGFyZ2U6IDI2XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZm9udFdlaWdodHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBsaWdodGVyOiAyMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogNDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGJvbGRlcjogNjAwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1vbm9zcGFjZToge1xyXG4gICAgICAgICAgICAgICAgZm9udEZhbWlseTogXCInQ291cmllciBOZXcnLCBDb3VyaWVyLCBtb25vc3BhY2VcIixcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNtYWxsOiAxMixcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAxNCxcclxuICAgICAgICAgICAgICAgICAgICBtZWRpdW06IDE3LFxyXG4gICAgICAgICAgICAgICAgICAgIGxhcmdlOiAyMSxcclxuICAgICAgICAgICAgICAgICAgICBleHRyYUxhcmdlOiAyNlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZvbnRXZWlnaHRzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlnaHRlcjogMjAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IDQwMCxcclxuICAgICAgICAgICAgICAgICAgICBib2xkZXI6IDYwMFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb250YWluZXJTdHlsZXM6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNmOWY5ZjlcIixcclxuICAgICAgICAgICAgICAgIGZvcmVncm91bmRDb2xvcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzMzMzMzM1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0VFMzMzMzMzXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGFjY2VudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMyRTg5RkNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiM4ODJFODlGQ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhdHRlbnRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjY2MzMzAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRERjYzMzMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZ29vZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiM1NGEyNTRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERDU0YTI1NFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI2U2OTUwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REZTY5NTAwXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVtcGhhc2lzOiB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiIzA4MDAwMDAwXCIsXHJcbiAgICAgICAgICAgICAgICBmb3JlZ3JvdW5kQ29sb3JzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMzMzMzMzNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNFRTMzMzMzM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhY2NlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMkU4OUZDXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjODgyRTg5RkNcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYXR0ZW50aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI2NjMzMwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REY2MzMzAwXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGdvb2Q6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjNTRhMjU0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjREQ1NGEyNTRcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNlNjk1MDBcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERGU2OTUwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhY2NlbnQ6IHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjQzdERUY5XCIsXHJcbiAgICAgICAgICAgICAgICBmb3JlZ3JvdW5kQ29sb3JzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMzMzMzMzNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNFRTMzMzMzM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXJrOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzAwMDAwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzY2MDAwMDAwXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI0ZGRkZGRlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzMzMDAwMDAwXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGFjY2VudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMyRTg5RkNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiM4ODJFODlGQ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhdHRlbnRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjY2MzMzAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRERjYzMzMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZ29vZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiM1NGEyNTRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERDU0YTI1NFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI2U2OTUwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REZTY5NTAwXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdvb2Q6IHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjQ0NGRkNDXCIsXHJcbiAgICAgICAgICAgICAgICBmb3JlZ3JvdW5kQ29sb3JzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMzMzMzMzNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNFRTMzMzMzM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXJrOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzAwMDAwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzY2MDAwMDAwXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI0ZGRkZGRlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzMzMDAwMDAwXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGFjY2VudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiMyRTg5RkNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiM4ODJFODlGQ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhdHRlbnRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjY2MzMzAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRERjYzMzMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZ29vZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiM1NGEyNTRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERDU0YTI1NFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiI2U2OTUwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0REZTY5NTAwXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGF0dGVudGlvbjoge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNGRkM1QjJcIixcclxuICAgICAgICAgICAgICAgIGZvcmVncm91bmRDb2xvcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzMzMzMzM1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0VFMzMzMzMzXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhcms6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMDAwMDAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjNjYwMDAwMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgbGlnaHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjRkZGRkZGXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjMzMwMDAwMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzJFODlGQ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzg4MkU4OUZDXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dGVudGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNjYzMzMDBcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERGNjMzMwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBnb29kOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzU0YTI1NFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0RENTRhMjU0XCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjZTY5NTAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRERlNjk1MDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgd2FybmluZzoge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNGRkUyQjJcIixcclxuICAgICAgICAgICAgICAgIGZvcmVncm91bmRDb2xvcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzMzMzMzM1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0VFMzMzMzMzXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhcms6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjMDAwMDAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjNjYwMDAwMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgbGlnaHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjRkZGRkZGXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjMzMwMDAwMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYWNjZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzJFODlGQ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiIzg4MkU4OUZDXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGF0dGVudGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIiNjYzMzMDBcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGxlOiBcIiNERGNjMzMwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBnb29kOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiIzU0YTI1NFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0bGU6IFwiI0RENTRhMjU0XCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCIjZTY5NTAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRsZTogXCIjRERlNjk1MDBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWN0aW9uczoge1xyXG4gICAgICAgICAgICBtYXhBY3Rpb25zOiA1LFxyXG4gICAgICAgICAgICBzcGFjaW5nOiBBZGFwdGl2ZS5TcGFjaW5nLkRlZmF1bHQsXHJcbiAgICAgICAgICAgIGJ1dHRvblNwYWNpbmc6IDEwLFxyXG4gICAgICAgICAgICBzaG93Q2FyZDoge1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uTW9kZTogQWRhcHRpdmUuU2hvd0NhcmRBY3Rpb25Nb2RlLklubGluZSxcclxuICAgICAgICAgICAgICAgIGlubGluZVRvcE1hcmdpbjogMTZcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYWN0aW9uc09yaWVudGF0aW9uOiBBZGFwdGl2ZS5PcmllbnRhdGlvbi5Ib3Jpem9udGFsLFxyXG4gICAgICAgICAgICBhY3Rpb25BbGlnbm1lbnQ6IEFkYXB0aXZlLkFjdGlvbkFsaWdubWVudC5MZWZ0XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZGFwdGl2ZUNhcmQ6IHtcclxuICAgICAgICAgICAgYWxsb3dDdXN0b21TdHlsZTogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW1hZ2VTZXQ6IHtcclxuICAgICAgICAgICAgaW1hZ2VTaXplOiBBZGFwdGl2ZS5TaXplLk1lZGl1bSxcclxuICAgICAgICAgICAgbWF4SW1hZ2VIZWlnaHQ6IDEwMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZmFjdFNldDoge1xyXG4gICAgICAgICAgICB0aXRsZToge1xyXG4gICAgICAgICAgICAgICAgY29sb3I6IEFkYXB0aXZlLlRleHRDb2xvci5EZWZhdWx0LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogQWRhcHRpdmUuVGV4dFNpemUuRGVmYXVsdCxcclxuICAgICAgICAgICAgICAgIGlzU3VidGxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHdlaWdodDogQWRhcHRpdmUuVGV4dFdlaWdodC5Cb2xkZXIsXHJcbiAgICAgICAgICAgICAgICB3cmFwOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWF4V2lkdGg6IDE1MCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdmFsdWU6IHtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBBZGFwdGl2ZS5UZXh0Q29sb3IuRGVmYXVsdCxcclxuICAgICAgICAgICAgICAgIHNpemU6IEFkYXB0aXZlLlRleHRTaXplLkRlZmF1bHQsXHJcbiAgICAgICAgICAgICAgICBpc1N1YnRsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB3ZWlnaHQ6IEFkYXB0aXZlLlRleHRXZWlnaHQuRGVmYXVsdCxcclxuICAgICAgICAgICAgICAgIHdyYXA6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNwYWNpbmc6IDEwXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4pO1xyXG5cclxuZGVmYXVsdEhvc3RDb25maWcuY3NzQ2xhc3NOYW1lUHJlZml4ID0gXCJkZWZhdWx0XCI7XHJcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbmV4cG9ydCBjbGFzcyBQZWVyQ29tbWFuZCB7XHJcbiAgICBwcml2YXRlIF9yZW5kZXJlZEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgdmFyIGJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQudHlwZSA9IFwiYnV0dG9uXCI7XHJcbiAgICAgICAgYnV0dG9uRWxlbWVudC50aXRsZSA9IHRoaXMubmFtZTtcclxuICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJhY2QtcGVlckJ1dHRvblwiKTtcclxuICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5pY29uQ2xhc3MpO1xyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuc3R5bGUuZmxleCA9IFwiMCAwIGF1dG9cIjtcclxuICAgICAgICBidXR0b25FbGVtZW50LnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQub25jbGljayA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmV4ZWN1dGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSh0aGlzLCBidXR0b25FbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBidXR0b25FbGVtZW50Lm9ucG9pbnRlcmRvd24gPSAoZTogUG9pbnRlckV2ZW50KSA9PiB7IGUuY2FuY2VsQnViYmxlID0gdHJ1ZTsgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGJ1dHRvbkVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgaWNvbkNsYXNzOiBzdHJpbmc7XHJcbiAgICBpc1Byb21vdGFibGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIGV4ZWN1dGU6IChjb21tYW5kOiBQZWVyQ29tbWFuZCwgY2xpY2tlZEVsZW1lbnQ6IEhUTUxFbGVtZW50KSA9PiB2b2lkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGluaXQ/OiBQYXJ0aWFsPFBlZXJDb21tYW5kPikge1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgaW5pdCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCk6IEhUTUxFbGVtZW50IHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEVsZW1lbnQgPSB0aGlzLmludGVybmFsUmVuZGVyKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlZEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHJlbmRlcmVkRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVkRWxlbWVudDtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBwYXJzZUNhdGFsb2d1ZSwgQ2F0YWxvZ3VlRW50cnkgfSBmcm9tIFwiLi9jYXRhbG9ndWVcIjtcclxuaW1wb3J0ICogYXMgQUNEYXRhIGZyb20gXCJhZGFwdGl2ZWNhcmRzLXRlbXBsYXRpbmdcIjtcclxuaW1wb3J0ICogYXMgQWRhcHRpdmUgZnJvbSBcImFkYXB0aXZlY2FyZHNcIjtcclxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4vZGlhbG9nXCI7XHJcbmltcG9ydCB7IGRlZmF1bHRIb3N0Q29uZmlnIH0gZnJvbSBcIi4vbWlzY2VsbGFuZW91c1wiO1xyXG5pbXBvcnQgeyBEb3dubG9hZGVyIH0gZnJvbSBcIi4vZG93bmxvYWRlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNhbXBsZVBpY2tlckRpYWxvZyBleHRlbmRzIERpYWxvZyB7XHJcbiAgICBwcml2YXRlIF9yZW5kZXJlZEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBfc2VsZWN0ZWRTYW1wbGU6IENhdGFsb2d1ZUVudHJ5O1xyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyTWVzc2FnZShtZXNzYWdlOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgdGVtcGxhdGVQYXlsb2FkID0ge1xyXG4gICAgICAgICAgICB0eXBlOiBcIkFkYXB0aXZlQ2FyZFwiLFxyXG4gICAgICAgICAgICB2ZXJzaW9uOiBcIjEuMFwiLFxyXG4gICAgICAgICAgICBib2R5OiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJUZXh0QmxvY2tcIixcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIioqe3RpdGxlfSoqXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogXCJsYXJnZVwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiQ29udGFpbmVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdmVydGljYWxDb250ZW50QWxpZ25tZW50OiBcImNlbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogXCJzdHJldGNoXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJUZXh0QmxvY2tcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFwie21lc3NhZ2V9XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3Jpem9udGFsQWxpZ25tZW50OiBcImNlbnRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkFjdGlvblNldFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhvcml6b250YWxBbGlnbm1lbnQ6IFwicmlnaHRcIixcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb25zOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiQWN0aW9uLlN1Ym1pdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiY2FuY2VsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJDYW5jZWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gbmV3IEFDRGF0YS5UZW1wbGF0ZSh0ZW1wbGF0ZVBheWxvYWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gbmV3IEFDRGF0YS5FdmFsdWF0aW9uQ29udGV4dCgpO1xyXG4gICAgICAgIGNvbnRleHQuJHJvb3QgPSB7XHJcbiAgICAgICAgICAgIHRpdGxlOiB0aGlzLnRpdGxlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IGV4cGFuZGVkQ2FyZFBheWxvYWQgPSB0ZW1wbGF0ZS5leHBhbmQoY29udGV4dCk7XHJcblxyXG4gICAgICAgIGxldCBjYXJkID0gbmV3IEFkYXB0aXZlLkFkYXB0aXZlQ2FyZCgpO1xyXG4gICAgICAgIGNhcmQuaG9zdENvbmZpZyA9IGRlZmF1bHRIb3N0Q29uZmlnO1xyXG4gICAgICAgIGNhcmQub25FeGVjdXRlQWN0aW9uID0gKGFjdGlvbjogQWRhcHRpdmUuQWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhY3Rpb24uaWQgPT0gXCJjYW5jZWxcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjYXJkLnBhcnNlKGV4cGFuZGVkQ2FyZFBheWxvYWQpO1xyXG5cclxuICAgICAgICBsZXQgcmVuZGVyZWRDYXJkID0gY2FyZC5yZW5kZXIoKTtcclxuICAgICAgICByZW5kZXJlZENhcmQuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XHJcblxyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudC5hcHBlbmRDaGlsZChyZW5kZXJlZENhcmQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyQ2F0YWxvZ3VlKGNhdGFsb2d1ZTogQ2F0YWxvZ3VlRW50cnlbXSkge1xyXG4gICAgICAgIGxldCB0ZW1wbGF0ZVBheWxvYWQgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiQWRhcHRpdmVDYXJkXCIsXHJcbiAgICAgICAgICAgIHZlcnNpb246IFwiMS4wXCIsXHJcbiAgICAgICAgICAgIGJvZHk6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlRleHRCbG9ja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IFwiKip7dGl0bGV9KipcIixcclxuICAgICAgICAgICAgICAgICAgICBzaXplOiBcImxhcmdlXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJDb250YWluZXJcIixcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IFwic3RyZXRjaFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsbG93VmVydGljYWxPdmVyZmxvdzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBpdGVtczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkNvbnRhaW5lclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGRhdGE6IFwie2NhdGFsb2d1ZX1cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkhlaWdodDogXCIzNnB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbENvbnRlbnRBbGlnbm1lbnQ6IFwiY2VudGVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RBY3Rpb246IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkFjdGlvbi5TdWJtaXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGFsb2d1ZUluZGV4OiBcInskaW5kZXh9XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2luZzogXCJub25lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJUZXh0QmxvY2tcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJ7ZGlzcGxheU5hbWV9XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IFwibWVkaXVtXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiQWN0aW9uU2V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaG9yaXpvbnRhbEFsaWdubWVudDogXCJyaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbnM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJBY3Rpb24uU3VibWl0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJjYW5jZWxcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkNhbmNlbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgdGVtcGxhdGUgPSBuZXcgQUNEYXRhLlRlbXBsYXRlKHRlbXBsYXRlUGF5bG9hZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSBuZXcgQUNEYXRhLkV2YWx1YXRpb25Db250ZXh0KCk7XHJcbiAgICAgICAgY29udGV4dC4kcm9vdCA9IHtcclxuICAgICAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsXHJcbiAgICAgICAgICAgIGNhdGFsb2d1ZTogY2F0YWxvZ3VlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IGV4cGFuZGVkQ2FyZFBheWxvYWQgPSB0ZW1wbGF0ZS5leHBhbmQoY29udGV4dCk7XHJcblxyXG4gICAgICAgIGxldCBjYXJkID0gbmV3IEFkYXB0aXZlLkFkYXB0aXZlQ2FyZCgpO1xyXG4gICAgICAgIGNhcmQuaG9zdENvbmZpZyA9IGRlZmF1bHRIb3N0Q29uZmlnO1xyXG4gICAgICAgIGNhcmQub25FeGVjdXRlQWN0aW9uID0gKGFjdGlvbjogQWRhcHRpdmUuQWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhY3Rpb24uaWQgPT0gXCJjYW5jZWxcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGFjdGlvbiBpbnN0YW5jZW9mIEFkYXB0aXZlLlN1Ym1pdEFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWRTYW1wbGUgPSBjYXRhbG9ndWVbYWN0aW9uLmRhdGFbXCJjYXRhbG9ndWVJbmRleFwiXV07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhcmQub25QYXJzZUVsZW1lbnQgPSAoZWxlbWVudDogQWRhcHRpdmUuQ2FyZEVsZW1lbnQsIGpzb246IGFueSwgZXJyb3JzPzogQWRhcHRpdmUuSVZhbGlkYXRpb25FcnJvcltdKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgQWRhcHRpdmUuQ2FyZEVsZW1lbnRDb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWxsb3dWZXJ0aWNhbE92ZXJmbG93ID0gQWRhcHRpdmUuZ2V0Qm9vbFZhbHVlKGpzb25bXCJhbGxvd1ZlcnRpY2FsT3ZlcmZsb3dcIl0sIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXJkLnBhcnNlKGV4cGFuZGVkQ2FyZFBheWxvYWQpO1xyXG5cclxuICAgICAgICBsZXQgcmVuZGVyZWRDYXJkID0gY2FyZC5yZW5kZXIoKTtcclxuICAgICAgICByZW5kZXJlZENhcmQuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XHJcblxyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudC5hcHBlbmRDaGlsZChyZW5kZXJlZENhcmQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCByZW5kZXJDb250ZW50KCk6IEhUTUxFbGVtZW50IHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiO1xyXG5cclxuICAgICAgICB0aGlzLnJlbmRlck1lc3NhZ2UoXCJMb2FkaW5nIHNhbXBsZSBjYXRhbG9ndWUuLi5cIik7XHJcblxyXG4gICAgICAgIGxldCBkb3dubG9hZGVyID0gbmV3IERvd25sb2FkZXIodGhpcy5jYXRhbG9ndWVVcmwpO1xyXG4gICAgICAgIGRvd25sb2FkZXIub25FcnJvciA9ICgpID0+IHsgdGhpcy5yZW5kZXJNZXNzYWdlKFwiVGhlIGNhdGFsb2d1ZSBjb3VsZG4ndCBiZSBsb2FkZWQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIpOyB9O1xyXG4gICAgICAgIGRvd25sb2FkZXIub25TdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIUFkYXB0aXZlLmlzTnVsbE9yRW1wdHkoZG93bmxvYWRlci5kYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY2F0YWxvZ3VlID0gcGFyc2VDYXRhbG9ndWUoSlNPTi5wYXJzZShkb3dubG9hZGVyLmRhdGEpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDYXRhbG9ndWUoY2F0YWxvZ3VlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJNZXNzYWdlKFwiVGhlIGNhdGFsb2d1ZSBjb3VsZG4ndCBiZSBsb2FkZWQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBkb3dubG9hZGVyLmRvd25sb2FkKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlZEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgY2F0YWxvZ3VlVXJsOiBzdHJpbmc7XHJcblxyXG4gICAgZ2V0IHNlbGVjdGVkU2FtcGxlKCk6IENhdGFsb2d1ZUVudHJ5IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWRTYW1wbGU7XHJcbiAgICB9XHJcbn0iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5leHBvcnQgaW50ZXJmYWNlIElMb2FkU2V0dGluZ1Jlc3VsdDxUPiB7XHJcbiAgICBzdWNjZWVkZWQ6IGJvb2xlYW47XHJcbiAgICB2YWx1ZT86IFQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTZXR0aW5nc01hbmFnZXIge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgX2lzTG9jYWxTdG9yYWdlQXZhaWxhYmxlOiBib29sZWFuID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGRldGVybWluZUlmU3RvcmFnZUlzQXZhaWxhYmxlKHR5cGU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBzdG9yYWdlID0gd2luZG93W3R5cGVdO1xyXG4gICAgICAgICAgICBsZXQgeCA9ICdfX3N0b3JhZ2VfdGVzdF9fJztcclxuXHJcbiAgICAgICAgICAgIHN0b3JhZ2Uuc2V0SXRlbSh4LCB4KTtcclxuICAgICAgICAgICAgc3RvcmFnZS5yZW1vdmVJdGVtKHgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gJiYgKFxyXG4gICAgICAgICAgICAgICAgLy8gZXZlcnl0aGluZyBleGNlcHQgRmlyZWZveFxyXG4gICAgICAgICAgICAgICAgZS5jb2RlID09PSAyMiB8fFxyXG4gICAgICAgICAgICAgICAgLy8gRmlyZWZveFxyXG4gICAgICAgICAgICAgICAgZS5jb2RlID09PSAxMDE0IHx8XHJcbiAgICAgICAgICAgICAgICAvLyB0ZXN0IG5hbWUgZmllbGQgdG9vLCBiZWNhdXNlIGNvZGUgbWlnaHQgbm90IGJlIHByZXNlbnRcclxuICAgICAgICAgICAgICAgIC8vIGV2ZXJ5dGhpbmcgZXhjZXB0IEZpcmVmb3hcclxuICAgICAgICAgICAgICAgIGUubmFtZSA9PT0gJ1F1b3RhRXhjZWVkZWRFcnJvcicgfHxcclxuICAgICAgICAgICAgICAgIC8vIEZpcmVmb3hcclxuICAgICAgICAgICAgICAgIGUubmFtZSA9PT0gJ05TX0VSUk9SX0RPTV9RVU9UQV9SRUFDSEVEJykgJiZcclxuICAgICAgICAgICAgICAgIC8vIGFja25vd2xlZGdlIFF1b3RhRXhjZWVkZWRFcnJvciBvbmx5IGlmIHRoZXJlJ3Mgc29tZXRoaW5nIGFscmVhZHkgc3RvcmVkXHJcbiAgICAgICAgICAgICAgICBzdG9yYWdlLmxlbmd0aCAhPT0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHRyeVNhdmVTZXR0aW5nKG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIGlmIChTZXR0aW5nc01hbmFnZXIuaXNMb2NhbFN0b3JhZ2VBdmFpbGFibGUpIHtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obmFtZSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgdHJ5TG9hZFN0cmluZ1NldHRpbmcobmFtZTogc3RyaW5nKTogSUxvYWRTZXR0aW5nUmVzdWx0PHN0cmluZz4ge1xyXG4gICAgICAgIGlmIChTZXR0aW5nc01hbmFnZXIuaXNMb2NhbFN0b3JhZ2VBdmFpbGFibGUpIHtcclxuICAgICAgICAgICAgbGV0IHJldHVyblZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0obmFtZSk7XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2NlZWRlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiByZXR1cm5WYWx1ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VlZGVkOiBmYWxzZSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgc3RhdGljIHRyeUxvYWROdW1iZXJTZXR0aW5nKG5hbWU6IHN0cmluZyk6IElMb2FkU2V0dGluZ1Jlc3VsdDxudW1iZXI+IHtcclxuICAgICAgICBpZiAoU2V0dGluZ3NNYW5hZ2VyLmlzTG9jYWxTdG9yYWdlQXZhaWxhYmxlKSB7XHJcbiAgICAgICAgICAgIGxldCByZXR1cm5WYWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKG5hbWUpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2NlZWRlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiByZXR1cm5WYWx1ZSA/IHBhcnNlRmxvYXQocmV0dXJuVmFsdWUpIDogdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZWVkZWQ6IGZhbHNlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB0cnlMb2FkQm9vbGVhblNldHRpbmcobmFtZTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IGJvb2xlYW4pOiBJTG9hZFNldHRpbmdSZXN1bHQ8Ym9vbGVhbj4ge1xyXG4gICAgICAgIGlmIChTZXR0aW5nc01hbmFnZXIuaXNMb2NhbFN0b3JhZ2VBdmFpbGFibGUpIHtcclxuICAgICAgICAgICAgbGV0IHJldHVyblZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0obmFtZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VlZGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHJldHVyblZhbHVlID8gcmV0dXJuVmFsdWUgPT0gXCJ0cnVlXCIgOiBkZWZhdWx0VmFsdWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2NlZWRlZDogZmFsc2UgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldCBpc0xvY2FsU3RvcmFnZUF2YWlsYWJsZSgpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoIVNldHRpbmdzTWFuYWdlci5faXNMb2NhbFN0b3JhZ2VBdmFpbGFibGUpIHtcclxuICAgICAgICAgICAgU2V0dGluZ3NNYW5hZ2VyLl9pc0xvY2FsU3RvcmFnZUF2YWlsYWJsZSA9IFNldHRpbmdzTWFuYWdlci5kZXRlcm1pbmVJZlN0b3JhZ2VJc0F2YWlsYWJsZShcImxvY2FsU3RvcmFnZVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBTZXR0aW5nc01hbmFnZXIuX2lzTG9jYWxTdG9yYWdlQXZhaWxhYmxlO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIEFkYXB0aXZlIGZyb20gXCJhZGFwdGl2ZWNhcmRzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR2xvYmFsU2V0dGluZ3Mge1xyXG4gICAgc3RhdGljIGVuYWJsZURhdGFCaW5kaW5nU3VwcG9ydDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgc3RhdGljIHNob3dEYXRhU3RydWN0dXJlVG9vbGJveDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgc3RhdGljIHNob3dTYW1wbGVEYXRhRWRpdG9yVG9vbGJveDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgc3RhdGljIHNob3dWZXJzaW9uUGlja2VyOiBib29sZWFuID0gZmFsc2U7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFRhcmdldFZlcnNpb24gPSBBZGFwdGl2ZS5WZXJzaW9uIHwgXCIqXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVmVyc2lvbnMge1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHYxXzAgPSBuZXcgQWRhcHRpdmUuVmVyc2lvbigxLCAwKTtcclxuICAgIHN0YXRpYyByZWFkb25seSB2MV8xID0gbmV3IEFkYXB0aXZlLlZlcnNpb24oMSwgMSk7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgdjFfMiA9IG5ldyBBZGFwdGl2ZS5WZXJzaW9uKDEsIDIpO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IGxhdGVzdCA9IFZlcnNpb25zLnYxXzI7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgdk5leHQgPSBuZXcgQWRhcHRpdmUuVmVyc2lvbigxMDAwLCAwLCBcInZOZXh0XCIpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIFN1cHBvcnRlZFRhcmdldFZlcnNpb25zOiBBZGFwdGl2ZS5WZXJzaW9uW10gPSBbIFZlcnNpb25zLnYxXzAsIFZlcnNpb25zLnYxXzEsIFZlcnNpb25zLnYxXzIsIFZlcnNpb25zLnZOZXh0IF07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNWZXJzaW9uTGVzc09yRXF1YWwodmVyc2lvbjogVGFyZ2V0VmVyc2lvbiwgdGFyZ2V0VmVyc2lvbjogVGFyZ2V0VmVyc2lvbik6IGJvb2xlYW4ge1xyXG4gICAgaWYgKHZlcnNpb24gaW5zdGFuY2VvZiBBZGFwdGl2ZS5WZXJzaW9uKSB7XHJcbiAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gaW5zdGFuY2VvZiBBZGFwdGl2ZS5WZXJzaW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRWZXJzaW9uLmNvbXBhcmVUbyh2ZXJzaW9uKSA+PSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVGFyZ2V0IHZlcnNpb24gaXMgKlxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBWZXJzaW9uIGlzICpcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFNwbGl0dGVyIH0gZnJvbSBcIi4vc3BsaXR0ZXJcIjtcclxuaW1wb3J0IHsgVG9vbGJveCwgVG9vbGJveE9yaWVudGF0aW9uIH0gZnJvbSBcIi4vdG9vbC1ib3hcIjtcclxuaW1wb3J0IHsgU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSBcIi4vc2V0dGluZ3MtbWFuYWdlclwiO1xyXG5cclxuZXhwb3J0IGVudW0gU2lkZVBhbmVsQWxpZ25tZW50IHtcclxuICAgIFRvcCxcclxuICAgIFJpZ2h0LFxyXG4gICAgQm90dG9tLFxyXG4gICAgTGVmdFxyXG59XHJcblxyXG5jbGFzcyBUb29sYm94SW5mbyB7XHJcbiAgICBwcml2YXRlIF9zcGxpdHRlcjogU3BsaXR0ZXI7XHJcblxyXG4gICAgcHJpdmF0ZSByZXNpemVFbmRlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5vblJlc2l6ZUVuZGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25SZXNpemVFbmRlZCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZXNpemVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9uUmVzaXplZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uUmVzaXplZCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25Ub2dnbGVkOiAoc2VuZGVyOiBUb29sYm94SW5mbykgPT4gdm9pZDtcclxuICAgIG9uUmVzaXplRW5kZWQ6IChzZW5kZXI6IFRvb2xib3hJbmZvKSA9PiB2b2lkO1xyXG4gICAgb25SZXNpemVkOiAoc2VuZGVyOiBUb29sYm94SW5mbykgPT4gdm9pZDtcclxuICAgIFxyXG4gICAgc2hvd1NwbGl0dGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNwbGl0dGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsaXR0ZXIuYXR0YWNoZWRUby5jbGFzc0xpc3QucmVtb3ZlKFwiYWNkLWhpZGRlblwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZVNwbGl0dGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNwbGl0dGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsaXR0ZXIuYXR0YWNoZWRUby5jbGFzc0xpc3QuYWRkKFwiYWNkLWhpZGRlblwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgdG9vbGJveDogVG9vbGJveCkge1xyXG4gICAgICAgIHRvb2xib3gub25Ub2dnbGVkID0gKHNlbmRlcjogVG9vbGJveCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoc2VuZGVyLmlzRXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1NwbGl0dGVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy50b29sYm94LnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiYWNkLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZVNwbGl0dGVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy50b29sYm94LnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYWNkLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub25Ub2dnbGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uVG9nZ2xlZCh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgc3BsaXR0ZXIoKTogU3BsaXR0ZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zcGxpdHRlcjtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgc3BsaXR0ZXIodmFsdWU6IFNwbGl0dGVyKSB7XHJcbiAgICAgICAgdGhpcy5fc3BsaXR0ZXIgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5fc3BsaXR0ZXIub25SZXNpemVFbmRlZCA9IChzZW5kZXI6IFNwbGl0dGVyKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplRW5kZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3NwbGl0dGVyLm9uUmVzaXplZCA9IChzZW5kZXI6IFNwbGl0dGVyKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzaXplZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNpZGVQYW5lbCB7XHJcbiAgICBwcml2YXRlIF9hdHRhY2hlZFRvOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgX2FsaWdubWVudDogU2lkZVBhbmVsQWxpZ25tZW50O1xyXG4gICAgcHJpdmF0ZSBfY29sbGFwc2VkVGFiQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgX2NvbnRlbnRIb3N0OiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgX3Rvb2xib3hlczogVG9vbGJveEluZm9bXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBfaXNSZXN0b3Jpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUxheW91dCgpIHtcclxuICAgICAgICBsZXQgZXhwYW5kZWRUb29sYm94Q291bnQgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB0b29sYm94SW5mbyBvZiB0aGlzLl90b29sYm94ZXMpIHtcclxuICAgICAgICAgICAgaWYgKHRvb2xib3hJbmZvLnRvb2xib3guaXNFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgZXhwYW5kZWRUb29sYm94Q291bnQrKztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZXhwYW5kZWRUb29sYm94Q291bnQgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvb2xib3hJbmZvLmhpZGVTcGxpdHRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvb2xib3hJbmZvLnRvb2xib3guc3RyZXRjaCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0b29sYm94SW5mby5zaG93U3BsaXR0ZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB0b29sYm94SW5mby50b29sYm94LnN0cmV0Y2ggPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGV4cGFuZGVkVG9vbGJveENvdW50ID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl9hdHRhY2hlZFRvLmNsYXNzTGlzdC5yZW1vdmUoXCJhY2QtaGlkZGVuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fYXR0YWNoZWRUby5jbGFzc0xpc3QuYWRkKFwiYWNkLWhpZGRlblwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb21wdXRlVG9vbGJveFNpemUodG9vbGJveDogVG9vbGJveCkge1xyXG4gICAgICAgIGxldCBib3VuZGluZ1JlY3QgPSB0aGlzLl9hdHRhY2hlZFRvLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGxldCB0b29sYm94Qm91bmRpbmdSZWN0ID0gdG9vbGJveC5yZW5kZXJlZEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgICAgICAgdG9vbGJveC5yZW5kZXJlZEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gKDEwMCAvIGJvdW5kaW5nUmVjdC5oZWlnaHQgKiB0b29sYm94Qm91bmRpbmdSZWN0LmhlaWdodCkgKyBcIiVcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRvb2xib3gucmVuZGVyZWRFbGVtZW50LnN0eWxlLndpZHRoID0gKDEwMCAvIGJvdW5kaW5nUmVjdC53aWR0aCAqIHRvb2xib3hCb3VuZGluZ1JlY3Qud2lkdGgpICsgXCIlXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVzaXplZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5vblJlc2l6ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vblJlc2l6ZWQodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNhdmVTdGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdG9vbGJveFJlc2l6ZWQodG9vbGJveDogVG9vbGJveCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9uVG9vbGJveFJlc2l6ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vblRvb2xib3hSZXNpemVkKHRoaXMsIHRvb2xib3gpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRvb2xib3hFeHBhbmRlZE9yQ29sbGFwc2VkKHRvb2xib3g6IFRvb2xib3gpIHtcclxuICAgICAgICBpZiAodGhpcy5vblRvb2xib3hFeHBhbmRlZE9yQ29sbGFwc2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Ub29sYm94RXhwYW5kZWRPckNvbGxhcHNlZCh0aGlzLCB0b29sYm94KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREaW1lbnNpb25TZXR0aW5nTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlkICsgKHRoaXMuaXNWZXJ0aWNhbCA/IFwiSGVpZ2h0XCIgOiBcIldpZHRoXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0IGlzVmVydGljYWwoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FsaWdubWVudCA9PSBTaWRlUGFuZWxBbGlnbm1lbnQuUmlnaHQgfHwgdGhpcy5fYWxpZ25tZW50ID09IFNpZGVQYW5lbEFsaWdubWVudC5MZWZ0O1xyXG4gICAgfVxyXG5cclxuICAgIG9uUmVzaXplZDogKHNlbmRlcjogU2lkZVBhbmVsKSA9PiB2b2lkO1xyXG4gICAgb25Ub29sYm94UmVzaXplZDogKHNlbmRlcjogU2lkZVBhbmVsLCB0b29sYm94OiBUb29sYm94KSA9PiB2b2lkO1xyXG4gICAgb25Ub29sYm94RXhwYW5kZWRPckNvbGxhcHNlZDogKHNlbmRlcjogU2lkZVBhbmVsLCB0b29sYm94OiBUb29sYm94KSA9PiB2b2lkO1xyXG5cclxuICAgIHJlYWRvbmx5IGlkO1xyXG5cclxuICAgIHNpemU/OiBudW1iZXI7XHJcbiAgICBpc1Jlc2l6YWJsZTogYm9vbGVhbiA9IHRydWU7XHJcblxyXG4gICAgYWRkVG9vbGJveCh0b29sYm94OiBUb29sYm94KSB7XHJcbiAgICAgICAgbGV0IHRvb2xib3hJbmZvID0gbmV3IFRvb2xib3hJbmZvKHRvb2xib3gpO1xyXG4gICAgICAgIHRvb2xib3hJbmZvLm9uVG9nZ2xlZCA9IChzZW5kZXI6IFRvb2xib3hJbmZvKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTGF5b3V0KCk7XHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJveEV4cGFuZGVkT3JDb2xsYXBzZWQodG9vbGJveEluZm8udG9vbGJveCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRvb2xib3hJbmZvLm9uUmVzaXplRW5kZWQgPSAoc2VuZGVyOiBUb29sYm94SW5mbykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVUb29sYm94U2l6ZShzZW5kZXIudG9vbGJveCk7XHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJveFJlc2l6ZWQoc2VuZGVyLnRvb2xib3gpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0b29sYm94SW5mby5vblJlc2l6ZWQgPSAoc2VuZGVyOiBUb29sYm94SW5mbykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRvb2xib3hSZXNpemVkKHNlbmRlci50b29sYm94KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3Rvb2xib3hlcy5wdXNoKHRvb2xib3hJbmZvKTtcclxuICAgIH1cclxuXHJcbiAgICBhdHRhY2hUbyhhdHRhY2hUbzogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9hdHRhY2hlZFRvID0gYXR0YWNoVG87XHJcblxyXG4gICAgICAgIHRoaXMuX2NvbnRlbnRIb3N0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLl9jb250ZW50SG9zdC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgdGhpcy5fY29udGVudEhvc3Quc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xyXG4gICAgICAgIHRoaXMuX2NvbnRlbnRIb3N0LnN0eWxlLmZsZXggPSBcIjEgMSBhdXRvXCI7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgICAgICAgdGhpcy5fY29udGVudEhvc3Quc3R5bGUuZmxleERpcmVjdGlvbiA9IFwiY29sdW1uXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9jb250ZW50SG9zdC5zdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJyb3dcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fdG9vbGJveGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB0b29sYm94SW5mbyA9IHRoaXMuX3Rvb2xib3hlc1tpXTtcclxuICAgICAgICAgICAgdG9vbGJveEluZm8udG9vbGJveC5yZW5kZXIoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzVmVydGljYWwgPyBUb29sYm94T3JpZW50YXRpb24uVmVydGljYWwgOiBUb29sYm94T3JpZW50YXRpb24uSG9yaXpvbnRhbCxcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbGxhcHNlZFRhYkNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICBpZiAoaSA+IDApIHtcclxuICAgICAgICAgICAgICAgIGxldCBzcGxpdHRlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBzcGxpdHRlckVsZW1lbnQuY2xhc3NOYW1lID0gXCJhY2QtaG9yaXpvbnRhbC1zcGxpdHRlclwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0b29sYm94SW5mby50b29sYm94LnJlbmRlcmVkRWxlbWVudC5zdHlsZS5oZWlnaHQgPSAoMTAwIC8gdGhpcy5fdG9vbGJveGVzLmxlbmd0aCkgKyBcIiVcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNwbGl0dGVyRWxlbWVudC5jbGFzc05hbWUgPSBcImFjZC12ZXJ0aWNhbC1zcGxpdHRlclwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0b29sYm94SW5mby50b29sYm94LnJlbmRlcmVkRWxlbWVudC5zdHlsZS53aWR0aCA9ICgxMDAgLyB0aGlzLl90b29sYm94ZXMubGVuZ3RoKSArIFwiJVwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRlbnRIb3N0LmFwcGVuZENoaWxkKHNwbGl0dGVyRWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdG9vbGJveEluZm8uc3BsaXR0ZXIgPSBuZXcgU3BsaXR0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgc3BsaXR0ZXJFbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvb2xib3hJbmZvLnRvb2xib3gucmVuZGVyZWRFbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICF0aGlzLmlzVmVydGljYWwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9jb250ZW50SG9zdC5hcHBlbmRDaGlsZCh0b29sYm94SW5mby50b29sYm94LnJlbmRlcmVkRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc3BsaXR0ZXJFbGVtZW50OiBIVE1MRWxlbWVudCA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzUmVzaXphYmxlKSB7XHJcbiAgICAgICAgICAgIHNwbGl0dGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIHNwbGl0dGVyRWxlbWVudC5jbGFzc05hbWUgPSB0aGlzLmlzVmVydGljYWwgPyBcImFjZC12ZXJ0aWNhbC1zcGxpdHRlclwiIDogXCJhY2QtaG9yaXpvbnRhbC1zcGxpdHRlclwiO1xyXG5cclxuICAgICAgICAgICAgbGV0IHNwbGl0dGVyID0gbmV3IFNwbGl0dGVyKFxyXG4gICAgICAgICAgICAgICAgc3BsaXR0ZXJFbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fYXR0YWNoZWRUbyxcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNWZXJ0aWNhbCxcclxuICAgICAgICAgICAgICAgIHRoaXMuX2FsaWdubWVudCA9PSBTaWRlUGFuZWxBbGlnbm1lbnQuTGVmdCB8fCB0aGlzLl9hbGlnbm1lbnQgPT0gU2lkZVBhbmVsQWxpZ25tZW50LlRvcCk7XHJcbiAgICAgICAgICAgIHNwbGl0dGVyLm9uUmVzaXplZCA9IChzcGxpdHRlcjogU3BsaXR0ZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzaXplZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9hdHRhY2hlZFRvLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5fYXR0YWNoZWRUby5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYXR0YWNoZWRUby5zdHlsZS53aWR0aCA9IHRoaXMuc2l6ZSArIFwicHhcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fYXR0YWNoZWRUby5zdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJyb3dcIjtcclxuICAgICAgICAgICAgdGhpcy5fYXR0YWNoZWRUby5zdHlsZS5vdmVyZmxvd1ggPSBcImhpZGRlblwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYXR0YWNoZWRUby5zdHlsZS5oZWlnaHQgPSB0aGlzLnNpemUgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2F0dGFjaGVkVG8uc3R5bGUuZmxleERpcmVjdGlvbiA9IFwiY29sdW1uXCI7XHJcbiAgICAgICAgICAgIHRoaXMuX2F0dGFjaGVkVG8uc3R5bGUub3ZlcmZsb3dZID0gXCJoaWRkZW5cIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9hbGlnbm1lbnQgPT0gU2lkZVBhbmVsQWxpZ25tZW50LlJpZ2h0IHx8IHRoaXMuX2FsaWdubWVudCA9PSBTaWRlUGFuZWxBbGlnbm1lbnQuQm90dG9tKSB7XHJcbiAgICAgICAgICAgIGlmIChzcGxpdHRlckVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2F0dGFjaGVkVG8uYXBwZW5kQ2hpbGQoc3BsaXR0ZXJFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fYXR0YWNoZWRUby5hcHBlbmRDaGlsZCh0aGlzLl9jb250ZW50SG9zdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9hdHRhY2hlZFRvLmFwcGVuZCh0aGlzLl9jb250ZW50SG9zdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc3BsaXR0ZXJFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hdHRhY2hlZFRvLmFwcGVuZENoaWxkKHNwbGl0dGVyRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucmVzdG9yZVN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nLCBhbGlnbm1lbnQ6IFNpZGVQYW5lbEFsaWdubWVudCwgY29sbGFwc2VkVGFiQ29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuaWQgPSBpZDtcclxuICAgICAgICB0aGlzLl9hbGlnbm1lbnQgPSBhbGlnbm1lbnQ7XHJcbiAgICAgICAgdGhpcy5fY29sbGFwc2VkVGFiQ29udGFpbmVyID0gY29sbGFwc2VkVGFiQ29udGFpbmVyO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmVTdGF0ZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2lzUmVzdG9yaW5nKSB7XHJcbiAgICAgICAgICAgIFNldHRpbmdzTWFuYWdlci50cnlTYXZlU2V0dGluZyhcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGltZW5zaW9uU2V0dGluZ05hbWUoKSxcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNWZXJ0aWNhbCA/IHRoaXMuX2F0dGFjaGVkVG8uc3R5bGUud2lkdGggOiB0aGlzLl9hdHRhY2hlZFRvLnN0eWxlLmhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCB0b29sYm94SW5mbyBvZiB0aGlzLl90b29sYm94ZXMpIHtcclxuICAgICAgICAgICAgICAgIHRvb2xib3hJbmZvLnRvb2xib3guc2F2ZVN0YXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVzdG9yZVN0YXRlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9hdHRhY2hlZFRvICYmICF0aGlzLl9pc1Jlc3RvcmluZykge1xyXG4gICAgICAgICAgICB0aGlzLl9pc1Jlc3RvcmluZyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGRpbWVuc2lvblNldHRpbmcgPSBTZXR0aW5nc01hbmFnZXIudHJ5TG9hZFN0cmluZ1NldHRpbmcodGhpcy5nZXREaW1lbnNpb25TZXR0aW5nTmFtZSgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGltZW5zaW9uU2V0dGluZy5zdWNjZWVkZWQgJiYgZGltZW5zaW9uU2V0dGluZy52YWx1ZSAhPSB1bmRlZmluZWQgJiYgZGltZW5zaW9uU2V0dGluZy52YWx1ZSAhPSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdHRhY2hlZFRvLnN0eWxlLndpZHRoID0gZGltZW5zaW9uU2V0dGluZy52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F0dGFjaGVkVG8uc3R5bGUuaGVpZ2h0ID0gZGltZW5zaW9uU2V0dGluZy52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdG9vbGJveEluZm8gb2YgdGhpcy5fdG9vbGJveGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbGJveEluZm8udG9vbGJveC5yZXN0b3JlU3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNpemVkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pc1Jlc3RvcmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb250ZW50SG9zdCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRlbnRIb3N0O1xyXG4gICAgfVxyXG59IiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuaW1wb3J0IHsgSVBvaW50IH0gZnJvbSBcIi4vbWlzY2VsbGFuZW91c1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNwbGl0dGVyIHtcclxuICAgIHByaXZhdGUgX2lzVmVydGljYWw6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgX2lzQXR0YWNoZWRBZnRlcjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfc2l6ZWRFTGVtZW50OiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgX2lzUG9pbnRlckRvd246IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIF9sYXN0Q2xpY2tlZE9mZnNldDogSVBvaW50O1xyXG5cclxuICAgIHByaXZhdGUgcmVzaXplRW5kZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub25SZXNpemVFbmRlZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uUmVzaXplRW5kZWQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcG9pbnRlckRvd24oZTogUG9pbnRlckV2ZW50KSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICB0aGlzLmF0dGFjaGVkVG8uc2V0UG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpO1xyXG5cclxuICAgICAgICB0aGlzLl9sYXN0Q2xpY2tlZE9mZnNldCA9IHsgeDogZS54LCB5OiBlLnkgfTtcclxuXHJcbiAgICAgICAgdGhpcy5faXNQb2ludGVyRG93biA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwb2ludGVyTW92ZShlOiBQb2ludGVyRXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5faXNQb2ludGVyRG93bikge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgc2l6ZUFwcGxpZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgbGV0IG5ld1NpemU6IG51bWJlcjtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc1ZlcnRpY2FsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNBdHRhY2hlZEFmdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3U2l6ZSA9IHRoaXMuX3NpemVkRUxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAtICh0aGlzLl9sYXN0Q2xpY2tlZE9mZnNldC54IC0gZS54KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1NpemUgPSB0aGlzLl9zaXplZEVMZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggLSAoZS54IC0gdGhpcy5fbGFzdENsaWNrZWRPZmZzZXQueCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG5ld1NpemUgPj0gdGhpcy5taW5pbXVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2l6ZWRFTGVtZW50LnN0eWxlLndpZHRoID0gbmV3U2l6ZSArIFwicHhcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZUFwcGxpZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzQXR0YWNoZWRBZnRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1NpemUgPSB0aGlzLl9zaXplZEVMZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IC0gKHRoaXMuX2xhc3RDbGlja2VkT2Zmc2V0LnkgLSBlLnkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3U2l6ZSA9IHRoaXMuX3NpemVkRUxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLSAoZS55IC0gdGhpcy5fbGFzdENsaWNrZWRPZmZzZXQueSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG5ld1NpemUgPj0gdGhpcy5taW5pbXVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2l6ZWRFTGVtZW50LnN0eWxlLmhlaWdodCA9IG5ld1NpemUgKyBcInB4XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVBcHBsaWVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHNpemVBcHBsaWVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vblJlc2l6ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUmVzaXplZCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9sYXN0Q2xpY2tlZE9mZnNldCA9IHsgeDogZS54LCB5OiBlLnkgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBvaW50ZXJVcChlOiBQb2ludGVyRXZlbnQpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuYXR0YWNoZWRUby5yZWxlYXNlUG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpO1xyXG5cclxuICAgICAgICB0aGlzLnJlc2l6ZUVuZGVkKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2lzUG9pbnRlckRvd24gPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBvblJlc2l6ZUVuZGVkOiAoc2VuZGVyOiBTcGxpdHRlcikgPT4gdm9pZDtcclxuICAgIG9uUmVzaXplZDogKHNlbmRlcjogU3BsaXR0ZXIpID0+IHZvaWQ7XHJcblxyXG4gICAgcmVhZG9ubHkgYXR0YWNoZWRUbzogSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgbWluaW11bTogbnVtYmVyID0gNTA7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgYXR0YWNoZWRUbzogSFRNTEVsZW1lbnQsXHJcbiAgICAgICAgc2l6ZWRFbGVtZW50OiBIVE1MRWxlbWVudCxcclxuICAgICAgICBpc1ZlcnRpY2FsOiBib29sZWFuID0gZmFsc2UsXHJcbiAgICAgICAgaXNBdHRhY2hlZEFmdGVyOiBib29sZWFuID0gZmFsc2UsXHJcbiAgICAgICAgbWluaW11bVNpemU6IG51bWJlciA9IDE0MCkge1xyXG4gICAgICAgIHRoaXMuYXR0YWNoZWRUbyA9IGF0dGFjaGVkVG87XHJcbiAgICAgICAgdGhpcy5fc2l6ZWRFTGVtZW50ID0gc2l6ZWRFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuX2lzVmVydGljYWwgPSBpc1ZlcnRpY2FsO1xyXG4gICAgICAgIHRoaXMuX2lzQXR0YWNoZWRBZnRlciA9IGlzQXR0YWNoZWRBZnRlcjtcclxuICAgICAgICB0aGlzLm1pbmltdW0gPSBtaW5pbXVtU2l6ZTtcclxuXHJcbiAgICAgICAgdGhpcy5hdHRhY2hlZFRvLm9ubW91c2Vkb3duID0gKGU6IE1vdXNlRXZlbnQpID0+IHtlLnByZXZlbnREZWZhdWx0KCk7IH07XHJcbiAgICAgICAgdGhpcy5hdHRhY2hlZFRvLm9ucG9pbnRlcmRvd24gPSAoZTogUG9pbnRlckV2ZW50KSA9PiB7IHRoaXMucG9pbnRlckRvd24oZSk7IH07XHJcbiAgICAgICAgdGhpcy5hdHRhY2hlZFRvLm9ucG9pbnRlcm1vdmUgPSAoZTogUG9pbnRlckV2ZW50KSA9PiB7IHRoaXMucG9pbnRlck1vdmUoZSk7IH07XHJcbiAgICAgICAgdGhpcy5hdHRhY2hlZFRvLm9ucG9pbnRlcnVwID0gKGU6IFBvaW50ZXJFdmVudCkgPT4geyB0aGlzLnBvaW50ZXJVcChlKTsgfTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgU3RyaW5ncyB7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgdG9vbGJveGVzID0ge1xyXG4gICAgICAgIHRvb2xQYWxldHRlOiB7XHJcbiAgICAgICAgICAgIHRpdGxlOiBcIkNhcmQgRWxlbWVudHNcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2FyZEVkaXRvcjoge1xyXG4gICAgICAgICAgICB0aXRsZTogXCJDYXJkIFBheWxvYWQgRWRpdG9yXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNhbXBsZURhdGFFZGl0b3I6IHtcclxuICAgICAgICAgICAgdGl0bGU6IFwiU2FtcGxlIERhdGEgRWRpdG9yXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHByb3BlcnR5U2hlZXQ6IHtcclxuICAgICAgICAgICAgdGl0bGU6IFwiRWxlbWVudCBQcm9wZXJ0aWVzXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNhcmRTdHJ1Y3R1cmU6IHtcclxuICAgICAgICAgICAgdGl0bGU6IFwiQ2FyZCBTdHJ1Y3R1cmVcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGF0YVN0cnVjdHVyZToge1xyXG4gICAgICAgICAgICB0aXRsZTogXCJEYXRhIFN0cnVjdHVyZVwiXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHN0YXRpYyBsb2FkaW5nRWRpdG9yID0gXCJMb2FkaW5nIGVkaXRvci4uLlwiO1xyXG59IiwiaW1wb3J0IHsgU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSBcIi4vc2V0dGluZ3MtbWFuYWdlclwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVG9vbGJveENvbW1hbmQge1xyXG4gICAgdGl0bGU6IHN0cmluZztcclxuICAgIGljb25DbGFzczogc3RyaW5nO1xyXG4gICAgZXhlY3V0ZTogKHNlbmRlcjogSVRvb2xib3hDb21tYW5kKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgZW51bSBUb29sYm94T3JpZW50YXRpb24ge1xyXG4gICAgSG9yaXpvbnRhbCxcclxuICAgIFZlcnRpY2FsXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUb29sYm94IHtcclxuICAgIHByaXZhdGUgX3JlbmRlcmVkRWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIF9oZWFkZXJSb290RWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIF9oZWFkZXJJY29uRWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIF9leHBhbmRDb2xsYXBzZUJ1dHRvbkVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBfY3VzdG9tQ29tbWFuZHNIb3N0OiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgX2NvbnRlbnRIb3N0OiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgX2lzRXhwYW5kZWQ6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgcHJpdmF0ZSBfY29udGVudDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIF9zdHJldGNoOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF9vcmllbnRhdGlvbjogVG9vbGJveE9yaWVudGF0aW9uO1xyXG4gICAgcHJpdmF0ZSBfaXNSZXN0b3Jpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgX2NvbGxhcHNlZFRhYkNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREaW1lbnNpb25TZXR0aW5nTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcIlRvb2xib3hcIiArIHRoaXMuaWQgKyAodGhpcy5fb3JpZW50YXRpb24gPT0gVG9vbGJveE9yaWVudGF0aW9uLlZlcnRpY2FsID8gXCJIZWlnaHRcIiA6IFwiV2lkdGhcIik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVDb250ZW50KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9jb250ZW50SG9zdCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jb250ZW50SG9zdC5pbm5lckhUTUwgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbnRlbnRIb3N0LmFwcGVuZENoaWxkKHRoaXMuX2NvbnRlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdG9nZ2xlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5vblRvZ2dsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vblRvZ2dsZWQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBvblRvZ2dsZWQ6IChzZW5kZXI6IFRvb2xib3gpID0+IHZvaWQ7XHJcblxyXG4gICAgcmVhZG9ubHkgaWQ6IHN0cmluZztcclxuICAgIHJlYWRvbmx5IHRpdGxlOiBzdHJpbmc7XHJcblxyXG4gICAgY29tbWFuZHM6IEFycmF5PElUb29sYm94Q29tbWFuZD4gPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcihvcmllbnRhdGlvbjogVG9vbGJveE9yaWVudGF0aW9uLCBjb2xsYXBzZWRUYWJDb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fb3JpZW50YXRpb24gPSBvcmllbnRhdGlvbjtcclxuICAgICAgICB0aGlzLl9jb2xsYXBzZWRUYWJDb250YWluZXIgPSBjb2xsYXBzZWRUYWJDb250YWluZXI7XHJcblxyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEVsZW1lbnQuc3R5bGUuZmxleERpcmVjdGlvbiA9IFwiY29sdW1uXCI7XHJcblxyXG4gICAgICAgIHRoaXMuX2hlYWRlclJvb3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLl9oZWFkZXJSb290RWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuX2hlYWRlclJvb3RFbGVtZW50LmNsYXNzTmFtZSA9IFwiYWNkLXRvb2xib3gtaGVhZGVyXCI7XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJDb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgaGVhZGVyQ29udGVudEVsZW1lbnQuY2xhc3NOYW1lID0gXCJhY2QtdG9vbGJveC1oZWFkZXItY29udGVudFwiO1xyXG5cclxuICAgICAgICBsZXQgaGVhZGVyVGl0bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgaGVhZGVyVGl0bGVFbGVtZW50LmNsYXNzTmFtZSA9IFwiYWNkLXRvb2xib3gtaGVhZGVyLXRpdGxlXCI7XHJcbiAgICAgICAgaGVhZGVyVGl0bGVFbGVtZW50LmlubmVyVGV4dCA9IHRoaXMudGl0bGU7XHJcblxyXG4gICAgICAgIGhlYWRlckNvbnRlbnRFbGVtZW50LmFwcGVuZENoaWxkKGhlYWRlclRpdGxlRWxlbWVudCk7XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJDb21tYW5kc0hvc3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgaGVhZGVyQ29tbWFuZHNIb3N0RWxlbWVudC5jbGFzc05hbWUgPSBcImFjZC10b29sYm94LWhlYWRlci1jb21tYW5kc0hvc3RcIjtcclxuXHJcbiAgICAgICAgdGhpcy5fY3VzdG9tQ29tbWFuZHNIb3N0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLl9jdXN0b21Db21tYW5kc0hvc3Quc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jb21tYW5kcykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBjb21tYW5kIG9mIHRoaXMuY29tbWFuZHMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBjb21tYW5kQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICBjb21tYW5kQnV0dG9uRWxlbWVudC5jbGFzc05hbWUgPSBcImFjZC10b29sYm94LWhlYWRlci1jb21tYW5kQnV0dG9uXCI7XHJcbiAgICAgICAgICAgICAgICBjb21tYW5kQnV0dG9uRWxlbWVudC50aXRsZSA9IGNvbW1hbmQudGl0bGU7XHJcbiAgICAgICAgICAgICAgICBjb21tYW5kQnV0dG9uRWxlbWVudC5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb21tYW5kLmV4ZWN1dGUoY29tbWFuZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGNvbW1hbmRJY29uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICBjb21tYW5kSWNvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImFjZC1pY29uXCIsIGNvbW1hbmQuaWNvbkNsYXNzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb21tYW5kQnV0dG9uRWxlbWVudC5hcHBlbmRDaGlsZChjb21tYW5kSWNvbkVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2N1c3RvbUNvbW1hbmRzSG9zdC5hcHBlbmRDaGlsZChjb21tYW5kQnV0dG9uRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGhlYWRlckNvbW1hbmRzSG9zdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fY3VzdG9tQ29tbWFuZHNIb3N0KTtcclxuXHJcbiAgICAgICAgdGhpcy5fZXhwYW5kQ29sbGFwc2VCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgdGhpcy5fZXhwYW5kQ29sbGFwc2VCdXR0b25FbGVtZW50LmNsYXNzTmFtZSA9IFwiYWNkLXRvb2xib3gtaGVhZGVyLWNvbW1hbmRCdXR0b25cIjtcclxuICAgICAgICB0aGlzLl9leHBhbmRDb2xsYXBzZUJ1dHRvbkVsZW1lbnQudGl0bGUgPSBcIkhpZGVcIjtcclxuXHJcbiAgICAgICAgdGhpcy5faGVhZGVySWNvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKVxyXG4gICAgICAgIHRoaXMuX2hlYWRlckljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJhY2QtaWNvblwiLCBcImFjZC1pY29uLWhlYWRlci1leHBhbmRlZFwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5fZXhwYW5kQ29sbGFwc2VCdXR0b25FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2hlYWRlckljb25FbGVtZW50KTtcclxuXHJcbiAgICAgICAgdGhpcy5fZXhwYW5kQ29sbGFwc2VCdXR0b25FbGVtZW50Lm9ubW91c2Vkb3duID0gKGUpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9leHBhbmRDb2xsYXBzZUJ1dHRvbkVsZW1lbnQub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlKCk7XHJcblxyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGhlYWRlckNvbW1hbmRzSG9zdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fZXhwYW5kQ29sbGFwc2VCdXR0b25FbGVtZW50KTtcclxuXHJcbiAgICAgICAgaGVhZGVyQ29udGVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoaGVhZGVyQ29tbWFuZHNIb3N0RWxlbWVudCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2hlYWRlclJvb3RFbGVtZW50LmFwcGVuZENoaWxkKGhlYWRlckNvbnRlbnRFbGVtZW50KTtcclxuXHJcbiAgICAgICAgdGhpcy5fY29udGVudEhvc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuX2NvbnRlbnRIb3N0LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XHJcblxyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudC5hcHBlbmQodGhpcy5faGVhZGVyUm9vdEVsZW1lbnQsIHRoaXMuX2NvbnRlbnRIb3N0KTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29sbGFwc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzRXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5faGVhZGVySWNvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImFjZC1pY29uLWhlYWRlci1jb2xsYXBzZWRcIik7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYWRlckljb25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJhY2QtaWNvbi1oZWFkZXItZXhwYW5kZWRcIik7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1c3RvbUNvbW1hbmRzSG9zdC5jbGFzc0xpc3QuYWRkKFwiYWNkLWhpZGRlblwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb2xsYXBzZWRUYWJDb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVkRWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLl9oZWFkZXJSb290RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jb2xsYXBzZWRUYWJDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5faGVhZGVyUm9vdEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9leHBhbmRDb2xsYXBzZUJ1dHRvbkVsZW1lbnQudGl0bGUgPSBcIlNob3dcIjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2lzRXhwYW5kZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBhbmQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pc0V4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYWRlckljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJhY2QtaWNvbi1oZWFkZXItZXhwYW5kZWRcIik7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYWRlckljb25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJhY2QtaWNvbi1oZWFkZXItY29sbGFwc2VkXCIpO1xyXG4gICAgICAgICAgICB0aGlzLl9jdXN0b21Db21tYW5kc0hvc3QuY2xhc3NMaXN0LnJlbW92ZShcImFjZC1oaWRkZW5cIik7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fY29sbGFwc2VkVGFiQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jb2xsYXBzZWRUYWJDb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5faGVhZGVyUm9vdEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRFbGVtZW50Lmluc2VydEJlZm9yZSh0aGlzLl9oZWFkZXJSb290RWxlbWVudCwgdGhpcy5fcmVuZGVyZWRFbGVtZW50LmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9leHBhbmRDb2xsYXBzZUJ1dHRvbkVsZW1lbnQudGl0bGUgPSBcIkhpZGVcIjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2lzRXhwYW5kZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy50b2dnbGVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0V4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sbGFwc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEhlYWRlckJvdW5kaW5nUmVjdCgpOiBDbGllbnRSZWN0IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faGVhZGVyUm9vdEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVN0YXRlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5faXNSZXN0b3JpbmcpIHtcclxuICAgICAgICAgICAgU2V0dGluZ3NNYW5hZ2VyLnRyeVNhdmVTZXR0aW5nKFwiVG9vbGJveFwiICsgdGhpcy5pZCArIFwiSXNFeHBhbmRlZFwiLCB0aGlzLmlzRXhwYW5kZWQudG9TdHJpbmcoKSk7XHJcblxyXG4gICAgICAgICAgICBTZXR0aW5nc01hbmFnZXIudHJ5U2F2ZVNldHRpbmcoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldERpbWVuc2lvblNldHRpbmdOYW1lKCksXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9yaWVudGF0aW9uID09IFRvb2xib3hPcmllbnRhdGlvbi5WZXJ0aWNhbCA/IHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLmhlaWdodCA6IHRoaXMucmVuZGVyZWRFbGVtZW50LnN0eWxlLndpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVzdG9yZVN0YXRlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkRWxlbWVudCAmJiAhdGhpcy5faXNSZXN0b3JpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5faXNSZXN0b3JpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGxldCBkaW1lbnNpb25TZXR0aW5nID0gU2V0dGluZ3NNYW5hZ2VyLnRyeUxvYWRTdHJpbmdTZXR0aW5nKHRoaXMuZ2V0RGltZW5zaW9uU2V0dGluZ05hbWUoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRpbWVuc2lvblNldHRpbmcuc3VjY2VlZGVkICYmIGRpbWVuc2lvblNldHRpbmcudmFsdWUgIT0gdW5kZWZpbmVkICYmIGRpbWVuc2lvblNldHRpbmcudmFsdWUgIT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9yaWVudGF0aW9uID09IFRvb2xib3hPcmllbnRhdGlvbi5WZXJ0aWNhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBkaW1lbnNpb25TZXR0aW5nLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuc3R5bGUud2lkdGggPSBkaW1lbnNpb25TZXR0aW5nLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgaXNFeHBhbmRlZFNldHRpbmcgPSBTZXR0aW5nc01hbmFnZXIudHJ5TG9hZEJvb2xlYW5TZXR0aW5nKFwiVG9vbGJveFwiICsgdGhpcy5pZCArIFwiSXNFeHBhbmRlZFwiLCB0cnVlKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChpc0V4cGFuZGVkU2V0dGluZy5zdWNjZWVkZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNFeHBhbmRlZFNldHRpbmcudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pc1Jlc3RvcmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBvcmllbnRhdGlvbigpOiBUb29sYm94T3JpZW50YXRpb24ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcmllbnRhdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcmVuZGVyZWRFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyZWRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb250ZW50KCk6IEhUTUxFbGVtZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29udGVudDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgY29udGVudCh2YWx1ZTogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb250ZW50ID0gdmFsdWU7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlQ29udGVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpc0V4cGFuZGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc0V4cGFuZGVkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzdHJldGNoKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdHJldGNoO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBzdHJldGNoKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fc3RyZXRjaCA9IHZhbHVlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fc3RyZXRjaCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5zdHlsZS5mbGV4ID0gXCIxIDEgYXV0b1wiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuc3R5bGUuZmxleCA9IFwiMCAwIGF1dG9cIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5pbXBvcnQgKiBhcyBEZXNpZ25lclN1cmZhY2UgZnJvbSBcIi4vY2FyZC1kZXNpZ25lci1zdXJmYWNlXCI7XHJcbmltcG9ydCAqIGFzIERlc2lnbmVyUGVlcnMgZnJvbSBcIi4vZGVzaWduZXItcGVlcnNcIjtcclxuaW1wb3J0ICogYXMgQWRhcHRpdmUgZnJvbSBcImFkYXB0aXZlY2FyZHNcIjtcclxuaW1wb3J0IHsgRHJhZ2dhYmxlRWxlbWVudCB9IGZyb20gXCIuL2RyYWdnYWJsZS1lbGVtZW50XCI7XHJcbmltcG9ydCB7IEZpZWxkRGVmaW5pdGlvbiB9IGZyb20gXCIuL2RhdGFcIjtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlUGFsZXR0ZUl0ZW0gZXh0ZW5kcyBEcmFnZ2FibGVFbGVtZW50IHtcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBnZXRUZXh0KCk6IHN0cmluZztcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBnZXRJY29uQ2xhc3MoKTogc3RyaW5nO1xyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gXCJhY2QtcGFsZXR0ZS1pdGVtXCI7XHJcbiAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcblxyXG4gICAgICAgIGxldCBpY29uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgaWNvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImFjZC1pY29uXCIsIFwiYWNkLXRvb2xQYWxldHRlLWljb25cIiwgdGhpcy5nZXRJY29uQ2xhc3MoKSk7XHJcbiAgICAgICAgaWNvbkVsZW1lbnQuc3R5bGUuZmxleCA9IFwiMCAwIGF1dG9cIjtcclxuXHJcbiAgICAgICAgbGV0IGxhYmVsRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbGFiZWxFbGVtZW50LmNsYXNzTmFtZSA9IFwiYWNkLXBhbGV0dGUtaXRlbS1sYWJlbFwiO1xyXG4gICAgICAgIGxhYmVsRWxlbWVudC5zdHlsZS5mbGV4ID0gXCIxIDEgMTAwJVwiO1xyXG4gICAgICAgIGxhYmVsRWxlbWVudC5pbm5lclRleHQgPSB0aGlzLmdldFRleHQoKTtcclxuXHJcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChpY29uRWxlbWVudCk7XHJcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChsYWJlbEVsZW1lbnQpO1xyXG5cclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJEcmFnVmlzdWFsKCk6IEhUTUxFbGVtZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFJlbmRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGFic3RyYWN0IGNyZWF0ZVBlZXIoZGVzaWduZXI6IERlc2lnbmVyU3VyZmFjZS5DYXJkRGVzaWduZXJTdXJmYWNlKTogRGVzaWduZXJQZWVycy5DYXJkRWxlbWVudFBlZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFbGVtZW50UGFsZXR0ZUl0ZW0gZXh0ZW5kcyBCYXNlUGFsZXR0ZUl0ZW0ge1xyXG4gICAgcHJvdGVjdGVkIGdldFRleHQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50eXBlUmVnaXN0cmF0aW9uLnR5cGVOYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRJY29uQ2xhc3MoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZWVyUmVnaXN0cmF0aW9uLmljb25DbGFzcztcclxuICAgIH1cclxuXHJcbiAgICByZWFkb25seSB0eXBlUmVnaXN0cmF0aW9uOiBBZGFwdGl2ZS5JVHlwZVJlZ2lzdHJhdGlvbjxBZGFwdGl2ZS5DYXJkRWxlbWVudD47XHJcbiAgICByZWFkb25seSBwZWVyUmVnaXN0cmF0aW9uOiBEZXNpZ25lclBlZXJzLkRlc2lnbmVyUGVlclJlZ2lzdHJhdGlvbkJhc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IodHlwZVJlZ2lzdHJhdGlvbjogQWRhcHRpdmUuSVR5cGVSZWdpc3RyYXRpb248QWRhcHRpdmUuQ2FyZEVsZW1lbnQ+LCBwZWVyUmVnaXN0cmF0aW9uOiBEZXNpZ25lclBlZXJzLkRlc2lnbmVyUGVlclJlZ2lzdHJhdGlvbkJhc2UpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLnR5cGVSZWdpc3RyYXRpb24gPSB0eXBlUmVnaXN0cmF0aW9uO1xyXG4gICAgICAgIHRoaXMucGVlclJlZ2lzdHJhdGlvbiA9IHBlZXJSZWdpc3RyYXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlUGVlcihkZXNpZ25lcjogRGVzaWduZXJTdXJmYWNlLkNhcmREZXNpZ25lclN1cmZhY2UpOiBEZXNpZ25lclBlZXJzLkNhcmRFbGVtZW50UGVlciB7XHJcbiAgICAgICAgbGV0IHBlZXIgPSBEZXNpZ25lclN1cmZhY2UuQ2FyZERlc2lnbmVyU3VyZmFjZS5jYXJkRWxlbWVudFBlZXJSZWdpc3RyeS5jcmVhdGVQZWVySW5zdGFuY2UoZGVzaWduZXIsIG51bGwsIHRoaXMudHlwZVJlZ2lzdHJhdGlvbi5jcmVhdGVJbnN0YW5jZSgpKTtcclxuICAgICAgICBwZWVyLmluaXRpYWxpemVDYXJkRWxlbWVudCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gcGVlcjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERhdGFQYWxldHRlSXRlbSBleHRlbmRzIEJhc2VQYWxldHRlSXRlbSB7XHJcbiAgICBwcm90ZWN0ZWQgZ2V0VGV4dCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpZWxkLm5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldEljb25DbGFzcygpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IGZpZWxkOiBGaWVsZERlZmluaXRpb24pIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVBlZXIoZGVzaWduZXI6IERlc2lnbmVyU3VyZmFjZS5DYXJkRGVzaWduZXJTdXJmYWNlKTogRGVzaWduZXJQZWVycy5DYXJkRWxlbWVudFBlZXIge1xyXG4gICAgICAgIGxldCBlbGVtZW50OiBBZGFwdGl2ZS5DYXJkRWxlbWVudDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZmllbGQuaXNDb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSBuZXcgQWRhcHRpdmUuQ29udGFpbmVyKCk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0Q3VzdG9tUHJvcGVydHkoXCIkZGF0YVwiLCBcIntcIiArIHRoaXMuZmllbGQuZ2V0UGF0aCgpICsgXCJ9XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IHRleHRCbG9jayA9IG5ldyBBZGFwdGl2ZS5UZXh0QmxvY2soKTtcclxuICAgICAgICAgICAgdGV4dEJsb2NrLnRleHQgPSBcIntcIiArIHRoaXMuZmllbGQuZ2V0UGF0aCgpICsgXCJ9XCI7XHJcblxyXG4gICAgICAgICAgICBlbGVtZW50ID0gdGV4dEJsb2NrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHBlZXIgPSBEZXNpZ25lclN1cmZhY2UuQ2FyZERlc2lnbmVyU3VyZmFjZS5jYXJkRWxlbWVudFBlZXJSZWdpc3RyeS5jcmVhdGVQZWVySW5zdGFuY2UoZGVzaWduZXIsIG51bGwsIGVsZW1lbnQpO1xyXG4gICAgICAgIHBlZXIuaW5pdGlhbGl6ZUNhcmRFbGVtZW50KCk7XHJcblxyXG4gICAgICAgIHJldHVybiBwZWVyO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ3VzdG9tUGFsZXR0ZUl0ZW0gZXh0ZW5kcyBCYXNlUGFsZXR0ZUl0ZW0ge1xyXG4gICAgcmVhZG9ubHkgY2F0ZWdvcnk6IHN0cmluZztcclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0SWNvbkNsYXNzKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiYWNkLWljb24tY3VzdG9tUGFsZXR0ZUl0ZW1cIjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihjYXRlZ29yeTogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU25pcHBldFBhbGV0dGVJdGVtIGV4dGVuZHMgQ3VzdG9tUGFsZXR0ZUl0ZW0ge1xyXG4gICAgcHJvdGVjdGVkIGdldFRleHQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcclxuICAgIHNuaXBwZXQ6IG9iamVjdDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihjYXRlZ29yeTogc3RyaW5nLCBuYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcihjYXRlZ29yeSk7XHJcblxyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlUGVlcihkZXNpZ25lcjogRGVzaWduZXJTdXJmYWNlLkNhcmREZXNpZ25lclN1cmZhY2UpOiBEZXNpZ25lclBlZXJzLkNhcmRFbGVtZW50UGVlciB7XHJcbiAgICAgICAgaWYgKHRoaXMuc25pcHBldCkge1xyXG4gICAgICAgICAgICBsZXQgcm9vdEVsZW1lbnRUeXBlTmFtZSA9IHRoaXMuc25pcHBldFtcInR5cGVcIl07XHJcblxyXG4gICAgICAgICAgICBpZiAocm9vdEVsZW1lbnRUeXBlTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFkYXB0aXZlRWxlbWVudCA9IEFkYXB0aXZlLkFkYXB0aXZlQ2FyZC5lbGVtZW50VHlwZVJlZ2lzdHJ5LmNyZWF0ZUluc3RhbmNlKHJvb3RFbGVtZW50VHlwZU5hbWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhZGFwdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGFwdGl2ZUVsZW1lbnQucGFyc2UodGhpcy5zbmlwcGV0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBlZXIgPSBEZXNpZ25lclN1cmZhY2UuQ2FyZERlc2lnbmVyU3VyZmFjZS5jYXJkRWxlbWVudFBlZXJSZWdpc3RyeS5jcmVhdGVQZWVySW5zdGFuY2UoZGVzaWduZXIsIG51bGwsIGFkYXB0aXZlRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGVlci5pbml0aWFsaXplQ2FyZEVsZW1lbnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBlZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cclxuaW1wb3J0IHsgRHJvcERvd24sIERyb3BEb3duSXRlbSB9IGZyb20gXCJhZGFwdGl2ZWNhcmRzLWNvbnRyb2xzXCI7XHJcblxyXG5leHBvcnQgZW51bSBUb29sYmFyRWxlbWVudEFsaWdubWVudCB7XHJcbiAgICBMZWZ0LFxyXG4gICAgUmlnaHRcclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFRvb2xiYXJFbGVtZW50IHtcclxuICAgIHByaXZhdGUgX3JlbmRlcmVkRWxlbWVudDogSFRNTEVsZW1lbnQgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGludGVybmFsUmVuZGVyKCk6IEhUTUxFbGVtZW50O1xyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFVwZGF0ZUxheW91dCgpIHtcclxuICAgICAgICAvLyBEbyBub3RoaW5nIGluIGJhc2UgaW1wbGVtZW50YXRpb25cclxuICAgIH1cclxuXHJcbiAgICByZWFkb25seSBpZDogc3RyaW5nO1xyXG5cclxuICAgIGlzVmlzaWJsZTogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBzZXBhcmF0b3I6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIGxhYmVsOiBzdHJpbmcgPSBudWxsO1xyXG4gICAgYWxpZ25tZW50OiBUb29sYmFyRWxlbWVudEFsaWdubWVudCA9IFRvb2xiYXJFbGVtZW50QWxpZ25tZW50LkxlZnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIGlmICghaWQgfHwgaWQgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9vbGJhciBlbGVtZW50cyBtdXN0IGhhdmUgYW4gSWQuXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUxheW91dCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fcmVuZGVyZWRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxVcGRhdGVMYXlvdXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCk6IEhUTUxFbGVtZW50IHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEVsZW1lbnQgPSB0aGlzLmludGVybmFsUmVuZGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlTGF5b3V0KCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJlZEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHJlbmRlcmVkRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVkRWxlbWVudDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRvb2xiYXJCdXR0b24gZXh0ZW5kcyBUb29sYmFyRWxlbWVudCB7XHJcbiAgICBwcml2YXRlIF9jYXB0aW9uOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIF9kaXNwbGF5Q2FwdGlvbjogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBwcml2YXRlIF9pY29uQ2xhc3M6IHN0cmluZyA9IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgX3Rvb2xUaXA6IHN0cmluZyA9IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgX2lzRW5hYmxlZDogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBwcml2YXRlIF9hbGxvd1RvZ2dsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfaXNUb2dnbGVkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgcHJvdGVjdGVkIGNsaWNrZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub25DbGljaykge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2xpY2sodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFVwZGF0ZUxheW91dCgpIHtcclxuICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5jbGFzc05hbWUgPSBcImFjZC10b29sYmFyLWJ1dHRvblwiO1xyXG4gICAgICAgICh0aGlzLnJlbmRlcmVkRWxlbWVudCBhcyBIVE1MQnV0dG9uRWxlbWVudCkuZGlzYWJsZWQgPSAhdGhpcy5pc0VuYWJsZWQ7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzVG9nZ2xlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYWNkLXRvb2xiYXItYnV0dG9uLXRvZ2dsZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiYWNkLXRvb2xiYXItYnV0dG9uLXRvZ2dsZWRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pY29uQ2xhc3MpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmljb25DbGFzcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuZGlzcGxheUNhcHRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImFjZC10b29sYmFyLWJ1dHRvbi1pY29uT25seVwiKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEVsZW1lbnQuaW5uZXJUZXh0ID0gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LmlubmVyVGV4dCA9IHRoaXMuY2FwdGlvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyZWRFbGVtZW50LnRpdGxlID0gdGhpcy50b29sVGlwID8gdGhpcy50b29sVGlwIDogXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW50ZXJuYWxSZW5kZXIoKTogSFRNTEVsZW1lbnQge1xyXG4gICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuXHJcbiAgICAgICAgZWxlbWVudC5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsb3dUb2dnbGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNUb2dnbGVkID0gIXRoaXMuaXNUb2dnbGVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmNsaWNrZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xpY2s6IChzZW5kZXI6IFRvb2xiYXJCdXR0b24pID0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgaWQ6IHN0cmluZyxcclxuICAgICAgICBjYXB0aW9uOiBzdHJpbmcsXHJcbiAgICAgICAgaWNvbkNsYXNzOiBzdHJpbmcsXHJcbiAgICAgICAgb25DbGljazogKHNlbmRlcjogVG9vbGJhckJ1dHRvbikgPT4gdm9pZCA9IG51bGwpIHtcclxuICAgICAgICBzdXBlcihpZCk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FwdGlvbiA9IGNhcHRpb247XHJcbiAgICAgICAgdGhpcy5pY29uQ2xhc3MgPSBpY29uQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5vbkNsaWNrID0gb25DbGljaztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgYWxsb3dUb2dnbGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FsbG93VG9nZ2xlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBhbGxvd1RvZ2dsZSh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2FsbG93VG9nZ2xlID0gdmFsdWU7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5fYWxsb3dUb2dnbGUpIHtcclxuICAgICAgICAgICAgdGhpcy5pc1RvZ2dsZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzVG9nZ2xlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNUb2dnbGVkO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBpc1RvZ2dsZWQodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9pc1RvZ2dsZWQgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY2FwdGlvbigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXB0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBjYXB0aW9uKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9jYXB0aW9uID0gdmFsdWU7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlTGF5b3V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGRpc3BsYXlDYXB0aW9uKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaXNwbGF5Q2FwdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgZGlzcGxheUNhcHRpb24odmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9kaXNwbGF5Q2FwdGlvbiA9IHZhbHVlO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpY29uQ2xhc3MoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faWNvbkNsYXNzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBpY29uQ2xhc3ModmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX2ljb25DbGFzcyA9IHZhbHVlO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB0b29sVGlwKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rvb2xUaXA7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHRvb2xUaXAodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX3Rvb2xUaXAgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNFbmFibGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc0VuYWJsZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGlzRW5hYmxlZCh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuX2lzRW5hYmxlZCA9IHZhbHVlO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElDaG9pY2VQaWNrZXJJdGVtIHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHZhbHVlOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUb29sYmFyQ2hvaWNlUGlja2VyIGV4dGVuZHMgVG9vbGJhckVsZW1lbnQge1xyXG4gICAgcHJpdmF0ZSBfZHJvcERvd246IERyb3BEb3duO1xyXG5cclxuICAgIHByb3RlY3RlZCBpbnRlcm5hbFJlbmRlcigpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgdGhpcy5fZHJvcERvd24gPSBuZXcgRHJvcERvd24oKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgY2hvaWNlIG9mIHRoaXMuY2hvaWNlcykge1xyXG4gICAgICAgICAgICBsZXQgZHJvcERvd25JdGVtID0gbmV3IERyb3BEb3duSXRlbShjaG9pY2UudmFsdWUsIGNob2ljZS5uYW1lKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2Ryb3BEb3duLml0ZW1zLmFkZChkcm9wRG93bkl0ZW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZHJvcERvd24uc2VsZWN0ZWRJbmRleCA9IDA7XHJcbiAgICAgICAgdGhpcy5fZHJvcERvd24ub25WYWx1ZUNoYW5nZWQgPSAoc2VuZGVyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9uQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkNoYW5nZWQodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBwaWNrZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMud2lkdGggJiYgdGhpcy53aWR0aCA+IDApIHtcclxuICAgICAgICAgICAgcGlja2VyRWxlbWVudC5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyBcInB4XCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9kcm9wRG93bi5hdHRhY2gocGlja2VyRWxlbWVudCk7XHJcblxyXG4gICAgICAgIGxldCBwaWNrZXJDb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBwaWNrZXJDb250YWluZXJFbGVtZW50LmNsYXNzTmFtZSA9IFwiYWNkLXRvb2xiYXItY2hvaWNlUGlja2VyXCI7XHJcbiAgICAgICAgcGlja2VyQ29udGFpbmVyRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgcGlja2VyQ29udGFpbmVyRWxlbWVudC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubGFiZWwpIHtcclxuICAgICAgICAgICAgbGV0IGxhYmVsRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICBsYWJlbEVsZW1lbnQuY2xhc3NOYW1lID0gXCJhY2QtdG9vbGJhci1sYWJlbFwiO1xyXG4gICAgICAgICAgICBsYWJlbEVsZW1lbnQuaW5uZXJUZXh0ID0gdGhpcy5sYWJlbDtcclxuXHJcbiAgICAgICAgICAgIHBpY2tlckNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQobGFiZWxFbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHBpY2tlckNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQocGlja2VyRWxlbWVudCk7XHJcblxyXG4gICAgICAgIHJldHVybiBwaWNrZXJDb250YWluZXJFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlZDogKHNlbmRlcjogVG9vbGJhckNob2ljZVBpY2tlcikgPT4gdm9pZDtcclxuXHJcbiAgICBsYWJlbDogc3RyaW5nID0gbnVsbDtcclxuICAgIGNob2ljZXM6IEFycmF5PElDaG9pY2VQaWNrZXJJdGVtPiA9IFtdO1xyXG4gICAgd2lkdGg/OiBudW1iZXIgPSBudWxsO1xyXG5cclxuICAgIGdldCB2YWx1ZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kcm9wRG93bi52YWx1ZS5rZXk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNlbGVjdGVkSW5kZXgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZHJvcERvd24uc2VsZWN0ZWRJbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgc2VsZWN0ZWRJbmRleCh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fZHJvcERvd24uc2VsZWN0ZWRJbmRleCA9IHZhbHVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVG9vbGJhciB7XHJcbiAgICBwcml2YXRlIF9lbGVtZW50czogQXJyYXk8VG9vbGJhckVsZW1lbnQ+ID0gW107XHJcbiAgICBwcml2YXRlIF9hdHRhY2hlZFRvOiBIVE1MRWxlbWVudDtcclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVNlcGFyYXRvckVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xyXG4gICAgICAgIGxldCBzZXBhcmF0b3JFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBzZXBhcmF0b3JFbGVtZW50LmNsYXNzTmFtZSA9IFwiYWNkLXRvb2xiYXItc2VwYXJhdG9yXCI7XHJcblxyXG4gICAgICAgIHJldHVybiBzZXBhcmF0b3JFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyRWxlbWVudHNJbnRvKFxyXG4gICAgICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXHJcbiAgICAgICAgZWxlbWVudHM6IEFycmF5PFRvb2xiYXJFbGVtZW50PixcclxuICAgICAgICBzZXBhcmF0b3JQb3NpdGlvbjogVG9vbGJhckVsZW1lbnRBbGlnbm1lbnQpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50c1tpXS5zZXBhcmF0b3IgJiYgc2VwYXJhdG9yUG9zaXRpb24gPT0gVG9vbGJhckVsZW1lbnRBbGlnbm1lbnQuTGVmdCAmJiBpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlU2VwYXJhdG9yRWxlbWVudCgpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnRzW2ldLnJlbmRlcigpKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50c1tpXS5zZXBhcmF0b3IgJiYgc2VwYXJhdG9yUG9zaXRpb24gPT0gVG9vbGJhckVsZW1lbnRBbGlnbm1lbnQuUmlnaHQgJiYgaSA8IGVsZW1lbnRzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVNlcGFyYXRvckVsZW1lbnQoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXR0YWNoVG8oZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9hdHRhY2hlZFRvID0gZWxlbWVudDtcclxuICAgICAgICB0aGlzLl9hdHRhY2hlZFRvLmNsYXNzTmFtZSA9IFwiYWNkLXRvb2xiYXJcIjtcclxuICAgICAgICB0aGlzLl9hdHRhY2hlZFRvLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICB0aGlzLl9hdHRhY2hlZFRvLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJzcGFjZS1iZXR3ZWVuXCI7XHJcbiAgICAgICAgdGhpcy5fYXR0YWNoZWRUby5pbm5lckhUTUwgPSBcIlwiO1xyXG5cclxuICAgICAgICBsZXQgbGVmdEVsZW1lbnRzOiBBcnJheTxUb29sYmFyRWxlbWVudD4gPSBbXTtcclxuICAgICAgICBsZXQgcmlnaHRFbGVtZW50czogQXJyYXk8VG9vbGJhckVsZW1lbnQ+ID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGVsZW1lbnQgb2YgdGhpcy5fZWxlbWVudHMpIHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5hbGlnbm1lbnQgPT0gVG9vbGJhckVsZW1lbnRBbGlnbm1lbnQuTGVmdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnRFbGVtZW50cy5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRFbGVtZW50cy5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbGVmdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbGVmdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgbGVmdENvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcclxuXHJcbiAgICAgICAgbGV0IHJpZ2h0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICByaWdodENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICAgICAgcmlnaHRDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyRWxlbWVudHNJbnRvKFxyXG4gICAgICAgICAgICBsZWZ0Q29udGFpbmVyLFxyXG4gICAgICAgICAgICBsZWZ0RWxlbWVudHMsXHJcbiAgICAgICAgICAgIFRvb2xiYXJFbGVtZW50QWxpZ25tZW50LkxlZnQpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyRWxlbWVudHNJbnRvKFxyXG4gICAgICAgICAgICByaWdodENvbnRhaW5lcixcclxuICAgICAgICAgICAgcmlnaHRFbGVtZW50cyxcclxuICAgICAgICAgICAgVG9vbGJhckVsZW1lbnRBbGlnbm1lbnQuUmlnaHQpO1xyXG5cclxuICAgICAgICB0aGlzLl9hdHRhY2hlZFRvLmFwcGVuZENoaWxkKGxlZnRDb250YWluZXIpO1xyXG4gICAgICAgIHRoaXMuX2F0dGFjaGVkVG8uYXBwZW5kQ2hpbGQocmlnaHRDb250YWluZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEVsZW1lbnQoZWxlbWVudDogVG9vbGJhckVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50cy5wdXNoKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZDogc3RyaW5nKTogVG9vbGJhckVsZW1lbnQge1xyXG4gICAgICAgIGZvciAobGV0IGVsZW1lbnQgb2YgdGhpcy5fZWxlbWVudHMpIHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuaWQgPT0gZWxlbWVudElkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgaW5zZXJ0RWxlbWVudEFmdGVyKGVsZW1lbnQ6IFRvb2xiYXJFbGVtZW50LCBhZnRlckVsZW1lbnRJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9lbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZWxlbWVudHNbaV0uaWQgPT0gYWZ0ZXJFbGVtZW50SWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnRzLnNwbGljZShpICsgMSwgMCwgZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBZGQgYXMgdGhlIGxhc3QgZWxlbWVudCBpZiBubyBlbGVtZW50IHdhcyBmb3VuZCB3aXRoIHRoZVxyXG4gICAgICAgIC8vIHNwZWNpZmllZCBpZFxyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRzLnB1c2goZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5zZXJ0RWxlbWVudEJlZm9yZShlbGVtZW50OiBUb29sYmFyRWxlbWVudCwgYmVmb3JlRWxlbWVudElkOiBzdHJpbmcpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5fZWxlbWVudHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2VsZW1lbnRzW2ldLmlkID09IGJlZm9yZUVsZW1lbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudHMuc3BsaWNlKGksIDAsIGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSW5zZXJ0IGFzIGZpcnN0IGVsZW1lbnQgaWYgbm8gZWxlbWVudCB3YXMgZm91bmQgd2l0aCB0aGVcclxuICAgICAgICAvLyBzcGVjaWZpZWQgaWRcclxuICAgICAgICB0aGlzLl9lbGVtZW50cy5zcGxpY2UoMCwgMCwgZWxlbWVudCk7XHJcbiAgICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==