!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ACData=t():e.ACData=t()}(this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=["/","*","-","+","==","!=","<","<=",">",">="],s=["identifier","string","number","boolean"],a=function(){function e(){}return e.init=function(){e.rules.push({tokenType:void 0,regEx:/^\s/},{tokenType:"{",regEx:/^{/},{tokenType:"?#",regEx:/^\?#/},{tokenType:"}",regEx:/^}/},{tokenType:"[",regEx:/^\[/},{tokenType:"]",regEx:/^\]/},{tokenType:"(",regEx:/^\(/},{tokenType:")",regEx:/^\)/},{tokenType:"boolean",regEx:/^true|^false/},{tokenType:"identifier",regEx:/^[$a-z_]+/i},{tokenType:".",regEx:/^\./},{tokenType:",",regEx:/^,/},{tokenType:"+",regEx:/^\+/},{tokenType:"-",regEx:/^-/},{tokenType:"*",regEx:/^\*/},{tokenType:"/",regEx:/^\//},{tokenType:"==",regEx:/^==/},{tokenType:"!=",regEx:/^!=/},{tokenType:"<=",regEx:/^<=/},{tokenType:"<",regEx:/^</},{tokenType:">=",regEx:/^>=/},{tokenType:">",regEx:/^>/},{tokenType:"string",regEx:/^"([^"]*)"/},{tokenType:"string",regEx:/^'([^']*)'/},{tokenType:"number",regEx:/^\d*\.?\d+/})},e.parse=function(t){for(var n=[],r=0;r<t.length;){for(var o=t.substring(r),i=!1,s=0,a=e.rules;s<a.length;s++){var u=a[s],p=u.regEx.exec(o);if(p){if(p.length>2)throw new Error("A tokenizer rule matched more than one group.");void 0!==u.tokenType&&n.push({type:u.tokenType,value:p[1===p.length?0:1],originalPosition:r}),r+=p[0].length,i=!0;break}}if(!i)throw new Error("Unexpected character "+o[0]+" at position "+r)}return n},e.rules=[],e}();function u(e){if("number"==typeof e||"string"==typeof e||"boolean"==typeof e)return e;throw new Error("Invalid value type: "+typeof e)}a.init();var p=function(){function e(){this._functions=[]}return e.prototype.indexOf=function(e){return this._functions.findIndex(function(t){return t.name===e})},e.prototype.register=function(e,t){var n=this.indexOf(e);n>=0?this._functions[n].callback=t:this._functions.push({name:e,callback:t})},e.prototype.unregister=function(e){var t=this.indexOf(e);t>=0&&this._functions.splice(t,1)},e.prototype.find=function(e){var t=this.indexOf(e);return t>=0?this._functions[t]:void 0},e}(),c=function(){function e(){this._functions=new p,this._stateStack=[]}return e.init=function(){e._builtInFunctions.register("substr",function(e,t,n){return"string"==typeof e&&"number"==typeof t&&"number"==typeof n?e.substr(t,n):""}),e._builtInFunctions.register("JSON.parse",function(e){return JSON.parse(e)}),e._builtInFunctions.register("toString",function(e){return e.toString?e.toString():e}),e._builtInFunctions.register("parseInt",function(e,t){return"string"!=typeof e||void 0!==t&&"number"!=typeof t?e:parseInt(e,t)}),e._builtInFunctions.register("parseFloat",function(e){return"string"==typeof e?parseFloat(e):e}),e._builtInFunctions.register("if",function(e,t,n){return e?t:n}),e._builtInFunctions.register("toUpper",function(e){return"string"==typeof e?e.toUpperCase():e}),e._builtInFunctions.register("toLower",function(e){return"string"==typeof e?e.toLowerCase():e}),e._builtInFunctions.register("Date.format",function(e,t){var n;if("string"==typeof e)n=Date.parse(e);else{if("number"!=typeof e)return e;n=e}var r=new Date(n),o="compact";return"string"==typeof t&&(o=t.toLowerCase(),["long","short","compact"].indexOf(o)<0&&(o="compact")),"compact"===o?r.toLocaleDateString():r.toLocaleDateString(void 0,{day:"numeric",weekday:o,month:o,year:"numeric"})}),e._builtInFunctions.register("Time.format",function(e){var t;if("string"==typeof e)t=Date.parse(e);else{if("number"!=typeof e)return e;t=e}return new Date(t).toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})}),e._builtInFunctions.register("round",function(e){return"number"==typeof e?Math.round(e):e}),e._builtInFunctions.register("ceil",function(e){return"number"==typeof e?Math.ceil(e):e}),e._builtInFunctions.register("floor",function(e){return"number"==typeof e?Math.floor(e):e})},e.prototype.registerFunction=function(e,t){this._functions.register(e,t)},e.prototype.unregisterFunction=function(e){this._functions.unregister(e)},e.prototype.getFunction=function(t){var n=this._functions.find(t);return n||(n=e._builtInFunctions.find(t)),n?n.callback:void 0},e.prototype.isReservedField=function(t){return e._reservedFields.indexOf(t)>=0},e.prototype.saveState=function(){this._stateStack.push({$data:this.$data,$index:this.$index})},e.prototype.restoreLastState=function(){if(0===this._stateStack.length)throw new Error("There is no evaluation context state to restore.");var e=this._stateStack.pop();this.$data=e.$data,this.$index=e.$index},Object.defineProperty(e.prototype,"currentDataContext",{get:function(){return void 0!==this.$data?this.$data:this.$root},enumerable:!0,configurable:!0}),e._reservedFields=["$data","$root","$index"],e._builtInFunctions=new p,e}();t.EvaluationContext=c,c.init();var f=function(){},l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodes=[],t.allowNull=!0,t}return o(t,e),t.prototype.evaluate=function(e){for(var t=this.nodes.slice(),n=0,r=[["/","*"],["-","+"],["==","!=","<","<=",">",">="]];n<r.length;n++)for(var o=r[n],i=0;i<t.length;){var s=t[i];if(s instanceof g&&o.indexOf(s.operator)>=0){var a=u(t[i-1].evaluate(e)),p=u(t[i+1].evaluate(e));if(typeof a!=typeof p)throw new Error("Incompatible operands "+a+" and "+p+" for operator "+s.operator);var c=void 0;if("number"==typeof a&&"number"==typeof p)switch(s.operator){case"/":c=a/p;break;case"*":c=a*p;break;case"-":c=a-p;break;case"+":c=a+p}if("string"==typeof a&&"string"==typeof p)switch(s.operator){case"+":c=a+p}switch(s.operator){case"==":c=a===p;break;case"!=":c=a!==p;break;case"<":c=a<p;break;case"<=":c=a<=p;break;case">":c=a>p;break;case">=":c=a>=p}t.splice(i-1,3,new v(c)),i--}i++}return t[0].evaluate(e)},t}(f),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.evaluate=function(e){return this.identifier},t}(f),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.evaluate=function(e){return this.index.evaluate(e)},t}(f),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.functionName=null,t.parameters=[],t}return o(t,e),t.prototype.evaluate=function(e){var t=e.getFunction(this.functionName);if(void 0!==t){for(var n=[],r=0,o=this.parameters;r<o.length;r++){var i=o[r];n.push(i.evaluate(e))}return t.apply(void 0,n)}throw new Error("Undefined function: "+this.functionName)},t}(f),v=function(e){function t(t){var n=e.call(this)||this;return n.value=t,n}return o(t,e),t.prototype.evaluate=function(e){return this.value},t}(f),g=function(e){function t(t){var n=e.call(this)||this;return n.operator=t,n}return o(t,e),t.prototype.evaluate=function(e){throw new Error("An operator cannot be evaluated on its own.")},t}(f),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parts=[],t}return o(t,e),t.prototype.evaluate=function(e){for(var t=void 0,n=0;n<this.parts.length;){var r=this.parts[n];try{if(r instanceof h&&0===n)switch(r.identifier){case"$root":t=e.$root;break;case"$data":t=e.currentDataContext;break;case"$index":t=e.$index;break;default:t=e.currentDataContext[r.identifier]}else{var o=r.evaluate(e);t=0===n?o:"boolean"!=typeof o?t[o]:t[o.toString()]}}catch(e){return}n++}return t},t}(f),b=function(){function e(e){this._index=0,this._tokens=e}return e.prototype.unexpectedToken=function(){throw new Error("Unexpected token "+this.current.value+" at position "+this.current.originalPosition+".")},e.prototype.unexpectedEoe=function(){throw new Error("Unexpected end of expression.")},e.prototype.moveNext=function(){this._index++},e.prototype.parseToken=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.eoe&&this.unexpectedEoe();var n=this.current;return e.indexOf(this.current.type)<0&&this.unexpectedToken(),this.moveNext(),n},e.prototype.parseOptionalToken=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!this.eoe)return!(e.indexOf(this.current.type)<0)&&(this.moveNext(),!0);this.unexpectedEoe()},e.prototype.parseFunctionCall=function(e){var t=new y;t.functionName=e,this.parseToken("(");var n=this.parseExpression(),r=!1;if(n){t.parameters.push(n);do{if(r=this.parseOptionalToken(",")){var o=this.parseExpression();t.parameters.push(o)}}while(r)}return this.parseToken(")"),t},e.prototype.parseIdentifier=function(){var e=new h;return e.identifier=this.current.value,this.moveNext(),e},e.prototype.parseIndexer=function(){var e=new d;return this.parseToken("["),e.index=this.parseExpression(),this.parseToken("]"),e},e.prototype.parsePath=function(){for(var e=new x,t=["identifier","("];!this.eoe;){if(t.indexOf(this.current.type)<0)return e;switch(this.current.type){case"(":if(0===e.parts.length)this.moveNext(),e.parts.push(this.parseExpression()),this.parseToken(")");else{for(var n="",r=0,o=e.parts;r<o.length;r++){var i=o[r];i instanceof h||this.unexpectedToken(),""!==n&&(n+="."),n+=i.identifier}e.parts=[],e.parts.push(this.parseFunctionCall(n))}t=[".","["];break;case"[":e.parts.push(this.parseIndexer()),t=[".","(","["];break;case"identifier":e.parts.push(this.parseIdentifier()),t=[".","(","["];break;case".":this.moveNext(),t=["identifier"];break;default:t=[]}}},e.prototype.parseExpression=function(){for(var e=new l,t=s.concat("(","+","-");!this.eoe;){if(t.indexOf(this.current.type)<0)return 0===e.nodes.length&&this.unexpectedToken(),e;switch(this.current.type){case"(":case"identifier":e.nodes.push(this.parsePath()),t=i;break;case"string":case"number":case"boolean":"string"===this.current.type?e.nodes.push(new v(this.current.value)):"number"===this.current.type?e.nodes.push(new v(parseFloat(this.current.value))):e.nodes.push(new v("true"===this.current.value)),this.moveNext(),t=i;break;case"-":0===e.nodes.length?(e.nodes.push(new v(-1)),e.nodes.push(new g("*")),t=["identifier","number","("]):(e.nodes.push(new g(this.current.type)),t=s.concat("(")),this.moveNext();break;case"+":0===e.nodes.length?t=s.concat("("):(e.nodes.push(new g(this.current.type)),t=s.concat("(")),this.moveNext();break;case"*":case"/":case"==":case"!=":case"<":case"<=":case">":case">=":e.nodes.push(new g(this.current.type)),this.moveNext(),t=s.concat("(");break;default:t=[]}}},Object.defineProperty(e.prototype,"eoe",{get:function(){return this._index>=this._tokens.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"current",{get:function(){return this._tokens[this._index]},enumerable:!0,configurable:!0}),e.parseBinding=function(t){var n=new e(a.parse(t));n.parseToken("{");var r=!n.parseOptionalToken("?#"),o=n.parseExpression();return n.parseToken("}"),new _(t,o,r)},e}();t.ExpressionParser=b;var _=function(){function e(e,t,n){void 0===n&&(n=!0),this.expressionString=e,this.expression=t,this.allowNull=n}return e.prototype.evaluate=function(e){return this.expression.evaluate(e)},e}();t.Binding=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.undefinedExpressionValueSubstitutionString=void 0,e}();t.GlobalSettings=r},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(0)),r(n(3)),r(n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=function(){function e(){this._parts=[],this._shouldDropOwner=!1}return e.parse=function(t){var n=new e,o=0;do{var i=!1,s=o,a=void 0;do{a=!1,(s=t.indexOf("{",s))>=0&&s+1<t.length&&"{"===t[s+1]&&(s+=2,a=!0)}while(a);if(s>=0){var u=t.indexOf("}",s);if(u>=0){i=!0,s>o&&n._parts.push(t.substring(o,s));var p=t.substring(s,u+1),c=void 0;try{c=r.ExpressionParser.parseBinding(p)}catch(e){c=p}n._parts.push(c),o=u+1}}if(!i){n._parts.push(t.substr(o));break}}while(o<t.length);return 1===n._parts.length&&"string"==typeof n._parts[0]?n._parts[0]:n},e.prototype.evalExpression=function(e,t){var n=e.evaluate(t);return void 0===n&&(this._shouldDropOwner=this._shouldDropOwner||!e.allowNull),n},e.prototype.internalEvaluate=function(e){if(0!==this._parts.length){if(1===this._parts.length)return"string"==typeof this._parts[0]?this._parts[0]:this.evalExpression(this._parts[0],e);for(var t="",n=0,r=this._parts;n<r.length;n++){var i=r[n];if("string"==typeof i)t+=i;else{var s=this.evalExpression(i,e);void 0===s&&(s=o.GlobalSettings.undefinedExpressionValueSubstitutionString?o.GlobalSettings.undefinedExpressionValueSubstitutionString:i.expressionString),t+=s}}return t}},e.prototype.evaluate=function(e){return this._shouldDropOwner=!1,this.internalEvaluate(e)},Object.defineProperty(e.prototype,"shouldDropOwner",{get:function(){return this._shouldDropOwner},enumerable:!0,configurable:!0}),e}(),s=function(){function e(t){this.preparedPayload=e.prepare(t)}return e.prepare=function(t){if("string"==typeof t)return i.parse(t);if("object"==typeof t&&null!==t){if(Array.isArray(t)){for(var n=[],r=0,o=t;r<o.length;r++){var s=o[r];n.push(e.prepare(s))}return n}n={};for(var a=0,u=Object.keys(t);a<u.length;a++){var p=u[a];n[p]=e.prepare(t[p])}return n}return t},e.prototype.expandSingleObject=function(e){for(var t={},n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];if(!this._context.isReservedField(o)){var i=this.internalExpand(e[o]);void 0!==i&&(t[o]=i)}}return t},e.prototype.internalExpand=function(e){var t;if(this._context.saveState(),Array.isArray(e)){for(var n=[],r=0,o=e;r<o.length;r++){var s=o[r],a=this.internalExpand(s);null!==a&&(Array.isArray(a)?n=n.concat(a):n.push(a))}t=n}else if(e instanceof i)t=e.evaluate(this._context),e.shouldDropOwner&&(t=null);else if("object"==typeof e&&null!==e){var u=!1,p=e.$when;if(p instanceof i){var c=void 0;try{"boolean"!=typeof(c=p.evaluate(this._context))&&(c=!1)}catch(e){c=!1}u=!c}if(u)t=null;else{var f=e.$data;if(void 0!==f)if(f instanceof i&&(f=f.evaluate(this._context)),Array.isArray(f)){t=[];for(var l=0;l<f.length;l++){this._context.$data=f[l],this._context.$index=l;var h=this.expandSingleObject(e);null!==h&&t.push(h)}}else this._context.$data=f,t=this.expandSingleObject(e);else t=this.expandSingleObject(e)}}else t=e;return this._context.restoreLastState(),t},e.prototype.expand=function(e){return this._context=e,this.internalExpand(this.preparedPayload)},e}();t.Template=s}])});
//# sourceMappingURL=adaptivecards-templating.min.js.map